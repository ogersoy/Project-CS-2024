# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
The 3GPP transparent end-to-end packet-switched streaming service (PSS)
specification consists of seven 3GPP TSs: 3GPP TS 22.233 [1], 3GPP TS 26.233
[2], 3GPP TS 26.234 [3], 3GPP TS 26.244 [4], 3GPP TS 26.245 [5], 3GPP TS
26.246 [6], and the present document.
The TS 22.233 contains the service requirements for the PSS. The TS 26.233
provides an overview of the PSS. The TS 26.234 provides the details of the
protocols and codecs used by the PSS. The TS 26.244 defines the 3GPP file
format (3GP) used by the PSS and MMS services. The TS 26.245 defines the Timed
text format used by the PSS and MMS services. The TS 26.246 defines the 3GPP
SMIL language profile. The present document defines Progressive Download and
Dynamic Adaptive Streaming over HTTP.
The TS 26.244, TS 26.245 and TS 26.246 start with Release 6. Earlier releases
of the 3GPP file format, the Timed text format and the 3GPP SMIL language
profile can be found in TS 26.234.
The TS 26.247 starts with Release 10. Earlier releases of Progressive Download
and Dynamic Adaptive Streaming over HTTP can be found in TS 26.234.
# Introduction
Progressive Download and Dynamic Adaptive Streaming over HTTP (3GP-DASH)
collects a set of technologies how progressive download and adaptive streaming
of continuous media may be carried out exclusively over HTTP.
# 1 Scope
The present document specifies Progressive Download and Dynamic Adaptive
Streaming over HTTP (3GP-DASH). This specification is part of Packet-switched
Streaming Service (PSS) and 5G Media Streaming. HTTP-based progressive
download and dynamic adaptive streaming had initially been separated from TS
26.234 to differentiate from RTP-based streaming that is maintained in TS
26.234. HTTP-based progressive download and dynamic adaptive streaming may be
deployed independently from RTP-based PSS, for example by using standard
HTTP/1.1 servers for hosting data formatted as defined in the present
document, and in particular together with 5G Media Streaming.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TS 22.233: \"Transparent End-to-End Packet-switched Streaming
Service; Stage 1\".
[2] 3GPP TS 26.233: \"Transparent end-to-end Packet-switched Streaming service
(PSS); General description\".
[3] 3GPP TS 26.234: \"Transparent end-to-end packet switched streaming service
(PSS); Protocols and codecs\".
[4] 3GPP TS 26.244: \"Transparent end-to-end packet switched streaming service
(PSS); 3GPP file format (3GP)\".
[5] 3GPP TS 26.245: \"Transparent end-to-end packet switched streaming service
(PSS); Timed text format\".
[6] 3GPP TS 26.246: \"Transparent end-to-end packet switched streaming service
(PSS); 3GPP SMIL Language Profile\".
[7] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[8] IETF STD 0007: \"Transmission Control Protocol\", Postel J., September
1981.
[9] IETF RFC 2616: \"Hypertext Transfer Protocol -- HTTP/1.1\", Fielding R. et
al., June 1999.
[10] Open Mobile Alliance, Service and Content Protection for Mobile Broadcast
Services, Approved Version 1.0, February 2009.
[11] ISO/IEC 14496-12:2012 \| 15444-12:2012 \"Information technology - Coding
of audio-visual objects - Part 12: ISO base media file format\" \|
\"Information technology - JPEG 2000 image coding system - Part 12: ISO base
media file format\".
[12] IETF RFC 2818: \"HTTP Over TLS\", E. Rescorla, May 2000.
[13] IETF RFC 5646: \"Tags for Identifying Languages\", A. Phillips, M. Davis,
September 2009.
[14] (void)
[15] Open Mobile Alliance: \"DRM Content Format V 2.0\".
[16] Open Mobile Alliance: \"DRM Content Format V 2.1\".
[17] IETF RFC 3986: \"Uniform Resource Identifiers (URI): Generic Syntax\",
Berners-Lee T., Fielding R. and Masinter L., January 2005.
[18] IETF RFC 1952: \"**GZIP file format specification\" version 4.3,** P.
Deutsch, May 1996.
[19] IETF RFC 1738: \"Uniform Resource Locators (URL)\", December 1994.
[20] (void)
[21] (void)
[22] OMA-ERELD-DM-V1_2-20070209-A: \"Enabler Release Definition for OMA
Device\ +Management, Approved Version 1.2\"
[23] 3GPP TS 33.310: \"Network Domain Security (NDS); Authentication Framework
(AF)\".
[24] IETF RFC 2045: \"Multipurpose Internet Mail Extensions (MIME) Part One:
Format of Internet Message Bodies\".
[25] IETF RFC 2231: \"MIME Parameter Value and Encoded Word Extensions:
Character Sets, Languages, and Continuations\".
[26] IETF RFC 6381: \"The \'Codecs\' and \'Profiles\' Parameters for
\"Bucket\" Media Types,\" August 2011.
[27] Void.
[28] IEEE 1003.1-2008, IEEE Standard for Information Technology - Portable
Operating System Interface (POSIX), Base Specifications, Issue 7
[29] IETF RFC 4337, \"MIME Type Registration for MPEG-4,\" March 2006
[30] IETF RFC 3023, \"XML Media Types,\" January 2001.
[31] 3GPP TS 23.203: \"Policy and charging control architecture\".
[32] 3GPP TS 29.213: \"Policy and Charging Control signalling flows and
Quality of Service (QoS) parameter mapping\".
[33] 3GPP TS 29.214: \"Policy and Charging Control over Rx reference point\".
[34] void
[35] ITU-T Recommendation H.264 (04/2013): \"Advanced video coding for generic
audiovisual services\".
[36] 3GPP TR 26.946: \"Multimedia Broadcast/Multicast Service (MBMS); User
service guidelines\".
[37] IETF RFC 3629: \"UTF-8, a transformation format of ISO 10646,\" November
2003.
[38] IETF RFC 4288: \"Media Type Specifications and Registration Procedures,\"
December 2005.
[39] IETF RFC 4648: \"The Base16, Base32, and Base64 Data Encodings,\" October
2006.
[40] IETF RFC 5234: \"Augmented BNF for Syntax Specifications: ABNF\", Crocker
D. and Overell P., January 2008.
[41] 3GPP TR 26.905: \"Mobile stereoscopic 3D video\".
[42] 3GPP TS 26.346: \" Multimedia Broadcast/Multicast Service
(MBMS);Protocols and codecs\"
[43] ISO/IEC 23009-1:2020/Amd. 1\" Information technology -- Dynamic adaptive
streaming over HTTP (DASH) -- Part 1: Media presentation description and
segment formats\".
[44] ISO/IEC 23009-3 \"Information technology -- Dynamic adaptive streaming
over HTTP (DASH) -- Part 3: Implementation and Deployment Guidelines\".
[45] ISO/IEC 23009-2 \" Information technology -- Dynamic adaptive streaming
over HTTP (DASH) -- Part 2: Conformance and Reference Software\".
[46] 3GPP TR 26.938: \"Packet-switched Streaming Service (PSS); Improved
support for dynamic adaptive streaming over HTTP in 3GPP\".
[47] ISO/IEC 23001-7:2015: \"Information technology -- MPEG systems
technologies -- Part 7: Common encryption in ISO base media file format
files\".
> [48] IETF RFC 7164, \"RTP and Leap Seconds\", March 2014.
>
> [49] ITU-T P.1203 (11/2016), \"Parametric bitstream-based quality assessment
> of progressive download and adaptive audiovisual streaming services over
> reliable transport\".
>
> [50] ITU-T P.910 (04/2008), \"Subjective video quality assessment methods
> for multimedia applications\".
[51] \"Mobile Location Protocol (MLP) \", Open Mobile Alliance, OMA-LIF-
MLP-V3_1, Approved Version 3.1 -- 20 Sep 2011.
> [52] IEEE 1003.1-2008 \"IEEE Standard for Information Technology - Portable
> Operating System Interface (POSIX(R))\".
>
> [53] 3GPP TS 25.331 \"Radio Resource Control (RRC); Protocol
> specification\".
[54] ISO/IEC 23009-5:2017: \"Information Technology --- Dynamic adaptive
streaming over HTTP (DASH) --- Part 5: Server and network assisted DASH
(SAND)\".
[55] 3GPP TR 26.957: \"Study on Server And Network-assisted DASH (SAND) for
3GPP Multimedia Services\".
[56] IETF RFC 6455: \"The WebSocket Protocol\".
[57] 3GPP TS 23.003: \"Numbering, addressing and identification\".
[58] 3GPP TS 26.116: \"Television (TV) over 3GPP services; Video profiles\".
[59] 3GPP TS 36.331: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
Radio Resource Control (RRC); Protocol specification\".
[60] 3GPP TS 26.347: \" Multimedia Broadcast/Multicast Service (MBMS);
Application Programming Interface and URL\".
[61] 3GPP TS 27.007: \" Technical Specification Group Core Network and
Terminals; AT command set for User Equipment (UE)\".
> [62] DASH Industry Forum: \"DASH Player's Application Events and Timed
> Metadata Processing Model and APIs\", see under
> https://dashif.org/guidelines/.
>
> [63] 3GPP TS 28.405; \"Management of Quality of Experience (QoE) measurement
> collection; Control and configuration\"
[64] 3GPP TS 26.501: \"5G Media Streaming (5GMS); General description and
architecture\".
[65] 3GPP TS 26.511: \"5G Media Streaming (5GMS); Profiles, codecs and
formats\".
[66] 3GPP TS 26.512: \" 5G Media Streaming (5GMS); Protocols\".
[67] ISO/IEC 23000-19: \"Information Technology Multimedia Application Format
(MPEG-A) -- Part 19: Common Media Application Format (CMAF) for segmented
media\".
[68] DASH Industry Forum -- Guidelines for Interoperability: \"DASH Low
Latency Modes\", see https://dashif.org/guidelines/.
# 3 Definitions, abbreviations and conventions
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [7], in ISO/IEC 23009-1 [43], clause 3.1, and the following apply. A
term defined in the present document takes precedence over the definition of
the same term, if any, in TR 21.905 [7].
**frame-packed stereoscopic 3D video** : a video consisting of two views in
which both views were packed into a single stream before compression.
**multiview stereoscopic 3D video** : a video consisting of two views packed
into a single stream during compression.
**interactivity event:** Time interval, whose occurrence may be either pre-
scheduled or unscheduled during the presentation of a main program, within
which the user may engage with and/or consume interactive content.
**rebuffering** : a condition occuring in the media buffer when the buffer
fill level is sufficiently depleted and buffer exhaust is imminent, typically
resulting in suspended media playout.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[7] and the following apply.\ An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [7].
3GP 3GPP file format
3GP-DASH 3GPP Dynamic Adaptive Streaming over HTTP
5GMS 5G Media Streaming
AHS Adaptive HTTP Streaming
A/V Audio/Video
AVC Advanced Video Coding
CMAF Common Media Application Format
DANE DASH-Aware Network Element
DM Device Management
DNS Domain Name System
DRM Digital Rights Management
FQDN Fully Qualified Domain Name
HSD HTTP Streaming and Download
HTML Hypertext Markup Language
HTTP Hypertext Transfer Protocol
HTTPS Hypertext Transfer Protocol Secure
IDR Instantaneous Decoding Refresh
MPD Media Presentation Description
MPEG-2 TS Moving Picture Experts Group Transport Stream
MIME Multipurpose Internet Mail Extensions
MOS Mean Opinion Score
NAS Non-Access Stratum
OMA Open Mobile Alliance
PDCF Packetized DRM Content Format
PER Parameters Enhancing Reception
PSS Packet-switched Streaming Service
QMC QoE Measurement Collection
QoE Quality-of-Experience
RFC Request For Comments
RRC Radio Resource Control
RTP Real-time Transport Protocol
SAND Server and Network Assisted DASH
SMIL Synchronised Multimedia Integration Language
TLS Transport Layer Security
URI Uniform Resource Identifier
URL Uniform Resource Locator
URN Uniform Resource Name
UTF-8 Unicode Transformation Format (the 8-bit form)
XML eXtensible Markup Language
## 3.3 Conventions
The naming conventions of ISO/IEC 23009-1 [43], clause 3.3 apply in this
specification.
# 4 Overview
The present document specifies Progressive Download and Dynamic Adaptive
Streaming over HTTP (3GP-DASH) for continuous media. The features are
separated from the umbrella specification TS 26.234 [3] to differentiate from
RTP-based streaming that is specified and maintained in TS 26.234. Services
relying exclusively on these features may be deployed independently from RTP-
based PSS servers, for example by using standard HTTP/1.1 servers for hosting
the services and in particular also for 5G Media Downlink Streaming when
content is hosted on 5GMSd ASs as defined in the stage 2 specification in TS
26.501 [64] as well as in the stage 3 specifications in TS 26.511 [65] and TS
26.512 [66].
The specification covers the following aspects:
\- System Description: describes the relationship to the PSS architecture and
refines the architecture, interfaces and protocols that are defined in this
specification.
\- Progressive Download over HTTP.
\- 3GPP Dynamic Adaptive Streaming over HTTP (3GP-DASH) provides an overview
of the architecture, the\ formats and the models that build the basis for 3GP-
DASH. Also, 3GP-DASH Profiles provide identifiers and refers to a set of
specific restrictions in this or other specifications.
\- DASH - Media Presentation describes the data model of a Media Presentation.
It also provides an overview on elements and attributes that may be used to
describe components and properties of a media presentation in a\ Media
Presentation Description (MPD).
\- DASH - Usage of the 3GP file format defines how segments can be formed
based on the 3GP file format.
\- Quality-of-Experience for Progressive Download and 3GP-DASH.
\- Server and Network Assisted DASH (SAND) introduces messages between DASH
clients and network elements or between various network elements for the
purpose to improve efficiency of streaming sessions by providing information
about real-time operational characteristics of networks, servers, proxies,
caches as well as DASH client\'s performance and status.
\- Normative annexes for MPD schema (Annex B), Descriptor Scheme Definitions
(Annex C), OMA DM QoE Management Object (Annex F), File format extensions for
3GPP DASH support (Annex G) and MIME Type Registration for MPD (Annex H). -
Informative annexes for Client Behaviour (Annex A), MPD Examples (Annex D),
and Mapping MPD structure and semantics to SMIL (Annex E).
Note: Several of the Annexes refer partially or exclusively to ISO/IEC 23009-1
[43].
# 5 System Description
## 5.1 Overview
Progressive Download and Dynamic Adaptive Streaming over HTTP (3GP-DASH)
enables to provide services to deliver continuous media content over Hypertext
Transfer Protocol (HTTP) in a sense that all resources that compose the
service are accessible through HTTP-URLs and the HTTP/1.1 protocol as
specified in RFC 2616 [9] may be used to deliver the metadata and media data
composing the service. This enables that standard HTTP servers and standard
HTTP caches can be used for hosting and distributing continuous media content.
Figure 1 shows the architecture for services using progressive download and
Figure 2 shows the architecture for services using 3GP-DASH.
The present document deals with the specification of interfaces between the
Client and the Server. Specifically, it defines the formats that may be
delivered exclusively over the HTTP interface to enable progressive download
and streaming services.
{width="6.16875in" height="1.2875in"}
Figure 1: Architecture for Progressive Download over HTTP
Services using the features described in this specification may be deployed
within PSS as specified in TS 26.233 [2] and TS 26.234 [3]. In this case the
Progressive Download/3GP-DASH Server may be a sub-function of the PSS server
and the Progressive Download/3GP-DASH client may be a sub-function of the PSS
client.
{width="6.048611111111111in" height="1.261111111111111in"}
Figure 2: Architecture for 3GP-DASH
Services using the features defined in this specification may also be deployed
independent of the PSS servers and\ clients. In this case the Progressive
Download/3GP-DASH client shall support the formats and codecs according to
this specification.
Access to services based on the features defined in the present document is
introduced in clause 5.2.
The protocol support for services using the features defined in this
specification is provided in clause 5.3.
Clients supporting progressive download-based services shall support the
features and formats as specified in clause 6 of this specification.
Clients supporting 3GP-DASH shall support the features and formats as
specified in clause 7 of this specification.
Clients supporting QoE Metrics and Reporting shall support the features as
specified in clause 10 of this specification.
Clients supporting SAND functionality shall support the features as specified
in clause 13 of this specification. Figure 2a shows the extended architecture
for services for 3GP-DASH using SAND. The new interface between the DASH-Aware
Network Element (DANE) and 3GP-DASH enables the SAND functionality.
{width="6.5in" height="2.373611111111111in"}
Figure 2a: Extended architecture for 3GP-DASH using SAND functionality
## 5.2 Service Access
Service access refers to the method by which a Client initially accesses the
service. Service access for services based in the specification can be
achieved e.g. by a Media Presentation Description or a URL to the media file.
The service access URL can be made available to a client in many different
ways. Clients supporting services based on the features in this specification
shall be able to access services that are provided through an HTTP-URL.
However, it is out of the scope of this specification to mandate any specific
mechanism. A preferred way may be to embed URLs for service establishment
within HTML pages.
## 5.3 Protocols
### 5.3.1 General
Progressive Download and 3GP-DASH clients shall comply with a _client_ as
specified in RFC 2616 [9]. The resource hosting the 3GP files and DASH
Segments shall comply with a _server_ as specified in RFC 2616 [9].
Progressive Download and 3GP-DASH clients should use the HTTP GET method or
the HTTP partial GET method, as specified in RFC 2616 [9], clause 9.3, to
access media offered at HTTP-URLs.
Figure 3 shows a protocol stack for services in the context of this
specification. 3GP Files in progressive download as well as Segments based on
the 3GPP File Format shall be accessible through HTTP.
{width="3.220833333333333in" height="2.3472222222222223in"}
Figure 3: Overview of the protocols stack
Transport security in Progressive Download and Dynamic Adaptive Streaming over
HTTP (3GP-DASH) is achieved using the HTTPS (Hypertext Transfer Protocol
Secure) specified in RFC 2818 [12] and TLS as specified in TLS profile of
Annex E in TS 33.310 [23]. In case secure delivery is desired, HTTPS should be
used to authenticate the server and to ensure secure transport of the content
from server to client.
NOTE 1: The use of HTTPS for delivering Media Segments may inhibit caching at
proxies and add overhead at the server and the client.
### 5.3.2 Partial File Handling
In certain cirumstances, for example in the case of MBMS download delivery of
3GP-DASH content, a file or segment may only be partially available on the
HTTP server.
If the application, i.e. the 3GP file format client or the 3GP-DASH client
supports the handling of partial files, it shall signal its capability using
the partial-file-accept request defined in TS26.346 [42], clause 7.9.2.1, i.e.
using the Accept header application/3gpp-partial in combination with e.g. an
HTTP GET request. If the application uses a partial-file-accept request, then
the application shall also be able to handle the request response as defined
in TS26.346 [42], clause 7.9.2.2.
If the 3GP file format server or the 3GP-DASH server supports the handling of
partial files, it should support the HTTP response format as defined in TS
26.346 [42], clause 7.9.2.2.
# 6 Progressive Download over HTTP
## 6.1 General
As an alternative to conventional streaming, a client may download, typically
through HTTP, a media file that encapsulates continuous media and may play the
media from the local storage. A PSS client shall support progressive download
and playout of 3GP files [4] as specified in the remainder of this clause.
The media file encapsulating the continuous media is accessed directly by
issuing one or more HTTP GET or partial GET requests to the referenced media
file. An example of a valid URL is http://example.com/morning_news.3gp.
## 6.2 Progressive Download
Progressive download uses normal HTTP download using HTTP GET or partial GET
requests. The differences between regular download and Progressive Download
are that 1) the content may be authored as progressively downloadable, and 2)
the terminal recognises that the content is suitable for progressive download.
A client downloading continuous media may decide to start playout of the
encapsulated media data before the download of the media file is completed.
## 6.3 3GPP File Format Profiles
The following profiles of the 3GPP file format in TS 26.244 [4] shall be
supported by clients supporting Progressive Download over HTTP:
\- Basic profile, and
\- Progressive-download profile.
# 7 3GPP Dynamic Adaptive Streaming over HTTP
## 7.1 System Description
The 3GPP Dynamic Adaptive Streaming over HTTP (3GP-DASH) specified in this
specification provides streaming services over HTTP. 3GP-DASH is a set of
profiles of ISO/IEC 23009-1 [43], also known as MPEG-DASH, with some
extensions. For this it specifies XML and binary formats that enable
delivering content from standard HTTP servers to an HTTP-Streaming client and
enables caching content by standard HTTP caches.
The specification for 3GP-DASH primarily defines two formats:
1) The Media Presentation Description (MPD) describes a _Media Presentation_ ,
i.e. a bounded or unbounded presentation of media content. In particular, it
defines formats to announce resource identifiers for _Segments_ and to provide
the context for these identified resources within a Media Presentation. For
3GP-DASH, the resource identifiers are exclusively HTTP-URLs possibly combined
with a byte range.
2) The Segment formats specify the formats of the entity body of the HTTP
response to an HTTP GET request or an HTTP partial GET request with the
indicated byte range through HTTP/1.1 as defined in RFC 2616 [9] to a resource
identified in the MPD. Segments typically contain efficiently coded media data
and metadata according to or aligned with common media formats.
The MPD provides sufficient information for a client to provide a streaming
service to the user by accessing the Segments through the protocol specified
in the scheme of the defined resources, in the context of this specification
exclusively HTTP/1.1. Such a client is referred to as a 3GP-DASH client in the
remainder of the present document. However, this specification does not
provide a normative definition for such a client. An informative client model
to illustrate the formats defined in this specification is provided in clause
7.2. An informative example client behaviour description is provided in Annex
A of ISO/IEC 23009-1 [43].
Figure 7-1 shows an architecture in which the formats defined in this
specification are typically used. Boxes with solid lines indicate devices that
are mentioned in this specification as they host or process the formats
defined in this specification whereas dashed boxes are conceptual or
transparent. This specification deals with the definition of formats that are
accessible on the interface to the 3GP-DASH client, indicated by the solid
lines. Any other formats or interfaces are not in scope of this specification.
In the considered deployment scenario, it is assumed that the 3GP-DASH client
has access to an MPD. The MPD provides sufficient information for the 3GP-DASH
client to provide a streaming service to the user by requesting Segments from
an HTTP server and demultiplexing, decoding and rendering the included media
streams.
{width="6.688888888888889in" height="2.9090277777777778in"}
Figure 7-1: System Architecture for 3GP-DASH
The normative aspects of 3GP-DASH formats are defined by
\- the profiles defined in clause 7.3.
\- the DASH Media Presentation as defined in clause 8.
\- the usage of the 3GPP file format for DASH as defined in clause 9.
The clauses mentioned above may refer to normative aspects in clause 10 on
Quality-of-Experience, normative Annexes B and H as well as ISO/IEC 23009-1
[43].
## 7.2 3GP-DASH Client Model
The design of the formats defined in this specification is based on the
informative client model as shown in Figure 7-2. The figure illustrates the
logical components of a conceptual 3GP-DASH client model. In this figure the
3GP-DASH Access Engine receives the Media Presentation Description (MPD),
constructs and issues requests and receives Segments or parts of Segments. In
the context of this standard, the output of the DASH Access Engine consists of
media in container formats according to the ISO/IEC 14496-12 ISO Base Media
File Format [11] and specifically the 3GP file format [4]. In addition, timing
information is provided that maps the internal timing of the media to the time
line of the Media Presentation.
{width="5.721527777777778in" height="1.7180555555555554in"}
Figure 7-2: 3GP-DASH client Model
## 7.3 3GP-DASH Profiles
### 7.3.1 General
Profiles of 3GP-DASH are defined so as to enable interoperability and the
signaling of the use of features etc. A profile refers to a set of specific
restrictions. Those restrictions might be on features of the MPD as defined in
clause 8 of this specification, Segment formats as for example defined in
clause 9 of this specification, usage of the network, codec(s) used, content
protection formats, or on quantitative measures such as bit-rates, segment
lengths, screen size, and so on. Profiles defined in this specification define
restrictions on features of this specification, but may additionally impose
restrictions on other aspects of media delivery.
NOTE A profile can also be understood as permission for 3GP-DASH clients that
only implement the features required by the profile to process the Media
Presentation. However, as 3GP-DASH client operation is not specified
normatively, it is also unspecified how a 3GP-DASH client conforms to a
particular profile. Hence, profiles merely specify restrictions on MPD and
Segments rather than DASH client behaviour.
For details on the use of profiles, refer to ISO/IEC 23009-1 [43], clause 8.1.
### 7.3.2 3GPP Adaptive HTTP Streaming (Release-9 AHS)
Release-9 Adaptive HTTP Streaming as defined in TS 26.234 [3] Release-9,
clause 12 is not a profile of this specification. Rel-9 AHS uses a different
namespace \"urn:3GPP:ns:PSS:AdaptiveHTTPStreamingMPD:2009\" and a different
MIME type signalling \"application/3gpp-ahs+xml\" for the MPD. However, a
Media Presentation may be defined such that segments complying with the
segment formats in TS 26.234 [3] Release-9, clause 12, also comply with
segment formats for this specification.
### 7.3.3 3GP-DASH Release-10 Profile
#### 7.3.3.1 Introduction
The 3GP-DASH Release-10 profile is identified by the URN
\"urn:3GPP:PSS:profile:DASH10\".
This profile includes all features defined in the Release-10 version of this
specification in clauses 7.3.6 (media codecs), 7.3.7 (content protection), 8
(Media Presentation Description), 9 (File Format) and 10 (QoE).The \@mimeType
attribute of each Representation shall be provided according to RFC4337.
Additional parameters may be added according to RFC6381 [26].
### 7.3.4 3GP-DASH Release 11 multiview stereoscopic 3D video profile
The 3GP-DASH Release 11 multiview stereoscopic 3D video profile is identified
by the URN \"urn:3GPP:PSS:profile:DASH11:MS3D\".
The \@mimeType attribute of each Representation shall be provided according to
RFC4337. Additional parameters may be added according to RFC6381 [26].
This profile includes all features defined in clauses 7.3.7, 8, 9 and 10.
Clients that support 3GP-DASH Release 11 multiview stereoscopic 3D video
profile shall support multiview stereoscopic 3D video as specified in clause
7.4 of TS 26.234 [3]. For any other particular continuous media type, the
corresponding media decoders are specified in TS 26.234 [3], clause 7.2 for
speech, 7.3 for audio, 7.4 for video, 7.9 for timed text and 7.11 for timed
graphics. Additionally, the following contraints apply for multiview
stereoscopic 3D video bitstreams, if present in a media presentation:
The DASH multiple views scheme as defined in 5.8.5.6 of ISO/IEC 23009-1 [43]
shall be used in the MPD.
One of the following shall be true:
\- The base view of the stereoscopic multiview bitstream shall be a
complementary representation and the non-base view of the bitstream shall be a
dependent representation. The \@dependencyId attribute as specified in 5.3.5.2
of ISO/IEC 23009-1 [43] shall be used to indicate the complementary and
dependent representations.
\- The base view and the non-base view of the stereoscopic multiview bitstream
shall reside in the same representation. The SubRepresentation element shall
be used for the representation, and the base view and the non-base view shall
form separate sub-representations. The \@level and \@dependencyLevel
attributes within the SubRepresentation element shall be used. The Level
Assignment box shall be used. For each leaf segment index, that is, each
Segment Index box that indexes only subsegments but not other Segment index
boxes, there shall be exactly one Subsegment Index box.
### 7.3.5 3GP-DASH Release 11 frame-packed stereoscopic 3D video profile
The 3GP-DASH Release 11 frame-packed stereoscopic 3D video profile is
identified by the URN \"urn:3GPP:PSS:profile:DASH11:FPS3D\".
The \@mimeType attribute of each Representation shall be provided according to
RFC4337. Additional parameters may be added according to RFC6381 [26].
This profile includes all features defined in clauses 7.3.7, 8, 9 and 10.
Clients that support 3GP-DASH Release 11 frame-packed stereoscopic 3D video
profile shall support frame-packed stereoscopic 3D video as specified in
clause 7.4 of TS 26.234 [3]. For any other particular continuous media type,
the corresponding media decoders are specified in TS 26.234 [3], clause 7.2
for speech, 7.3 for audio, 7.4 for video, 7.9 for timed text and 7.11 for
timed graphics. Additionally, the following contraints apply for frame-packed
stereoscopic 3D video bitstreams, if present in a media presentation:
The FramePacking element as defined in clause 8.4.3.2 shall be used in the
MPD.
### 7.3.6 Media Codecs
For 3GP-DASH clients supporting a particular continuous media type, media
decoders are specified in TS 26.234 [3], clause 7.2 for speech, 7.3 for audio,
7.4 for video, 7.9 for timed text and 7.11 for timed graphics.
NOTE: If 3GP-DASH formatted content is delivered outside the scope of this
specification, additional constraints may apply on which media codecs can be
used. For example, TS26.346 [42] defines further restrictions when delivered
over MBMS.
### 7.3.7 Content Protection
3GP-DASH clients content protection may support OMA DRM 2.0 [15] or OMA DRM
2.1 [16]. Other content protection schemes may be supported. The
ContentProtection element in the MPD should be used to convey content
protection information.
When using OMA DRM V2.0 or OMA DRM V2.1 scheme for content protection, the
non-streamable Packetized DRM Content Format (PDCF) shall be used. An OMA-DRM
encrypted Representation shall include the brand \"opf2\". OMA-DRM [15] [16]
defines the procedures for acquiring the Rights Object from the Rights Issuer
to decrypt PDCF protected content. The scheme is identified by a
**ContentProtection** \@schemeIdUri set to \"urn:mpeg:dash:mp4protection\" and
the **ContentProtection** \@value shall include the version number; it starts
with \"odkm\", which is the scheme_type contained in the Scheme Type Box of
the PDCF file, followed by a \":\" and the scheme_version from the Scheme Type
Box of the PDCF file, encoded as up to 8 hexadecimal digits, where the leading
'0's may be omitted. For example, for OMA DRM2.0 the value could be
\"odkm:200\".
### 7.3.8 Partial File Handling
3GP-DASH clients should support partial-file-accept requests and partial file
responses as defined in clause 5.3.2. If 3GP-DASH clients support partial file
handling they shall use partial-file-accept requests as defined in TS26.346
[42], clause 7.9.2.1.
Without excluding other response options, as a response to a partial-file-
accept request using a regular HTTP GET request a 3GP-DASH client may
typically receive one of the following responses:
1) 200 OK with Content-Type set to the Media Type of the requested object
2) 200 OK with the Content-Type set to application/3gpp-partial and the
message format according to the definition in clause 7.9.2.2 of TS26.346 [42].
3) 416 Requested Range Not Satisfiable with the additional information
according to the definition in clause 7.9.2.2 of TS26.346 [42].
4) 404 Not Found
If the 3GP-DASH server supports the handling of partial files, then it should
implement the HTTP response format as defined in TS 26.346 [42], clause
7.9.2.2. Consequently, a 3GP-DASH client may receive a response indicating 404
Not Found along with the Content-Type header set to 'application/3gpp-partial'
as indication of partial file availability at the server.
Case 1 is the regular response.
Guidelines for handling request responses according to case 4 from above are
provided in Annex A.7.
Guidelines for handling request responses 2 and 3 from above are provided in
Annex A.9.
### 7.3.9 3GP-DASH Enhanced Interoperability Point
The 3GP-DASH Enhanced interoperability point (IOP) is identified by the URN
\"urn:3GPP:PSS:iop:DASH-enhanced\".
This interoperability point includes all features defined in the Release-13
version of this specification in clauses 7.3.6 (media codecs), 7.3.7 (content
protection), 8 (Media Presentation Description), 9 (File Format), 10 (QoE), 11
(simple live) and 12 (ad insertion).
A DASH client conforms to the IOP by supporting at least the following
features:
\- All DASH-related features as defined in clause.8 of this document.
\- The file format related aspects defined in clause 9 of this document.
\- The QoE related aspects defined in clause 10 of this document.
\- The requirements and guidelines in clause 11 for simple live operation.
\- The requirements and guidelines in clause 12 for server-based ad insertion.
\- The following additional requirements:
\- Segment formats are based on ISO BMFF with fragmented movie files, i.e.
(Sub)Segments are encoded as movie fragments containing a track fragment as
defined in ISO/IEC 14496-12, plus the following constraints to make each movie
fragment independently decodable:
\- Default parameters and flags shall be stored in movie fragments ('tfhd' or
'trun' box) and not track headers ('trex' box)
\- The 'moof' boxes shall not use external data references, the flag 'default-
base-is-moof' shall also be set (aka movie-fragment relative addressing) and
data-offset shall be used, i.e. base-data-offset-present shall not be used
(follows ISO/IEC 23009-1).
\- Withing each Adaptation Set the following applies
\- Fragmented movie files are used for encapsulation of media data
\- (Sub)Segments are aligned to enable seamless switching
\- The following additional restrictions are applied.
\- IDR-like SAPs (i.e., SAPs type 2 or below) at the start of each
(Sub)Segment for simple switching.
\- Segments should have almost equal duration.
\- only non-multiplexed Representations should be used, i.e. each
Representation only contains a single media component.
\- Addressing schemes are restricted to
\- templates with number-based addressing
\- Subsegments with Segment Index. In this case either the \@indexRange
attribute shall be present or the **RepresentationIndex** element shall be
present. Only a single sidx box shall be present.
\- For DRM purposes, suitable DRM may be used together with common encryption
as defined in ISO/IEC 23001-7 [47]. If used, only the AES-128 CTR mode shall
be used. No specific requirements on a specific DRM system are added.
Content shall only be authored claiming conformance to this IOP if such a
client can properly play the content. In addition, the content shall follow
the mandatory aspects and should take into account the recommendations and
guidelines for content authoring documented in clauses 7.3.6 (media codecs),
7.3.7 (content protection), 8 (Media Presentation Description), 9 (File
Format), 10 (QoE), 11 (simple live) and 12 (ad insertion).
The \@mimeType attribute of each Representation shall be provided according to
RFC4337. Additional parameters may be added according to RFC6381 [26].
### 7.3.10 DASH in TeleVision (TV) over 3GPP Services
If used for TeleVision (TV) over 3GPP Services, 3GP-DASH clients shall support
the DASH features defined in clause 5 of TS 26.116 [58].
### 7.3.11 5G Media Streaming DASH Interoperability Point
If DASH [43] is used in 5G Media Streaming as defined in TS 26.501 [64] and TS
26.512 [66], then the 5GMSd AS takes the role of a DASH Server and the Media
Player in the 5GMSd Client takes the role of a DASH Client. A detailed
definition of the Media Player is provided in TS 26.512 [66] separating the
DASH Access Client and a CMAF-based playback platform.
This clause defines a 5G Media Streaming DASH Interoperability Point for the
DASH Access Client, in particular the processing requirements for the MPD and
Segment formats. An interoperability point following the requirements in this
clause is identified by the URN \"urn:3GPP:5GMS:iop:DASH\". This profile is
targeted to support the playback of segmented media content according to CMAF
as defined in ISO/IEC 23000-19 [66].
The requirements for playback of codecs and formats for a 5GMSd Client are
documented in TS 26.511 [12].
The Media Presentation shall conform to a DASH profile for CMAF Content as
defined in ISO/IEC 23009-1 [43] with the following additional restrictions and
extensions:
Exactly one of the following Segment and Subsegment Information Modes shall be
used within one Subset of one Period:
\- The **SegmentTemplate** element with \@media containing a \$Number\$
template and \@duration is present.
\- The **SegmentTemplate** element with \@media containing a \$Number\$
template and **SegmentTimeline** is present.
\- The **SegmentTemplate** element with \@media containing a \$Time\$ template
and **SegmentTimeline** is present.
\- The **SegmentBase** element with the Segment Index signalling is present.
The following extensions may apply for the 5G Media Streaming DASH
Interoperability Point:
\- The DASH Media Presentation may conform to DASH-IF low latency Media
Presentation with the \@profiles parameter set to
\'http://www.dashif.org/guidelines/low-latency-live-v5\' as defined in DASH-IF
IOP Low-Latency Modes [68].
\- The DASH Media Presentation may contain one or several
**ServiceDescription** elements.
\- The DASH Media Presentation may contain one or several **Subset** elements.
If the value of the \@id of the Subset is identical to the value of the \@id
of the **ServiceDescription** element, then this Subset defines a restriction
of Adaptation Sets being available for playback in case this Service
Description is selected.
The DASH Access Client shall support playback and handling of Media
Presentations conforming to the 5G Media Streaming DASH Interoperability Point
as defined in this clause. Specifically, this includes support for:
\- The playback of CMAF Content and the DASH profiles for CMAF Content as
defined in ISO/IEC 23009-1 [43] with the restrictions of Segment and
Subsegment Information modes as documented above.
\- The requirements of a Low-Latency client as defined in DASH-IF IOP Low-
Latency Modes [68].
# 8 DASH - Media Presentation
## 8.1 Introduction
MPEG had initiated a standardization process to provide specifications to
enable scalable and flexible video distribution that addresses fixed and
mobile networks. The work had been in close coordination with a parallel
effort in 3GPP such that the two standards are aligned for broad industry
support across different access networks. 3GPP\'s Release-9 specification on
Adaptive HTTP Streaming (AHS) [3], clause 12 completed in 2010 served as a
baseline for MPEG\'s DASH [43] (MPEG-DASH) as well as for 3GP DASH
specification in this document.
In addition to the format specification, MPEG provides additional supporting
material as part of MPEG-DASH, namely:
\- ISO/IEC 23009-2: Conformance and Reference software [44]
\- ISO/IEC 23009-3: Implementation and Deployment Guidelines [45]
Due to the close coordination in the development, 3GP-DASH can be viewed as a
set of profiles of MPEG-DASH, MPEG DASH for the segment format uses the ISO
base media file format [7]. In 3GPP, compatibility is achieved with the 3GP
file format [5].Dynamic Adaptive Streaming over HTTP (DASH) [43] specifies XML
and binary formats that enable delivery of media content from standard HTTP
servers to HTTP clients and enable caching of content by standard HTTP caches.
ISO/IEC 23009-1 [43] primarily defines two formats:
\- The Media Presentation Description (MPD) describes a _Media Presentation_ ,
i.e. a bounded or unbounded presentation of media content. In particular, it
defines formats to announce resource identifiers for _Segments_ and to provide
the context for these identified resources within a Media Presentation. These
resource identifiers are HTTP-URLs possibly combined with a byte range.
\- The Segment formats specify the formats of the entity body of the HTTP
response to an HTTP GET request or a partial HTTP GET with the indicated byte
range using HTTP/1.1 as defined in RFC 2616 to a resource identified in the
MPD. Segments typically contain efficiently coded media data and metadata
conforming to or at least closely aligned with common media formats.
For more details on DASH System description, please refer to ISO/IEC 23009-1
[43], clause 4.1.
For more details on DASH Client model, please refer to ISO/IEC 23009-1 [43],
clause 4.2.
For more details on DASH Data model overview, please refer to ISO/IEC 23009-1
[43], clause 4.3.
For more details on DASH Media Stream and Representation properties, please
refer to ISO/IEC 23009-1 [43], clause 4.5.
The format of the Media Presentation Description in 3GP-DASH is defined in
clause 8.2.
The format of the Segments in 3GP-DASH is defined in clause 9.
Figure 8.1: Void
## 8.2 Media Presentation Description
### 8.2.1 General
The Media Presentation Description shall conform to a DASH Media Presentation
as defined in ISO/IEC 23009-1 [43], clause 5.2.Updates may also be done using
MPD delta files as defined in clause 8.5.2. The MIME type of an MPD delta file
is defined in Annex H.2.
### 8.2.2 Schema and 3GPP Extension
The overview of the XML schema of the MPD is provided in below. Specific
types, elements and attributes are introduced in the remainder of this clause.
The complete MPD schema is provided in Annex B of this specification. In case
of any inconsistencies the schema in Annex B takes precedence over the XML-
syntax snippets provided in this clause. For the normative schema refer to the
schema in Annex B.
The main schema is provided in Table 8-1 with the namespace
\"urn:mpeg:dash:schema:mpd:2011\". The 3GPP extension namespace is provided in
Table 8-2 with namespace \"urn:3GPP:ns:DASH:MPD-ext:2011\". An extension
schema for 3GPP in the context of the specification is referred to as
\"3gpp-2011.xsd\". Elements and attributes in the extension namespace are
preceded with \"x3gpp:\" throughout this document.
The MPD shall be authored such that, after unrecognized XML attributes or
elements are removed, the result is a valid XML document formatted according
to the XML schema provided in Annex B and that complies with this
specification. Namespaces may be used to extend functionalities. Therefore,
all extended elements and attributes added to a **Representation** in
particular shall be such that they can be safely ignored by 3GP-DASH clients.
NOTE 1: Based on this if DASH clients remove all XML attributes and elements
from the MPD in the DASH namespace (urn:mpeg:dash:schema:mpd:2011) and in
other namespaces that are not in the XML schema documented in Annex B, the MPD
results in a valid XML document which complies with this specification. The
DASH client can use such a resulting MPD for presentation of a conforming
Media Presentation.
Example for valid MPDs are provided in Annex D.
Table 8-1: Overview of XML schema of the MPD
+----------------------------------------------------------------------+ | \\ | | \\ | | \\ | | \Media Presentation Description\\ | | \\ | | \ | | \ | | | | \\ | | \ | | \\ | | \ | | | | ... | | | | \ | +----------------------------------------------------------------------+
Table 8-2: Overview of XML schema for 3GPP MPD extensions
+----------------------------------------------------------------------+ | \\ | | \ | | | | \\ | | \Extensions to Media Presentation Description for | | 3GPP\\ | | \ | | | | ... | | | | \ | +----------------------------------------------------------------------+
### 8.2.3 (void)
### 8.2.4 (void)
## 8.3 MPD Assembly
3GP-DASH inherits the ability from ISO/IEC 23009-1 [43] to enable to
distribute an MPD not as a fully contained document, but to assemble the
document by dereferencing certain links by using subset of W3C XLINK [20].
An MPD in 3GP DASH may reference a _remote element entities_ from within a
local MPD as defined in ISO/IEC 23009-1 [43], clause 5.5.
## 8.4 Hierarchical Data Model
### 8.4.1 General
A Media Presentation is described in the **MPD** element that is contained in
an MPD document formatted as defined in clause 8.2.
A Media Presentation consists of:
\- A sequence of one or more Periods described in 8.4.2.
\- Each Period contains one or more Adaptation Sets that itself contains one
or more Representations as described in clause 8.4.3. Clause 8.4.3 also
defines media content components and Sub-Representations.
\- Each Representation consists of one or more Segments. Segment Information
is introduced in clause 8.4.4. Segments contain media data and/or metadata to
access, decode and present the included media content.
Beyond the mandatory elements and attributes in ISO/IEC 23009-1 [43], the
**MPD** element used in 3GP-DASH may contain the following attributes and
elements:
\- **MPD** \@id
\- **MPD** \@type
\- **MPD** \@availabilityStartTime
**\- MPD** \@availabilityEndTime
**\- MPD** \@mediaPresentationDuration
**\- MPD** \@minimumUpdatePeriod
**\- MPD** \@timeShiftBufferDepth
**\- MPD** \@suggestedPresentationDelay
**\- MPD** \@maxSegmentDuration
**\- MPD** \@maxSubsegmentDuration
**\- MPD.ProgramInformation**
**\- MPD.UTCTiming**
**\- MPD.BaseURL**
**\- MPD.x3gpp:DeltaSupport**
**\- MPD.Location**
**\- MPD.Metrics**
Table 8-5: Void
Table 8-6: Void
### 8.4.2 Period
#### 8.4.2.1 General
A Media Presentation consists of one or more Periods as defined in ISO/IEC
23009-1 [43], clause 5.3.2. A Period is defined by **Period** element in the
**MPD** element.
Beyond the mandatory elements and attributes in ISO/IEC 23009-1 [43], the
**Period** element used in 3GP-DASH may contain the following attributes and
elements:
**\- Period** \@xlink:href
**\- Period** \@xlink:actuate
**\- Period** \@id
**\- Period** \@start
**\- Period** \@duration
**\- Period** \@bitstreamSwitching
**\- Period.BaseURL**
**\- Period.SegmentBase**
**\- Period.SegmentList**
**\- Period.SegmentTemplate**
**\- Period.AdaptationSet**
**\- Period.EventStream**
**\- Period.AssetIdentifier**
Table 8-7: Void
Table 8-8: Void
#### 8.4.2.2 Content Offering with Multiple Periods
Note: This text was adopted for Amd.3 of ISO/IEC 23009-1 [43], which is not
yet published. It is expected that the below text will be replaced with a
reference to ISO/IEC 23009-1 once Amd.3 is published.
Content with multiple Periods may be created for different reasons, for
example:
\- to enable splicing of content, for example for ad insertion,
\- to provide a synchronization point to avoid drift in segment numbering,
\- to remove or add certain Representations in an Adaptation Set,
\- to remove or add certain Adaptation Sets,
\- to add or remove content offering on certain CDNs,
\- to enable signalling of shorter segments, if produced by the encoder
Periods provide opportunities for resync, for ad insertion, for adding and
removing Representations, but if they are not used or only used for minor
changes, then continuous playout of the client is expected.
In certain circumstances the Media Presentation author offers content in the
next Period that is a continuation of the content in the previous Period,
possibly in the immediately following Period or in a later Period. The latter
case applies for example after an advertisement Period had been inserted. The
content provider may provide period-continuous Adaptation Sets as follows:
\- The Adaptation Set identifiers are the same across two Periods.
\- The sum of the value of the \@presentationTimeOffset and the presentation
duration of all Representations in one Adaptation Set are identical to the
value of the \@presentationTimeOffset of the associated Adaptation Set in the
next Period.
\- If Representations in both Adaptation Sets have the same value for \@id,
then they sshould have functionally equivalent Initialization Segments, i.e.
the Initialization Segment may be used to continue the play-out the
Representation.
From a client perspective, at Period boundary typically no continuity in terms
of content offering is ensured. The content may be offered with different
codecs, language attributes, different protection and so on. The client should
play the content continuously across Periods, but there may be implications in
terms of implementation to provide fully continuous and seamless playout. It
may be the case that at Period boundaries, the presentation engine needs to be
reinitialised, for example due to changes in formats, codecs or other
properties. This may result in a re-initialisation delay. Such a re-
initialisation delay should be minimized.
If the client presents media components of a certain Adaptation Set in one
Period, and if the following Period has an identical Adaptation Set
identifier, then the client is suggested to continue playing the content in
the associated Adaptation Set.
### 8.4.3 Adaptation Sets and Representations
#### 8.4.3.1 Overview
Periods are further subdivided as follows:
\- Each Period contains one or more groups. Groups consist of Adaptation Sets
as described in clause 8.4.3.3.
\- In case an Adaptation Set contains multiple media content components, then
each media content component is described individually as defined in clause
8.4.3.6.
\- Each Adaptation Set contains one or more Representations as described in
clause 8.4.3.4.
\- A Representation may contain one or more Sub-Representations as described
in clause 8.4.3.5.
\- Adaptation Sets, Representations and Sub-Representations share common
attributes and elements that are described in clause 8.4.3.2.
#### 8.4.3.2 Common Attributes and Elements
The elements **AdaptationSet, Representation** and **SubRepresentation** have
assigned common attributes and elements.
Beyond the mandatory elements and attributes in ISO/IEC 23009-1 [43], the
following common attributes and elements may be used in 3GP-DASH:
\- \@profiles
\- \@width
\- \@height
\- \@frameRate
\- \@audioSamplingRate
\- \@mimeType
\- \@codecs
\- \@maximumSAPPeriod
\- \@startWithSAP
\- \@maxPlayoutRate
\- \@codingDependency
**\- FramePacking**
**\- AudioChannelConfiguration**
**\- ContentProtection**
**\- EssentialProperty**
**\- SupplementalProperty**
**\- InbandEventStream**
Table 8-9: Void
Table 8-10: Void
#### 8.4.3.3 Adaptation Set
An Adaptation Set is described by an **AdaptationSet** element.
**AdaptationSet** elements are contained in a **Period** element. An
Adaptation Set contains alternate Representations, i.e. only one
Representation within an Adaptation Set is expected to be presented at a time.
All Representations contained in one Adaptation Set represent the same media
content components and therefore contain media streams that are considered to
be perceptually equivalent.
The Adaptation Set shall conform to the definition in ISO/IEC 23009-1 [43],
clause 5.3.3.
Beyond the mandatory elements and attributes in ISO/IEC 23009-1 [43], the
**AdaptationSet** element used in 3GP-DASH may contain the following
attributes and elements:
\- \@xlink:href
\- \@xlink:actuate
\- \@id
\- \@group
**_\- CommonAttributesElements_**
\- \@lang
\- \@contentType
\- \@minBandwidth
\- \@maxBandwidth
\- \@minWidth
\- \@maxWidth
\- \@minHeight
\- \@maxHeight
\- \@minFrameRate
\- \@maxFrameRate
\- \@segmentAlignment
\- \@bitStreamSwitching
\- \@subsegmentAlignment
\- \@subsegmentStartsWithSAP
**\- Accessibility**
**\- Role**
**\- Rating**
**\- Viewpoint**
**\- ContentComponent**
**\- BaseURL**
**\- SegmentBase**
**\- SegmentList**
**\- SegmentTemplate**
**\- Representation**
Table 8-11: Void
Table 8-12: Void
#### 8.4.3.4 Representation
Representations are described by the **Representation** element.
**Representation** elements are contained in an **AdaptationSet** element.
A Representation is one of the alternative choices of the complete set or
subset of media content components comprising the media content during the
defined Period.
A Representation shall conform to the definition in ISO/IEC 23009-1 [43],
clause 5.3.4.
Beyond the mandatory elements and attributes in ISO/IEC 23009-1 [43], the
**Representation** element used in 3GP-DASH may contain the following
attributes and elements:
\- Representation\@qualityRanking
\- Representation\@mediaStreamStructureId
\- Representation.CommonAttributesElements
\- Representation.BaseURL
\- Representation.SubRepresentation
\- Representation.SegmentBase
\- Representation.SegmentList
\- Representation.SegmentTemplate
Table 8-13: Void
Table 8-14: Void
#### 8.4.3.5 Sub-Representation
Sub-Representations are embedded in regular Representations and are described
by the **SubRepresentation** element. **SubRepresentation** elements are
contained in a **Representation** element.
The **SubRepresentation** element describes properties of one or several media
content components that are embedded in the Representation. It may for example
describe the exact properties of an embedded audio component (language, codec,
etc.), an embedded sub-title (language) or it may describe some embedded lower
quality video layer (e.g. some lower frame rate, etc.).
A Sub-Representation shall conform to the definition in ISO/IEC 23009-1 [43],
clause 5.3.5.
Beyond the mandatory elements and attributes in ISO/IEC 23009-1 [43], the
**SubRepresentation** element used in 3GP-DASH may contain the following
attributes and elements:
\- SubRepresentation\@level
\- SubRepresentation\@dependencyLevel
\- SubRepresentation\@bandwidth
\- SubRepresentation\@contentComponent
_\- CommonAttributesElements_
Table 8-15: Void
Table 8-16: Void
#### 8.4.3.6 Content Component
Each Adaptation Set contains one or more media content components. The
properties of each media content component are described by a
**ContentComponent** element or may be described directly on the
**AdaptationSet** element if only one media content component is present in
the Adaptation Set. **ContentComponent** elements are contained in an
**AdaptationSet** element.
A Content Component shall conform to the definition in ISO/IEC 23009-1 [43],
clause 5.3.6.
Beyond the mandatory elements and attributes in ISO/IEC 23009-1 [43], the
**ContentComponent** element used in 3GP-DASH may contain the following
attributes and elements:
\- ContentComponent\@id
\- ContentComponent\@lang
\- ContentComponent\@contentType
\- ContentComponent.Accessibility
\- ContentComponent.Role
\- ContentComponent.Rating
\- ContentComponent.Viewpoint
Table 8-17: Void
Table 8-18: Void
### 8.4.4 Segments and Segment Information
A Segment is the smallest addressable unit described by an MPD and has a
defined format. Segment formats are defined in clause 9. This clause defines
the MPD information for Segments.
Representations are assigned _Segment Information_ through the presence of the
elements **BaseURL** , **SegmentBase** , **SegmentTemplate** and/or
**SegmentList**. The _Segment Information_ provides information on the
location, availability and properties of all Segments contained in one
Representation. Specifically, information on the presence and location of
Initialization, Media, Index and Bitstream Switching Segments is provided.
Segment Information shall be provided as defined in ISO/IEC 23009-1 [43],
clause 5.3.9 using the elements **BaseURL** , **SegmentBase** ,
**SegmentTemplate** and/or **SegmentList**.
\- The duration of Segments shall be described by the \@duration attribute.
\- If the **SegmentTemplate** is used, then only the following identifiers as
defined in ISO/IEC 23009-1 [43], Table 16 may be used: _\$\$_ ,
_\$RepresentationID\$_ , _\$Number\$_ , and _\$Bandwidth\$_. The identifier
_\$Time\$_ shall not be used.
Table 8-19: Void
Table 8-20: Void
Table 8-21: Void
Table 8-22: Void
Table 8-23: Void
Table 8-24: Void
Table 8-25: Void
Table 8-26: Void
Table 8-27: Void
## 8.5 MPD Update
### 8.5.1 General
If the **MPD** \@type is set to \'dynamic\', the MPD may be updated during the
Media Presentation. Updates typically extend the accessible Segment list for
each Representation, introduce a new Period, update Segment locations or
terminate the Media Presentation.The MPD update functionality in 3GP-DASH
shall use the MPD update functionality in ISO/IEC 23009-1 [43], clause 5.4.
### 8.5.2 Media Presentation Description Delta
If the **x3gpp:DeltaSupport** element is present in the **MPD** element, the
content provider indicates that MPD delta files, as defined in this clause,
are supported on the server. The URI of the MPD delta is provided in
**x3gpp:DeltaSupport** \@sourceURL. The **x3gpp:DeltaSupport**
\@availabilityDuration element, if present, indicates that the MPD delta file
referenced by the URI is available for at least the value of the
\@availabilityDuration attribute (after this time, the server may redirect the
client to the full MPD). If **x3gpp:DeltaSupport** \@availabilityDuration is
not present, then no information is conveyed about the availability of the MPD
delta. If a client request for an MPD delta file results in an error, the
client should request a full MPD.
The semantics of the attributes within the **x3gpp:DeltaSupport** element are
provided in Table 8-28. The XML-syntax of **x3gpp:DeltaSupport** element is
provided in Table 8-29.
Table 8-28: Semantics of x3gpp:DeltaSupport element
+-------------+-------------+-------------+-------------+-------------+ | Element or | Use | Description | | | | Attribute | | | | | | Name | | | | | +-------------+-------------+-------------+-------------+-------------+ | | **x3gpp:Del | | If present, | | | | taSupport** | | this | | | | | | element | | | | | | indicates | | | | | | that MPD | | | | | | delta files | | | | | | are | | | | | | supported | | | | | | by the | | | | | | server. | | +-------------+-------------+-------------+-------------+-------------+ | | | \@sourceURL | M | The source | | | | | | string | | | | | | providing | | | | | | the URL of | | | | | | the MPD | | | | | | delta. The | | | | | | URL may be | | | | | | relative to | | | | | | any | | | | | | **BaseURL** | | | | | | on MPD | | | | | | level and | | | | | | reference | | | | | | resolution | | | | | | according | | | | | | to clause | | | | | | 8.2.3 shall | | | | | | be applied. | +-------------+-------------+-------------+-------------+-------------+ | | | \@availabil | O | When | | | | ityDuration | | provided, | | | | | | indicates | | | | | | the | | | | | | duration | | | | | | that the | | | | | | server | | | | | | guarantees | | | | | | the | | | | | | a | | | | | | vailability | | | | | | of the MPD | | | | | | delta file | | | | | | referenced | | | | | | in | | | | | | \@sourceURL | | | | | | after the | | | | | | MPD has | | | | | | been | | | | | | updated. | | | | | | After that | | | | | | the client | | | | | | may be | | | | | | redirected | | | | | | to the full | | | | | | MPD. | +-------------+-------------+-------------+-------------+-------------+ | Legend: | | | | | | | | | | | | > For | | | | | | > | | | | | | attributes: | | | | | | > M | | | | | | =Mandatory, | | | | | | > | | | | | | O=Optional, | | | | | | > | | | | | | OD=Optional | | | | | | > with | | | | | | > Default | | | | | | > Value, | | | | | | > CM=Co | | | | | | nditionally | | | | | | > | | | | | | Mandatory. | | | | | | > | | | | | | > For | | | | | | > elements: | | | | | | > \...\ | | | | | | > (N | | | | | | =unbounded) | | | | | | | | | | | | Elements | | | | | | are bold; | | | | | | attributes | | | | | | are | | | | | | non-bold | | | | | | and | | | | | | preceded | | | | | | with an @. | | | | | +-------------+-------------+-------------+-------------+-------------+
Table 8-29: XML-Syntax of x3gpp:DeltaSupport element
* * *
\\ \\ \\ \\
\\ \\ \\ \\ \
* * *
An MPD delta is a text file that shall include the delta between the MPD that
references it and the latest provided MPD. Note that the value of \@sourceURL
in successive MPDs is necessarily different because it is impossible for the
delta between two different MPDs and the most recent MPD to be the same.
The output format consists of one or more structures, each corresponding to a
change. The changes are in decreasing line number order. The structure format
looks like:
change-command\ to-file-line\ to-file-line...\ .
There are three types of change commands change-command. Each consists of a
line number or comma-separated range of lines in the first file and a single
character indicating the kind of change to make. All line numbers are the
original line numbers in the file. The types of change commands and the
instructions are provided in Table 8-30.
Table 8-30: Change commands and the instructions for delta MPD files
* * *
Change command Instruction Example _l_ a Add text from the second file after
line _l_ in the first file. '8a' means to add the following lines after line 8
of file 1 _r_ c Replace the lines in range _r_ in the first file with the
following lines. Like a combined add and delete, but more compact. '5,7c'
means change lines 5--7 of file 1 to read as the text file 2. _r_ d Delete the
lines in range _r_ from the first file. '5,7d' means delete lines 5--7 of file
1. NOTE: This is the format supported by the GNU diff utilities, see
http://www.gnu.org/software/diffutils/manual/#Detailed-ed
* * *
Regardless of the presence of a **x3gpp:DeltaSupport** element, the full MPD
shall always be available to clients for regular MPD updates as defined in
clause 8.5.1. MPD Delta related procedures are optional at the client.
## 8.6 Additional Media Presentation Information
### 8.6.1 Introduction
The MPD, Periods, Adaptation Sets, Representations and Sub-Representations may
have assigned descriptors for describing the content or other elements in the
MPD. This clause specifies this descriptive information.
### 8.6.2 Program Information
Descriptive information on the program may be provided for each period within
the **ProgramInformation** element.
Program Information shall conform to the definition in ISO/IEC 23009-1 [43],
clause 5.7.
Table 8-31: Void
Table 8-32: Void
### 8.6.3 Descriptors
The MPD may contain descriptors that are all in the same format as defined in
this clause. The elements of type DescriptorType provide a flexible mechanism
for DASH content authors to annotate and extend the **MPD** , **Period** ,
**AdaptationSet** and **Representation** elements.
Descriptors shall conform to the definition in ISO/IEC 23009-1 [43], clause
5.8.1.
The following descriptors may be used in 3GP-DASH:
\- Content Protection as defined in ISO/IEC 23009-1 [43], clause 5.8.4.1
\- Role as defined in ISO/IEC 23009-1 [43], clause 5.8.4.3. The DASH Role
scheme as defined in ISO/IEC 23009-1 [43], clause 5.8.5.4 may be used.
\- Rating as defined in ISO/IEC 23009-1 [43], clause 5.8.4.4
\- ViewPoint as defined in ISO/IEC 23009-1 [43], clause 5.8.4.5
\- Accessibility as defined in ISO/IEC 23009-1 [43], clause 5.8.4.2
\- Audio Channel Configuration as defined in ISO/IEC 23009-1 [43], clause
5.8.4.7
\- Frame Packing as defined in ISO/IEC 23009-1 [43], clause 5.8.4.6
\- Essential Property as defined in ISO/IEC 23009-1 [43], clause 5.8.4.8
\- Supplemental Property as defined in ISO/IEC 23009-1 [43], clause 5.8.4.9
\- UTC Timing Descriptor as defined in ISO/IEC 23009-1 [43], clause 5.8.4.10.
The DASH UTC Timing Schemes as defined in ISO/IEC 23009-1 [43], clause
5.8.5.10 may be used.
Table 8-33: Void
Table 8-34: Void
## 8.7 Base URL Processing
The **BaseURL** element may be used to specify one or more common locations
for Segments and other resources. Base URL Processing shall conform to ISO/IEC
23009-1 [43], clause 5.6.
Table 8-35: Void
Table 8-36: Void
## 8.8 Event Streams
Events may be signalled in the MPD or within a Representation in order to
signal aperiodic information to the DASH client or to an application. Events
are timed, i.e. each event starts at a specific media presentation time and
typically has a duration. Events may include DASH specific signalling or
application-specific events. In the latter case, a proper scheme identifier
identifies the application such that the DASH client can forward the event to
the proper application.
Events of the same type are clustered in Event Streams. This enables a DASH
client to subscribe to an Event Stream of interest and ignore Event Streams
that are of no relevance or interest.
Two ways of signalling events are provided, namely
\- events signalled in the MPD as defined in 5.10.2 of ISO/IEC 23009-1[34].
Event streams for MPD events are signaled by **Period.EventStream** element.
\- events signalled inband in the Representation as defined in 5.10.3 of
ISO/IEC 23009-1 [34]. Inband event streams are signaled by the element
**InbandEventStream** for a specific Representation or all Representatons in
an Adaptation Set.
This specification does not provide any specific information on how to use
Event Streams. It is up to the application that employs DASH formats to
instantiate the description elements with appropriate scheme information.
If the DASH client is interested in a specific event stream, it is expected to
properly extract each event from an event stream and pass it to the
application.
# 9 DASH - Usage of 3GPP File Format
## 9.1 Introduction
3GPP Dynamic Adaptive Streaming over HTTP uses many elements of fragmented 3GP
files to define the Segment formats. This provides Segments according to the
requirements defined in clause 8.4.4.1 and enables reuse of existing content,
easy encoding and recording, etc. This clause introduces how to use the 3GPP
file format as specified in TS 26.244 [4] for DASH Segment formats.
## 9.2 Segment Types and Formats
### 9.2.1 Introduction
3GP-DASH defines a Segment format that is used in the delivery of media data
over HTTP. A Segment shall contain one or more boxes in accordance with the
boxed structure of the ISO-base media file format [11].
For 3GP-DASH the following applies:
\- In all cases for which a Representation contains more than one Media
Segment, the following applies:
\- The Initialization Segment as defined in clause 9.2.2 shall be present. The
Initialization Segment shall be available for the 3GP-DASH client before any
Media Segment is processed within the Representation.
\- Media Segments shall not be self-initializing. The Media Segment format is
defined in clause 9.2.3.
\- In case a Representation contains only a single Media Segment, then either
one of the following two options is used:
1) An Initialization Segment as defined in clause 9.2.2 and one Media Segment
as defined in clause 9.2.3.
2) One Self-Initializing Media Segment as defined in clause 9.2.4.
### 9.2.2 Initialization Segment
The Initialization Segment is conformant with the 3GPP file format, adaptive
streaming profile and shall carry \"3gh9\" as compatibility brand.
The Initialization Segment shall conform to the Initialization Segment in
ISO/IEC 23009-1 [43], clause 6.3.3.
### 9.2.3 Media Segment
#### 9.2.3.1 General
A Media Segment contains and encapsulates media streams that are either
described within this Media Segment or described by the Initialization Segment
of this Representation or both.
In addition, a Media Segment shall conform to the general format type in
ISO/IEC 23009-1 [43], clause 6.2.3.1.
#### 9.2.3.2 Subsegments and Segment Index
Media Segments may contain multiple **Subsegments documented by the Segment
Index.**
**Subsegments and Segment Index shall follow the definition in** ISO/IEC
23009-1 [43], clause 6.2.3.2**.**
#### 9.2.3.3 Subsegment Index
Media Subsegments may be indexed further to enable accessing different levels
of Subsegments in a Media Subsegment. This Subsegment Index may also be
provided in separate Index Segments together with the Segment Index.
**Subsegment Index shall follow the definition in** ISO/IEC 23009-1 [43],
clause 6.2.3.3.
#### 9.2.3.4 3GP-DASH Media Segment Format
A Media Segment conforming to the Media Segment Format for 3GP DASH shall
carry '3gmA' as a compatible brand and shall conform to the General format
type **in** ISO/IEC 23009-1 [43], clause 6.3.4.2.
### 9.2.4 Self-Initializing Media Segment
A Self-Initializing Media Segment shall conform to the Self-Initializing Media
Segment **in** ISO/IEC 23009-1 [43], clause 6.3.5.1.
### 9.2.5 Media Stream and Segment Properties
#### 9.2.5.1 Media Stream Access Points
To be able to access a Representation, each of the media streams that are
contained in the Representation requires Media Stream Access Points (SAPs).
For the definition refer to ISO/IEC 23009-1 [43], clause 4.5.1.
#### 9.2.5.2 Non-overlapping Segments and Subsegments
The property of \"non-overlapping\" Segments (respectively Subsegments) is
used to define the terms Segment alignment and Subsegment alignment. The
definition is provided in ISO/IEC 23009-1 [43], clause 4.5.1.
#### 9.2.5.3 Bitstream concatenation
The definition for bistream concatenation is provided in ISO/IEC 23009-1 [43],
clause 4.5.2.
## 9.3 Usage on Server and Client
3GP-DASH uses 3GP files according to the 3GP Adaptive-Streaming profile as
specified in TS 26.244 [4]. Content may be prepared as 3GP files according to
the 3GP Adaptive-Streaming profile. Initialization Segments and Media Segments
may be generated by segmenting such 3GP files. Segment Index 'sidx' boxes may
be pre-contained in 3GP files or may be generated during the segmentation
process. Clients may store a concatenation of a received Initialization
Segment and a sequence of Media Segments from the same Representation to
create a compliant 3GP file according to the Adaptive Streaming profile
without accessing any media samples.
NOTE: As specified in TS 26.244, the MPD may be linked or embedded in the
'meta' box of the 'moov' box. This enables clients to access the MPD from a
3GP file that was made available from other means than 3GP-DASH (e.g.
progressive download).
## 9.4 Segment Properties with MPD constraints
### 9.4.1 General
#### 9.4.1.1 Introduction
The content, especially the Segments across Representations at the same media
time may have been prepared in a joint or at least coordinated manner. To
expose these properties to the client, certain flags in the MPD can be set to
true to indicate such coordinated content preparation. Clients consuming 3GP-
DASH formatted media presentations may benefit from properly authored content
when switching between or presenting Representations.
#### 9.4.1.2 Media Presentation Timeline
One of the key features in DASH is that encoded versions of different media
components share a common timeline. The presentation time of access unit
within the media content is mapped to the global common presentation timeline
for synchronization of different media components and to enable seamless
switching of different coded versions of the same media components.
The requirements and recommendations in ISO/IEC 23009-1 [43], clause 7.2.1 and
clause 7.3.2 shall apply for 3GP-DASH.
#### 9.4.1.3 Segment Index
If a Segment Index is present in a Media Segment of one Representation within
an Adaptation Set, then the constraints in ISO/IEC 23009-1 [43], clause 7.2.2
shall apply for 3GP-DASH.
### 9.4.2 Segment Alignment
No additional requirements beyond those stated in clause 8.4.3.3 are defined.
### 9.4.3 Bitstream Switching
If the \@bitstreamSwitching is set to 'true' for a set of Representations
within an Adaptation Set, the conditions in ISO/IEC 23009-1 [43], clause
7.3.3.2 shally apply.
### 9.4.4 Sub-Representation
If a **SubRepresentation** element is present in a Representation in the MPD
and the **SubRepresentationâ€Œ** \@level is present, then the conditions in
ISO/IEC 23009-1 [43], clause 7.3.4 shally apply.
# 10 QoE for Progressive Download and DASH
## 10.1 General
A progressive download or 3GP-DASH client supporting Quality of Experience
(QoE) shall report QoE metrics according to the QoE configuration. QoE
reporting is optional, but if a 3GP-DASH client reports DASH metrics, it shall
report all requested metrics.
The quality metrics are defined in clause 10.2.
The quality metrics applicable for progressive download are specified in
clause 10.3. In this case the activation and configuration of QoE reporting
framework is achieved by a corresponding OMA DM QoE Management Object as
specified in Annex F, or by the QMC functionality as specified in Annex L.
The quality metrics for DASH are specified in section 10.4. In this case, QoE
reporting may be triggered using the MPD ( i.e. when the **Metrics** element
is present in the MPD) or using OMA DM QoE Management Object as specified in
Annex F, or by the QMC functionality as specified in Annex L. When QoE
reporting is triggered via any of the above methods, the 3GP-DASH client is
expected to collect quality metrics according to the QoE configuration. When
using the MPD or the QMC functionality, the Quality Reporting scheme as
defined in clause 10.5 may be used.
The QoE configuration shall only be checked by the client when each session
starts, and thus all logging and reporting criterias for an ongoing session
shall be unaffected by any QoE configuration changes received during that
session. This also includes evaluation of any filtering criteria, such as
geographical filtering, which shall only be done when the session starts. Thus
changes to the QoE configuration will only affect sessions started after these
configuration changes have been received.
The quality metric reporting protocol is defined in clause 10.6. This protocol
shall be used when QoE reporting is triggered via the MPD or OMA DM QoE
Management Object. When QoE reporting is triggered via the QMC functionality,
the reporting is specified in Annex L.
The usage of ITU-T P.1203 [49] Audio/Video Mean Opinion Score (A/V MOS)
estimation is defined in Annex K.
## 10.2 QoE Metric Definitions
### 10.2.1 Introduction
This clause provides the general QoE metric definitions and measurement
framework.
The semantics are defined using an abstract syntax. clause 10.6 provides a
mapping to an XML schema. Items in this abstract syntax have one of the
following primitive types (Integer, Real, Boolean, Enum, String) or one of the
following compound types:
\- Objects: an unordered sequence of (key, value) pairs, where the key always
has string type and is unique within the sequence.
\- List: a ordered list of items.
\- Set: an unordered set of items.
Additionally, there are two kinds of timestamp defined, i.e. _real time_
(wall-clock time) and _media time_.
### 10.2.2 Void
This clause is void.
Table 25: Void
### 10.2.3 Representation Switch Events
Annex D.4.4 in ISO/IEC 23009-1 [43] defines the metrics for representation
switch events.
Table 26: Void
### 10.2.4 Average Throughput
This metric in Table 27 indicates the average throughput that is observed by
the client during the measurement interval.
Table 27: Average Throughput
+---------------+----------------+----------------+----------------+ | Key | Type | Description | | +---------------+----------------+----------------+----------------+ | AvgThroughput | Object | Average | | | | | throughput | | | | | that is | | | | | observed by | | | | | the client | | | | | during the | | | | | measurement | | | | | interval | | +---------------+----------------+----------------+----------------+ | | numbytes | Integer | The total | | | | | number of the | | | | | content bytes, | | | | | i.e. the total | | | | | number of | | | | | bytes in the | | | | | body of the | | | | | HTTP | | | | | responses, | | | | | received | | | | | during the | | | | | measurement | | | | | interval. | +---------------+----------------+----------------+----------------+ | | activitytime | Integer | The activity | | | | | time during | | | | | the | | | | | measurement | | | | | interval in | | | | | milliseconds. | | | | | The activity | | | | | time during | | | | | the | | | | | measurement | | | | | interval is | | | | | the time | | | | | during which | | | | | at least one | | | | | GET request is | | | | | still not | | | | | completed | | | | | (i.e. | | | | | excluding | | | | | inactivity | | | | | time during | | | | | the | | | | | measurement | | | | | interval). | +---------------+----------------+----------------+----------------+ | | t | Real Time | The real time | | | | | of the start | | | | | of the | | | | | measurement | | | | | interval | +---------------+----------------+----------------+----------------+ | | duration | Integer | The time in | | | | | milliseconds | | | | | of the | | | | | measurement | | | | | interval | +---------------+----------------+----------------+----------------+ | | accessbearer | String | Access bearer | | | | | for the TCP | | | | | connection for | | | | | which the | | | | | average | | | | | throughput is | | | | | reported | +---------------+----------------+----------------+----------------+ | | inactivitytype | Enum | Type of the | | | | | inactivity, if | | | | | known and | | | | | consistent | | | | | throughout the | | | | | reporting | | | | | period: | | | | | | | | | | User request | | | | | (e.g. pause) | | | | | | | | | | Client measure | | | | | to control the | | | | | buffer | | | | | | | | | | Error case | +---------------+----------------+----------------+----------------+
If the client requests the media Segments from the server separately over
multiple non-competing parallel TCP connections established over separate
access network bearers named as accessbearer, then the average throughput
values should be reported as a list of events with average throughput for each
access network and associated access network bearer information reported
separately, following the same guidelines as described above.
### 10.2.5 Initial Playout Delay
This metric in Table 28 signals the initial playout delay at the start of the
streaming of the presentation.
The metric is only logged at the time point when the playout of streaming
video begins.
Table 28: Initial Playout Delay
* * *
Key Type Description InitialPlayoutDelay Integer The initial playout delay is
measured as the time in milliseconds from the fetch of the first media Segment
(or sub-segment) and the time at which media is retrieved from the client
buffer.
* * *
### 10.2.6 Buffer Level
Annex D.4.5 in ISO/IEC 23009-1 [43] defines the metrics for buffer level
status events.
Table 29: Void
### 10.2.7 Play List
Decoded samples are generally rendered in presentation time sequence, each at
or close to its specified presentation time. A compact representation of the
information flow can thus be constructed from a list of time periods during
which samples of a single representation were continuously rendered, such that
each was presented at its specified presentation time to some specific level
of accuracy (e.g. +/-10 ms).
Such a sequence of periods of continuous delivery is started by a user action
that requests playout to begin at a specified media time (this could be a
\"play\", \"seek\" or \"resume\" action) and continues until playout stops
either due to a user action, the end of the content, or a permanent failure.
Table 30 defines the play list event metric.
Table 30: Play List
+---------+---------+---------+---------+---------+---------+---------+ | Key | Type | Desc | | | | | | | | ription | | | | | +---------+---------+---------+---------+---------+---------+---------+ | P | List | A list | | | | | | layList | | of | | | | | | | | p | | | | | | | | layback | | | | | | | | p | | | | | | | | eriods. | | | | | | | | A | | | | | | | | p | | | | | | | | layback | | | | | | | | period | | | | | | | | is the | | | | | | | | time | | | | | | | | i | | | | | | | | nterval | | | | | | | | between | | | | | | | | a user | | | | | | | | action | | | | | | | | and | | | | | | | | wh | | | | | | | | ichever | | | | | | | | occurs | | | | | | | | soonest | | | | | | | | of the | | | | | | | | next | | | | | | | | user | | | | | | | | action, | | | | | | | | the end | | | | | | | | of | | | | | | | | p | | | | | | | | layback | | | | | | | | or a | | | | | | | | failure | | | | | | | | that | | | | | | | | stops | | | | | | | | pl | | | | | | | | ayback. | | | | | +---------+---------+---------+---------+---------+---------+---------+ | | _Entry_ | Object | A | | | | | | | | record | | | | | | | | of a | | | | | | | | single | | | | | | | | p | | | | | | | | layback | | | | | | | | period. | | | | +---------+---------+---------+---------+---------+---------+---------+ | | | start | Real | Ti | | | | | | | Time | mestamp | | | | | | | | of the | | | | | | | | user | | | | | | | | action | | | | | | | | that | | | | | | | | starts | | | | | | | | the | | | | | | | | p | | | | | | | | layback | | | | | | | | period. | | | +---------+---------+---------+---------+---------+---------+---------+ | | | mstart | Media | The | | | | | | | Time | prese | | | | | | | | ntation | | | | | | | | time at | | | | | | | | which | | | | | | | | playout | | | | | | | | was | | | | | | | | re | | | | | | | | quested | | | | | | | | by the | | | | | | | | user | | | | | | | | action. | | | +---------+---------+---------+---------+---------+---------+---------+ | | | st | Enum | Type of | | | | | | arttype | | user | | | | | | | | action | | | | | | | | which | | | | | | | | tr | | | | | | | | iggered | | | | | | | | playout | | | | | | | | | | | | | | | | - New | | | | | | | | playout | | | | | | | | request | | | | | | | | (e.g. | | | | | | | | initial | | | | | | | | playout | | | | | | | | or | | | | | | | | s | | | | | | | | eeking) | | | | | | | | | | | | | | | | - | | | | | | | | Resume | | | | | | | | from | | | | | | | | pause | | | | | | | | | | | | | | | | - | | | | | | | | Other | | | | | | | | user | | | | | | | | request | | | | | | | | (e.g. | | | | | | | | user-re | | | | | | | | quested | | | | | | | | quality | | | | | | | | change) | | | | | | | | | | | | | | | | - | | | | | | | | Start | | | | | | | | of a | | | | | | | | metrics | | | | | | | | col | | | | | | | | lection | | | | | | | | period | | | | | | | | (hence | | | | | | | | earlier | | | | | | | | entries | | | | | | | | in the | | | | | | | | play | | | | | | | | list | | | | | | | | not | | | | | | | | col | | | | | | | | lected) | | | +---------+---------+---------+---------+---------+---------+---------+ | | | Trace | List | List of | | | | | | | | periods | | | | | | | | of | | | | | | | | con | | | | | | | | tinuous | | | | | | | | re | | | | | | | | ndering | | | | | | | | of | | | | | | | | decoded | | | | | | | | s | | | | | | | | amples. | | | +---------+---------+---------+---------+---------+---------+---------+ | | | | _Trac | Objects | Single | | | | | | eentry_ | | entry | | | | | | | | in the | | | | | | | | list. | | +---------+---------+---------+---------+---------+---------+---------+ | | | | | re | String | The | | | | | | present | | value | | | | | | ationid | | of | | | | | | | | Repr | | | | | | | | esentat | | | | | | | | ion\@id | | | | | | | | from | | | | | | | | which | | | | | | | | the | | | | | | | | samples | | | | | | | | were | | | | | | | | taken. | | | | | | | | | | | | | | | | This is | | | | | | | | an | | | | | | | | o | | | | | | | | ptional | | | | | | | | pa | | | | | | | | rameter | | | | | | | | and | | | | | | | | should | | | | | | | | not be | | | | | | | | r | | | | | | | | eported | | | | | | | | in case | | | | | | | | of | | | | | | | | prog | | | | | | | | ressive | | | | | | | | do | | | | | | | | wnload. | +---------+---------+---------+---------+---------+---------+---------+ | | | | | subr | Integer | If not | | | | | | eplevel | | p | | | | | | | | resent, | | | | | | | | this | | | | | | | | metric | | | | | | | | c | | | | | | | | oncerns | | | | | | | | the | | | | | | | | Represe | | | | | | | | ntation | | | | | | | | as a | | | | | | | | whole. | | | | | | | | If | | | | | | | | p | | | | | | | | resent, | | | | | | | | subr | | | | | | | | eplevel | | | | | | | | in | | | | | | | | dicates | | | | | | | | the | | | | | | | | g | | | | | | | | reatest | | | | | | | | value | | | | | | | | of any | | | | | | | | Sub | | | | | | | | Represe | | | | | | | | ntation | | | | | | | | \@level | | | | | | | | being | | | | | | | | re | | | | | | | | ndered. | | | | | | | | | | | | | | | | This is | | | | | | | | an | | | | | | | | o | | | | | | | | ptional | | | | | | | | pa | | | | | | | | rameter | | | | | | | | and | | | | | | | | should | | | | | | | | not be | | | | | | | | r | | | | | | | | eported | | | | | | | | in case | | | | | | | | of | | | | | | | | prog | | | | | | | | ressive | | | | | | | | do | | | | | | | | wnload. | +---------+---------+---------+---------+---------+---------+---------+ | | | | | start | Real | The | | | | | | | Time | time at | | | | | | | | which | | | | | | | | the | | | | | | | | first | | | | | | | | sample | | | | | | | | was | | | | | | | | re | | | | | | | | ndered. | +---------+---------+---------+---------+---------+---------+---------+ | | | | | sstart | Media | The | | | | | | | Time | prese | | | | | | | | ntation | | | | | | | | time of | | | | | | | | the | | | | | | | | first | | | | | | | | sample | | | | | | | | re | | | | | | | | ndered. | +---------+---------+---------+---------+---------+---------+---------+ | | | | | d | Integer | The | | | | | | uration | | time in | | | | | | | | milli | | | | | | | | seconds | | | | | | | | of the | | | | | | | | d | | | | | | | | uration | | | | | | | | of the | | | | | | | | conti | | | | | | | | nuously | | | | | | | | pr | | | | | | | | esented | | | | | | | | samples | | | | | | | | (which | | | | | | | | is the | | | | | | | | same in | | | | | | | | real | | | | | | | | time | | | | | | | | and | | | | | | | | media | | | | | | | | time). | | | | | | | | \"Conti | | | | | | | | nuously | | | | | | | | pres | | | | | | | | ented\" | | | | | | | | means | | | | | | | | that | | | | | | | | the | | | | | | | | media | | | | | | | | clock | | | | | | | | co | | | | | | | | ntinued | | | | | | | | to | | | | | | | | advance | | | | | | | | at the | | | | | | | | playout | | | | | | | | speed | | | | | | | | thr | | | | | | | | oughout | | | | | | | | the | | | | | | | | in | | | | | | | | terval. | +---------+---------+---------+---------+---------+---------+---------+ | | | | | playba | Real | The | | | | | | ckspeed | | p | | | | | | | | layback | | | | | | | | speed | | | | | | | | r | | | | | | | | elative | | | | | | | | to | | | | | | | | normal | | | | | | | | p | | | | | | | | layback | | | | | | | | speed | | | | | | | | (i.e | | | | | | | | .normal | | | | | | | | forward | | | | | | | | p | | | | | | | | layback | | | | | | | | speed | | | | | | | | is | | | | | | | | 1.0). | +---------+---------+---------+---------+---------+---------+---------+ | | | | | sto | Enum | The | | | | | | preason | | reason | | | | | | | | why | | | | | | | | con | | | | | | | | tinuous | | | | | | | | prese | | | | | | | | ntation | | | | | | | | of this | | | | | | | | represe | | | | | | | | ntation | | | | | | | | was | | | | | | | | s | | | | | | | | topped. | | | | | | | | Either: | | | | | | | | | | | | | | | | - | | | | | | | | represe | | | | | | | | ntation | | | | | | | | switch | | | | | | | | (not | | | | | | | | r | | | | | | | | elevant | | | | | | | | in case | | | | | | | | of | | | | | | | | prog | | | | | | | | ressive | | | | | | | | do | | | | | | | | wnload) | | | | | | | | | | | | | | | | - | | | | | | | | rebu | | | | | | | | ffering | | | | | | | | | | | | | | | | - user | | | | | | | | request | | | | | | | | | | | | | | | | - end | | | | | | | | of | | | | | | | | period | | | | | | | | | | | | | | | | - end | | | | | | | | of | | | | | | | | content | | | | | | | | | | | | | | | | - end | | | | | | | | of a | | | | | | | | metrics | | | | | | | | col | | | | | | | | lection | | | | | | | | period | | | | | | | | | | | | | | | | - | | | | | | | | failure | | | | | | | | | | | | | | | | - | | | | | | | | other | +---------+---------+---------+---------+---------+---------+---------+ | | | | | s | String | The | | | | | | topreas | | s | | | | | | onother | | topreas | | | | | | | | onother | | | | | | | | at | | | | | | | | tribute | | | | | | | | shall | | | | | | | | be | | | | | | | | i | | | | | | | | ncluded | | | | | | | | only if | | | | | | | | sto | | | | | | | | preason | | | | | | | | at | | | | | | | | tribute | | | | | | | | is | | | | | | | | i | | | | | | | | ncluded | | | | | | | | and has | | | | | | | | the | | | | | | | | enum | | | | | | | | value | | | | | | | | * | | | | | | | | other*. | | | | | | | | In this | | | | | | | | release | | | | | | | | of the | | | | | | | | specifi | | | | | | | | cation, | | | | | | | | the | | | | | | | | sender | | | | | | | | of this | | | | | | | | string | | | | | | | | shall | | | | | | | | set its | | | | | | | | value | | | | | | | | to one | | | | | | | | of the | | | | | | | | foll | | | | | | | | owing:: | | | | | | | | | | | | | | | | - | | | | | | | | switch | | | | | | | | from | | | | | | | | unicast | | | | | | | | to | | | | | | | | br | | | | | | | | oadcast | | | | | | | | | | | | | | | | - | | | | | | | | switch | | | | | | | | from | | | | | | | | br | | | | | | | | oadcast | | | | | | | | to | | | | | | | | unicast | | | | | | | | | | | | | | | | The | | | | | | | | r | | | | | | | | eceiver | | | | | | | | of this | | | | | | | | at | | | | | | | | tribute | | | | | | | | shall | | | | | | | | ignore | | | | | | | | this | | | | | | | | at | | | | | | | | tribute | | | | | | | | if its | | | | | | | | string | | | | | | | | is set | | | | | | | | to | | | | | | | | diff | | | | | | | | ererent | | | | | | | | value | | | | | | | | than | | | | | | | | the | | | | | | | | values | | | | | | | | listed | | | | | | | | above. | +---------+---------+---------+---------+---------+---------+---------+
NOTE: The trace may include entries for different representations that overlap
in time, because multiple representations are being rendered simultaneously,
for example one audio and one video representation.
The playlist includes user actions about start/stop, but also other non-user
actions such as adaptation and rebuffering. Thus the playlist may be used to
derive many other metrics, and an example calculation of a few stalling-
related metrics is shown below.
Assume a user at wall-clock time hh:mm:ss = 09:00:00 clicks to start a
60-second video with the following playout characteristics:
{width="4.055555555555555in" height="0.6368055555555555in"}
Figure 10-1 Example for Playout
\- 5 seconds of initial stalling\ \- 10 seconds playing with representation 1\
\- 15 seconds of stalling\ \- 20 seconds playing with representation 2\ \- 30
seconds playing with representation 1
This would result in the following (somewhat simplified in this example)
playout list being reported by the client:
Playlist
Entry#1
start = 09:00:00
mstart = 00:00:00
starttype = New playout request
Trace
Traceentry#1
representationid = 1
start = 09:00:05
sstart = 00:00:00
duration = 10 seconds
stopreason = rebuffering
Traceentry#2
representationid = 2
start = 09:00:30
sstart = 00:00:10
duration = 20 seconds
stopreason = representation switch
Traceentry#3
representationid = 1
start = 09:00:50
sstart = 00:00:30
duration = 30 seconds
stopreason = end of content
The number of stalling occurances may be calculated by counting how many times
a stop reason is specified as \"rebuffering\".
The time duration for a stalling event may be calculated based on the time
difference between the end time of a trace entry with stopreason equal to
\"rebuffering\", and the start time of the next trace entry. In the example
above the stalling starts at \"Traceentry#1, (start + duration)\" = 09:00:05 +
10 secs = 09:00:15, and ends at \"Traceentry#2, start\" = 09:00:30. Thus the
length of the stalling is 15 seconds.
### 10.2.8 MPD Information
This metric can be used to report Representation information from the MPD, so
that reporting servers without direct access to the MPD can understand the
used media characteristics.
The metric is reported whenever the client sends any other quality metrics
report containing references to a Representation which MPD information has
still not been reported.
Table 31 defines the MPD information for quality reporting.
Table 31: MPD Information for Quality Reporting
* * *
Key Type Description  
MPDInformation Object  
representationid String Value of **Representation** \@id for the
representation addressed by the QoE metrics report. subreplevel Integer If
present, value of SubRepresentation\@level for the subrepresentation addressed
by the QoE metrics report. If not present, the QoE metrics report concerns the
representation as a whole. Mpdinfo RepresentationType Provides the MPD
information for the representation or subrepresentation identified by
representationid and subreplevel, if present. The following attributes and
elements shall be present within mpdinfo if they are present for the
identified representation or subrepresentation and their values shall be
identical to those presented in the MPD: \@bandwidth, \@qualityRanking,
\@width, \@height, \@mimeType, and \@codecs.
* * *
### 10.2.9 Playout Delay for Media Start-up
This metric in Table 31a indicates the waiting time that the user experiences
for media start-up.
The metric is only logged at the time point when the media start-up happens.
Table 31a: Playout Delay for Media Start-up
+----------------------------+---------+----------------------------+ | Key | Type | Description | +----------------------------+---------+----------------------------+ | P | Integer | The playout delay for | | layoutDelayforMediaStartup | | media start-up is measured | | | | as the time in | | | | milliseconds from the time | | | | instant of DASH player | | | | receives play-back-start | | | | trigger **to the instant | | | | of media playout.** | | | | | | | | - If the MPD has been | | | | delivered earlier before | | | | the user clicks, it may | | | | include the process time | | | | of MPD, the fetch time of | | | | some media segments which | | | | are required for media | | | | presentation, the process | | | | time of segments, and the | | | | time for media decode and | | | | render to the user. | | | | | | | | - If no MPD has been | | | | fetched earlier, it also | | | | needs to add the fetch | | | | time of MPD. | +----------------------------+---------+----------------------------+
### 10.2.10 Device information
This metric contains information about the displayed video resolution as well
as the physical screen characteristics. If the video is rendered in full-
screen mode, the video resolution usually coincides with the characteristics
of the full physical display. If the video is rendered in a smaller subwindow,
the characteristics of the actual video window shown shall be logged.
If known by the DASH client, the physical screen width and the horizontal
field-of-view shall also be logged.
The metric is logged at the start of each QoE reporting period, and whenever
the characteristics changes during the session (for instance if the UE is
rotated from horizontal to vertical orientation, or if the video subwindow
size is changed).
Table 31b defines the device information metrics. If an individual metric
cannot be logged, its value shall be set to 0 (zero).
Table 31b: Device information
* * *
Key Type Description  
DeviceInformationList List A list of device information objects.  
_Entry_ Object A single object containing new device information.  
start Real-Time Timestamp when the device information was logged. mstart
Media-Time The presentation time at which the device information was logged.
videoWidth Integer The width of the displayed video, in screen pixels (not
encoded video pixels). videoHeight Integer The height of the displayed video,
in screen pixels (not encoded video pixels) screenWidth Integer The total
width of the screen, in screen pixels screenHeight Integer The total height of
the screen, in screen pixels pixelWidth Float The width of a screen pixel, in
mm pixelHeight Float The height of a screen pixel, in mm fieldOfView Float The
actual or estimated horizontal angle subtended at the eye by the screen,
measured in degrees.
* * *
## 10.3 Quality Metrics for Progressive Download
The following metrics shall be supported by progressive download clients
supporting the QoE reporting feature:
\- Average Throughput (Clause 10.2.4),
\- Initial Playout Delay (Clause 10.2.5),
\- Buffer Level (Clause 10.2.6),
\- Play List (Clause 10.2.7), and
\- Device information (Clause 10.2.10).
## 10.4 Quality Metrics for DASH
The following metrics shall be supported by 3GP-DASH clients supporting the
QoE reporting feature:
\- List of Representation Switch Events (Clause 10.2.3),
\- Average Throughput (Clause 10.2.4),
\- Initial Playout Delay (Clause 10.2.5),
\- Buffer Level (Clause 10.2.6),
\- Play List (Clause 10.2.7),
\- MPD Information (Clause 10.2.8),
\- Playout Delay for Media Start-up (Clause 10.2.9),
\- Device information (Clause 10.2.10).
The \@metrics attribute contains a list of quality metric keys listing all
metrics that the DASH shall collect and report.
The semantics of the attributes within the **Metrics** element are provided in
Table 32. The XML-syntax of a **Metrics** element is provided in Table 33.
Table 32: Semantics of Metrics element
+----------+----------+----------+----------+----------+----------+ | Element | Use | Des | | | | | or | | cription | | | | | A | | | | | | | ttribute | | | | | | | Name | | | | | | +----------+----------+----------+----------+----------+----------+ | | **M | | DASH | | | | | etrics** | | metric | | | | | | | element | | | +----------+----------+----------+----------+----------+----------+ | | | \ | M | This | | | | | @metrics | | a | | | | | | | ttribute | | | | | | | lists | | | | | | | all | | | | | | | quality | | | | | | | metrics | | | | | | | (as a | | | | | | | list of | | | | | | | quality | | | | | | | metric | | | | | | | keys as | | | | | | | defined | | | | | | | in | | | | | | | clau | | | | | | | se 10.2, | | | | | | | s | | | | | | | eparated | | | | | | | by a | | | | | | | whi | | | | | | | tespace) | | | | | | | that the | | | | | | | client | | | | | | | shall | | | | | | | report. | | | | | | | | | | | | | | Certain | | | | | | | keys | | | | | | | allow | | | | | | | sp | | | | | | | ecifying | | | | | | | a | | | | | | | mea | | | | | | | surement | | | | | | | interval | | | | | | | or | | | | | | | period | | | | | | | over | | | | | | | which a | | | | | | | single | | | | | | | value of | | | | | | | the | | | | | | | metric | | | | | | | is | | | | | | | derived | | | | | | | and | | | | | | | pot | | | | | | | entially | | | | | | | also | | | | | | | other | | | | | | | pa | | | | | | | rameters | | | | | | | con | | | | | | | trolling | | | | | | | the | | | | | | | co | | | | | | | llection | | | | | | | of the | | | | | | | metrics. | | | | | | | The | | | | | | | par | | | | | | | ameters, | | | | | | | if any, | | | | | | | are | | | | | | | included | | | | | | | in | | | | | | | par | | | | | | | enthesis | | | | | | | after | | | | | | | the key | | | | | | | and | | | | | | | their | | | | | | | s | | | | | | | emantics | | | | | | | are | | | | | | | s | | | | | | | pecified | | | | | | | in | | | | | | | clause | | | | | | | 10.2 | | | | | | | with the | | | | | | | metric | | | | | | | de | | | | | | | finition | | | | | | | itself. | | +----------+----------+----------+----------+----------+----------+ | | | * | 0..N | When | | | | | _Range_ _| | sp | | | | | | | ecified, | | | | | | | it | | | | | | | i | | | | | | | ndicates | | | | | | | the time | | | | | | | period | | | | | | | during | | | | | | | which | | | | | | | quality | | | | | | | metric | | | | | | | co | | | | | | | llection | | | | | | | is | | | | | | | re | | | | | | | quested. | | | | | | | When not | | | | | | | present, | | | | | | | quality | | | | | | | metric | | | | | | | co | | | | | | | llection | | | | | | | is | | | | | | | r | | | | | | | equested | | | | | | | for the | | | | | | | whole | | | | | | | duration | | | | | | | of the | | | | | | | content. | | +----------+----------+----------+----------+----------+----------+ | | | | \@s | O | When | | | | | tarttime | | sp | | | | | | | ecified, | | | | | | | it | | | | | | | i | | | | | | | ndicates | | | | | | | the | | | | | | | start | | | | | | | time of | | | | | | | the | | | | | | | quality | | | | | | | metric | | | | | | | co | | | | | | | llection | | | | | | | op | | | | | | | eration. | | | | | | | When not | | | | | | | present, | | | | | | | quality | | | | | | | metric | | | | | | | co | | | | | | | llection | | | | | | | is | | | | | | | r | | | | | | | equested | | | | | | | from the | | | | | | | b | | | | | | | eginning | | | | | | | of | | | | | | | content | | | | | | | cons | | | | | | | umption. | | | | | | | For | | | | | | | services | | | | | | | with | | | | | | |__MPD | | | | | | |__\@type | | | | | | | \ | | | | | | | "Live\", | | | | | | | the | | | | | | | start | | | | | | | time of | | | | | | | quality | | | | | | | metric | | | | | | | co | | | | | | | llection | | | | | | | can be | | | | | | | obtained | | | | | | | in | | | | | | | w | | | | | | | allclock | | | | | | | time by | | | | | | | adding | | | | | | | the | | | | | | | value of | | | | | | | this | | | | | | | a | | | | | | | ttribute | | | | | | | i | | | | | | | ndicated | | | | | | | in media | | | | | | | time to | | | | | | | the | | | | | | | value of | | | | | | | the | | | | | | |__MPD_ | | | | | | | _\@avail | | | | | | | abilityS | | | | | | | tartTime | | | | | | | at | | | | | | | tribute. | | | | | | | For | | | | | | | services | | | | | | | with | | | | | | |__MPD | | | | | | |__\@type | | | | | | | \"On | | | | | | | Demand\" | | | | | | | , the | | | | | | | start | | | | | | | time is | | | | | | | i | | | | | | | ndicated | | | | | | | in media | | | | | | | time and | | | | | | | is | | | | | | | relative | | | | | | | to the | | | | | | |_ Peri | | | | | | | odStart _| | | | | | | time of | | | | | | | the | | | | | | | first | | | | | | | period | | | | | | | in this | | | | | | | MPD. | +----------+----------+----------+----------+----------+----------+ | | | | \@ | O | When | | | | | duration | | sp | | | | | | | ecified, | | | | | | | it | | | | | | | i | | | | | | | ndicates | | | | | | | the | | | | | | | duration | | | | | | | of the | | | | | | | quality | | | | | | | metric | | | | | | | co | | | | | | | llection | | | | | | | period. | | | | | | | The | | | | | | | value of | | | | | | | this | | | | | | | a | | | | | | | ttribute | | | | | | | is | | | | | | | e | | | | | | | xpressed | | | | | | | in media | | | | | | | time. | +----------+----------+----------+----------+----------+----------+ | | |__Rep | 1...N | Des | | | | | orting_ * | | criptors | | | | | | | that | | | | | | | provide | | | | | | | inf | | | | | | | ormation | | | | | | | about | | | | | | | the | | | | | | | r | | | | | | | equested | | | | | | | Quality | | | | | | | R | | | | | | | eporting | | | | | | | method | | | | | | | and | | | | | | | formats, | | | | | | | and | | | | | | | A | | | | | | | uxiliary | | | | | | | R | | | | | | | eporting | | | | | | | method | | | | | | | and | | | | | | | format. | | | | | | | See | | | | | | | clause | | | | | | | 10.5 for | | | | | | | the | | | | | | | 3GP-DASH | | | | | | | quality | | | | | | | r | | | | | | | eporting | | | | | | | schemes, | | | | | | | and | | | | | | | clause | | | | | | | 14 for | | | | | | | the | | | | | | | 3GP-DASH | | | | | | | a | | | | | | | uxiliary | | | | | | | r | | | | | | | eporting | | | | | | | scheme. | | +----------+----------+----------+----------+----------+----------+ | Legend: | | | | | | | | | | | | | | > For | | | | | | | > att | | | | | | | ributes: | | | | | | | > M=Ma | | | | | | | ndatory, | | | | | | | > O=O | | | | | | | ptional, | | | | | | | > OD= | | | | | | | Optional | | | | | | | > with | | | | | | | > | | | | | | | Default | | | | | | | > Value, | | | | | | | > | | | | | | | CM=Condi | | | | | | | tionally | | | | | | | > Ma | | | | | | | ndatory. | | | | | | | > | | | | | | | > For | | | | | | | > e | | | | | | | lements: | | | | | | | > \\ | | | | | | | ...\ | | | | | | | > (N=un | | | | | | | bounded) | | | | | | | | | | | | | | Elements | | | | | | | are | | | | | | | bold; | | | | | | | at | | | | | | | tributes | | | | | | | are | | | | | | | non-bold | | | | | | | and | | | | | | | preceded | | | | | | | with an | | | | | | | @. | | | | | | +----------+----------+----------+----------+----------+----------+
Table 33: XML-Syntax of Metrics element
+----------------------------------------------------------------------+ | \\ | | \\ | | \\ | | \\ | | \ | | | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | +----------------------------------------------------------------------+
## 10.5 Quality Reporting Scheme for DASH
This clause specifies a 3GP-DASH quality reporting scheme.
The quality reporting scheme is signaled using in the **Reporting** element in
the **Metrics** element. The URN to be used for the **Reporting**
\@schemeIdUri shall be \"urn:3GPP:ns:PSS:DASH:QM10\".
The reporting scheme shall use the quality reporting protocol defined in
clause 10.6.
The semantics and XML syntax of the scheme information for the 3GP-DASH
quality reporting scheme are specified in Table 34 and Table 35, respectively.
Table 34: Semantics of Quality Reporting Scheme Information
+-----------------+-----------------+-------------+-----------------+ | Element or | Use | Description | | | Attribute Name | | | | +-----------------+-----------------+-------------+-----------------+ | | \@apn | O | This attribute | | | | | gives the | | | | | access point | | | | | that should be | | | | | used for | | | | | sending the QoE | | | | | reports. | +-----------------+-----------------+-------------+-----------------+ | | \@format | O | This field | | | | | gives the | | | | | requested | | | | | format for the | | | | | reports. | | | | | Possible | | | | | formats are: | | | | | \ | | | | | "uncompressed\" | | | | | and \"gzip\". | +-----------------+-----------------+-------------+-----------------+ | | \@s | O | Percentage of | | | amplepercentage | | the clients | | | | | that should | | | | | report QoE. The | | | | | client uses a | | | | | random number | | | | | generator with | | | | | the given | | | | | percentage to | | | | | find out if the | | | | | client should | | | | | report or not. | +-----------------+-----------------+-------------+-----------------+ | | \@ | M | The reporting | | | reportingserver | | server URL to | | | | | which the | | | | | reports will be | | | | | sent. | +-----------------+-----------------+-------------+-----------------+ | | \@re | O | Indicates the | | | portinginterval | | time(s) reports | | | | | should be sent. | | | | | If not present, | | | | | then the client | | | | | should send a | | | | | report after | | | | | the streaming | | | | | session has | | | | | ended. If | | | | | present, | | | | | \@repo | | | | | rtingInterval=n | | | | | indicates that | | | | | the client | | | | | should send a | | | | | report every | | | | | n-th second | | | | | provided that | | | | | new metrics | | | | | information has | | | | | become | | | | | available since | | | | | the previous | | | | | report. For | | | | | each report | | | | | sent, only the | | | | | newly collected | | | | | information | | | | | since the | | | | | previous report | | | | | shall be | | | | | reported. | +-----------------+-----------------+-------------+-----------------+ | | **L | 0..1 | When present, | | | ocationFilter** | | this element | | | | | indicates the | | | | | geographic | | | | | area(s) or | | | | | location(s) | | | | | where quality | | | | | metric | | | | | collection is | | | | | requested. When | | | | | not present, | | | | | quality metric | | | | | collection is | | | | | requested | | | | | regardless of | | | | | the device's | | | | | location. The | | | | | LocationFilter | | | | | element | | | | | comprises one | | | | | or more | | | | | instances of | | | | | any combination | | | | | of targeted | | | | | cell-IDs, | | | | | polygons and | | | | | circular | | | | | areas.Each | | | | | cell-ID entry | | | | | in | | | | | LocationFilter | | | | | is announced in | | | | | cellList, and | | | | | each polygon | | | | | and circular | | | | | area entry is | | | | | announced in | | | | | the polygonList | | | | | or and | | | | | c | | | | | ircularAreaList | | | | | elements, | | | | | respectively. | +-----------------+-----------------+-------------+-----------------+ | | cellList | 0..N | This element | | | | | specifies a | | | | | list of cell | | | | | identified by | | | | | E-UTRAN-CGI or | | | | | CGI. | +-----------------+-----------------+-------------+-----------------+ | | shape | | Geographic area | | | | | comprising one | | | | | or more | | | | | instances of | | | | | polygonList | | | | | and/or | | | | | c | | | | | ircularAreaList | | | | | elements. | +-----------------+-----------------+-------------+-----------------+ | | polygonList | 0..N | This element, | | | | | when present, | | | | | comprises a | | | | | list of | | | | | 'Polygon' | | | | | shapes as | | | | | defined by OMA | | | | | MLP[51]. | +-----------------+-----------------+-------------+-----------------+ | | \@confLevel | O | This attribute | | | | | indicates the | | | | | probability in | | | | | percent that | | | | | the DASH client | | | | | is located in | | | | | the | | | | | corresponding | | | | | polygon area. | | | | | It is defined | | | | | as 'lev_conf' | | | | | by OMA MLP. If | | | | | not present, it | | | | | has default | | | | | value of 60. | +-----------------+-----------------+-------------+-----------------+ | | c | 0..N | This element, | | | ircularAreaList | | when present, | | | | | comprises a | | | | | list of | | | | | 'CircularArea' | | | | | shapes as | | | | | defined by OMA | | | | | MLP[51]. | +-----------------+-----------------+-------------+-----------------+ | | \@confLevel | O | This attribute | | | | | indicates the | | | | | probability in | | | | | percent that | | | | | the DASH client | | | | | is located in | | | | | the | | | | | corresponding | | | | | circular area. | | | | | It is defined | | | | | as 'lev_conf' | | | | | by OMA MLP. If | | | | | not present, it | | | | | has default | | | | | value of 60. | +-----------------+-----------------+-------------+-----------------+ | Legend: | | | | | | | | | | > For | | | | | > attributes: | | | | | > M=Mandatory, | | | | | > O=Optional, | | | | | > OD=Optional | | | | | > with Default | | | | | > Value, | | | | | > C | | | | | M=Conditionally | | | | | > Mandatory. | | | | | > | | | | | > For elements: | | | | | > | | | | | \. | | | | | ..\ | | | | | > (N=unbounded) | | | | | | | | | | Elements are | | | | | bold; | | | | | attributes are | | | | | non-bold and | | | | | preceded with | | | | | an @ | | | | +-----------------+-----------------+-------------+-----------------+
Table 35: Syntax of Quality Reporting Scheme Information
+----------------------------------------------------------------------+ | \\ | | \\ | | \ | | \\ | | \3GPP DASH Quality Reporting\\ | | \\ | | This Schema defines the quality reporting scheme information for | | 3GPP DASH.\ | | \\ | | \\ | | \ | | \\ | | \ | | \ | | | | \\ | | \ | | | | \ | | | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | | | \\ | | \\ | | \ | | | | \ | | | | \\ | | \ | | | | \ | | | | \ | | | | \\ | | \\ | | \ | | | | \\ | | \\ | | \ | | | | \ | | | | \ | | | | \\ | | \ | | | | \ see [OMA MLP] \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \\ | | \ | | | | \ see [OMA MLP] \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | +----------------------------------------------------------------------+
## 10.6 Quality Reporting Protocol
### 10.6.1 General
The quality reporting protocol consists of:
\- The XML-based report format defined in clause 10.6.2.
\- The reporting protocol defined in clause 10.6.3.
The MIME type of an XML-formatted QoE report shall be \"application/3gpdash-
qoe-report+xml\" as defined in Annex J.
### 10.6.2 Report Format
The QoE report is formatted as an XML document that complies with the XML
schema in Listing 10.6.2-1.
Listing 10.6.2-1: QoE Report XML schema
+----------------------------------------------------------------------+ | \\ | | \ | | | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \ | | | | \ | | | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | | | \ | | | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \ | | | | \\ | | \\ | | \ | | | | \ | +----------------------------------------------------------------------+
The schema in Listing 10.6.2-2 is an extension to allow additional QoE
metrics.
Listing 10.6.2-2: Additional QoE Metrics XML schema
+----------------------------------------------------------------------+ | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \\ | | \ | | | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | | | \ | | | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | | | \\ | | \ | | | | \\ | | \ | | | | \ | | | | \ | +----------------------------------------------------------------------+
The schema in Listing 10.6.2-3 is providing the schema for the version.
Listing 10.6.2-3: XML Schema for the version
+----------------------------------------------------------------+ | \ | | | | \ | | | | \ | | | | \ | | | | \ | +----------------------------------------------------------------+
If a supplementQoEMetric needs to be sent when no ordinary QoEMetric is due, a
dummy MPDInformation metric shall be sent with codecs=\"none\", bandwidth=0,
mimeType=\"none\", representationId=\"none\".
If the attribute qoeReferenceId was defined in the QMC configuration (see
clause L.2), the value shall be copied into each QoE report, to facilitate
network-side correlation (see [63]). If this attribute was defined the
attribute recordingSessionId shall also be returned for each QoE report. The
recordingSessionId is a two-byte octet defined by the client. It shall remain
the same for all QoE reports belonging to the same streaming session, and it
should be different for QoE reports belonging to different streaming sessions.
### 10.6.3 Reporting Protocols
For configuration done via the QMC functionality (see Annex L), the client
shall also send QoE reports via the QMC functionality. For MPD or OMA-DM
configuration, if a specific metrics server has been configured, the client
shall send QoE reports using the HTTP (RFC 2616) [9] POST request carrying XML
formatted metadata in its body.
An example QoE reporting based on HTTP POST request signalling is shown below:
Listing 10.6.3â€‘1
+----------------------------------------------------------------------+ | **POST http://www.exampleserver.com HTTP/1.1** | | | | **Host: 192.68.1.1** | | | | **User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; | | Trident/4.0)** | | | | **Content-Type: text/xml; charset=utf-8** | | | | **Content-Length: 4408** | +----------------------------------------------------------------------+ | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | | | \ | | | | \\ | | \ | | | | \ | | | | \\ | | \ | | | | \ | | | | \\ | | \ | | | | \ | | | | \\ | | \\ | | \\ | | \10000\\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | +----------------------------------------------------------------------+ | | +----------------------------------------------------------------------+
# 11 Live Services
## 11.1 Overview Dynamic and Live Media Presentations {#overview-dynamic-and-
live-media-presentations .list-paragraph}
DASH Media Presentations with **MPD** \@type set to \"dynamic\" enable that
media is made available over time and its availability may also be removed
over time. This has two major effects, namely
1) The content creator can announce a DASH Media Presentation for which not
all content is yet available, but only gets available over time.
2) Clients are forced into a timed schedule for the playout, such that they
follow the schedule as desired by the content author.
Dynamic services may be used for different types of services:
**1) Dynamic Distribution of Available Content** : Services, for which content
is made available as dynamic content, but the content is entirely generated
prior to distribution. In this case the details of the Media Presentation,
especially the Segments (duration, URLs) are known and can be announced in a
single MPD without MPD updates.
**2) MPD-controlled Live Service** : Services for which the content is
typically generated on the fly, and the MPD needs to be updated occasionally
to reflect changes in the service offerings, e.g. announcing a new Period with
new media or providing the end of the Media Presentation. The DASH client
operates solely on information in the MPD.
Dynamic and Live services are typically controlled by different client
transactions and server-side signaling.
For initial access to the service and joining the service, an MPD is required.
MPDs may be accessed at join time or may have been provided earlier, for
example along with an Electronic Service Guide. The initial MPD or join MPD is
accessed and processed by the client and the client is synchronized with the
server can analyze the MPD and extract suitable information in order to
initiate the service. This includes, but is not limited to:
\- identifying the currently active Periods in the service and the Period that
expresses the live edge (for more details see below)
\- selecting the suitable media components by selecting one or multiple
Adaptation Sets. Within each Adaptation Set selecting an appropriate
Representation and identifying the live edge segment in each Representations.
The client then issues requests for the Segments.
The MPD may be updated on the server based on certain rules and clients
consuming the service are expected to update MPDs based on certain triggers.
This clause provides requirements and recommendations for different functions,
namely
\- for the dynamic segment download in clause 11.2.
\- for services with MPD updates in clause 11.3
\- for offering live generated services in on-demand mode in clause 11.4
\- for client-server timing synchronization in clause 11.5.
\- for robust service offerings and corresponding clients in clause 11.6.
## 11.2 Dynamic Segment Download
### 11.2.1 Background and Assumptions
The dynamic segment download function is a key component of live services, In
addition, the dynamic segment download function may also be used for
scheduling playout of on-demand content by the content author. In this clause,
it is assumed that the client has access to a single instance of an MPD and
all information of the entire Media Presentation is contained in the MPD.
The timing model of dynamic services, especially the generation of Segment
availabilities is a relevant component of a live services. This forms the
basis for live services and explains the key concepts and rules for Segment
availabilities.
### 11.2.2 MPD Information and Timing Model
#### 11.2.2.1 MPD Information
If the Media Presentation is of type dynamic, then Segments have different
Segment availability times, i.e. the earliest time for which the service
provider permits the DASH client to issue a request to the Segment and
guarantees, under regular operation modes, that the client gets a 200 OK
response for the Segment. The Segment availability times for each
Representation can be computed based on the information in an MPD.
For a dynamic service the MPD should at least contain information as available
in Table 11-1. Information included there may be used to compute a list of
announced Segments, Segment Availability Times and URLs.
Assume that an MPD is available to the DASH client at a specific wall-clock
time _NOW_. It is assumed that the client and the DASH server providing the
Segments are synchronized to wall-clock, either through external means or
through a specific client-server synchronization. Details on synchronization
are provided in clause 11.6.
Assuming synchronization, the information in the MPD can then be used by the
client at time _NOW_ to derive the availability (or non-availability) of
Segments on the server.
Table 11-1 -- Information related to Segment Information and Availability
Times for a dynamic service
+----------------------+----------------------+----------------------+ | **MPD Information** | **Status** | **Comment** | +----------------------+----------------------+----------------------+ | **MPD** \@type | mandatory, set to | the type of the | | | \"dynamic\" | Media Presentation | | | | is dynamic, i.e. | | | | Segments get | | | | available over time. | +----------------------+----------------------+----------------------+ | **MPD** \@a | mandatory | the start time is | | vailabilityStartTime | | the anchor for the | | | | MPD in wall-clock | | | | time. The value is | | | | denoted as _AST_ in | | | | the following. | +----------------------+----------------------+----------------------+ | **MPD** \@media | mandatory (for the | provides the | | PresentationDuration | considered use | duration of the | | | cases) | Media Presentation. | +----------------------+----------------------+----------------------+ | **MPD** \@sugges | optional, but | suggested | | tedPresentationDelay | recommended | presentation delay | | | | as delta to segment | | | | availability start | | | | time. The value is | | | | denoted as _SPD_. | | | | Details on the | | | | setting and usage of | | | | the parameter is | | | | provided in the | | | | following. | +----------------------+----------------------+----------------------+ | ** | mandatory | minimum buffer time, | | MPD**\@minBufferTime | | used in conjunction | | | | with the \@bandwidth | | | | attribute of each | | | | Representation. The | | | | value is denoted as | | | |_MBT_. Details on | | | | the setting and | | | | usage of the | | | | parameter is | | | | provided in the | | | | following. | +----------------------+----------------------+----------------------+ | **MPD**\@ | optional, but | time shift buffer | | timeShiftBufferDepth | recommended | depth of the media | | | | presentation. The | | | | value is denoted as | | | |_TSB_. Details on | | | | the setting and | | | | usage of the | | | | parameter is | | | | provided in the | | | | following. | +----------------------+----------------------+----------------------+ | **Period**\@start | Mandatory for the | the start time of | | | first Period in the | the Period relative | | | MPD | to the MPD | | | | availability start | | | | time. | +----------------------+----------------------+----------------------+ | ** | Optional default | The offset in | | Representation** \@av | | availability time | | ailabilityTimeOffset | | for this | | | | Representation. It | | | | may also be | | | | available on a Base | | | | URL or default | | | | | | | | NOTE: the value of | | | | \"INF\" implies | | | | availability of all | | | | segments starts at | | | | **MPD** \@a | | | | vailabilityStartTime | +----------------------+----------------------+----------------------+ | **Segm | mandatory | The template for the | | entTemplate** \@media | | Media Segment | | | | assigned to a | | | | Representation. | +----------------------+----------------------+----------------------+ | **SegmentTem | optional default | number of the first | | plate** \@startNumber | | segment in the | | | | Period assigned to a | | | | Representation | +----------------------+----------------------+----------------------+ | **SegmentT | optional default | timescale for this | | emplate** \@timescale | | Representation. | +----------------------+----------------------+----------------------+ | **Segment | mandatory | the duration of each | | Template** \@duration | | Segment in units of | | | | a time. | +----------------------+----------------------+----------------------+
#### 11.2.2.2 Segment Information Derivation
##### 11.2.2.2.1 Introduction
Based on an MPD including information as documented in Table 11-1 and
available at time NOW on the server, a synchronized DASH client derives the
information of the list of Segments for each Representation in each Period.
This clause only describes the information that is expressed by the values in
the MPD. The generation of the information on the server and the usage of the
information in the client is provided in clause 11.2.3 and 11.2.4
respectively.
##### 11.2.2.2.2 Definitions
The following definitions are relevant and aligned with ISO/IEC 23009-1:
\- available Segment is a Segment that is accessible at its assigned HTTP-URL.
This means that a request with an HTTP GET to the URL of the Segment results
in a reply of the Segment and 2xx status code.
\- valid Segment URL is an HTTP-URL that is promised to reference a Segment
during its Segment availability period.
\- NOW is a time that is expressing the time on the content server as wall-
clock time. All information in the MPD related to wall-clock is expressed as a
reference to the time NOW.
##### 11.2.2.2.3 MPD Information
For a dynamic service without MPD updates, the following information shall be
present and not present in the MPD (also please refer to Table 11-1):
\- The **MPD** \@type shall be set to \"dynamic\".
\- The **MPD** \@mediaPresentationDuration shall be present, or the **Period**
\@duration of the last Period shall be present.
\- The **MPD** \@minimumUpdatePeriod shall not be present.
Furthermore, it is recommended to provide values for **MPD**
\@timeShiftBufferDepth and **MPD** \@suggestedPresentationDelay.
##### 11.2.2.2.4 Period Information
Each Period is documented by a **Period** element in the MPD. An MPD may
contain one or more Periods. In order to document the use of multiple Periods,
the sequence of Period elements is expressed by an index _i_ with _i_
increasing by 1 for each new Period element.
\- Each regular Period _i_ in the MPD is assigned a
\- Period start time _PSwc_[_i_] in wall-clock time,
\- Period end time _PEwc_[_i_], in wall-clock time.
NOTE: An MPD update may extend the Period end time of the last regular Period.
For details refer to clause 11.3.
The Period start time _PSwc_[_i_] for a regular Period _i_ is determined
according to clause 5.3.2.1 of ISO/IEC 23009-1:
\- If the attribute \@start is present in the **Period** , then _PSwc_[_i_] is
the sum of _AST_ and the value of this attribute.
\- If the \@start attribute is absent, but the previous **Period** element
contains a \@duration attribute then the start time of the Period is the sum
of the start time of the previous Period _PSwc_[_i_] and the value of the
attribute \@duration of the previous Period. Note that if both are present,
then the \@start of the new Period takes precedence over the information
derived from the \@duration attribute.
The Period end time _PEwc_[_i_] for a regular Period _i_ is determined as
follows:
\- If the Period is the last one in the MPD, the time _PEwc_[_i_] is obtained
as
\- the sum of _AST_ and Media Presentation Duration _MPDur_ , with _MPDur_ the
value of **MPD** \@mediaPresentationDuration if present, or the sum of
_PSwc_[_i_] of the last Period and the value of **Period** \@duration of the
last Period.
\- Else
\- the time _PEwc_[_i_] is obtained as the Period start time of the next
Period, i.e. _PEwc_[_i_] = _PSwc_[_i_ +1].
##### 11.2.2.2.5 Representation Information
Based on such an MPD at a specific time _NOW_ , a list of Segments contained
in a Representation in a Period _i_ with Period start time _PSwc_[_i_] and
Period end time _PEwc_[_i_] can be computed.
Let
_\- N_**~S~** =1,
_\- ato_ is the value of the \@availabilityTimeOffset attribute, if present.
Otherwise it is zero.
_\- ts_ the value of the \@timescale attribute
_\- t_[_s_] is 0,
\- the _d_[_s_] is the value of \@duration attribute
_\- r_[_s_] is the ceil of (_PEwc_[_i_] - _PSwc_[_i_] - _t_[_s_]/_ts_)*_ts_
/_d_[_s_])
##### 11.2.2.2.6 Media Time Information of Segment
Each Media Segment at position _k=1,2, ..._ for each Representation has
assigned an earliest media presentation time _EPT_[_k,r,i_] and an accurate
segment duration _SDUR[k,r,j]_ , all measured in media presentation time.
The earliest presentation time may be estimated from the MPD using the segment
availability start time minus the segment duration announced in the MPD. The
earliest presentation time may be accurately determined from the Segment
itself.
##### 11.2.2.2.7 Segment List Parameters
For each Period _i_ with Period start time _PSwc_[_i_] and Period end time
_PEwc_[_i_] and each Representation _r_ in the Period the following
information can be computed:
\- the presentation time offset described in the MPD, o[_i,r_]
\- the availability time offset of this Representation, ato[_r_]
\- the number of the first segment described in the MPD, k1[_i_ ,_r_]
\- the number of the last segment described in the MPD, k2[_i_ ,_r_]
\- segment availability start time of the initialization segment SAST[_0,i_
,_r_]
\- segment availability end time of the initialization segment SAET[_0,i_
,_r_]
\- segment availability start time of each media segment SAST[_k,i_ ,_r_], _k_
=k1, ..., k2
\- segment availability end time of each media segment SAET[_k,i_ ,_r_], _k_
=k1, ..., k2
\- adjusted segment availability start time ASAST[_0,i_ ,_r_], _k_ =0, k1,
..., k2
\- segment duration of each media segment SD[_k,i_ ,_r_], k=k1, ..., k2
\- the URL of each of the segments, URL[_k,i_ ,_r_]
In addition,
\- the latest available Period _i_[_NOW_] and the latest segment available at
the server k[_NOW_] can be computed. This segment is also referred to as _live
edge segment_.
\- the earliest available Period _i*_[_NOW_] and the earliest segment
available at the server k*[_NOW_] can be computed.
Based on the above information, for each Representation _r_ in a Period _i_ ,
the segment availability start time _SAST_[_k,i_ ,_r_], the segment
availability end time of each segment _SAET_[_k,i_ ,_r_], the segment duration
of each segment _SD_[_k,i_ ,_r_], and the URL of each of the segments,
_URL_[_k,i_ ,_r_] within one Period _i_ be derived as follows using the URL
Template function URLTemplate(ReplacementString, Address):
\- k=0
\- SAST[0,i,r] = PSwc[i]
\- ASAST[0,i,r] = PSwc[i] - ato
\- for s=1, ... N**~S~** [i,r]
_\- k_ = _k_ \+ 1
_\- SAST_[_k,i_ ,_r_] = _PSwc_[_i_] + (_t_[_s,i,r_] + _d_[_s,i,r_] \-
o[_i,r_])/_ts_
_\- ASAST_[_k,i_ ,_r_] = _SAST_[_k,i_ ,_r_] -- _ato_
_\- SD_[_k,i_ ,_r_] = _d_[_s,i,r_]/_ts_
_\- SAET_[_k,i_ ,_r_] = SAST[_k,i_ ,_r_] + _TSB_ \+ _d_[_s,i,r_]/_ts_
\- if **SegmentTemplate** \@media contains \$Number\$
_\- Address_ =\@startNumber
_\- URL_[_k,i_ ,_r_] = URLTemplate (\$Number\$, _Address_)
\- for _j_ = 1, ..., _r_[_s,i,r_]
_\- k_ = _k_ \+ 1
_\- SAST_[_k,i_ ,_r_] = SAST[_k-1,i_ ,_r_] + _d_[_s,i,r_]/_ts_
_\- ASAST_[_k,i_ ,_r_] = _SAST_[_k,i_ ,_r_] -- _ato_
_\- SAET_[_k,i_ ,_r_] = SAST[_k,i_ ,_r_] + _TSB_ \+ _d_[_s,i,r_] /_ts_
_\- SD_[_k,i_ ,_r_] = _d_[_s,i,r_] /_ts_
\- if **SegmentTemplate** \@media contains \$Number\$
\- Address = Address + 1
\- URL[k,i,r] = URLTemplate (\$Number\$, Address)
\- k2[_i_ ,_r_] = _k_
_\- SAET_[_0,i_ ,_r_] = _SAET_[k2[_i_ ,_r_]_,i_ ,_r_]
Note that not all segments documented above may necessarily be accessible at
time _NOW_ , but only those that are within the segment availability time
window. Hence, the number of the first media segment described in the MPD for
this Period, k1[_i_ ,_r_], is the smallest _k_ =1, 2, ... for which
_SAST_[_k,i_ ,_r_] >= _NOW_.
The latest available Period _i_[_NOW_] is the Period _i_ with the largest
_PEwc_[_i_] and _PEwc_[_i_] is smaller than or equal to _NOW_.
The latest available segment _k_[_NOW_] available for a Representation of
Period _i_[_NOW_] (also the live edge segment) is the segment with the largest
_k=_ 0,1,2,... such that _SAST_[_k,i_ ,_r_] is smaller than or equal to _NOW_.
Note that this contains the Initialization Segment with _k_ =0 as not
necessarily any media segment may yet be available for Period _i_[_NOW_]. In
this case, last media segment k2[_i_[_NOW_]-1,_r_], i.e., the last media
segment of the previous Period is the latest accessible media Segment.
However, if the \@availabilityTimeOffset is present, then the segments for
this Representation are available earlier than the nominal segment
availability start time, namely at _ASAST_[_k,i_ ,_r_].
##### 11.2.2.2.8 URL Generation with Segment Template
The function URL Template function URLTemplate(ReplacementString, Address)
generates a URL. For details refer to ISO/IEC 23009-1, clause 5.3.9.4. Once
the Segment is generated, processing of the Base URLs that apply on this
segment level is done as defined in ISO/IEC 23009-1, clause 5.6.
### 11.2.3 Service Offering Requirements and Guidelines
#### 11.2.3.1 General Service Offering Requirements
For dynamic service offerings, the MPD shall conform to the MPD in clause 8
and shall at least contain the mandatory information as documented in Table
11-1.
If such an MPD is accessible at time _NOW_ at the location **MPD.Location** ,
then
\- all Segments for all Representations in all Periods as announced in an MPD
shall be available latest at the announced segment availability start time
_SAST_[_k,i_ ,_r_] at all _URL_[_k,i_ ,_r_] as derived in clause 11.2.2.2;
\- all Segments for all Representations in all Periods as announced in an MPD
shall at least be available until the announced segment availability end time
_SAET_[_k,i_ ,_r_] at all _URL_[_k,i_ ,_r_] as derived in clause 11.2.2.2;
\- for all Media Segments for all Representations in all Periods as announced
in an MPD the Segment in this Period is available prior to the sum of Period
start, earliest presentation time and segment duration, i.e. _SAST_[_k,i,r_]
\ PSwc[i*]
\- the last one and the latest segment is available is k2[i*]
\- else if _NOW_ > PSwc[i*] + TSB
\- no segment is available any more
\- else if PSwc[1] \ Note again that if k[_NOW_] is _0_ , then only the Initialization Segment is
> available. If the Period is not the first one, then the last available Media
> Segment is the last Media Segment of the previous Period.
3) The client downloads the initialization segment of the selected
Representations and then accesses the content by requesting entire Segments or
byte ranges of Segments. Typically at any time the client downloads the next
segment at the larger of the two: (i) completion of download of current
segment or (ii) the Segment Availability Start Time of the next segment. Note
that if the \@availabilityTimeOffset is present, then the segments may be
downloaded earlier, namely at the adjusted segment availability start time.
Based on the buffer fullness and other criteria, rate adaptation is
considered. Typically the first media segment that is downloaded is the _live
edge segment_ , but other decisions may be taken in order to minimize start-up
latency. For details on initial buffering, refer to clause 11.2.4.4.
4) According to Figure 11-1 media is fed into buffer and at some point in
time, the decoding and rendering of the media is kicked off. The downloading
and presentation is done for the selected Representation of each selected
Adaptation. The synchronization is done using the presentation time in the
Period. For synchronized playout, the exact presentation times in the media is
expected to be used.
5) Once presentation has started, the playout process is continuous. The
playout process expects media to be present in the buffer continuously. If the
**MPD** \@suggestedPresentationDelay is present, then this value may be used
as the presentation delay _PD_. If the **MPD** \@suggestedPresentationDelay is
not present, but the client is expected to consume the service at the live
edge, then a suitable presentation delay should be selected, typically between
the value of \@minBufferTime and the value of \@timeShiftBufferDepth. It is
recommended that the client starts rendering the first sample of the
downloaded media segment _k_ with earliest presentation time EPT(_k_) at
_PSwc_[_i_] + (EPT(_k_) - _o_[_r,i_]) + _PD_. For details on selecting and
minimizing end-to-end latency as well as the start-up latency, see clause
11.2.4.4.
6) The client may request Media Segments of the selected Representations by
using the generated Segment list during the availability time window.
7) Once the presentation has started, the client continues consuming the media
content by continuously requesting Media Segments or parts of Media Segments
and playing content that according to the media presentation timeline. The
client may switch Representations taking into updated information from its
environment, e.g. change of observed throughput. In a straight-forward
implementation, with any request for a Media Segment starting with a stream
access point, the client may switch to a different Representation. If
switching at a stream access point, the client is expected to switch
seamlessly at such a stream access point.
8) With the wall-clock time _NOW_ advancing, the client consumes the available
Segments. As _NOW_ advances the client possibly expands the list of
_available_ Segments for each Representation in the Period according to the
procedures specified in clause 11.2.4.2.
9) Once the client is consuming media contained in the Segments towards the
end of the announced media in the Representation, then either the Media
Presentation is terminated, a new Period is started (see subsection or the MPD
needs to be refetched. Once the client is consuming media contained in the
Segments towards the end of the announced media in the Representation, and the
Representation is contained not in the last Period, then the DASH clients
generally needs to reselect the Adaptation Sets and a Representation in same
manner as described in bullet 1) and 2). Also steps 3), 4), 5) and 6) need to
be carried out at the transition of a Period. Generally, audio/video switching
across period boundaries may not be seamless. According to ISO/IEC 23009-1,
clause 7.2.1, at the start of a new Period, the playout procedure of the media
content components may need to be adjusted at the end of the preceding Period
to match the _PeriodStart_ time of the new Period as there may be small
overlaps or gaps with the Representation at the end of the preceding Period.
Overlaps (respectively gaps) may result from Media Segments with actual
presentation duration of the media stream longer (respectively shorter) than
indicated by the Period duration. Also in the beginning of a Period, if the
earliest presentation time of any access unit of a Representation is not equal
to the presentation time offset signalled in the \@presentationTimeOffset,
then the playout procedures need to be adjusted accordingly.
> The client should play the content continuously across Periods, but there
> may be implications in terms of implementation to provide fully continuous
> and seamless playout. It may be the case that at Period boundaries, the
> presentation engine needs to be reinitialized, for example due to changes in
> formats, codecs or other properties. This may result in a re-initialization
> delay. Such a re-initialization delay should be minimized. If the Media
> Presentation is of type dynamic, the addition of the re-initialisation delay
> to the playout may result in drift between the encoder and the presentation
> engine. Therefore, the playout should be adjusted at the end of each Period
> to provide a continuous presentation without adding drift between the time
> documented in the MPD and the actual playout, i.e. the difference between
> the actual playout time and the Period start time should remain constant.
>
> If the client presents media components of a certain Adaptation Set in one
> Period, and if the following Period has assigned an identical Asset
> Identifier, then the client should identify an associated Period and, in the
> absence of other information, continue playing the content in the associated
> Adaptation Set.
>
> If furthermore the Adaptation Sets are period-continuous, i.e. the
> presentation times are continuous and this is signalled in the MPD, then the
> client is expected to seamlessly play the content across the Period
> boundary. Most suitably the client may continue playing the Representation
> in the Adaptation Set with the same \@id, but there is no guarantee that
> this Representation is available. In this case the client is expected to
> seamlessly switch to any other Representation in the Adaptation Set.
For details on MPD updates and refetching, please refer to clause 11.3.
#### 11.2.4.2 Joining, Initial Buffering and Playout Recommendations
##### 11.2.4.2.1 General
A DASH client is expected to start playout from:
\- The time indicated by the MPD Anchor, if one is present
\- The live edge, if there is no MPD Anchor and **MPD** \@type=\"dynamic\".
##### 11.2.4.2.2 Joining at the live edge
For joining at the live edge there are basically two high-level strategies:
\- Every client participating in the service commits to the same presentation
delay (PD) relative to the announced segment availability start time at start-
up and in continuous presentation, possible using one suggested by the Content
Provider and then attempts to minimise start-up latency and maintain the
buffer. The content provider may have provided the **MPD**
\@suggestedPresentationDelay (SPD) or may have provided this value by other
means outside the DASH formats. The content author should be aware that the
client may ignore the presence of **MPD** \@suggestedPresentationDelay and may
choose its own suitable playout scheduling.
\- The client individually picks the presentation delay (PD) in order to
maximize stable quality and does this dependent on its access, user
preferences and other considerations.
In both cases the client needs to decide, which segment to download first and
when to schedule the playout of the segment based on the committed PD.
A DASH client would download an available segment and typically render the
earliest presentation time EPT(_k_) of the segment at _PSwc_[_i_] \+ (EPT(_k_)
- _o_[_r,i_]) + _PD_. As PD may be quite large, for example in order to
provision for downloading in varying bitrate conditions, and if a segment is
downloaded that was just made available it may result in larger start up
delay.
Therefore, a couple of strategies may be considered as a tradeoff of for
start-up delay, presentation delay and sufficient buffer at the beginning of
the service, when joining at the live edge:
1) The client downloads the next available segment and schedules playout with
delay PD. This maximizes the initial buffer prior to playout, but typically
results in undesired long start-up delay.
2) The client downloads the latest available segment and schedules playout
with delay PD. This provides large initial buffer prior to playout, but
typically results in undesired long start-up delay.
3) The client downloads the earliest available segment that can be downloaded
to schedules playout with delay PD. This provides a smaller initial prior to
playout, but results in reasonable start-up delay. The buffer may be filled
gradually by downloading later segments faster than their media playout rate,
i.e. by initially choosing Representations that have lower bitrate than the
access bandwidth.
### 11.2.5 Considerations on live edge)
A DASH client should avoid being too aggressive in requesting segments exactly
at the computed segment availability start time, especially if it is uncertain
to be fully synchronized with the server. If the DASH client observes issues,
such as 404 responses, it should back up slightly in the requests.
In addition, for a content authoring to avoid too aggressive requests and
possible 404 responses, the content author may schedule the segment
availability start time in the MPD with a small safety delay compared to the
actual publish time. This also provides the content author a certain amount of
flexibility in the publishing of Segments. However, note that such safety
margins may lead to slightly increased end-to-end latencies, so it is a
balance to be taken into account.
## 11.3 Live Services with MPD Updates
### 11.3.1 Background and Assumptions
If many cases, the service provider cannot predict that an MPD that is once
offered, may be used for the entire Media Presentations. Examples for such MPD
changes are:-The duration of the Media Presentation is unknown
\- The Media Presentation may be interrupted for advertisements which requires
proper splicing of data, for example by adding a Period
\- Operational issues require changes, for example the addition of removal of
Representations or Adaptation Sets.
\- Operational problems in the backend.
\- Changes of segment durations, etc.
In this case the MPD typically only can describe a limited time into the
future. Once the MPD expires, the service provider expects the client to
recheck and get an updated MPD in order to continue the Media Presentation.
The main tool in MPEG-DASH is Media Presentation Description update feature as
described in clause 5.4 of ISO/IEC 23009-1. The MPD is updated at the server
and the client is expected to obtain the new MPD information once the
determined Segment List gets to an end.
If the MPD contains the attribute **MPD** \@minimumUpdatePeriod, then the MPD
in hand will be updated. The DASH client typically frequently polls the MPD
update server whether an MPD update is available or the existing MPD can still
be used. The update frequency is controlled by MPD based on the attribute
**MPD** \@minimumUpdatePeriod.
### 11.3.2 Preliminaries
#### 11.3.2.1 MPD Information
As the MPD is typically updated over time on the server, the MPD that is
accessed when joining the service as well as the changes of the MPD are
referred to as MPD instances in the following. This expresses that for the
same service, different MPDs exist depending on the time when the service is
consumed.
Assume that an MPD instance is present on the DASH server at a specific wall-
clock time _NOW_. For an MPD-based Live Service Offering, the MPD instance may
among others contain information as available in Table 11-5. Information
included there may be used to compute a list of announced Segments, Segment
Availability Times and URLs.
Table 11-5 -- Information related to Live Service Offering with MPD-controlled
MPD Updates
* * *
**MPD Information** **Status** **Comment** **MPD** \@type mandatory, set to
\"dynamic\" the type of the Media Presentation is dynamic, i.e. Segments get
available over time. **MPD** \@availabilityStartTime mandatory the start time
is the anchor for the MPD in wall-clock time. The value is denoted as _AST_.
**MPD** \@minimumUpdatePeriod mandatory this field is mandatory except for the
case where the **MPD** \@mediaPresentationDuration is present. However, such
an MPD falls then in an instance as documented in clause 11.2. **Period**
\@start mandatory the start time of the Period relative to the MPD
availability start time. The value is denoted as _PS_. **SegmentTemplate**
\@media mandatory the template for the Media Segment **SegmentTemplate**
\@startNumber optional default the number of the first segment in the Period.
The value is denoted as _SSN_. **SegmentTemplate** \@duration mandatory the
duration of each Segment in units of a time. The value divided by the value of
\@timescale is denoted as _MD_[_k_] with k=1, 2, ... The segment timeline may
contain some gaps.
* * *
#### 11.3.2.2 Segment Information Derivation
Based on an MPD instance including information as documented in Table 11-5 and
available at time _NOW_ on the server, a DASH client may derive the
information of the list of Segments for each Representation in each Period.
If the Period is the last one in the MPD and the **MPD** \@minimumUpdatePeriod
is present, then the time _PEwc_[_i_] is obtained as the sum of _NOW_ and the
value of **MPD** \@minimumUpdatePeriod. Note that with the MPD present on the
server and _NOW_ progressing, the Period end time is extended. This issue is
the only change compared to the segment information generation in clause
11.2.2.2.
If the **MPD** \@minimumUpdatePeriod is set to 0, then the MPD documents all
available segments on the server.
### 11.3.3 Service Offering Requirements and Guidelines
#### 11.3.3.1 General
The same service requirements as in clause 11.2.2.1 hold for any time _NOW_
the MPD is present on the server with the interpretation that the Period end
time _PEwc_[_i_] of the last Period is obtained as the sum of _NOW_ and the
value of **MPD** \@minimumUpdatePeriod.
In order to offer a simple live service with unknown presentation end time,
but only a single Period and the following details are known in advance,
\- start at wall-clock time START,
\- location of the segments for each Representation at \"
http://example.com/\$RepresentationID\$/\$Number\$\",
a service provider may offer an MPD with values according to Table 11-6.
Table 11-6 -- Basic Service Offering with MPD Updates
* * *
**MPD Information** **Value** **MPD** \@type dynamic **MPD**
\@availabilityStartTime START **MPD** \@publishTime PUBTIME1 **MPD**
\@minimumUpdatePeriod MUP **MPD.BaseURL** \"http://example.com/\" **Period**
\@start PSTART **SegmentTemplate** \@media \"\$RepresentationID\$/\$Number\$\"
**SegmentTemplate** \@startNumber 1 **SegmentTemplate** \@duration SDURATION
* * *
Based on the details in clauses 11.2.2.2 and 11.4.2.2, the Segment Information
can be derived at each time _NOW_ by determining the end time of the Period
_PEwc_[1] = _NOW_ \+ MUP.
The service provider may leave the MPD unchanged on the server. If this is the
case the Media Presentation may be terminated with an updated MPD that
\- adds the attribute **MPD** \@mediaPresentationDuration with value PDURATION
\- removes the attribute **MPD** \@minimumUpdatePeriod
\- changes the **MPD** \@publishTime attribute to PUBTIME2
The MPD must be published latest at the end of the Media Presentation minus
the value of MUP, i.e. PUBTIME2 \.mcc\.pub.3gppnetwork.org\". The URL to establish the
out-of-band connection with the DANE shall be:
> http://dane.mnc\.mcc\.pub.3gppnetwork.org/
The DANE FQDN is composed of six labels. The last three labels shall be
\"pub.3gppnetwork.org\". The second and third labels together shall uniquely
identify the PLMN, as described in clause 15.5 of TS 23.003 [57]. The first
label shall be \"dane\".
When receiving a DNS query on the DANE FQDN, the DNS server shall respond with
the information, including IP address, of the DANE or DANEs that are available
to the UE for SAND functionality, according to any of the defined SAND modes.
Specific modes of DANE may be identified with targeted DANE FQDNs, as follows:
\- A Proxy-Caching DANE, if provided, shall be located at the FQDN
\"pcdane.mnc\.mcc\.pub.3gppnetwork.org\" (first label is
\"pcdane\").
\- A Network Assistance DANE, if provided, shall be located at the FQDN
\"nadane.mnc\.mcc\.pub.3gppnetwork.org\" (first label is
\"nadane\");
\- A Consistent QoE/QoS DANE, if provided, shall be located at the FQDN
\"qoedane.mnc\.mcc\.pub.3gppnetwork.org\" (first label is
\"qoedane\");
If a specific mode of DANE is queried, using the specific DANE FQDN, then the
response informs of the IP address of that mode of DANE only.
## 13.4 SAND Messages and Protocols for 3GP-DASH
3GP-DASH clients supporting SAND functionality in the 'Proxy Caching' mode
shall support the following SAND messages (as described further in clause
13.7):
\- ClientCapabilities, as defined in clause 6.4.7 of ISO/IEC 23009-5 [54]
\- DaneCapabilities, as defined in clause 6.5.9 of ISO/IEC 23009-5 [54]
\- AnticipatedRequests, as defined in clause 6.4.1 of ISO/IEC 23009-5 [54]
\- AcceptedAlternatives, as defined in clause 6.4.3 of ISO/IEC 23009-5 [54]
\- DeliveredAlternative, as defined in clause 6.5.8 of ISO/IEC 23009-5 [54]
\- ResourceStatus, as defined in clause 6.5.1 of ISO/IEC 23009-5 [54]
\- MPDValidityEndTime, as defined in clause 6.5.4 of ISO/IEC 23009-5 [54]
In a PSS service environment with SAND support, DANEs in the 'Proxy Caching'
mode shall also support these messages.
3GP-DASH clients supporting SAND functionality in the 'Network Assistance'
mode shall support the following SAND messages (as described further in clause
13.6):
\- ClientCapabilities, as defined in clause 6.4.7 of ISO/IEC 23009-5 [54]
\- DaneCapabilities, as defined in clause 6.5.9 of ISO/IEC 23009-5 [54]
\- SharedResourceAssignment, as defined in clause 6.5.3 of ISO/IEC 23009-5
[54]
\- SharedResourceAllocation, as defined in clause 6.4.2 of ISO/IEC 23009-5
[54]
\- NetworkAssistanceInitiationRequest, as defined in clause 13.6
\- NetworkAssistanceInitiationResponse, as defined in clause 13.6
\- NetworkAssistanceTermination, as defined in clause 13.6
\- SegmentDuration, as defined in clause 13.6
\- DeliveryBoostRequest, as defined in clause 13.6
\- DeliveryBoostResponse, as defined in clause 13.6
In a PSS service environment with SAND support, DANEs in the 'Network
Assistance' modes shall also support these messages.
3GP-DASH clients supporting SAND functionality in the 'Consistent QoE/QoS'
mode shall support the following SAND messages (as described further in clause
13.8):
\- ClientCapabilities, as defined in clause 6.4.7 of ISO/IEC 23009-5 [54]
\- DaneCapabilities, as defined in clause 6.5.9 of ISO/IEC 23009-5 [54]
\- SharedResourceAssignment, as defined in clause 6.5.3 of ISO/IEC 23009-5
[54]
\- SharedResourceAllocation, as defined in clause 6.4.2 of ISO/IEC 23009-5
[54]
\- QoSInformation, as defined in clause 6.5.7 of ISO/IEC 23009-5 [54]
In a PSS service environment with SAND support, DANEs in the 'Consistent
QoE/QoS' modes shall also support these messages.
In case the DASH client connects to a DANE, the 3GP-DASH client shall send the
status message ClientCapabilities in order to inform the DANE about the SAND
mode(s) it supports. The 3GP-DASH client shall use the messageSetUri parameter
to indicate which SAND mode(s) it supports based on the following URNs:
\- urn:3gpp:dash:sand:messageset:pc:2016 to indicate support for the 'Proxy
Caching' mode
\- urn:3gpp:dash:sand:messageset:na:2016 to indicate support for the 'Network
Assistance' mode
\- urn:3gpp:dash:sand:messageset:qoe:2016 to indicate support for the
'Consistent QoE/QoS' mode
\- urn:3gpp:dash:sand:messageset:sand4m:2018 to indicate support for the 'SAND
for Multi-Network Access' mode
Depending on the SAND mode(s) supported by the 3GP-DASH client, one or more of
these URNs may be included in the ClientCapabilities message.
In case the DANE connects to a 3GP-DASH client, the DANE shall send the PER
message DaneCapabilities in order to inform the 3GP-DASH client about the SAND
mode(s) it supports. The DANE shall use the messageSetUri parameter to
indicate which SAND mode(s) it supports based on the following URNs:
\- urn:3gpp:dash:sand:messageset:pc:2016 to indicate support for the 'Proxy
Caching' mode
\- urn:3gpp:dash:sand:messageset:na:2016 to indicate support for the 'Network
Assistance' mode
\- urn:3gpp:dash:sand:messageset:qoe:2016 to indicate support for the
'Consistent QoE/QoS' mode
\- urn:3gpp:dash:sand:messageset:sand4m:2018 to indicate support for the 'SAND
for Multi-Network Access' mode
Depending on the SAND mode(s) supported by the DANE, one or more of these URNs
may be included in the DaneCapabilities message.
If the 3GP-DASH client has already discovered the DANE via the use of mode-
specific FQDNs provided in clause 13.3 (i.e., with first labels 'nadane',
'qoedane' and 'pcdane' as defined in clause 13.3), the exchange of
ClientCapabilities and DaneCapabilities messages shall not be performed on
connection to a DANE.
If SAND is supported, HTTP shall be supported as the minimum transport
protocol for carrying SAND messages. This does not preclude that other
additional transport protocols could also be implemented. The mandatory use of
HTTP as a minimum transport protocol for SAND messages shall be in accordance
with Table 13-1 (bold font represents mandatory):
Table 13-1: Mandatory usages of HTTP for carrying SAND messages
+------------------+--------------------------------------------------------+ | Metrics messages | **HTTP POST\ | | |** HTTP headers may be used for small metrics messages. | +------------------+--------------------------------------------------------+ | Status messages | **HTTP headers** | | | | | | **HTTP POST** | +------------------+--------------------------------------------------------+ | PER messages | **HTTP GET** | +------------------+--------------------------------------------------------+
For SAND status messages, carriage in HTTP headers shall be used for
communicating with in-band DANEs, while HTTP POST shall be used for
communicating with out-of-band DANEs. This distinction between two kinds of
DANE is introduced in the high-level architecture in clause 4.2.8 of TS 26.233
[2].
3GP-DASH clients supporting SAND functionality as well as DANEs in the
'Network Assistance' or 'Consistent QoE/QoS' modes shall further support the
WebSocket protocol specified in IETF RFC 6455 [56], provided that HTTP over
TLS (HTTPS) is supported by the respective 3GP-DASH client or DANE. If HTTP
over TLS (HTTPS) is not supported by a 3GP-DASH client, then that 3GP-DASH
client should support the WebSocket protocol for the 'Consistent QoE/QoS' and
'Network Assistance' modes. Similarly, if HTTP over TLS (HTTPS) is not
supported by a DANE, then that DANE should support the WebSocket protocol for
the 'Consistent QoE/QoS' and 'Network Assistance' modes. When WebSockets is
supported for the 'Consistent QoE/QoS' mode, as specified in ISO/IEC 23009-5
[54], the MPD shall contain a sand:Channel element whose \@schemeIdUri is
\"urn:mpeg:dash:sand:channel:websocket:2016\" and WebSocket URI in the
\@endpoint attribute.
## 13.5 SAND Message Handling Behaviors for DANEs and DASH clients
### 13.5.1 DASH client behaviour
3GP-DASH clients supporting one or more of the following SAND modes: (i)
'Network Assistance', (ii) 'Proxy Caching', (iii) 'Consistent QoE/QoS', shall
comply with the actions in Table 13-2 in handling of the corresponding SAND
messages.
Table 13-2: Normative behaviors on SAND message handling for 3GP-DASH clients
+---------------------------+---------------------------+------------+ | **SAND Message** | **Actions** | **Nature** | +---------------------------+---------------------------+------------+ | On DaneCapabilities | Send | Mandatory | | | SharedResourceAllocation | | | and | | | | SharedResourceAllocation | | | | supported | | | +---------------------------+---------------------------+------------+ | On | Select Representations to | Optional | | SharedResourceAssignment | fit in \@bandwidth | | +---------------------------+---------------------------+------------+ | On DaneCapabilities | Send AnticipatedRequests | Mandatory | | | with ALL future segment | | | and AnticipatedRequests | requests. | | | supported | | | +---------------------------+---------------------------+------------+ | On DaneCapabilities | Send AcceptedAlternatives | Mandatory | | | with ANY future segment | | | and AcceptedAlternatives | requests. | | | supported | | | +---------------------------+---------------------------+------------+ | On MPDValidityEndTime | If \@mpdUrl present, | Mandatory | | | fetch MPD before | | | | \@validityEndTime. | | +---------------------------+---------------------------+------------+ | | Else (\@mpd is present by | Mandatory | | | SAND specification), use | | | | \@mpd as new MPD version | | | | when \@validityEndTime | | | | has passed. | | +---------------------------+---------------------------+------------+
### 13.5.2 DANE behaviour
In a PSS service environment withone or more of the following SAND modes: (i)
'Network Assistance', (ii) 'Proxy Caching', (iii) 'Consistent QoE/QoS', DANEs
shall comply with the actions in Table 13-3 in handling of the corresponding
SAND messages.
Table 13-3: Normative behaviors on SAND message handling for DANEs in a PSS
environment
* * *
**SAND message** **Actions** **Nature** On SharedResourceAllocation 1. Add
client to the sharing strategy Optional 2\. Update allocation strategy
Optional 3\. Send SharedResourceAssignment to clients in the sharing strategy
Mandatory On AnticipatedRequests Cache resources indicated by
AnticipatedRequests and send ResourceStatus to signal available resources
Mandatory On AcceptedAlternatives Send DeliveredAlternatives in case DANE
delivers an alternative segment rather than the requested segment Mandatory
* * *
## 13.6 Use of SAND for Network Assistance
### 13.6.1 General description
The Network Assistance function enables a 3GP-DASH client to improve the QoE
of content streaming sessions, and is provided by the DANE. The DANE for this
mode is out-of-band, i.e. it is not in the media delivery path. The Network
Assistance communication is independent from the media server communication,
hence the Network Assistance communication occurs in a separate path to the
transfer of the MPD and the content segments. The media server does not need
to be aware of the Network Assistance function.
Network Assistance may be made available to certain clients only, for example
subject to subscription options. Client authentication may also be applied
before granting access to Network Assistance. Clients are able to discover the
availability and information about the Network Assistance DANE, and to
establish a Network Assistance session with the DANE.
Network Assistance is based on the model of the client requesting network
assistance and the DANE responding to the request. The Network Assistance
functionalty may be granted to a client supporting the delivery of 3GP-DASH
content with either only the first or with both of the two functions below, in
both cases based on the 3GP-DASH client having made a request to the DANE for
Network Assistance:
\- The DANE indicates to the 3GP-DASH client the highest suitable media rate
for the next segment download, based on the available Representations for the
content item;
\- The DANE indicates to the 3GP-DASH client a temporary delivery boost for
occasions when the content playback input buffer on the client risks suffering
from under-run.
Once a Network Assistance session is active, the client may issue a Network
Assistance call prior to fetching the next media segment from the server. The
Network Assistance call consists of a single SAND signalling exchange. This
exchange with the DANE activates either the first of the above functions or a
sequence of both functions; the second only if the 3GP-DASH client was granted
access to the function. If the client does not need a delivery boost, then the
DANE omits the second function in the response to the 3GP-DASH client.
The Network Assistance functions depend on only a small part of the set of
SAND capabilities.
Clause 13.6.2 specifies common functions.
Clauses 13.6.3 and 13.6.4 describe the two constituent functions of Network
Assistance, namely rate recommendation and temporary delivery boost,
respectively.
Clause 13.6.5 specifies the Network Assistance functions and their mapping to
SAND messages.
Clause 13.6.6 specified how the Network Assistance request and response calls
are constructed using the SAND message container that contains the appropriate
Network Assistance messages.
Clause 13.6.7 describes an example workflow for Network Assistance.
### 13.6.2 Common functions
#### 13.6.2.1 Introduction
Unless the DANE location is already known to the 3GP-DASH client, for example
by pre-installing a commonly used DANE location for the operator to which the
client is subscribed, the client needs to discover the DANE for Network
Assistance, before being able to use Network Assistance functionality.
The DANE manages the population of clients that are eligible for Network
Assistance by accepting Network Assistance session initiation calls from
clients. In this way the DANE is able to provide a more reliable Network
Assistance function by being aware of which clients might need relevant
network resources allocated at any time.
#### 13.6.2.2 DANE discovery
DANE discovery procedures relevant for the Network Assistance mode are
described in clause 13.3.
#### 13.6.2.3 Network Assistance session initiation
The facility of Network Assistance requires that the network is aware of its
possible intended usage by every client in advance of first usage of the
facility. Hence the client needs to register with the DANE, providing the
location of the media server delivering the content item and the IP port at
which it will be delivered, in advance of the playback starting. The network
thus has the possibility to apply any authentication or policy procedure on
that connection, as well as be prepared for Network Assistance usage by all
clients that may register for it.
The 3GP-DASH client shall initiate a Network Assistance session with the
Network Assistance DANE at a convenient stage in the process of preparing to
receive PSS content. When this takes place may be dependent on the nature of
the application that streams media content items, but in any case the scope of
the Network Assistance session is intended such that it starts with the start
of playback of an individual content item, and ends when the playback of that
content item is stopped.
#### 13.6.2.4 Network Assistance session termination
When the 3GP-DASH client no longer requires Network Assistance facilities, it
shall terminate the Network Assistance session. This could be the case for
example when the playback of a streamed media content item is stopped, or the
converse operation to that which occurred when the session was initiated.
### 13.6.3 Rate recommendation function
The 3GP-DASH client uses this function of the DANE to obtain a recommendation
of the highest suitable media rate for an upcoming media segment download.
The 3GP-DASH client provides the necessary information, such as available
media versions with the required bit-rates, and buffer level, to the DANE. The
DANE provides the response with the recommendation of the highest suitable
media rate. The recommended rate is based on network estimations or
predictions of available link bandwidth for the ensuing period of time. The
recommended rate is neither enforced by the network, nor does the network make
any commitment that the recommended rate will be honoured. How the information
is gathered and relayed to the Network Assistance function of the DANE is out
of scope of the present specification.
At the Network Assistance logical level this function includes the option for
the client to indicate that it would benefit from a delivery boost during the
following media segment download. This is specified in clause 13.6.5.2.
### 13.6.4 Temporary delivery boost function
The 3GP-DASH client uses this function to indicate to the network that a
temporary boost, i.e. a temporary increase of network throughput for this
client, would be needed in order to avoid the risk of media playback stalling
due to buffer under-run, which could otherwise occur during the next media
segment or soon after.
Throughput boosting may be used also at the start of a playback session to
shorten the time to playout, giving a better experience for the user.
The network informs the client when the network applies the delivery boost, in
order to ensure that the client is not misled as to the available link
throughput, since this could lead to the client making an erroneous media rate
selection when the throughput is back to normal again, without boost, and
select a higher media rate than suitable for the next segment download. During
a delivery boost period the client shall not select a higher media rate than
indicated with the rate recommendation function. The client may return to its
own normal media rate selection method only when the delivery boost period has
ended. After the delivery of a segment with network boost, the network reverts
to normal delivery, i.e. without boost.
### 13.6.5 SAND messages usage and extensions
#### 13.6.5.1 Introduction
This clause contains the specification of the Network Assistance functions
firstly as generic function calls, and how they could be mapped to SAND
messages.
The Network Assistance (NA) DANE is out-of-band, i.e. not located in the media
path. The 3GP-DASH client shall send the NA SAND messages as the body of HTTP
requests directly to the NA DANE, using the HTTP POST method to send a Network
Assistance message to the DANE.
The Network Assistance transactions between the 3GP-DASH client and the DANE
at the logical level consist of the Network Assistance initiation and
termination, the Network Assistance request and the Network Assistance
response.
A combination of existing SAND messages as defined in the SAND specification,
with usage as defined in clause 13.6.5.2, and SAND extension messages as
defined in clause 13.6.5.3, are used.
The XML schema for the SAND extension messages is provided in clause 13.9.
#### 13.6.5.2 Use of existing SAND messages
##### 13.6.5.2.1 Shared resource allocation
The SAND status message _SharedResourceAllocation_ is used in the NA request
from the 3GP-DASH client to the DANE, in order to provide information about
the available media bitrates for the content item to be accessed.
The parameters operationPoints and bandwidth in the SAND message
_SharedResourceAllocation_ shall represent each of the available media
bitrates, indicated as the sum of all media components in each case.
##### 13.6.5.2.2 Buffer level
In the case that the 3GP-DASH client is requesting a network delivery boost
during the following segment, the SAND metrics message _BufferLevel_ is used
to inform the DANE of the current buffer level for the content item being
accessed.
##### 13.6.5.2.3 Shared resource assignment
The SAND PER message _SharedResourceAssignment_ is used in the NA response
from the DANE to the 3GP-DASH client, in order to provide the recommended
choice of bitrate version for the next segment of the content item being
accessed.
#### 13.6.5.3 SAND message extensions
##### 13.6.5.3.1 Network Assistance session initiation
The 3GP-DASH client initiates a Network Assistance session by sending the
_NetworkAssistanceInitiation_ SAND extension message to the DANE within a SAND
message envelope. The generic procedure for the Network Assistance session
initiation request is shown in Table 13-4.
Table 13-4: Network Assistance session initiation generic procedure
+-------------------------+---------------+-------------------------+ | Function call | Originator | Parameters | | | | | | | ïƒ  destination | | +-------------------------+---------------+-------------------------+ | Network Assistance | UE ïƒ  DANE | Media server IP | | session initiation | | address, | | request | | | | | | Media delivery port | | | | number | +-------------------------+---------------+-------------------------+ | Network Assistance | DANE ïƒ  UE | session id, | | session initiation | | | | response | | port number, | | | | | | | | websocket requirement | +-------------------------+---------------+-------------------------+
In the Network Assistance session initiation request message, the following
parameters shall be set by the UE:
_\- MediaServerIPAddress_ \-- the IP address of the media server;
_\- MediaDeliveryPortNumber_ \-- the port number used for the delivery of the
media segments.
The Network Assistance session initiation request message syntax is shown in
Table 13-5.
Table 13-5: Network Assistance session initiation request message syntax
+-----------+-----------+-----------+-----------+---+-----------+ | **Pa | Type | Ca | De | | | | rameter** | | rdinality | scription | | | +-----------+-----------+-----------+-----------+---+-----------+ | | Sa | Object | 1 | | | | | ndMessage | | | | | | | = | | | | | | | | | | | | | | Network | | | | | | | Assistanc | | | | | | | eInitiati | | | | | | | onRequest | | | | | +-----------+-----------+-----------+-----------+---+-----------+ | | | Me | String | 1 | IP | | | | diaServer | | | address | | | | IPAddress | | | of the | | | | | | | media | | | | | | | server | | | | | | | d | | | | | | | elivering | | | | | | | content | | | | | | | segments | | | | | | | in the | | | | | | | present | | | | | | | Network | | | | | | | A | | | | | | | ssistance | | | | | | | session. | +-----------+-----------+-----------+-----------+---+-----------+ | | | Media | Integer | 1 | Port | | | | DeliveryP | | | number | | | | ortNumber | | | for media | | | | | | | server | | | | | | | d | | | | | | | elivering | | | | | | | content | | | | | | | segments | | | | | | | in the | | | | | | | present | | | | | | | Network | | | | | | | A | | | | | | | ssistance | | | | | | | session. | +-----------+-----------+-----------+-----------+---+-----------+
The _NetworkAssistanceInitiationRequest_ message shall be carried in a SAND
message envelope, as specified in ISO/IEC 23009-5 [54], with the following
constraints:
\- The _senderID_ element shall be included, in order to provide a reference
by which the session initiation request can be authenticated or otherwise
authorised at the DANE or elsewhere in the network, relayed by the DANE
receiving the message;
\- The _generationTime_ element may be omitted;
\- The _messageId_ element may be omitted.
The _NetworkAssistanceInitiationRequest_ message is defined in the schema
whose \@schemeIdUri is:
\"_urn:3gpp:dash: schema:sandmessageextension:2017_ \"
In the Network Assistance session initiation response message, the following
parameters are set by the DANE:
_\- SessionID_ \-- this is used to identify the context of any future messages
relating to this Network Assistance session;
_\- PortNumber_ \-- the DANE sets the port number at which all further NA
communications in this session shall occur;
_\- WebSocketRequirement_ \-- the DANE indicates whether the UE shall set up a
WebSocket connection to the DANE for all further NA communications in this
session.
The Network Assistance session initiation response SAND extension message
syntax is shown in Table 13-6.
Table 13-6: Network Assistance session initiation response message syntax
+----------+----------+----------+----------+------+----------+ | **Par | Type | Car | Des | | | | ameter** | | dinality | cription | | | +----------+----------+----------+----------+------+----------+ | | San | Object | 1 | | | | | dMessage | | | | | | | = | | | | | | | | | | | | | | Net | | | | | | | workAssi | | | | | | | stanceIn | | | | | | | itiation | | | | | | | Response | | | | | +----------+----------+----------+----------+------+----------+ | | | S | Integer | 1 | R | | | | essionID | | | eference | | | | | | | to the | | | | | | | network | | | | | | | as | | | | | | | sistance | | | | | | | session, | | | | | | | a | | | | | | | llocated | | | | | | | by the | | | | | | | DANE. | | | | | | | | | | | | | | A value | | | | | | | of 0 is | | | | | | | reserved | | | | | | | to | | | | | | | indicate | | | | | | | failure, | | | | | | | or | | | | | | | refusal | | | | | | | of the | | | | | | | NA | | | | | | | session | | | | | | | ini | | | | | | | tiation. | | | | | | | | | | | | | | In case | | | | | | | of | | | | | | | failure, | | | | | | | no | | | | | | | further | | | | | | | pa | | | | | | | rameters | | | | | | | shall be | | | | | | | added to | | | | | | | this | | | | | | | message. | +----------+----------+----------+----------+------+----------+ | | | Po | Integer | 0..1 | The DANE | | | | rtNumber | | | informs | | | | | | | the | | | | | | | 3GP-DASH | | | | | | | client | | | | | | | of the | | | | | | | port | | | | | | | number | | | | | | | that | | | | | | | shall be | | | | | | | used for | | | | | | | NA | | | | | | | commun | | | | | | | ications | | | | | | | in the | | | | | | | present | | | | | | | session. | +----------+----------+----------+----------+------+----------+ | | | WebS | Object | 0..1 | The DANE | | | | ocketReq | | | informs | | | | uirement | | | the | | | | | | | 3GP-DASH | | | | | | | client | | | | | | | whether | | | | | | | a | | | | | | | w | | | | | | | ebsocket | | | | | | | shall be | | | | | | | set up | | | | | | | for the | | | | | | | present | | | | | | | session. | +----------+----------+----------+----------+------+----------+
The _NetworkAssistanceInitiationResponse_ message shall be carried in a SAND
message envelope, as specified in ISO/IEC 23009-5 [54], with the following
constraints:
\- The _senderID_ element shall be included, and shall be the same as that
used in the corresponding session initiation request;
\- The _generationTime_ element may be omitted;
The _messageId_ element may be omitted. The
_NetworkAssistanceInitiationResponse_ message is defined in the schema whose
\@schemeIdUri is:
\- \"urn:3gpp:dash: schema:sandmessageextension:2017\"
##### 13.6.5.3.2 Network Assistance session termination
The 3GP-DASH client terminates a Network Assistance session by sending the
_NetworkAssistanceTermination_ SAND extension message to the DANE within a
SAND message envelope, with parameter S _essionID_ as allocated by the DANE
when the session was initiated. Table A5 shows the generic procedure of
Network Assistance session termination. Table 13-7 depicts the network
assistance termination generic procedure.
Table 13-7: Network Assistance session termination generic procedure
* * *
Function call Originator ïƒ  destination Parameters Network Assistance session
terminiation request UE ïƒ  DANE Session id Network Assistance session
terminiation response DANE ïƒ  UE Session id
* * *
The Network Assistance session termination message syntax is shown in Table
13-8. The same SAND message is used for both request and response, only with
different semantics for the _SessionID_ parameter.
Table 13-8: Network Assistance session termination message syntax
+-----------+-----------+-----------+-----------+---+-----------+ | **Pa | Type | Ca | De | | | | rameter** | | rdinality | scription | | | +-----------+-----------+-----------+-----------+---+-----------+ | | Sa | Object | 1 | | | | | ndMessage | | | | | | | = | | | | | | | | | | | | | | N | | | | | | | etworkAss | | | | | | | istanceTe | | | | | | | rmination | | | | | +-----------+-----------+-----------+-----------+---+-----------+ | | | SessionID | Integer | 1 | Reference | | | | | | | to the | | | | | | | network | | | | | | | a | | | | | | | ssistance | | | | | | | session | | | | | | | that was | | | | | | | allocated | | | | | | | by the | | | | | | | DANE | | | | | | | after | | | | | | | s | | | | | | | uccessful | | | | | | | in | | | | | | | itiation. | | | | | | | | | | | | | | The | | | | | | | request | | | | | | | message | | | | | | | shall not | | | | | | | use value | | | | | | | 0 for | | | | | | | S | | | | | | | essionID, | | | | | | | since it | | | | | | | is an | | | | | | | invalid | | | | | | | setting. | | | | | | | | | | | | | | A | | | | | | | response | | | | | | | message | | | | | | | i | | | | | | | ndicating | | | | | | | SessionID | | | | | | | = 0 means | | | | | | | that an | | | | | | | unknown | | | | | | | SessionID | | | | | | | was | | | | | | | provided | | | | | | | in the | | | | | | | request, | | | | | | | or some | | | | | | | other | | | | | | | failure. | +-----------+-----------+-----------+-----------+---+-----------+
The _NetworkAssistanceTermination_ SAND extension message is defined in the
schema whose \@schemeIdUri is:
_\"urn:3gpp:dash: schema:sandmessageextension:2017\"_ The
_NetworkAssistanceTermination_ message shall be carried in a SAND message
envelope, as specified in ISO/IEC 23009-5 [54], with the following
constraints:
\- The senderID element shall be included, in order to provide the same
reference by which the Network Assistance session had previously been
initiated;
\- The _generationTime_ element may be omitted;
\- The _messageId_ element may be omitted.
##### 13.6.5.3.3 Segment duration
The segment duration SAND extension status message is used to provide the
nominal segment duration for the upcoming segment, as obtained from the MPD of
the content item. The generic procedure is shown in Table 13-9.
Table 13-9: Segment duration provision generic procedure
* * *
Function call Originator ïƒ  destination Parameters Segment duration UE ïƒ  DANE
Segment duration
* * *
The _segmentDuration_ message syntax is shown in Table 13-10.
Table 13-10: Segment duration message syntax
+-----------+-----------+-----------+-----------+---+-----------+ | **Pa | Type | Ca | De | | | | rameter** | | rdinality | scription | | | +-----------+-----------+-----------+-----------+---+-----------+ | | Sa | Object | 1 | | | | | ndMessage | | | | | | | = | | | | | | | | | | | | | | Segmen | | | | | | | tDuration | | | | | +-----------+-----------+-----------+-----------+---+-----------+ | | | segmen | Integer | 1 | Segment | | | | tDuration | | | duration | | | | | | | in | | | | | | | mil | | | | | | | liseconds | +-----------+-----------+-----------+-----------+---+-----------+
The _SegmentDuration_ message is used within the compound
_NetworkAssistanceRequest_ SAND transaction specified in clause 13.6.6.2.
The _SegmentDuration_ message is defined in the schema whose \@schemeIdUri is:
\- \"urn:3gpp:dash: schema:sandmessageextension:2017\"
##### 13.6.5.3.4 Delivery boost request
The 3GP-DASH client may include a request for delivery boost in the NA
request, when there is a risk that buffer underflow is imminent. The request
is valid for the time period of the upcoming media segment. The client may
request delivery boost for the fetch of the first media segment, in order to
accelerate the start of playback. If buffer under-run remains to be an
imminent risk then the client may repeat the delivery boost request for the
following segment. The client may request delivery boosts until it attains a
sufficient media buffer fullness level. The decision to grant or decline any
boost request lies entirely with the network or DANE policy.
The network informs the client when the network applies the delivery boost, in
order to ensure that the client is not misled as to the available link
throughput, since this could lead to the client making an erroneous media rate
selection when the throughput is back to normal again, without boost, and
select a higher media rate than suitable for the next segment download. During
a delivery boost period the client shall not select a higher media rate than
indicated with the rate recommendation function. The client may return to its
own normal media rate selection method only when the delivery boost period has
ended. After the delivery of a segment with network boost, the network reverts
to normal delivery, i.e. without boost.
The delivery boost request is actuated by including the _DeliveryBoostRequest_
message in the Network Assistance request. It is classed as a SAND PED message
extension.Table 13-11 shows the generic procedure.
Table 13-11: Delivery boost request generic procedure
* * *
Function call Originator ïƒ  destination Parameters Delivery boost request UE ïƒ 
DANE None
* * *
The syntax of the _DeliveryBoostRequest_ message is shown in Table 13-12.
Table 13-12: Delivery boost request message syntax
+----------------------+--------+-------------+ | **Parameter** | Type | Cardinality | +----------------------+--------+-------------+ | SandMessage = | Object | 1 | | | | | | DeliveryBoostRequest | | | +----------------------+--------+-------------+
The _DeliveryBoostRequest_ message is used within the compound
_NetworkAssistanceRequest_ SAND transaction specified in clause 13.6.6.2.
The _DeliveryBoostRequest_ message is defined in the schema whose
\@schemeIdUri is:
\- \"urn:3gpp:dash: schema:sandmessageextension:2017\"
##### 13.6.5.3.6 Delivery boost response
The delivery boost response is actuated by including the
_DeliveryBoostResponse_ message in the Network Assistance response. It is
classed as a SAND PED message extension. It indicates whether the DANE grants
or declines the corresponding boost request. Table 13-13 shows the generic
procedure.
Table 13-13: Delivery boost response generic procedure
* * *
Function call Originator ïƒ  destination Parameters Delivery boost response DANE
ïƒ UE Request granted or not
* * *
The _DeliveryBoostResponse_ message syntax is shownin Table 13-14.
Table 13-14: Delivery boost response message syntax
+-----------+-----------+-----------+-----------+---+-----------+ | **Pa | Type | Ca | De | | | | rameter** | | rdinality | scription | | | +-----------+-----------+-----------+-----------+---+-----------+ | | Sa | Object | 1 | | | | | ndMessage | | | | | | | = | | | | | | | | | | | | | | Del | | | | | | | iveryBoos | | | | | | | tResponse | | | | | +-----------+-----------+-----------+-----------+---+-----------+ | | | Status | Enum | 1 | Status of | | | | | | | requested | | | | | | | delivery | | | | | | | boost | +-----------+-----------+-----------+-----------+---+-----------+
The status semantics are shown in Table 13-15.
Table 13-15: Delivery boost response status values
* * *
Status Semantics boostGranted Delivery boost granted boostDeclined Delivery
boost declined
* * *
The _DeliveryBoostResponse_ message is used within the compound
_NetworkAssistanceResponse_ SAND transaction specified in clause 13.6.6.3.
The _DeliveryBoostResponse_ message is defined in the schema whose
\@schemeIdUri is:
\- \"urn:3gpp:dash: schema:sandmessageextension:2017\"
### 13.6.6 Network Assistance transactions
#### 13.6.6.1 General
The Network Assistance transactions consist of the Network Assistance request
and Network Assistance response compound messages. Each of these compound
messages consists of several SAND messages and/or several SAND extension
messages as defined in the present specification, contained in a single SAND
envelope message.
#### 13.6.6.2 Network Assistance request
The generic procedure for the Network Assistance request is shown in Table
13-16.
Table 13-16: Network Assistance request generic procedure
+----------------------------+--------------------------+------------------------+ | Function call | Originator ïƒ  destination | Parameters | +----------------------------+--------------------------+------------------------+ | Network Assistance request | Client ïƒ  DANE | Segment duration | | | | | | | | Available bitrates | | | | | | | | Delivery boost request | | | | | | | | Buffer level | +----------------------------+--------------------------+------------------------+
The Network Assistance request is realised by using a single SAND message
envelope containing the following SAND messages:
_\- SegmentDuration_ SAND extension message;
_\- SharedResourceAllocation_ SAND status message _;_
\- Optionally the _DeliveryBoostRequest_ SAND extension message, if the client
is requesting delivery boost during the upcoming media segment;
\- BufferLevel SAND metrics message, which shall be included if the
_DeliveryBoostRequest_ message is included in the Network Assistance request.
The SAND message envelope is used to carry the Network Assistance request
compound message, with the following constraints:
\- The _senderId_ element shall be used by the UE as a reference for the
Network Assistance transaction;
\- The _generationTime_ element is not required for Network Assistance, hence
it shall be omitted;
\- The _messageId_ element is not used and shall be omitted in all Network
Assistance messages.
The segment duration and available media bitrates are derived by the client
from the information contained in the MPD.
The media segment duration shall be provided using the _MediaSegmentDuration_
message, as defined in clause 13.6.5.4. The validityTime element in the
_SharedResourceAllocation_ SAND message is not required to be included.
The parameters operationPoints and bandwidth in the SAND message
_SharedResourceAllocation_ shall represent each of the available media
bitrates, indicated as the sum of all media components.
The delivery boost request is activated by the inclusion of the
_DeliveryBoostRequest_ message in the SAND message envelope. It has no
additional parameters. If the message is present in the Network Assistance
SAND message envelope then the delivery boost request is actuated. If it is
not present then the 3GP-DASH client is not making a delivery boost request
for the respective segment.
The buffer level parameter may be omitted, but if the client is requesting a
boost for this segment then the buffer level shall be communicated.
An example of a complete Network Assistance request compound message structure
is shown in Table 13-17. Depicted is a specific example with six operation
points available to the client, and the client is asserting the delivery boost
request. The syntax of each of the component messages is specified normatively
in clause 13.6.5.
Table 13-17: Network assistance request compound message structure example
+----------------+--------------------------+-----------------+------------+ | Parameter | | | | +----------------+--------------------------+-----------------+------------+ | CommonEnvelope | | | | +----------------+--------------------------+-----------------+------------+ | | senderId | | | +----------------+--------------------------+-----------------+------------+ | | SandMessage = | | | | | | | | | | SegmentDuration | | | +----------------+--------------------------+-----------------+------------+ | | | segmentDuration | | +----------------+--------------------------+-----------------+------------+ | | SandMessage = | | | | | | | | | | SharedResourceAllocation | | | +----------------+--------------------------+-----------------+------------+ | | | operationPoints | | +----------------+--------------------------+-----------------+------------+ | | | | Bandwidth1 | +----------------+--------------------------+-----------------+------------+ | | | | Bandwidth2 | +----------------+--------------------------+-----------------+------------+ | | | | Bandwidth3 | +----------------+--------------------------+-----------------+------------+ | | | | Bandwidth4 | +----------------+--------------------------+-----------------+------------+ | | | | Bandwidth5 | +----------------+--------------------------+-----------------+------------+ | | | | Bandwidth6 | +----------------+--------------------------+-----------------+------------+ | | SandMessage = | | | | | | | | | | DeliveryBoostRequest | | | +----------------+--------------------------+-----------------+------------+ | | SandMessage = | | | | | | | | | | BufferLevel | | | +----------------+--------------------------+-----------------+------------+ | | | T | | +----------------+--------------------------+-----------------+------------+ | | | Level | | +----------------+--------------------------+-----------------+------------+
13.6.6.3 Network Assistance response
The generic procedure for the Network Assistance request is shown in Table
13-18:
Table 13-18: Network Assistance response generic procedure
+----------------------+----------------------+----------------------+ | Function call | Originator ïƒ  | Parameters | | | destination | | +----------------------+----------------------+----------------------+ | Network Assistance | DANE ïƒ  Client | Recommended bitrate | | response | | | | | | Delivery boost | | | | response | +----------------------+----------------------+----------------------+
The Network Assistance response is realised by using a single SAND message
envelope containing the following SAND messages:
\- One _SharedResourceAssignment_ SAND PER message;
\- Optionally, one _DeliveryBoostResponse_ SAND extension message.
\- The DANE provides the recommended bitrate from those listed in the Network
Assistance request using the _Bandwidth_ element in the
_SharedResourceAssignment_ message.
The _validityTime_ element is used to express the end time of validity of the
recommendation. If it is omitted then the client shall assume the validity is
for the whole media segment duration, i.e. for the duration indicated in the
Network Assistance request.
The _DeliveryBoostResponse_ message indicates whether the requested boost, if
requested for the upcoming media segment, is granted or declined. If no boost
request was made then the Network Assistance response shall not contain a
_DeliveryBoostResponse_ message.
The syntax of a complete Network Assistance response compound message example
is shown in Table 13-19. In this example the DANE communicates the recommended
bandwidth and includes the response to the delivery boost request that was
received from the client in the preceeding Network Assistance request compound
message.
Table 13-19: Network assistance response compound message structure example
+----------------+--------------------------+--------------+ | Parameter | | | +----------------+--------------------------+--------------+ | CommonEnvelope | | | +----------------+--------------------------+--------------+ | | SandMessage = | | | | | | | | SharedResourceAssignment | | +----------------+--------------------------+--------------+ | | | validityTime | +----------------+--------------------------+--------------+ | | | Bandwidth | +----------------+--------------------------+--------------+ | | SandMessage = | | | | | | | | DeliveryBoostResponse | | +----------------+--------------------------+--------------+ | | | Status | +----------------+--------------------------+--------------+
### 13.6.7 Example workflow for Network Assistance
Figure 13.1 shows an example workflow for the Network Assistance use case.
Here it is assumed that the Network Assistance DANE location is already known
by the 3GP-DASH client, hence the discovery procedure of the out-of-band DANE
is not shown. It is also assumed that the client is already aware of the
location of the PSS server from which it will access the content item, about
which the client informs the DANE. The individual workflow steps are described
in figure 13.1.
{width="6.691666666666666in" height="5.657638888888889in"}
Figure 13.1: Example SAND workflow for Network Assistance
**Step 0:** The client and DANE exchange SAND capabilities exchange messages,
as described in clause 13.4.
**Step 1:** The client registers its intention to make use of the Network
Assistance functionality in the DANE by initiating the Network Assistance
session, using the _NetworkAssistanceInitiationRequest_ message, providing the
IP address of the media server and port number used for delivery of media
segments.
**Step 2:** The DANE responds to the request in step 1 with the
_NetworkAssistanceInitiationResponse_ message. If the request is accepted by
the DANE, the response contains the session id, the port number for all
further Network Assistance messages, and the indication of whether a websocket
connection shall be set up by the client for further Network Assistance
communications in the present Network Assistance session.
**Step 3:** The client sends the _NetworkAssistanceRequest_ message to the
DANE, indicating the media content item segment duration and the available
versions in terms of total bitrate. If a network delivery boost is requested
for the upcoming segment then the _DeliveryBoostRequest_ and the _BufferLevel_
messages are included in addition.
**Step 4** : The DANE responds with the _NetworkAssistanceResponse_ message,
indicating the recommended version of the content item in terms of the
recommended bitrate, and whether a delivery boost is foreseen during the
upcoming media segment.
**Step 5:** The client issues an HTTP GET to the media server in order to
initiate delivery of the media segment.
**Step 6** : The media server delivers the requested segment to the client. If
a delivery boost was granted for the present segment, the DANE or network may
deliver a part or parts of the segment at a significantly higher bitrate than
the media playback bitrate, in order to facilitate filling of the media buffer
in the client.
Steps 3-6 are repeated for as long as the content item playback continues.
**Step 7** : The client has ended playback of the content item, so it sends
the _NetworkAssistanceTerminationRequest_ message to the DANE, indicating the
session id of the Network Assistance session.
**Step 8** : The DANE confirms the termination of the Network Assistance
session, also confirming the corresponding session id.
## 13.7 Use of SAND for Proxy Caching
### 13.7.1 Introduction
To realize partial representation caching, SAND can be used to inform DASH
clients about partially cached representations, e.g., via use of the PER
messages **_ResourceStatus, DeliveredAlternative_ and _MPDValidityEndTime,_
described in clause 13.7.3**. Moreover, toward realizing next segment caching,
SAND can be used by DASH clients to inform the network **(i.e., DANE)
anticipated DASH segments, acceptable alternative content, etc. leading to
next segment caching, e.g., via use of the status messages
_AnticipatedRequests_ and _AcceptedAlternatives_ , described in clause 13.7.2
_._ An example workflow realizing next segment caching is presented in clause
13.7.4.** Further details of the proxy caching use case are in TR 26.957 [55].
DANE discovery procedures relevant for the Proxy Caching mode are described in
clause 13.3. SAND messages and protocols for the Proxy Caching mode are
described in clause 13.4. SAND message handling behaviors for DANEs and 3GP-
DASH clients in the Proxy Caching mode are described in clause 13.5.
### 13.7.2 Status Messages for Proxy Caching
#### 13.7.2.1 AnticipatedRequests
This message allows a 3GP-DASH client to announce to a DANE its interest to a
specific set of segments. The intent is to signal the set of segments in
representations that the DASH client is likely to select and request soon.
3GP-DASH clients sending an **_AnticipatedRequests_** message shall follow the
syntax and semantics in Table 3 of ISO/IEC 23009-5 [54], and shall include the
sourceUrl parameter.
#### 13.7.2.2 AcceptedAlternatives
This message allows 3GP-DASH clients to inform DANEs on the media delivery
path (typically caching DANEs), that when they request a given DASH segment,
they are willing to accept other DASH segment(s) as an alternative. A 3GP-DASH
client shall not include alternative segments unless it is ready to receive
them and be able to play them.
3GP-DASH clients sending an **_AcceptedAlternatives_** message shall follow
the syntax and semantics in Table 5 of ISO/IEC 23009-5 [54], and shall the
sourceUrl parameter.
### 13.7.3 PER Messages for Proxy Caching
#### 13.7.3.1 ResourceStatus
This message allows for a DANE to inform a 3GP-DASH client -- typically in
advance -- about knowledge of segment availability including the caching
status of the segment(s) in the DANE.
3GP-DASH clients receiving a **_ResourceStatus_** message shall follow the
syntax and semantics in Tables 10-12 of ISO/IEC 23009-5 [54].
#### 13.7.3.2 MPDValidityEndTime
This message provides the ability to signal to the client that a given MPD,
whose \@type is set to \'dynamic\' and \@minimumUpdatePeriod is present, can
only be used up to at a certain wall-clock time.
3GP-DASH clients receiving an **_MPDValidityEndTime_** message shall follow
the syntax and semantics in Table 17 of ISO/IEC 23009-5 [54].
#### 13.7.3.3 DeliveredAlternative
As a response to an AcceptedAlternatives message sent by a 3GP-DASH client, a
DANE may deliver an alternative segment rather than the requested segment. If
so, the DANE shall send a DeliveredAlternative message to the 3GP-DASH client
to inform that the response contains a segment alternative and not the
requested segment.
3GP-DASH clients receiving a **_DeliveredAlternative_** message shall follow
the syntax and semantics in Table 23 of ISO/IEC 23009-5 [54].
### 13.7.4 Example Workflow on SAND Use for Proxy Caching
**An example workflow realizing next segment caching is depicted in Figure
13.2, where** DANE (PSS Server) caches content based on SAND-based status
messages received from the DASH client (PSS client). For the SAND messages
depicted in Figure 13.2, the messageType codes in Table 2 of ISO/IEC 23009-5
[54] are used.
{width="6.711111111111111in" height="7.143055555555556in"}
Figure 13.2: Example SAND workflow for Proxy Caching
**Step 1:** The SAND capability exchange between the DANE and client will
negotiate the use of the related SAND messages for proxy caching (using the
SAND messages ClientCapabilities and DaneCapabilities as described in Clause
13.4). More specifically, the DANE and DASH client negotiate the use of the
following SAND messages:
\- PER: ResourceStatus, DeliveredAlternative, MPDValidityEndTime,
DaneCapabilities
\- Status Messages: AnticipatedRequests, AcceptedAlternatives,
ClientCapabilities
**Step 2a:** Client issues an HTTP GET and sends request for media to the
DANE. In the header of the HTTP request (per the standardized formats in
ISO/IEC 23009-5 [54], as described in Clause 13.4), client includes the SAND
header that contains the status messages on proxy caching, namely on
anticipated requests, accepted alternatives and/or next alternatives. DANE
receives these status messages, processes them and then forwards the SAND
header that contains the status messages.
**Step 2b:** The DANE forwards the HTTP request for the desired media to the
content server, since the DANE does not have a cached version of the media.
DANE forwards the HTTP headers carrying SAND messages to without any
modification.
**Step 3a:** Content server responds with HTTP 200 OK with body containing
media.
**Step 3b:** In the HTTP response, DANE includes SAND header to advertise
availability of PER messages on proxy caching with the URI hosted at the DANE
for the corresponding PER messages, namely on resource status, DANE resource
status and/or delivered alternatives.
**Step 4:** Client issues an HTTP GET request targeting the URI hosted at the
DANE to fetch the PER messages on proxy caching, namely on resource status,
DANE resource status and/or delivered alternatives. In the header of the HTTP
request, client may include the SAND header that contains further status
messages on proxy caching, namely on anticipated requests, accepted
alternatives and/or next alternatives.
**Step 5** : DANE responds with the HTTP OK with body containing the PER
message on proxy caching, namely on resource status, DANE resource status
and/or delivered alternatives.
**Steps 6,7:** Client requests and downloads cached media from DANE.
## 13.8 Use of SAND for Consistent QoE/QoS
SAND can be an enabler for video-aware network resource management to provide
consistent QoE/QoS for DASH clients. As such, DANE placed at the network core
can allow the service provider to perform video-aware resource management. The
DANE is also considered to contain a QoE reporting server to receive periodic
feedback of media buffer levels from the DASH clients. This is done by
establishing an application-level feedback connection between the DASH client
and the DANE for each streaming flow, e.g., via an HTTP POST connection. Hence
the DANE has a synthetic view of the buffer levels of all the connected
streaming clients. It computes a maximum bit rate (MBR) MBR~j~ for each flow j
and communicates the MBR~j~ of each flow j to the respective DASH client using
SAND messages. Further details of the consistent QoE/QoS use case are in TR
26.957 [55].
Thus the DANE indirectly manages the network resources at various parts of the
network by setting the QoS parameters that influence the DASH client
adaptation behavior. The DANE controls the rate adaptation of the video
clients by communicating the respective MBR parameters to each client.
The video-aware resource management can be realized at the DANE via the use of
SAND, where DASH clients can indicate their desired bandwidth levels through
the use of the SAND status message _SharedResourceAllocation_ and also can
report QoE metrics. In addition, when the DANE determines the resource
allocation across the DASH clients, it can inform the DASH clients about their
resource assignments and throughput / QoS, which can be achieved by the SAND
PER messages _SharedResourceAssignment_ , _Throughput_ and _QoSInformation,_
as specified in clauses 6.5.3, 6.5.5 and 6.5.7 of ISO/IEC 23009-5 [54],
respectively.
DANE discovery procedures relevant for the Consistent QoE/QoS mode are
described in clause 13.3. SAND messages and protocols for the Consistent
QoE/QoS mode are described in clause 13.4. SAND message handling behaviors for
DANEs and 3GP-DASH clients in the Consistent QoE/QoS mode are described in
clause 13.5.
The SAND status message _SharedResourceAllocation_ shall follow the syntax and
semantics in Table 4 of ISO/IEC 23009-5 [54]. 3GP-DASH clients sending the
_SharedResourceAllocation_ message shall include the bandwidth parameter. In
addition, the SAND message common envelope shall contain the senderId
parameter.
The SAND PER message _SharedResourceAssignment_ shall follow the syntax and
semantics in Table 16 of ISO/IEC 23009-5 [54]. 3GP-DASH clients receiving the
_SharedResourceAssignment_ message shall recognize the clientId and bandwidth
parameters.
The SAND PER message _QoSInformation_ shall follow the syntax and semantics in
Table 22 of ISO/IEC 23009-5 [54].
An example workflow realizing the consistent QoE/QoS is depicted in Figure
13.3, where the use of the WebSocket protocol [56] is considered and the DANE
functionality is hosted at the PSS server and SAND-capable DASH client
capabilities are hosted in the PSS client (consistent with the SAND support in
PSS as described in [2]). For the SAND messages depicted in Figure 13.3, the
messageType codes in Table 2 of ISO/IEC 23009-5 [54] are used.
{width="6.5in" height="6.511111111111111in"}
Figure 13.3: Example SAND workflow for Consistent QoE/QoS
**Step 1:** Client issues an HTTP GET and sends request for MPD to the content
server. In the header of the HTTP request, client includes the SAND header
that contains the status messages on client capabilities.
**Step 2:** Content server responds with HTTP 200 OK with body containing the
MPD. As specified in ISO/IEC 23009-5 [54], the MPD contains a sand:Channel
element whose \@schemeIdUri is \"urn:mpeg:dash:sand:channel:websocket:2016\"
and WebSocket URI in the \@endpoint attribute.
**Steps 3, 4:** The 3GP-DASH Client parses the MPD starts downloading the
segments. In addition, the sand:Channel element is located in the MPD element.
Using this information, the 3GP-DASH client initiates the WebSocket connection
with the out-of-band DANE (e.g., located in the PSS server) as specified in
RFC 6455 [56].
It is noted here that WebSocket-based SAND channel announcement may also be
accomplished by the use of OMA DM [22].
**Steps 5, 6, 7, 8:** Upon successful establishment of the WebSocket
connection between a 3GP-DASH Client and DANE, the 3GP-DASH client starts
listening for incoming PER messages and may send metrics and status messages
when needed. Since the WebSocket Protocol establishes a full-duplex
connection, the DANE and the 3GP-DASH client may exchange SAND messages
travelling simultaneously in opposite directions over the channel.
The DANE sends the DANE capabilities message to the 3GP-DASH Client (Step 5).
When received, the 3GP-DASH Client replies with a client capabilities message
(Step 6). As specified by ISO/IEC 23009-5 [54], the messages are WebSocket
messages sent in the text format and formatted in XML. More specifically, the
DANE and 3GP-DASH client negotiate the use of the following SAND messages for
consistent QoE/QoS:
\- PER: SharedResourceAssignment, DaneCapabilities
\- Status Messages: SharedResourceAllocation, ClientCapabilities
\- QoE Metrics: BufferLevel, PlayList
When the capabilities messages have been exchanged, the WebSocket connection
stays open and further SAND messages relevant for consistent QoE/QoS may be
exchanged, namely PER messages on shared resource assignment, QoS information
and throughput, QoE metrics and status messages shared resource allocation.
## 13.9 SAND extension messages XML schema
The XML schema for the SAND extension messages is defined in Table 13-20.
Note: Support for the schema is only required when required by the specific
SAND mode.
Table 13-20: XML schema for SAND extension messages
\\ \\ \ \\
\SAND Messages Extension\\ \\ This Schema defines the Server And Network Assisted DASH
(SAND) messages extension for 3GPP.\ \\ \\
\ \\ \\ \ \\
\\ \\ \\ \\ \\ \\ \\
\\ \\
\\ \\
\\
\\
\\ \ \\ \\ \\ \\ \\ \ \\ \\ \\
\\
\\ \ \\
\\
\\ \\ \\
\\ \ \\
\\ \\
\\ \ \\ \\ \\ \\ \ \\ \\ \\
\\ \ \\ \\ \\ \\ \ \\ \\ \\ \\ \\ \\ \\ \ \\ \\ \\ \\ \ \
## 13.10 SAND for Multi-Network Access Mode
### 13.10.1 Introduction
The primary use case for SAND for Multi-Network Access results from the
distribution of the DASH content over MBMS, for which the MBMS client acts as
a DASH server or DANE in order to provide DASH formats in a manner compatible
to this specification to the DASH client. The client architecture follows
TS26.347 [60], Figure 5.2. In this case, DASH Server functionalities are
resident on an MBMS client, that provides selected DASH functionalities. In a
simplified version, the MBMS client may not provide full DASH Server
functionalities but acts as a DASH Aware Network Element (DANE). This function
is also particularly relevant, if the MBMS service is setup to support MBMS-
operation-on-Demand (MooD) and or MBMS Service continuity. The DANE
functionality in the MBMS client permits dynamic steering of the DASH client
between different resources, for example broadcast distributed resources and
those being provided over unicast. Clause 7.4 in TS26.347 [60] provides
different options for DASH-specific interfaces between the MBMS client and the
DASH client. The use of SAND in this context is also documented in clause
7.4.3 of TS26.347 [60].
In addition to this, the second major use case is that the user may join the
DASH-over-MBMS service while the service is already happening. This requires
that the DASH server/DANE is able to express what Segments are cached and
which ones are not cached as the user was not in broadcast coverage at earlier
time. This also includes signalling of Segments that may have been lost or any
of those that have been removed from the local cache.
This clause provides required and recommended functions for DANE and DASH
client. Despite the requirements of this mode have been designed to fulfill
the SAND for MBMS functionalities, it is not restricted for this use case and
this mode may also be used in other context, in particular when using multiple
networks for distribution and a dynamic steering across the network.
Specifically, the following cases are considered:
\- Networks go down dynamically and may re-appear
\- Not all resources as announced in MPD are always accessible on all
networks, e.g. broadcast resource is unavailable when device is outside
broadcast coverage
\- Networks may have different availability times
\- Not all resources are available an all networks all the time
\- The DANE may issue preferences for one network
\- The information may be established by inband channels and out of band.
### 13.10.2 DANE Functionalities for SAND4M
To address the use cases, a DANE supporting SAND4M mode shall support the
following SAND messages:
\- ResourceStatus, as defined in clause 6.5.1 of ISO/IEC 23009-5 [54]
\- DaneResourceStatus, as defined in clause 6.5.2 of ISO/IEC 23009-5 [54]
The DANE shall support offering the SAND messages using the assistance message
channels defined in clause 13.10.4.2. The DANE may support offering the SAND
messages using the enforcement and/or error message channels defined in clause
13.10.4.3 and clause 13.10.4.4, respectively.
When a SAND message is offered on a DANE, this message is expected to document
the current status.
### 13.10.3 DASH Client Functionalities for SAND4M
3GP-DASH clients supporting SAND4M mode shall support the following SAND
messages:
\- ResourceStatus, as defined in clause 6.5.1 of ISO/IEC 23009-5 [54]
\- DaneResourceStatus, as defined in clause 6.5.2 of ISO/IEC 23009-5 [54]
The DASH Client shall support the regular SAND inband message channels defined
in clause 13.10.4. The DASH client should support receiving the SAND messages
using the enforcement and/or error message channels defined in clause
13.10.5.3 and clause 13.10.5.4, respectively.
The DASH Client when receiving a SAND message from the DANE is expected to use
the information in the message such that it expresses the current status of
the announced networks.
As long the DASH client consumes the media, it should reqularly re-request the
SAND message from the same URL as provided in the message channel defined in
clause 13.10.4.2. If doing so, it should use a conditional HTTP GET in order
to be informed if the SAND message has been updated.
### 13.10.4 Message Channel
#### 13.10.4.1 General {#general-15 .list-paragraph}
The following scenarios are considered for exchange between the DANE and the
DASH client in the SAND4M mode.
\- Client assistance: A scenario for which the message is provided as
auxiliary information for the client, but the service will be continued even
if the client ignores the message. This is for example the case when the
service provider provides information on the availability of additional
networks that may be accessed by the DASH client to request the content. For
protocols and methods, see clause 13.10.4.2.
\- Client Enforcement: A scenario for which the client requires to act, the
network provides suitable alternatives for future requests. The DANE cannot or
is not willing to respond to the request with a valid resource, but provides
suitable alternatives. For protocols and methods, see clause 13.10.4.3.
\- Error Cases: A scenario for which the client is informed that the request
is not valid and the network provides the reason and possible resolutions for
the problem. The DANE cannot respond to the request with a valid resource. For
protocols and methods, see clause 13.10.4.4.
#### 13.10.4.2 Assistance {#assistance .list-paragraph}
For assistance, a dedicated HTTP header field into the response for a segment
request that indicates a notification that the DANE has SAND messages to send
to the DASH client shall be used. Upon receiving an HTTP entity that contains
the SAND header field in its entity head, the DASH client should issue an HTTP
GET request to the indicated element to receive the SAND message.
The following ABNF syntax applies for the header field:
\- SAND-header-field = \"MPEG-DASH-SAND\" \":\" element-address
\- element-address = absolute-URI
The field absolute-URI takes the syntax from RFC3986 [17]. The SAND header
field provides the URI to the SAND message that is to be fetched by the DASH
client using an HTTP GET method.
The message channel may be offered with segment requests or MPD requests and
MPD update requests.
#### 13.10.4.3 Enforcement {#enforcement .list-paragraph}
For enforcement, the DANE shall use a 300 Multiple Choices response with the
following details:
\- the response includes an entity containing a SAND message. The entity
format is specified by the media type given in the Content-Type and shall be
set to sand+xml, as defined in Annex C of ISO/IEC 23009-5 [54].
\- The response should not include the Location field to avoid the use of the
Location field value by the user agent for automatic redirection.
This response is cacheable unless indicated otherwise.
#### 13.10.4.4 Error Case {#error-case .list-paragraph}
For error cases, the DANE shall use of a suitable 4xx error code. The response
may include a SAND message from which the client can deduce the reason for the
error code and potential resolution of the problem.
# 14 Auxiliary Metrics and Reporting
## 14.1 General
Auxiliary metrics pertain to parameters known to the 3GP-DASH client other
than QoE metrics as defined in Clause 10, In this version of the
specification, those metrics are specific to the measurement of service
interactivity related usage/consumption, and their corresponding definition,
reporting scheme and report protocol.
Interactivity usage reporting by the 3GP-DASH client is optional. However, a
client which supports reporting of interactivity usage metrics shall do so in
accordance to the metrics configuration and reporting mechanism as described
in the sub-clauses of clause 14.2.
## 14.2 Interactivity Usage Metrics and Reporting
### 14.2.1 Introduction
This clause specifies the interactivity usage metrics that the DASH client, if
capable and instructed to do so, shall report to a network-based report
server. These metrics are conveyed by the MPD (via the
**MPD.Metrics.Reporting** element) and the DASH client will use the DASH API
as described in clause 14.3 to pass the metrics to the appropriate
interactivity-capable application. Consequently, interactivity usage
measurements performed by the application, in accordance to the metrics, are
returned to the DASH client via the same API. The interactivity usage metric
syntax is described in clause 14.2.2.1, and the detailed metric definitions
are provided in clauses 14.2.2.2 and 14.2.2.3.
The reporting scheme is defined in clause 14.2.3, the metrics to be supported
by 3GP-DASH clients supporting the interactivity usage metrics reporting
feature are specified in clause 14.2.4, and the interactivity usage reporting
protocol is defined in clause 14.2.5.
### 14.2.2 Interactivity Usage Metric Definitions
#### 14.2.2.1 Introduction
This clauseovides the interactivity usage metric definitions and measurement
framework.
The semantics are defined using an abstract syntax. Clause 14.2.5 provides a
mapping to an XML schema. Items in this abstract syntax have one of the
following primitive types (Integer, Real, Boolean, Enum, String) or one of the
following compound types:
\- Objects: an unordered sequence of (key, value) pairs, where the key always
has string type and is unique within the sequence.
\- List: an ordered list of items.
\- Set: an unordered set of items.
Additionally, there are two kinds of timestamp defined, i.e., _real time_
(wall-clock time) and _media time._
#### 14.2.2.2 Interactivity Summary
The **IntySummary** element as shown in table 14.2.2.2.1 summarizes the
measurements of interactivity usage according to different metrics such as
user consumption of rendered interactivity content or engagement with user
interface (UI) functionality, such as viewing, clicking on or selection of
hyperlinks, radio buttons, check boxes and other forms of UI displays or
controls. Occurrences of opportunities for such user input may be pre-
scheduled or unplanned during the playout of a main program. Examples of
interactivity content include advertisements and auxiliary content accessible
under user control during the occurrence of an interactivity event during a
main program.
Table 14.2.2.2.1: Interactivity Summary
* * *
Key Type Description  
IntySummary Object Summarized information on interactivity usage associated
with the set of interactivity events summarized by an interactivity usage
report  
Parameters List Collection of one or more parameters pertaining to
interactivity usage  
consumptionDuration Integer Total measured time duration in milliseconds of
user consumption of rendered interactivity content (e.g., video or audio)
engagementInterval Integer Total measured time duration in milliseconds of
user engagement with interactivity content via UI controls clickthroughStart
List List of start times, by media presentation time, of click-through actions
associated with user access of interactivity-related resources offered by UI
controls PrivateExt List Container for proprietary or application-specific
extensions on parameters to be included in the interactivity usage report
* * *
#### 14.2.2.3 Interactivity Event List
The **IntyEventList** element as shown in table 14.2.2.3.1 contains a time-
ordered list of interactivity usage events and the details of the measured
interactivity usage information during each event.
Table 14.2.2.3.1: Interactivity Event List
* * *
IntyEventList List A time-ordered list of interactivity events occurring
during the playout of the main program, each containing detailed information
on the incidences of interactivity usage during that event, as covered by an
instance of the interactivity usage report.  
_Entry_ Object A record of a single interactivity event  
mStart Media Time The media presentation time at the start of the
interactivity event.  
mStop Media Time The media presentation time at the end of the interactivity
event  
Rendering List A list of time intervals within the duration of an
interactivity event during which the user consumes the rendered interactivity
content (e.g., video or audio)  
rStart Media Time The media presentation time at the start of interactivity
content rendering resulting from, for example, the user's click of an embedded
hyperlink, or engagement with UI controls, present in an advertisement that is
initially displayed during an interactivity event rStop Media Time The media
presentation time at the end of consumption of interactivity content as
measured by the time of conclusion of that content, or when the user selects
another interactivity content item for rendering, whichever occurs earlier
Engagement List A list of time occurrences within the duration of an
interactivity event at which the user engages with the interactivity content
via UI controls  
eStart Media Time The media presentation time at the start of user engagement
with interactivity content via UI controls via UI controls Clickthrough List A
list of click-through actions performed by the user to access interactivity-
related resources, as denoted by embedded hyperlinks in the interactivity
content  
cStart Media Time The media presentation time at which user performs a
click/selection PrivateExt List Container for proprietary or application-
specific extensions on parameters to be included in this interactivity event
entry
* * *
### 14.2.3 Interactivity Usage Reporting Scheme
This clause specifies a 3GP-DASH interactivity usage reporting scheme.
The interactivity usage reporting scheme is signaled using the **Reporting**
element in the **Metrics** element. The URN to be used for the **Reporting**
\@schemeIdUri shall be \"urn:3GPP:ns:PSS:DASH:IU15\".
The reporting scheme shall use the interactivity usage reporting protocol as
defined in clause 14.2.5.
The semantics and XML syntax of the scheme information for the 3GP-DASH
interactivity usage reporting scheme are specified in table 14.2.3.1 and table
14.2.3.2, respectively.
Table 14.2.3.1: Semantics of Interactivity Usage Reporting Scheme Information
+-----------------+-----------------+-------------+-----------------+ | Element or | Use | Description | | | Attribute Name | | | | +-----------------+-----------------+-------------+-----------------+ | | \@metrics | M | This attribute | | | | | lists all | | | | | interactivity | | | | | usage metrics | | | | | (as a list of | | | | | interactivity | | | | | metric keys as | | | | | defined in | | | | | clauses | | | | | 14.2.2.2 and | | | | | 14.2.2.3). | +-----------------+-----------------+-------------+-----------------+ | | \@apn | O | This attribute | | | | | gives the | | | | | access point | | | | | that should be | | | | | used for | | | | | sending the | | | | | interactivity | | | | | usage reports. | +-----------------+-----------------+-------------+-----------------+ | | \@format | O | This field | | | | | gives the | | | | | requested | | | | | format for the | | | | | reports. | | | | | Possible | | | | | formats are: | | | | | \"uncompressed" | | | | | and \"gzip". | +-----------------+-----------------+-------------+-----------------+ | | \@s | O | Percentage of | | | amplepercentage | | the clients | | | | | that should | | | | | report | | | | | interactivity | | | | | usage. The | | | | | client should | | | | | use a random | | | | | number | | | | | generator and | | | | | compare the | | | | | generated | | | | | output with the | | | | | given | | | | | percentage in | | | | | determining | | | | | whether to | | | | | perform | | | | | reporting. | +-----------------+-----------------+-------------+-----------------+ | | \@ | M | The reporting | | | reportingserver | | server URL to | | | | | which the | | | | | interactivity | | | | | usage reports | | | | | will be sent. | +-----------------+-----------------+-------------+-----------------+ | | \@reportTime | O | If present, is | | | | | indication to | | | | | the DASH client | | | | | that each | | | | | interactivity | | | | | usage report by | | | | | the DASH client | | | | | should be | | | | | accompanied by | | | | | the wall-clock | | | | | time at which | | | | | the report is | | | | | sent. | +-----------------+-----------------+-------------+-----------------+ | | \@re | O | Indicates the | | | portinginterval | | time | | | | | interval(s) | | | | | between | | | | | successive | | | | | transmission of | | | | | interactivity | | | | | usage reports. | | | | | If present, | | | | | \@repo | | | | | rtingInterval=n | | | | | indicates that | | | | | the client | | | | | should send a | | | | | report every | | | | | n-th second | | | | | provided that | | | | | new metrics | | | | | information has | | | | | become | | | | | available since | | | | | the previous | | | | | report. | +-----------------+-----------------+-------------+-----------------+ | | GroupID | 0..1 | A set of one or | | | | | more | | | | | identifiers, | | | | | representing | | | | | aliases | | | | | associated with | | | | | and known to | | | | | the client | | | | | devices, used | | | | | to identify | | | | | that/those | | | | | device(s) which | | | | | should perform | | | | | interactivity | | | | | usage | | | | | reporting. | | | | | Presence of | | | | | this attribute | | | | | and | | | | | \@s | | | | | amplePercentage | | | | | should be | | | | | mutually | | | | | exclusive | +-----------------+-----------------+-------------+-----------------+ | Legend: | | | | | | | | | | > For | | | | | > attributes: | | | | | > M=Mandatory, | | | | | > O=Optional, | | | | | > OD=Optional | | | | | > with Default | | | | | > Value, | | | | | > C | | | | | M=Conditionally | | | | | > Mandatory. | | | | | > | | | | | > For elements: | | | | | > | | | | | \. | | | | | ..\ | | | | | > (N=unbounded) | | | | | | | | | | Elements are | | | | | bold; | | | | | attributes are | | | | | non-bold and | | | | | preceded with | | | | | an @ | | | | +-----------------+-----------------+-------------+-----------------+
Table 14.2.3.2: Syntax of Interactivity Usage Reporting Scheme Information
+----------------------------------------------------------------------+ | \\ | | \\ | | \ | | \\ | | \3GPP DASH Interactivity Usage | | Reporting\\ | | \\ | | This Schema defines the interactivity reporting scheme information | | for 3GPP DASH.\ | | \\ | | \\ | | \ | | \\ | | \ | | \ | | | | \ | | | | \ | | | | \ | | | | \\ | | \\ | | \\ | | \\ | | \ | | | | \\ | | \ | | | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | | | \ | +----------------------------------------------------------------------+
### 14.2.4 Interactivity Metrics
The following metrics shall be supported by 3GP-DASH clients supporting the
interactivity usage metrics reporting feature.
\- Interactivity Usage Summary information (Clause 14.2.2.2); and
\- Interactivity Event List information (Clause 14.2.2.3).
The \@metrics attribute of the interactivity usage reporting scheme
information in clause 14.2.3 contains a list of interactivity usage metric
keys comprising the entirety of such metrics that the DASH client shall
collect and report.
### 14.2.5 Interactivity Usage Reporting Protocol
#### 14.2.5.1 General
The interactivity usage reporting protocol consists of:
\- the XML-based report format defined in clause 14.2.5.2; and
\- the reporting protocol defined in clause 14.2.5.3.
The MIME type of an XML-formatted interactivity usage report shall be
\"application/3gpdash-iu-report+xml" as defined in Annex J.
#### 14.2.5.2 Report Format
The interactivity usage report is formatted as an XML document that complies
with the following XML schema:
+----------------------------------------------------------------------+ | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \ | +----------------------------------------------------------------------+ | | +----------------------------------------------------------------------+
#### 14.2.5.3 Reporting Protocol
In the MPD configuration, if a specific metrics server has been configured,
the client shall send interactivity usage reports using the HTTP (RFC 2616)
[9] POST request carrying XML formatted metadata in its body. An example
interactivity usage reporting based on HTTP POST request signalling is shown
below:
+----------------------------------------------------------------------+ | **POST http://www.exampleserver.com HTTP/1.1** | | | | **Host: 192.68.1.1** | | | | **User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; | | Trident/4.0)** | | | | **Content-Type: text/xml; charset=utf-8** | | | | **Content-Length: 4408** | | | | \ | | | | \ | | | | mediaPresentationId=\"NFLGame-xyz_123\" periodId=\"8\" | | reportTime=\"2019-02-17T09:30:47Z\" | +----------------------------------------------------------------------+ | \ | | | | \ | | | | \ | | | | \ | | | | \ | | | | \\ | | \ | +----------------------------------------------------------------------+
# 15 Service Interactivity Support via Event Signaling and DASH APIs
The notification of upcoming occurrences of events pertaining to service
interactivity, in the context of a DASH streaming service, and regardless of
whether that service is delivered via unicast or broadcast, is provided by the
signaling of interactivity-specific event information. Such interactivity
event signaling may be instantiated as a DASH Event Stream, in the form of MPD
Events or inband event messages (i.e., "emsg") as defined in ISO/IEC 23009-1
[43], or as samples in an ISOBMFF timed metadata track as defined in ISO/IEC
14496-12 [11].
As described in clause 8.8, interactivity-related events are identified by the
appropriate scheme identifier such that the DASH client can forward the event
metadata to the subscribing interactivity application.
The 3GP-DASH client should support the event and timed metadata processing
model and the WebIDL API as specified in [62]. If supported, then:
1\. The processing of interactivity event signaling, and subsequent delivery
of event metadata to the interactivity application shall comply with the DASH-
IF's "DASH Player's Application Events and Timed Metadata Processing Model and
APIs" specification [62].
2\. The API between the 3GP-DASH client and consuming interactivity
application, pertaining to the subscription and notification delivery of such
interactivity event signaling information, shall comply with the WebIDL API as
specified in [62].
The service interactivity application could be implemented as either a native
application or a Web application.
###### ## Annex A (informative): Example DASH Client Behaviour
# A.1 Introduction
The information on client behaviour is purely informative and does not imply
any normative procedures on DASH client implementations. The Annex primarily
refers to Annex A of ISO/IEC 23009-1 [43].
# A.2 Overview
See ISO/IEC 23009-1 [43], Annex A.2.
# A.3 Segment List Generation
See ISO/IEC 23009-1 [43], Annex A.3.
Table A.1: Void
# A.4 Seeking
See ISO/IEC 23009-1 [43], Annex A.4.
# A.5 Support for Trick Modes
See ISO/IEC 23009-1 [43], Annex A.5.
# A.6 Switching Representations
See ISO/IEC 23009-1 [43], Annex A.6.
# A.7 Reaction to Error Codes
See ISO/IEC 23009-1 [43], Annex A.7.
# A.8 Encoder Clock Drift Control
See ISO/IEC 23009-1 [43], Annex A.8.
# A.9 Handling Partial File Responses
If the DASH client issued a regular HTTP GET request including an accept
header with application/3gpp-partial, i.e. a partial-file-accept request. it
may receive one of the following responses.
\- 200 OK with the Content-Type set to application/3gpp-partial and the
message format according to the definition in clause 7.9.2.2 of TS26.346 [42].
\- 416 Requested Range Not Satisfiable with the additional information
according to the definition in clause 7.9.2.2 of TS26.346 [42].
If the **416** code is received, the 3GP-DASH client should conceal the lost
media that is contained in this lost segment and should continue its regular
operation, by downloading the next Segment in the Representation that contains
a random access point, i.e. a SAP type 1 or 2.
If the 200 OK code (or other 2xx success status codes) with the Content-Type
set to application/3gpp-partial is received, the 3GP-DASH client should
continue its regular operation, by downloading the next Segment in the
Representation that contains a random access point, i.e. a SAP type 1 or 2. In
addition, the 3GP-DASH client may use the information in the body of the
response in order to advantageously conceal the lost media as follows:
\- If the content range starting from the first byte is included in the
response,
\- - the 3GP-DASH client may decode and present all complete access units that
are included in the initial byte range.
\- - The 3GP-DASH client may parse the Segment Index and/or movie fragment
header in order to identify SAPs or sync samples that may be used to decode
and render additional information.
\- If the content range starting from the first position is not included in
the response and the extension header 3gpp-access-position is not present, the
3GP DASH client may discard all information and treat the media segment as
lost.
\- If the content range starting from the first position is not included in
the response and the extension header 3gpp-access-position is present and has
a value that is part of the content range,
\- then the 3GP-DASH client may access and decode from the indicated position
using regular box parsing mechanisms in order to identify SAPs or sync samples
that may be used to decode and render additional information contained in this
range or in other ranges.
# A.10 Utilization of QoS Information
A DASH client may take into consideration available QoS information when
requesting representations such that the consumed content bandwidth remains
within the limits established by the signalled QoS information, see clause
6.8.3 of 3GPP TR 26.938 [46].
# A.11 Utilization of Quality Metadata
Quality metadata refers to video quality metrics based on associated
measurements of the media data, as described in clause 16 of 3GPP TS 26.244
[4]. A DASH client may take into consideration Quality Metadata when
requesting representations, see clause 6.17 of 3GPP TR 26.938 [46].
###### ## Annex B (normative): Media Presentation Description Schema
# B.1 Introduction
The main schema is provided in clause B.2 in Table B-1. The main schema refers
to the extension schema in clause B.3 and in clause 8.3.
# B.2 Main Schema
The XML schema for the MPD is defined in ISO/IEC 23009-1 [43], Annex B. Table
B-1 provides the MPD type and the inclusion of the 3GPP extensions in the main
schema.
Table B-1: 3GPP Extensions in Main Schema
\\ \\ \\
\\ \
\\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \
\\
\\
\
# B.3 3GPP Extension Schema
Table B-2: XML schema of the 3GPP Extensions for MPD
* * *
\\ \\ \\ \Extensions to Media Presentation
Description for 3GPP\\ \\ \ \\ \ \\ \\ \\ \\ \\ \\ \\ \\ \\ \ \
\
* * *
###### ## Annex C (normative): Descriptor Scheme Definitions
# C.1 Introduction
This annex defines descriptors that are defined in this specification. In
particular the following descriptors are defined
\- 3D Video disparity range descriptor scheme in clause C.4.
\- 3D Video display information descriptor scheme in clause C.5.
Note: Other descriptors are defined in ISO/IEC 23009-1 [43], clause 5.9.
# C.2 Void
Table C.1: Void
# C.3 Void
# C.4 3D Video Disparity Range Descriptor Scheme
The 3D Video Disparity Range description scheme may only be signalled in
**SupplementalProperty** element with SupplementalProperty\@schemeIdUri set to
urn:3GPP:dash:3dVideoDisparityRange:2013. When present the 3D Video Disparity
Range description scheme shall be on the Adaptation Set level. The
SupplementalProperty\@value of 3D Video Disparity Range description scheme
shall be present and is defined below using ABNF [40]:
\@value=\"disparityRange\"
disparityRange = disparityMinValue disparityMaxValue
disparityMinValue = [%x2D]1*3DIGIT
disparityMaxValue = [%x2D]1*3DIGIT
disparityMinValue and disparityMaxValue are expressed as the minimum and the
maximum disparity, in units of pixels, divided by the width of the 3D video
content, in units of pixels, multiplied by one hundred. disparityMinValue and
disparityMaxValue shall be the same for all Representations included in an
Adaptation Set containing this descriptor scheme.
NOTE 1: The disparity is the difference between the horizontal positions of a
pixel representing the same point in space in the right and left views of a
stereoscopic 3D video frame. Positive disparity values move the object away
from the viewer whilst negative values move it towards the viewer. A value of
zero places the object in the plane of the display screen.
NOTE 2: The DASH client can calculate the perceived depth of the stereoscopic
3D content based on the provided disparity range and the prevailing contextual
information, such as a screen size used to display the content, and the
calculated or predefined distance of a viewer from the display. Based on the
calculated depth range perceived by a user, the DASH client can determine
applicability of the stereoscopic 3D video content provided for a given
Adaptation Set [41.]
# C.5 3D Video Display Information Scheme
The 3D Video Display Information description scheme may only be signalled in
**SupplementalProperty** element with SupplementalProperty\@schemeIdUri
urn:3GPP:dash:3dVideoDisplayInformation:2013. When present the 3D Video
Display Information description scheme shall be present on the Adaptation Set
level. The SupplementalProperty\@value of 3D Video Display Information
description scheme shall be present and is defined below using ABNF [40]:
\@value=\"displayInformation\"
displayInformation = displayWidth [viewingDistance]
displayWidth = 1*5DIGIT
viewingDistance = 1*5DIGIT
displayWidth and viewingDistance provide actual values for which the
stereoscopic 3D video content is optimized and are expressed in millimeters.
The displayWidth defines the width of the part of the screen actually used for
displaying the 3D video content.
NOTE: The DASH client can choose the Adaptation Set which contains the 3D
Video Display Information Scheme with displayWidth closest to the actual
display size used by the DASH client to display the content.
###### ## Annex D (informative): MPD Examples
# D.1 On-Demand Service
Table D.1 provides an example MPD for an On-Demand service.
Table D.1: Example MPD for an On-Demand Service
* * *
\\ \\ \\ \Example\\
\\ \http://www.example.com\\ \\ \\ \\ \\ \\ \\"rep1\"\\ \\ \\
\\ \\
\\ \\ \\
\\ \\"rep2\"\\ \\
\\ \\ \\ \\ \\ \\ \\
\\ \\ \\
\\
\\ \\ \\ \\
\\ \\ \
* * *
# D.2 Live Service
Table D.2 provides an example MPD for a live service.
Table D.2: Example MPD for a Live Service
+----------------------------------------------------------------------+ | \\ | | \\ | | \\ | | \Example 3: 3GPP SA4 Meeting in Vancouver as Live | | Broadcast\\ | | \3GPP\\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \\ | | \ | +----------------------------------------------------------------------+
# D.3 MPD Assembly
Table D.3 provides an example MPD with reference to external Period element as
provided in Table D.4. An equivalent MPD to the one in Table D.3 after
dereferencing with the **Period** element in Table D.4 is shown in Table D.2.
Table D.3: Example MPD with reference to external Period element
* * *
\\ \\ \\ \Example 3: 3GPP SA4
Meeting in Vancouver as Live Broadcast\\ \3GPP\\
\\ \\ \\ \\
\\ \\
\\ \\ \\ \\ \\
\\ \\ \\ \\
\ \\ \\ \\ \\ \\ \\ \\ \\
\\ \\
\\ \\
\\ \\ \\ \\ \\ \\
\
* * *
Table D.4: External Period
* * *
\\ \\ \\ \\ \\
\\ \\ \\ \\ \
* * *
# D.4 MPD Deltas
In the following MPD example, the content is 30 minutes in duration. There are
3 Periods, each of 10 minutes duration. Each Period has 3 Representations and
each Representation is contained within one 3gp file. Each Representation has
audio encoded with Low Complexity-AAC. One Representation of each Period
(p1rep1.3gp, p2rep1.3gp, and p3rep1.3gp) has video resolution 320x240 encoded
with H.264 baseline profile level 1.1. Another Representation of each Period
(p1rep2.3gp, p2rep2.3gp, and p3rep2.3gp) has resolution 320x240 encoded with
H.264 baseline profile level 1.3. Finally, a third representation in each
period (p1rep3.3gp, p2rep3.3gp, and p3rep3.3gp) has resolution 480x240 encoded
with H.264 baseline profile level 2.1. One Representation of each Period has
bandwidth of 239 kbps, a second representation has bandwidth of 478 kbps, and
a third representation has bandwidth of 892 kbps.
Since each represention is contained in one file, the Initialization Segments
and the Media Segments for a representation are accessed with byte ranges.
Each **SegmentURL** element in the MPD contains a **mediaRange** attribute and
the corresponding byte range for the Initialization Segment or Media Segment.
For the example each Segment of all representations is 10 seconds in duration.
Line numbers of the MPD in the example are shown for clarity, although these
would not be present in the MPD.
EXAMPLE 1 (add)
The change of adding the SegmentURL element for the next Segment to the
Representation of the third Period of the MPD in the example with 239K
bandwidth can be described as follows.
492a
\
.
The SegmentURL element is added on a new line after line number 492.
EXAMPLE 2 (replace)
Replacing the line containing the **DeltaSupport** element to correspond to
the MPD after the next update can be described as follows.
625c
\
.
EXAMPLE 3(delete)
If lines 8 through 10 of the original MPD are deleted and not present in the
updated MPD, the delta to express this is:
8,10d
.
Below is what the MPD looks like after approximately 29 minutes and 40
seconds. In this case, the MPD is updated approximately every 10 seconds.
+----------------------------------------------------------------------+ | 1\ | | | | 2\ | | | | 14 | | | | 15 \ | | | | 16 \Example\ | | | | 17 \Example\ | | | | 18 \Example\ | | | | 19 \ | | | | 20 \http://www.example.com\ | | | | 21 \ | | | | 22 \ | | | | 23 \\ | | 24 \ | | | | 25 \ | | | | 26 \\"p1rep1.3gp\"\ | | | | 27 \ | | | | 28 \ | | | | 29 \ | | | | 30 \ | | | | . | | | | . | | | | . | | | | 88 \ | | | | 89 \ | | | | 90 \ | | | | 91 \ | | | | 92 \\"p1rep2.3gp\"\ | | | | 93 \ | | | | 94 \ | | | | 95 \ | | | | 96 \ | | | | . | | | | . | | | | . | | | | 154 \ | | | | 155 \ | | | | 156 \ | | | | 157 \ | | | | 158 \\"p1rep3.3gp\"\ | | | | 159 \ | | | | 160 \ | | | | 161 \ | | | | 162 \ | | | | . | | | | . | | | | . | | | | 220 \ | | | | 221 \ | | | | 222 \ | | | | 223 \ | | | | 224\ | | | | 225\ | | | | 226 \ | | | | 227 \\ | | 228 \ | | | | 229 \ | | | | 230 \\"p2rep0.3gp\"\ | | | | 231 \ | | | | 232 \ | | | | 233 \ | | | | 234 \ | | | | . | | | | . | | | | . | | | | 292 \ | | | | 293 \ | | | | 294 \ | | | | 295 \ | | | | 296 \\"p2rep1.3gp\"\ | | | | 297 \ | | | | 298 \ | | | | 299 \ | | | | 300 \ | | | | . | | | | . | | | | . | | | | 358 \ | | | | 359 \ | | | | 360 \ | | | | 361 \ | | | | 362 \\"p2rep2.3gp\"\ | | | | 363 \ | | | | 364 \ | | | | 365 \ | | | | 366 \ | | | | . | | | | . | | | | . | | | | 424 \ | | | | 425 \ | | | | 426 \ | | | | 427 \ | | | | 428\ | | | | 429\ | | | | 430 \ | | | | 431 \\ | | 432 \ | | | | 433 \ | | | | 432 \\"p3rep0.3gp\"\ | | | | 433 \ | | | | 434 \ | | | | 435 \ | | | | 436 \ | | | | . | | | | . | | | | . | | | | 492 \ | | | | 493 \ | | | | 494 \ | | | | 495 \ | | | | 496 \\"p3rep1.3gp\"\ | | | | 497 \ | | | | 498 \ | | | | 499 \ | | | | 500 \ | | | | . | | | | . | | | | . | | | | 556 \ | | | | 557 \ | | | | 558 \ | | | | 559 \ | | | | 560 \\"p3rep2.3gp\"\ | | | | 561 \ | | | | 562 \ | | | | 563 \ | | | | 564 \ | | | | . | | | | . | | | | . | | | | 620 \ | | | | 621 \ | | | | 622 \ | | | | 623 \ | | | | 624 \ | | | | 625 \ | | | | 626\ | +----------------------------------------------------------------------+
Since the value of \@sourceURL in the above MPD is \"delta1.mpdd\",
delta1.mpdd is an empty file at the time of publication of the above MPD.
The following file is delta1.mpdd after the next MPD update. Notice that
clients have access to the new value of \@sourceURL referenced by the latest
MPD via the delta.
+----------------------------------------------------------------------+ | 625c | | | | \ | | | | . | | | | 620a | | | | \ | | | | . | | | | 556a | | | | \ | | | | . | | | | 492a | | | | \ | | | | . | +----------------------------------------------------------------------+
At the next MPD update, \"delta1.mpdd\" would contain the cumulative update
for 2 MPD updates.
+----------------------------------------------------------------------+ | 625c | | | | \ | | | | . | | | | 620a | | | | \ | | | | \ | | | | . | | | | 556a | | | | \ | | | | \ | | | | . | | | | 492a | | | | \ | | | | \ | | | | . | +----------------------------------------------------------------------+
###### ## Annex E (normative): Void
###### ## Annex F (normative): OMA DM QoE Management Object
As an alternative to configuring the QoE reporting for each session via MPD,
OMA-DM can be used to specify the QoE configuration. If such an OMA-DM QoE
configuration has been specified, it shall be evaluated by the client for all
subsequent sessions.
For the OMA-DM QoE configuration the parameters are specified according to the
following Managed Object (MO), and represents the same information as
specified in clauses 10.4 and 10.5. Version numbering is included for possible
extension of the MO.
The Management Object Identifier shall be: urn:oma:mo:ext-3gpp-pss-dash-
qoe:1.0.
Protocol compatibility: The MO is compatible with OMA Device Management
protocol specifications, version 1.2 and upwards, and is defined using the OMA
DM Device Description Framework as described in the Enabler Release Definition
OMA-ERELD _DM-V1_2 [22].
The nodes and leaf objects as provided in Figure F.1 shall be contained under
the 3GPP_PSS_DASH_QOE node if a client supports the feature described in this
clause.
Figure F.1: Nodes and leaf objects
**Node: /\ **
This interior node specifies the unique object id of a QoE metrics management
object. The purpose of this interior node is to group together the parameters
of a single object.
\- Occurrence: ZeroOrOne
\- Format: node
\- Minimum Access Types: Get
The following interior nodes shall be contained if the client supports the QoE
Management Object.
**/\ /Enabled**
This leaf indicates if QoE reporting is requested by the provider.
\- Occurrence: One
\- Format: bool
\- Minimum Access Types: Get
**/\ /Servers**
This leaf contains a space-separated list of servers to which the QoE reports
are transmitted. It is URI addresses, e.g. http://qoeserver.operator.com. In
case of multiple servers, the client randomly selects one of the servers from
the list, with uniform distribution.
\- Occurrence: One
\- Format: chr
\- Minimum Access Types: Get
\- Values: URI of the servers to receive the QoE report.
**/\ /APN**
This leaf contains the Access Point Name that should be used for establishing
the PDP context on which the QoE metric reports will be transmitted. This may
be used to ensure that no costs are charged for QoE metrics reporting. If this
leaf is not defined then any QoE reporting is done over the default access
point.
\- Occurrence: ZeroOrOne
\- Format: chr
\- Minimum Access Types: Get
\- Values: The Access Point Name
**/\ /Format**
This leaf specifies the format of the report.If this leaf is not defined the
QoE reports shall be sent uncompressed.
\- Occurrence: ZeroOrOne
\- Format: chr
\- Minimum Access Types: Get
\- Values: \"uncompressed\", \"gzip\"
**/\ /Interval**
This leaf specifies how often QoE reports shall be sent. If this leaf is not
defined only one QoE report shall be sent after the complete session.
\- Occurrence: ZeroOrOne
\- Format: int
\- Minimum Access Types: Get
\- Values: seconds
**/\ /SamplePercentage**
This leaf specifies the percentage of sessions for which QoE metrics shall be
reported. The client evaluates a random number at start of each session to
determine if reporting shall be done for the specific session. If this leaf is
not defined QoE reports are sent for every session.
\- Occurrence: ZeroOrOne
\- Format: float
\- Minimum Access Types: Get
\- Values: 0.0-100.0.
**/\ /StartTime**
This leaf specifies when collection of QoE metrics shall start. It is
specified in seconds and is relative to the start of the session. If this leaf
is not defined, the QoE collection shall be done from the start of the
session.
\- Occurrence: ZeroOrOne
\- Format: int
\- Minimum Access Types: Get
\- Values: seconds
**/\ /Duration**
This leaf specifies for how long QoE collection shall be done. It is specified
in seconds and is relative to the start time of QoE collection. If this leaf
is not defined QoE collection shall be done until the end of the session.
\- Occurrence: ZeroOrOne
\- Format: int
\- Minimum Access Types: Get
\- Values: seconds.
**/\ /Metrics**
This leaf specifies a list of white-space separated metrics which shall be
reported, and follows the same syntax as specified for the \"\@metrics\"
attribute in Table 32. If this leaf is not defined no QoE reporting shall be
done.
\- Occurrence: ZeroOrOne
\- Format: chr
\- Minimum Access Types: Get
\- Values: Metrics as specified in clause 10.4.
**/\ /StreamingSourceFilter**
This leaf controls the Media Presentations for which QoE metrics are collected
and reported. The filter is defined as a URL pattern. Each URL pattern is
represented by a POSIX regular expression as specified by IEEE Std 1003.1-2008
[52].
If the MPD URL of a Media Presentation does not match any of the regular
expressions as provided by the URL patterns in the StreamingSourceFilter
values, then reporting is disabled and the DASH client shall not report the
requested QoE metrics for that Media Presentation. If no StreamingSourceFilter
leaf is present, then reporting is enabled for any Media Presentation.
\- Occurrence: ZeroOrMore
\- Format: chr
\- Minimum Access Types: Get
\- Values: a POSIX regular expression providing the URL pattern.
**/\  /\**
This interior node specifies any location filters.
\- Occurrence: ZeroOrOne
\- Format: node
\- Minimum Access Types: Get
**/\ /\/CellList**
This leaf specifies a list of cellIDs.
\- Occurrence: ZeroOrOne
\- Format: chr
\- Minimum Access Types: Get
\- Values: a list of ECGI or CGI.
**/\ /\/PolygonList**
This leaf specifies a list of shapes defined as 'Polygon' by OMA MLP[51].
\- Occurrence: ZeroOrOne
\- Format: chr
\- Minimum Access Types: Get
\- Values: a list of 'Polygon' defined by OMA MLP[51].
**/\ /\/Polygon_Conf_Level**
This leaf indicates the probability in percent that the DASH client is located
in the corresponding polygon area specified by leaf 'PolygonList'. It is
defined as 'lev_conf' by OMA MLP. If not present, it has default value of 60.
\- Occurrence: ZeroOrOne
\- Format: int
\- Minimum Access Types: Get
\- Values: 'lev_conf' defined by OMA MLP[51].
**/\ /\/CircularAreaList**
This leaf specifies a list of shapes defined as 'CircularArea' by OMA MLP[51].
\- Occurrence: ZeroOrOne
\- Format: chr
\- Minimum Access Types: Get
\- Values: a list of 'CircularArea' defined by OMA MLP[51].
**/\ /\/Circular_Conf_Level**
This leaf indicates the probability in percent that the DASH client is located
in the corresponding circular area specified by leaf 'CircularAreaList'. It is
defined as 'lev_conf' by OMA MLP. If not present, it has default value of 60.
\- Occurrence: ZeroOrOne
\- Format: int
\- Minimum Access Types: Get
\- Values: 'lev_conf' defined by OMA MLP[51].
**/\ /Ext**
The Ext node is an interior node where the vendor specific information can be
placed (vendor includes application vendor, device vendor etc.). Usually the
vendor extension is identified by vendor specific name under the ext node. The
tree structure under the vendor identified is not defined and can therefore
include one or more un-standardized sub-trees.
\- Occurrence: ZeroOrOne
\- Format: node
\- Minimum Access Types: Get
###### ## Annex G (normative): File format extensions for 3GP DASH support
# G.1 Introduction
This clause documents extensions to the ISO base media file format [11] for
the support of 3GPP DASH.
All extensions are documented in ISO base media file format [11].
# G.2 Void
# G.3 Void
# G.4 Void
# G.5 Void
# G.6 Void
###### ## Annex H (normative): MIME Type Registration for MPD
# H.1 MPD MIME Type
## H.1.1 Introduction
The MIME type of the MPD is registered and available at the registry at
http://www.iana.org/assignments/media-types/application. For formal
registration, refer to ISO/IEC 23009-1 [43], Annex C.
## H.1.2 Void
## H.1.3 Void
# H.2 MPD Delta MIME Type
## H.2.1 Introduction
This Annex provides the formal MIME type registration for the MPD Delta. The
MIME type is registered with IANA and available at
http://www.iana.org/assignments/media-types/application/dashdelta.
## H.2.2 MIME Type and Subtype
The MIME Type and Subtype are defined as follows:
\- Media Type Name: application
\- Subtype name: Standards Tree - dashdelta
\- Required parameters: none
\- Optional parameters: none
\- Encoding considerations: 8-bit text
\- Security considerations:
> A Media Presentation Description (MPD) Delta contains text changes to an
> MPD. An MPD Delta is used together with a first MPD to construct a second
> MPD. As such, any security considerations for an MPD (media type
> application/dash+xml) may also be applicable to an MPD Delta. A MIME type
> handler would not launch a service with only an MPD Delta.
>
> Further to this, as an MPD Delta performs editing operations on an MPD there
> are risks that deliberately malformed editing operations could cause
> security issues.
\- Interoperability considerations:
\- Published specification: 3GPP TS 26.247
\- Applications which use this media type:
> various including but not limited to On-Demand Streaming over the Internet,
> Live Streaming over the Internet, Internet Video, Internet Radio
\- Additional information:
1) 1. Magic number(s) : none
2) 2. File extension(s) : mpdd
3) 3. Macintosh file type code : none
4) 4. Object Identifiers: none
\- Person to contact for further information:
1) 1. Name : David Furbeck
2) 2. Email : dfurbeck\@blackberry.com
\- Intended usage : Common
\- Author/Change controller : 3GPP TSG SA WG4
###### ## Annex I (informative): Signalling of DASH AVP values for QoS
handling in the PCC
The PCC architecture is defined in TS 23.203 [31] and provides the Rx
reference point, which enables the application layer to authorize a specific
usage. In this architecture the DASH HTTP streaming server or any other
function in the HTTP streaming path (e.g. an HTTP proxy) can act as
Application Function and interact with the PCRF via the Rx reference point for
QoS control. It is assumed here that the AF has knowledge of the application
type and of the MPD.
The relevant AVPs are the ones enabling the PCRF to establish bearers with
correct characteristics for DASH users. The AVPs are defined in TS 29.214
[33]. The further PCRF mapping from AVP to IP QoS parameter mapping is defined
in TS 29.213 [32].
Table I.1: Example mapping of MPD parameters to Rx AVPs for 3GP-DASH (PSS)
+----------------------+----------------------+----------------------+ | AVP | Value | Comment | +----------------------+----------------------+----------------------+ | AF-Ap | \"DASH\" | Allows to signal the | | plication-Identifier | | DASH based | | | | application hence | | | | giving the | | | | opportunity to | | | | enforce application | | | | specific policies. | +----------------------+----------------------+----------------------+ | Max-Re | B1 | B1 = sum of all | | quested-Bandwidth-DL | | * | | | | _MPD_ _\@maxBandwidth | | (NOTE 1) | | (see clause 8.4.3.3) | | | | of all media | | | | components | | | | [simultaneously (not | | | | mutually | | | | exc | | | | lusive)]{.underline} | | | | selectable by the | | | | DASH client plus | | | | HTTP/TCP/IP overhead | | | | and TCP messages for | | | | flow control. | | | | | | | | If this attribute is | | | | not present then | | | | | | | | B1 = sum of | | | |__MPD_ _\@bandwidth | | | | attributes of all | | | | media components of | | | | the available media | | | | presentation | | | | corresponding to | | | | representations or | | | | subrepresentations | | | | with highest | | | | bandwidth | | | | [simulta | | | | neously]{.underline} | | | | selectable [(not | | | | mutually | | | | exc | | | | lusive)]{.underline} | | | | by the DASH client | | | | plus HTTP/TCP/IP | | | | overhead and TCP | | | | messages for flow | | | | control. | | | | | | | | Note: the mapping | | | | rules to derive the | | | | TCP message flow | | | | control bandwidth | | | | are FFS. | +----------------------+----------------------+----------------------+ | Max-Re | FFS | For Further Study. | | quested-Bandwidth-UL | | If included, should | | | | be greater than or | | (NOTE 1) | | equal to | | | | Min-Req | | | | uested-Bandwidth-UL. | +----------------------+----------------------+----------------------+ | Min-Re | B2 | B2 = sum of all | | quested-Bandwidth-DL | | * | | | |_ MPD**\@minBandwidth | | (NOTE 1) | | (see clause 8.4.3.3) | | | | of all media | | | | components | | | | simultaneously [(not | | | | mutually | | | | exc | | | | lusive)]{.underline} | | | | selectable by the | | | | DASH client plus | | | | HTTP/TCP/IP overhead | | | | and TCP messages for | | | | flow control. | | | | | | | | If this attribute is | | | | not present then | | | | | | | | B2 = sum of | | | |** MPD**\@bandwidth | | | | attributes of all | | | | media components of | | | | the available media | | | | presentation | | | | corresponding to | | | | representations or | | | | subrepresentations | | | | with lowest | | | | bandwidth | | | | simultaneously [(not | | | | mutually | | | | exc | | | | lusive)]{.underline} | | | | selectable by the | | | | DASH client plus | | | | HTTP/TCP/IP overhead | | | | and TCP messages for | | | | flow control. | | | | | | | | Note: the mapping | | | | rules to derive the | | | | TCP message flow | | | | control bandwidth | | | | are FFS. | +----------------------+----------------------+----------------------+ | Min-Re | FFS | For Further Study. | | quested-Bandwidth-UL | | Enough bitrate to | | | | cover TCP and HTTP | | (NOTE 1) | | GET requests. | +----------------------+----------------------+----------------------+ | Flow-Description AVP | IP addresses and | | | | ports | | | (NOTE 1) | | | +----------------------+----------------------+----------------------+
NOTE 1: AVPs provided within the Media-Component-Description AVP, except Flow-
Description AVP that is included within the Media-Sub-Component AVP. Omitted
AVPs are not relevant for this functionality.
###### ## Annex J (normative): MIME Type Registration for QoE Reports
# J.1 Introduction
This Annex provides the formal MIME-type registration for
\"application/3gpdash-qoe-report+xml\" that identifies XML documents following
the schema \"urn:3gpp:metadata:2011:HSD:receptionreport\" defined in clause
10.6.2. It is referenced from the registry at http://www.iana.org/.
# J.2 MIME Type and Subtype
The MIME Type and Subtype are defined as follows:
\- Media Type name: application
\- Subtype name: Standards Tree - 3gpdash-qoe-report+xml
\- Required parameters:
\- None
\- Optional parameters:
\- charset: If a charset parameter is provided its value must be
\"utf-8\".Encoding considerations: 8bit
\- The utf-8 charset is always used for this type.
\- Security considerations:
\- The general XML security issues are addressed in clause 10 of RFC 3023
[83].
\- The QoE report XML document instances contain information about what
content, services and files a particular UE has received. The information also
has privacy relevance as it reveals what a specific receiver, which usually
can be connected to a specific user, has received.
\- This media type only contains quality of experience data; there is no
defined executable content.
\- XML from other vocabularies is allowed in this media type. Such material
will have its own security considerations.
\- If operating in an insecure environment and required by the content/service
provider, elements and attributes of the report may be encrypted to protect
their confidentiality.
\- If operating in an insecure environment and required by the content/service
provider, digital signing and verification procedures may be used to protect
data origin authenticity and integrity of the report.
\- Thus to prevent manipulation of that information it would need to be
integrity protected.
\- Interoperability considerations:
\- None
\- Published specification:
\- 3GPP TS 26.247
\- Applications which use this media type:
\- 3GPP DASH based applications
\- 3GPP progressive download applications
\- Additional information:
\- None
\- Person & email address to contact for further information:
\- Ozgur Oyman (ozgur.oyman\@intel.com)\ 3GPP TSG SA WG4
\- Intended usage: COMMON
\- Restrictions on usage:
\- None
\- Author:
\- 3GPP TSG SA WG4
\- Change controller:
\- 3GPP TSG SA WG4
###### ## Annex K (normative): ITU-T P.1203 Audio/Video MOS Estimation
# K.1 Introduction
ITU-T P.1203 [49] defines an objective assessment model for Progressive
Download and DASH streaming. This model predicts audio only, video only and
audio-video MOS on a 5-point Absolute Category Rating scale (see ITU-T P.910
[50]) for monitoring of quality for operation and maintenance purposes. The
model can execute in several modes, where Mode 0 is suitable for large-scale
network supervision. For more details on this model, please refer to ITU-T
P.1203 [49].
# K.2 Calculation
The PSS server should support MOS estimation according to ITU-T P.1203 [49]
Mode 0. To enable the MOS estimation, the QoE reporting should include the
following metrics in either MPD@_metrics_ or OMA DM QoE Management Object
'_metrics_ ':
\- Initial Playout Delay (clause 10.2.5)
\- Play List (clause 10.2.7)
\- MPD Information, unless already available by other means (clause 10.2.8)
\- Device Information (clause 10.2.10)
The attribute **MPD**.**Metrics**.**Range** \@duration or the OMA DM QoE
Management Object '_duration_ ' shall be set to a value between 1 and 5
minutes.
The value of **MPD.Metrics.Reporting** \@reportinginterval or OMA DM QoE
Management Object '_Interval_ ' shall be larger or equal than the value of
**MPD**.**Metrics**.**Range** \@duration or OMA DM QoE Management Object
'_duration_ '.
The DASH client reports collected metrics using quality metric reporting
protocol defined in clause 10.6.
The mapping between QoE metrics and input to ITU-T P.1203 [49] Mode 0 is
provided in table K-1 to K-4 below.
Table K-1 mapping between QoE metrics and input in ITU-T P.1203 mode 0 model
for video stream
+-------------+-------------+-----------+-------------+-------------+ | Video | QoE metrics | Remark | | | | Metrics | defined in | | | | | needed for | clause 10.2 | | | | | ITU-T | | | | | | P | | | | | | .1203[49] | | | | | | model | | | | | +-------------+-------------+-----------+-------------+-------------+ | Description | Value | Metric | Description | | +-------------+-------------+-----------+-------------+-------------+ | Target | Bit-rate in | Mpdinfo | Provides | Target | | Video | kbps. | | the MPD | Video | | bit-rate | | | information | bit-rate | | | | | for the | has been | | | | | rep | supported | | | | | resentation | by | | | | | or | \@bandwidth | | | | | subrep | attribute. | | | | | resentation | | | | | | identified | Video | | | | | by | frame-rate | | | | | repre | and Video | | | | | sentationid | codec and | | | | | and | profile | | | | | s | have been | | | | | ubreplevel, | supported | | | | | if present. | by @ codec | | | | | | attribute. | | | | | Related | | | | | | attributes: | Video | | | | | | encoding | | | | | \ | resolution | | | | | @bandwidth, | has been | | | | | \@width, | supported | | | | | \@height, | by \@width | | | | | and | and | | | | | \@codecs. | \@height | | | | | | attributes. | | | | | Note: codec | | | | | | attribute | | | | | | includes | | | | | | video codec | | | | | | profile | | | | | | information | | | | | | and video | | | | | | frame rate | | | | | | information | | +-------------+-------------+-----------+-------------+-------------+ | Video | Frame rate | | | | | frame-rate | in frames | | | | | | per second. | | | | +-------------+-------------+-----------+-------------+-------------+ | Segment | Duration in | | | | | duration | seconds | | | | +-------------+-------------+-----------+-------------+-------------+ | Video | Number of | | | | | encoding | pixels | | | | | resolution | (WxH) in | | | | | | transmitted | | | | | | video | | | | +-------------+-------------+-----------+-------------+-------------+ | Video codec | One of: | | | | | and profile | H26 | | | | | | 4-baseline, | | | | | | H264-high, | | | | | | H264-main | | | | +-------------+-------------+-----------+-------------+-------------+ | | | Play List | Provides | Note that | | | | | information | the actual | | | | | on when and | timing of | | | | | how long | the | | | | | different | required | | | | | repr | input for | | | | | esentations | the P.1203 | | | | | or | quality | | | | | subrepr | model may | | | | | esentations | be | | | | | have been | influenced | | | | | used during | by actions | | | | | the | such as | | | | | session. | play/pause. | +-------------+-------------+-----------+-------------+-------------+
Table K-2 mapping between QoE metrics and input in ITU-T P.1203 mode 0 model
for audio stream
+-------------+-------------+-----------+-------------+-------------+ | Audio | QoE metrics | Remark | | | | Metrics | defined in | | | | | needed for | clause 10.2 | | | | | ITU-T | | | | | | P.1203 | | | | | | model | | | | | +-------------+-------------+-----------+-------------+-------------+ | Description | Value | Metric | Description | | +-------------+-------------+-----------+-------------+-------------+ | Target | Bit-rate in | Mpdinfo | Provides | Target | | Audio | kbps. | | the MPD | Audio | | bit-rate | | | information | bit-rate | | | | | for the | has been | | | | | rep | supported | | | | | resentation | by | | | | | or | \@bandwidth | | | | | subrep | attribute. | | | | | resentation | | | | | | identified | Audio | | | | | by | codec, | | | | | repre | Audio | | | | | sentationid | sampling | | | | | and | frequency | | | | | s | and Number | | | | | ubreplevel, | of audio | | | | | if present. | channels | | | | | | have been | | | | | Related | supported | | | | | attributes: | by @ codecs | | | | | | attribute. | | | | | \ | | | | | | @bandwidth, | | | | | | and | | | | | | \@codecs. | | | | | | | | | | | | Note: codec | | | | | | attribute | | | | | | includes | | | | | | audio codec | | | | | | profile | | | | | | i | | | | | | nformation, | | | | | | audio | | | | | | sampling | | | | | | frequency | | | | | | and Number | | | | | | of audio | | | | | | channels | | | | | | information | | +-------------+-------------+-----------+-------------+-------------+ | Segment | Duration in | | | | | duration | seconds | | | | +-------------+-------------+-----------+-------------+-------------+ | Audio codec | One of: | | | | | | AAC-LC, | | | | | | AAC-HEv1, | | | | | | AAC-HEv2, | | | | | | AC3 | | | | +-------------+-------------+-----------+-------------+-------------+ | Audio | In Hz | | | | | sampling | | | | | | frequency | | | | | +-------------+-------------+-----------+-------------+-------------+ | Number of | 2 | | | | | audio | | | | | | channels | | | | | +-------------+-------------+-----------+-------------+-------------+ | | | Play List | Provides | Note that | | | | | information | the actual | | | | | on when and | timing of | | | | | how long | the | | | | | different | required | | | | | repr | input for | | | | | esentations | the P.1203 | | | | | or | quality | | | | | subrepr | model may | | | | | esentations | be | | | | | have been | influenced | | | | | used during | by actions | | | | | the | such as | | | | | session. | play/pause. | +-------------+-------------+-----------+-------------+-------------+
Table K-3 mapping between QoE metrics and input in ITU-T P.1203 mode 0 model
for stalling
+----------------+----------------+-----------+----------------+----+ | Metrics needed | QoE metrics | Remark | | | | for ITU-T | defined in | | | | | P.1203 model | clause 10.2 | | | | +----------------+----------------+-----------+----------------+----+ | Description | Value | Metric | Description | | +----------------+----------------+-----------+----------------+----+ | Buffering | The start time | Play List | The start time | - | | event start | of the | | of a | | | | buff | | buff | | | | ering/stalling | | ering/stalling | | | | event in | | event is equal | | | | seconds | | to the end | | | | relative to | | time of a | | | | the start of | | trace entry | | | | the original | | with the stop | | | | video clip, | | reason equal | | | | expressed in | | to | | | | media time | | \"rebuffering" | | | | (not wall | | | | | | clock time) | | | | | | | | | | | | Note: This is | | | | | | 0 for initial | | | | | | buffering. | | | | +----------------+----------------+-----------+----------------+----+ | Event duration | The duration | Play List | The duration | - | | | of the | | of each buffer | | | | buff | | event is | | | | ering/stalling | | calculated | | | | event in | | from the | | | | seconds. | | PlayList | | | | | | according to | | | | | | the example | | | | | | described in | | | | | | the Play List | | | | | | metric clause. | | +----------------+----------------+-----------+----------------+----+
Table K-4 mapping between QoE metrics and input in ITU-T P.1203 mode 0 model
for device information
* * *
Metrics needed for ITU-T P.1203 model QoE metrics defined in clause 10.2
Remark  
Description Value Metric Description  
The resolution of the image displayed to the user Number of pixels (WxH) in
displayed video Device Information videoWidth and videoHeight . The device
type on which the media is played pc or mobile Device Information screenWidth
x pixelWidth, screenHeight x pixelHeight P.1203 formally classifies devices up
to 10\" (diagonal) as mobiles, but to cover most handheld devices (phones and
tablets) devices up to 12\" could be classified as mobiles The size of the
video shown WxH in mm Device Information videoWidth x pixelWidth, videoHeight
x pixelHeight
* * *
###### ## Annex L (normative): QoE Measurement Collection Functionalities
# L.1 Configuration and reporting
As an alternative to configuration via MPD or OMA-DM, the QoE configuration
can optionally be specified by the QoE Measurement Collection (QMC)
functionality. In this case the QoE configuration is received via specific RRC
[53] messages for UMTS and RRC [59] messages for LTE over the control plane,
and the QoE reporting is also sent back via RRC messages over the control
plane.
If QMC is supported, the UE shall support the following QMC functionalities:
\- QoE Configuration: The QoE configuration will be delivered via RRC to the
UE as a container according to \"Application Layer Measurement Configuration\"
(see [53]) for UMTS, and \"measConfigAppLayer\" (see [59]) for LTE. The
container is an octet string with a maximum length of 1000 bytes, with gzip-
encoded data (see [18]) stored in network byte order. The container shall be
uncompressed, and is then expected to conform to XML-formatted QoE
configuration data according to clause L.2 in the current specification. This
QoE Configuration shall be forwarded to the DASH client. The interface towards
the RRC signalling is handled by the AT command +CAPPLEVMC [61].
\- QoE Metrics: QoE Metrics from the DASH client shall be XML-formatted
according to clause 10.6 in the current specification. The XML data shall be
compressed with gzip (see [18]) and stored in network byte order into an octet
string container with a maximum length of 8000 bytes. The container shall be
delivered via RRC to the RNC according to \"Application Layer Measurement
Reporting\" (see [53]) for UMTS, and to the eNB according to
\"measReportAppLayer\" (see [59]) for LTE. The behaviour if the compressed
data is larger than 8000 bytes is unspecified in this version of the
specification. The interface towards the RRC signalling is handled by the AT
command +CAPPLEVMR [61].
\- The UE shall also set the QMC capability \"QoE Measurement Collection for
streaming services\" (see [53]) to TRUE for UMTS, and include the QMC
capability \"qoe-MeasReport\" (see [59]) for LTE.
\- When the QoE configuration is to be released, an unsolicited result code,
associated with the AT command +CAPPLEVMC [61] and containing the parameter
\ set to \"1\" shall be sent to the DASH client as
notification of a discard request. Then the DASH client shall stop collecting
quality metrics and discard any already collected information [63].
The exact implementation is not specified here, but example signalling
diagrams for UMTS and LTE below show the QMC functionality with a hypothetical
\"QMC Handler\" entity.
{width="4.773611111111111in" height="4.054861111111111in"}
Figure L-1: Example signalling diagram for UMTS
Figure L-2: Example signalling diagram for LTE
Note that the QMC Handler is only shown here as one possible implementation,
and it need not be implemented as such. The corresponding QMC functionality
could be built into the DASH client or into other UE entities. In this version
of the specification the detailed implementation of the above functionalities
is left to the UE vendor.
# L.2 XML configuration
When QoE reporting is configured via the QMC functionality, the configuration
is done according to the XML schema below. The interpretation of the different
elements and attributes are the same as described in clauses 10.4, 10.5 and
Annex F in the current specification.
Note that if geographical filtering is handled on the network side (i.e. QoE
reporting is turned on/off by the network depending on the UE location), no
LocationFilter should be specified in the QoE Configuration, as this would
mean two consecutive filterings.
Also note that the optional attribute qoeReferenceId is a reference set by the
network side (see [63]), which is not directly used by the client. However, if
this attribute is defined, it shall be copied into each QoE report, to
facilitate network-side correlation.
\
\
\
\
\\ \
\
\\ \\
\\ \
\
\
\\ \\ \
\\ \\ \\ \\ \\ \\ \\ \
\\ \\ \
\
\\ \
\
\
\\ \\ \
\\ \\ \
\
\
\\ \
\ see [OMA MLP] \
\
\
\
\
\
\
\
\
\\ \
\ see [OMA MLP] \
\
\
\
\
\
\
\
\
\\ \\ \\ \
\\
\\
\
\
###### ## Annex M (informative): Registrations Information
# M.1 3GPP Registered URIs
The clause documents the registered URIs in this specification following the
process in http://www.3gpp.org/specifications-groups/34-uniform-resource-name-
urn-list
Table A-1 lists all registered URN values as well as
\- a brief description of its functionality;
\- a reference to the specification or other publicly available document (if
any) containing the definition;
\- the name and email address of the person making the application; and
\- any supplementary information considered necessary to support the
application.
> Table M-1: 3GPP Registered URNs
+---------------+---------------+-----------+---------------+---------+ | URN | Description | Reference | Contact | Remarks | +---------------+---------------+-----------+---------------+---------+ | urn: | DASH profile | TS 26.247 | Thomas | none | | 3GPP:ns:PSS:\ | identifier | | Stockhammer | | | Ada | for 3GPP | | | | | ptiveHTTPStre | Adaptive HTTP | | tsto\@qti | | | amingMPD:2009 | Streaming | | .qualcomm.com | | | | (Release-9 | | | | | | AHS) | | | | | | | | | | | | clause 7.3.2 | | | | +---------------+---------------+-----------+---------------+---------+ | u | DASH profile | TS 26.247 | Thomas | none | | rn:3GPP:PSS:p | identifier | | Stockhammer | | | rofile:DASH10 | for 3GP-DASH | | | | | | Release-10 | | tsto\@qti | | | | Profile | | .qualcomm.com | | | | | | | | | | clause | | | | | | 7.3.3.1 | | | | +---------------+---------------+-----------+---------------+---------+ | urn:3G | DASH profile | TS 26.247 | Thomas | none | | PP:PSS:profil | identifier | | Stockhammer | | | e:DASH11:MS3D | for 3GP-DASH | | | | | | Release 11 | | tsto\@qti | | | | multiview | | .qualcomm.com | | | | stereoscopic | | | | | | 3D video | | | | | | profile | | | | | | | | | | | | clause 7.3.4 | | | | +---------------+---------------+-----------+---------------+---------+ | urn: | DASH profile | TS 26.247 | Thomas | none | | 3GPP:PSS:iop: | identifier | | Stockhammer | | | DASH-enhanced | for 3GP-DASH | | | | | | Enhanced | | tsto\@qti | | | | Int | | .qualcomm.com | | | | eroperability | | | | | | Point | | | | | | | | | | | | clause 7.3.9 | | | | +---------------+---------------+-----------+---------------+---------+ | urn:3GPP: | DASH profile | TS 26.247 | Thomas | none | | 5GMS:iop:DASH | identifier | | Stockhammer | | | | for 3GP-DASH | | | | | | Enhanced | | tsto\@qti | | | | Int | | .qualcomm.com | | | | eroperability | | | | | | Point | | | | | | | | | | | | clause 7.3.11 | | | | +---------------+---------------+-----------+---------------+---------+ | urn | DASH profile | TS 26.247 | Thomas | none | | :3GPP:ns:DASH | identifier | | Stockhammer | | | :MPD-ext:2011 | for 3GP-DASH | | | | | | Enhanced | | tsto\@qti | | | | Int | | .qualcomm.com | | | | eroperability | | | | | | Point | | | | | | | | | | | | Clause 8.2.2 | | | | +---------------+---------------+-----------+---------------+---------+ | urn:3GPP:ns: | quality | TS 26.247 | Thomas | none | | PSS:DASH:QM10 | reporting | | Stockhammer | | | | scheme | | | | | | identifier | | tsto\@qti | | | | for 3GPP DASH | | .qualcomm.com | | | | | | | | | | clause 10.5 | | | | +---------------+---------------+-----------+---------------+---------+ | urn:3gp | SAND mode | TS 26.247 | Thomas | none | | p:dash:sand:\ | identifier | | Stockhammer | | | messa | for 'Proxy | | | | | geset:pc:2016 | Caching' | | tsto\@qti | | | | | | .qualcomm.com | | | | Clause 13.4 | | | | +---------------+---------------+-----------+---------------+---------+ | urn:3gp | SAND mode | TS 26.247 | Thomas | none | | p:dash:sand:\ | identifier | | Stockhammer | | | messa | for 'Network | | | | | geset:na:2016 | Assistance' | | tsto\@qti | | | | | | .qualcomm.com | | | | Clause 13.4 | | | | +---------------+---------------+-----------+---------------+---------+ | urn:3gp | SAND mode | TS 26.247 | Thomas | none | | p:dash:sand:\ | identifier | | Stockhammer | | | messag | for | | | | | eset:qoe:2016 | 'Consistent | | tsto\@qti | | | | QoE/QoS' | | .qualcomm.com | | | | | | | | | | Clause 13.4 | | | | +---------------+---------------+-----------+---------------+---------+ | urn:3gp | SAND mode | TS 26.247 | Thomas | none | | p:dash:sand:\ | identifier | | Stockhammer | | | messagese | for 'SAND for | | | | | t:sand4m:2018 | Multi-Network | | tsto\@qti | | | | Access' | | .qualcomm.com | | | | | | | | | | Clause 13.4 | | | | +---------------+---------------+-----------+---------------+---------+ | u | SAND mode | TS 26.247 | Thomas | none | | rn:3gpp:dash: | identifier | | Stockhammer | | | schema | for 'SAND | | | | | :sandmessagee | Message | | tsto\@qti | | | xtension:2017 | Extensions' | | .qualcomm.com | | | | | | | | | | Clause 13.6 | | | | +---------------+---------------+-----------+---------------+---------+ | urn:3GPP:ns: | Interactivity | TS 26.247 | Thomas | none | | PSS:DASH:IU15 | Usage | | Stockhammer | | | | reporting | | | | | | scheme | | tsto\@qti | | | | identifier | | .qualcomm.com | | | | for 3GPP DASH | | | | | | | | | | | | clause 10.5 | | | | +---------------+---------------+-----------+---------------+---------+ | ur | 3D Video | TS 26.247 | Thomas | none | | n:3GPP:dash:\ | Disparity | | Stockhammer | | | 3dVideoDispar | Range | | | | | ityRange:2013 | Descriptor | | tsto\@qti | | | | Scheme | | .qualcomm.com | | | | Identifier | | | | | | | | | | | | Clause C.4 | | | | +---------------+---------------+-----------+---------------+---------+ | ur | 3D Video | TS 26.247 | Thomas | none | | n:3GPP:dash:\ | Disparity | | Stockhammer | | | 3dVi | Range | | | | | deoDisplayInf | Descriptor | | tsto\@qti | | | ormation:2013 | Scheme | | .qualcomm.com | | | | Identifier | | | | | | | | | | | | Clause C.5 | | | | +---------------+---------------+-----------+---------------+---------+ | urn:3gpp:me | Reception | TS 26.247 | Thomas | none | | tadata:2011:\ | reporting | | Stockhammer | | | HSD:re | scheme | | | | | ceptionreport | identifier | | tsto\@qti | | | | for 3GPP DASH | | .qualcomm.com | | | | | | | | | | clause J.1 | | | | +---------------+---------------+-----------+---------------+---------+
#