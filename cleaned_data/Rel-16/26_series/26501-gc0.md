# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document specifies the 5G Media Streaming (5GMS) architecture. The
5GMS supported services include MNO and third-party Downlink Media Streaming
Services, and MNO and third-party Uplink Media Streaming Services. The 5GMS
architecture supports related network and UE functions and APIs, backwards
compatible functions for EUTRAN deployments (with and without MBMS) and 5G
specific features.
NOTE: Support of 5G Media Streaming over MBMS with 5GC is not considered in
the current version of the present document.
The 5GMS architecture is functionally divided into independent components
enabling different deployments with various degrees of integration between 5G
MNOs and Content Providers. It is specified as a set of extensions to TS
23.501 \"System Architecture for the 5G System\".
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non‑specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.501: \"System architecture for the 5G System (5GS)\".
[3] 3GPP TS 23.502: \"Procedures for the 5G System (5GS)\".
[4] 3GPP TS 23.503: \"Policy and charging control framework for the 5G System
(5GS); Stage 2\".
[5] 3GPP TS 26.238: \"Uplink streaming\".
[6] 3GPP TS 26.307: \"Presentation layer for 3GPP services\".
[7] 3GPP TS 26.247: \"Transparent end-to-end Packet-switched Streaming Service
(PSS); Progressive Download and Dynamic Adaptive Streaming over HTTP (3GP-
DASH)\".
[8] 3GPP TS 26.234: \"Transparent end-to-end Packet-switched Streaming Service
(PSS); Protocols and codecs\".
[9] 3GPP TS 23.003: \"Technical Specification Group Core Network and
Terminals; Numbering, addressing and identification\".
[10] 3GPP TS 28.530: \"Management and orchestration; Concepts, use cases and
requirements\".
[11] 3GPP TS 28.531: \"Management and orchestration; Provisioning\".
[12] 3GPP TS 28.541: \"Management and orchestration; 5G Network Resource Model
(NRM); Stage 2 and stage 3\".
[13] 3GPP TS 23.222: \"Common API Framework for 3GPP Northbound APIs\".
[14] IETF RFC 1034: \"Domain names -- concepts and facilities\".
# 3 Definition of terms, symbols and abbreviations
## 3.1 Terms
For the purposes of the present document, the terms given in TR 21.905 [1] and
the following apply. A term defined in the present document takes precedence
over the definition of the same term, if any, in TR 21.905 [1].
**5GMS System: An assembly of Application Functions, Application Servers and
interfaces from the 5G Media Streaming architecture that support either
downlink media streaming services or uplink media streaming services, or
both.**
NOTE 1: The components of a 5GMS System may be provided by an MNO as part of a
5GS and/or by a 5GMS Application Provider.
**5GMS Application Provider:** A party that interacts with functions of the
5GMS System and supplies a 5GMS-Aware Application that interacts with
functions of the 5GMS System.
**5GMS-Aware Application: Application in the UE, provided by the 5GMS
Application Provider, that contains the service logic of the 5GMS application
service, and interacts with other 5GMS Client and Network functions via the
interfaces and APIs defined in the 5GMS architecture.**
NOTE 2: **Functionality of the 5GMS-Aware Application is outside the scope of
this specification**.
NOTE 3: A 5GMS-Aware Application associated with the delivery of either a
downlink or uplink related 5GMS service is referred to as a 5GMSd-Aware
Application or a 5GMSu-Aware Application, respectively.
**5GMS Client: A UE function that is either a 5GMSd Client or a 5GMSu Client,
or both.**
**5G Media Streaming Client for downlink (5GMSd Client):** UE function that
includes at least a 5G Media Streaming Player and a Media Session Handler for
downlink streaming and that may be accessed through well-defined
interfaces/APIs.
**5G Media Streaming Client for uplink (5GMSu Client):** **Originator of 5GMSu
service that includes at least a Media Streamer and a Media Session Handler
for uplink streaming and that may be accessed through well-defined
interfaces/APIs.**
**5GMSu Media Streamer: UE function that enables uplink delivery of streaming
media content to an Application Server function of the 5GMS Application
Provider, and which interacts with both the 5GMSu-Aware Application for media
capture and subsequent streaming, and the Media Session Handler for media
session control.**
NOTE 4: The 5GMSu Media Streamer receives a Media Streamer Entry to initiate
an uplink streaming session.
NOTE 5: The 5GMSu Media Streamer captures the media on the provided input
devices. The 5GMSu Media Streamer exposes some basic controls such as capture,
pause, and stop to the 5GMSu-Aware Application.
**Dynamic policy:** A Dynamic PCC Rule (c.f. TS 23.503 [4]) for an uplink or
downlink application flow during a media session.
**Egest Session** : An uplink media streaming session from the 5GMSu AS
towards the 5GMSu Application Provider.
**Ingest Session:** A session to upload the media content into a 5GMSd AS.
**Policy Template:** A collection of (semi-static) PCF/NEF API parameters
which are specific to the 5GMS Application Provider and also the resulting PCC
Rule.
**Policy Template Id** : Identifies the desired policy template, which is used
by 5GMSd AF to select the appropriate PCF/NEF API towards the 5G System so
that the PCF can compile the desired PCC Rule.
**Media Entry Point:** A Media Player Entry for downlink media streaming or a
Media Streamer Entry for uplink media streaming intended to be consumed by a
5GMS Media Stream Handler.
**Media Player Entry:** A document or a pointer to a document that defines a
downlink media streaming presentation e.g. MPD for DASH content or URL to a
video clip file intended to be consumed by a 5GMSd Media Player.
**Media Session Handler:** UE function that communicates with the 5GMS AF in
order to establish and control the delivery of a streaming media session in
the downlink or uplink direction, and which also exposes APIs to the 5GMS-
Aware Application and to the Media Player (for downlink streaming) or the
Media Streamer (for uplink streaming).
**Media Streamer Entry:** A pointer (e.g. in the form of a URL) that defines
an entry point of an uplink media streaming session intended to be consumed by
a 5GMSu Media Streamer.
**presentation entry:** A document or a pointer to a document that defines an
application presentation e.g. an HTML5 document as defined in e.g. TS 26.307
[6].
**Provisioning Session: A data structure supplied at interface M1 by a 5GMS
Application Provider that configures the 5GMS features relevant to a set of
5GMS-Aware Applications.**
**5GMSd Media Player:** UE function that enables playback and rendering of a
media presentation based on a Media Player Entry and exposing some basic
controls such as play, pause, seek, stop to the 5GMSd-Aware Application.
NOTE 6: A 5GMSd Media Player is expected to include a Media Access Client,
Media Decoders, Media rendering/presentation, and possibly also a DRM Client a
Consumption Measurement and Logging Client and a Metrics Measurement and
Logging Client. The 5GMSd Media Player\'s Media Access Client receives a Media
Player Entry. The 5GMSd Media Player renders the media on the provided output
devices, such as a display in case of video.
NOTE 7: The 5GMSd Media Player is functionally similar to the combination of a
TS 26.247 [7] 3GP-DASH client and a TS 26.234 [8] PSS media decoder and
renderer.
**Service Access Information** : Set of parameters and addresses that are
needed by a 5GMS Client to activate the reception of a downlink media
streaming session or the transmission on an uplink media streaming session,
perform dynamic policy invocation, consumption reporting and/or metrics
reporting, and request AF-based network assistance.
**Service and Content Discovery: Functionality and procedures provided by a
5GMSd Application Provider to a 5GMS-Aware Application that enables the end
user to discover the available streaming service and content offerings and
select a specific service or content item for access.**
NOTE 8: The Service and Content Discovery functionality and procedures are
outside the scope of this specification.
**Service Announcement** : Procedures conducted between the 5GMS-Aware
Application and the 5GMS Application Provider such that the 5GMS-Aware
Application is able to obtain 5GMS Service Access Information, either directly
or in the form of a reference to that information.
**Service Data Flow: As defined in TS 23.503 [4] ("** An aggregate set of
packet flows carried through the UPF that matches a service data flow
template").
**Service Data Flow Description:** A set of parameters and/or parameter ranges
used by the 5GMS AF to create a Service Data Flow Template.
**third party player:** Part of an application that uses APIs to exercise
selected 5GMSd functions to play back media content.
NOTE 9: Such APIs are for example defined in TS 26.307 [6] when using the
Media Source Extensions for media playback. This type of player is downloaded
by or built into an application, or it is downloaded with the Presentation
Entry (e.g. as a JavaScript library).
**third party uplink streamer:** Part of an application that uses APIs to
exercise selected 5GMSu functions to capture and stream media content.
NOTE 10: This type of streamer is typically implemented as downloadable
software.
## 3.2 Symbols
Void.
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
5GC 5G Core Network
5GMS 5G Media Streaming
5GMSd 5G Media Streaming downlink
5GMSu 5G Media Streaming uplink
5GS 5G Systems
AF Application Function
ABR Adaptive Bit Rate
AMF Access and Mobility Function
API Application Programming Interface
App Application
AS Application Server
CAPIF Common API Framework
CDN Content Delivery Network
DASH Dynamic and Adaptive Streaming over HTTP
DN Data Network
DNAI Data Network Application Identifier
DNN Data Network Name
DRM Digital Rights Management
EPC Evolved Packet Core
EPS Evolved Packet System
EUTRAN Evolved Universal Terrestrial Radio Access Network
FLUS Framework for Live Uplink Streaming
FQDN Fully-Qualified Domain Name
GPU Graphics Processing Unit
GSM Global System for Mobile communication
HPLMN Home Public Land Mobile Network
HTTP HyperText Transfer Protocol
HTTPS HyperText Transfer Protocol Secure
LTE Long-Term Evolution
MBMS Multimedia Broadcast Multicast System
MNO Mobile Network Operator
MPD Media Presentation Description
MSISDN Mobile Station International Subscriber Directory Number
NA Network Assistance
NEF Network Exposure Function
NR New Radio
NSMF Network Slice Management Function
NSSAI Network Slice Selection Assistance Information
NSSP Network Slice Selection Policy
OAM Operations, Administration and Maintenance
OTT Over-The-Top
PCC Policy and Charging Control
PCF Policy and Charging Function
PDU Packet Data Unit
PSS Packet-switched Streaming Service
RAN Radio Access Network
SBA Service based Architecture
SLA Service Level Agreement
TCP Transmission Control Protocol
UPF User Plane Function
URL Unique Resource Identifier
URSP UE Route Selection Policy
# 4 Media Streaming architecture
## 4.0 Media Streaming features (informative)
### 4.0.1 Introduction
This clause defines a set of high-level features for supporting enhanced media
streaming in the 5G System. The functional architecture of this 5G Media
Streaming (5GMS) System is defined in clause 4.1 and is further specialised
for downlink media streaming (clause 4.2) and uplink media streaming (clause
4.3). Procedures for downlink media streaming are defined in clause 5 and
those for uplink media streaming in clause 6.
In the context of the present document, streaming is defined as the delivery
of time-continuous media as the predominant media. Streaming points to the
fact that the media is predominantly sent only in a single direction and
consumed as it is received. Additionally, the media content may be streamed as
it is produced, referred to as live streaming. If content is streamed that is
already produced, it is referred to as on-demand streaming.
References to Dynamic Adaptive Streaming over HTTP (MPEG‑DASH) [29] in the
present document apply equally to HTTP Live Streaming (HLS) [28] except where
noted otherwise. The term _Media Entry Point_ is used to refer generically to
an MPEG-DASH Media Presentation Description (MPD) but may be taken to apply
equally to alternative media presentation description formats such as an HLS
master playlist, unless noted otherwise.
Table 4.0.1‑1 lists the principal features of the 5GMS architecture along with
cross-references to relevant clauses defining its functions and procedures.
Table 4.0.1‑1: 5G Media Streaming feature index
Feature Feature description clause Procedure definition clause(s)
* * *
                                                       Downlink media streaming         Uplink media streaming
Content hosting 4.0.2 5.4 Not applicable Content publishing 4.0.3 Not
applicable Not defined Content preparation 4.0.4 Not defined Not defined
Network assistance 4.0.5 5.9 6.5, 6.7 Dynamic policies 4.0.6 5.8 Not defined
Remote control 4.0.7 Not applicable 6.6 Consumption reporting 4.0.8 5.6 Not
applicable QoE metrics reporting 4.0.9 5.5 Not applicable
The following clauses introduce these features in terms of network-side
components (\"5GMS network services\") and a UE-side client component referred
to variously as the _5GMSd Client_ (for downlink media streaming), _5GMSu
Client_ (for uplink media streaming), or simply _5GMS Client_ (in the case of
features applicable to either downlink media streaming or uplink media
streaming).
### 4.0.2 Content hosting
The content hosting feature is applicable to downlink media streaming only. It
provides a service equivalent to a Content Delivery Network (CDN) deployed
inside or outside the Trusted DN. High-level procedures for this feature are
defined in clause 5.4.
Figure 4.0.2‑1: High-level arrangement for content hosting feature
When a 5GMSd Application Provider has provisioned the content hosting feature
for downlink media streaming:
1\. Media content is either retrieved by a network-side component of the 5GMS
System from a media origin at the 5GMSd Application Provider (pull-based
content ingest) or else it is published to a network-side component of the the
5GMS System by the 5GMSd Application Provider (push-based content ingest).
2\. The network-side component of the 5GMS System may cache this content for a
configurable period of time.
3\. Network-side components of the 5GMS System may manipulate the content
according to rules provisioned in Content Preparation Templates (see clause
4.0.4).
4\. The 5GMSd Client in the UE subsequently retrieves the (possibly
manipulated) media content as part of a downlink media streaming session. The
security of the content served to the 5GMSd Client by network-side components
of the 5GMS System may be guaranteed by a provisioned Server Certificate.
### 4.0.3 Content publishing
The content publishing feature is applicable to uplink media streaming only.
High-level procedures for this feature are for future study.
Figure 4.0.3‑1: High-level arrangement for content publishing feature
When a 5GMSu Application Provider has provisioned the content publishing
feature for uplink media streaming:
1\. Media content is published by the 5GMSu Client in the UE to a network-side
component of the 5GMS System as part of an uplink media streaming session. The
security of the content published to the 5GMS System may be guaranteed by a
provisioned Server Certificate.
2\. The network-side component of the 5GMS System may cache this content for a
configurable period of time.
3\. Network-side components of the 5GMS System may manipulate the content
according to rules provisioned in Content Preparation Templaes (see clause
4.0.4).
4\. A network-side component of the 5GMS System makes the media content
available for retrieval by the 5GMSu Application Provider (pull-based content
egest) or publishes it directly to the 5GMSu Application Provider (push-based
content egest).
### 4.0.4 Content preparation
The content preparation feature is applicable to both downlink media streaming
(where is is provisioned as part of the content hosting feature introduced in
clause 4.0.2) and uplink media streaming (where is is provisioned as part of
the content publishing feature introduced in clause 4.0.3). The content
preparation feature enables a 5GMS Application Provider to specify content
manipulation by network-side components of the 5GMS System according to
provisioned Content Preparation Templates.
When a 5GMSd Application Provider has provisioned the content preparation
feature for downlink media streaming:
1\. Network-side components of the 5GMS System may manipulate ingested media
content and may cache the manipulated content prior to serving it to the 5GMSd
Client in the UE.
When a 5GMSu Application Provider has provisioned the content preparation
feature for uplink media streaming:
1\. Network-side components of the 5GMS System may manipulate the media
content ingested from the 5GMSu Client in the UE and may cache the manipulated
content prior to egesting it to the 5GMSu Application Provider.
### 4.0.5 Network assistance
The network assistance feature is applicable to both downlink media streaming
and uplink media streaming. It enables the 5GMS Client in the UE to
interrogate or manipulate the network Quality of Service for an ongoing media
streaming session.
High-level procedures for this feature are defined in clause 5.9 (downlink
media streaming) and in clauses 6.1, 6.5 and 6.7 (uplink media streaming). The
network assistance feature is not explicitly provisioned by the 5GMS
Application Provider. It is either available for a particular media streaming
session or not, depending on system pre-configuration and/or policy.
Two mechanisms for obtaining network assistance are defined in the present
document: one based on interactions with the PCF via network-based components
of the 5GMS System (_AF-based network assistance_), the other based on ANBR
signalling interactions between the UE modem and the RAN (_ANBR-based network
assistance_).
Figure 4.0.5‑1: High-level arrangement for network assistance feature
The following AF-based network assistance sub-features are defined in this
release:
1\. _Bit rate recommendation (or throughput estimation)._ The 5GMS Client
requests an estimate from a network-side component of the 5GMS System of the
bit rate that can currently be offered by a media streaming session. The
network-side component interrogates the PCF on behalf of the 5GMS Client to
obtain this information about the PDU session corresponding to the media
streaming session.
The 5GMS Client uses this information to adjust its own streaming bit rate to
fit within the Quality of Service (QoS) envelope that the network is able to
offer, for example by switching to a different representation listed in its
Media Entry Point, or by adjusting the encoding bit rate for uplink streaming
to fits within this bit rate budget. The media streaming Quality of Experience
(QoE) is more stable and consistent as a consequence.
2\. _Delivery boost._ The 5GMS Client speculatively requests a temporary boost
to the bit rate of a media streaming session from a network-side component of
the 5GMS System. The network-side component requests a modification to the PDU
session corresponding to the media streaming session from the PCF on behalf of
the 5GMS Client. If there is sufficient spare network capacity to accommodate
the requested bit rate, it is granted by the 5GMS System on a temporary basis.
The 5GMS Client uses this temporary boost to speed up media streaming data
transfer, for example to replenish a depleted downlink streaming buffer or to
complete a download/upload faster than would otherwise be possible.
ANBR-based bit rate recommendation is also defined for downlink media
streaming (see clause 5.9.3).
ANBR-based delivery boost is also defined for uplink media streaming (see
clause 6.7).
### 4.0.6 Dynamic policies
The dynamic policies feature is applicable to both downlink media streaming
and uplink media streaming. It enables the 5GMS Client in the UE to manipulate
the network traffic handling policies for an ongoing media streaming session.
NOTE: The PCF is accessed via the NEF when the 5GMS network services are
deployed outside the Trusted DN.
Figure 4.0.6‑1: High-level arrangement for dynamic policies
### 4.0.7 Remote control
The remote control feature is applicable to uplink media streaming only. While
high-level procedures for integrating this feature into 5G Media Streaming are
specified in clause 6.6 of the present document, it is not further defined in
this release.
### 4.0.8 Consumption reporting
The consumption reporting feature is applicable to downlink media streaming
only in this release. It allows consumption of downlink media streaming to be
logged by the 5GMS System and exposed for analysis.
Figure 4.0.8‑1: High-level arrangement for consumption reporting feature
When a 5GMSd Application Provider has provisioned the consumption reporting
feature for downlink media streaming:
1\. The 5GMSd Client reports consumption of media that is part of downlink
media streaming sessions to a network-side component of the 5GMS System.
### 4.0.9 QoE metrics reporting
The QoE metrics reporting feature is applicable to downlink media streaming
only in this release. It allows the Quality of Experience of media streaming
sessions to be logged by the 5GMS System and exposed for analysis.
Two mechanisms for reporting downlink QoE metrics are defined in the present
document: one that involves reports being sent to the OAM via the RAN (_RAN-
based QoE metrics reporting_ , see clause 5.5.2), the other involving reports
sent to the network-based components of the 5GMS System (_AF-based QoE metrics
reporting_ , see clause 5.5.3).
Figure 4.0.9‑1: High-level arrangement for QoE metrics reporting feature
When a 5GMS Application Provider has provisioned the QoE metrics reporting
feature for media streaming:
1\. The 5GMS Client reports QoE metrics that it has collected during media
streaming sessions to a network-side component of the 5GMS System.
## 4.1 General Service Architecture
The overall 5G Media Streaming Architecture is shown in Figure 4.1-1 below.
NOTE: The functions indicated by the yellow filled boxes are in scope of stage
3 specifications for 5GMS. The functions indicated by the grey boxes are
defined in 5G System specifications. The functions indicated by the blue boxes
are neither in scope of 5G Media Streaming nor 5G System specifications.
Figure 4.1-1: 5G Media Streaming within the 5G System
The 5GMS Application Provider uses 5GMS for streaming services. It provides a
5GMS Aware-Application on the UE to make use of 5GMS Client and network
functions using interfaces and APIs defined in 5GMS.
The architecture in Figure 4.1-1 represents the specified 5GMS functions
within the 5G System (5GS) as defined in TS 23.501 [2]. Three main functions
are defined:
\- **5GMS AF:** An Application Function similar to that defined in TS 23.501
[2] clause 6.2.10, dedicated to 5G Media Streaming.
\- **5GMS AS:** An Application Server dedicated to 5G Media Streaming.
\- **5GMS Client:** A UE internal function dedicated to 5G Media Streaming.
The 5GMS Client is a logical function and its subfunctions may be distributed
within the UE according to implementation choice.
5GMS AF and 5GMS AS are Data Network (DN) functions and communicate with the
UE via N6 as defined in TS 23.501 [2].
Functions in trusted DNs, e.g. a 5GMS AF in the Trusted DN, are trusted by the
operator's network as illustrated in Figure 4.2.3-5 of TS 23.501 [2].
Therefore, such AFs may directly communicate with the relevant 5G Core
functions.
Functions in external DNs, e.g. a 5GMS AF in the External DN, may only
communicate with 5G Core functions via the NEF using N33.
The present document specifies the according network architectures for 5GS.
The 5GMS architecture may be applied to an EPS although such an application is
not specified in the present document and is left to the discretion of
deployments and implementations.
The 5G Media Services Architecture maps the overall high-level architecture
shown in Figure 4.1-1 above to the general architecture shown in Figure 4.1-2
below.
NOTE: The 5GMS Client in the UE is depicted in the form of Media Session
Handler and Media Stream Handler constituent functions which expose APIs to
one another in the same way that those APIs are exposed to 5GMS-Aware
Applications. This UE architecture is not applicable generally; it is just as
valid to implement a 5GMS Client that does not expose interfaces M6 and M7
within the 5GMS Client. It is also valid for a 5GMS Client inside a UE to be
completely self-contained, such that all functionality typically implemented
in the 5GMS-Aware Application is embedded in the UE and thus interfaces M6 and
M7 are not exposed at all.
Figure 4.1-2: 5G Media Streaming General Architecture
The remainder of the present document specifies stage 2 aspects of the media
streaming functional entities shown in the general architecture of Figure
4.1-2.
This architecture specification addresses two main scenarios as concerns each
individual media streaming operation:
\- **Downlink streaming:** The network is the origin of the media and the UE
acts as the consumption device.
**\- Uplink streaming:** The UE is the origin of the media and the network
acts as the consumption entity.
The functional entities and interfaces of the media streaming general
architecture need to be elaborated with specificities relating to downlink and
uplink streaming. For this purpose, corresponding descriptions add the suffix
"d" for downlink and "u" for uplink functionality as appropriate in each case.
Clause 4.2 introduces the 5G Unicast Downlink Media Streaming architecture.
Clause 4.3 introduces the 5G Unicast Uplink Media Streaming architecture.
## 4.2 5G Unicast Downlink Media Streaming Architecture
### 4.2.1 Standalone -- Non-Roaming
The 5GMSd Application Provider uses 5GMSd functions for downlink streaming
services. It provides a 5GMSd-Aware Application on the UE the ability to make
use of 5GMSd Client and network functions using 5GMSd interfaces and APIs.
The architecture in Figure 4.2.1-1 below represents the specified 5GMSd
functions within the 5G System (5GS) as defined in TS23.501 [2]. Three main
functions are defined:
\- **5GMSd AF:** An Application Function similar to that defined in TS 23.501
[2] clause 6.2.10, dedicated to 5G Downlink Media Streaming.
\- **5GMSd AS:** An Application Server dedicated to 5G Downlink Media
Streaming.
\- **5GMSd Client:** A UE internal function dedicated to 5G Downlink Media
Streaming. The 5GMSd Client is a logical function and its subfunctions may be
distributed within the UE according to implementation choice.
5GMSd AF and 5GMSd AS are Data Network (DN) functions and communicate with the
UE via the User Plane Function (UPF) using the N6 reference point as defined
in TS 23.501 [2].
Functions in trusted DNs are trusted by the operator's network as illustrated
in Figure 4.2.3-5 of TS 23.501 [2]. Therefore, AFs in trusted DNs may directly
communicate with relevant 5G Core functions.
Functions in external DNs, i.e. 5GMSd AFs in external DNs, may only
communicate with 5G Core functions via the NEF using N33.
NOTE 1: The 5GMS architecture may be applied to an EPS although such an
application is not specified in the present document and is left to the
discretion of deployments and implementations.
Figure 4.2.1-1: 5G Downlink Media Streaming within 5G System
NOTE 2: The functions indicated by the yellow filled boxes are in scope of
stage 3 specifications for 5GMS. The functions indicated by the grey boxes are
defined in 5G System specifications. The functions indicated by the blue boxes
are neither in scope of 5G Media Streaming nor 5G System specifications.
The architecture in Figure 4.2.1-2 below represents the media architecture
connecting UE internal functions and related network functions.
Figure 4.2.1-2: Media Architecture for unicast downlink media streaming
NOTE 3: As described in the NOTE of Figure 4.1-2, the functions indicated by
the yellow filled boxes are in scope of stage 3 for 5GMSd. The functions
indicated by the grey boxes are defined in 5GS. The interfaces indicated by
solid lines are in scope of stage 3 for 5GMSd. The interfaces indicated by
dashed lines are defined in 5GS. The interfaces indicated by dotted lines are
neither in scope of 5GS nor 5GMSd, but are considered as part of informative
call flows.
NOTE 4: Red ovals indicate API provider functions.
NOTE 5: The 5GMSd AF may also interact with the NEF for NEF-enabled API
access. However, within Release 16, the NEF is only used by the 5GMSd AF to
interact with the Policy and Charging Function (PCF) in 5GMS specifications.
NOTE 6: Some information might also be exchanged between 5GMSd entities and
the OAM, although the OAM is not explicitly shown in the architecture.
The following functions are defined:
\- 5G Media Streaming Client for downlink (**5GMSd Client**) on the UE:
Receiver of 5GMS downlink media streaming service that may be accessed through
well-defined interfaces/APIs. Alternatively, the UE may be implemented in a
self-contained manner such that interfaces M6d and M7d are not exposed at all.
\- The 5GMSd Client contains two subfunctions:
\- **Media Session Handler:** A function on the UE that communicates with the
5GMSd AF in order to establish, control and support the delivery of a media
session, and may perform additional functions such as consumption and QoE
metrics collection and reporting. The Media Session Handler may expose APIs
that can be used by the 5GMSd-Aware Application.
\- **Media Player:** A function on the UE that communicates with the 5GMSd AS
in order to stream the media content and may provide APIs to the 5GMSd-Aware
Application for media playback and to the Media Session Handler for media
session control.
\- **5GMSd-Aware Application:** The 5GMSd Client is typically controlled by an
external media application, e.g. an App, which implements external application
or content service provider specific logic and enables a media session to be
established. The 5GMSd-Aware Application is not defined within the 5G Media
Streaming specifications, but the function makes use of 5GMSd Client and
network functions using 5GMSd interfaces and APIs.
\- **5GMSd AS:** An Application Server which hosts 5G media functions. Note
that there may be different realizations of the 5GMSd AS, including the
distribution of 5GMSd AS functionality between different physical hosts, for
example in a Content Delivery Network (CDN).
The 5GMSd AS in this release supports the following features:
i. **Content Hosting** , including:
\- Ingesting media content from a 5GMSd Application Provider at reference
point M2d.
\- Caching media content to reduce the need to ingest the same content
repeatedly at reference point M2d.
\- A generic framework for content preparation.
\- Geographic restrictions on content access by the Media Player at reference
point M4d ("geofencing").
\- Domain Name aliasing at reference point M4d.
\- Support for server certificates at reference point M4d.
\- URL path rewriting at reference point M4d.
\- URL signing at reference point M4d.
NOTE 6a: The features of the 5GMSd AS cater primarily for media streaming
content. However, many of these features may also be used to support the
delivery of other types of content, for example web content.
\- **5GMSd Application Provider:** External application or content-specific
media functionality, e.g., media creation, encoding and formatting that uses
5GMSd interfaces to stream media to 5GMSd-Aware Applications.
\- **5GMSd AF:** An Application Function that provides various control
functions to the Media Session Handler on the UE and/or to the 5GMSd
Application Provider. It may relay or initiate a request for different Policy
or Charging Function (PCF) treatment or interact with other network functions
via the NEF.
NOTE 7: There may be multiple 5GMSd AFs present in a deployment and residing
within the Data Network , each exposing one or more APIs.
The following interfaces are defined for 5G Downlink Media Streaming:
\- M1d (5GMSd Provisioning API): External API, exposed by the 5GMSd AF which
enables the 5GMSd Application Provider to provision the usage of the 5G Media
Streaming System for downlink media streaming and to obtain feedback.
\- M2d (5GMSd Ingest API): Optional External API exposed by the 5GMSd AS used
when the 5GMSd AS in the trusted DN is selected to host content for the
streaming service.
\- M3d: (Internal and NOT SPECIFIED): Internal API used to exchange
information for content hosting on a 5GMSd AS within the trusted DN.
\- M4d (Media Streaming APIs): APIs exposed by a 5GMSd AS to the Media Player
to stream media content.
\- M5d (Media Session Handling API): APIs exposed by a 5GMSd AF to the Media
Session Handler for media session handling, control, reporting and assistance
that also include appropriate security mechanisms, e.g. authorization and
authentication.
\- M6d (UE Media Session Handling APIs): APIs exposed by a Media Session
Handler to the Media Player for client-internal communication, and exposed to
the 5GMSd-Aware Application enabling it to make use of 5GMS functions.
\- M7d (UE Media Player APIs): APIs exposed by a Media Player to the 5GMSd-
Aware Application and Media Session Handler to make use of the Media Player.
\- M8d: (Application API): application interface used for information exchange
between the 5GMSd-Aware Application and the 5GMSd Application Provider, for
example to provide Service Access Information to the 5GMSd-Aware Application.
This API is external to the 5G System and not specified by 5GMS.
NOTE 8: Non-Standalone, Roaming, Non-3GPP Access and EPC-5GC interworking
aspects are FFS.
The following subfunctions are identified as a part of a more detailed
breakdown of the 5GMSd AS for stage 3 specifications:
\- Adaptive Bit Rate (ABR) Encoder, Encryption and Encapsulator.
\- Manifest (e.g. MPD) Generator and Segment (e.g. DASH) Packager.
\- Origin Server.
\- CDN Server (e.g. Edge Servers).
\- DRM Server (e.g. DRM License Server).
\- Service Directory.
\- Content Guide Server.
\- Replacement content server (e.g. Ad content server).
\- Manifest Proxy, i.e. MPD modification server.
\- App Server.
\- Session Management Server.
A breakdown of 5GMSd functions in the UE is provided in clause 4.2.2 below.
### 4.2.2 UE 5GMSd Functions
The UE may include many detailed subfunctions that can be used individually or
controlled individually by the 5GMSd-Aware Application. This clause breaks
down several relevant identified subfunctions for which stage 3 specification
is available.
NOTE: This UE architecture is logical; the realization of reference points M6
ad M7 inside the logical 5GMS Client is subject to implementation choice.
The 5GMSd-Aware Application itself may include many functions that are not
provided by the 5GMSd Client or by the 5G UE. Examples include service and
content discovery, notifications and social network integration. The 5GMSd-
Aware Application may also include functions that are equivalent to ones
provided by the 5GMSd Client and may only use a subset of the 5GMSd client
functions. The 5GMSd-Aware Application may act based on user input or may for
example also receive remote control commands from the 5GMSd Application
Provider through M8d.
With respect to Media Player functions, Figure 4.2.2-1 below shows more
detailed functional components of a UE for media player functions to access
the 5GMSd AS.
Figure 4.2.2-1: UE 5G Downlink Media Streaming Functions (Media Player
centric)
The following subfunctions are identified as part of a more detailed breakdown
of the Media Player function:
\- **Media Access Client:** Accesses media content such as DASH-formatted
media segments.
\- **Media Decapsulation:** Extracts the elementary media streams for decoding
and provides media system related functions such as time synchronization,
capability signalling, accessibility signalling, etc.
\- **Consumption Measurement and Logging Client:** Performs the measurement
and logging of content consumption-related information in accordance with the
Consumption Reporting Configuration part of provisioning data, supplied by the
5GMSd Application Provider to the 5GMSd AF, and forwarded by the 5GMSd AF to
the Media Player via the Media Session Handler.
\- **Metrics Measurement and Logging Client:** Performs the measurement and
logging of QoE metrics in accordance with the Metrics Reporting Configuration
part of provisioning data, supplied by the 5GMSd Application Provider to the
5GMSd AF, and forwarded by the 5GMSd AF to the Media Player via the Media
Session Handler.
\- **DRM Client** (optional): When present, the DRM client might or might not
be a part of the Media Player. It provides a content protection mechanism with
its unique key management and key delivery system,
authentication/‌authorization, policy enforcement and entitlement check. The
DRM Client is not defined within 5G Media Streaming specifications.
\- **Media Decryption** (optional): When present, media decryption is
responsible to decrypt the media samples using the keys provided in the DRM
license, and further passing to the Media Decoder to enable playback of
encrypted media. The media decryption and media decoding could be implemented
on a general-purpose processor in software or hardware or, for a more secure
and robust architecture, the decryption, decoding and rendering could be
implemented on the hardware of secure processors.
\- **Media Decoder** : Decodes the media, such as audio or video.
\- **Media Presentation and Rendering:** Presents the media using an
appropriate output device and enables possible interaction with the media.
With respect to the Media Session Handler, Figure 4.2.2-2 below shows more
detailed functional components of a UE to access the 5GMSd AF.
Figure 4.2.2-2: UE 5G Media Streaming Functions (Control-Centric)
NOTE 1: The yellow color indicates here that the 3GPP has created
specifications for the function.
NOTE 2: A UE is a logical device which may correspond to the tethering of
multiple physical devices or other types of realizations.
The following subfunctions are identified as part of a more detailed breakdown
of Media Session Handler:
\- **Core Functions:** Realization of a "session" concept for media
communications, optionally spanning multiple stateless sessions. May
optionally interact with network-based 5GMSd AFs.
\- **Metrics Collection and Reporting:** executes the collection of QoE
metrics measurement logs from the Media Player and sending of metrics reports
to the 5GMSd AF for the purpose of metrics analysis or to enable potential
transport optimizations by the network.
\- **Consumption Collection and Reporting:** executes the collection of
content consumption measurement logs from the Media Player and sending of
consumption reports to a 5GMSd AF about the currently consumed media within
the available presentation, about the UE capabilities and about the
environment of the media session for potential transport optimizations by the
network or consumption report analysis.
.- **Network Assistance:** downlink streaming delivery assisting functions
provided by the network to the 5GMSd Client and Media Player in the form of
bit rate recommendation (or throughput estimation) and/or delivery boost.
Network Assistance functionality may be supported by 5GMSd AF or ANBR-based
RAN signaling mechanisms.
NOTE 3: Based on such a decomposition, additional interfaces and APIs may
exist in inside the UE:
\- Media control interface(s) to configure and interact with the different UE
media functions.
\- Media control interface for media session management.
\- Control interface for collectionof logged QoE metrics measurements..
\- Control interface for collection of logged content consumption
measurements.
\- Decoded media samples are handed over to the media renderer.
\- Decrypted, compressed media samples are handed over to a trusted media
decoder.
\- In case of encryption, the encrypted, compressed media samples are handed
over to the DRM Client.
NOTE 4: Non-Standalone, Roaming, Non-3GPP Access and EPC-5GC interworking
aspects are FFS.
### 4.2.3 Service Access Information for Downlink Media Streaming
The Service Access Information is the set of parameters and addresses which
are needed by the 5GMSd Client to activate and control the reception of a
downlink streaming session, and to report service/content consumption and/or
QoE metrics.
The Service Access Information may be provided together with other service
announcement information using M8d. Alternatively, the 5GMSd Client fetches
the Service Access Information from the 5GMSd AF. Regardless of how it is
provided, the Service Access Information contains different information,
depending on the collaboration model between the 5GMS System and the 5GMSd
Application Provider, and also depending on offered features. Baseline
parameters are listed in Table 4.2.3‑1 below:
Table 4.2.3-1: Parameters of baseline service access information
Parameters Description
* * *
Provisioning Session identifier Unique identification of the M1d Provisioning
Session.
When the content hosting feature is activated for a downlink streaming
session, the parameters from Table 4.2.3-1a below can additionally be present.
Table 4.2.3-1a: Streaming Access parameters
Parameters Description
* * *
Media Player Entry A document or a pointer to a document that defines a media
presentation e.g. MPD for DASH content or URL to a video clip file.
When the consumption reporting feature is activated for a downlink streaming
session, the parameters from Table 4.2.3‑2 below are additionally present.
Table 4.2.3-2: Parameters for consumption reporting configuration
+--------------------+------------------------------------------------+ | Parameters | Description | +====================+================================================+ | Reporting interval | Identifies the interval between consumption | | | reports being sent by the Media Session | | | Handler. | +--------------------+------------------------------------------------+ | Server address | A list of 5GMSd AF addresses where the | | | consumption reports are sent by the Media | | | Session Handler. | +--------------------+------------------------------------------------+ | Sample percentage | The proportion of clients that shall report | | | media consumption. | | | | | | If not specified, all clients shall send | | | reports. | +--------------------+------------------------------------------------+ | Location reporting | Identify whether the Media Session Handler | | | provides location data to the 5GMSd AF (in | | | case of MNO or trusted third parties) | +--------------------+------------------------------------------------+
When the dynamic policy invocation feature is activated for a downlink
streaming session the parameters from Table 4.2.3‑3 below are additionally
present.
Table 4.2.3-3: Parameters for dynamic policy invocation configuration
Parameters Description
* * *
Server address A list of 5GMSd AF addresses (in the form of opaque URLs) which
offer the APIs for dynamic policy invocation sent by the 5GMS Media Session
Handler. Valid Policy Template Ids A list of Policy Template identifiers which
the 5GMSd Client is authorized to use. Service Data Flow Methods A list of
recommended Service Data Flow description methods (descriptors), e.g. 5-Tuple,
ToS, 2-Tuple, etc, which should be used by the Media Session Handler to
describe the Service Data Flows for the traffic to be policed. External
reference Additional identifier for this Policy Template, unique within the
scope of its Provisioning Session, that can be cross-referenced with external
metadata about the streaming session.
When the metrics collection and reporting feature is activated for a downlink
streaming session, one or more parameter sets for metrics configuration,
according to Table 4.2.3‑4, are additionally present. Each metrics
configuration set contains specific settings valid for that configuration,
which is typically metric scheme dependent, and collection and reporting shall
be done separately for each set.
Table 4.2.3-4: Parameters for each metrics configuration set
+-------------------------+-------------------------------------------+ | Parameters | Description | +=========================+===========================================+ | Scheme | The scheme associated with this metrics | | | configuration set. A scheme may be | | | associated with 3GPP or with a non-3GPP | | | entity. If not specified, a default 3GPP | | | metrics scheme shall apply. | | | | | | Metrics schemes shall be uniquely | | | identified by URIs. | +-------------------------+-------------------------------------------+ | Server address | A list of 5GMSd AF addresses to which | | | metric reports shall be sent for this | | | metrics configuration set. | +-------------------------+-------------------------------------------+ | DNN | The Data Network Name (DNN) which shall | | | be used when sending metrics report for | | | this metrics configuration set. | | | | | | If not specified, the default DNN shall | | | be used. | +-------------------------+-------------------------------------------+ | Reporting interval | The sending interval between metrics | | | reports for this metrics configuration | | | set. | | | | | | If not specified, a single final report | | | shall be sent after the streaming session | | | has ended. | +-------------------------+-------------------------------------------+ | Sample percentage | The proportion of streaming sessions that | | | shall report metrics for this metrics | | | configuration set. | | | | | | If not specified, reports shall be sent | | | for all sessions. | +-------------------------+-------------------------------------------+ | Streaming source filter | A list of content URL patterns for which | | | metrics reporting shall be done for this | | | metrics configuration set. | | | | | | If not specified, reporting shall be done | | | for all URLs. | +-------------------------+-------------------------------------------+ | Metrics | A list of metrics which shall be | | | collected and reported for this metrics | | | configuration set. | | | | | | For progressive download and DASH | | | streaming services, the listed metrics | | | are associated with the 3GPP metrics | | | scheme and shall correspond to one or | | | more of the metrics as specified in | | | clauses 10.3 and 10.4, respectively, of | | | TS 26.247 [7]. | | | | | | In addition, for the 3GPP metrics scheme | | | as applied to DASH streaming, the quality | | | reporting scheme and quality reporting | | | protocol as defined in clauses 10.5 and | | | 10.6, respectively, of [7] shall be | | | used. | | | | | | If not specified, a complete (or default | | | if applicable) set of metrics will be | | | collected and reported. | +-------------------------+-------------------------------------------+
When 5GMSd AF-based Network Assistance is activated for a downlink streaming
session the parameters from Table 4.2.3‑5 below shall be additionally present.
Table 4.2.3-5: Parameters for 5GMSd AF-based Network Assistance configuration
Parameters Description
* * *
Server address 5GMSd AF address that offers the APIs for 5GMSd AF-based
Network Assistance, accessed by the 5GMSd Media Session Handler. The server
address shall be an opaque URL, following the 5GMS URL format.
## 4.3 5G Uplink Media Streaming Architecture
### 4.3.1 Media Architecture
The 5GMSu Application Provider uses 5GMSu functions for uplink streaming
services. It provides a 5GMSu-Aware Application on the UE the ability to make
use of 5GMSu Client and network functions using 5GMSu interfaces and APIs.
Figure 4.3.1-1: Media Architecture for unicast uplink media streaming
NOTE 1: The functions indicated by the yellow filled boxes are in scope of
stage 3 specifications for 5GMS. The functions indicated by the grey boxes are
defined in 5G System specifications. The functions indicated by the blue boxes
are neither in scope of 5G Media Streaming nor 5G System specifications.
The architecture in Figure 4.3.1-1 above represents the specified 5GMSu
functions within the 5G System (5GS) as defined in TS23.501 [2]. Three main
functions are defined:
\- **5GMSu AF:** An Application Function similar to that defined in TS 23.501
[2] clause 6.2.10, dedicated to 5G Uplink Media Streaming.
\- **5GMSu AS:** An Application Server dedicated to 5G Uplink Media Streaming.
\- **5GMSu Client:** A UE-internal function dedicated to 5G Uplink Media
Streaming.
5GMSu AF and 5GMSu AS are Data Network (DN) functions and communicate with the
UE via N6 as defined in TS23.501 [2].
Functions in trusted DNs, e.g., a 5GMSu AF in the Trusted DN, are trusted by
the operator's network as illustrated in Figure 4.2.3-5 of TS 23.501 [2].
Therefore, such AFs may directly communicate with relevant 5G Core functions.
Functions in external DNs, e.g., a 5GMSu AF in the External DN, may only
communicate with 5G Core functions via the NEF using N33.
The architecture in Figure 4.3.1-2 below represents the media architecture
connecting UE internal functions and related network functions for 5G Uplink
Media Streaming.
Figure 4.3.1-2: Media Architecture for unicast uplink media streaming
NOTE 2: The functions indicated by the yellow filled boxes are in scope of
stage 3 for 5GMSu. The functions indicated by the grey boxes are defined in
5GS. The interfaces indicated by solid lines are in scope of stage 3 for
5GMSu. The interfaces indicated by dashed lines are defined in 5GS. The
interfaces indicated by dotted lines are neither in scope of 5GS nor 5GMSu,
but are considered as part of informative call flows.
NOTE 3: Red ovals indicate API provider functions.
NOTE 4: The 5GMSu AF may also interact with the NEF for NEF-enabled API
access. However, within Release 16, the NEF is only used by the 5GMSu AF to
interact with the Policy and Charging Function (PCF) in 5GMS specifications.
NOTE 5: Some information might also be exchanged between 5GMSu entities and
the OAM, although the OAM is not explicitly shown in the architecture.
The following functions are defined:
\- 5G Media Streaming Client for uplink (**5GMSu Client**) on UE: Originator
of 5GMSu service that may be accessed through well-defined interfaces/APIs.
The UE may also be implemented in a self-contained manner such that interfaces
M6u and M7u are not exposed at all.
\- The 5GMSu Client contains two subfunctions:
\- **Media Session Handler:** A function on the UE that communicates with the
5GMSu AF in order to establish, control and support the delivery of a media
session, and that may perform QoE metrics reporting. The Media Session Handler
exposes APIs that can be used by the 5GMSu-Aware Application.
\- **Media Streamer:** A function on the UE that communicates with the 5GMSu
AS in order to perform uplink streaming of media content and provides a
service to both the 5GMSu-Aware Application for media capturing and uplink
streaming and the Media Session Handler for media session control.
\- **5GMSu-Aware Application:** The 5GMSu Client is typically controlled by an
external media application, e.g. an App, which implements external application
or content service provider specific logic and enables a media session to be
established. The 5GMSu-Aware Application is not defined within the 5G Media
Streaming specifications, but the function makes use of 5GMSu Client and
network functions using 5GMSu interfaces and APIs.
\- **5GMSu AS:** An Application Server which hosts 5G media functions. Note
that there may be different realizations of a 5GMSu AS, for example a Content
Delivery Network (CDN) server.
\- **5GMSu Application Provider:** External application or content-specific
media functionality, e.g., media storage, consumption, transcoding and
redistribution that uses 5GMSu interfaces to receive streaming media from
5GMSu Aware Applications.
\- **5GMSu AF:** An Application Function that provides various control
functions to the Media Session Handler on the UE and/or to the 5GMSu
Application Provider. It may relay or initiate a request for different Policy
or Charging Function (PCF) treatment or interact with other network functions
via the NEF.
NOTE 6: There may be multiple 5GMSu AFs present in a deployment and residing
within the Data, each exposing one or more APIs.
The following interfaces are defined for 5G Uplink Media Streaming:
\- M1u (5GMSu Provisioning API): External API, exposed by the 5GMSu AF and
which enables the 5GMSu Application Provider to provision the usage of the 5G
Media Streaming system for uplink media streaming and to obtain feedback.
\- M2u (5GMSu Publish API): Optional External API exposed by the 5GMSu AS used
when the 5GMSu AS in the trusted DN is selected to receive the content for the
streaming service.
\- M3u: (Internal and NOT SPECIFIED): Internal API used to exchange
information for content hosting on a 5GMSu AS within the trusted DN.
\- M4u (Uplink Media Streaming APIs): APIs exposed by a 5GMSu AS to the Media
Streamer to stream media content.
\- M5u (Media Session Handling API): APIs exposed by a 5GMSu AF to the Media
Session Handler for media session handling, control and assistance that also
include appropriate security mechanisms e.g. authorization and authentication,
and QoE metrics reporting.
\- M6u (UE Media Session Handling APIs): APIs that may be exposed by a Media
Session Handler to the Media Streamer for client-internal communication, and
to the 5GMSu-Aware Application to make use of 5GMSu functions.
\- M7u (UE Media Streamer APIs): APIs that may be exposed by a Media Streamer
to the 5GMSu-Aware Application and Media Session Handler to make use of the
Media Streamer, including configuration of QoE metrics to be measured and
logged, and the collection of metrics measurement logs.
\- M8u: (Application API): application interface used for information exchange
between the 5GMSu-Aware Application and the 5GMSu Application Provider, for
example to provide Service Access Information to the 5GMSu-Aware Aapplication.
This API is external and not specified in the 5GMS architecture.
NOTE 7: Non-Standalone, Roaming, Non-3GPP Access and EPC-5GC interworking
aspects are FFS.
### 4.3.2 UE Media Functions
The UE may include many detailed subfunctions that can be used individually or
controlled individually by the 5GMSu-Aware Application. This clause breaks
down several relevant identified subfunctions for which stage 3 specification
is available.
The 5GMSu-Aware Application itself may include many functions that are not
provided by the 5GMSu Client or to the 5G UE. Examples include peripheral
discovery, notifications and social network integration. The 5GMSu-Aware
Application may also include functions that are equivalent to ones provided by
the 5GMSu Client and may only use a subset of the 5GMSu Client functions.
With respect to the Media Streamer and Media Handler functions, Figure 4.3.2-1
shows more detailed functional components of a 5GMSu Client.
Figure 4.3.2-1: UE 5G Uplink Media Streaming Functions
NOTE 1: A UE is a logical device which may correspond to the tethering of
multiple physical devices or other types of realizations.
The following subfunctions are identified as part of a more detailed breakdown
of the UE 5G Uplink Media Streaming functions:
\- **5GMSu-Aware Application:** application which is out of scope of the
present specification and which uses the UE 5G Uplink Media Streaming
functions and APIs.
\- **Media Capturing:** Devices such as video cameras or microphones that
transform an analog media signal into digital media data.
\- **Media Encoder(s):** Compresses the media data.
\- **Metrics Measurement and Logging:** execution of QoE metrics measurement
and logging by the Media Streamer in accordance with the metrics
configuration.
\- **Metrics Collection and Reporting:** execution of the collection of QoE
metrics measurement logs from the Media Streamer by the Media Session Handler
for subsequent metrics reporting to the 5GMSu AF, in accordance with the
metrics configuration.
\- **Media Upstream Client:** encapsulates encoded media data and pushes it
upstream.
NOTE 2: The Media Upstream Client maps logically to the FLUS media function in
the FLUS Source specified in TS 26.238 Uplink Streaming stage 3 [5].
\- **Network Assistance:** uplink streaming delivery assisting functions
provided by the network to the 5GMSu Client and Media Streamer in the form of
bit rate recommendation (or throughput estimation) and/or delivery boost.
Network Assistance functionality may be supported by 5GMSu AF or ANBR-based
RAN signaling mechanisms.
NOTE 3: The Network Assistance function maps logically to the FLUS Assistance
function specified in TS 26.238 Uplink Streaming stage 3 [5].
\- **Media Remote Control:** receives control commands from a 5GMSu AF.
NOTE 4: Media Remote Control maps logically to the FLUS Remote control
function specified in TS 26.238 Uplink Streaming stage 3 [5].
\- **Core Functions:** configures the 5GMSu AS for uplink streaming reception.
NOTE 5: The core functions map logically to the FLUS control function in the
FLUS source specified in TS 26.238 Uplink Streaming stage 3 [5].
Here are the roles of the different APIs of the UE 5G Uplink Media Streaming
functions:
\- M6u: API used to control the Core Functions and the Remote Control
function.
> \- M7u: API used to configure, activate and stop the Media Capturing, Media
> Encoding(s) and Media Upstream Client functions, and also to support metrics
> configuration and collection functionality.
## 4.4 Network Slicing for Downlink Media Streaming
The 5GMS architecture offers the option to create aContent Hosting
Configuration for external 5GMSd AS(s) through a provisioning interface, as
described in clause 5.4. A Content Hosting Configuration is a 5GMS-optimized
configuration that is tailored to a third-party content or service provider to
leverage the capabilities of the 5G System to achieve optimized delivery of
media content.
Upon successful setup of a Content Hosting Configuration, the 5GMSd AF uses
the NSaaS to create or use an existing corresponding network slice, and
assigns the Content Hosting Configuration domain as the network slice
selection assistance information rule. This allows any traffic to and from the
Content Hosting Configuration domain to be mapped to the correct network slice
instance.
The concept of Network Slice as a Service (NSaaS) is defined in TS 28.530
[10]. NSaaS can be offered by an MNO to third-party providers in the form of a
service. This service allows the providers to use the network slice instance
as the end user and to manage the network slice instance via a management
interface exposed by the MNO. In turn, these providers offer their own
services, e.g. OTT service, on top of the network slice instance obtained from
the MNO.
The NSaaS offered by the MNO can be characterized by certain properties
(capabilities to satisfy service level requirements), e.g.
\- radio access technology,
\- bandwidth,
\- end-to-end latency,
\- reliability,
\- mobility,
\- density,
\- guaranteed / non-guaranteed QoS,
\- security level, etc.
The interface that is used for the creation and management of network slices
is defined in TS 28.531 [11] and the information elements are defined in TS
28.541 [12].
The network (HPLMN) may provision the UE with Network Slice Selection Policy
(NSSP) as part of the UE Route Selection Policy rules as described in TS
23.503 [4]. This ensures that the UE will request a particular network slice
when establishing the PDU session. Note that this mapping can also be
established through associating an Application with the Content Hosting
Configuration and the network slice, which in turn will be associated with a
PDU session that includes the Content Hosting Configuration domain as a
matching domain.
Once the PDU session is established using the network slice instance that
corresponds to the Content Hosting Configuration, the media distribution to
the UE may start. The network slice instance may be provisioned to support
processing and edge computing in addition to the appropriate QoS allocation.
The 5GMSd AF is responsible for ensuring appropriate traffic routing, e.g.
request the routing of traffic to a local access to a Data Network (identified
by a DNAI) that hosts the media processing compute instances.
# 5 Procedures for Downlink Media Streaming
## 5.1 General
The downlink streaming procedures follow the general high-level workflow
depicted in Figure 5.1‑1 below, starting from provisioning and ingest session
preparation to the actual content streaming sessions. The **Ingest Session**
refers to the time interval during which media content is uploaded to the
5GMSd AS. The **Provisioning Session** refers to the time interval during
which the 5GMSd Client can access the media content and the 5GMSd Application
Provider can control and monitor the media content and its delivery.
Interactions between the 5GMSd AF and the 5GMSd Application Provider may occur
at any time while the Provisioning Session is active.
Figure 5.1-1: High Level Procedure for downlink streaming
The 5GMSd provisioning API at M1d allows selection of media session handling
(M5d) and media streaming (M4d) options, including whether the media content
is hosted on trusted 5GMSd ASs. The selection is identified by a Provisioning
Session identifier. The 5GMSd AF selects the M5d interface features according
to the provisioning option. The Media Session Handling interface exposed by
the 5GMSd AF can be used for core session handling; configuring content
consumption measurement, logging, collection and reporting; configuring QoE
metrics measurement, logging collection and reporting; requesting different
policy and charging treatments; or 5GMSd AF-based Network Assistance.
When the media content is hosted by trusted 5GMSd AS instances, then the 5GMSd
AF selects and configures the 5GMSd AS. Interactions between a 5GMSd AF and a
5GMSd AS (M3d interactions) take place for content hosting configuration,
including 5GMS Ingest (M2d) and Media Streaming (M4d) resource reservations.
The 5GMSd AS allocates M2d and M4d resources and communicates resource
identifiers back to the 5GMSd AF. The 5GMSd AF provides information about the
provisioned resources (in form of resource identifiers) for Media Session
Handling (M5d), the 5GMSd Ingest (M2d) and the Media Streaming (M4d), to the
5GMSd Application Provider. The resource identifiers for Media Session
Handling and Media Streaming are needed by the 5GMSd Client to access the
5GMSd functions.
When Content Hosting is provided by a 5GMSd AS in the external DN, then the
M3d interface is not used and the 5GMSd AF does not provide 5GMS Ingest (M2d)
and Media Streaming (M4d) resource reservations. M3d procedures are not
standardized.
5GMSd Clients can (in principle) start streaming media as soon as the
corresponding content is ingested by activating a unicast downlink streaming
session. However, it may take some time until the media content is available
for Media Streaming (via the Media Streaming API) or the distribution
availability might be based on a provisioned schedule. The unicast downlink
streaming session for a given UE (or \"for each UE\") is active from the time
at which the 5GMSd-Aware Application activates the reception of a streaming
service until its termination.
The 5GMSd-Aware Application receives application data from the 5GMSd
Application Providerbefore receiving the downlink streaming media. The
application data contains Service Access Information, which acts as an entry
point for the 5GMSd Client to start the downlink streaming session. The 5GMSd
Client may either receive a reference to that Service Access Information or
the full Service Access Information from the 5GMSd Application Provider.
Steps:
1\. The 5GMSd Application Provider creates a Provisioning Session with the
5GMSd AF and starts provisioning the usage of the 5G Media Streaming System.
During the establishment phase, the used features are negotiated and detailed
configurations are exchanged. The 5GMSd AF receives Service Access Information
for M5d (Media Session Handling) and, where media content hosting is
negotiated, Service Access Information for M2d (Ingestion) and M4d (Media
Streaming) as well. This information is needed by the 5GMSd Client to access
the service. Depending on the provisioning, only a reference to the Service
Access Information might be supplied.
2\. When Content Hosting is offered and selected there may be interactions
between the 5GMSd AF and the 5GMSd AS, e.g. to allocate 5GMSd content ingest
and distribution resources. The 5GMSd AS provides resource identifiers for the
allocated resources to the 5GMSd AF, which then provides the information to
the 5GMSd Application Provider. The M3d procedures between 5GMSd AF and 5GMSd
AS are not specified.
3\. The 5GMSd Application Provider starts the Ingest Session by ingesting
content. In case of live services, the content is continuously ingested. In
case of on-demand streaming services, the content may be uploaded once and
then updated later on.
NOTE 1: A 5GMSd AS in the external Data Network may provide the Content
Hosting.
4\. The 5GMSd Application Provider provides the Service Announcement
Information to the 5GMSd-Aware Application. The service announcement includes
either the whole Service Access Information (i.e. details for Media Session
Handling (M5d) and for Media Streaming access (M4d)) or a reference to the
Service Access Information or pre-configured information. When only a
reference is included, the 5GMSd Client fetches (in step 6) the Services
Access Information when needed.
5\. When the 5GMSd-Aware Application decides to begin streaming, the Service
Access Information (all or a reference) is provided to the 5GMSd Client. The
5GMSd Client activates the unicast downlink streaming session.
6\. (Optional) In case the 5GMSd Client received only a reference to the
Service Access Information, then it acquires the Service Access Information
from the 5GMSd AF.
NOTE 2: Pre-caching of Service Access Information may also be supported by the
5GMS Client to speed up the activation of the service.
7\. The 5GMSd Client uses the Media Session Handling API exposed by the 5GMSd
AF at M5d. The Media Session Handling API is used for configuring content
consumption measurement, logging, collection and reporting; configuring QoE
metrics measurement, logging, collection and reporting; requesting different
policy and charging treatments; or 5GMSd AF-based Network Assistance. The
actual time of API usage depends on the feature and interactions that may be
used during the media content reception.
8\. The 5GMSd Client activates reception of the media content.
## 5.2 Baseline procedure for Unicast Downlink Media Streaming Session
establishment
### 5.2.1 General
This clause describes the baseline procedure for establishing a unicast
downlink media streaming session. This baseline procedure assumes that the
5GMSd AF and the 5GMSd AS both reside in the external DN and that there are no
interactions between the 5GMSd AF and the 5G System.
### 5.2.2 Progressive Download of On-Demand Content
This baseline procedure describes the establishment of a unicast downlink
streaming session. A streaming session may use 3GP File Format (Progressive
Download), 3GP Timed Text or other (potentially non-3GPP defined) formats.
Figure 5.2-1: High Level Procedure for progressive download for on-demand
media
Prerequisites:
\- The 5GMSd Application Provider has provisioned the 5G Media Streaming
System and has set up content ingest.
\- The 5GMSd-Aware Application has received the service announcement from the
5GMSd Application Provider.
Steps:
1: The 5GMSd-Aware Application triggers the Service Announcement and Service
and Content Discovery procedure. The Service Announcement includes either the
whole Service Access Information (i.e. details for Media Session Handling
(M5d) and for Media Streaming access (M4d)) or a reference to the Service
Access Information.
NOTE: The Service and Content Discovery procedure only involves the 5GMSd-
Aware Application and the 5GMSd Application Provider and hence is out of scope
of the present document.
2: A Media Player Entry is selected.
3: The 5GMSd-Aware Application triggers the Media Session Handler to start the
playback. The Media Player Entry is provided to the Media Session Handler.
4: When the 5GMS-Aware Application has received only a reference to the
Service Access Information (see step 1), the Media Session Handler interacts
with the 5GMSd AF to acquire the whole Service Access Information.
5: The Media Session Handler triggers the Media Player to start the session.
6: The Media Player establishes the transport session.
7: The Media Player sends the request for the progressive download content.
8: The Media Player receives the initialization information of the progressive
download content. The initialization information contains configuration
parameters for reception of the media and, optionally, also DRM information.
9: The Media Player configures the rendering pipeline for media playback.
10: The Media Player notifies the Media Session Handler, providing the
transport session information and some media content related information.
11: Optional: The Media Player acquires a DRM License from the 5GMSd
Application Provider.
12: The Media Player receives media content and puts it into the rendering
pipeline.
13: The Media Player continuously receives and plays back the media content.
### 5.2.3 DASH Streaming
It is assumed here that the key information to initialize the media decoding
and rendering pipeline is present in the Media Player Entry (or referenced by
the Media Player Entry). The intention is to provide the 5GMSd Client with
information to set up the media decoding and rendering pipeline in such a way
that no pipeline reset is needed during the session. Implementations need to
consider that parts of the information are provided with the initialization
segments.
It is assumed that the client is enabled to use the same media decoding and
rendering pipeline during the session.
Figure 5.2-2: High Level Procedure for DASH content
Prerequisites:
\- The 5GMSd Application Provider has provisioned the 5G Media Streaming
System and has setup content ingest.
\- The 5GMSd Aware Application has received the service announcement from the
5GMS Application Provider.
Steps:
1: The 5GMSd Aware Application triggers the Service Announcement and Service
and Content Discovery procedure. The Service and Content Discovery procedure
only involves the App and the external Application Server. The Service
Announcement includes either the whole Service Access Information (i.e.
details for Media Session Handling (M5d) and for Media Streaming access (M4d))
or a reference to the service access information.
2: A media content item is selected.
3: The 5GMSd-Aware Application triggers the 5GMSd Client to start media
playback. The Media Player Entry is provided to the 5GMSd Client.
4: When the 5GMS-Aware Application has received only a reference to the
Service Access Information (see step 1), the Media Session Handler interacts
with the 5GMSd AF to acquire the whole Service Access Information.
5: In parallel, the Media Player is invoked to start media access and
playback.
6: The Media Player establishes the transport session for acquiring the MPD
referenced by the Media Player Entry.
7: The Media Player requests the MPD.
8: The Media Player receives the MPD.
9: The Media Player processes the MPD. It determines for example the number of
needed transport sessions for media acquisition. The Media Player should be
able to use the MPD information to initialize the media pipelines for each
media stream. The MPD should also contain information to initialize the DRM
client, when DRM is used.
10: The Media Player notifies the Media Session Handler about the MPD. The
notification may contain parameters from the MPD.
11: Optional: the Media Player acquires the necessary DRM information, for
example a DRM License.
12: The Media Player configures the media playback pipeline.
13: The Media Player establishes the necessary transport sessions for the
content. For example, the Media Player may establish one transport session for
each media component (audio, video, etc) and possibly additional transport
sessions for other media representations.
14: The Media Player notifies the Media Session Handler that it is ready to
commence playback and optionally provides transport session parameters.
15: The Media Player requests initialization information. The Media Player
repeats this step for each required initialization segment.
16: The Media Player receives the initialization information.
17: The Media Player requests media segments according to the MPD.
18: the Media Player receives media segments and puts the information into the
appropriate media rendering pipeline.
19: Previous steps are repeated according to the MPD information.
NOTE: The Media Player can interact with multiple instances of the 5GMSd AS.
The Media Player can be made aware of the 5GMSd AS instances via the manifest.
## 5.3 Provisioning Session for Media Streaming
### 5.3.1 Domain model
The M1d baseline domain model is depicted in Figure 5.3.1-1 overleaf. It
consists of a Provisioning Session, which contains at least one of the
following:
\- A Content Hosting Configuration,
\- A Consumption Reporting Configuration which defines consumption
measurement, logging, collection and reporting functionality,
\- A Policy Template, or
\- A Metrics Reporting Configuration which defines QoE metrics measurement,
logging, collection and reporting functionality.
Each Provisioning Session is uniquely identified within the 5GMS System by a
Provisioning Session identifier.
When a certain 5GMS feature is selected, the 5GMSd AF compiles the resulting
Service Access Information so that the 5GMSd Client can access the services
via M4d and/or M5d.
Figure 5.3.1-1: M1d provisioning domain model
### 5.3.2 Baseline provisioning procedure
The present clause describes the baseline procedure to provision the features
using the 5GMS System.
NOTE 1: SLA negotiations between the 5GMSd Application Provider and the 5GMS
System provider are outside the scope of the present specification and are
included in the figure below for illustrative purposes only.
Figure 5.3.2-1: High Level Procedure for provisioning the 5GMS System for
downlink streaming sessions
Steps:
1\. The 5GMSd Application Provider discovers the address (URL) of the 5GMSd AF
(M1d) for Session Provisioning.
2\. The 5GMSd Application Provider authenticates itself with the system. This
procedure reuses existing authentication/authorization procedures, e.g. as
defined for CAPIF [13].
3\. The 5GMSd Application Provider creates a Provisioning Session, providing
its 5GMSd Application Provider identifier as input. 5GMSd Application Provider
queries the capabilities and authorized features.
4\. The 5GMSd Application Provider specifies one or more 5GMSd features in the
Provisioning Session. A set of authorized features is activated, such as
content consumption measurement, logging, collection and reporting; QoE
metrics measurement, logging, collection and reporting; dynamic policy;
network assistance; and content hosting (including ingest).
When the content hosting feature is offered and selected, the 5GMS Application
Provider configures the content hosting behaviour of the 5GMSd AS. This
Content Hosting Configuration is specified in clause 5.4 and includes
selecting the ingest protocol and format, caching and proxying of media
objects, content preparation, access protection (e.g. URL signing) and
indicating a target distribution area (e.g. through geofencing).
When the dynamic policy feature is offered and selected, the 5GMSd Application
Provider specifies a set of policies which can be invoked for the unicast
downlink streaming session. The UE becomes aware of the selected policies in
the form of a list of valid Policy Template Ids.
When the content consumption measurement, logging, collection and reporting
feature is offered and selected, the 5GMSd Application Provider indicates the
desired reporting interval. When the 5GMSd Application Provider has delegated
Service Access Information handling to the 5GMS System, then location
reporting is also selected or de-selected.
When the QoE metrics measurement, logging, collection and reporting feature is
offered and selected, the 5GMSd Application Provider provides configuration
input on the QoE post processing. When the 5GMSd Application Provider has
delegated Service Access Information handling to the 5GMS System, then more
detailed metrics reporting is configured.
5\. When content hosting is desired, the 5GMSd AF interacts with the 5GMSd AS
to allocate M2d resources and configure the ingest format. Then the 5GMSd AS
responds with the M2d address. The 5GMSd AF selects the desired ingest format.
6\. The 5GMSd AF compiles the Service Access Information. The Service Access
Information contains access details and options such as the Provisioning
Session identifier, M5d (Media Session Handling) addresses for content
consumption reporting, QoE metrics reporting, dynamic policy, network
assistance, etc. When content hosting is offered and has been selected in step
4, then also M4d (Media Streaming) information such as the DASH MPD is
included.
7\. The 5GMSd AF provides the results to the 5GMSd Application Provider.
a. When the 5GMSd Application Provider has selected full Service Access
Information, then the results are provided in the form of addresses and
configurations for M2d (Ingest), M5d (Media Session Handling) and M4d (Media
Streaming).
b. When the 5GMSd Application Provider delegated the service access
information handling to the 5GMS System, then a reference to the Service
Access Information (e.g. an URL) is provided. The Media Session Handler
fetches the full Service Access Information later from the 5GMSd AF.
8\. When content hosting is offered and has been selected in step 4, the 5GMSd
Application Provider can start supplying content at the M2d ingest interface.
In the case of progressive download or on-demand DASH sessions, the 5GMSd
Application Provider makes the content assets available. In the case of Live
DASH streaming sessions, the 5GMSd Application Provider starts supplying the
live content.
9\. The 5GMSd Application Provider executes Service Announcement and updates
the UEs (during the lifetime of the Provisioning Session).
Optional:
10\. The 5GMSd Application Provider may update the Provisioning Session.
Depending on the parameters of the Provisioning Session:
11\. The 5GMSd AF may send event-related or periodic notifications to the
5GMSd Application Provider.
According to schedule, or upon request:
12\. The 5GMSd Application Provider may manually terminate the Provisioning
Session (at any time). All associated resources are released. Content may be
removed from the 5GMSd AS. The 5GMSd Application Provider may configure a
schedule for Provisioning Session termination.
13\. The 5GMSd AF sends a notification upon Provisioning Session termination.
The 5GMSd AF may request the creation or reuse of one or more network slices
for distributing the content of the provisioned session. If more than one
network slice is provisioned for the distribution of the content of a session,
the list of allowed S‑NSSAIs shall be conveyed to the target UEs (e.g. through
URSP or through M5d or M8d).
NOTE 2: The 5GMSd AS(s) serving the content are only accessible through the
DNN(s) used by the network slice(s) provisioned for the distribution of that
content.
## 5.4 Content Hosting Configuration for Downlink Media Streaming
### 5.4.1 General
The 5G Media Streaming architecture defines an interface (M2d) for
provisioning which offers the procedures to configure content ingest for
downlink media streaming over 5G. Once a Provisioning Session is established
using the API at interface M1d, content hosting can be configured. The control
part of the ingest interface may be performed through the NEF. Ingested
content is accessible from the 5GMSd AS at interface M4d through a new
location identifier.
The M2d interface supports the ingest of the following types of content:
\- Live streaming content.
\- On-demand streaming content.
\- Static files such as images, scene descriptions, etc.
The 5GMSd AF provides an API at interface M1d that allows a 5GMSd Application
Provider to create/update/delete an Content Hosting Configuration. A Content
Hosting configuration contains all the parameters for a particular content
ingest and distribution setup.
NOTE: In the current version of the present document, the M2d ingest interface
only supports Unicast downlink streaming.
### 5.4.2 Media ingest procedure
The media ingest procedure is as follows:
Figure 5.4-1: Media Ingest procedure
The steps are as follows:
1: Initialization: the 5GMSd Application Provider discovers the entry point
and authenticates itself with the 5GMSd AF.
2: Create Content Hosting Configuration: the 5GMSd Application Provider
creates a new Content Hosting Configuration for its content through the 5GMSd
AF. The configuration specifies a domain name, supplies a certificate for
HTTPS access to the content, sets the caching rules per media type, indicates
the distribution area (e.g. through geofencing), distribution protocol, the
desired content preparation, URL signing, etc. Upon successful configuration,
the 5GMSd AF responds with a Content Hosting Configuration identifier, and the
location of the 5GMSd AS to which to send the content (if using the push
mode).
3: Provision 5GMSd AS(s): The 5GMSd AF configures the related 5GMSd AS(s) to
prepare for media ingest for that particular Content Hosting Configuration.
This step may involve instructing the 5GMSd AS(s) to set appropriate caching
rules, to perform URL signature validation and to limit access through
geofencing. The 5GMSd AS(s) will respond whether the configuration is
successful or not.
4: Confirm configuration information: The 5GMSd AF communicates the Content
Hosting Configuration of the 5GMSd AS(s) back to the 5GMSd Application
Provider for further media push or pull.
5: Publish Media Player Entry: The 5GMSd Application Provider shall then
publish the Media Player Entry to the 5GMSd-Aware Application to enable access
to the content.
6: Media ingest: The 5GMSd AS(s) may start pulling or receiving content (if
using push mode) from the 5GMSd Application Provider. The 5GMSd AS performs
the requested content preparation prior to providing access to the content.
NOTE: Pull of media content from the external 5GMSd AS(s) may be triggered by
a request from the 5MGSd Client.
The 5GMSd Application Provider may update a Content Hosting Configuration
subsequently to modify some of its parameters. The subset of parameters that
can be updated may be limited by the 5GMSd AF.
## 5.5 Metrics collection and reporting
### 5.5.1 General
Metrics collection and reporting can be done in different ways, depending on
the relationship between the Application Provider and the 5GMS System
operator. The following clauses show simplified signalling examples for two
different use-cases.
### 5.5.2 RAN-based reporting procedure
In the first use-case, shown in Figure 5.5.2-1 below, the 5GMS System operator
controls the metrics collection and reporting using the RAN-based
configuration method. In this case the metrics are configured via the RAN and
the control plane, independent of 5GMS functional support.
Figure 5.5.2-1: Metrics collection and reporting via RAN-based configuration
The different steps are explained below:
1: Overall metrics configuration is done on the network level, for instance
defining which geographical areas that shall have metrics collection active,
which metrics to collect, and how metrics shall be reported.
2: The metrics configuration(s) is/are sent from the OAM to the RAN, which
does not forward that information to the UE at this stage.
3: Time passes, and it is assumed that the UE moves around during that period.
4: The UE enters an area (cell, location area, etc.,) which is inside the
geographical constraint. This is discovered by the RAN, and it now needs to
activate metrics collection and reporting for the UE.
5: The actual metrics configuration is sent from the RAN to the Media Session
Handler, via the control plane.
6: Additional time passes, and the UE has a metrics configuration, but no
streaming session has started.
7: A streaming session is started.
8: The session setup is done in conjunction with signalling transactions (not
shown here).
9: A new metrics collection job is created in the Media Player.
10: A reference to the new metrics collection job is returned.
11: The configuration for the metrics collection job is sent to the Media
Player (i.e. which metrics should be measured) along with the measurement
resolution interval). The metrics reporting interval timer is activated in the
Media Session Handler.
12: Media is delivered and rendered, and...
13: ...more media is delivered...
14: The configured metrics reporting interval has elapsed, and the Media
Session Handler now requests the collected metrics from the Media Player.
15: The Media Player returns the collected metrics.
16: The metrics are reported via the control plane.
17: The session continues...
18: more media is delivered, and then the session is finished.
19: The Media Session Handler requests the final metrics collected.
20: The Media Player returns the final collected metrics.
21: The metrics are reported to the OAM via the control plane.
22: The metrics collection job is deleted.
23: Time passes, the UE moves around.
24: The UE leaves the geographical area specified by the metrics
configuration.
25: The RAN sends metrics (de)configuration to the UE, to stop future metrics
collection.
### 5.5.3 5GMSd AF-based reporting procedure
The second use-case, shown in figure 5.5.3-1 below, illustrates a scenario
where the metrics collection and reporting is configured by the 5GMSd AF. In
this example, it is assumed that the metrics configuration provided by the
5GMSd AF comprises instructions/rules regarding metrics collection (i.e.
measurement and logging) and reporting for two different schemes -- one that
is non-3GPP-defined and initially sourced from the 5GMSd AS, and the other
scheme that is defined by 3GPP and initially sourced from an OAM Server
belonging to the 5GMS System operator. Each metrics scheme requires the 5GMSd
Client to perform metrics collection and subsequent metrics reporting to the
5GMSd AF according to the configuration rules of that scheme. Furthermore, it
is assumed that the 5GMSd AF is required to deliver metrics reports obtained
from the 5GMSd Client to separate destination entities, upon optionally having
perfomed post-processing of the original report information, according to the
configuration rules of each metrics scheme. The 5GMSd AF and 5GMSd AS
functions can be either trusted or untrusted.
Figure 5.5.3-1: Metrics collection and reporting via 5GMSd AF-based
configuration
The message sequence steps are described below:
1: The 5GMSd AF is provisioned with two separate sets of metrics reporting
configuration information -- metrics scheme_1 as defined by the 5GMSd
Application Provider and metrics scheme_2 as defined by 3GPP, each pertaining
to metrics collection by the Media Player, retrieval of those collected
metrics from the Media Player by the Media Session Handler, and the generation
and delivery of metrics reports from the Media Session Handler to the 5GMSd
AF. The 5GMSd AF is similarly provisioned with two separate sets of metrics
reporting configuration information, associated with the metrics schemes 1 and
2, regarding required post-processing functionality and subsequent and
separate delivery of processed metrics reports to the 5GMSd Application
Provider and to the OAM Server.
2: The 5GMSd-Aware Application triggers the Service Announcement and Content
Discovery procedure. The Servie Announcement includes the whole Service Access
Information that contains metric configuration info for metrics schemes 1 and
2, with their associated metrics collection configurations acquired by the
Media Player and metrics collection configurations acquired by the Media
Session Handler.
3: Time passes until the 5GMSd UE initiates session establishment and media
playback.
4: The 5GMSd-Aware Application informs the Media Player of impending media
playback.
5a: The Media Player requests the establishment of a streaming session with
the Media Session Handler which acknowledges the request.
5b: The Media Session Handler requests the establishment of a streaming
session with the 5GMSd AF which confirms the streaming session establishment.
5c: The Media Session Handler informs the Media Player the successful set-up
of the streaming session.
6: Media playback pipeline is set up between the Media Player, the 5GMSd AS
and the 5GMSd Application Provider.
7: The Media Session Handler queries the Media Player on its capability to
perform metrics collection (measurement and logging function) in accordance
with both schemes 1 and 2 as defined by its metrics configuration.
8: The Media Player acknowledges its support for the collection of the
required metrics of all configured schemes.
During the course of media playback, steps 9-18 below may be repeated,
depending on the duration of the playback and the frequency of metrics
reporting as set by the metrics configuration for each of the two schemes.
9: Assuming a live streaming service, media content is delivered via push
ingest from the 5GMSd Application Provider to the 5GMSd AS.
10: The Media Player fetches media content from the 5GMSd AS and begins media
playback.
11: The Media Player notifies the Media Session Handler of the start of media
playback, causing the Media Session Handler to initialize and begin countdown
of separate metrics reporting interval timers for schemes 1 and 2.
12: Upon expiration of timer_1 (associated with scheme_1), the Media Session
Handler retrieves the logged metrics measurements from the Media Player
according to scheme_1.
13: In accordance with its metrics reporting configuration as provisioned in
step 2, a metrics report for scheme_1 is sent from the Media Session Handler
to the 5GMSd AF.
14: Upon expiration of timer_2 (associated with scheme_2), the Media Session
Handler retrieves the logged metrics measurements from the Media Player
according to scheme_2.
15: In accordance with its metrics reporting configuration as provisioned in
step 2, a metrics report for scheme_2 is sent from the Media Session Handler
to the 5GMSd AF.
16: In accordance with its metrics reporting configuration as provisioned in
step 1, the 5GMSd AF performs separate post-processing in accordance with
schemes 1 and 2 (e.g. filtering, aggregation, reformatting) of the received
types of metrics reports.
Furthermore, in accordance with its metrics reporting configuration as
provisioned in step 1:
17: The 5GMSd AF sends a processed metrics report in accordance with scheme_1
to the 5GMSd Application Provider.
18: The 5GMSd AF sends a processed metrics report in accordance with scheme_2
to the OAM Server.
Upon the termination of media playback (as notified by the 5GMSd-Aware
Application to the Media Player) a final round of metrics collection and
reporting is performed:
19: The Media Session Handler obtains the latest metrics measurements from the
Media Player in accordance with schemes 1 and 2. These procedures might occur
prior to the nominal expiration of the metrics reporting interval timers.
20: Final metrics reports, in accordance with schemes 1 and 2 are sent by the
Media Session Handler to the 5GMSd AF. These procedures might occur prior to
the expiration of the nominal metrics reporting intervals.
21: The 5GMSd AF performs post-processing of the received final metrics
reports in accordance with schemes 1 and 2.
22: Same as step 17.
23: Same as step 18.
NOTE: Although not explicitly shown or described in Figure 5.3.3-1, should the
5GMSd AF represent an untrusted network entity and the OAM Server represent a
trusted network entity, the delivery of processed metrics reports from the
5GMSd AF to the OAM Server, as depicted in steps 18 and 23, must be mediated
by the NEF (Network Exposure Function).
### 5.5.4 Metrics reporting configuration parameters
Table 4.2.3-4 in clause 4.2.3 describes the metrics reporting configuration
parameters used in step 5 of Figure 5.5.2-1 and step 3a of Figure 5.5.3-1.
Note that some of the parameters are only relevant for a specific reporting
option, as shown in Table 5.5.4-1 below.
Table 5.5.4-1: Metrics reporting configuration parameters and options
**Parameters** **Relevance in RAN-based reporting?** **Relevance in 5GMSd AF-
based reporting?**
* * *
Server address No Yes Scheme No (default 3GPP) Yes DNN No Yes Reporting
interval Yes Yes Sample percentage Yes Yes Streaming source filter Yes Yes
Metrics Yes (3GPP-defined) Yes (3GPP-defined or non-3GPP defined)
## 5.6 Consumption reporting
### 5.6.1 Consumption reporting procedure
Figure 5.6-1: Consumption reporting
Steps:
The first phase is the initialisation phase:
1: The 5GMSd-Aware Application is started.
2: A media content item is selected.
3: The 5GMSd-Aware Application triggers the Media Session Handler to start
content playback. The Media Player Entry is provided.
4: The 5GMSd AF initializes the parameters for the consumption reporting
configuration (e.g. frequency).
5: The Media Session Handler triggers consumption reporting.
6: The Media Session Handler starts the Media Player with the Media Player
Entry.
The second phase is media playback:
> The user preferences may be changed:
7: The 5GMSd-Aware Application selects/changes the user preferences.
8: The Media Player transmits consumption reporting user preferences to the
Media Session Handler.
When media is playing, the consumption reporting parameters may be updated.
9: The 5GMSd AF updates the consumption reporting parameters.
When media is playing:
10: The Media Player regularly accesses to the media content.
11: In case of changes to the consumed media properties, the Media Player
transmits the changes to the Media Session Handler.
12: The Media Session Handler regularly sends report(s) to the 5GMSd AF.
The last phase is to stop the media:
13: The 5GMSd-Aware Application triggers the Media Session Handler to stop
content playback.
14: The Media Session Handler stops consumption reporting.
15: The Media Session Handler may send final consumption report(s) to the
5GMSd AF.
17: The Media Session Handler stops the Media Player.
### 5.6.2 Consumption reporting parameters
Table 4.2.3‑2 describes the parameters used in step 4 of clause 5.6.1.
Table 5.6.2-2 below describes the additional parameters used in steps 13 or 16
of clause 5.6.1.
Table 5.6.2-2: Additional consumption reporting parameters
+---------------------------------+-----------------------------------+ | Parameters | Description | +=================================+===================================+ | Media Player Entry pointer | Identify the Media Player Entry. | | | | | | In the case of DASH, the Media | | | Player Entry pointer can be a URL | | | of the MPD. | +---------------------------------+-----------------------------------+ | Consumption reporting client ID | Identify the identifier of the UE | | | that consumes the data. | +---------------------------------+-----------------------------------+ | Location type | Identify the UE location type. | | | | | | This parameter is only used when | | | the location reporting is enabled | | | for the UE or for the Downlink | | | Streaming session with a | | | condition that the UE allows to | | | share its location within | | | operator's trust domain. | | | | | | The location type can be CGI, | | | ECGI or NCGI as defined in TS | | | 23.003 [9]. | +---------------------------------+-----------------------------------+ | Location | Identify the UE location. | | | | | | This parameter is only used when | | | location reporting is enabled for | | | the UE or for the Downlink | | | Streaming session, and when the | | | UE allows its location to be | | | shared within the Network | | | Operator's trust domain. | +---------------------------------+-----------------------------------+ | Media consumed | Identifies the media consumed. | | | | | | In the case of DASH, the | | | AdaptationSet\@id may be used. | +---------------------------------+-----------------------------------+ | Start time | The time when media consumption | | | started. | +---------------------------------+-----------------------------------+ | Duration | The duration of media consumption | | | relative to the start time. | +---------------------------------+-----------------------------------+
### 5.6.3 Triggering consumption reporting
If consumption reporting is supported and activated, the 5GMSd Client shall
send a consumption report when any of the following conditions is met:
> \- Start of 5GMS consumption of a Downlink Streaming session;
\- Stop of 5GMS consumption of a Downlink Streaming session;
\- Upon determining the need to report ongoing 5GMS consumption
\- Reports are sent at periodic intervals determined by the _reporting
interval_ attribute of the consumption reporting configuration specified in
Table 4.2.3‑2.
\- Upon determining a location change if location reporting is requested by
the 5GMSd AF and is allowed to be reported by the UE.
NOTE: Whenever a consumption report is sent, the 5GMSd Client is expected to
reset its corresponding reporting interval timer to the value of that
attribute and begin countdown of the timer. Whenever the 5GMSd Client stops
consumption of the same session, it is expected to disable its corresponding
reporting interval timer.
## 5.7 Establishing a Unicast Downlink Media Streaming Session with 5GMSd AF
interactions for dynamic policy updates
### 5.7.1 General
This clause describes the provisioning for dynamic policy invocation and the
establishment of a unicast downlink streaming session using the dynamic policy
API. The establishment of the unicast downlink media streaming session uses
5GMSd AF interactions, as described in Steps 4 to 8 of clause 5.1. The dynamic
policy API allows separate handling of Service Data Flows within the same PDU
Session. The Media Session Handler provides a Policy Template Id together with
Service Data Flow Descriptions when requesting a dynamic policy. An example
Policy Template Id value is "background_data".
The Media Session Handler provides needed information to the 5GMSd AF, so that
the 5GMSd AF can combine the semi-static parameters from a Policy Template
(which is associated with the Policy Template Id) with the API parameters to
trigger a dynamic PCC rule update using the NEF or PCF.
The 5GMSd AF may trigger, for example, the "AF session with required QoS
procedure" (see TS 23.502 [3] clause 4.15.6.6) for updating QoS related
dynamic PCC rules. For changing charging related rules, the 5GMSd AF may
trigger the "Change the chargeable party during the session" procedure (see TS
23.502 [3] clause 4.15.6.5).
### 5.7.2 Provisioning
The provisioning for the dynamic policy procedure follows generally the
procedure from clause 5.3. Specifically, the Dynamic Policy feature is
activated and, as result, the 5GMSd Application Provider is able to provision
one or more Policy Templates.
The domain model of M1d and M5d APIs is depicted in Figure 5.7.2-1.
Realization of the dependencies between M1d and M5d data entries are up to
implementation.
NOTE: Multiple M5d 5GMSd AF nodes may reference the same M1d resource.
Figure 5.7.2-1: Domain model for dynamic policies
A Policy Template is identified by a Policy Template Id and contains semi-
static parameters, including the API entry for the PCF/NEF interactions. The
list of provisioned Policy Template Ids is communicated as valid Policy
Template Ids to the Media Session Handler. The Media Session Handler uses one
of the valid Policy Template Ids when invoking a dynamic policy.
### 5.7.3 Progressive Download of On-Demand Content
This procedure describes the establishment of a unicast downlink media media
streaming session with 5GMSd AF interactions for dynamic policy updates. A
streaming session may use 3GP File Format (Progressive Download), 3GP Timed
Text or other (potentially non-3GPP defined) formats.
Figure 5.7-1: High Level Procedure for progressive download for on-demand
media
Prerequisites:
\- The 5GMSd Application Provider has provisioned the 5G Media Streaming
System and has set up content ingest.
\- The 5GMSd-Aware Application has received the Service Announcement from the
5GMSd Application Provider.
\- The Service Access Information contains detailed information for the policy
related interactions. Specifically, the information includes URL(s) for the
5GMSd AF, an identifier of the 5GMS Provisioning Session and a list of
authorized Policy Type indications for that specific application.
\- The 5GMSd Application Provider has agreed an SLA with the Network Operator
defining the possible QoS levels and their charging rates (see TS 23.503 [4]
clause 6.1.3.22). The PCF is configured with the corresponding QoS parameters
and charging information.
Steps:
1: The 5GMSd-Aware Application triggers the Service Announcement and Content
Discovery procedure. The Service Announcement includes either the whole
Service Access Information (i.e. details for Media Session Handling (M5d) and
for Media Streaming access (M4d)) or a reference to the Service Access
Information. The configuration parameters are listed in Table 5.7.4-1.
NOTE: The Service and Content Discovery procedure only involves the 5GMSd-
Aware Application and the external Application Server, and hence is out of
scope of the present document.
2: A Media Player Entry is selected.
3: The 5GMSd-Aware Application triggers the Media Session Handler to start
media playback. The Media Player Entry is provided to the Media Session
Handler.
4: When the 5GMSd-Aware Application has received a reference to the Service
Access Information (see step 1), the Media Session Handler interacts with the
5GMSd AF to acquire the whole Service Access Information.
5: The Media Session Handler triggers the Media Player to start the session.
6: The Media Player establishes the transport session, e.g. a TCP connection.
7: The Media Player notifies the Media Session Handler about the Service Data
Flow Description(s) of the transport session established in the previous step
(see TS 23.502 [3]), as defined in the Service Access Information. This can be
for example 5-tuples.
8: The Media Session Handler requests that a dynamic policy be applied to the
media session. The request includes at least the Provisioning Session
identifier, the Service Data Flow Description(s) and the Policy Template
identifier (see Table 5.7.4‑1) to be applied to the described transport
session. In some cases, a QoS specification is also provided, containing
desired QoS information. The 5GMSd AF uses the Policy Template indication for
the related procedure and to identify the related network function.
9: This step applies when the 5GMSd AF resides in the trusted Data Network.
Depending on the Policy Template, the step is executed either:
a. When the Policy Template relates to QoS, the 5GMSd AF may either directly
interact with the PCF or may use a NEF service:
\- when directly interacting with the PCF, the 5GMSd AF uses the
_Npcf_PolicyAuthorization_ Service as defined in TS 23.502 [3] clause
5.2.5.3).
\- when interacting via the NEF with the PCF, continue at step 10a.
b. When the Policy Template relates to a different charging scheme, the 5GMSd
AF may either directly interact with the PCF or may use a NEF service:
\- when directly interacting with the PCF, the 5GMSd AF uses the
_Npcf_PolicyAuthorization_ Service as defined in TS 23.502 [3] clause
5.2.5.3).
\- when interacting via the NEF with the PCF, continue at step 10b.
10: This step applies when the 5GMSd AF resides in the external Data Network.
Depending on the Policy Template, the step is executed either:
a. When the Policy Template relates to QoS, the 5GMSd AF may use the
_Nnef_AFsessionWithQoS_ service as defined in TS 23.502 [3] clause 5.2.6.9.
(The complete call flow is described in TS 23.502 clause 4.15.6.6.)
b. When the Policy Template relates to a different charging scheme, the 5GMSd
AF may use the _Nnef_ChargeableParty_ service as defined in TS 23.502 [3]
clause 5.2.6.8. (The complete call flow is described in TS 23.502 clause
4.15.6.4 and clause 4.15.6.5.) The Policy Template may contain the Sponsor
Information (values, based on SLA negotiation) and Background Data Transfer
Reference ID. The Flow description is provided by the Media Session Handler at
API invocation.
11: The Media Session Handler queries the status of the dynamic policy
invocation. The response contains status information (policy accepted,
rejected, etc) and information on policy enforcement such as the enforcement
method and enforcement bit rate.
12: The Media Session Handler notifies the Media Player according to the
response from the 5GMSd AF (see Table 5.6.4-2).
13: The Media Player sends the request for the progressive download content.
14: The Media Player receives the initialization information of the
progressive download content. The initialization information contains
configuration parameters for reception of the media, and optionally also DRM
information.
15: The Media Player configures the rendering pipeline for media playback.
16: The Media Player notifies the Media Session Handler, providing the
transport session information and some media content related information.
17: Optional: Media Player acquires a DRM License from as the 5GMSd
Application Provider.
18: The Media Player receives media content and puts it into the rendering
pipeline.
19: The Media Player continues to receive and play back the media content.
### 5.7.4 DASH Streaming
It is assumed here that the key information to initialize the media decoding
and rendering pipeline is present in the Media Player Entry (or referenced by
the Media Player Entry). The intention is to provide the client with
information to setup the media decoding and rendering pipeline in such a way
that no pipeline reset is needed during the session. Implementations need to
consider that parts of the information are provided with the initialization
segments.
It is assumed that the client is enabled to use the same media decoding and
rendering pipeline during the session.
Figure 5.7-2: High Level Procedure for DASH content
Prerequisites:
\- The 5GMSd Application Provider has provisioned the 5G Media Streaming
System and has set up content ingest.
\- The 5GMSd-Aware Application has received the service announcement from the
5GMSd Application Provider.
\- The Service Announcement Information contains detailed information for the
policy related interactions. Specifically, the information includes URLs for
the 5GMSd AF, an identifier of the Provisioning Session and a list of
authorized Policy Type indications for that specific application.
\- The 5GMSd Application Provider has agreed an SLA with the Network Operator
defining the possible QoS levels and their charging rates (see TS 23.503 [4]
clause 6.1.3.22). The PCF is configured with the corresponding QoS parameters
and charging information.
Steps:
1: The 5GMSd-Aware Application triggers the Service Announcement and Content
Discovery procedure. The Content Discovery procedure only involves the App
5GMSd-Aware Application and the 5GMSd Application Provider. The Service
Announcement includes either the whole Service Access Information (i.e.
details for Media Session Handling (M5d) and for Media Streaming access (M4d))
or a reference to the Service Access Information. The configuration parameters
are listed in Table 5.7.4-1.
2: A media content item is selected.
3: The 5GMSd-Aware Application triggers the Media Session Handler to start
media playback. The Media Player Entry is provided to the Media Session
Handler.
4: When the 5GMS-Aware Application has received only a reference to the
Service Access Information (see step 1), the Media Session Handler interacts
with the 5GMSd AF to acquire the whole Service Access Information.
5: The Media Session Handler triggers the Media Player to start the session.
6: The Media Player establishes a transport session for acquiring the MPD
referenced by the Media Player Entry.
7: The Media Player requests the MPD.
8: The Media Player receives the MPD.
9: The Media Player processes the MPD. It determines, for example, the number
of needed transport sessions for media acquisition. The Media Player should be
able to use the MPD information to initialize the media pipelines for each
media stream. The MPD should also contain information to start the DRM client
initialization, when DRM is used.
10: The Media Player notifies the Media Session Handler about the MPD. The
notification may contain parameters from the MPD.
11: (Optional) the Media Player acquires the necessary DRM information, for
example a DRM License.
12: The Media Player configures the media rendering pipeline.
13: The Media Player establishes the necessary transport session(s) for
acquiring the content. For example, the Media Player may establish one
transport session for each media component (audio, video, etc) and possibly
additional transport sessions for other media representations.
14: The Media Session Handler is notified about the established transport
session(s) for the content by providing the Service Data Flow Description of
the application flows as defined in the Service Access Information. This can
be for example 5-tuples.
15: The Media Session Handler requests that a dynamic policy be applied to the
media session. The request includes at least the Provisioning Session
identifier, the Service Data Flow Description(s) and the Policy Template
identifier (see Table 5.7.4-1), to be applied to the described transport
session. In some cases, a QoS specification is also provided, containing
desired QoS information. The 5GMSd AF uses the Policy Template for the related
procedure and to identify the related network function.
NOTE: The Media Session Handler may add and remove Service Data Flow
description(s) from the dynamic policy resource during the lifetime of the
Media Streaming Session.
16: This step applies when the 5GMSd AF resides in the trusted Data Network.
Depending on the Policy Template, the step is executed either:
a. When the Policy Template relates to QoS, the 5GMSd AF may either directly
interact with the PCF or may use a NEF service:
\- when directly interacting with the PCF, the 5GMSd AF uses the
_Npcf_PolicyAuthorization_ service as defined in TS 23.502 [3] clause
5.2.5.3).
\- when interacting via the NEF with the PCF, continue at step 17a.
b. When the Policy Template relates to a different charging scheme, the 5GMSd
AF may either directly interact with the PCF or may use a NEF service:
\- when directly interacting with the PCF, the 5GMSd AF uses the
_Npcf_PolicyAuthorization_ service as defined in TS 23.502 [3] clause
5.2.5.3).
\- when interacting via the NEF with the PCF, continue at step 17b.
17: This step applies when the 5GMSd AF resides in the external Data Network.
Depending on the Policy Template, the step is executed either:
a. When the Policy Template relates to QoS, the 5GMSd AF may use the
_Nnef_AFsessionWithQoS_ service as defined in TS 23.502 [3] clause 5.2.6.9.
(The complete call flow is described in TS 23.502 clause 4.15.6.6.)
b. When the Policy Template relates to a different charging scheme, the 5GMSd
AF may use the _Nnef_ChargeableParty_ service as defined in TS 23.502 [3]
clause 5.2.6.8. (The complete call flow is described in TS 23.502 clause
4.15.6.4 and clause 4.15.6.5.) The Policy Template may contain the Sponsor
Information (values, based on SLA negotiation) and Background Data Transfer
Reference ID. The Flow Description is provided by the Media Session Handler at
API invocation.
18: The Media Session Handler queries the status of the dynamic policy
invocation. The response contains status information (policy accepted,
rejected, etc) and information on policy enforcement such as the enforcement
method and enforcement bit rate.
19: The Media Session Handler updates the configuration of the Media Player
according to the response from the 5GMSd AF (See Table 5.6.4-2).
20: The Media Player requests a DASH initialization segment. The Media Player
repeats this step for each required initialization segment.
21: The Media Player receives the initialization segments.
22: The Media Player requests DASH media segments according to the MPD.
23: The Media Player receives media segments and feeds them into the
appropriate media rendering pipeline.
24: Previous steps are repeated according to the MPD information.
### 5.7.5 Parameters for dynamic policy invocation configuration
Table 5.7.5-1: Status information dynamic policy
**Parameters** **Description**
* * *
Policy Enforcement Information about the policy enforcement system.
## 5.8 Dynamic Policy based on Network Slicing for Downlink Media Streaming
5.8.1 Procedure
The 5GMSd Application Provider requests the assignment of more than one
network slice for the distribution of the service. The 5GMSd Application
Provider indicates the desired network slice features that correspond to the
Service Access Information. Upon successful assignment of the network slices
for the service, the 5GMSd AF shall respond with the list of allowed S-NSSAIs
to the 5GMSd Application Provider.
Figure 5.8.1-1 is the flowchart diagram for this procedure.
Figure 5.8.1-1 Dynamic Policy based on Network Slicing for Downlink Streaming
Pre-requisites:
1\. The UE knows how to access the network slice(s) associated with a
particular Provisioning Session.
2\. The 5GMSd AS(s) serving the content for the particular Provisioning
Session shall be accessible through the DNN(s) associated to the network
slice(s) provisioned for the distribution of that content.
The steps are as follows:
1\. The 5GMSd-Aware Application triggers media playback by invoking the Media
Player with the Media Player Entry for the selected content.
2\. The Media Player requests the manifest from the 5GMSd AS.
3\. The Media Player notifies the Media Session Handler about the upcoming
media session and may request specific 5GMSd AF-based Network Assistance for
that session, when not already established.
4\. The Media Session Handler retrieves information from the 5GMSd AF to
assist with the route selection for the session. This may include information
about the network slices, the DNNs, any pre-authorized QoS guarantees for that
Provisioning Session. The Media Session Handler gets information about the
operation point selection from the Media Player as described in step 4.
5\. The Media Session Handler and the UE Policy Management in the UE perform
the route selection procedure using information such as the playback operation
point, the traffic descriptors. The UE Policy Management will use the matching
filter to retrieve the Route Selection descriptor, which provides the DNN, and
the S-NSSAI(s), identifying the network slice(s) to be used for this
Provisioning Session.
6\. The UE reuses an existing PDU session with the selected S-NSSAI and DNN
from step 5, or requests the establishment of a new PDU session with the
identified parameters, if one doesn't exist already.
7\. The streaming of the media content at the target operation point starts.
## 5.9 Downlink Network Assistance
### 5.9.1 Introduction
The Network Assistance (NA) feature enables a UE that is receiving a downlink
media stream to improve the QoE of the media streaming session, by being able
to make use of two distinct facilities.
The first facility is **bit rate recommendation** (**throughput estimation)**.
This enables the UE to start a downlink streaming session at the most
appropriate bit rate for the network conditions at hand, or to obtain a
recommendation from the network which will remain valid until further notice
during a media streaming session. The recommended bit rate is based on network
estimations or predictions of available link bandwidth. This function is
provided as an additional tool to support the UE, in addition to the common
approach of the UE performing its own estimation based on measurement of the
downlink traffic in the past.
The second facility is the **delivery boost**. The 5GMS Client uses this
function to indicate to the network that a temporary boost, i.e., a temporary
increase of network throughput for this client is needed in order to avoid the
risk of media playback stalling due to buffer under-run, which could otherwise
occur during the next media segment or soon after. Throughput boosting may
also be used at the start of a playback session to shorten the time to start
media playback, giving a better experience for the user.
Network Assistance for downlink media streaming may be offered to the UE in
one of two ways:
\- Based on interaction between the UE and the 5GMSd AF, with a subsequent
interaction between the 5GMSd AF and the PCF (or the NEF);
\- Based on interaction between the UE and the RAN, re-using the ANBR-based
RAN signalling.
The UE shall not use both approaches on the same Network Assistance session.
Figure 5.9.1-1 depicts the Network Assistance feature in the context of the
5GMS architecture, showing the scope of both approaches.
Figure 5.9.1-1: Downlink Network Assistance alternative approaches
### 5.9.2 5GMSd AF-based downlink Network Assistance
The Network Assistance (NA) feature enables a UE to receive a bit rate
recommendation from the 5GMSd AF that provides the NA server function. The
5GMSd AF provides the response with an estimation of throughput, or the
recommend­ation of a bit rate which will remain valid until further notice.
The UE uses this estimation to derive the most suitable bit rate for its
downlink content session from the versions that might be available. The
network is expected to commit resources to be able to fulfil the
recommendation, although no guarantee for the bandwidth estimation can be
assumed. The 5GMSd Client may provide additional information, such as
available media versions, in terms of the required bit rates, to the 5GMSd AF.
The second facility is the delivery boost. The 5GMSd Client uses this function
to indicate to the network that a temporary boost, i.e., a temporary increase
of network throughput for this client, is needed.
Each interaction for the 5GMSd AF-based downlink Network Assistance procedures
consists of two steps in sequence:
1\. Between the UE (Media Session Handler) and the 5GMSd AF using a 5GMS API
at interface M5d;
2\. Between the 5GMSd AF and the PCF (or the NEF):
\- using the _Npcf_PolicyAuthorization_ procedure or _Nnef_AFSessionWithQoS_
procedure to request modification of the PDU session with the requested QoS
information.
\- using the _Npcf_PolicyAuthorization_ notification service or Nnef
Monitoring Event procedure to receive QoS changes. The 5GMSd AF receives these
policy change notifications asynchronously.
Network Assistance is performed within dedicated NA sessions that are a part
of the Media Session Handler procedures. Only 5GMSd Clients that have been
granted an NA session by the 5GMSd AF may execute the NA bit rate
recommendation and boost request procedures. This enables the 5GMSd AF to
enforce policies that could include the access to NA by certain 5GMSd Clients
only, such that authorisation to use NA facilities can be verified once at the
granting of an NA session, and does not need to be verified for each NA
request from the 5GMSd Client.
The procedures for 5GMSd AF-based downlink Network Assistance are:
1\. NA session intiation. The 5GMSd Client requests to initiate an NA session
with the 5GMSd AF. If the request fulfils any pre-requisites for access to NA
functionality, for example policy and charging, then the 5GMSd AF responds
with a confirmation that the NA session has been established.
2\. NA throughput estimation. The 5GMSd Client requests a throughput
estimation for a downlink media session from the 5GMSd AF. A unique identifier
for the downlink media session is provided by the 5GMSd Client.
If the set of available bit rates in the downlink media session is provided
with the request then the 5GMSd AF responds with the recommended bit rate
based on its throughput estimation. If the throughput estimation is lower than
the lowest value from the set of available bit rates, then the actual
throughput estimation is provided.
If no set of available bit rates is provided with the request then the 5GMSd
AF responds with the throughput estimation.
3\. NA delivery boost. The 5GMSd Client requests from the AF a downlink
delivery boost. A unique identifier for the downlink media session is provided
by the 5GMSd Client.
4\. NA session termination. The 5GMSd Client requests to terminate an NA
session with the 5GMSd AF. The unique identifier of the NA session to be
terminated is provided by the 5GMSd Client.
The AF responds positively if the indicated session could be terminated, and
negatively otherwise.
### 5.9.3 ANBR-based downlink Network Assistance
This approach for the downlink Network Assistance feature is based upon the
exchange of the bit rate recommendation message and bit rate recommendation
query message between the RAN and UE as described in TS 38.321 [9]. In this
case the Network Assistance function in the 5GMSd Client utilises a UE-
internal facility to access the RAN modem driver to access ANBR signalling
operations and to receive corresponding responses from the network. Hence,
this control interface is outside the scope of the 5GMS architecture.
The RAN in this architecture contains control plane and user plane entities
that interact with peer control plane and user plane entities in the UE.
• The control plane interactions involve the sending by the RAN of downlink
bit rate recommendations to the UE, which may occur either independently, or
in response to a boost request from the UE, via the exchange of the bit rate
recommendation message and bit rate recommendation query message between the
RAN and UE as described in TS 38.321 [9]. This control interface is outside
the scope of the 5GMS architecture.
• The user plane interaction pertains to downlink streaming media transport
over interface M4d.
# 6 Procedures for Uplink Media Streaming
## 6.1 General
The procedures for uplink media streaming allow a system user to create,
modify, establish and delete sessions. Uplink media streaming sessions exist
between a 5GMSu Client and a 5GMSu AS. The term **Sink Configuration** refers
to the provisioned parameters of a 5GMSu AS. The term **Source Session**
refers to the provisioned parameters in the 5GMSu Client.
The uplink streaming procedures follow a general high-level workflow, starting
from provisioning to the actual uplink streaming sessions. The egest session
refers to the time during which media content is uplink streamed into the
5GMSu AS. The provisioning session refers to the time period during which the
5GMSu Client is permitted to uplink stream media content. Interactions between
the 5GMSu AF and the 5GMSu Application Provider may occur at any time while
the Provisioning Session is active.
The 5GMSu Provisioning API allows selection of Media Session Handling (M5u)
and Uplink Streaming (M4u) options, including whether the media content is
published to trusted 5GMSu AS instances. The 5GMSu AF selects the M5u
interface according to the provisioning option. The Media Session Handling
interface exposed by the 5GMSu AF can be used for remote control, metrics
reporting, requesting different policy and charging treatments, or 5GMSu AF-
based Network Assistance.
When the 5GMSu AF and AS are in the same DN, then the 5GMSu AF selects the
5GMSu AS. Interactions between a 5GMSu AF and a 5GMSu AS (M3u interactions)
take place for 5GMS Egest (M2u) and Uplink Streaming (M4u) resource
reservations. The 5GMSu AS allocates M2u and M4u resources and communicates
resource identifiers back to the 5GMSu AF. The 5GMSu AF provides information
about the provisioned resources (in the form of resource identifiers) for
Media Session Handling, Egest and Uplink Streaming to the 5GMSu Application
Provider. The resource identifiers for Media Session Handling and Uplink
Streaming are needed by the 5GMSu Client to access the selected features.
When 5GMSu AF and 5GMSu AS are operated by different providers, then the M3u
interface is not used and the 5GMSu AF does not provide 5GMS Egest (M2u) and
Uplink Streaming (M4u) resource reservations. M3u procedures are not
specified.
5GMSu Client can (in principle) start the uplink streaming by activating its
uplink streaming session. The uplink streaming session for a given UE (or for
each UE) is active from the time at which the 5GMSu-Aware Application
activates the transmission of an uplink streaming service until its
termination.
The 5GMSu-Aware Application receives application metadata from the 5GMSu
Application Provider before transmitting the uplink streaming media. The
application metadata contains Service Access Information, which acts as an
entry point for the 5GMSu Client to start the uplink streaming session. The
5GMSu Client may either receive the Service Access Information from the 5GMSu
Application Provider (using a not standardized interface) or instructions for
a remote control session. When remote control is activated, then the 5GMSu
Client is remotely configured and controlled by a 5GMSu AF.
The Network Assistance (NA) feature enables a UE that is receiving a uplink
media stream to improve the QoE of the media streaming session, by being able
to make use of two distinct facilities.
The first facility is **bit rate recommendation** (**throughput estimation)**.
This enables the UE to start an uplink streaming session at the most
appropriate bit rate for the network conditions at hand, or to obtain a
recommendation from the network which will remain valid until further notice
during a media streaming session. The recommended bit rate is based on network
estimations or predictions of available link bandwidth. This function is
provided as an additional tool to support the UE, in addition to the common
approach of the UE performing its own estimation based on measurement of the
uplink traffic in the past.
The second facility is the **delivery boost**. The 5GMS Client uses this
function to indicate to the network that a temporary boost, i.e., a temporary
increase of network throughput for this client is needed, for example in order
to prevent the uplink media streaming buffer in the Media Streamer from
overflowing.
Network Assistance for uplink media streaming may be offered to the UE in one
of two ways:
\- Based on interaction between the UE and the 5GMSu AF, with a subsequent
interaction between the 5GMSu AF and the PCF (or the NEF), as defined in
clause 6.5.
\- Based on interaction between the UE and the RAN, re-using the ANBR-based
RAN signalling as defined in clause 6.7.
The UE shall not use both approaches on the same Network Assistance session.
Figure 6.1-1: High Level Procedure for uplink streaming
Steps:
1\. The 5GMSu Application Provider creates a Provisioning Session and starts
provisioning the usage of the 5G Media Streaming System. During the
establishment phase, the used features are negotiated and detailed
configurations are exchanged. The 5GMSu Application Provider receives Service
Access Information for M5u (Media Session Handling) and, when media content
reception is negotiated, Service Access Information for M2u (Egest) and M4d
(Uplink Streaming). This information is needed by the 5GMSu Client to access
the service. Depending on the provisioning, only Remote Configuration
information may be provided.
2\. When the 5GMSu AF and the 5GMSu AS are operated by the same provider (e.g.
the MNO), there may be interactions between the 5GMSu AF and 5GMSu AS, e.g. to
allocate 5GMSu egest and uplink streaming resources. The 5GMSu AS provides
resource identifiers for the allocated resources to the 5GMSu AF, which then
provides the information to the 5GMSu Application Provider. The M3u procedures
between 5GMSu AF and 5GMSu AS are not specified.
3\. The 5GMSu Application Provider provides the Service Announcement
Information to the 5GMSu-Aware Application.
NOTE: This may include manual entering of parameters.
The Service Announcement includes either the whole Service Access Information
(i.e. details for Media Session Handling (M5u) and for Media Streaming access
(M4u)) or only a remote configuration and control address (5GMSu AF URL). In
the latter case, the 5GMSu Client retrieves the Services Access Information in
a later step.
4\. The 5GMSu-Aware Application configures and starts the 5GMSu Client.
5\. When the 5GMSu-Aware Application decides to activate the streaming service
transmission, the Service Access Information is provided to the 5GMSu Client.
When remote configuration and control is activated, then the 5GMSu AF
configures and controls the 5GMSu Client remotely.
6\. Depending on the configurations, the 5GMSu Client uses the Media Session
Handling API towards the 5GMSu AF. The Media Session Handling API is used for
requesting different policy and charging treatments or 5GMSu AF-based Network
Assistance.
7\. The 5GMSu Client starts the Egest Session by activating the uplink
streaming session.
8\. The 5GMSu AS publishes the content towards the 5GMSu Application Provider.
## 6.2 Preparing for Uplink Media Streaming
### 6.2.1 Introduction
Before streaming media data in the uplink direction, a set of parameters are
provisioned at the 5GMSu AF/AS and at the 5GMSu Client. On the UE side, the
M8u API is used for local provisioning and the M5u API for remote control. On
the 5GMSu AF/AS, the M1u API is used for session provisioning.
### 6.2.2 Sink Configuration at the 5GMSu AF/AS
The procedure allows the configuration of a 5GMSu AS for media reception. A
Sink Session is created and updated. One or more media sessions are associated
with a sink session.
{width="6.697916666666667in" height="1.4166666666666667in"}
Figure 6.2.2-1: Sink Configuration states
The states describe the Sink Configuration and the relation to the media
session:
\- Sink Configuration created, no media session(s) active: The Sink
Configuration entry is created at the 5GMSu AF and may be updated/modified
before any media session(s) start.
\- Sink Configuration Provisioned, media session(s) active: The 5GMSu AS is
receiving uplink media data. Some properties of the Sink Configuration may be
updated while receiving media data.
\- Sink Configuration Provisioned, media session(s) paused: The 5GMSu AS is
temporarily not receiving uplink media data. Some properties of the Sink
Configuration may be updated.
\- Sink Configuration Provisioned, media session(s) terminated: The 5GMSu AS
is not receiving uplink media data anymore.
### 6.2.3 Source Configuration at the UE
The procedure allows the (remote) configuration of a UE for media
transmission. When remote control is used, the application authorizes remote
control e.g. by providing the remote control server address. It is assumed
that a 5GMSu Client can have only a single Source Configuration at a time,
which can be remotely configured. One or more media sessions are associated
with the Source Configuration.
{width="6.697916666666667in" height="1.4791666666666667in"}
Figure 6.2.3-1: Source Configuration states
The states describe the Source Configuration and the relation to the media
session.
\- Source Configuration created, no media session(s) active: The Source
Configuration entry is created and may be updated/modified before any media
session(s) start. When remote control is enabled, the connection to the remote
control function is established.
\- Source Configuration Provisioned, media session(s) active: The 5GMSu Client
is sending uplink media data. Some properties of the Source Configuration may
be updated while sending media data.
\- Source Configuration Provisioned, media session(s) paused: The 5GMSu Client
is temporarily not sending uplink media data. Some properties of the Source
Configuration may be updated.
\- Source Configuration Provisioned, media session(s) terminated: The 5GMSu
Client is not receiving uplink media data anymore.
## 6.3 Establishment of an Uplink Media Streaming Session
The procedure allows a Media Streamer to establish an uplink streaming session
with a 5GMSu AS.
Figure 6.3-1: Uplink Streaming Session Establishment
Steps:
1: During provisioning, the Media Streamer component of the 5GMSu Client is
provisioned with basic information, such as the 5GMSu AF and 5GMSu AS
addresses. For some devices, only the remote control information is
provisioned and all additional parameters are retrieved from Remote
Controller.
2: The 5GMSu-Aware Application starts uplink media streaming.
3: The 5GMSu-Aware Application instructs the 5GMSu Client to provide a Media
Streaming Entry.
When remote control is provisioned in step 1:
4: The transport session for remote control is established.
5: The 5GMSu Client starts waiting for incoming remote control commands.
6: The 5GMSu Client receives a remote control command to start uplink
streaming (either now or with a timestamp). The Remote control command may
contain details of the 5GMSu AS, etc.
7: The 5GMSu Client establishes the uplink transport session.
8: The 5GMSu Client establishes the uplink media streaming session.
When client assistance is provisioned:
9: The 5GMSu Client establishes the assistance channel to the provisioned
5GMSu AF(s).
When server assistance is desired (e.g. for QoS or charging):
10: The 5GMSu AS establishes an assistance session with the 5GMSu AF.
## 6.4 Termination of an Uplink Media Streaming Session
The procedure defines the termination of an uplink media streaming session.
Figure 6.4-1: Uplink Streaming Session Teardown
Steps:
1: An uplink media streaming session is active and should be terminated.
When the 5GMSu-Aware Application terminates the session, e.g. triggered by
user input:
2: The 5GMSu-Aware Application sends a Stop commands to the 5GMSu Client.
When remote control is used and the remote control session is established:
3: The 5GMSu Client receives a stop command.
4: The 5GMSu Client stops the capturing process.
5: The uplink media streaming process is terminated.
6: The uplink transport session is released.
When client assistance was established:
7: The 5GMSu AF is notified that the uplink media streaming session is
terminated
When server assistance was established:
8: The 5GMSu AS is notified the 5GMSu AF that the uplink media streaming
session is terminated
## 6.5 Providing 5GMSu AF-based Network Assistance
The procedure a 5GMSu Client uses to obtain network assistance from a 5GMSu AF
is defined in figure 6.5-1 below.
Figure 6.5-1: Providing 5GMSu AF-based Network Assistance
Steps:
1: An uplink streaming session is active. A Network Assistance Session is
established with the 5GMSu AF.
2: The Media Session Handler in the 5GMSu Client requests assistance
information from the 5GMSu AF.
2a: The 5GMSu AF interacts with the PCF (or, if the AF is deployed outside the
Trusted DN, with the PCF via the NEF) to obtain the requested assistance
information.
3: The assistance information is returned to the Media Session Handler in the
5GMSu Client.
4: The Media Streamer in the 5GMSu Client takes an appropriate action based on
the information received.
## 6.6 Providing Remote Control
The procedure defines the remote control from a 5GMSu AF. Note that the 5GMSu
AF for remote control may be deployed as a network based function or a UE-
based function.
Figure 6.6-1: Uplink Streaming Session Establishment
Steps:
1: An uplink streaming session is active. The Remote Control Session is
established with the 5GMSu AF.
2: The 5GMSu AF for Remote Control determines the need to send a remote
control message.
3: The remote control message is sent to the 5GMSu Client.
4: The 5GMSu Client takes the defined action specified in the remote control
message.
## 6.7 RAN Signalling based Support for Uplink Network Assistance
Figure 6.7-1 depicts an uplink streaming architecture where RAN signalling is
employed to support uplink Network Assistance functionality.
The RAN in the architecture contains control plane and user plane entities
that interact with peer control and user plane entities in the UE, in the
request/response for boost of the uplink streaming data rate, and subsequent
media transport. The user plane functionality as shown in Figure 6.7-1 (solid
line going from UE to RAN to 5GMSu AS) illustrates the scheduling/passthrough
functionality associated with user plane communications, governed by the RAN,
as result of the uplink assistance messaging over the control plane (shown by
dotted line between the UE and RAN). It is assumed in this case that 5GMSu AF-
based Network Assistance is not utilized.
It should be noted that although the 5GMSu AF is not utilized when RAN
signaling based network assistance is performed, it is assumed that there is a
higher level network entity which coordinates and tracks network assistance
performed using RAN signaling versus application signaling for individual UEs.
Figure 6.7-1: RAN Signaling based Uplink Network Assistance
# 7 5GMS Network Media Processing
## 7.1 General
A 5GMS Application Provider may request media processing to be performed on
its media data. This can be instantiated as part of the Uplink or Downlink
streaming. For uplink, FLUS TS 26.238 [5] provides measures to describe the
required media processing as part of the FLUS session creation request. For
downlink media distribution, the 5GMSd Application Provider may wish to
execute some media processing functions within the MNO network infrastructure.
The media processing is performed by a set of 5GMS AS(s), which may be
combined together to build complex media processing workflows. A 5GMS AF
coordinates the media processing and ensures that the appropriate QoS and
traffic handling for the session are provided.
## 7.2 Media Processing Procedures for Downlink
As part of setting up a Content Hosting Configuration for downlink media
streaming, a 5GMSd Application Provider may request custom processing to be
performed.
The following processing operations may be available:
\- Adaptive Bit Rate (ABR) Encoding, Encryption and Encapsulation.
\- MPD (e.g. MPD) Generator and Segment (e.g. DASH) Packager.
\- Content Replacement (e.g. Ad insertion, blackouts, regional content):
\- MPD (e.g. MPD) modification.
\- App Server: other content enrichment functions such as Closed Caption
insertion, object detection, content filtering, etc.
The procedures are as follows:
Figure 7.2-1: Media Processing Procedures for Downlink
The steps are as follows:
1\. Upon setting up a Content Hosting Configuration, the 5GMSd Application
Provider requests media processing to be set up. The 5GMSd Application
Provider provides a description of the type and placement of the processing.
The 5GMS System may only allow a shortlisted set of media processing functions
to be used by the 5GMSd Application Provider.
2\. The 5GMSd AF provisions a selected set of 5GMSd AS(s) to fulfil the
requested media processing in the appropriate placement. Depending on the
configuration, one or multiple AS(s) may be involved.
3\. The 5GMSd AS(s) confirm successful provisioning to the 5GMSd AF.
4\. The 5GMSd AF confirms the successful creation of the Content Hosting
Configuration with the requested media processing to the external Media
application server.
5\. A 5GMSd Client sends a request for media content to one of the 5GMSd AS(s)
listed in the provisioned Content Hosting Configuration (see clause 5.4).
6\. If it does not already have a copy of the requested media cached, the
5GMSd AS fetches the media from the 5GMSd Application Provider.
7\. The 5GMSd AS processes the ingested media based on the provisioned media
processing workflow.
8\. The 5GMSd AS serves the requested media to the 5GMSd Client after
successful media processing.
Different variants of these procedures may be possible, depending on the type
of processing, the placement of the processing, and the characteristics of the
Content Hosting Configuration.
## 7.3 Media Processing Procedures for Uplink
FLUS TS 26.238 [5] allows for the provisioning of media processing by the FLUS
Source to the FLUS Sink. In such a scenario, the FLUS Sink will consist of a
FLUS 5GMSu AF and a FLUS 5GMSu AS. The 5GMSu AF instructs the 5GMSu AS to
perform processing of the media according to the provided media processing
document. Alternatively, it can share the media processing load among multiple
5GMSu AS(s).
The procedure is defined as follows:
Figure 7.3-1: Media Processing Procedures for Uplink
The steps are as follows:
1: Setup of uplink streaming configuration: The 5GMSu Application Provider
sends a request to start a FLUS session to the 5GMSu AF. The request contains
a description of the media processing that is to be performed by the 5GMSu AS.
Depending on the configuration one or multiple 5GMSu AS(s) may be involved.
2: Provision 5GMSu AS(s): The 5GMSu AF parses the media processing description
and provisions the 5GMSu AS(s) that will perform the requested processing. If
the requested processing is not accepted, the session creation fails.
3: 5GMSu AS(s) ready: The 5GMSu AS(s) confirm(s) correct configuration and
inform(s) the 5GMSu AF that it is ready to receive and process media as
requested.
4: Confirm uplink streaming configuration: The 5GMSu AF confirms the
successful creation of the uplink streaming configuration to the 5GMSu
Application Provider.
5: Uplink streaming session start: the session is triggered in the 5GMSu
Client.
6: Uplink media streaming: Media content is streamed from the 5GMSu Client to
the 5GMSu AS(s).
7: The 5GMSu AS(s) process(es) the received media based on the provisioned
media processing.
## 7.4 Edge Computing
NOTE: This clause is FFS.\
###### ## Annex A (informative): Usage Guidelines for collaboration scenarios
# A.0 General
This annex describes a set of collaboration scenarios and deployment options
of the 5G Media Streaming architecture. The intention is to illustate
different deployment options.
Note that the scenarios focus on the ownership of the functions. Scalability
realizations such as a CDN are not illustrated. As result of the scalability
considerations, the M4d-serving 5GMSd AS and/or M5d-serving 5GMSd AF may:
\- Consist of multiple (physical) servers, which may be addressed using a
single FQDN. A load balancer forwards client requests to one of these servers.
Forwarding may be via HTTP redirects or transparent towards the client.
\- Consist of multiple (physical) servers, where different servers, or
different groups of servers, may be addressed with different FQDNs. The client
may be made aware of this via the manifest (i.e. listing multiple base URLs).
NOTE: In this case the servers may be managed by the same or different parties
(e.g. MNO and/or 5GMSd Application Provider).
\- Be addressed with a single FQDN. For example, the MNO AS is mostly
transparent and acts as a proxy/cache.
# A.1 Collaboration 1
This collaboration scenario represents a typical OTT collaboration scenario,
where the 5GMSd AF and 5GMSd AS are deployed in an external Data Network.
{width="6.697916666666667in" height="2.3958333333333335in"}
Figure A.1-1: Collaboration 1
The interfaces M1d′ and M2d′ may be similar to interfaces M1d and M2d
respectively. Interface M4d follows 3GPP specifications.
NOTE: Although a single logical 5GMSd AS exposes both the M2d′ (Ingest) and
M4d (Downlink Streaming) interfaces, these APIs may, in a real deployment, be
implemented on different physical servers (with different FQDNs). Furthermore,
a large number of serving nodes, each with its own FQDN may offer the M4d
service, following CDN scaling principles.
# A.2 Collaboration 2
This collaboration scenario represents a MNO CDN scenario, where the CDN is
used for ingest and delivery of the content.
{width="6.697916666666667in" height="2.3958333333333335in"}
Figure A.2-1: Collaboration 2
# A.3 Collaboration 3
This collaboration scenario represents a typical OTT collaboration scenario,
where the 5GMSd AF and 5GMSd AS are deployed in an external Data Network. The
5GMSd AF interacts with the NEF via N33.
{width="6.677083333333333in" height="2.3958333333333335in"}
Figure A.3-1: Collaboration 3
NOTE 1: The M5d API may be exposed using a different FQDN than the M1d′ API
exposing function.
NOTE 2: The M5d API may be exposed using several FQDNs, e.g. for different M5d
assistance services.
# A.4 Collaboration 4
This collaboration scenario depicts a content hosting function in the external
Data Network, e.g. using a third-party CDN in collaboration with MNO offered
assistance and network services. The Provisioning API (M1d′) and Ingest API
(M2d′) may follow 5GMS specifications.
{width="6.697916666666667in" height="2.3958333333333335in"}
Figure A.4-1: Collaboration 4
Interfaces M1d′ and M2d′ may be similar to interfaces M1d and M2d
respectively. Interface M4d follows 5GMS specifications.
# A.5 Collaboration 5
This collaboration scenario is similar to Collaboration 4 with the difference
that the external content hosting function (5GMSd AS) is provisioned from a
5GMSd AF which is located in a trusted Data Network. It is expected that a
5GMSd AF and 5GMSd AS from different providers are interconnected using an M3d
interface.
{width="6.697916666666667in" height="2.3958333333333335in"}
Figure A.5-1: Collaboration 5
Interface M2d′ may be similar to interface M2d. All other interfaces depicted
follow 3GPP specifications.
# A.6 Collaboration 6
This collaboration scenario is similar to Collaboration 4 and Collaboration 5
with the difference that the trusted content hosting function (5GMSd AS) is
provisioned from an external 5GMSd AF. It is expected that a 5GMSd AF and
5GMSd AS from different providers are interconnected using an M3d interface.
{width="6.697916666666667in" height="2.3958333333333335in"}
Figure A.6-1: Collaboration 6
Interface M1d′ may be similar to interface M1d. All other interfaces depicted
follow 3GPP specifications.
# A.7 Collaboration 7
This collaboration scenario represents a MNO CDN scenario (like in
Collaboration 2) where the CDN is used for ingest and delivery of the content.
Additional 5GMS features are used which require interaction with the PCF.
{width="6.697916666666667in" height="2.3958333333333335in"}
Figure A.7-1: Collaboration 7
# A.8 Collaboration 8
This collaboration scenario represents a multi-MNO distribution scenario where
an external CDN (5GMSd AS) is used to deliver content through multiple 5GMSd
capable PLMNs. Additional 5GMSd features are used from the serving 5GMS System
which need interactions with the PCF of the serving PLMN.
{width="6.59375in" height="4.34375in"}
Figure A.8-1: Collaboration 8
# A.9 Collaboration 9
This collaboration scenario represents a multi-MNO distribution scenario where
an external CDN (5GMSd AS) is used to deliver content through multiple 5GMSd-
capable PLMNs. Additional 5GMSd features are used from the serving 5GMSd
system which need interactions with the NEF of the serving PLMN.
{width="6.322916666666667in" height="4.177083333333333in"}
Figure A.9-1: Collaboration 9
###### ## Annex B (informative): MNO-specific Service Access Information
acquisition
# B.1 General
A 5GMSd Application Provider may offer its content via multiple Access
Networks from different operators. Each access network can consist of a 5G
System and one or more 5G Media Streaming Architecture components, in
particular its own 5GMSd AFs. The 5GMSd AFs of that access network use their
own FQDNs and potentially their own URL root path elements. When a 5GMSd-Aware
Application is deployed in different 5G Systems the 5GMSd Client needs to
acquire Service Access Information that resolves to the 5GMSd AF endpoint
address(es) appropriate for the serving 5G System. The Service Access
Information contains the URLs and API parameters of the configured 5GMSd AFs
and ASs of that 5G Media Streaming System.
There are different ways to resolve the matching service access information.
This annex focuses on two solutions where the 5GMSd Client fetches the Service
Access Information from a 5GMSd AF within the Trusted DN of the serving mobile
network.
# B.2 Deployment with DNS-based resolution
Figure B.2-1 depicts the deployment for DNS-based resolution of the 5GMSd AF
in the Trusted DN of the MNO which is currently providing connectivity to the
5GMSd Client. The DNS functions are defined in RFC 1034 [14].
{width="6.452518591426072in" height="2.6365135608048993in"}
Figure B.2-1: DNS based resolution of 5GMSd AF in trusted DN
For the DNS-based resolution mechanism, the 5GMSd Client is provisioned with a
Service Access Information URL, for example dynamically via M8d or statically
within the code of the 5GMSd-Aware Application. The Service Access Information
URL contains an FQDN from the 5GMSd Application Provider or a global URL in
the GSMA domain (i.e. in the "3gppnetworks.org" domain).
Figure B.2-2: Message Sequence Chart for DNS-based resolution
Steps:
1: The 5GMSd-Aware Application is provisioned (among other parameters) with a
URL of the 5GMSd AF from which to acquire Service Access Information. The
5GMSd-Aware Application provides this URL to the 5GMSd Client upon start.
2: The 5GMSd Client uses DNS to resolve the FQDN of the URL. The 5GMSd Client
sends a DNS request to the DNS server in the Trusted DN.
3: The DNS server in the trusted DN is not responsible for the FQDN and the
DNS server forwards the DNS request to a DNS server in the external DN
responsible for the FQDN. This may be the DNS server of the 5GMSd Application
Provider or a GSMA DNS server.
4: Based on information from the originating network, the external DNS creates
a response. The response may be a _CNAME_ redirect (i.e. FQDN from the serving
mobile network responsibility) or an IP address (preferably an IP Anycast
Address).
5: The DNS server forwards the DNS response to the 5GMSd Client.
6: When the 5GMSd Client received another FQDN with the response (i.e. a
_CNAME_ DNS record), then the 5GMSd Client resolves the FQDN to an IP address.
The resolved IP address should be an IP address of an 5GMSd AF in the Trusted
DN.
7: The 5GMSd Client issues a request to the resolved 5GMSd AF in order to
acquire the Service Access Information.
8: The 5GMSd AF provides the Service Access Information in its response to the
5GMSd Client. The Service Access Information contains URLs and parameters
according to provisioned 5GMS features.
9: When needed, the 5GMSd Client uses the acquired Service Access Information
to activate the needed 5GMSd feature(s).
# B.3 Deployment with HTTPS-based resolution
Figure B.3-1 depicts the deployment for HTTPS-based resolution of the 5GMSd AF
in the Trusted DN of the MNO which is currently providing connectivity to the
5GMSd Client.
NOTE: The process of resolving IP addresses from FQDNs is not depicted in this
deployment architecture.
{width="6.506893044619423in" height="2.65873031496063in"}
Figure B.3-1: HTTPS based resolution of 5GMSd AF in Trusted DN
For the HTTPS-based resolution mechanism, the 5GMSd Client is provisioned with
a Service Access Information URL, for example dynamically via M8d or
statically within the code of the 5GMSd-Aware Application. The Service Access
Information URL contains an FQDN of a 5GMSd AF within the 5GMSd Application
Provider domain, which acts as a request redirector.
Figure B.3-2: Message Sequence Chart for HTTPS based resolution
Steps:
1: The 5GMSd-Aware Application is provisioned (among other parameters) with a
URL of the 5GMSd AF from which to aquire Service Access Information. The
5GMSd-Aware Application passes this URL to the 5GMSd Client upon start.
2: The 5GMSd Client uses DNS to resolve the FQDN of the URL.
3: The 5GMSd Client issues a request to the resolved 5GMSd AF in order to
acquire the Service Access Information.
4: Based on information from the originating network (e.g. visible IP of the
5GMSd Client), the 5GMSd AF in the External DN creates an HTTPS redirection
response. The 5GMSd AF looks up the according FQDN of the 5GMSd AF in the
trusted DN and sends an HTTPS redirection response to the 5GMSd Client.
When the 5GMSd AF in the External DN does not offer 5GMS features, or if the
5GMS features are not provisioned it instead provides a response containing an
HTTP error message.
NOTE: Instead of redirecting a 5GMSd Client to the 5GMSd AF in the Trusted DN,
the External 5GMSd AF may directly provide the Service Access Information in
the above step. In this case, the 5GMSd Application Provider needs to update
its 5GMSd AF according to changes within the Trusted DN, e.g. changes of
FQDNs.
5: The 5GMSd Client issues a request to the resolved 5GMSd AF in order to
acquire the Service Access Information.
6: The 5GMSd AF provides the Service Access Information in its response to the
5GMSd Client. The Service Access Information contains URLs and parameters
according to provisioned 5GMS features.
7: When needed, the 5GMSd Client uses the acquired Service Access Information
to activate the needed 5GMSd feature(s).
#