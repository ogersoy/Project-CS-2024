# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# Introduction
The present document is part 6 of a multi-part deliverable covering
conformance test specification for Mission Critical Services over LTE
consisting of:
3GPP TS 36.579-1 [2]: \"Mission Critical (MC) services over LTE protocol
conformance testing; Part 1: Common test environment\";
3GPP TS 36.579-2 [24]: \"Mission Critical (MC) services over LTE; Part 2:
Mission Critical Push To Talk (MCPTT) User Equipment (UE) Protocol conformance
specification\";
3GPP TS 36.579-3 [3]: \"Mission Critical (MC) services over LTE; Part 3:
Mission Critical Push To Talk (MCPTT) Server Application test specification\";
3GPP TS 36.579-4 [4]: \"Mission Critical (MC) services over LTE; Part 4: Test
Applicability and Implementation Conformance Statement (ICS)\";
3GPP TS 36.579-5 [5]: \"Mission Critical (MC) services over LTE; Part 5:
Abstract test suite (ATS)\";
**3GPP** **TS** **36.579-6: \"Mission Critical (MC) services over LTE; Part 6:
Mission Critical Video (MCVideo) User Equipment (UE) Protocol conformance
specification\" (the present document);**
3GPP TS 36.579-7 [25]: \"Mission Critical (MC) services over LTE; Part 7:
Mission Critical Data (MCData) User Equipment (UE) Protocol conformance
specification\".
# 1 Scope
The present document specifies the protocol conformance testing for testing a
MCVideo Client for compliance to the Mission Critical Video (MCVideo) over LTE
protocol requirements defined by 3GPP.
In particular the present document contains:
\- the overall test structure;
\- the test configurations;
\- the conformance requirement and reference to the core specifications;
\- the test purposes; and
\- a brief description of the test procedure, the specific test requirements
and short message exchange table.
The present document is valid for MCVideo Clients implemented according to
3GPP releases starting from Release 13 up to the Release indicated on the
cover page of the present document.
The following information relevant to testing specified in the present
document could be found in accompanying specifications:
\- default setting of the test parameters TS 36.579-1 [2];
\- Implementation Conformance Statement (ICS) TS 36.579-4 [4] and
Implementation eXtra Information for Testing (IXIT) TS 36.579-5 [5];
\- the applicability of each test case TS 36.579-4 [4].
The test cases are expected to be executed through the 3GPP radio interface.
The present document does not specify the protocol conformance testing for the
EPS (LTE) bearers which carry the MCVideo data sent or received by the MCVideo
Client and which are required to be supported by the UE in which the MCVideo
Client is installed. This is defined in TS 36.523-1 [6].
# 2 References {#references-1}
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 36.579-1: \"Mission Critical (MC) services over LTE; Part 1:
Common test environment\".
[3] Void
[4] 3GPP TS 36.579-4: \" Mission Critical (MC) services over LTE; Part 4: Test
Applicability and Implementation Conformance Statement (ICS).
[5] 3GPP TS 36.579-5: \"Mission Critical (MC) services over LTE; Part 5:
Abstract test suite (ATS)\".
[6] 3GPP TS 36.523-1: \"Evolved Universal Terrestrial Radio Access (E-UTRA)
and Evolved Packet Core (EPC); User Equipment (UE) conformance specification;
Part 1: Protocol conformance specification\".
[7] Void
[8] Void
[9] 3GPP TS 24.379: \"Mission Critical Push To Talk (MCPTT) call control;
Protocol specification\".
[10] 3GPP TS 24.380: \"Mission Critical Push To Talk (MCPTT) media plane
control; Protocol specification \".
[11] 3GPP TS 24.481: \"Mission Critical Services (MCS) group management;
Protocol specification\".
[12] 3GPP TS 24.482: \"Mission Critical Services (MCS) identity management;
Protocol specification\".
[13] 3GPP TS 24.483: \"Mission Critical Services (MCS) Management Object
(MO)\".
[14] 3GPP TS 24.484: \"Mission Critical Services (MCS) configuration
management; Protocol specification\".
[15] 3GPP TS 33.179: \" Security of Mission Critical Push To Talk (MCPTT) over
LTE\".
[16] 3GPP TS 24.229: \"IP multimedia call control protocol based on Session
Initiation Protocol (SIP) and Session Description Protocol (SDP); Stage 3\".
[17] Void
[18] Void.
[19] 3GPP TS 36.509: \"Evolved Universal Terrestrial Radio Access (E-UTRA) and
Evolved Universal Terrestrial Radio Access Network (E-UTRAN); Special
conformance testing functions for User Equipment (UE)\".
[20] 3GPP TS 36.508: \"Evolved Universal Terrestrial Radio Access (E-UTRA) and
Evolved Universal Terrestrial Radio Access (E-UTRAN); Common Test Environments
for User Equipment (UE) Conformance Testing\".
[21] OpenID Connect 1.0: \"OpenID Connect Core 1.0 incorporating errata set
1\", http://openid.net/specs/openid-connect-core-1_0.html.
[22] 3GPP TS 33.310: \"Network Domain Security (NDS); Authentication Framework
(AF)\".
[23] Void
[24] 3GPP TS 36.579-2: \"Mission Critical (MC) services over LTE; Part 2:
Mission Critical Push To Talk (MCPTT) User Equipment (UE) Protocol conformance
specification\".
[25] 3GPP TS 36.579-7: \"Mission Critical (MC) services over LTE; Part 7:
Mission Critical Data (MCData) User Equipment (UE) Protocol conformance
specification\".
[26] 3GPP TS 24.281: Mission Critical Video (MCVideo) signalling control;
Protocol specification\".
[27] 3GPP TS 24.581: \"Mission Critical Video (MCVideo) media plane control;
Protocol specification\".
[28] 3GPP TS 23.281: \"Functional architecture and information flows to
support Mission Critical Video (MCVideo); Stage 2\".
[29] 3GPP TS 22.281: \"Mission Critical Video over LTE\".
[30] 3GPP TS 33.180: \"Security of the mission critical service\".
[36] 3GPP TS 23.032: \"Universal Geographical Area Description (GAD)\".
# 3 Definitions of terms, symbols and abbreviations
## 3.1 Terms
For the purposes of the present document, the terms given in TR 21.905 [1] and
the following apply. A term defined in the present document takes precedence
over the definition of the same term, if any, in TR 21.905 [1].
For the purpose of the present document, the following terms and definitions
given in TS 24.281 [26] apply:
An MCVideo user is affiliated to an MCVideo group
An MCVideo user is affiliated to an MCVideo group at an MCVideo client
Affiliation status
Group identity
MCVideo client ID
MCVideo emergency alert state
MCVideo emergency group state
MCVideo emergency group call state
MCVideo emergency private call
MCVideo emergency private call state
MCVideo emergency private priority state
MCVideo imminent peril group call state
MCVideo imminent peril group state
MCVideo private call
MCVideo private emergency alert state
MCVideo video media
Media-transmission control entity
Private call
Remote change of an MCVideo user\'s selected group
Temporary MCVideo group identity
Trusted mutual aid
Untrusted mutual aid
For the purpose of the present document, the following terms and definitions
given in TS 33.180 [30] apply:
Client Server Key (CSK)
Private Call Key (PCK)
Signalling Protection Key (SPK)
XML Protection Key (XPK)
## 3.2 Symbols
For the purposes of the present document, the following symbols apply:
None.
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
CSK Client-Server Key
ECGI E-UTRAN Cell Global Identification
FFS For Further Study
ICS Implementation Conformance Statement
IPEG In-Progress Emergency Group
IPEPC In-Progress Emergency Private Call
IPIG In-Progress Imminent peril Group
IUT Implementation Under Test
IXIT Implementation eXtra Information for Testing
MBMS Multimedia Broadcast and Multicast Service
MBSFN Multimedia Broadcast multicast service Single Frequency Network
MC Mission Critical
MCData Mission Critical Data
MCPTT Mission Critical Push To Talk
MCS Mission Critical Service
MCVideo Mission Critical Video
MCVideo group ID MCVideo group Identity
MIME Multipurpose Internet Mail Extensions
MVEA MCVideo Emergency Alert
MVEG MCVideo Emergency Group
MVEGC MCVideo Emergency Group Call
MVEPC MCVideo Emergency Private Call
MVEPP MCVideo Emergency Private Priority
MVES MCVideo Emergency State
MVIG MCVideo Imminent peril Group
MVIGC MCVideo Imminent peril Group Call
MONP MC service Off-Network Protocol
MVPEA MCVideo Private Emergency Alert
NAT Network Address Translation
PCC Policy and Charging Control
PCCB Private Call Call-Back
PLMN Public Land Mobile Network
QCI QoS Class Identifier
RTP Real-time Transport Protocol
SAI Service Area Identifier
SDP Session Description Protocol
SIP Session Initiation Protocol
SPK Signalling Protection Key
SS System Simulator
SSRC Synchronization SouRCe
TGI Temporary MCVideo Group Identity
TMGI Temporary Mobile Group Identity
TP Transmission Point
TP Test Purpose
UE User Equipment
URI Uniform Resource Identifier
XPK XML Protection Key
# 4 General
## 4.1 Test methodology
### 4.1.1 Testing of optional functions and procedures
Any function or procedure which is optional, may be subject to a conformance
test if it is implemented in the MCVideo Client.
A declaration by the MCVideo Client supplier (to use the Implementation
Conformance Statement (ICS) proforma specified in TS 36.579-4 [4]) is used to
determine whether an optional function/procedure has been implemented.
### 4.1.2 Test interfaces and facilities
Detailed descriptions of the MCVideo
Client test interfaces and special facilities for testing are provided in TS
36.509 [19].
## 4.2 Implicit testing
For some 3GPP MCVideo protocol features conformance is not verified explicitly
in the present document. This does not imply that correct functioning of these
features is not essential, but that these are implicitly tested to a
sufficient degree in tests which are not explicitly dedicated to test the
feature.
## 4.3 Repetition of tests
As a general rule, the test cases specified in the present document are highly
reproducible and do not need to be repeated unless otherwise stated.
## 4.4 Handling of differences between conformance requirements in different
releases of cores specifications
The conformance requirements which determine the scope of each test case are
explicitly copy-pasted from relevant core specifications in the especially
dedicated for this clause of each test with the title \'Conformance
requirements\'.
NOTE: When in the copy/pasted text there are references to other
specifications the reference numbers will not match the reference numbers used
in the present document. This approach has been taken in order to allow easy
copy and then search for conformance requirements in those specifications.
When differences between conformance requirements in different releases of the
cores specifications have impact on the Pre-test conditions, Test procedure
sequence or/and the Specific message contents, the Conformance requirements
related to different releases are specified separately with clear indication
of the Release of the spec from which they were copied.
When there is no Release indicated for a conformance requirement text, this
should be understood either as the Conformance requirements in the latest
version of the spec with release = the TC Applicability release (which can be
found in TS 36.579-4 [4], Table 4-1: Applicability of tests and additional
information for testing, column \'Release\'), or, as the Conformance
requirements in the latest version of the spec of the release when the feature
was introduced to the core specs.
## 4.5 Reference conditions
The reference environments used by all signalling and protocol tests is
specified in TS 36.579-1 [2]. Where a test requires an environment that is
different, this will be specified in the test itself.
For all test cases in this document unless specified otherwise the condition
MCVIDEO applies for all message contents.
## 4.6 Generic setup procedures
A set of basic generic procedures for MCVideo Client-Server communication are
described in TS 36.579-1 [2]. These procedures will be used in numerous test
cases throughout the present document.
# 5 MCVideo Client Configuration
## 5.1 Configuration / Authentication / User Authorization / UE Configuration
/ User Profile / Key Generation
##### 5.1.1 Test Purpose (TP) {#test-purpose-tp .H6}
##### (1) {#section .H6}
**with** { UE (MCVIDEO Client) attached to EPS services }
**ensure that** {
**when** { the MCVideo User activates an MCVideo application and requests
MCVideo initialisation }
**then** { UE (MCVIDEO Client) performs MCVideo User Authentication }
}
##### (2) {#section-1 .H6}
**with** { UE (MCVIDEO Client) user authenticated }
**ensure that** {
**when** { the UE (MCVIDEO Client) has established a secure HTTP tunnel }
**then** { UE (MCVIDEO Client) performs key management authorization and
obtains identity management key material }
}
##### (3) {#section-2 .H6}
**with** { UE (MCVIDEO Client) has obtained identity management key material }
**ensure that** {
**when** { the UE (MCVIDEO Client) requests user service authorization }
**then** { UE (MCVIDEO Client) sends a user authorization request to the
MCVideo Server }
}
##### (4) {#section-3 .H6}
**with** { UE (MCVIDEO Client) authorized for user services }
**ensure that** {
**when** { the UE (MCVIDEO Client) requests configuration management
authorization}
**then** { UE (MCVIDEO Client) requests subscription to multiple documents
simultaneously **and** request the retrieval of the MCVideo UE Configuration
document, the MCVideo User Profile Configuration Document and the MCVideo
Service Configuration Document }
}
##### (5) {#section-4 .H6}
**with** { UE (MCVIDEO Client) having obtained user configuration data }
**ensure that** {
**when** { the UE (MCVIDEO Client) requests group management authorization }
**then** { UE (MCVIDEO Client) receives the group profile including group
traffic keys }
}
##### (6) {#section-5 .H6}
**with** { UE (MCVIDEO Client) having obtained all required configuration data
}
**ensure that** {
**when** { the UE (MCVIDEO Client) requires to refresh its service settings }
**then** { UE (MCVIDEO Client) sends a SIP PUBLISH request }
}
##### 5.1.2 Conformance requirements {#conformance-requirements .H6}
References: The conformance requirements covered in the present TC are
specified in: TS 24.482 clause 6.2.1 and Annex A.2.1.2, TS 24.484 clauses
4.2.1, 4.2.2.1, 6.2.2, 6.3.1.1, 6.3.2.1, 6.3.2.2, 6.3.3.2.1, 6.3.3.2.2,
6.3.13.2.1 and 6.3.13.2.2, TS 24.481 clauses 6.2.2.2, 6.2.3, 6.3.3.2.1,
6.3.3.2.2 and 6.3.13.2.1, TS 24.281 clauses 7.2.1, 7.2.1A, 7.2.2 and 7.2.3, TS
33.180 clauses 5.1.3.1, 5.3.3, 6.1.2, and Annex D. The following represents a
copy/paste extraction of the requirements relevant to the test purpose; any
references within the copy/paste text should be understood within the scope of
the core spec they have been copied from. Unless otherwise stated these are
Rel-14 requirements.
[TS 24.482, clause 6.2.1]
Upon an indication from the MC service client to initiate MC service user
authentication, the IdM client shall perform the user authentication procedure
according to 3GPP TS 33.180 [17] with the following clarifications:
1) shall establish a TLS tunnel to the authorisation endpoint of the IdM
server as specified in 3GPP TS 33.180 [17] using the configured URL of the
authorisation endpoint of the IdM server as specified in the
\"/\/OnNetwork/AppServerInfo/IDMSAuthEndpoint\" leaf node defined in 3GPP
TS 24.483 [11] and the clarifications in annex A;
2) shall generate an OIDC Authentication Request message as specified in the
OpenID Connect 1.0 [6] and IETF RFC 6749 [5] with the following
clarifications:
a) shall generate an HTTP GET request method according to IETF RFC 2616 [4];
b) shall include the configured parameter IdM client id as the client_id
parameter specified in 3GPP TS 33.180 [17] in the query component of the
authorization endpoint\'s URI using the \"application/x-www-form-urlencoded\"
format as specified in W3C.REC-html401-19991224 [7]; and
NOTE 1: The configuration of client_id is specified in 3GPP TS 24.483 [11].
c) shall include the remaining required parameters as specified in 3GPP TS
33.180 [17] in the query component of the authorization endpoint\'s URI using
the \"application/x-www-form-urlencoded\" format as specified in W3C.REC-
html401-19991224 [7]; and
3) shall send the HTTP GET request method towards the IdM server.
NOTE 2: The OpenID Connect 1.0 [6] specification allows for an alternative
mechanism for sending the OIDC Authentication request message using an HTTP
POST request method which can be used in place of steps 1, 2, and 3 above.
Upon receipt of an HTTP 200 (OK) response from the IdM server, the IdM client:
1) shall prompt the MC service user for their username and password;
NOTE 3: Other types of authentication are supported and are not defined by the
OIDC specifications. 3GPP TS 33.180 [17] has defined username and password as
a mandatory authentication method to be supported, hence a procedure to
realize that method is included here.
2) shall generate an HTTP POST request method containing the MC service
user\'s username and password; and
3) shall send the HTTP POST request method towards the IdM server.
Upon receipt of an OIDC Authentication Response message, the IdM client:
1) shall establish a TLS tunnel to the token endpoint of the IdM server as
specified in 3GPP TS 33.180 [17] using the configured URL of the token
endpoint of the IdM server as specified in the
\"/\/OnNetwork/AppServerInfo/IDMSTokenEndpoint\" leaf node defined in 3GPP
TS 24.483 [11] and the clarifications in annex A;
2) shall generate an OIDC Token Request message as specified in OpenID Connect
1.0 [6] and IETF RFC 6749 [5] with the following clarifications:
a) shall generate an HTTP POST request method according to IETF RFC 2616 [4];
and
b) shall include the grant_type parameter set to a value of
\"authorization_code\" and the other required parameters in the entity body of
the HTTP POST request method using the using the \"application/x-www-form-
urlencoded\" format as specified in 3GPP TS 33.180 [17]; and
3) shall send the HTTP POST request method towards the IdM server.
Upon receipt of an OIDC Token Response message, the IdM client:
1) shall validate the id_token, access_token and refresh token in the received
OIDC Token Response message as specified in the OpenID Connect 1.0 [6]
specification; and
2) shall provide the id_token and access_token in the received OIDC Token
Response message to the MC service client.
NOTE 4: The method in which the IdM client provides the id_token and
access_token to the MC service client is implementation specific.
The MC UE may repeat the entire procedure in this clause as needed to obtain
the necessary authorisation tokens for the MC service clients, depending on
the scope parameter in the Authentication Request message as specified in 3GPP
TS 33.180 [17].
[TS 24.482, Annex A.2.1.2]
The HTTP client in the UE shall support the client role defined in IETF RFC
2818 [10].
The HTTP client in the UE shall support transport layer security (TLS) as
specified in 3GPP TS 33.180 [17].
The HTTP client in the UE is configured with the following parameters:
1) a home HTTP proxy FQDN;
2) a home HTTP proxy port;
3) a TLS tunnel authentication method. The TLS tunnel authentication method
parameter is set to one of the following:
a) one-way authentication of the HTTP proxy based on the server certificate;
b) mutual authentication based on certificates; and
c) mutual authentication based on pre-shared key;
as specified in 3GPP TS 33.180 [17];
4) if the TLS tunnel authentication method is the mutual authentication based
on certificates:
a) TLS tunnel authentication X.509 certificate; and
5) if the TLS tunnel authentication method is the mutual authentication based
on pre-shared key;
a) TLS tunnel authentication pre-shared key.
The HTTP client in the UE shall establish a TCP connection towards the home
HTTP proxy FQDN and the home HTTP proxy port, unless the specific TCP
connection is to be used for the IdM client to IdM server procedures described
in clause 6.2 and 6.3 in the present document, in which case the HTTP client
shall establish a TCP connection towards the IdM server.
The HTTP client in the UE shall establish a TLS tunnel via the TCP connection
as specified in 3GPP TS 33.180 [17]. When establishing the TLS tunnel, the
HTTP client in the UE shall act as a TLS client and the UE shall perform the
TLS tunnel authentication using the TLS authentication method indicated by the
TLS tunnel authentication method parameter according to 3GPP TS 33.180 [17].
The UE shall use the configured TLS tunnel authentication X.509 certificate
and the configured TLS tunnel authentication pre-shared key when applicable
for the used TLS authentication method. In order to prevent man-in-the-middle
attacks, the HTTP client in the UE shall check the home HTTP proxy FQDN
against the server\'s identity as presented in the received server\'s
certificate message if the TCP connection terminates on the HTTP proxy. The
HTTP client in the UE shall not check the portion of dereferenced HTTP URL
against the server\'s identity as presented in the received server\'s
certificate message if the TCP connection terminates on the HTTP proxy, but
shall do so if the TCP connection terminates on the IdM server.
NOTE: The TLS tunnel can be terminated in the HTTP proxy (rather than in the
HTTP server providing the dereferenced HTTP URL).
The HTTP client in the UE shall send and receive all HTTP messages via the TLS
tunnel.
If the HTTP client in the UE has an access token of the \"bearer\" token type
as specified in IETF RFC 6750 [14], the HTTP client in the UE shall include an
Authorization header field with the \"Bearer\" authentication scheme as
specified in IETF RFC 6750 [14] in HTTP requests.
[TS 33.180, Annex D.1]
This annex specifies the key management procedures between the KMS and the key
management client that allows keys to be provisioned to the key management
client based on an identity. It describes the requests and responses for the
authorization following provisioning messages:
\- KMS Initialize.
\- KMS KeyProvision.
\- KMS CertCache.
All KMS communications are made via HTTPS. The key management client is
provisioned via XML content in the KMS\'s response. The XML content is
designed to be extendable to allow KMS/client providers to add further
information in the XML. Where the interface is extended, a different XML
namespace should be used (so that may be ignored by non-compatible clients).
It is assumed that transmissions between the KMS and the key management client
are secure and that the KMS has authenticated the identity of the key
management client.
Additionally, to allow the transmission of key material securely between a
secure element within the KMS and a secure element within the key management
client, a security extension is defined which allows messages to be signed and
key material to be encrypted using a shared Transport Key (TrK).
[TS 33.180, clause 5.1.3.1]
This clause expands on the MCX user service authorization step shown in figure
5.1.1-1 step C.
MCX User Service Authorization is the function that validates whether or not a
MCX user has the authority to access certain MCX services. In order to gain
access to MCX services, the MCX client in the UE presents an access token
(acquired during user authentication as described in clause 5.1.2) to each
service of interest (i.e. Key Management, MCX server, Configuration
Management, Group Management, etc.). If the access token is valid, then the
user is granted the use of that service. Figure 5.1.3.1-1 shows the flow for
user authorization which covers key management authorization, MCX user service
authorization, configuration management authorization, and group management
authorization.
NOTE: All HTTP traffic between the UE and HTTP proxy, and all HTTP traffic
between the UE and KMS (if not going through the HTTP proxy) is protected
using HTTPS.
For key management authorization, the KM client in the UE presents an access
token to the KMS over HTTP. The KMS validates the access token and if
successful, provides one or more sets of user specific key material back to
the UE KM client based on the MC service ID(s) present in the access token
(MCPTT ID, MCVideo ID and/or MCVideo ID). User specific key material includes
identity based key information for media and signalling protection. This key
management authorisation may be repeated for each KM service the user is
authorised to use (MCPTT, MCVideo, MCVideo).
For MCPTT user service authorization, the MCPTT client in the UE presents an
access token to the MCPTT server over SIP. The MCPTT server validates the
access token and if successful, authorizes the user for full MCPTT services
and sends an acknowledgement back to the MCPTT client. The MCPTT server then
maps and maintains the IMPU to MCPTT ID association. The MCPTT ID to IMPU
association shall only be known to the application layer. The SIP message used
to convey the access token from the MCPTT client to the MCPTT server may be
either a SIP REGISTER or SIP PUBLISH message.
For MCVideo service authorization, the MCVideo client in the UE presents an
access token to the MCVideo server over SIP. The MCVideo server validates the
access token and if successful, authorizes the user for full MCVideo services
and sends an acknowledgement back to the MCVideo client. The MCVideo server
then maps and maintains the IMPU to MCVideo ID association. The MCVideo ID to
IMPU association shall only be known to the application layer. The SIP message
used to convey the access token from the MCVideo client to the MCVideo server
may be either a SIP REGISTER or SIP PUBLISH message.
For MCVideo user service authorization, the MCVideo client in the UE presents
an access token to the MCVideo server over SIP. The MCVideo server validates
the access token and if successful, authorizes the user for full MCVideo
services and sends an acknowledgement back to the MCVideo client. The MCVideo
server then maps and maintains the IMPU to MCVideo ID association. The MCVideo
ID to IMPU association shall only be known to the application layer. The SIP
message used to convey the access token from the MCVideo client to the MCVideo
server may be either a SIP REGISTER or SIP PUBLISH message.
The UE can now perform configuration management authorization and download the
user profile for the service(s) (MCPTT, MCVideo, MCVideo). Following the flow
described in subclause 10.1.4.3 of 3GPP TS 23.280 [36] \" MC service user
obtains the MC service user profile(s) from the network \", the Configuration
Management (CM) client in the UE sends an access token in the user profile
query to the Configuration Management server over HTTP. The CM server receives
the request and validates the access token, and if valid, the CM server uses
the identity from the access token (MCPTT ID, MCVideo ID, MCVideo ID) to
obtain the user profile from the MCX user database. The CM server then sends
the user profile back to the CM client over HTTP. This configuration
management authorisation may be repeated for each CM service the user is
authorised to use (MCPTT, MCVideo, MCVideo).
Upon receiving each user profile, the Group Management (GM) client in the UE
can now perform group management authorization. The GM client obtains the
user\'s group membership information from the user profile, and following the
flow shown in clause 10.1.5.2 of 3GPP TS 23.280 [36] \"Retrieve group
configurations at the group management client\", the Group Management (GM)
client in the UE sends an access token in the Get group configuration request
to the host GM server of the group membership over HTTP. The GM server
validates the access token, and if valid, completes the flow. As part of group
management authorization, group key information is provided as per subclause
5.7 of the present document. This group management authorisation may be
repeated for each GM service the user is authorised to use (MCPTT, MCVideo,
MCVideo).
Figure 5.1.3.1-1: MCX user service authorization
The user authorization procedure in Step C of Figure 5.1.1-1 is further
detailed into 5 sub steps that comprise the MCX user service authorization
process:
Step C-1: If not already done, establish a secure HTTP tunnel using HTTPS
between the MCX UE and MCX proxy server. Subsequent HTTP messaging makes use
of this tunnel (with the possible exception of the KMS client to KMS server
interface).
Step C-2: The KMS client in the UE presents an access token to the KMS over
HTTP. The KMS authorizes the user for key management services based upon the
MC service ID(s) provided and replies to the client with identity specific key
information. This step may be repeated to authorise the user with additional
KM services (MCPTT, MCVideo, MCVideo) as necessary.
Step C-3: The MCX client in the UE presents an access token to the MCX server
over SIP as defined in clause 5.1.3.2 of the present document. This step may
be repeated to authorise the user with additional MCX services (MCPTT,
MCVideo, MCVideo) as necessary.
Step C-4: The CM client in the UE follows the \"MCX user obtains the user
profile (UE initiated)\" flow from clause 10.1.4.3 of 3GPP TS 23.280 [36],
presenting an access token in the Get MCX user profile request over HTTP. If
the token is valid, then the CM server authorizes the user for configuration
management services. Completion of this step results in the CM server
providing the user\'s profile to the CM client. This step may be repeated as
necessary to obtain the user profile for additional services (MCPTT, MCVideo,
or MCVideo).
Step C-5: The GM client in the UE follows the \"Retrieve group configurations
at the group management client\" flow as shown in clause 10.1.5.2 of 3GPP TS
23.280 [36], presenting an access token in the Get group configuration request
over HTTP. If the token is valid, the GMS authorizes the user for group
management services. Completion of this step results in the GMS sending the
user\'s group policy information and group key information to the GM client.
This step may be repeated to authorise the user for additional group services
(MCPTT, MCVideo, MCVideo) as necessary.
[TS 33.180, clause 5.3.3]
The procedure for the provision of identity-specific key material when the
HTTP proxy is supported between the KMS and the KMS client is described in
figure 5.3.3-1. The procedure is the same whether the key management client in
the MC UE, an MCX Server or a Group Management Server is making the request.
Figure 5.3.3-1: Provisioning of key material via the HTTP proxy
The procedure in figure 5.3.3-1 is now described step-by-step.
0) The key management client establishes a connection to the KMS. As with
other elements in the Common Services Core, the connection is routed via, and
secured by, the HTTP Proxy. The message flow below is within this secure
connection.
NOTE: Additionally, the connection between the KMS and the HTTP Proxy is
secured according to clause 6.1.
1) The key management client makes a request for user key material from the
KMS. The request contains an access token to authenticate the user as defined
in clause 5.1. There are three types of request (as defined in Annex D):
a) KMSInit Request. This request is the first request sent to the KMS to setup
the user.
b) KMSKeyProv Request: This request is to obtain new key material from the
KMS. The request may contain details of a specific identity (e.g. MCPTT ID)
required for key management, and may contain a specific time for which the key
material is required.
c) KMSCertCache Request: This request is to obtain external KMS certificates
associated with external security domains (managed by another KMS). The
request may contain details of the latest version of the cache received by the
client.
2) The KMS provides a response based upon the authenticated user and the
user\'s request. For public safety use, the key material itself shall be
encrypted using a 256-bit transport key (TrK). The response may also be signed
by the TrK or the InK. The TrK and InK are initially distributed via an out-
of-band mechanism along with their 32-bit identifiers, the TrK-ID and InK-ID,
respectively. The responses are:
a) KMSInit Response. This response contains domain parameters and optionally,
a new TrK and/or a new InK.
b) KMSKeyProv Response: This response provides new key material to the user
and optionally, a new TrK.
c) KMSCertCache Response: This response contains new or updated home KMS
certificates and/or external KMS certificates required by the user for
communications with external security domains.
The procedure for the provisioning of identity-specific key material when the
HTTP proxy is not used between the KMS and the KMS client is as described in
Figure 5.3.3-2.
Figure 5.3.3-2: Provisioning of key material without a proxy
The procedure in Figure 5.3.3-2 is now described step-by-step:
0) The key management client establishes a direct HTTPS connection to the KMS.
The following message flow is within this secure connection.
1) The key management client makes a request to the KMS. The same requests can
be made as defined above with a proxy.
2) The KMS provides a response based upon the authenticated user and the
user\'s request. Optionally, the key material itself may also be encrypted
using a 256-bit transport key (TrK). The response may also be signed using the
TrK or the InK. The TrK and InK are initially distributed via an out-of-band
mechanism along with their 32-bit identifiers (TrK-ID and InK-ID
respectively).
As a result of this procedure, the key management client has securely obtained
key material for use within the MC system.
[TS 24.484, clause 4.2.1]
Upon start up the MC UE bootstraps the required information (e.g. FQDN or IP
address) to locate the configuration management server for configuration of
the MCS UE initial configuration management object (MO) and the default MCPTT
user profile configuration management object (MO).
In order to obtain access to MC services the UE needs to obtain configuration
data either online via the network or offline using some external device (e.g.
a laptop). As part of the bootstrap process the MC UE needs to discover
either:
1\. the online configuration management server in the network that configures
the MCS UE initial configuration MO and the default MCS user profile
configuration MO(s), then the MC UE:
a) using the URI of the configuration management server obtained from the MCS
UE initial configuration MO, obtains for each MCS that is enabled:
\- the appropriateMCS UE configuration document;
\- the appropriateMCS user profile configuration document; and
\- the appropriateMC service configuration document; and
b) using the URI of the group management server obtained from the MCS UE
initial configuration MO obtain the MCS group document; or
2\. the:
a) offline configuration management server on the external device that
configures the MC UE with the:
\- MCS UE initial configuration MO;
\- appropriate MCS UE configuration MO(s);
\- appropriate MCS user profile MO(s); and
\- appropriate MCS service configuration MO(s); and
b) offline group management server on the external device that configures the
MC UE with the MCS group MO.
The mechanism to discover the online or offline configuration management
server is dependent on the protocol used to manage and configure the MO and is
out of scope of the present document.
[TS 24.484, clause 4.2.2.1]
The format of the MCS UE initial configuration MO downloaded to the MC UE
during online configuration is defined in 3GPP TS 24.483 [4].
The format of the MCS group document downloaded to the MC UE during online
configuration is defined in 3GPP TS 24.481 [5].
Figure 4.2.2-1 shows the MCPTT UE online configuration time sequence.
Figure 4.2.2-1 MC UE online configuration time sequence
If the MCS UE initial configuration MO has changed from the version stored in
the MC UE, the updated MC UE initial configuration MO is downloaded to the
MCPTT UE.
If the MCS UE initial configuration MO contains a \
element and the identified default MCS user profile configuration MO(s) have
changed from the version stored in the MC UE, the updated default MCS user
profile configuration MO(s) are downloaded to the MC UE.
NOTE 1: The default MCS user profile configuration MO(s) define the default
identity(s) for the enabled mission critical service(s) and the profile of
services available to the user (e.g. emergency MCPTT services) prior to user
authentication.
The MC UE contacts the identity management server using the HTTPS URI stored
in the MCS UE initial configuration MO and performs MC User authentication as
specified in 3GPP TS 24.482 [6].
The MC UE, using the identities obtained during MC user authentication,
subscribes to the MCS UE configuration document, the MCS user profile
configuration document and the MCS service configuration document for each
enabled MCS using the procedure for subscribing to multiple documents
simultaneously using the subscription proxy function specified in subclause
6.3.13.2.2(i.e., the CMS acts as a Subscription Proxy) and subscribes to the
MCS group document using the procedure specified in 3GPP TS 24.481 [5]. If
these documents have been updated since the current version stored in the MC
UE, then the MC UE will receive a SIP NOTIFY request with an XCAP Diff
document (see IETF RFC 5875 [11]), in which case the CMC updates its local
document copies . Retrieval by the MC UE using the notified HTTPS URI of the
MCS group document is performed as specified in 3GPP TS 24.481 [5].
NOTE 2: The MC UE can be notified of changes to an configuration documents at
any time while using the MCS.
[TS 24.484, clause 6.2.2]
The CMC shall send the HTTP request over TLS connection as specified for the
HTTP client in the UE in annex A of 3GPP TS 24.482 [6].
[TS 24.484, clause 6.3.1.1]
A CMC shall support subclause 6.1.1 \"_Document Management_ \" of OMA OMA-TS-
XDM_Core-V2_1 [2] and subclause 6.3.13.2.2 for subscribing to configuration
management documents.
[TS 24.484, clause 6.3.3.2.1]
In order to retrieve a configuration management document, a GC shall send an
HTTP GET request with the Request URI that references the document to be
updated to the network according to procedures specified in IETF RFC 4825 [14]
\"_Retrieve a Document_ \".
[TS 24.484, clause 6.3.3.2.2]
In order to retrieve a configuration management document, a CMC shall perform
the procedures in subclause 6.3.3.2.1 specified for GC. The CMC shall set the
Request-URI of the HTTP GET request to the \"CMSXCAPRootURI\" configured as
per 3GPP TS 24.483 [4] and include the \"auid\" as per the appropriate
application usage in clause 7.
Subclause 7.5 specifies which configuration management documents can be
retrieved from the CMS over the CSC-4 reference point.
[TS 24.484, clause 6.3.13.2.1]
This procedure enables the CMC to subscribe to notification of changes of one
or more configuration management documents defined.
This procedure enables the MCS server to subscribe to notification of changes
of the MCPTT service configuration document.
[TS 24.484, clause 6.3.13.2.2]
In order to subscribe to Configuration management document, a CMC shall send
an initial SIP SUBSCRIBE request to the network according to the UE
originating procedures specified in 3GPP TS 24.229 [22] and IETF RFC 5875
[11]. In the initial SIP SUBSCRIBE request, the CMC:
a) ...
b) if subscription to multiple documents simultaneously using the subscription
proxy function is used:
1) shall include an application/resource-lists+xml MIME body. In the
application/resource-lists+xml MIME body, the CMC shall include one \
element for each document or element to be subscribed to, such that the
\"uri\" attribute of the \ element contains a relative path reference:
A) with the base URI being equal to the \"CMSXCAPRootURI\" configured in the
CMC as per 3GPP TS 24.483 [4]; and
B) with the \"auid\" parameter set to the appropriate application usage
identifying a configuration management document;
2) shall set the Request-URI to the configured public service identity for
performing subscription proxy function of the CMS;
c) shall include an application/vnd.3gpp.mcptt-info+xml MIME body with the
\ element set to the value of the access token received
during authentication procedure as described in 3GPP TS 24.482 [6];
d) if identity hiding is required:
1) shall perform the confidentiality protection procedures and integrity
protection procedures defined in 3GPP TS 24.379 [9] for MCPTT client on the
application/vnd.3gpp.mcptt-info+xml MIME body and on the application/resource-
lists+xml MIME body; and
2) shall include an application/mikey MIME body with the CSK as specified in
3GPP TS 24.379 [9];
e) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcptt\"
(coded as specified in 3GPP TS 24.229 [22]), in a P-Preferred-Service header
field according to IETF RFC 6050 [23]; and
f) shall include the g.3gpp.icsi-ref media feature tag containing the value of
\"urn:urn-7:3gpp-service.ims.icsi.mcptt\" in the Contact header field.
Upon receiving a SIP NOTIFY request associated with a subscription created as
result of the sent initial SIP SUBSCRIBE request:
1) if identity hiding is required, the CMC shall perform the confidentiality
protection procedures and integrity protection procedures defined in 3GPP TS
24.379 [9] for MC client; and
2) shall handle the SIP NOTIFY request according to IETF RFC 5875 [11].
In order to re-subscribe to notification of changes of a modified list of one
or more configuration management documents; a CMC shall send a SIP re-
SUBSCRIBE request to the network according to the UE originating procedures
specified in 3GPP TS 24.229 [22] and IETF RFC 5875 [11]. In the SIP re-
SUBSCRIBE request, the CMC:
a) if direct subscription is used, shall set the Request URI to a SIP URI
containing:
1) the base URI being equal to the \"CMSXCAPRootURI\" configured in the CMC as
per 3GPP TS 24.483 [4]; and
2) the \"auid\" parameter set to the appropriate application usage identifying
a configuration management document as described in clause 7;
b) if subscription to multiple documents simultaneously using the subscription
proxy function is used:
1) shall include an application/resource-lists+xml MIME body. In the
application/resource-lists+xml MIME body, the CMC shall include one \
element for each document or element to be subscribed to, such that the
\"uri\" attribute of the \ element contains a relative path reference:
A) with the base URI being equal to the \"CMSXCAPRootURI\" configured in the
CMC as per 3GPP TS 24.483 [4]; and
B) with the \"auid\" parameter set to the appropriate application usage
identifying a configuration management document as described in clause 7;
c) if identity hiding is required, shall perform the confidentiality
protection procedures and integrity protection procedures defined in 3GPP TS
24.379 [9] for MC client on the application/vnd.3gpp.mcptt-info+xml MIME body
and on the application/resource-lists+xml MIME body using the CSK included in
the initial SIP SUBSCRIBE request; and
d) shall include the g.3gpp.icsi-ref media feature tag containing the value of
\"urn:urn-7:3gpp-service.ims.icsi.mcptt\" in the Contact header field.
[TS 24.481, clauses 6.2.2.2]
In order to address an existing group document defining a group ID known by
GC, the GC shall set the Request-URI of an HTTP request to a XCAP URI
identifying a group document addressed by a group ID as described in subclause
7.2.10.2, where the group ID is set to the group ID known by GC and where the
XCAP root URI is the XCAP root URI configured in the GC.
[TS 24.481, clauses 6.2.3]
The GMC shall send the HTTP request over a TLS connection as specified for the
HTTP client in the UE in annex A of 3GPP TS 24.482 [10].
The GMC shall perform the procedures in subclause 6.2.2 specified for GC.
[TS 24.481, clauses 6.3.3.2.1]
In order to retrieve a group document, a GC shall send an HTTP GET request
with the Request URI that references the document to be retrieved to the
network according to procedures specified in IETF RFC 4825 [22] \"_Fetch a
Document_ \".
[TS 24.481, clauses 6.3.3.2.2]
In order to retrieve a group document, a GMC shall perform the procedures in
subclause 6.3.3.2.1 specified for GC.
[TS 24.481, clauses 6.3.13.2.1]
In order to subscribe to notification of changes of:
a) one or more MCVideo group documents of MCVideo groups identified by MCVideo
group IDs;
...
a GMC shall send an initial SIP SUBSCRIBE request to the network according to
the UE originating procedures specified in 3GPP TS 24.229 [12] and IETF RFC
5875 [13]. In the initial SIP SUBSCRIBE request, the GMC:
a) shall include an application/resource-lists+xml MIME body. In the
application/resource-lists+xml MIME body, the GMC shall include one \
element for each document or element to be subscribed to, such that the
\"uri\" attribute of the \ element:
1) contains a relative path reference:
A) with the base URI being equal to the XCAP root URI configured in the GMC;
and
B) identifying a group document addressed by a group ID as described in
subclause 7.2.10.2 where the group ID is set to the MCVideo group ID; or
...
b) shall set the Request-URI to the configured public service identity for
performing subscription proxy function of the GMS;
c) shall include an application/vnd.3gpp.mcptt-info+xml MIME body with the
\ element set to the value of the access token received
during authentication procedure as described in 3GPP TS 24.482 [49];
d) if identity hiding is required:
1) shall perform the confidentiality protection procedures and integrity
protection procedures defined in 3GPP TS 24.379 [5] for MCPTT client on the
application/vnd.3gpp.mcptt-info+xml MIME body and on the application/resource-
lists+xml MIME body; and
2) shall include an application/mikey MIME body with the CSK as specified in
3GPP TS 24.379 [5];
e) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcptt\"
(coded as specified in 3GPP TS 24.229 [12]), in a P-Preferred-Service header
field according to IETF RFC 6050 [14]; and
f) shall include the g.3gpp.icsi-ref media feature tag containing the value of
\"urn:urn-7:3gpp-service.ims.icsi.mcptt\" in the Contact header field.
Upon receiving a SIP NOTIFY request associated with a subscription created as
result of the sent initial SIP SUBSCRIBE request:
1) if identity hiding is required, the GMC shall perform the confidentiality
protection procedures and integrity protection procedures defined in 3GPP TS
24.379 [5] for MCPTT client; and
2) shall handle the SIP NOTIFY request according to IETF RFC 5875 [13].
[TS 24.281, clause 7.2.1]
When the MCVideo client performs SIP registration for service authorization
the MCVideo client shall perform the registration procedures as specified in
3GPP TS 24.229 [11].
The MCVideo client shall include the following media feature tags in the
Contact header field of the SIP REGISTER request:
1) the g.3gpp.mcvideo media feature tag; and
2) the g.3gpp.icsi-ref media feature tag containing the value of
\"urn:urn-7:3gpp-service.ims.icsi.mcvideo\".
NOTE 1: If the MCVideo client logs off from the MCVideo service but the
MCVideo UE remains registered the MCVideo UE performs a re-registration as
specified in 3GPP TS 24.229 [11] without both the g.3gpp.mcvideo media feature
tag and the g.3gpp.icsi-ref media feature tag containing the value of
\"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" in the Contact header field of the
SIP REGISTER request.
If the MCVideo client, upon performing SIP registration:
1) has successfully finished the user authentication procedure as described in
3GPP TS 24.482 [52];
2) has available an access-token;
3) based on implementation decides to use SIP REGISTER for service
authorization;
4) confidentiality protection is disabled as specified in subclause 6.6.2.3.1;
and
5) integrity protection is disabled as specified in subclause 6.6.3.3.1;
then the MCVideo client shall include in the SIP REGISTER request an
application/vnd.3gpp.mcvideo-info+xml MIME body as defined in Annex F.1 with:
1) the \ element set to the value of the access token
received during the user authentication procedures; and
2) the \ element set to the value of the MCVideo client ID
of the originating MCVideo client.
NOTE 2: the access-token contains the MCVideo ID of the user.
If the MCVideo client, upon performing SIP registration:
1) has successfully finished the user authentication procedure as described in
3GPP TS 24.482 [52];
2) has an available access-token;
3) based on implementation decides to use SIP REGISTER for service
authorization; and
4) either confidentiality protection is enabled as specified in subclause
6.6.2.3.1 or integrity protection is enabled as specified in subclause
6.6.3.3.1;
then the MCVideo client:
1) shall include an application/mikey MIME body with the CSK as MIKEY-SAKKE
I_MESSAGE as specified in 3GPP TS 33.180 [8] in the body of the SIP REGISTER
request;
2) if confidentiality protection is enabled as specified in subclause
6.6.2.3.1, shall include in the body of the SIP REGISTER request, an
application/vnd.3gpp.mcvideo-info+xml MIME body with the following
clarifications:
a) shall encrypt the received access-token using the client server key (CSK)
and include the \ element set to the encrypted access-
token, as specified in subclause 6.6.2.3.3; and
b) shall encrypt the MCVideo client ID of the originating MCVideo client and
include the \ element set to the encrypted MCVideo client
ID;
3) if confidentiality protection is disabled as specified in subclause
6.6.2.3.1, shall include an application/vnd.3gpp.mcvideo-info+xml MIME body as
defined in Annex F.1 with:
a) the \ element set to the value of the access token
received during the user authentication procedures; and
b) the \ element set to the value of the MCVideo client ID
of the originating MCVideo client; and
4) if integrity protection is enabled as specified in subclause 6.6.3.3.1,
shall use the CSK to integrity protect the application/vnd.3gpp.mcvideo-
info+xml MIME body by following the procedures in subclause 6.6.3.3.3.
[TS 24.281, clause 7.2.1A]
This procedure is only referenced from other procedures.
When populating the SIP PUBLISH request, the MCVideo client shall:
1) shall set the Request-URI to the public service identity identifying the
participating MCVideo function serving the MCVideo user;
2) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
(coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
field according to IETF RFC 6050 [14];
3) shall set the Event header field to the \"poc-settings\" value; and
4) shall set the Expires header field according to IETF RFC 3903 [12], to
4294967295, if the MCVideo user is not removing the MCVideo service settings,
otherwise to remove the MCVideo service settings the MCVideo client shall set
the Expires header field to zero.
NOTE 1: 4294967295, which is equal to 2^32^-1, is the highest value defined
for Expires header field in IETF RFC 3261 [15].
NOTE 2: The expiration timer of the MCVideo client service settings is only
applicable for the MCVideo client service settings from the MCVideo client
that matches the Instance Identifier URN. The expiration timer of MCVideo user
service settings is also updated in the MCVideo server if expiration timer of
MCVideo client service settings is updated in the MCVideo server.
NOTE 3: Removing the MCVideo service settings by setting the Expires header
field to zero, logs off the MCVideo client from the MCVideo service.
[TS 24.281, clause 7.2.2]
If based on implementation the MCVideo client decides to use SIP PUBLISH for
MCVideo server settings to also perform service authorization and
1) has successfully finished the user authentication procedure as described in
3GPP TS 24.482 [52]; and
2) has available an access-token;
then the MCVideo client:
1) shall perform the procedures in subclause 7.2.1A;
2) if confidentiality protection is disabled as specified in subclause
6.6.2.3.1 and integrity protection is disabled, shall include in the body of
the SIP PUBLISH request, an application/vnd.3gpp.mcvideo-info+xml MIME body as
specified in Annex F.1 with the \ element set to the
value of the access token received during the user authentication procedures;
3) if either confidentiality protection is enabled as specified in subclause
6.6.2.3.1 or integrity protection is enabled as specified in subclause
6.6.3.3.1 shall include an application/mikey MIME body with the CSK as MIKEY-
SAKKE I_MESSAGE as specified in 3GPP TS 33.180 [8] in the body of the SIP
PUBLISH request;
4) if confidentiality protection is enabled as specified in subclause
6.6.2.3.1, shall include in the body of the SIP PUBLISH request an
application/vnd.3gpp.mcvideo-info+xml MIME body with:
a) the \ element set to the received access-token
encrypted using the CSK, as specified in subclause 6.6.2.3.3; and
b) the \ element set to the encrypted MCVideo client ID of
the originating MCVideo client, as specified in subclause 6.6.2.3.3;
5) if confidentiality protection is disabled as specified in subclause
6.6.2.3.1, shall include in the body of the SIP PUBLISH request, an
application/vnd.3gpp.mcvideo-info+xml MIME body as specified in Annex F.1
with:
a) the \ element set to the value of the access token
received during the user authentication procedures in the body of the SIP
PUBLISH request; and
b) the \ element set to the value of the MCVideo client ID
of the originating MCVideo client;
6) shall include an application/poc-settings+xml MIME body as defined in 3GPP
TS 24.379 [51] containing:
a) the Answer-Mode Indication setting in the \ element of the
poc-settings event package set to the current answer mode setting (\"auto-
answer\" or \"manual-answer\") of the MCVideo client according to IETF RFC
4354 [53]; and
b) the \ element set to the value contained in
the \"user-profile-index\" attribute of the selected MCVideo user profile as
defined in 3GPP TS 24.484 [25]; and
7) if integrity protection is enabled as specified in subclause 6.6.3.3.1,
shall use the CSK to integrity protect the application/vnd.3gpp.mcvideo-
info+xml MIME body and application/poc-settings+xml MIME body by following the
procedures in subclause 6.6.3.3.3.
The MCVideo client shall send the SIP PUBLISH request according to 3GPP TS
24.229 [11].
[TS 24.281, clause 7.2.3]
To set, update, remove or refresh the MCVideo service settings, the MCVideo
client shall generate a SIP PUBLISH request according 3GPP TS 24.229 [11],
IETF RFC 3903 [12] and IETF RFC 4354 [53]. In the SIP PUBLISH request, the
MCVideo client:
1) shall perform the procedures in subclause 7.2.1A;
2) if confidentiality protection is enabled as specified in subclause
6.6.2.3.1, shall include in the body of the SIP PUBLISH request, an
application/vnd.3gpp.mcvideo-info+xml MIME body with:
a) the \ element set to the targeted MCVideo ID encrypted
using the CSK, as specified in subclause 6.6.2.3.3; and
b) the \ element set to the encrypted MCVideo client ID of
the originating MCVideo client, as specified in subclause 6.6.2.3.3;
3) if confidentiality protection is disabled as specified in subclause
6.6.2.3.1, shall include an application/vnd.3gpp.mcvideo-info+xml MIME body as
specified in Annex F.1 with:
a) the \ set to the cleartext targeted MCVideo ID; and
b) the \ element set to the value of the MCVideo client ID
of the originating MCVideo client;
4) shall include an application/poc-settings+xml MIME body as defined in 3GPP
TS 24.379 [51] containing:
a) the Answer-Mode Indication setting in the \ element of the
poc-settings event package set to the current answer mode setting (\"auto-
answer\" or \"manual-answer\") of the MCVideo client according to IETF RFC
4354 [53]; and
b) the \ element set to the value contained in
the \"user-profile-index\" attribute of the selected MCVideo user profile as
defined in 3GPP TS 24.484 [25]; and
5) if integrity protection is enabled as specified in subclause 6.6.3.3.1,
shall use the CSK to integrity protect the application/vnd.3gpp.mcvideo-
info+xml MIME body and application/poc-settings+xml MIME body by following the
procedures in subclause 6.6.3.3.3.
The MCVideo client shall send the SIP PUBLISH request according to 3GPP TS
24.229 [11].
On receiving the SIP 200 (OK) response to the SIP PUBLISH request the MCVideo
client may indicate to the MCVideo User the successful communication of the
MCVideo service settings to the MCVideo server.
[TS 33.180, clause 6.1.2]
The support of Transport Layer Security (TLS) on HTTP-1 is mandatory. The
profile for TLS implementation and usage shall follow the provisions given in
3GPP TS 33.310 [5], annex E.
If the PSK TLS based authentication mechanism is supported, the HTTP client in
the MC UE and the HTTP Proxy shall support the TLS version, PSK ciphersuites
and TLS Extensions as specified in the TLS profile given in 3GPP TS 33.310
[5], annex E. The usage of pre-shared key ciphersuites for TLS is specified in
the TLS profile given in 3GPP TS 33.310 [5], annex E.
##### 5.1.3 Test description {#test-description .H6}
##### 5.1.3.1 Pre-test conditions {#pre-test-conditions .H6}
Same pre-test conditions as for MCPTT test case 5.1 (TS 36.579-2 [24]) with
the following exception(s):
\- The term \"MCPTT\" is replaced with \"MCVideo\"
##### 5.1.3.2 Test procedure sequence {#test-procedure-sequence .H6}
Same test procedure sequence as for MCPTT test case 5.1 (TS 36.579-2 [24])
with the following exception(s):
\- The term \"MCPTT\" is replaced with \"MCVideo\"
##### 5.1.3.3 Specific message contents {#specific-message-contents .H6}
Same specific message contents as for MCPTT test case 5.1 (TS 36.579-2 [24])
with the following exception(s):
\- The term \"MCPTT\" is replaced with \"MCVideo\"
\- Condition MCVIDEO is used for all messages.
## 5.2 Configuration / Group Creation / Group ReGroup Creation / Group ReGroup
Teardown
##### 5.2.1 Test Purpose (TP) {#test-purpose-tp-1 .H6}
##### (1) {#section-6 .H6}
**with** { UE (MCVideo Client) attached to EPS services }
**ensure that** {
**when** { the UE (MCVideo Client) requests formation of a new MCVideo group }
**then** { on successful group creation the UE (MCVideo Client) has access to
the new group }
}
##### (2) {#section-7 .H6}
**with** { UE (MCVideo Client) having access to at least two MCVideo groups }
**ensure that** {
**when** { the UE (MCVideo Client) requests the groups to be combined }
**then** { on successful group regrouping the UE (MCVideo Client) has access
to the temporary group }
}
##### (3) {#section-8 .H6}
**with** { UE (MCVideo Client) having access to a temporary group }
**ensure that** {
**when** { the UE (MCVideo Client) requests temporary group tear down }
**then** { on successful group tear down the UE (MCVideo Client) removes the
temporary group }
}
##### 5.2.2 Conformance requirements {#conformance-requirements-1 .H6}
References: The conformance requirements covered in the present TC are
specified in: TS 24.481 clauses 6.3.2.2.1, 6.3.2.2.2, 6.3.14.1, 6.3.14.2,
6.3.15.1 and 6.3.15.2; TS 33.180, clause 7.3.2. The following represents a
copy/paste extraction of the requirements relevant to the test purpose; any
references within the copy/paste text should be understood within the scope of
the core spec they have been copied from. Unless otherwise stated these are
Rel-14 requirements.
[TS 24.481, clause 6.3.2.2.1]
In order to create a group document, a GC shall create an XML document of the
application usage specified in subclause 7.2.1 and shall send the XML document
to the network according to procedures specified in IETF RFC 4825 [22]
\"_Create or Replace a Document_ \". The GC shall set the Request-URI of the
HTTP PUT request to an XCAP URI in users tree where the XUI is set to a group
creation XUI configuration parameter.
[TS 24.481, clause 6.3.2.2.2]
In order to create a group document, a GMC shall perform the procedures in
subclause 6.3.2.2.1 specified for GC.
[TS 24.481, clause 6.3.14.1]
This procedure enables a GMC to initiate creation of a temporary MCS group by
combining MCS groups.
NOTE: The temporary MCS group formation procedure does not ensure that the
MCSs of the temporary MCS group are the same as MCSs of each constituent MCS
group of the temporary MCS group.
[TS 24.481, clause 6.3.14.2]
In order to form a temporary MCS group, a GMC shall send a HTTP POST request
according to procedures specified in IETF RFC 2616 [21] and subclause 6.2.3.
In the HTTP POST request, the GMC:
a) shall set the Request-URI to an XCAP URI:
1) in users tree where the XUI is set to a group creation XUI configuration
parameter; and
2) with the document selector identifying the temporary MCS group to be
created; and
b) shall include an application/vnd.3gpp.GMOP+xml MIME body containing a GMOP
document requesting group regroup creation specified in subclause 7.3.4.3,
with a \ element containing a group document for an MCS group. In the
group document, the GMC shall include the \ element
according to subclause 7.2. In the \ element, the GMC
shall include \ element according to subclause
7.2. In the \ element, the GMC shall include one
\ element according to subclause 7.2 for each MCS
group to be combined.
Upon reception of an HTTP 2xx response to the sent HTTP POST request, the GMC
shall consider the temporary MCS group formation as successful.
Upon reception of an HTTP 409 (Conflict) response with at least one \ element in the \ error element, the GMC may repeat
procedures of the present subclause and identify the temporary MCS group being
formed with an MCS Group ID indicated in an \ element.
[TS 24.481, clause 6.3.15.1]
This procedure enables a GMC to initiate tear down of a temporary MCS group.
[TS 24.481, clause 6.3.15.2]
In order to tear down a temporary MCS group, the GMC shall send an HTTP DELETE
request with Request-URI with an XCAP URI identifying a group document of the
temporary MCS group according to procedures specified in IETF RFC 4825 [22]
\"_Delete an Element_ \".
[TS 33.180, clause 7.3.2]
The group creation procedure is described in clause 10.2.3 of 3GPP TS 23.280
[36] and applies to the MCPTT scenario of normal group creation by an MC
administrator and user regrouping operations by an authorized user/dispatcher.
To establish the security context for the group, the GMS follows the
procedures in clause 5.7 to create a new GMK and GMK-ID.
The encapsulated GMK and GUK-ID is sent to group members by the GMS within a
notification message (step 4 in clause 10.2.3 of 3GPP TS 23.280 [36]). The
procedure is equivalent to that described in clause 5.7 of this specification.
##### 5.2.3 Test description {#test-description-1 .H6}
##### 5.2.3.1 Pre-test conditions {#pre-test-conditions-1 .H6}
Same pre-test conditions as for MCPTT test case 5.2 (TS 36.579-2 [24]) with
the following exception(s):
\- The term \"MCPTT\" is replaced with \"MCVideo\"
##### 5.2.3.2 Test procedure sequence {#test-procedure-sequence-1 .H6}
Same test procedure sequence as for MCPTT test case 5.2 (TS 36.579-2 [24])
with the following exception(s):
\- The term \"MCPTT\" is replaced with \"MCVideo\"
##### 5.2.3.3 Specific message contents {#specific-message-contents-1 .H6}
Same specific message contents as for MCPTT test case 5.2 (TS 36.579-2 [24])
with the following exception(s):
\- The term \"MCPTT\" is replaced with \"MCVideo\"
\- Condition MCVIDEO is used for all messages.
## 5.3 Configuration / Group Affiliation / Remote change / De-affiliation /
Home MCVideo system
##### 5.3.1 Test Purpose (TP) {#test-purpose-tp-2 .H6}
##### (1) {#section-9 .H6}
**with** { UE (MCVideo Client) already provisioned with the group information
or a pointer to the group information, that the UE (MCVideo Client) is allowed
to be affiliated }
**ensure that** {\ **when** { MCVideo User requests for current affiliation
status and to subscribe to affiliation status changes for the MCVideo User }
**then** { UE (MCVideo Client) requests to subscribe to affiliation status
changes for the MCVideo User by sending the SS (MCVideo Server) a SIP
SUBSCRIBE message **and** starts informing the MCVideo User of any affiliation
status changes for the MCVideo User after the subscription is accepted }
}
##### (2) {#section-10 .H6}
**with** { UE (MCVideo Client) already provisioned with the group information
or a pointer to the group information, that the UE (MCVideo Client) is allowed
to be affiliated }
**ensure that** {\ **when** { MCVideo User requests to affiliate to an MCVideo
group }
**then** { UE (MCVideo Client) requests to affiliate to a MCVideo group by
sending the SS (MCVideo Server) a SIP PUBLISH message }
}
##### (3) {#section-11 .H6}
**with** { UE (MCVideo Client) already provisioned with the group information
or a pointer to the group information, that the UE (MCVideo Client) is allowed
to be affiliated }
**ensure that** {\ **when** { MCVideo User requests for current affiliation
status and to subscribe to affiliation status changes for a target user }
**then** { UE (MCVideo Client) requests to subscribe to affiliation status
changes for the target user by sending the SS (MCVideo Server) a SIP SUBSCRIBE
message **and** starts informing the MCVideo User of any affiliation status
changes for the target user after the subscription is accepted }
}
##### (4) {#section-12 .H6}
**with** { UE (MCVideo Client) already provisioned with the group information
or a pointer to the group information that the UE (MCVideo Client) is allowed
to make affiliation changes for another user }
**ensure that** {\ **when** { MCVideo User requests that a target user be
affiliated to an MCVideo group via mandatory mode }
**then** { UE (MCVideo Client) requests that a target user be affiliated to an
MCVideo group via mandatory mode by sending the SS (MCVideo Server) a SIP
PUBLISH message }
}
##### (5) {#section-13 .H6}
**with** { UE (MCVideo Client) already provisioned with the group information
or a pointer to the group information that the UE (MCVideo Client) is allowed
to make affiliation changes for another user }
**ensure that** {\ **when** { MCVideo User requests that a target user be de-
affiliated to an MCVideo group via mandatory mode }
**then** { UE (MCVideo Client) requests that a target user be de-affiliated to
an MCVideo group via mandatory mode by sending the SS (MCVideo Server) a SIP
PUBLISH message }
}
##### (6) {#section-14 .H6}
**with** { UE (MCVideo Client) already provisioned with the group information
or a pointer to the group information that the UE (MCVideo Client) is allowed
to make affiliation changes for another user }
**ensure that** {\ **when** { MCVideo User requests that a target user be
affiliated to an MCVideo group via negotiated mode }
**then** { UE (MCVideo Client) requests that a target user be affiliated to an
MCVideo group via negotiated mode by sending the SS (MCVideo Server) a SIP
MESSAGE }
}
##### (7) {#section-15 .H6}
**with** { UE (MCVideo Client) already provisioned with the group information
or a pointer to the group information, that the UE (MCVideo Client) is allowed
to be affiliated }
**ensure that** {\ **when** { MCVideo User requests to de-subscribe to
affiliation status changes for a target user }
**then** { UE (MCVideo Client) requests to de-subscribe to affiliation status
changes for a target user by sending the SS (MCVideo Server) a SIP SUBSCRIBE
message }
}
##### (8) {#section-16 .H6}
**with** { UE (MCVideo Client) already affiliated with a MCVideo group }
**ensure that** {\ **when** { MCVideo User requests to de-affiliate from an
MCVideo group }
**then** { UE (MCVideo Client) requests to de-affiliate from an MCVideo group
by sending the SS (MCVideo Server) a SIP PUBLISH message }
}
##### (9) {#section-17 .H6}
**with** { UE (MCVideo Client) already provisioned with the group information
or a pointer to the group information, that the UE (MCVideo Client) is allowed
to be affiliated }
**ensure that** {\ **when** { MCVideo Server requests that the MCVideo User
choose to affiliate to an MCVideo group via negotiated mode by sending a SIP
MESSAGE }
**then** { UE (MCVideo Client) accepts to affiliate to a MCVideo group by
sending the SS (MCVideo Server) a SIP PUBLISH message }
}
##### 5.3.2 Conformance requirements {#conformance-requirements-2 .H6}
References: The conformance requirements covered in the current TC are
specified in: TS 24.281, clauses 8.2.1.2, 8.2.1.3, 8.2.1.4, and 8.2.1.5. The
following represents a copy/paste extraction of the requirements relevant to
the test purpose; any references within the copy/paste text should be
understood within the scope of the core spec they have been copied from.
Unless otherwise stated, these are Rel-14 requirements.
[TS 24.281, clause 8.2.1.2]
In order:
\- to indicate that an MCVideo user is interested in one or more MCVideo
group(s) at an MCVideo client;
\- to indicate that the MCVideo user is no longer interested in one or more
MCVideo group(s) at the MCVideo client;
\- to refresh indication of an MCVideo user interest in one or more MCVideo
group(s) at an MCVideo client due to near expiration of the expiration time of
an MCVideo group with the affiliation status set to the \"affiliated\" state
received in a SIP NOTIFY request in subclause 8.2.1.3;
\- to send an affiliation status change request in mandatory mode to another
MCVideo user; or
\- any combination of the above;
the MCVideo client shall generate a SIP PUBLISH request according to 3GPP TS
24.229 [11], IETF RFC 3903 [12], and IETF RFC 3856 [13].
In the SIP PUBLISH request, the MCVideo client:
1) shall set the Request-URI to the public service identity identifying the
originating participating MCVideo function serving the MCVideo user;
2) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body. In the
application/vnd.3gpp.mcvideo-info+xml MIME body, the MCVideo client shall
include the \ element set to the MCVideo ID of the
MCVideo user;
3) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
(coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
field according to IETF RFC 6050 [14];
4) if the targeted MCVideo user is interested in at least one MCVideo group at
the targeted MCVideo client, shall set the Expires header field according to
IETF RFC 3903 [12], to 4294967295;
NOTE 1: 4294967295, which is equal to 2^32^-1, is the highest value defined
for Expires header field in IETF RFC 3261 [15].
5) if the targeted MCVideo user is no longer interested in any MCVideo group
at the targeted MCVideo client, shall set the Expires header field according
to IETF RFC 3903 [12], to zero; and
6) shall include an application/pidf+xml MIME body indicating per-user
affiliation information according to subclause 8.3.1. In the MIME body, the
MCVideo client:
a) shall include all MCVideo groups where the targeted MCVideo user indicates
its interest at the targeted MCVideo client;
b) shall include the MCVideo client ID of the targeted MCVideo client;
c) shall not include the \"status\" attribute and the \"expires\" attribute in
the \ element; and
d) shall set the \ child element of the \ root element to a
globally unique value.
The MCVideo client shall send the SIP PUBLISH request according to 3GPP TS
24.229 [11].
[TS 24.281, clause 8.2.1.3]
NOTE 1: The MCVideo UE also uses this procedure to determine which MCVideo
groups the MCVideo user successfully affiliated to.
In order to discover MCVideo groups:
1) which the MCVideo user at an MCVideo client is affiliated to; or
2) which another MCVideo user is affiliated to;
the MCVideo client shall generate an initial SIP SUBSCRIBE request according
to 3GPP TS 24.229 [11], IETF RFC 3856 [13], and IETF RFC 6665 [16].
In the SIP SUBSCRIBE request, the MCVideo client:
1) shall set the Request-URI to the public service identity identifying the
originating participating MCVideo function serving the MCVideo user;
2) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body. In the
application/vnd.3gpp.mcvideo-info+xml MIME body, the MCVideo client shall
include the \ element set to the MCVideo ID of the
targeted MCVideo user;
3) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
(coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
field according to IETF RFC 6050 [14];
4) if the MCVideo client wants to receive the current status and later
notification, shall set the Expires header field according to IETF RFC 6665
[16], to 4294967295;
NOTE 2: 4294967295, which is equal to 2^32^-1, is the highest value defined
for Expires header field in IETF RFC 3261 [15].
5) if the MCVideo client wants to fetch the current state only, shall set the
Expires header field according to IETF RFC 6665 [16], to zero; and
6) shall include an Accept header field containing the application/pidf+xml
MIME type; and
7) if requesting MCVideo groups where the MCVideo user is affiliated to at the
MCVideo client, shall include an application/simple-filter+xml MIME body
indicating per client restrictions of presence event package notification
information according to subclause 8.3.2.
In order to re-subscribe or de-subscribe, the MCVideo client shall generate an
in-dialog SIP SUBSCRIBE request according to 3GPP TS 24.229 [11], IETF RFC
3856 [13], and IETF RFC 6665 [16]. In the SIP SUBSCRIBE request, the MCVideo
client:
1) if the MCVideo client wants to receive the current status and later
notification, shall set the Expires header field according to IETF RFC 6665
[16], to 4294967295;
NOTE 3: 4294967295, which is equal to 2^32^-1, is the highest value defined
for Expires header field in IETF RFC 3261 [15].
2) if the MCVideo client wants to de-subscribe, shall set the Expires header
field according to IETF RFC 6665 [16], to zero; and
3) shall include an Accept header field containing the application/pidf+xml
MIME type.
Upon receiving a SIP NOTIFY request according to 3GPP TS 24.229 [11], IETF RFC
3856 [13], and IETF RFC 6665 [16], if SIP NOTIFY request contains an
application/pidf+xml MIME body indicating per-user affiliation information
constructed according to subclause 8.3.1, then the MCVideo client shall
determine affiliation status of the MCVideo user for each MCVideo group at the
MCVideo client(s) in the MIME body. If the \ child element of the
\ root element of the application/pidf+xml MIME body of the SIP
NOTIFY request is included, the \ element value indicates the SIP
PUBLISH request which triggered sending of the SIP NOTIFY request.
[TS 24.281, clause 8.2.1.4]
NOTE: Procedure for sending affiliation status change request in negotiated
mode to several target MCVideo users is not supported in this version of the
specification.
Upon receiving a request from the MCVideo user to send an affiliation status
change request in negotiated mode to a target MCVideo user, the MCVideo client
shall generate a SIP MESSAGE request in accordance with 3GPP TS 24.229 [11]
and IETF RFC 3428 [17]. In the SIP MESSAGE request, the MCVideo client:
1) shall set the Request-URI to the public service identity identifying the
originating participating MCVideo function serving the MCVideo user;
2) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body. In the
application/vnd.3gpp.mcvideo-info+xml MIME body, the MCVideo client shall
include the \ element set to the MCVideo ID of the target
MCVideo user;
3) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
(coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
field according to IETF RFC 6050 [14] in the SIP MESSAGE request;
4) shall include an application/vnd.3gpp.mcvideo-affiliation-command+xml MIME
body as specified in Annex F.4; and
5) shall send the SIP MESSAGE request according to rules and procedures of
3GPP TS 24.229 [11].
On receiving a SIP 2xx response to the SIP MESSAGE request, the MCVideo client
shall indicate to the user that the request has been delivered to an MCVideo
client of the target MCVideo user.
[TS 24.281, clause 8.2.1.5]
Upon receiving a SIP MESSAGE request containing:
1) the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" (coded as
specified in 3GPP TS 24.229 [11]), in a P-Asserted-Service header field
according to IETF RFC 6050 [14]; and
2) an application/vnd.3gpp.mcvideo-affiliation-command+xml MIME body with a
list of MCVideo groups for affiliation under the \ element and a
list of MCVideo groups for de-affiliation under the \ element;
then the MCVideo client:
1) shall send a 200 (OK) response to the SIP MESSAGE request;
2) shall seek confirmation of the list of MCVideo groups for affiliation and
the list of MCVideo groups for de-affiliation, resulting in an accepted list
of MCVideo groups for affiliation and an accepted list of MCVideo groups for
de-affiliation; and
3) if the user accepts the request:
a) shall perform affiliation for each entry in the accepted list of MCVideo
groups for affiliation for which the MCVideo client is not affiliated, as
specified in subclause 8.2.1.2; and
b) shall perform de-affiliation for each entry in the accepted list of MCVideo
groups for de-affiliation for which the MCVideo client is affiliated, as
specified in subclause 8.2.1.2.
##### 5.3.3 Test description {#test-description-2 .H6}
##### 5.3.3.1 Pre-test conditions {#pre-test-conditions-2 .H6}
Same pre-test conditions as for MCPTT test case 5.3 (TS 36.579-2 [24]) with
the following exception(s):
\- The term \"MCPTT\" is replaced with \"MCVideo\"
##### 5.3.3.2 Test procedure sequence {#test-procedure-sequence-2 .H6}
Same test procedure sequence as for MCPTT test case 5.3 (TS 36.579-2 [24])
with the following exception(s):
\- The term \"MCPTT\" is replaced with \"MCVideo\"
##### 5.3.3.3 Specific message contents {#specific-message-contents-2 .H6}
Same specific message contents as for MCPTT test case 5.3 (TS 36.579-2 [24])
with the following exception(s):
\- The term \"MCPTT\" is replaced with \"MCVideo\"
\- Condition MCVIDEO is used for all messages.
## 5.4 Configuration / Determination of MCVideo Service Settings / Current
Active MCVideo Settings / De-subscribe
##### 5.4.1 Test Purpose (TP) {#test-purpose-tp-3 .H6}
##### (1) {#section-18 .H6}
**with** { UE (MCVIDEO Client) registered and authorised for MCVIDEO Service }
**ensure that** {\ **when** { MCVideo User requests to verify the currently
active MCVideo service settings or to discover MCVideo service settings }
**then** { UE (MCVideo Client) sends a SIP SUBSCRIBE message to find the
MCVideo service settings **and** responds to the SIP NOTIFY message with a SIP
200 (OK) message }
}
##### (2) {#section-19 .H6}
**with** { UE (MCVIDEO Client) having already subscribed to find the MCVideo
service settings }
**ensure that** {\ **when** { MCVideo User requests to re-subscribe for
MCVideo service settings }
**then** { UE (MCVIDEO Client) sends a SIP SUBSCRIBE message to re-subscribe
for the MCVideo service settings **and** responds to the SIP NOTIFY message
with a SIP 200 (OK) message }
}
##### (3) {#section-20 .H6}
**with** { UE (MCVIDEO Client) having already subscribed to find the MCVideo
service settings }
**ensure that** {\ **when** { MCVideo User requests to de-subscribe for
MCVideo service settings }
**then** { UE (MCVIDEO Client) sends a SIP SUBSCRIBE message to de-subscribe
for the MCVideo service settings **and** responds to the SIP NOTIFY message
with a SIP 200 (OK) message }
}
##### 5.4.2 Conformance requirements {#conformance-requirements-3 .H6}
References: The conformance requirements covered in the present TC are
specified in: TS 24.281 clause 7.2.4. The following represents a copy/paste
extraction of the requirements relevant to the test purpose; any references
within the copy/paste text should be understood within the scope of the core
spec they have been copied from. Unless otherwise stated these are Rel-14
requirements.
[TS 24.281, clause 7.2.4]
In order to discover MCVideo service settings of another MCVideo client of the
same MCVideo user or to verify the currently active MCVideo service settings
of this MCVideo client, the MCVideo client shall generate an initial SIP
SUBSCRIBE request according to 3GPP TS 24.229 [11], IETF RFC 6665 [16], and
IETF RFC 4354 [53].
In the SIP SUBSCRIBE request, the MCVideo client:
1) shall set the Request-URI to the public service identity identifying the
originating participating MCVideo function serving the MCVideo user;
2) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body. In the
application/vnd.3gpp.mcvideo-info+xml MIME body, the MCVideo client shall
include the \ element set to the MCVideo ID of the
MCVideo user;
3) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
(coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
field according to IETF RFC 6050 [14];
4) shall set the Event header field to the \'poc-settings\' value;
5) shall include an Accept header field containing the \"application/poc-
settings+xml\" MIME type;
6) if the MCVideo client wants to receive the current status and later
notification, shall set the Expires header field according to IETF RFC 6665
[16], to 4294967295; and
NOTE 1: 4294967295, which is equal to 2^32^-1, is the highest value defined
for Expires header field in IETF RFC 3261 [15].
7) if the MCVideo client wants to fetch the current state only, shall set the
Expires header field according to IETF RFC 6665 [16], to zero.
In order to re-subscribe or de-subscribe, the MCVideo client shall generate an
in-dialog SIP SUBSCRIBE request according to 3GPP TS 24.229 [11], IETF RFC
6665 [16], IETF RFC 4354 [53]. In the SIP SUBSCRIBE request, the MCVideo
client:
1) shall set the Event header field to the \'poc-settings\' value;
2) shall include an Accept header field containing the \"application/poc-
settings+xml\" MIME type;
3) if the MCVideo client wants to receive the current status and later
notification, shall set the Expires header field according to IETF RFC 6665
[16], to 4294967295; and
NOTE 2: 4294967295, which is equal to 2^32^-1, is the highest value defined
for Expires header field in IETF RFC 3261 [15].
4) if the MCVideo client wants to de-subscribe, shall set the Expires header
field according to IETF RFC 6665 [16], to zero.
Upon receiving a SIP NOTIFY request according to 3GPP TS 24.229 [11], IETF RFC
6665 [16] and IETF RFC 4354 [53], that contains an application/poc-
settings+xml MIME body the MCVideo client shall cache:
1) the \ element of the poc-settings+xml MIME body for each
MCVideo client identified by the \"id\" attribute according to IETF RFC 4354
[53] as the current Answer-mode indication of that MPCTT client; and
2) the \ element of the poc-settings+xml MIME
body for each MCVideo client identified by the \"id\" attribute according to
IETF RFC 4354 [53] as the active MCVideo user profile of that MCVideo client.
##### 5.4.3 Test description {#test-description-3 .H6}
##### 5.4.3.1 Pre-test conditions {#pre-test-conditions-3 .H6}
Same pre-test conditions as for MCPTT test case 5.5 (TS 36.579-2 [24]) with
the following exception(s):
\- The term \"MCPTT\" is replaced with \"MCVideo\"
##### 5.4.3.2 Test procedure sequence {#test-procedure-sequence-3 .H6}
Same test procedure sequence as for MCPTT test case 5.5 (TS 36.579-2 [24])
with the following exception(s):
\- The term \"MCPTT\" is replaced with \"MCVideo\"
##### 5.4.3.3 Specific message contents {#specific-message-contents-3 .H6}
Same specific message contents as for MCPTT test case 5.5 (TS 36.579-2 [24])
with the following exception(s):
\- The term \"MCPTT\" is replaced with \"MCVideo\"
\- Condition MCVIDEO is used for all messages.
# 6 On-Network Test Scenarios
## 6.1 Group Calls
6.1.1 Pre-Arranged Group Call
6.1.1.1 On-network / On-demand Pre-arranged Group Call / Automatic
Commencement Mode / Transmission Control / Upgrade to Emergency Group Call /
Cancel Emergency State / Upgrade to Imminent Peril Group Call / Cancel
Imminent Peril State / Client Originated (CO)
##### 6.1.1.1.1 Test Purpose (TP) {#test-purpose-tp-4 .H6}
##### (1) {#section-21 .H6}
**with** { the UE (MCVideo Client) registered and authorised for MCVideo
Service }
ensure that {
**when** { the MCVideo User requests the establishment of an MCVideo On-demand
Pre-arranged Group Call forcing Automatic Commencement Mode and implicit
Transmission Control }
**then** { the UE (MCVideo Client) requests an On-demand Automatic
Commencement Mode Pre-arranged Group Call establishment with implicit
Transmission Control by sending a SIP INVITE message, **and** , after
indication from the SS (MCVideo Server) that the call was established,
provides transmission granted notification to the MCVideo User }
}
##### (2) {#section-22 .H6}
**with** { the UE (MCVideo Client) having established a MCVideo On-demand Pre-
arranged Group Call with Automatic Commencement Mode }
ensure that {
**when** { the MCVideo User engages in communication with the invited MCVideo
User(s) }
**then** { the UE (MCVideo Client) respects the Transmission Control imposed
by the SS (MCVideo Server) (Transmission Granted, Transmission Control ACK,
Transmission End Request, Transmission End Response, Transmission Idle) }
}
##### (3) {#section-23 .H6}
**with** { the UE (MCVideo Client) having established an On-demand Pre-
arranged Group Call with Automatic Commencement Mode and the MCVideo User
being authorized for initiating a MCVideo Emergency Group Call }
ensure that {
**when** {the MCVideo User requests to upgrade the ongoing MCVideo Group Call
to an MCVideo Emergency Group Call with Transmission Control }
**then** { the UE (MCVideo Client) sends a SIP re-INVITE request **and** upon
receipt of a SIP 2xx response considers the call as being upgraded to
Emergency Group Call **and** notifies the MCVideo User }
}
##### (4) {#section-24 .H6}
**with** { the UE (MCVideo Client) having upgraded to an Emergency Group Call
}
ensure that {
**when** { the MCVideo User continues communication with the invited MCVideo
User(s) }
**then** { the UE (MCVideo Client) respects the Transmission Control imposed
by the SS (MCVideo Server) }
}
##### (5) {#section-25 .H6}
**with** { the UE (MCVideo Client) having upgraded an On-demand Pre-arranged
Group Call with Automatic Commencement Mode to an Emergency Group Call and the
MCVideo User being authorized for cancelling an MCVideo Emergency state
(MCVideo in-progress emergency cancel) }
ensure that {
**when** { the MCVideo User requests to cancel the ongoing MCVideo Emergency
state }
**then** { the UE (MCVideo Client) sends a SIP re-INVITE request **and** upon
receipt of a SIP 2xx response considers the emergency condition cancelled,
**and** notifies the user }
}
##### (6) {#section-26 .H6}
**with** { the UE (MCVideo Client) having established an On-demand Pre-
arranged Group Call with Automatic Commencement Mode and the MCVideo User
being authorized for initiating a MCVideo Imminent Peril Group Call }
ensure that {
**when** { the MCVideo User requests to upgrade the ongoing MCVideo Group Call
to a MCVideo Imminent Peril Group Call with Transmission Control }
**then** { the UE (MCVideo Client) sends a SIP re-INVITE request **and** upon
receipt of a SIP 2xx response considers the call as being upgraded to Imminent
Peril Group Call, **and** notifies the user }
}
##### (7) {#section-27 .H6}
**with** {the UE (MCVideo Client) having upgraded to an Imminent Peril Group
Call}
ensure that {
**when** {the MCVideo User continues communication with the invited MCVideo
User(s)}
**then** {the UE (MCVideo Client) respects the Transmission Control imposed by
the SS (MCVideo Server) }
}
##### (8) {#section-28 .H6}
**with** {the UE (MCVideo Client) having upgraded an On-demand Pre-arranged
Group Call with Automatic Commencement Mode to an Imminent Peril Group Call
and the MCVideo User being authorized for cancelling a MCVideo Imminent Peril
state (MCVideo In-Progress Imminent Peril Cancel) }
ensure that {
**when** {the MCVideo User requests to cancel the ongoing MCVideo Imminent
Peril state }
**then** {the UE (MCVideo Client) sends a SIP re-INVITE request **and** upon
receipt of a SIP 2xx response considers the Imminent Peril condition
cancelled, **and** notifies the user }
}
##### (9) {#section-29 .H6}
**with** {the UE (MCVideo Client) having an ongoing On-demand Pre-arranged
Group Call with Automatic Commencement Mode }
ensure that {
**when** {the MCVideo User requests to terminate the ongoing MCVideo Group
Call}
**then** {the UE (MCVideo Client) sends a Transmission End Request,
acknowledges the Transmission End Response from the SS (MCVideo Server),
**and** sends a SIP BYE message, **and** leaves the MCVideo Session }
}
##### 6.1.1.1.2 Conformance requirements {#conformance-requirements-4 .H6}
References: The conformance requirements covered in the current TC are
specified in TS 24.281, clauses 6.2.3.1.2, 6.2.3.1.1, 9.2.1.2.1.1,
9.2.1.2.1.3, 9.2.1.2.1.4, 9.2.1.2.1.5, 9.2.1.2.1.6, 9.2.1.3.3.1, 9.2.1.4.7,
9.2.1.4.8; and TS 24.581, clauses 6.2.4.4.6, 6.3.4.3.6, 6.3.4.4.12, 6.3.5.3.9,
6.3.5.4.8. The following represents a copy/paste extraction of the
requirements relevant to the test purpose; any references within the
copy/paste text should be understood within the scope of the core spec they
have been copied from. Unless otherwise stated, these are Rel-15 requirements.
[TS 24.281, clause 6.2.3.1.2]
When performing the automatic commencement mode procedures, the MCVideo client
shall follow the procedures in subclause 6.2.3.1.1 with the following
clarification:
> \- The MCVideo client may include a P-Answer-State header field with the
> value \"Confirmed\" as specified in IETF RFC 4964 [30] in the SIP 200 (OK)
> response.
[TS 24.281, clause 6.2.3.1.1]
When performing the automatic commencement mode procedures, the MCVideo
client:
> 1) shall accept the SIP INVITE request and generate a SIP 200 (OK) response
> according to rules and procedures of 3GPP TS 24.229 [11];
>
> 2) shall include the option tag \"timer\" in a Require header field of the
> SIP 200 (OK) response;
>
> 3) shall include the g.3gpp.mcvideo media feature tag in the Contact header
> field of the SIP 200 (OK) response;
>
> 4) shall include the g.3gpp.icsi-ref media feature tag containing the value
> of \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" in the Contact header field
> of the SIP 200 (OK) response;
>
> 5) shall include the Session-Expires header field in the SIP 200 (OK)
> response and start the SIP session timer according to IETF RFC 4028 [23].
> The \"refresher\" parameter in the Session-Expires header field shall be set
> to \"uas\";
>
> 6) shall, if the incoming SIP INVITE request contains a Replaces header
> field, include in the SDP answer in the SIP 200 (OK) response to the SDP
> offer the parameters used for the pre-established session identified by the
> contents of the Replaces header field;
>
> 7) shall, if the incoming SIP INVITE request does not contain a Replaces
> header field, include an SDP answer in the SIP 200 (OK) response to the SDP
> offer in the incoming SIP INVITE request according to 3GPP TS 24.229 [11]
> with the clarifications given in subclause 6.2.2;
>
> NOTE: In the case of a new emergency call where the terminating client is
> using a pre-established session, the SIP INVITE request containing a
> Replaces header is used to replace the pre-established session.
>
> 8) shall send the SIP 200 (OK) response towards the MCVideo server according
> to rules and procedures of 3GPP TS 24.229 [11];
>
> 9) shall, if the incoming SIP INVITE request contains a Replaces header
> field, release the pre-established session identified by the contents of the
> Replaces header field; and
>
> 10) shall interact with the media plane as specified in 3GPP TS 24.581 [5].
When NAT traversal is supported by the MCVideo client and when the MCVideo
client is behind a NAT, generation of SIP responses is done as specified in
this subclause and as specified in IETF RFC 5626 [35].
[TS 24.281, clause 9.2.1.2.1.1]
Upon receiving a request from an MCVideo user to establish an MCVideo
prearranged group session the MCVideo client shall generate an initial SIP
INVITE request by following the UE originating session procedures specified in
3GPP TS 24.229 [11], with the clarifications given below.
The MCVideo client:
> 1) if the MCVideo user has requested the origination of an MCVideo emergency
> group call or is originating an MCVideo prearranged group call and the
> MCVideo emergency state is already set, the MCVideo client shall comply with
> the procedures in subclause 6.2.8.1.1;
>
> 2) if the MCVideo user has requested the origination of an MCVideo imminent
> peril group call, the MCVideo client shall comply with the procedures in
> subclause 6.2.8.1.9;
>
> 3) if the MCVideo user has requested the origination of a broadcast group
> call, the MCVideo client shall comply with the procedures in subclause
> 6.2.8.2;
>
> 4) shall include the g.3gpp.mcvideo media feature tag and the g.3gpp.icsi-
> ref media feature tag with the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" in the Contact header field of the SIP INVITE
> request according to IETF RFC 3840 [22];
>
> 5) shall include an Accept-Contact header field containing the
> g.3gpp.mcvideo media feature tag along with the \"require\" and \"explicit\"
> header field parameters according to IETF RFC 3841 [20];
>
> 6) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
> (coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
> field according to IETF RFC 6050 [14] in the SIP INVITE request;
>
> 7) shall include an Accept-Contact header field with the g.3gpp.icsi-ref
> media feature tag containing the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" along with the \"require\" and \"explicit\"
> header field parameters according to IETF RFC 3841 [20];
>
> 8) should include the \"timer\" option tag in the Supported header field;
>
> 9) should include the Session-Expires header field according to IETF RFC
> 4028 [23]. It is recommended that the \"refresher\" header field parameter
> is omitted. If included, the \"refresher\" header field parameter shall be
> set to \"uac\";
>
> 10) shall set the Request-URI of the SIP INVITE request to the public
> service identity identifying the participating MCVideo function serving the
> MCVideo user;
>
> NOTE 1: The MCVideo client is configured with public service identity
> identifying the participating MCVideo function serving the MCVideo user.
>
> 11) may include a P-Preferred-Identity header field in the SIP INVITE
> request containing a public user identity as specified in 3GPP TS 24.229
> [11];
>
> 12) if the MCVideo emergency state is already set or the MCVideo client
> emergency group state for this group is set to \"MVEG 2: in-progress\", the
> MCVideo client shall include the Resource-Priority header field and comply
> with the procedures in subclause 6.2.8.1.2;
>
> 13) if the MCVideo client imminent peril group state for this group is set
> to \"MVIG 2: in-progress\" or \"MVIG 4: confirm-pending\" shall include the
> Resource-Priority header field and comply with the procedures in subclause
> 6.2.8.1.12;
>
> 14) shall contain in an application/vnd.3gpp.mcvideo-info+xml MIME body with
> the \ element containing the \ element with:
>
> a) the \ element set to a value of \"prearranged\";
>
> b) the \ element set to the group identity;
>
> c) the \ element set to the MCVideo client ID of the
> originating MCVideo client; and
>
> NOTE 2: The MCVideo client does not include the MCVideo ID of the
> originating MCVideo user in the body, as this will be inserted into the body
> of the SIP INVITE request that is sent from the originating participating
> MCVideo function.
>
> d) if the group identity can be determined to be a TGI and if the MCVideo
> client can associate the TGI with a MCVideo group ID, the \ group-id> element set to the MCVideo group ID;
>
> NOTE 3: The text \"can associate the TGI with a MCVideo group ID\" means
> that the MCVideo client is able to determine that there is a constituent
> group of the temporary group that it is a member of.
>
> NOTE 4: The MCVideo client is informed about temporary groups and regrouping
> of MCVideo groups that the user is a member of as specified in 3GPP TS
> 24.481 [24].
>
> NOTE 5: If the MCVideo user selected a TGI where there are several MCVideo
> groups where the MCVideo user is a member, the MCVideo client selects one of
> those MCVideo groups.
>
> 15) shall include an SDP offer according to 3GPP TS 24.229 [11] with the
> clarifications given in subclause 6.2.1;
>
> 16) if an implicit transmission request is required, shall indicate this as
> specified in subclause 6.4; and
>
> 17) shall send the SIP INVITE request towards the MCVideo server according
> to 3GPP TS 24.229 [11].
On receiving a SIP 2xx response to the SIP INVITE request, the MCVideo client:
> 1) shall interact with the user plane as specified in 3GPP TS 24.581 [5]
>
> 2) if the MCVideo emergency group call state is set to \"MVEGC 2: emergency-
> call-requested\" or \"MVEGC 3: emergency-call-granted\" or the MCVideo
> imminent peril group call state is set to \"MVIGC 2: imminent-peril-call-
> requested\" or \"MVIGC 3: imminent-peril-call-granted\", the MCVideo client
> shall perform the actions specified in subclause 6.2.8.1.4; and
>
> 3) may subscribe to the conference event package as specified in subclause
> 9.1.3.1.
On receiving a SIP 4xx response, a SIP 5xx response or a SIP 6xx response to
the SIP INVITE request:
> 1) if the MCVideo emergency group call state is set to \"MVEGC 2: emergency-
> call-requested\" or \"MVEGC 3: emergency-call-granted\"; or
>
> 2) if the MCVideo imminent peril group call state is set to \"MVIGC 2:
> imminent-peril-call-requested\" or \"MVIGC 3: imminent-peril-call-granted\";
the MCVideo client shall perform the actions specified in subclause 6.2.8.1.5.
On receiving a SIP INFO request where the Request-URI contains an MCVideo
session ID identifying an ongoing group session, the MCVideo client shall
follow the actions specified in subclause 6.2.8.1.13
[TS 24.281, clause 9.2.1.2.1.3]
This subclause covers both on-demand session.
Upon receiving a request from an MCVideo user to upgrade the MCVideo group
session to an emergency condition or an imminent peril condition on an MCVideo
prearranged group, the MCVideo client shall generate a SIP re-INVITE request
as specified in 3GPP TS 24.229 [11], with the clarifications given below.
> 1) if the MCVideo user is requesting to upgrade the MCVideo group session to
> an in-progress emergency group state and this is an unauthorized request for
> an MCVideo emergency call as determined by the procedures of subclause
> 6.2.8.1.8, the MCVideo client:
>
> a) should indicate to the MCVideo user that they are not authorized to
> upgrade the MCVideo group session to an in-progress emergency group state;
> and
>
> b) shall skip the remaining steps of the current subclause;
>
> 2) if the MCVideo user is requesting to upgrade the MCVideo group session to
> an in-progress imminent peril state and this is an unauthorized request for
> an MCVideo imminent peril group call as determined by the procedures of
> subclause 6.2.8.1.8, the MCVideo client:
>
> a) should indicate to the MCVideo user that they are not authorized to
> upgrade the MCVideo group session to an in-progress imminent peril group
> state; and
>
> b) shall skip the remaining steps of the current subclause;
>
> 3) if the MCVideo user has requested to upgrade the MCVideo group session to
> an MCVideo emergency call, the MCVideo client:
>
> a) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body
> populated as specified in subclause 6.2.8.1.1;
>
> b) if an indication of an MCVideo emergency alert is to be included, shall
> perform the procedures specified in subclause 6.2.9.1 for the MCVideo
> emergency alert trigger; and
>
> c) shall include a Resource-Priority header field and comply with the
> procedures in subclause 6.2.8.1.2.
>
> 4) if the MCVideo user has requested to upgrade the MCVideo group session to
> an MCVideo imminent peril call, the MCVideo client:
>
> a) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body
> populated as specified in subclause 6.2.8.1.9; and
>
> b) shall include a Resource-Priority header field and comply with the
> procedures in subclause 6.2.8.1.12;
>
> 5) if the SIP re-INVITE request is to be sent within an on-demand session,
> shall include in the SIP re-INVITE request an SDP offer according to 3GPP TS
> 24.229 [11] with the clarifications specified in subclause 6.2.1;
>
> 6) if an implicit transmission request is required, shall indicate this as
> specified in subclause 6.4; and
>
> 7) shall send the SIP re-INVITE request according to 3GPP TS 24.229 [11].
On receiving a SIP 2xx response to the SIP re-INVITE request the MCVideo
client:
> 1) shall interact with the user plane as specified in 3GPP TS 24.581 [5];
> and
>
> 2) shall perform the actions specified in subclause 6.2.8.1.4.
On receiving a SIP INFO request where the Request-URI contains an MCVideo
session ID identifying an ongoing group session, the MCVideo client shall
follow the actions specified in subclause 6.2.8.1.13.
On receiving a SIP 4xx response, SIP 5xx response or a SIP 6xx response to the
SIP re-INVITE request the MCVideo client shall perform the actions specified
in subclause 6.2.8.1.5.
[TS 24.281, clause 9.2.1.2.1.4]
This subclause covers both on-demand session and pre-established sessions.
Upon receiving a request from an MCVideo user to cancel the in-progress
emergency condition on a prearranged MCVideo group, the MCVideo client shall
generate a SIP re-INVITE request by following the UE originating session
procedures specified in 3GPP TS 24.229 [11], with the clarifications given
below.
The MCVideo client:
> 1) if the MCVideo user is not authorized to cancel the in-progress emergency
> group state of the MCVideo group as determined by the procedures of
> subclause 6.2.8.1.7, the MCVideo client:
>
> a) should indicate to the MCVideo user that they are not authorized to
> cancel the in-progress emergency group state of the MCVideo group; and
>
> b) shall skip the remaining steps of the current subclause;
>
> 2) shall, if the MCVideo user is cancelling an in-progress emergency
> condition and optionally an MCVideo emergency alert originated by the
> MCVideo user, include an application/vnd.3gpp.mcvideo-info+xml MIME body
> populated as specified in subclause 6.2.8.1.3;
>
> 3) shall, if the MCVideo user is cancelling an in-progress emergency
> condition and an MCVideo emergency alert originated by another MCVideo user,
> include an application/vnd.3gpp.mcvideo-info+xml MIME body populated as
> specified in subclause 6.2.8.1.14;
>
> 4) shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body with
> the \ element containing the \ element with:
>
> a) the \ element set to a value of \"prearranged\"; and
>
> b) the \ element set to the group identity;
>
> NOTE 1: The MCVideo ID of the originating MCVideo user is not included in
> the body, as this will be inserted into the body of the SIP INVITE request
> that is sent by the originating participating MCVideo function.
>
> 5) shall include the g.3gpp.mcvideo media feature tag in the Contact header
> field of the SIP re-INVITE request according to IETF RFC 3840 [22];
>
> 6) if the SIP re-INVITE request is to be sent within an on-demand session,
> shall include in the SIP re-INVITE request an SDP offer according to 3GPP TS
> 24.229 [51] with the clarifications specified in subclause 6.2.1;
>
> 7) shall include a Resource-Priority header field and comply with the
> procedures in subclause 6.2.8.1.2; and
>
> 8) shall send the SIP re-INVITE request according to 3GPP TS 24.229 [11].
On receiving a SIP 2xx response to the SIP re-INVITE request, the MCVideo
client:
> 1) shall interact with the user plane as specified in 3GPP TS 24.581 [5];
>
> 2) shall set the MCVideo emergency group state of the group to \"MVEG 1: no-
> emergency\";
>
> 3) shall set the MCVideo emergency group call state of the group to \"MVEGC
> 1: emergency-gc-capable\"; and
>
> 4) if the MCVideo emergency alert state is set to \"MVEA 4: Emergency-alert-
> cancel-pending\", the sent SIP re-INVITE request did not contain an
> \ element in the application/vnd.3gpp.mcvideo-info+xml MIME
> body and the SIP 2xx response to the SIP request for a priority group call
> does not contain a Warning header field as specified in subclause 4.4 with
> the warning text containing the mcvideo-warn-code set to \"149\", shall set
> the MCVideo emergency alert state to \"MVEA 1: no-alert\".
On receiving a SIP INFO request where the Request-URI contains an MCVideo
session ID identifying an ongoing group session, the MCVideo client shall
follow the actions specified in subclause 6.2.8.1.13.
On receiving a SIP 4xx response, SIP 5xx response or SIP 6xx response to the
SIP re-INVITE request:
> 1) shall set the MCVideo emergency group state as \"MVEG 2: in-progress\";
>
> 2) if the SIP 4xx response, SIP 5xx response or SIP 6xx response contains an
> application/vnd.3gpp.mcvideo-info+xml MIME body with an \ element
> set to a value of \"true\" and the sent SIP re-INVITE request did not
> contain an \ element in the application/vnd.3gpp.mcvideo-
> info+xml MIME body, the MCVideo client shall set the MCVideo emergency alert
> state to \"MVEA 3: emergency-alert-initiated\"; and
>
> 3) if the SIP 4xx response, SIP 5xx response or SIP 6xx response did not
> contain an application/vnd.3gpp.mcvideo-info+xml MIME body with an \ ind> element and did not contain an \ element, the MCVideo
> emergency alert (MVEA) state shall revert to its value prior to entering the
> current procedure.
>
> NOTE 3: If the in-progress emergency group state cancel request is rejected,
> the state of the session does not change, i.e. continues with MCVideo
> emergency group call level priority.
[TS 24.281, clause 9.2.1.2.1.5]
This subclause covers on-demand session.
Upon receiving a request from an MCVideo user to cancel the in-progress
imminent peril condition on a prearranged MCVideo group, the MCVideo client
shall generate a SIP re-INVITE request by following the procedures specified
in 3GPP TS 24.229 [11], with the clarifications given below.
The MCVideo client:
> 1) if the MCVideo user is not authorized to cancel the in-progress imminent
> peril group state of the MCVideo group as determined by the procedures of
> subclause 6.2.8.1.10, the MCVideo client:
>
> a) should indicate to the MCVideo user that they are not authorized to
> cancel the in-progress imminent peril group state of the MCVideo group; and
>
> b) shall skip the remaining steps of the current subclause;
>
> 2) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body
> populated as specified in subclause 6.2.8.1.11; and
>
> 3) shall include a Resource-Priority header field and comply with the
> procedures in subclause 6.2.8.1.12;
>
> 4) shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body with
> the \ element containing the \ element with:
>
> a) the \ element set to a value of \"prearranged\"; and
>
> b) the \ element set to the group identity;
>
> NOTE 1: The MCVideo ID of the originating MCVideo user is not included in
> the body, as this will be inserted into the body of the SIP re-INVITE
> request that is sent by the originating participating MCVideo function.
>
> 5) shall include the g.3gpp.mcvideo media feature tag in the Contact header
> field of the SIP re-INVITE request according to IETF RFC 3840 [22];
>
> 6) if the SIP re-INVITE request is to be sent within an on-demand session,
> shall include in the SIP re-INVITE request an SDP offer according to 3GPP TS
> 24.229 [11] with the clarifications specified in subclause 6.2.1; and
>
> 7) shall send the SIP re-INVITE request according to 3GPP TS 24.229 [11].
On receiving a SIP 2xx response to the SIP re-INVITE request, the MCVideo
client:
> 1) shall interact with the user plane as specified in 3GPP TS 24.581 [5];
>
> 2) shall set the MCVideo imminent peril group state of the group to \"MVIG
> 1: no-imminent-peril\"; and
>
> 3) shall set the MCVideo imminent peril group call state of the group to
> \"MVIGC 1: imminent-peril-gc-capable\".
On receiving a SIP 4xx, SIP 5xx response or SIP 6xx response to the SIP re-
INVITE request:
> 1) if the SIP 4xx response, SIP 5xx response or SIP 6xx response:
>
> a) contains an application/vnd.3gpp.mcvideo-info+xml MIME body with an
> \ element set to a value of \"true\"; or
>
> b) does not contain an application/vnd.3gpp.mcvideo-info+xml MIME body with
> an \ element;
then the MCVideo client shall set the MCVideo imminent peril group state as
\"MVIG 2: in-progress\".
> NOTE 3: This is the case where the MCVideo client requested the cancellation
> of the MCVideo imminent peril in-progress state and was rejected.
[TS 24.281, clause 9.2.1.2.1.6]
This subclause covers both on-demand session.
Upon receipt of a SIP re-INVITE request the MCVideo client:
> 1) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element containing the \ Params> element with the \ element set to a value of
> \"true\":
>
> a) should display to the MCVideo user the MCVideo ID of the originator of
> the MCVideo emergency group call and an indication that this is an MCVideo
> emergency group call;
>
> b) if the \ element containing the \ element
> contains an \ element set to \"true\", should display to the
> MCVideo user an indication of the MCVideo emergency alert and associated
> information;
>
> c) shall set the MCVideo emergency group state to \"MVEG 2: in-progress\";
>
> d) shall set the MCVideo imminent peril group state to \"MVIG 1: no-
> imminent-peril\"; and
>
> e) shall set the MCVideo imminent peril group call state to \"MVIGC 1:
> imminent-peril-gc-capable\";
>
> 2) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element containing the \ Params> element with the \ element set to a value of
> \"true\":
>
> a) should display to the MCVideo user the MCVideo ID of the originator of
> the MCVideo imminent peril group call and an indication that this is an
> MCVideo imminent peril group call; and
>
> b) shall set the MCVideo imminent peril group state to \"MIG 2: in-
> progress\";
>
> 3) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element containing the \ Params> element with the \ element set to a value of
> \"false\":
>
> a) should display to the MCVideo user the MCVideo ID of the MCVideo user
> cancelling the MCVideo emergency group call;
>
> b) if the \ element containing the \ element
> contains an \ element set to \"false\":
>
> i) should display to the MCVideo user an indication of the MCVideo emergency
> alert cancellation and the MCVideo ID of the MCVideo user cancelling the
> MCVideo emergency alert; and
>
> ii) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body including an \ element:
>
> A) should display to the MCVideo user the MCVideo ID contained in the
> \ element of the MCVideo user that originated the MCVideo
> emergency alert; and
>
> B) if the MCVideo ID contained in the \ element is the
> MCVideo ID of the receiving MCVideo user shall set the MCVideo emergency
> alert state to \"MVEA 1: no-alert\";
>
> c) shall set the MCVideo emergency group state to \"MVEG 1: no-emergency\";
> and
>
> d) if the MCVideo emergency group call state of the group is set to \"MVEGC
> 3: emergency-call-granted\", shall set the MCVideo emergency group call
> state of the group to \"MVEGC 1: emergency-gc-capable\";
>
> 4) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element containing the \ Params> element with the \ element set to a value of
> \"false\":
>
> a) should display to the MCVideo user the MCVideo ID of the MCVideo user
> cancelling the MCVideo imminent peril group call and an indication that this
> is an MCVideo imminent peril group call;
>
> b) shall set the MCVideo imminent peril group state to \"MVIG 1: no-
> imminent-peril\"; and
>
> c) shall set the MCVideo imminent peril group call state to \"MVIGC 1:
> imminent-peril-gc-capable\";
>
> 5) shall check if a Resource-Priority header field is included in the
> incoming SIP re-INVITE request and may perform further actions outside the
> scope of this specification to act upon an included Resource-Priority header
> field as specified in 3GPP TS 24.229 [11];
>
> 6) shall accept the SIP re-INVITE request and generate a SIP 200 (OK)
> response according to rules and procedures of 3GPP TS 24.229 [11];
>
> 7) shall include the g.3gpp.mcvideo media feature tag in the Contact header
> field of the SIP 200 (OK) response;
>
> 8) shall include the g.3gpp.icsi-ref media feature tag containing the value
> of \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" in the Contact header field
> of the SIP 200 (OK) response;
>
> 9) if the SIP re-INVITE request was received within an on-demand session,
> shall include an SDP answer in the SIP 200 (OK) response to the SDP offer in
> the incoming SIP re-INVITE request according to 3GPP TS 24.229 [11] with the
> clarifications given in subclause 6.2.2;
>
> 10) shall send the SIP 200 (OK) response towards the MCVideo server
> according to rules and procedures of 3GPP TS 24.229 [11]; and
>
> 11) shall interact with the media plane as specified in 3GPP TS 24.581 [5].
[TS 24.281, clause 9.2.1.3.3.1]
Upon receiving from the MCVideo client a SIP BYE request the participating
MCVideo function shall follow the procedures as specified in subclause
6.3.2.1.6.
[TS 24.281, clause 9.2.1.4.7]
In the procedures in this subclause:
> 1) emergency indication in an incoming SIP INVITE request refers to the
> \ element of the application/vnd.3gpp.mcvideo-info+xml MIME
> body; and
>
> 2) imminent peril indication in an incoming SIP INVITE request refers to the
> \ element of the application/vnd.3gpp.mcvideo-info+xml
> MIME body.
Upon receipt of a SIP re-INVITE request for an MCVideo session identity
identifying an on-demand prearranged MCVideo group session, the controlling
MCVideo function:
> 1) if unable to process the request due to a lack of resources or a risk of
> congestion exists, may reject the SIP re-INVITE request with a SIP 500
> (Server Internal Error) response. The controlling MCVideo function may
> include a Retry-After header field to the SIP 500 (Server Internal Error)
> response as specified in IETF RFC 3261 [15] and skip the rest of the steps;
>
> NOTE 1: If the SIP re-INVITE request contains an
> application/vnd.3gpp.mcvideo-info+xml MIME body with the \
> element set to a value of \"true\", the controlling MCVideo function can
> choose to accept the request.
>
> 2) if received SIP re-INVITE request includes an
> application/vnd.3gpp.mcvideo-info+xml MIME body with an \
> element included or an \ element included, shall validate
> the request as described in subclause 6.3.3.1.17;
>
> 3) if the received SIP re-INVITE request contains an unauthorized request
> for an MCVideo emergency call as determined by subclause 6.3.3.1.13.2:
>
> a) shall reject the SIP re-INVITE request with a SIP 403 (Forbidden)
> response as specified in subclause 6.3.3.1.14; and
>
> b) shall send the SIP 403 (Forbidden) response as specified in 3GPP TS
> 24.229 [11] and skip the rest of the steps;
>
> 4) if the received SIP re-INVITE request contains an imminent peril
> indication set to \"true\" for an MCVideo imminent peril group call and this
> is an unauthorized request for an MCVideo imminent peril group call as
> determined by subclause 6.3.3.1.13.6, shall reject the SIP re-INVITE request
> with a SIP 403 (Forbidden) response with the following clarifications:
>
> a) shall include in the SIP 403 (Forbidden) response an
> application/vnd.3gpp.mcvideo-info+xml MIME body as specified in clause F.1
> with the \ element containing the \ element
> with the \ element set to a value of \"false\"; and
>
> b) shall send the SIP 403 (Forbidden) response as specified in 3GPP TS
> 24.229 [11] and skip the rest of the steps;
>
> 5) if a Resource-Priority header field is included in the received SIP re-
> INVITE request:
>
> a) if the Resource-Priority header field is set to the value indicated for
> emergency calls and the SIP re-INVITE request does not contain an emergency
> indication and the in-progress emergency state of the group is set to a
> value of \"false\", shall reject the SIP re-INVITE request with a SIP 403
> (Forbidden) response and skip the rest of the steps; and
>
> b) if the Resource-Priority header field is set to the value indicated for
> imminent peril calls and the SIP re-INVITE request does not contain an
> imminent peril indication and the in-progress imminent peril state of the
> group is set to a value of \"false\", shall reject the SIP INVITE request
> with a SIP 403 (Forbidden) response and skip the rest of the steps;
>
> 6) if the received SIP re-INVITE request contains an
> application/vnd.3gpp.mcvideo-info+xml MIME body with the \
> element set to a value of \"true\" and is an authorized request to initiate
> an MCVideo emergency group call as determined by subclause 6.3.3.1.13.2, the
> controlling MCVideo function shall:
>
> i) shall cache the MCVideo ID of the MCVideo user that has initiated an
> MCVideo emergency call;
>
> ii) if the received SIP INVITE contains an alert indication set to a value
> of \"true\" and this is an authorized request for an MCVideo emergency alert
> meeting the conditions specified in subclause 6.3.3.1.13.1, shall cache the
> MCVideo ID of the MCVideo user that has initiated an MCVideo emergency
> alert;
>
> iii) if the in-progress emergency state of the group is set to a value of
> \"true\":
>
> A) for each of the other affiliated member of the group generate a SIP
> MESSAGE request notification of the MCVideo user\'s emergency indication as
> specified in subclause 6.3.3.1.11, setting the \ element of
> the application/vnd.3gpp.mcvideo-info+xml MIME body to a value of \"true\";
>
> B) send the SIP MESSAGE request as specified in 3GPP TS 24.229 [11]; and
>
> C) if the in-progress imminent peril state of the group is set to a value of
> \"true\", shall set it to a value of \"false\"; and
>
> iv) if the in-progress emergency state of the group is set to a value of
> \"false\":
>
> A) shall set the value of the in-progress emergency state of the group to
> \"true\";
>
> B) shall start timer TNG2 (in-progress emergency group call timer) and
> handle its expiry as specified in subclause 6.3.3.1.16;
>
> NOTE 2: The interactions of TNG2 with the TNG3 (group call timer) are
> explained in subclause 6.3.3.5.2.
>
> Editor\'s Note: timers need to be defined.
>
> C) shall generate SIP re-INVITE requests for the MCVideo emergency group
> call to the other participants of the MCVideo group call as specified in
> subclause 6.3.3.1.6;
>
> D) shall send the SIP re-INVITEs towards the other participants of the
> MCVideo group call; and
>
> E) upon receiving a SIP 200 (OK) response to the SIP re-INVITE request the
> controlling MCVideo function shall interact with the media plane as
> specified in 3GPP TS 24.581 [5];
>
> 7) if the received SIP re-INVITE request contains an
> application/vnd.3gpp.mcvideo-info+xml MIME body with the \
> element set to a value of \"false\" and is an unauthorized request for an
> MCVideo emergency group call cancellation as determined by subclause
> 6.3.3.1.13.4:
>
> a) shall reject the SIP re-INVITE request with a SIP 403 (Forbidden)
> response;
>
> b) shall include in the SIP 403 (Forbidden) response an
> application/vnd.3gpp.mcvideo-info+xml MIME body as specified in annex F.1
> with an \ element set to a value of \"true\";
>
> c) if an \ element of the mcvideoinfo MIME body is included in
> the SIP re-INVITE request set to \"false\", and there is an outstanding
> MCVideo emergency alert for this MCVideo user, shall include in the
> application/vnd.3gpp.mcvideo-info+xml MIME body an \ element set
> to a value of \"true\"; and
>
> d) shall send the SIP 403 (Forbidden) response as specified in 3GPP TS
> 24.229 [11] and skip the rest of the steps;
>
> 8) if the received SIP re-INVITE request contains an
> application/vnd.3gpp.mcvideo-info+xml MIME body with the \
> element set to a value of \"false\" and is determined to be an authorized
> request for an MCVideo emergency call cancellation as specified in subclause
> 6.3.3.1.16 and the in-progress emergency state of the group to is set to a
> value of \"true\" the controlling MCVideo function:
>
> a) shall set the in-progress emergency group state of the group to a value
> of \"false\";
>
> b) shall clear the cache of the MCVideo ID of the MCVideo user as having an
> outstanding MCVideo emergency group call;
>
> c) if an \ element of the application/vnd.3gpp.mcvideo-info+xml
> MIME body is included and set to \"false\" and is determined to be an
> authorized request for an MCVideo emergency alert cancellation as specified
> in subclause 6.3.3.1.13.3 and there is an outstanding MCVideo emergency
> alert for this MCVideo user shall:
>
> i) if the received SIP re-INVITE request contains an \
> element in the application/vnd.3gpp.mcvideo-info+xml MIME body, clear the
> cache of the MCVideo ID of the MCVideo user identified by the \ by> element as having an outstanding MCVideo emergency alert; or
>
> ii) if the received SIP re-INVITE request does not contain an \ by> element in the application/vnd.3gpp.mcvideo-info+xml MIME body, clear
> the cache of the MCVideo ID of the sender of the SIP re-INVITE request as
> having an outstanding MCVideo emergency alert;
>
> d) shall generate SIP re-INVITE requests to the participants in the group
> call as specified in subclause 6.3.3.1.6. The MCVideo controlling function:
>
> i) for each of the other participants in the group call shall send the SIP
> re-INVITE request towards the MCVideo client as specified in 3GPP TS 24.229
> [11]; and
>
> ii) Upon receiving a SIP 200 (OK) response to the SIP re-INVITE request the
> controlling MCVideo function shall interact with the media plane as
> specified in 3GPP TS 24.581 [5];
>
> NOTE 3: Subclause 6.3.3.1.5 will inform the group call participants of the
> cancellation of the MCVideo group\'s in-progress emergency state and the
> cancellation of the MCVideo emergency alert if applicable.
>
> e) shall stop timer TNG2 (in-progress emergency group call timer); and
>
> NOTE 4: The interactions of TNG2 with the TNG3 (group call timer) are
> explained in subclause 6.3.3.5.2;
>
> f) for each of the affiliated members of the group that are not
> participating in the call:
>
> i) generate a SIP MESSAGE request notification of the cancellation of the
> MCVideo user\'s emergency call as specified in subclause 6.3.3.1.11;
>
> ii) set the \ element of the application/vnd.3gpp.mcvideo-
> info+xml MIME body to a value of \"false\";
>
> iii) if indicated above in step 8) c), set the \ element of the
> application/vnd.3gpp.mcvideo-info+xml MIME body to a value of \"false\"; and
>
> iv) send the SIP MESSAGE request according to 3GPP TS 24.229 [11];
>
> 9) if the received SIP re-INVITE request contains an imminent peril
> indication and the in-progress emergency group state of the group is set to
> a value of \"false\", shall perform the procedures specified in subclause
> 9.2.1.4.8 and skip the rest of the steps.
Upon receiving a SIP 200 (OK) response to a SIP re-INVITE request the
controlling MCVideo function shall interact with the media plane as specified
in 3GPP TS 24.581 [5];
> 1) shall generate a SIP 200 (OK) response according to rules and procedures
> of 3GPP TS 24.229 [11];
>
> 2) shall include in the SIP 200 (OK) response an SDP answer according to
> 3GPP TS 24.229 [11] with the clarifications specified in subclause
> 6.3.3.2.1;
>
> 3) shall include the \"norefersub\" option tag in a Supported header field
> according to IETF RFC 4488 [31];
>
> 4) shall include the \"tdialog\" option tag in a Supported header field
> according to IETF RFC 4538 [32];
>
> 5) if the received SIP re-INVITE request contains an
> application/vnd.3gpp.mcvideo-info+xml MIME body with the \
> element set to a value of \"true\" and if this is an unauthorized request
> for an MCVideo emergency alert as determined by subclause 6.3.3.1.13.1,
> shall include in the SIP 200 (OK) response the warning text set to \"149 SIP
> INFO request pending\" in a Warning header field as specified in subclause
> 4.4;
>
> 6) if the received SIP re-INVITE request contains an
> application/vnd.3gpp.mcvideo-info+xml MIME body with the \
> element set to a value of \"false\" and if this is an unauthorized request
> for an MCVideo emergency alert cancellation as determined by subclause
> 6.3.3.1.13.3, shall include in the SIP 200 (OK) response the warning text
> set to \"149 SIP INFO request pending\" in a Warning header field as
> specified in subclause 4.4;
>
> 7) if the received SIP re-INVITE request contains an
> application/vnd.3gpp.mcvideo-info+xml MIME body with the \ ind> element set to a value of \"true\", this is an authorized request for
> an MCVideo imminent peril group call and the in-progress emergency state of
> the group is set to a value of \"true\", shall include in the SIP 200 (OK)
> response the warning text set to \"149 SIP INFO request pending\" in a
> Warning header field as specified in subclause 4.4;
>
> NOTE 5: In this case, the request was for an imminent peril call but a
> higher priority MCVideo emergency call was already in progress on the group.
> Hence, the imminent peril call request aspect of the request is denied but
> the request is granted with emergency level priority.
>
> 8) shall interact with media plane as specified in 3GPP TS 24.581 [5]; and
>
> 9) shall send the SIP 200 (OK) response towards the MCVideo client according
> to 3GPP TS 24.229 [11].
Upon receiving a SIP ACK to the SIP 200 (OK) response sent towards the
inviting MCVideo client, and the SIP 200 (OK) response was sent with the
warning text set to \"149 SIP INFO request pending\" in a Warning header field
as specified in subclause 4.4, the controlling MCVideo function shall follow
the procedures in subclause 6.3.3.1.18.
Upon receipt of a SIP 2xx response for an outgoing SIP MESSAGE request, shall
handle according to 3GPP TS 24.229 [11].
[TS 24.281, clause 9.2.1.4.8]
This procedure is initiated by the controlling MCVideo function as the result
of an action in subclause 9.2.1.4.7.
In the procedures in this subclause:
> 1) imminent peril indication in an incoming SIP re-INVITE request refers to
> the \ element of the application/vnd.3gpp.mcvideo-
> info+xml MIME body.
When the controlling function receives a SIP re-INVITE request with an
imminent peril indication set to \"true\", the controlling function:
> 1) if the in-progress emergency state of the group is set to a value of
> \"false\" and if the SIP re-INVITE request contains an imminent peril
> indication set to a value of \"true\" or the in-progress imminent peril
> state of the group to \"true\", the controlling MCVideo function shall:
>
> NOTE: 1 The calling procedure has already determined that this is not an
> unauthorized request for an MCVideo imminent peril call, therefore that
> check does not need to be repeated in the current procedure.
>
> a) if the in-progress imminent peril state of the group is set to a value of
> \"true\" and this MCVideo user is indicating a new imminent peril
> indication:
>
> i) for each of the other affiliated member of the group generate a SIP
> MESSAGE request notification of the MCVideo user\'s imminent peril
> indication as specified in subclause 6.3.3.1.11 with the following
> clarifications;
>
> A) set the \ element of the application/vnd.3gpp.mcvideo-
> info+xml MIME body to a value of \"true\"; and
>
> B) send the SIP MESSAGE request as specified in 3GPP TS 24.229 [11];
>
> b) if the in-progress imminent peril state of the group is set to a value of
> \"false\";
>
> i) set the value of the in-progress imminent peril state of the group to
> \"true\";
>
> ii) generate SIP re-INVITE requests for the MCVideo imminent peril group
> call to participants in the MCVideo group call as specified in subclause
> 6.3.3.1.15;
>
> iii) send the SIP re-INVITES to all of the other participants in the MCVideo
> group call;
>
> iv) for each of the affiliated members of the group not participating in the
> group call, generate a SIP MESSAGE request notification of the MCVideo
> user\'s imminent peril indication as specified in subclause 6.3.3.1.11 with
> the following clarifications;
>
> A) set the \ element of the application/vnd.3gpp.mcvideo-
> info+xml MIME body to a value of \"true\"; and
>
> B) send the SIP MESSAGE request as specified in 3GPP TS 24.229 [11]; and
>
> c) cache the information that this MCVideo user has initiated an MCVideo
> imminent peril call;
>
> 2) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element set to a value of
> \"false\" and is an unauthorized request for an MCVideo imminent peril group
> call cancellation as determined by subclause 6.3.3.1.13.6 shall:
>
> a) reject the SIP re-INVITE request with a SIP 403 (Forbidden) response to
> the SIP re-INVITE request; and
>
> b) include in the SIP 403 (Forbidden) response an
> application/vnd.3gpp.mcvideo-info+xml MIME body as specified in Annex F.1
> with the \ element containing the \ element
> with the \ element set to a value of \"false\";
>
> c) send the SIP 403 (Forbidden) response as specified in 3GPP TS 24.229
> [11]; and
>
> d) skip the rest of the steps;
>
> 3) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element set to a value of
> \"false\" and is determined to be an authorized request for an MCVideo
> imminent peril call cancellation as specified in subclause 6.3.3.1.13.6 and
> the in-progress imminent peril state of the group to is set to a value of
> \"true\" the controlling MCVideo function shall:
>
> a) set the in-progress imminent peril state of the group to a value of
> \"false\";
>
> b) cache the information that this MCVideo user no longer has an outstanding
> MCVideo imminent peril group call;
>
> c) generate SIP re-INVITES requests to the other participants in the MCVideo
> group call as specified in subclause 6.3.3.1.15. The MCVideo controlling
> function:
>
> i) for each participant shall send the SIP re-INVITE request towards the
> MCVideo client as specified in 3GPP TS 24.229 [11]; and
>
> ii) Upon receiving a SIP 200 (OK) response to the SIP re-INVITE request the
> controlling MCVideo function interact with the media plane as specified in
> 3GPP TS 24.581 [5]; and
>
> NOTE 2: Subclause 6.3.3.1.14 will inform the affiliated and joined members
> of the cancellation of the MCVideo group\'s in-progress emergency state and
> the cancellation of the MCVideo emergency alert if applicable.
>
> d) for each of the affiliated members of the group not participating in the
> call shall:
>
> i) generate a SIP MESSAGE request notification of the cancellation of the
> MCVideo user\'s imminent peril call as specified in subclause 6.3.3.1.11;
>
> ii) set the \ element of the
> application/vnd.3gpp.mcvideo-info+xml MIME body to a value of \"false\"; and
>
> iii) send the SIP MESSAGE request according to 3GPP TS 24.229 [11];
>
> 4) shall include in the SIP 200 (OK) response an SDP answer according to
> 3GPP TS 24.229 [11] with the clarifications specified in subclause
> 6.3.3.2.1;
>
> 5) shall include the \"norefersub\" option tag in a Supported header field
> according to IETF RFC 4488 [31];
>
> 6) shall include the \"tdialog\" option tag in a Supported header field
> according to IETF RFC 4538 [32];
>
> 7) shall interact with media plane as specified in 3GPP TS 24.581 [5]; and
>
> 8) shall send the SIP 200 (OK) response towards the MCVideo client according
> to 3GPP TS 24.229 [11].
Upon receipt of a SIP 2xx response for an outgoing SIP MESSAGE request, shall
handle according to 3GPP TS 24.229 [11].
[TS 24.581, clause 6.2.4.4.6]
Upon receiving a Transmission Granted message from the transmission control
server, the transmission participant:
> 1\. if the first bit in the subtype of the Transmission Granted message is
> set to \'1\' (Acknowledgment is required) as described in subclause 9.2.2.1,
> shall send a Transmission control Ack message. The Transmission control Ack
> message:
>
> a. shall include the Message Type field set to \'0\' (Transmission Granted);
> and
>
> b. shall include the Source field set to \'0\' (the transmission participant
> is the source);
>
> 2\. shall store the SSRC of granted transmission participant received in the
> Transmission Granted message and use it in the RTP media packets until the
> transmission is relased;
>
> 3\. shall provide Transmission granted notification to the user, if not
> already done;
>
> 4\. shall stop timer T100 (Transmission Request); and
>
> 5\. shall enter the \'U: has permission to transmit\' state.
[TS 24.581, clause 6.3.4.3.6]
Upon receiving an implicit Transmission request due to an upgrade to an
emergency group call or due to an upgrade to imminent peril call, the
transmission control arbitration logic in the transmission control server:
> 1\. shall reject the request if there is only one MCVideo client in the
> MCVideo call;
>
> 2\. if the Transmission request is rejected the transmission control server:
>
> a. shall send the Transmission Reject message. The Transmission Reject
> message:
>
> i. shall include in the Reject Cause field the \ value cause
> #3 (Only one participant); and
>
> ii. may include in the Reject Cause field an additional text string
> explaining the reason for rejecting the Transmission request in the \ Phrase> value; and
>
> b. shall remain in the \'G: Transmit Idle\' state; and
>
> 3\. if the Transmission request is granted the transmission control server:
>
> a. shall stop the timer T1 (Inactivity);
>
> b. shall stop the timer T2 (Transmit Idle);
>
> c. shall store the SSRC of transmission participant granted the permission
> to send media until the transmission is released associated to that
> Transmission request; and
>
> d. shall enter the \'G: Transmit Taken\' state as specified in the subclause
> 6.3.4.4.2.
[TS 24.581, clause 6.3.4.4.12]
Upon receiving an implicit Transmission request due to an upgrade to an
emergency group call or due to an upgrade to imminent peril call, the
transmission control arbitration logic in the transmission control server:
> 1\. if counter Cx (Simultaneous transmission video) has not reached its
> upper limit:
>
> a. shall perform the actions specified in the subclause 6.3.4.4.2;
>
> 2\. if counter Cx (Simultaneous transmission video) has reached its upper
> limit:
>
> a. select one of the transmission participants with permission to send media
> without the pre-emptive priority or low effective priority;
>
> b. shall stop timer T4 (Transmission Grant), if running;
>
> c. shall set the Reject Cause field in the Transmission Revoke message to #4
> (Media Transmission pre-empted);
>
> d. shall enter the \'G: pending Transmission Revoke\' state as specified in
> the subclause 6.3.4.5.2;
>
> e. shall insert the transmission participant into the active Transmission
> request queue to the position in front of all queued requests, if not
> inserted yet or update the position of the transmission participant in the
> active Transmission request queue to the position in front of all other
> queued requests, if already inserted; and
>
> f. shall send a Transmission Queue Position Info message to the requesting
> transmission participant, if negotiated support of queueing Transmission
> requests as specified in clause 14. The Queue Position Request message:
>
> i. shall include the queue position and transmission priority in the Queue
> Info field; and
>
> ii. if a group call is a broadcast group call, a system call, an emergency
> call, an imminent peril call, or a temporary group session, shall include
> the Transmission Indicator field with appropriate indications.
[TS 24.581, clause 6.3.5.3.9]
When an ongoing session is upgraded to an emergency group call and when the
application and signalling plane indicates that a subsequent SDP offer
included the \"mc_implicit_request\" fmtp attribute as described in clause 14,
the transmission control interface towards the MCVideo client in the
transmission control server:
> 1\. shall indicate to the transmission control server arbitration logic that
> an implicit Transmission request is received due to an upgrade to an
> emergency group call; and
>
> 2\. shall remain in the \'U: not permitted and Transmit Idle\' state.
[TS 24.581, clause 6.3.5.4.8]
When an ongoing session is upgraded to an emergency group call and when the
application and signalling plane indicates that a subsequent SDP offer
included the \"mc_implicit_request\" fmtp attribute as specified in clause 14,
the transmission control interface towards the MCVideo client in the
transmission control server:
> 1\. shall indicate to the transmission control server arbitration logic that
> an implicit Transmission request is received due to an upgrade to an
> emergency group call; and
>
> 2\. shall remain in the \'U: not permitted and Transmit Taken\' state.
##### 6.1.1.1.3 Test description {#test-description-4 .H6}
##### 6.1.1.1.3.1 Pre-test conditions {#pre-test-conditions-4 .H6}
##### System Simulator: {#system-simulator .H6}
\- SS (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
##### IUT: {#iut .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
##### Preamble: {#preamble .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- UE States at the end of the preamble
\- The UE is in E-UTRA Registered, Idle Mode state.
\- The MCVideo Client Application has been activated and User has registered-
in as the MCVideo User with the Server as active user at the Client.
##### 6.1.1.1.3.2 Test procedure sequence {#test-procedure-sequence-4 .H6}
Table 6.1.1.1.3.2-1: Main Behaviour
+------------+------------+------------+---------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +============+============+============+=========+=========+====+ | | | U - S | Message | | | +------------+------------+------------+---------+---------+----+ | 1 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | the | | | | | | | est | | | | | | | ablishment | | | | | | | of a group | | | | | | | call with | | | | | | | automatic | | | | | | | co | | | | | | | mmencement | | | | | | | mode and | | | | | | | implicit | | | | | | | tr | | | | | | | ansmission | | | | | | | request. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 2 | Check: | - | - | 1, 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | CO session | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3B.1.3-1 | | | | | | | to | | | | | | | establish | | | | | | | a group | | | | | | | call with | | | | | | | automatic | | | | | | | co | | | | | | | mmencement | | | | | | | mode and | | | | | | | implicit | | | | | | | tr | | | | | | | ansmission | | | | | | | control | | | | | | | according | | | | | | | to option | | | | | | | b,ii of | | | | | | | NOTE 1 in | | | | | | | TS | | | | | | | 36.579.1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.1.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 3-7 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 8 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | provide | | | | | | | tr | | | | | | | ansmission | | | | | | | granted | | | | | | | no | | | | | | | tification | | | | | | | to the | | | | | | | user? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 8A | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | end of | | | | | | | tra | | | | | | | nsmission. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 8B | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | tr | | | | | | | ansmission | | | | | | | End | | | | | | | Request | | | | | | | CO\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.7.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 9 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | upgrade of | | | | | | | the call | | | | | | | to an | | | | | | | emergency | | | | | | | group call | | | | | | | with | | | | | | | implicit | | | | | | | tr | | | | | | | ansmission | | | | | | | request. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 10 | Check: | - | - | 3, 4 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | CO session | | | | | | | mod | | | | | | | ification' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.11.3-1 | | | | | | | to upgrade | | | | | | | the call | | | | | | | to an | | | | | | | emergency | | | | | | | group call | | | | | | | with | | | | | | | implicit | | | | | | | transmit | | | | | | | media | | | | | | | request? | | | | | +------------+------------+------------+---------+---------+----+ | 11-15 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 16 | Check: | - | - | 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | notify the | | | | | | | user that | | | | | | | the call | | | | | | | has been | | | | | | | upgraded | | | | | | | to an | | | | | | | emergency | | | | | | | group | | | | | | | call? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 16A | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | end of | | | | | | | tra | | | | | | | nsmission. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 16B | Check: | - | - | 4 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | tr | | | | | | | ansmission | | | | | | | End | | | | | | | Request | | | | | | | CO\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.7.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 17 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | downgrade | | | | | | | of the | | | | | | | call to a | | | | | | | normal | | | | | | | group | | | | | | | call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 18 | Check: | - | - | 5, 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | CO session | | | | | | | modi | | | | | | | fication\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.11.3-1 | | | | | | | to | | | | | | | downgrade | | | | | | | the call | | | | | | | without | | | | | | | implicit | | | | | | | transmit | | | | | | | media | | | | | | | request? | | | | | +------------+------------+------------+---------+---------+----+ | 19-23 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 24 | Check: | - | - | 5 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | notify the | | | | | | | user that | | | | | | | the call | | | | | | | has been | | | | | | | d | | | | | | | owngraded? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 24A-24B | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 25 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | upgrade of | | | | | | | the call | | | | | | | to an | | | | | | | imminent | | | | | | | peril | | | | | | | group call | | | | | | | with | | | | | | | implicit | | | | | | | tr | | | | | | | ansmission | | | | | | | request. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 26 | Check: | - | - | 6, 7 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | CO session | | | | | | | modi | | | | | | | fication\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.11.3-1 | | | | | | | to upgrade | | | | | | | the call | | | | | | | to an | | | | | | | imminent | | | | | | | peril call | | | | | | | with | | | | | | | implicit | | | | | | | transmit | | | | | | | media | | | | | | | request? | | | | | +------------+------------+------------+---------+---------+----+ | 27-31 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 32 | Check: | - | - | 6 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | notify the | | | | | | | user that | | | | | | | the call | | | | | | | has been | | | | | | | upgraded | | | | | | | to an | | | | | | | imminent | | | | | | | peril | | | | | | | group | | | | | | | call? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 32A | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | end of | | | | | | | tra | | | | | | | nsmission. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 32B | Check: | - | - | 4 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | tr | | | | | | | ansmission | | | | | | | End | | | | | | | Request | | | | | | | CO\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.7.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 33 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | downgrade | | | | | | | of the | | | | | | | call to a | | | | | | | normal | | | | | | | group | | | | | | | call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 34 | Check: | - | - | 8, 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | CO session | | | | | | | modi | | | | | | | fication\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.11.3-1 | | | | | | | to | | | | | | | downgrade | | | | | | | the call | | | | | | | without | | | | | | | implicit | | | | | | | transmit | | | | | | | media | | | | | | | request? | | | | | +------------+------------+------------+---------+---------+----+ | 35-39 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 40 | Check: | - | - | 8 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | notify the | | | | | | | user that | | | | | | | the call | | | | | | | has been | | | | | | | d | | | | | | | owngraded? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 41-45 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 46 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | release | | | | | | | the call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 47 | Check: | - | - | 9 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CO | | | | | | | call | | | | | | | release\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 48 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | NOTE 1: | | | | | | | This is | | | | | | | expected | | | | | | | to be done | | | | | | | via a | | | | | | | suitable | | | | | | | impl | | | | | | | ementation | | | | | | | dependent | | | | | | | MMI. | | | | | | +------------+------------+------------+---------+---------+----+
##### 6.1.1.1.3.3 Specific message contents {#specific-message-contents-4 .H6}
Table 6.1.1.1.3.3-1: SIP INVITE from the UE (Step 2, Table 6.1.1.1.3.2-1;\
Step 2, TS 36.579-1 [2] Table 5.3B.1.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.1-1
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP message**  
MIME-part-body SDP Message as described in Table 6.1.1.1.3.3-1A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.1.1.1.3.3-2
Table 6.1.1.1.3.3-1A: SDP message in SIP INVITE (Table 6.1.1.1.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.1-2, condition
INITIAL_SDP_OFFER, IMPLICIT_GRANT_REQUESTED
* * *
Table 6.1.1.1.3.3-2: MCVideo-Info in SIP INVITE (Table 6.1.1.1.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition GROUP-CALL,
INVITE_REFER
* * *
Table 6.1.1.1.3.3-3: SIP 200 (OK) from the SS (Step 2, Table 6.1.1.1.3.2-1;\
Step 4, TS 36.579-1 [2] Table 5.3B.1.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.17.1.2-1, condition INVITE-RSP
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
SDP Message As described in Table 6.1.1.1.3.3-3A
Table 6.1.1.1.3.3-3A: SDP message in SIP 200 (OK) (Table 6.1.1.1.3.3-3)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition SDP_ANSWER,
IMPLICIT_GRANT_REQUESTED
* * *
Table 6.1.1.1.3.3-4..5: Void
Table 6.1.1.1.3.3-6: SIP INVITE from the UE (Step 10, Table 6.1.1.1.3.2-1;\
Step 1, TS 36.579-1 [2] Table 5.3B.11.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.1-1, condition EMERGENCY-CALL,
re_INVITE
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP message**  
MIME-part-body SDP Message as described in Table 6.1.1.1.3.3-6A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.1.1.1.3.3-7
Table 6.1.1.1.3.3-6A: SDP message in SIP INVITE (Table 6.1.1.1.3.3-6)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.1-2, condition SDP_OFFER,
IMPLICIT_GRANT_REQUESTED
* * *
Table 6.1.1.1.3.3-7: MCVideo-Info in SIP INVITE (Table 6.1.1.1.3.3-6)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition GROUP-CALL,
EMERGENCY-CALL, INVITE_REFER
* * *
Table 6.1.1.1.3.3-8: SIP 200 (OK) from the SS (Steps 10, 26, Table
6.1.1.1.3.2-1;\ step 3, TS 36.579-1 [2] Table 5.3B.11.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.17.1.2-1, condition INVITE-RSP
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
SDP Message As described in Table 6.1.1.1.3.3-8A
Table 6.1.1.1.3.3-8A: SDP message in SIP 200 (OK) (Table 6.1.1.1.3.3-8)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition SDP_ANSWER,
IMPLICIT_GRANT_REQUESTED
* * *
Table 6.1.1.1.3.3-9: Transmission Granted from the SS (Step 10, Table
6.1.1.1.3.2-1;\ Step 5a1, TS 36.579-1 [2] Table 5.3B.11.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.1-1, condition ACK,
EMERGENCY-CALL
* * *
Table 6.1.1.1.3.3-9A: Transmission Idle from the SS (Step 16B, Table
6.1.1.1.3.2-1;\ Step 4, TS 36.579-1 [2] Table 5.3B.7.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.16-1, condition EMERGENCY-
CALL
* * *
Table 6.1.1.1.3.3-10: SIP INVITE from the UE (Step 18, Table 6.1.1.1.3.2-1;\
Step 1, TS 36.579-1 [2] Table 5.3B.11.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.1-1, condition re_INVITE
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP message**  
MIME-part-body SDP Message as described in Table 6.1.1.1.3.3-10A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.1.1.1.3.3-11
Table 6.1.1.1.3.3-10A: SDP message in SIP INVITE (Table 6.1.1.1.3.3-10)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.1-2, condition SDP_OFFER
* * *
Table 6.1.1.1.3.3-11: MCVideo-Info in SIP INVITE (Table 6.1.1.1.3.3-10)
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition GROUP-CALL,
INVITE_REFER
* * *
Information Element Value/remark Comment Reference Condition mcvideoinfo  
mcvideo-Params  
emergency-ind Encrypted \ with mcvideoBoolean set to false
Encryption according to NOTE 2 in TS 36.579-1 [2] Table 5.5.3.2.1-2
Table 6.1.1.1.3.3-11A: SIP 200 (OK) from the SS (Steps 18, 34, Table
6.1.1.1.3.2-1;\ step 3, TS 36.579-1 [2] Table 5.3B.11.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.17.1.2-1, condition INVITE-RSP
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
SDP Message As described in Table 6.1.1.1.3.3-11B
Table 6.1.1.1.3.3-11B: SDP message in SIP 200 (OK) (Table 6.1.1.1.3.3-11A)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition SDP_ANSWER
* * *
Table 6.1.1.1.3.3-12: SIP INVITE from the UE (Step 26, Table 6.1.1.1.3.2-1;\
Step 1, TS 36.579-1 [2] Table 5.3B.11.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.1-1, condition IMMPERIL-CALL,
re_INVITE
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP message**  
MIME-part-body SDP Message as described in Table 6.1.1.1.3.3-12A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.1.1.1.3.3-13
Table 6.1.1.1.3.3-12A: SDP message in SIP INVITE (Table 6.1.1.1.3.3-12)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.1-2, condition SDP_OFFER,
IMPLICIT_GRANT_REQUESTED
* * *
Table 6.1.1.1.3.3-13: MCVideo-Info in SIP INVITE (Table 6.1.1.1.3.3-12)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition GROUP-CALL,
IMMPERIL-CALL, INVITE_REFER
* * *
Table 6.1.1.1.3.3-14: Void
Table 6.1.1.1.3.3-15: Transmission Granted from the SS (Step 26, Table
6.1.1.1.3.2-1;\ Step 5a1, TS 36.579-1 [2] Table 5.3B.11.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.1-1, condition ACK, IMMPERIL-
CALL
* * *
Table 6.1.1.1.3.3-15A: Transmission Idle from the SS (Step 32B, Table
6.1.1.1.3.2-1;\ Step 4, TS 36.579-1 [2] Table 5.3B.7.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.16-1, condition IMMPERIL-CALL
* * *
Table 6.1.1.1.3.3-16..17: Void
Table 6.1.1.1.3.3-17A: SIP INVITE from the UE (Step 34, Table 6.1.1.1.3.2-1;\
Step 1, TS 36.579-1 [2] Table 5.3B.11.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.1-1, condition re_INVITE
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP message**  
MIME-part-body SDP Message as described in Table 6.1.1.1.3.3-17B  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.1.1.1.3.3-17C
Table 6.1.1.1.3.3-17B: SDP message in SIP INVITE (Table 6.1.1.1.3.3-17A)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.1-2, condition SDP_OFFER
* * *
Table 6.1.1.1.3.3-17C: MCVideo-Info in SIP INVITE (Table 6.1.1.1.3.3-17A)
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition GROUP-CALL,
INVITE_REFER
* * *
Information Element Value/remark Comment Reference Condition mcvideoinfo  
mcvideo-Params  
imminentperil-ind Encrypted \ with mcvideoBoolean set to
false Encryption according to NOTE 2 in TS 36.579-1 [2] Table 5.5.3.2.1-2
Table 6.1.1.1.3.3-18..19: Void
6.1.1.2 On-network / On-demand Pre-arranged Group Call / Automatic
Commencement Mode / Reception Control / Upgrade to Emergency Group Call /
Cancel Emergency State / Upgrade to Imminent Peril Group Call / Cancel
Imminent Peril State / Client Terminated (CT)
##### 6.1.1.2.1 Test Purpose (TP) {#test-purpose-tp-5 .H6}
##### (1) {#section-30 .H6}
**with** { the UE (MCVideo Client) registered and authorised for MCVideo }
**ensure that** {\ **when** { the UE (MCVideo Client) receives a SIP INVITE
from the SS (MCVideo Server)to initiate an On-demand Pre-arranged Group Call
with Automatic Commencement Mode and implicit Reception Control }
**then** { the UE (MCVideo Client) responds by sending a SIP 200 (OK) }
}
##### (2) {#section-31 .H6}
**with** { the UE (MCVideo Client) having an ongoing On-demand Pre-arranged
Group Call with Automatic Commencement Mode}
ensure that {
**when** { the UE (MCVideo Client) receives a Media Transmission Notification
message from the SS (MCVideo Server) }
**then** {the UE (MCVideo Client) provides media transmission notification to
the MCVideo User }
}
##### (3) {#section-32 .H6}
**with** { the UE (MCVideo Client) having an ongoing On-demand Pre-arranged
Group Call with Automatic Commencement Mode }
ensure that {
**when** { the MCVideo User requests permission to receive media }
**then** { The UE (MCVideo Client) sends a Receive Media Request message to
the SS (MCVideo Server) **and** notifies the MCVideo User of the successful
Receive Media Request upon receipt of a Receive Media Response message from
the SS (MCVideo Server) **and** respects the Reception Control imposed by the
SS (MCVideo Server) (Media Transmission Notification, Receive Media Request,
Receive Media Response, Media Reception End Request, Media Reception End
Response }
##### (4) {#section-33 .H6}
**with** { the UE (MCVideo Client) having an ongoing On-demand Pre-arranged
Group Call with Automatic Commencement Mode }
ensure that {
**when** { the UE (MCVideo Client) receives a SIP re-INVITE from the SS
(MCVideo Server) to upgrade the ongoing MCVideo Group Call to a MCVideo
Emergency Group Call with Reception Control }
**then** { the UE (MCVideo Client) responds to the SIP re-INVITE request with
a SIP 200 (OK) **and** considers the call as being upgraded to an Emergency
Group) }
}
##### (5) {#section-34 .H6}
**with** { the UE (MCVideo Client) having an ongoing On-demand Pre-arranged
Group Call with Automatic Commencement Mode that was upgraded to an Emergency
Group Call}
ensure that {
**when** { the UE (MCVideo Client)receives a SIP re-INVITE from the SS
(MCVideo Server) to cancel the ongoing MCVideo Emergency state}
**then** { the UE (MCVideo Client) responds to the SIP re-INVITE request with
a SIP 200 (OK) **and** considers the emergency state cancelled }
}
##### (6) {#section-35 .H6}
**with** { the UE (MCVideo Client) having an ongoing On-demand Pre-arranged
Group Call with Automatic Commencement Mode }
ensure that {
**when** { the UE (MCVideo Client)receives a SIP re-INVITE from the SS
(MCVideo Server) to upgrade the ongoing MCVideo Group Call to a MCVideo
Imminent Peril Group Call with Reception Control }
**then** { the UE (MCVideo Client) responds to the SIP re-INVITE request with
a SIP 200 (OK) response **and** considers the call as being upgraded to an
Imminent Peril Group Call }
}
##### (7) {#section-36 .H6}
**with** { the UE (MCVideo Client) having an ongoing On-demand Pre-arranged
Group Call with Automatic Commencement Mode that was upgraded to an Imminent
Peril Group Call }
ensure that {
**when** { the UE (MCVideo Client)receives a SIP re-INVITE from the SS
(MCVideo Server) to cancel the ongoing MCVideo Imminent Peril state }
**then** { the UE (MCVideo Client) responds to the SIP re-INVITE request with
a SIP 200 (OK) **and** considers the Imminent Peril state cancelled }
}
##### (8) {#section-37 .H6}
**with** { the UE (MCVideo Client) having an ongoing On-demand Pre-arranged
Group Call with Automatic Commencement Mode }
ensure that {
**when** { the MCVideo User requests to end the RTP media reception }
**then** { the UE (MCVideo Client) sends a Media Reception End Request message
}
}
##### (9) {#section-38 .H6}
**with** { the UE (MCVideo Client) having an ongoing On-demand Pre-arranged
Group Call with Automatic Commencement Mode }
ensure that {
**when** { the UE (MCVideo Client) receives a SIP BYE message }
**then** { the UE (MCVideo Client) sends a SIP 200 (OK) message and leaves the
MCVideo session }
}
##### 6.1.1.2.2 Conformance requirements {#conformance-requirements-5 .H6}
References: The conformance requirements covered in the current Test Case are
specified in: TS 24.281, clauses 6.2.3.1.1, 6.2.3.1.2, 9.2.1.2.1.2,
9.2.1.2.1.4, 9.2.1.2.1.6, ; also TS 24.581, clauses 6.3.4.3.6, 6.3.4.4.12,
6.3.5.3.9, 6.3.5.4.8. The following represents a copy/paste extraction of the
requirements relevant to the test purpose; any references within the
copy/paste text should be understood within the scope of the core spec they
have been copied from. Unless otherwise stated, these are Rel-15 requirements.
[TS 24.281, clause 6.2.3.1.1]
When performing the automatic commencement mode procedures, the MCVideo
client:
> 1) shall accept the SIP INVITE request and generate a SIP 200 (OK) response
> according to rules and procedures of 3GPP TS 24.229 [11];
>
> 2) shall include the option tag \"timer\" in a Require header field of the
> SIP 200 (OK) response;
>
> 3) shall include the g.3gpp.mcvideo media feature tag in the Contact header
> field of the SIP 200 (OK) response;
>
> 4) shall include the g.3gpp.icsi-ref media feature tag containing the value
> of \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" in the Contact header field
> of the SIP 200 (OK) response;
>
> 5) shall include the Session-Expires header field in the SIP 200 (OK)
> response and start the SIP session timer according to IETF RFC 4028 [23].
> The \"refresher\" parameter in the Session-Expires header field shall be set
> to \"uas\";
>
> 6) shall, if the incoming SIP INVITE request contains a Replaces header
> field, include in the SDP answer in the SIP 200 (OK) response to the SDP
> offer the parameters used for the pre-established session identified by the
> contents of the Replaces header field;
>
> 7) shall, if the incoming SIP INVITE request does not contain a Replaces
> header field, include an SDP answer in the SIP 200 (OK) response to the SDP
> offer in the incoming SIP INVITE request according to 3GPP TS 24.229 [11]
> with the clarifications given in subclause 6.2.2;
>
> NOTE: In the case of a new emergency call where the terminating client is
> using a pre-established session, the SIP INVITE request containing a
> Replaces header is used to replace the pre-established session.
>
> 8) shall send the SIP 200 (OK) response towards the MCVideo server according
> to rules and procedures of 3GPP TS 24.229 [11];
>
> 9) shall, if the incoming SIP INVITE request contains a Replaces header
> field, release the pre-established session identified by the contents of the
> Replaces header field; and
>
> 10) shall interact with the media plane as specified in 3GPP TS 24.581 [5].
When NAT traversal is supported by the MCVideo client and when the MCVideo
client is behind a NAT, generation of SIP responses is done as specified in
this subclause and as specified in IETF RFC 5626 [35].
[TS 24.281, clause 6.2.3.1.2]
When performing the automatic commencement mode procedures, the MCVideo client
shall follow the procedures in subclause 6.2.3.1.1 with the following
clarification:
> \- The MCVideo client may include a P-Answer-State header field with the
> value \"Confirmed\" as specified in IETF RFC 4964 [30] in the SIP 200 (OK)
> response.
[TS 24.281, clause 9.2.1.2.1.2]
In the procedures in this subclause:
> 1) emergency indication in an incoming SIP INVITE request refers to the
> \ element of the application/vnd.3gpp.mcvideo-info+xml MIME
> body; and
>
> 2) imminent peril indication in an incoming SIP INVITE request refers to the
> \ element of the application/vnd.3gpp.mcvideo-info+xml
> MIME body.
Upon receipt of an initial SIP INVITE request, the MCVideo client shall follow
the procedures for termination of multimedia sessions in the IM CN subsystem
as specified in 3GPP TS 24.229 [11] with the clarifications below.
The MCVideo client:
> 1) may reject the SIP INVITE request if either of the following conditions
> are met:
>
> a) MCVideo client does not have enough resources to handle the call; or
>
> b) any other reason outside the scope of this specification;
>
> 2) if the SIP INVITE request is rejected in step 1), shall respond toward
> participating MCVideo function either with appropriate reject code as
> specified in 3GPP TS 24.229 [51] and warning texts as specified in subclause
> 4.4.2 or with SIP 480 (Temporarily unavailable) response not including
> warning texts if the user is authorised to restrict the reason for failure
> and skip the rest of the steps of this subclause;
>
> NOTE: If the SIP INVITE request contains an emergency indication or imminent
> peril indication, the MCVideo client can by means beyond the scope of this
> specification choose to accept the request.
>
> 3) shall check if a Resource-Priority header field is included in the
> incoming SIP INVITE request and may perform further actions outside the
> scope of this specification to act upon an included Resource-Priority header
> field as specified in 3GPP TS 24.229 [11];
>
> 4) if the SIP INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element containing the \ Params> element with the \ element set to a value of
> \"true\":
>
> a) should display to the MCVideo user an indication that this is a SIP
> INVITE request for an MCVideo emergency group call and:
>
> i) should display the MCVideo ID of the originator of the MCVideo emergency
> group call contained in the \ element of the
> application/vnd.3gpp.mcvideo-info+xml MIME body;
>
> ii) should display the MCVideo group identity of the group with the
> emergency condition contained in the \ element;
> and
>
> iii) if the \ element is set to \"true\", should display to the
> MCVideo user an indication of the MCVideo emergency alert and associated
> information;
>
> b) shall set the MCVideo emergency group state to \"MVEG 2: in-progress\";
>
> c) shall set the MCVideo imminent peril group state to \"MVIG 1: no-
> imminent-peril\"; and
>
> d) shall set the MCVideo imminent peril group call state to \"MVIGC 1:
> imminent-peril-gc-capable\"; otherwise
>
> 5) if the SIP INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element containing the \ Params> element with the \ element set to a value of
> \"true\":
>
> a) should display to the MCVideo user an indication that this is a SIP
> INVITE request for an MCVideo imminent peril group call and:
>
> i) should display the MCVideo ID of the originator of the MCVideo imminent
> peril group call contained in the \ element of the
> application/vnd.3gpp.mcvideo-info+xml MIME body; and
>
> ii) should display the MCVideo group identity of the group with the imminent
> peril condition contained in the \ element; and
>
> b) shall set the MCVideo imminent peril group state to \"MVIG 2: in-
> progress\";
>
> 6) may display to the MCVideo user the MCVideo ID of the inviting MCVideo
> user;
>
> 7) shall perform the automatic commencement procedures specified in
> subclause 6.2.3.1.2 if one of the following conditions are met:
>
> a) SIP INVITE request contains an Answer-Mode header field with the value
> \"Auto\" and the MCVideo service setting at the invited MCVideo client for
> answering the call is set to automatic commencement mode; or
>
> b) SIP INVITE request contains an Answer-Mode header field with the value
> \"Auto\" and the MCVideo service setting at the invited MCVideo client for
> answering the call is set to manual commencement mode, yet the invited
> MCVideo client allows the call to be answered with automatic commencement
> mode;
>
> 8) shall perform the manual commencement procedures specified in subclause
> 6.2.3.2.2 if one of the following conditions are met:
>
> a) SIP INVITE request contains an Answer-Mode header field with the value
> \"Manual\" and the MCVideo service setting at the invited MCVideo client for
> answering the call is to use manual commencement mode; or
>
> b) SIP INVITE request contains an Answer-Mode header field with the value
> \"Manual\" and the MCVideo service setting at the invited MCVideo client for
> answering the call is set to automatic commencement mode, yet the invited
> MCVideo client allows the call to be answered with manual commencement mode;
> and
>
> 9) when the SIP 200 (OK) response to the SIP INVITE request is sent, may
> subscribe to the conference event package as specified in subclause 9.1.3.1.
[TS 24.281, clause 9.2.1.2.1.4]
This subclause covers both on-demand session and pre-established sessions.
Upon receiving a request from an MCVideo user to cancel the in-progress
emergency condition on a prearranged MCVideo group, the MCVideo client shall
generate a SIP re-INVITE request by following the UE originating session
procedures specified in 3GPP TS 24.229 [11], with the clarifications given
below.
The MCVideo client:
> 1) if the MCVideo user is not authorised to cancel the in-progress emergency
> group state of the MCVideo group as determined by the procedures of
> subclause 6.2.8.1.7, the MCVideo client:
>
> a) should indicate to the MCVideo user that they are not authorised to
> cancel the in-progress emergency group state of the MCVideo group; and
>
> b) shall skip the remaining steps of the current subclause;
>
> ...
[TS 24.281, clause 9.2.1.2.1.6]
This subclause covers both on-demand session.
Upon receipt of a SIP re-INVITE request the MCVideo client:
> 1) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element containing the \ Params> element with the \ element set to a value of
> \"true\":
>
> a) should display to the MCVideo user the MCVideo ID of the originator of
> the MCVideo emergency group call and an indication that this is an MCVideo
> emergency group call;
>
> b) if the \ element containing the \ element
> contains an \ element set to \"true\", should display to the
> MCVideo user an indication of the MCVideo emergency alert and associated
> information;
>
> c) shall set the MCVideo emergency group state to \"MVEG 2: in-progress\";
>
> d) shall set the MCVideo imminent peril group state to \"MVIG 1: no-
> imminent-peril\"; and
>
> e) shall set the MCVideo imminent peril group call state to \"MVIGC 1:
> imminent-peril-gc-capable\";
>
> 2) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element containing the \ Params> element with the \ element set to a value of
> \"true\":
>
> a) should display to the MCVideo user the MCVideo ID of the originator of
> the MCVideo imminent peril group call and an indication that this is an
> MCVideo imminent peril group call; and
>
> b) shall set the MCVideo imminent peril group state to \"MIG 2: in-
> progress\";
>
> 3) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element containing the \ Params> element with the \ element set to a value of
> \"false\":
>
> a) should display to the MCVideo user the MCVideo ID of the MCVideo user
> cancelling the MCVideo emergency group call;
>
> b) if the \ element containing the \ element
> contains an \ element set to \"false\":
>
> i) should display to the MCVideo user an indication of the MCVideo emergency
> alert cancellation and the MCVideo ID of the MCVideo user cancelling the
> MCVideo emergency alert; and
>
> ii) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body including an \ element:
>
> A) should display to the MCVideo user the MCVideo ID contained in the
> \ element of the MCVideo user that originated the MCVideo
> emergency alert; and
>
> B) if the MCVideo ID contained in the \ element is the
> MCVideo ID of the receiving MCVideo user shall set the MCVideo emergency
> alert state to \"MVEA 1: no-alert\";
>
> c) shall set the MCVideo emergency group state to \"MVEG 1: no-emergency\";
> and
>
> d) if the MCVideo emergency group call state of the group is set to \"MVEGC
> 3: emergency-call-granted\", shall set the MCVideo emergency group call
> state of the group to \"MVEGC 1: emergency-gc-capable\";
>
> 4) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element containing the \ Params> element with the \ element set to a value of
> \"false\":
>
> a) should display to the MCVideo user the MCVideo ID of the MCVideo user
> cancelling the MCVideo imminent peril group call and an indication that this
> is an MCVideo imminent peril group call;
>
> b) shall set the MCVideo imminent peril group state to \"MVIG 1: no-
> imminent-peril\"; and
>
> c) shall set the MCVideo imminent peril group call state to \"MVIGC 1:
> imminent-peril-gc-capable\";
>
> 5) shall check if a Resource-Priority header field is included in the
> incoming SIP re-INVITE request and may perform further actions outside the
> scope of this specification to act upon an included Resource-Priority header
> field as specified in 3GPP TS 24.229 [11];
>
> 6) shall accept the SIP re-INVITE request and generate a SIP 200 (OK)
> response according to rules and procedures of 3GPP TS 24.229 [11];
>
> 7) shall include the g.3gpp.mcvideo media feature tag in the Contact header
> field of the SIP 200 (OK) response;
>
> 8) shall include the g.3gpp.icsi-ref media feature tag containing the value
> of \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" in the Contact header field
> of the SIP 200 (OK) response;
>
> 9) if the SIP re-INVITE request was received within an on-demand session,
> shall include an SDP answer in the SIP 200 (OK) response to the SDP offer in
> the incoming SIP re-INVITE request according to 3GPP TS 24.229 [11] with the
> clarifications given in subclause 6.2.2;
>
> 10) shall send the SIP 200 (OK) response towards the MCVideo server
> according to rules and procedures of 3GPP TS 24.229 [11]; and
>
> 11) shall interact with the media plane as specified in 3GPP TS 24.581 [5].
.
[TS 24.581, Clause 6.3.4.3.6]
Upon receiving an implicit Transmission request due to an upgrade to an
emergency group call or due to an upgrade to imminent peril call, the
transmission control arbitration logic in the transmission control server:
> 1\. shall reject the request if there is only one MCVideo client in the
> MCVideo call;
>
> 2\. if the Transmission request is rejected the transmission control server:
>
> a. shall send the Transmission Reject message. The Transmission Reject
> message:
>
> i. shall include in the Reject Cause field the \ value cause
> #3 (Only one participant); and
>
> ii. may include in the Reject Cause field an additional text string
> explaining the reason for rejecting the Transmission request in the \ Phrase> value; and
>
> b. shall remain in the \'G: Transmit Idle\' state; and
>
> 3\. if the Transmission request is granted the transmission control server:
>
> a. shall stop the timer T1 (Inactivity);
>
> b. shall stop the timer T2 (Transmit Idle);
>
> c. shall store the SSRC of transmission participant granted the permission
> to send media until the transmission is released associated to that
> Transmission request; and
>
> d. shall enter the \'G: Transmit Taken\' state as specified in the subclause
> 6.3.4.4.2.
[TS 24.581, clause 6.3.4.4.12]
Upon receiving an implicit Transmission request due to an upgrade to an
emergency group call or due to an upgrade to imminent peril call, the
transmission control arbitration logic in the transmission control server:
> 1\. if counter Cx (Simultaneous transmission video) has not reached its
> upper limit:
>
> a. shall perform the actions specified in the subclause 6.3.4.4.2;
>
> 2\. if counter Cx (Simultaneous transmission video) has reached its upper
> limit:
>
> a. select one of the transmission participants with permission to send media
> without the pre-emptive priority or low effective priority;
>
> b. shall stop timer T4 (Transmission Grant), if running;
>
> c. shall set the Reject Cause field in the Transmission Revoke message to #4
> (Media Transmission pre-empted);
>
> d. shall enter the \'G: pending Transmission Revoke\' state as specified in
> the subclause 6.3.4.5.2;
>
> e. shall insert the transmission participant into the active Transmission
> request queue to the position in front of all queued requests, if not
> inserted yet or update the position of the transmission participant in the
> active Transmission request queue to the position in front of all other
> queued requests, if already inserted; and
>
> f. shall send a Transmission Queue Position Info message to the requesting
> transmission participant, if negotiated support of queueing Transmission
> requests as specified in clause 14. The Queue Position Request message:
>
> i. shall include the queue position and transmission priority in the Queue
> Info field; and
>
> ii. if a group call is a broadcast group call, a system call, an emergency
> call, an imminent peril call, or a temporary group session, shall include
> the Transmission Indicator field with appropriate indications.
[TS 24.581, clause 6.3.5.3.9]
When an ongoing session is upgraded to an emergency group call and when the
application and signalling plane indicates that a subsequent SDP offer
included the \"mc_implicit_request\" fmtp attribute as described in clause 14,
the transmission control interface towards the MCVideo client in the
transmission control server:
> 1\. shall indicate to the transmission control server arbitration logic that
> an implicit Transmission request is received due to an upgrade to an
> emergency group call; and
>
> 2\. shall remain in the \'U: not permitted and Transmit Idle\' state.
[TS 24.581, clause 6.3.5.4.8]
When an ongoing session is upgraded to an emergency group call and when the
application and signalling plane indicates that a subsequent SDP offer
included the \"mc_implicit_request\" fmtp attribute as specified in clause 14,
the transmission control interface towards the MCVideo client in the
transmission control server:
> 1\. shall indicate to the transmission control server arbitration logic that
> an implicit Transmission request is received due to an upgrade to an
> emergency group call; and
>
> 2\. shall remain in the \'U: not permitted and Transmit Taken\' state.
##### 6.1.1.2.3 Test description {#test-description-5 .H6}
##### 6.1.1.2.3.1 Pre-test conditions {#pre-test-conditions-5 .H6}
##### System Simulator: {#system-simulator-1 .H6}
\- SS (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
##### IUT: {#iut-1 .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
##### Preamble: {#preamble-1 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- UE States at the end of the preamble
\- The UE is in E-UTRA Registered, Idle Mode state.
\- The MCVideo Client Application has been activated and User has registered-
in as the MCVideo User with the Server as active user at the Client.
##### 6.1.1.2.3.2 Test procedure sequence {#test-procedure-sequence-5 .H6}
Table 6.1.1.2.3.2-1: Main Behaviour
+------------+------------+------------+---------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +============+============+============+=========+=========+====+ | | | U - S | Message | | | +------------+------------+------------+---------+---------+----+ | 1 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CT | | | | | | | session | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3.4.3-1 | | | | | | | to | | | | | | | establish | | | | | | | a group | | | | | | | call with | | | | | | | automatic | | | | | | | co | | | | | | | mmencement | | | | | | | mode? | | | | | +------------+------------+------------+---------+---------+----+ | 2-4 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 5 | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Tr | | | | | | | ansmission | | | | | | | No | | | | | | | tification | | | | | | | and | | | | | | | Request | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.3.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 5A-8 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 9 | Check: | - | - | 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | provide | | | | | | | receive | | | | | | | media | | | | | | | success | | | | | | | no | | | | | | | tification | | | | | | | to the | | | | | | | user? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 9A | Check: | - | - | 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Reception | | | | | | | End | | | | | | | Request | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5. | | | | | | | 3B.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 10 | Check: | - | - | 4 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CT | | | | | | | session | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3.4.3-1 | | | | | | | to upgrade | | | | | | | the the | | | | | | | call to an | | | | | | | emergency | | | | | | | group | | | | | | | call? | | | | | +------------+------------+------------+---------+---------+----+ | 11-13 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 14 | Check: | - | - | 2, 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Tr | | | | | | | ansmission | | | | | | | No | | | | | | | tification | | | | | | | and | | | | | | | Request | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.3.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 14A-17 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 18 | Check: | - | - | 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | provide | | | | | | | receive | | | | | | | media | | | | | | | success | | | | | | | no | | | | | | | tification | | | | | | | to the | | | | | | | user? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 18A | Check: | - | - | 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Reception | | | | | | | End | | | | | | | Request | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5. | | | | | | | 3B.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 19 | Check: | - | - | 5 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CT | | | | | | | session | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3.4.3-1 | | | | | | | to | | | | | | | downgrade | | | | | | | the call? | | | | | +------------+------------+------------+---------+---------+----+ | 20-22 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 23 | Check: | - | - | 2, 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Tr | | | | | | | ansmission | | | | | | | No | | | | | | | tification | | | | | | | and | | | | | | | Request | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.3.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 23A- 26 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 27 | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | provide | | | | | | | receive | | | | | | | media | | | | | | | success | | | | | | | no | | | | | | | tification | | | | | | | to the | | | | | | | user? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 27A | Check: | - | - | 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Reception | | | | | | | End | | | | | | | Request | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5. | | | | | | | 3B.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 28 | Check: | - | - | 6 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CT | | | | | | | session | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3.4.3-1 | | | | | | | to upgrade | | | | | | | the call | | | | | | | to an | | | | | | | imminent | | | | | | | peril | | | | | | | group | | | | | | | call? | | | | | +------------+------------+------------+---------+---------+----+ | 29-31 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 32 | Check: | - | - | 2, 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Tr | | | | | | | ansmission | | | | | | | No | | | | | | | tification | | | | | | | and | | | | | | | Request | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.3.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 33-35 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 36 | Check: | - | - | 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | provide | | | | | | | receive | | | | | | | media | | | | | | | success | | | | | | | no | | | | | | | tification | | | | | | | to the | | | | | | | user? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 36A | Check: | - | - | 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Reception | | | | | | | End | | | | | | | Request | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5. | | | | | | | 3B.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 37 | Check: | - | - | 7 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CT | | | | | | | session | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3.4.3-1 | | | | | | | to | | | | | | | downgrade | | | | | | | the call? | | | | | +------------+------------+------------+---------+---------+----+ | 38-40 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 41 | Check: | - | - | 2, 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Tr | | | | | | | ansmission | | | | | | | No | | | | | | | tification | | | | | | | and | | | | | | | Request | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.3.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 41A-44 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 45 | Check: | - | - | 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | provide | | | | | | | receive | | | | | | | media | | | | | | | success | | | | | | | no | | | | | | | tification | | | | | | | to the | | | | | | | user? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 46 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | end of | | | | | | | reception. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 47 | Check: | - | - | 8 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Reception | | | | | | | End | | | | | | | Request | | | | | | | CO\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.8.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 48-49 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 50 | Check: | - | - | 9 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CT | | | | | | | call | | | | | | | release\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3.12.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 51 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | NOTE: This | | | | | | | is | | | | | | | expected | | | | | | | to be done | | | | | | | via a | | | | | | | suitable | | | | | | | impl | | | | | | | ementation | | | | | | | dependent | | | | | | | MMI. | | | | | | +------------+------------+------------+---------+---------+----+
##### 6.1.1.2.3.3 Specific message contents {#specific-message-contents-5 .H6}
Table 6.1.1.2.3.3-1: SIP INVITE from the SS (Step 1, Table 6.1.1.2.3.2-1;\
Step 2, TS 36.579-1 [2] Table 5.3.4.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.2-1
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP Message**  
MIME part body SDP Message as described in Table 6.1.1.2.3.3-1A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.1.1.2.3.3-2
Table 6.1.1.2.3.3-1A: SDP in SIP INVITE (Table 6.1.1.2.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition
INITIAL_SDP_OFFER
* * *
Table 6.1.1.2.3.3-2: MCVideo-Info in SIP INVITE (Table 6.1.1.2.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.2-2, condition GROUP CALL
* * *
Table 6.1.1.2.3.3-3: SIP 200 (OK) from the UE (Steps 1, 10, 19, 28, 37, Table
6.1.1.2.3.2-1;\ Step 4, TS 36.579-1 [2] Table 5.3.4.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.17.1.1-1, condition INVITE-RSP,
GROUP-CALL
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP Message**  
MIME part body SDP Message as described in Table 6.1.1.2.3.3-3A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.1.1.2.3.3-3B
Table 6.1.1.2.3.3-3A: SDP in SIP 200 (OK) (Table 6.1.1.2.3.3-3)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.1-2, condition SDP_ANSWER
* * *
Table 6.1.1.2.3.3-3B: MCVideo-Info in SIP 200 (OK) (Table 6.1.1.2.3.3-3)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition INVITE-RSP
* * *
Table 6.1.1.2.3.3-4: SIP INVITE from the SS (Step 10, Table 6.1.1.2.3.2-1;\
Step 2, TS 36.579-1 [2] Table 5.3.4.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.2-1, condition re_INVITE
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP Message**  
MIME part body SDP Message as described in Table 6.1.1.2.3.3-4A  
MIME body part **MCVideo-Info**  
MIME part body MCVideo-Info as described in Table 6.1.1.2.3.3-4B
Table 6.1.1.2.3.3-4A: SDP in SIP INVITE\ (Table 6.1.1.2.3.3-4, 6.1.1.2.3.3-11,
6.1.1.2.3.3-12, 6.1.1.2.3.3-21)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition SDP_OFFER
* * *
Table 6.1.1.2.3.3-4B: MCVideo-Info in SIP INVITE (Table 6.1.1.2.3.3-4)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.2-2, condition GROUP CALL,
EMERGENCY-CALL
* * *
Table 6.1.1.2.3.3-5..9: Void
Table 6.1.1.2.3.3-9A: Media Transmission Notification from the SS (Step 14,
Table 6.1.1.2.3.2-1;\ Step 1, TS 36.579-1 [2] Table 5.3B.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.7-1, condition EMERGENCY-CALL
* * *
Table 6.1.1.2.3.3-9B..10: Void
Table 6.1.1.2.3.3-10A: Media Reception End Request from the SS (Step 18A,
Table 6.1.1.2.3.2-1;\ Step 1, TS 36.579-1 [2] Table 5.3B.10.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.3.3-1, condition DOWNLINK,
EMERGENCY-CALL
* * *
Table 6.1.1.2.3.3-10B: Transmission Idle from the SS (Step 18A, Table
6.1.1.2.3.2-1;\ Step 4, TS 36.579-1 [2] Table 5.3B.10.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.16-1, condition EMERGENCY-
CALL
* * *
Table 6.1.1.2.3.3-11: SIP INVITE from the SS (Step 19, Table 6.1.1.2.3.2-1;\
Step 2, TS 36.579-1 [2] Table 5.3.4.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.2-1, condition re_INVITE
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP Message**  
MIME part body SDP Message as described in Table 6.1.1.2.3.3-4A  
MIME body part **MCVideo-Info**  
MIME part body MCVideo-Info as described in Table 6.1.1.2.3.3-11A
Table 6.1.1.2.3.3-11A: MCVideo-Info in SIP INVITE (Table 6.1.1.2.3.3-11)
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.2-2, condition GROUP-CALL
* * *
Information Element Value/remark Comment Reference Condition mcvideoinfo  
mcvideo-Params  
emergency-ind Encrypted \ with mcvideoBoolean set to false
Encryption according to NOTE 1 in TS 36.579-1 [2] Table 5.5.3.2.2-2  
alert-ind Encrypted \ with mcvideoBoolean set to false
Encryption according to NOTE 1 in TS 36.579-1 [2] Table 5.5.3.2.2-2
Table 6.1.1.2.3.3-12: SIP INVITE from the SS (Step 28, Table 6.1.1.2.3.2-1;\
Step 2, TS 36.579-1 [2] Table 5.3.4.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.2-1, condition re_INVITE
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP Message**  
MIME part body SDP Message as described in Table 6.1.1.2.3.3-4A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.1.1.2.3.3-13
Table 6.1.1.2.3.3-13: MCVideo-Info in SIP INVITE (Table 6.1.1.2.3.3-10)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.2-2, condition GROUP-CALL,
IMMPERIL-CALL
* * *
Table 6.1.1.2.3.3-14..15: Void
Table 6.1.1.2.3.3-15A: Media Transmission Notification from the SS (Step 32,
Table 6.1.1.2.3.2-1;\ Step 1, TS 36.579-1 [2] Table 5.3B.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.7-1, condition IMMPERIL-CALL
* * *
Table 6.1.1.2.3.3-15B..16: Void
Table 6.1.1.2.3.3-16A: Media Reception End Request from the SS (Step 36A,
Table 6.1.1.2.3.2-1;\ Step 1, TS 36.579-1 [2] Table 5.3B.10.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.3.3-1, condition DOWNLINK,
IMMPERIL-CALL
* * *
Table 6.1.1.2.3.3-16B: Transmission Idle from the SS (Step 36A, Table
6.1.1.2.3.2-1;\ Step 4, TS 36.579-1 [2] Table 5.3B.10.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.16-1, condition IMMPERIL-CALL
* * *
Table 6.1.1.2.3.3-17..20: Void
Table 6.1.1.2.3.3-21: SIP INVITE from the SS (Step 37, Table 6.1.1.2.3.2-1;\
Step 2, TS 36.579-1 [2] Table 5.3.4.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.2-1, condition re_INVITE
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP Message**  
MIME part body SDP Message as described in Table 6.1.1.2.3.3-4A  
MIME body part **MCVideo-Info**  
MCVideo-Info As described in Table 6.1.1.2.3.3-22
Table 6.1.1.2.3.3-22: MCVideo-Info in SIP INVITE (Table 6.1.1.2.3.3-21)
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.2-2, condition GROUP-CALL
* * *
Information Element Value/remark Comment Reference Condition mcvideoinfo  
mcvideo-Params  
imminentperil-ind Encrypted \ with mcvideoBoolean set to
false Encryption according to NOTE 1 in TS 36.579-1 [2] Table 5.5.3.2.2-2
6.1.1.3 On-network / On-demand Pre-arranged Group Call / Manual Commencement
Mode / Client Originated (CO)
##### 6.1.1.3.1 Test Purpose (TP) {#test-purpose-tp-6 .H6}
##### (1) {#section-39 .H6}
**with** { the UE (MCVideo Client) registered and authorised for MCVideo
Service }
ensure that {
**when** { the MCVideo User requests the establishment of an MCVideo On-demand
Pre-arranged Group Call with Manual Commencement Mode and implicit
Transmission Control }
**then** { the UE (MCVideo Client) requests On-demand Manual Commencement Mode
Pre-arranged Group Call establishment with implicit Transmission Control by
sending a SIP INVITE message }
}
##### (2) {#section-40 .H6}
**with** {the UE (MCVideo Client) having an ongoing MCVideo On-demand Pre-
arranged Group Call with Manual Commencement Mode }
ensure that {
**when** { the UE (MCVideo Client) receives a Transmission Granted message
from the SS (MCVideo Server }
**then** { the UE (MCVideo Client) provides transmission granted notification
to the MCVideo User **and** respects the Transmission Control imposed by the
SS (MCVideo Server) ( Transmission Granted, Transmission Control ACK,
Transmission Idle, Transmission End Request, Transmission End Response }
}
##### (3) {#section-41 .H6}
**with** { the UE (MCVideo Client) having an ongoing On-demand Pre-arranged
Group Call with Manual Commencement Mode }
ensure that {
**when** { the MCVideo User requests to terminate the ongoing MCVideo Group
Call }
**then** { the UE (MCVideo Client) sends a SIP BYE request **and** leaves the
MCVideo session }
}
##### 6.1.1.3.2 Conformance requirements {#conformance-requirements-6 .H6}
References: The conformance requirements covered in the current Test Case are
specified in: TS 24.281, clauses 9.2.1.2.1.1, 6.2.1, and 6.4; also TS 24.581,
clauses 6.2.1, 6.2.2, 12.1.2.1, 12.1.2.2, 14.2.1, 14.2.4, and 14.2.5. . The
following represents a copy/paste extraction of the requirements relevant to
the test purpose; any references within the copy/paste text should be
understood within the scope of the core spec they have been copied from.
Unless otherwise stated, these are Rel-15 requirements.
[TS 24.281, clause 9.2.1.2.1.1]
Upon receiving a request from an MCVideo user to establish an MCVideo
prearranged group session the MCVideo client shall generate an initial SIP
INVITE request by following the UE originating session procedures specified in
3GPP TS 24.229 [11], with the clarifications given below.
The MCVideo client:
...
> 4) shall include the g.3gpp.mcvideo media feature tag and the g.3gpp.icsi-
> ref media feature tag with the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" in the Contact header field of the SIP INVITE
> request according to IETF RFC 3840 [22];
>
> 5) shall include an Accept-Contact header field containing the
> g.3gpp.mcvideo media feature tag along with the \"require\" and \"explicit\"
> header field parameters according to IETF RFC 3841 [20];
>
> 6) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
> (coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
> field according to IETF RFC 6050 [14] in the SIP INVITE request;
>
> 7) shall include an Accept-Contact header field with the g.3gpp.icsi-ref
> media feature tag containing the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" along with the \"require\" and \"explicit\"
> header field parameters according to IETF RFC 3841 [20];
>
> 8) should include the \"timer\" option tag in the Supported header field;
>
> 9) should include the Session-Expires header field according to IETF RFC
> 4028 [23]. It is recommended that the \"refresher\" header field parameter
> is omitted. If included, the \"refresher\" header field parameter shall be
> set to \"uac\";
>
> 10) shall set the Request-URI of the SIP INVITE request to the public
> service identity identifying the participating MCVideo function serving the
> MCVideo user;
>
> NOTE 1: The MCVideo client is configured with public service identity
> identifying the participating MCVideo function serving the MCVideo user.
>
> 11) may include a P-Preferred-Identity header field in the SIP INVITE
> request containing a public user identity as specified in 3GPP TS 24.229
> [11];
>
> ...
>
> 14) shall contain in an application/vnd.3gpp.mcvideo-info+xml MIME body with
> the \ element containing the \ element with:
>
> a) the \ element set to a value of \"prearranged\";
>
> b) the \ element set to the group identity;
>
> c) the \ element set to the MCVideo client ID of the
> originating MCVideo client; and
>
> NOTE 2: The MCVideo client does not include the MCVideo ID of the
> originating MCVideo user in the body, as this will be inserted into the body
> of the SIP INVITE request that is sent from the originating participating
> MCVideo function.
>
> d) if the group identity can be determined to be a TGI and if the MCVideo
> client can associate the TGI with a MCVideo group ID, the \ group-id> element set to the MCVideo group ID;
>
> NOTE 3: The text \"can associate the TGI with a MCVideo group ID\" means
> that the MCVideo client is able to determine that there is a constituent
> group of the temporary group that it is a member of.
>
> NOTE 4: The MCVideo client is informed about temporary groups and regrouping
> of MCVideo groups that the user is a member of as specified in 3GPP TS
> 24.481 [24].
>
> NOTE 5: If the MCVideo user selected a TGI where there are several MCVideo
> groups where the MCVideo user is a member, the MCVideo client selects one of
> those MCVideo groups.
>
> 15) shall include an SDP offer according to 3GPP TS 24.229 [11] with the
> clarifications given in subclause 6.2.1;
>
> 16) if an implicit transmission request is required, shall indicate this as
> specified in subclause 6.4; and
>
> 17) shall send the SIP INVITE request towards the MCVideo server according
> to 3GPP TS 24.229 [11].
On receiving a SIP 2xx response to the SIP INVITE request, the MCVideo client:
> 1) shall interact with the user plane as specified in 3GPP TS 24.581 [5] ;
[TS 24.281, clause 6.2.1]
The SDP offer shall contain two SDP media-level sections for MCVideo video
media according to 3GPP TS 24.229 [11] and, if transmission control shall be
used during the session, shall contain one SDP media-level section for a
media- transmission control entity according to 3GPP TS 24.581 [5].
When composing an SDP offer according to 3GPP TS 24.229 [11] the MCVideo
client:
> 1) shall set the IP address of the MCVideo client for the offered MCVideo
> video media stream and, if transmission control shall be used, for the
> offered media-transmission control entity;
>
> NOTE: If the MCVideo client is behind a NAT the IP address and port included
> in the SDP offer can be a different IP address and port than the actual IP
> address and port of the MCVideo client depending on the NAT traversal method
> used by the SIP/IP Core.
>
> 2) shall include an \"m=audio\" media-level section for the MCVideo media
> stream consisting of:
>
> a) the port number for the media stream selected; and
>
> b) the codec(s) and media parameters and attributes with the following
> clarification:
>
> i) if the MCVideo client is initiating a call to a group identity;
>
> ii) if the \ element is present in the group
> document retrieved by the group management client as specified in 3GPP TS
> 24.481 [24] containing an \ element with a \"name\" attribute; and
>
> iii) if the MCVideo client supports the encoding name indicated in the value
> of the \"name\" attribute;
>
> then the MCVideo client:
>
> i) shall insert the value of the \"name\" attribute in the \
> field of the \"a=rtpmap\" attribute as defined in IETF RFC 4566 [2]; and
>
> c) \"i=\" field set to \"audio component of MCVideo\" according to 3GPP TS
> 24.229 [11];
>
> 3) shall include an \"m=video\" media-level section for the MCVideo media
> stream consisting of:
>
> a) the port number for the media stream selected; and
>
> b) the codec(s) and media parameters and attributes with the following
> clarification:
>
> i) if the MCVideo client is initiating a call to a group identity;
>
> ii) if the \ element is present in the group
> document retrieved by the group management client as specified in 3GPP TS
> 24.481 [24] containing an \ element with a \"name\" attribute; and
>
> iii) if the MCVideo client supports the encoding name indicated in the value
> of the \"name\" attribute;
>
> then the MCVideo client:
>
> i) shall insert the value of the \"name\" attribute in the \
> field of the \"a=rtpmap\" attribute as defined in IETF RFC 4566 [2]; and
>
> c) \"i=\" field set to \"video component of MCVideo\" according to 3GPP TS
> 24.229 [11];
>
> 4) if transmission control shall be used during the session, shall include
> an \"m=application\" media-level section as specified in 3GPP TS 24.581 [5]
> clause 12 for a media-transmission control entity, consisting of:
>
> a) the port number for the media-transmission control entity selected as
> specified in 3GPP TS 24.581 [5]; and
>
> b) the \'fmtp\' attributes as specified in 3GPP TS 24.581 [5] clause 14; and
>
> 5) if end-to-end security is required for a private call and the SDP offer
> is not for establishing a pre-established session, shall include the MIKEY-
> SAKKE I_MESSAGE in an \"a=key-mgmt\" attribute as a \"mikey\" attribute
> value in the SDP offer as specified in IETF RFC 4567 [34].
[TS 24.281, clause 6.4]
An initial SIP INVITE request fulfilling the following criteria shall be
regarded by the MCVideo server as an implicit transmit media request by the
originating MCVideo client when the MCVideo client:
> 1) initiates an MCVideo session; and
>
> 2) includes the \"mc_implicit_request\" \'fmtp\' attribute in the associated
> UDP stream for the transmission control in the SDP offer/answer as specified
> in 3GPP TS 24.581 [5] clause 12.
A SIP re-INVITE request fulfilling the following criteria shall be regarded by
the MCVideo server as an implicit transmit media request when the MCVideo
client:
> 1) performs an upgrade of:
>
> a) an MCVideo group call to an emergency MCVideo group call;
>
> b) an MCVideo group call to an imminent peril MCVideo group call; and
>
> 2) includes the \"mc_implicit_request\" \'fmtp\' attribute in the associated
> UDP stream for the transmission control in the SDP offer/answer as specified
> in 3GPP TS 24.581 [5] clause 12.
In all other cases the SIP (re-)INVITE request shall be regarded as received
without an implicit transmit media request.
[TS 24.581, clause 6.2.1]
Based on the negotiations during the call establishment specified in 3GPP TS
24.281 [2], a new instance of the \'Transmission participant state transition
diagram for basic transmission control operation\', as specified in subclause
6.2.4 and a new instance of the \'Transmission participant state transition
diagram for basic reception control operation\' as specified in subclause
6.2.5, shall be created for this call.
The SIP INVITE request sent by the application and signalling plane:
> 1\. shall be regarded an implicit Transmission request when an implicit
> Transmission request is negotiated; and
>
> 2\. shall not be regarded as an implicit Transmission request in case of a
> rejoin to an already on-going group call.
>
> NOTE: The transmission participant can negotiate the use of prioritization
> of the Transmission Media Request message. In that case, the transmission
> participant can request permission to send media at a priority level that is
> either the same as or lower than the highest priority that was permitted to
> the participant in the MCVideo call initialization. If a transmission
> participant is authorized for pre-emptive priority in the MCVideo call it is
> good practise to always request permission to send RTP media packets at a
> priority level that is lower than pre-emptive priority unless the user
> explicitly requests to pre-empt the current RTP media packets sender.
[TS 24.581, clause 6.2.2]
The MCVideo call release (whether it is initiated by the transmission
participant or transmission control server) is a two-step procedure.
> Step 1 The transmission participant stops sending transmission control and
> reception control messages and the MCVideo client stops sending and
> receiving RTP media packets.
>
> Step 2 When the application and signalling plane has determined that the
> MCVideo call is released, the corresponding instance of the \'Transmission
> participant state transition diagram for basic transmission control
> operation\' as specified in subclause 6.2.4 and the corresponding instance
> of the \'Transmission participant state transition diagram for basic
> reception control operation\' as specified in subclause 6.2.5 are terminated
> and the transmission participant releases all the used resources.
The user plane can initiate the release step 1, but the application and
signalling plane always initiates the release step 2.
[TS 24.581, clause 12.1.2.1]
This subclause defines the structure and syntax of the SDP \"fmtp\" attribute,
when used to negotiate an MCVideo media plane control channel. The MCVideo
media plane control channel, and the protocols used on the control channel, is
described in the present specification.
[TS 24.581, clause 12.1.2.2]
In an SDP offer and answer, the \"mc_queueing\" fmtp attribute is used to
indicate support of the Transmission Request message queueing mechanism, as
defined in the present specification.
In an SDP offer, the \"mc_priority\" fmtp attribute indicates (using an
integer value between \'1\' and \'255\') the maximum transmission priority
that the offerer requests to be used with Transmission Request messages sent
by the offerer. In an SDP answer, the attribute parameter indicates the
maximum priority level that the answerer has granted to the offerer. The value
must be equal or less than the value provided in the associated SDP offer.
> NOTE 1: If the \"mc_priority\" fmtp attribute is not used within an SDP
> offer or answer, a default priority value is assumed.
In an SDP offer, the \"mc_reception_priority\" fmtp attribute indicates (using
an integer value between \'1\' and \'255\') the maximum reception priority
that the offerer requests to be used with Reception Request messages sent by
the offerer. In an SDP answer, the attribute parameter indicates the maximum
reception priority level that the answerer has granted to the offerer. The
value must be equal or less than the value provided in the associated SDP
offer.
> NOTE 2: If the \"mc_reception_priority\" fmtp attribute is not used within
> an SDP offer or answer, a default reception priority value is assumed.
In an SDP offer, the \"mc_granted\" fmtp attribute parameter indicates that
the offerer supports the procedure where the answerer indicates, using the
fmtp attribute in the associated SDP answer, that the permission to transmit
has been granted to the offerer.
> NOTE 3: When the \"mc_granted\" fmtp attribute is used in an SDP offer, it
> does not indicate an actual request for the media transmission. The SDP
> \"mc_implicit_request\" fmtp attribute can be used to request the media
> transmission. In an SDP answer, the attribute indicates that the permission
> to Transmission has been granted to the offerer.
>
> NOTE 4: Once the offerer has been granted the permission to Transmission,
> the offerer can perform media transmission until it receives a Transmission
> Revoked message, or until the offerer itself ends the media transmission by
> sending a Transmission end request message, as described in the present
> specification.
In an SDP offer, the \"mc_implicit_request\" fmtp attribute indicates that the
offerer implicitly requests for media transmission (without the need to send a
Transmission Request message). In an SDP answer, the attribute parameter
indicates that the answerer has accepted the implicit Transmission Request.
Once the answerer grants the permission to Transmission to the offerer, the
answerer will send a Transmission Granted message.
> NOTE 5: The usage of the \"mc_implicit_request\" fmtp attribute in an SDP
> answer does not mean that the answerer has granted the permission to
> Transmission to the offerer, only that the answerer has accepted the
> implicit Transmission Request.
[TS 24.581, clause 14.2.1]
When the offerer generates an SDP offer, in order to negotiate the
establishment of a media plane control channel, the offerer shall include a
media description (\"m=\" line) associated with the media plane control
channel. In addition, the offerer may associate an SDP fmtp attribute with the
media description.
> NOTE: \"Initial offer\" refers to the offer when the media plane control
> channel is initially negotiated. It might, or might not, be the initial
> offer within the session.
[TS 24.581, clause 14.2.4]
The MCVideo client shall include the \"mc_granted\" fmtp attribute in the SDP
offer of an initial SIP INVITE request when it is acceptable for the MCVideo
client to receive a granted indication in the SIP 200 (OK) response to an
initial INVITE request.
[TS 24.581, clause 14.2.5]
The MCVideo client shall include the \"mc_implicit_request\" fmtp attribute
when a SIP request shall be interpreted as an implicit Transmission request.
If not explicitly stated in procedures in the present document or in
procedures in 3GPP TS 24.281 [2] that the \"mc_implicit_request\" fmtp
attribute shall be included, the decision to include the
\"mc_implicit_request\" fmtp attribute or not, is an implementation option.
##### 6.1.1.3.3 Test description {#test-description-6 .H6}
##### 6.1.1.3.3.1 Pre-test conditions {#pre-test-conditions-6 .H6}
##### System Simulator: {#system-simulator-2 .H6}
\- SS (MCVideo server)
##### IUT: {#iut-2 .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
\- The UE shall be switched off.
##### Preamble: {#preamble-2 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- UE States at the end of the preamble
\- The UE is in E-UTRA Registered, Idle Mode state.
\- The MCVideo Client Application has been activated and User has registered-
in as the MCVideo User with the Server as active user at the Client.
##### 6.1.1.3.3.2 Test procedure sequence {#test-procedure-sequence-6 .H6}
Table 6.1.1.3.3.2-1: Main Behaviour
+------------+------------+------------+---------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +============+============+============+=========+=========+====+ | | | U - S | Message | | | +------------+------------+------------+---------+---------+----+ | 1 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | the | | | | | | | est | | | | | | | ablishment | | | | | | | of a group | | | | | | | call with | | | | | | | manual | | | | | | | co | | | | | | | mmencement | | | | | | | mode and | | | | | | | implicit | | | | | | | tr | | | | | | | ansmission | | | | | | | request. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 2 | Check: | - | - | 1, 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | CO session | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3B.1.3-1 | | | | | | | to | | | | | | | establish | | | | | | | a group | | | | | | | call with | | | | | | | manual | | | | | | | co | | | | | | | mmencement | | | | | | | mode and | | | | | | | implicit | | | | | | | tr | | | | | | | ansmission | | | | | | | control | | | | | | | according | | | | | | | to option | | | | | | | b,ii of | | | | | | | NOTE 1 in | | | | | | | TS | | | | | | | 36.579.1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.1.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 3-7 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 8 | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | provide | | | | | | | tr | | | | | | | ansmission | | | | | | | granted | | | | | | | no | | | | | | | tification | | | | | | | to the | | | | | | | user? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 9 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | end of | | | | | | | tra | | | | | | | nsmission. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 10 | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | tr | | | | | | | ansmission | | | | | | | End | | | | | | | Request | | | | | | | CO\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.7.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 11-14 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 14A | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | release | | | | | | | the call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 15 | Check: | - | - | 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CO | | | | | | | call | | | | | | | release\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 16 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | NOTE 1: | | | | | | | This is | | | | | | | expected | | | | | | | to be done | | | | | | | via a | | | | | | | suitable | | | | | | | impl | | | | | | | ementation | | | | | | | dependent | | | | | | | MMI. | | | | | | +------------+------------+------------+---------+---------+----+
##### 6.1.1.3.3.3 Specific message contents {#specific-message-contents-6 .H6}
Table 6.1.1.3.3.3-1: SIP INVITE from the UE (Step 2, Table 6.1.1.3.3.2-1;\
Step 2, TS 36.579-1 [2] Table 5.3B.1.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.1-1, condition MANUAL
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP message**  
MIME-part-body SDP Message as described in Table 6.1.1.3.3.3-1A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.1.1.3.3.3-2
Table 6.1.1.3.3.3-1A: SDP message in SIP INVITE (Table 6.1.1.3.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.1-2, condition
INITIAL_SDP_OFFER, IMPLICIT_GRANT_REQUESTED
* * *
Table 6.1.1.3.3.3-2: MCVideo-Info in SIP INVITE (Table 6.1.1.3.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition GROUP CALL,
INVITE_REFER
* * *
Table 6.1.1.3.3.3-3: SIP 200 (OK) from the SS (Step 2, Table 6.1.1.3.3.2-1;\
Step 4, TS 36.579-1 [2] Table 5.3B.1.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.17.1.2-1, condition INVITE-RSP
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
SDP Message SDP Message as described in Table 6.1.1.3.3.3-3A
Table 6.1.1.3.3.3-3A: SDP message in SIP 200 (OK) (Table 6.1.1.3.3.3-3)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition SDP_ANSWER,
IMPLICIT_GRANT_REQUESTED
* * *
Table 6.1.1.3.3.3-4..10: Void
6.1.1.4 On-network / On-demand Pre-arranged Group Call / Manual Commencement
Mode / Client Terminated (CT)
##### 6.1.1.4.1 Test Purpose (TP) {#test-purpose-tp-7 .H6}
##### (1) {#section-42 .H6}
**with** { the UE (MCVideo Client) registered and authorised for MCVideo }
ensure that {
**when** { the UE (MCVideo Client) receives a SIP INVITE from the SS (MCVideo
Server)to initiate an On-demand Pre-arranged group call with Manual
Commencement Mode **and** the MCVideo User requests to answer the call }
**then** { the UE (MCVideo Client) responds by sending a SIP 200 (OK) message
}
}
##### (2) {#section-43 .H6}
**with** { the UE (MCVideo Client) having an ongoing On-demand Pre-arranged
Group Call with Manual Commencement Mode }
ensure that {
**when** { the UE (MCVideo Client) receives a Media Transmission Notification
message from the SS (MCVideo Server) }
**then** { the UE (MCVideo Client) provides media transmission notification to
the MCVideo User }
##### (3) {#section-44 .H6}
**with** { the UE (MCVideo Client) having received a Media Transmission
Notification message from the SS (MCVideo Server) }
ensure that {
**when** { the MCVideo User requests permission to receive media }
**then** { the UE (MCVideo Client) sends a Receive Media Request message }
}
##### (4) {#section-45 .H6}
**with** { the UE (MCVideo Client) having an ongoing On-demand Pre-arranged
Group Call with Manual Commencement Mode }
ensure that {
**when** { the UE (MCVideo Client) receives a SIP BYE message from the SS
(MCVideo Server) }
**then** { the UE (MCVideo Client) responds with a SIP 200 (OK) message }
##### 6.1.1.4.2 Conformance requirements {#conformance-requirements-7 .H6}
References: The conformance requirements covered in the current Test Case are
specified in: TS 24.281, clauses 9.2.1.2.1.2, 6.2.3.2.2, 9.2.1.2.3.3, 6.2.6,
and in TS 24.581, clause 6.2.5.2.2, 6.2.5.3.2, 6.2.5.3.3. The following
represents a copy/paste extraction of the requirements relevant to the test
purpose; any references within the copy/paste text should be understood within
the scope of the core spec they have been copied from. Unless otherwise
stated, these are Rel-15 requirements.
[TS 24.281, clause 9.2.1.2.1.2]
Upon receipt of an initial SIP INVITE request, the MCVideo client shall follow
the procedures for termination of multimedia sessions in the IM CN subsystem
as specified in 3GPP TS 24.229 [11] with the clarifications below.
The MCVideo client:
> 1) may reject the SIP INVITE request if either of the following conditions
> are met:
>
> a) MCVideo client does not have enough resources to handle the call; or
>
> b) any other reason outside the scope of this specification;
>
> 2) if the SIP INVITE request is rejected in step 1), shall respond toward
> participating MCVideo function either with appropriate reject code as
> specified in 3GPP TS 24.229 [51] and warning texts as specified in subclause
> 4.4.2 or with SIP 480 (Temporarily unavailable) response not including
> warning texts if the user is authorised to restrict the reason for failure
> and skip the rest of the steps of this subclause;
>
> NOTE: If the SIP INVITE request contains an emergency indication or imminent
> peril indication, the MCVideo client can by means beyond the scope of this
> specification choose to accept the request.
>
> ...
>
> 6) may display to the MCVideo user the MCVideo ID of the inviting MCVideo
> user;
>
> ...
>
> 8) shall perform the manual commencement procedures specified in subclause
> 6.2.3.2.2 if one of the following conditions are met:
>
> a) SIP INVITE request contains an Answer-Mode header field with the value
> \"Manual\" and the MCVideo service setting at the invited MCVideo client for
> answering the call is to use manual commencement mode; or
>
> b) SIP INVITE request contains an Answer-Mode header field with the value
> \"Manual\" and the MCVideo service setting at the invited MCVideo client for
> answering the call is set to automatic commencement mode, yet the invited
> MCVideo client allows the call to be answered with manual commencement mode;
> and
>
> 9) when the SIP 200 (OK) response to the SIP INVITE request is sent, may
> subscribe to the conference event package as specified in subclause 9.1.3.1.
[TS 24.281, clause 6.2.3.2.2]
When performing the manual commencement mode procedures:
> 1) the terminating MCVideo client may automatically generate a SIP 183
> (Session Progress) in accordance with 3GPP TS 24.229 [11], prior to the
> MCVideo user\'s acknowledgement; and
>
> 2) if the MCVideo user declines the MCVideo session invitation the MCVideo
> client shall send a SIP 480 (Temporarily Unavailable) response towards the
> MCVideo server with the warning text set to: \"110 user declined the call
> invitation\" in a Warning header field as specified in subclause 4.4, and
> not continue with the rest of the steps in this subclause.
When generating a SIP 183 (Session Progress) response, the MCVideo client:
> 1) shall include the following in the Contact header field:
>
> a) the g.3gpp.mcvideo media feature tag; and
>
> b) the g.3gpp.icsi-ref media feature tag containing the value of
> \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"; and
>
> 2) may include a P-Answer-State header field with the value \"Unconfirmed\"
> as specified in IETF RFC 4964 [30];
When sending the SIP 200 (OK) response to the incoming SIP INVITE request, the
MCVideo client shall follow the procedures in subclause 6.2.3.1.2.
When NAT traversal is supported by the MCVideo client and when the MCVideo
client is behind a NAT, generation of SIP responses is done as specified in
this subclause and as specified in IETF RFC 5626 [35]
[TS 24.281, clause 9.2.1.2.3.3]
Upon receiving a SIP BYE request for releasing the prearranged MCVideo group
call, the MCVideo client shall follow the procedures as specified in subclause
6.2.6.
[TS 24.281, clause 6.2.6]
Upon receiving a SIP BYE request, the MCVideo client:
> 1) shall interact with the media plane as specified in 3GPP TS 24.581[5];
> and
>
> 2) shall send SIP 200 (OK) response towards MCVideo server according to 3GPP
> TS 24.229 [11].
[TS 24.581, clause 6.2.5.2.2]
When an MCVideo call is established, the terminating transmission participant:
> 1\. shall create an instance of a \'Transmission participant state
> transition diagram for general reception control operation\'; and
>
> 2\. shall enter the \'U: reception controller\' state.
>
> NOTE: From a transmission participant perspective the MCVideo call is
> established when the application and signalling plane sends the SIP 200 (OK)
> response.
[TS 24.581, clause 6.2.5.3.2]
Upon receiving the media transmission notification from the transmission
control server, the transmission participant:
> 1\. if the first bit in the subtype of the media transmission notification
> message is set to \'1\' (Acknowledgment is required) as described in clause
> 9.2.2.1, shall send a Transmission control Ack message. The Transmission
> control Ack message:
>
> a. shall include the Message Type field set to \'6\' (Media transmission
> notification); and
>
> b. shall include the Source field set to \'0\' (the transmission participant
> is the source);
>
> 2\. shall provide media transmission notification to the user;
>
> 3\. shall store the User ID and the SSRC of the user transmitting the media;
>
> 4\. if the Reception Mode field is set to \'0\' indicating automatic
> reception mode:
>
> a. shall create an instance of the \'Transmission participant state
> transition diagram for basic reception control operation\';
>
> b. shall map the stored User ID and the SSRC of the user transmitting the
> media with the instance of \'Transmission participant state transition
> diagram for basic reception control operation\' created in step a); and
>
> c. shall enter the \'U: has permission to receive\' state;
>
> 5\. may display the details of the incoming media to the user; and
>
> 6\. shall remain in the \'U: reception controller\' state.
[TS 24.581, clause 6.2.5.3.3]
Upon receiving an indication from the user to request permission to receive
media, the transmission participant:
> 1\. shall send the Receive Media Request message toward the transmission
> control server; The Receive Media Request message:
>
> a. if a different priority than the normal priority is required, shall
> include the Reception Priority field with the priority not higher than
> negotiated with the transmission control server as specified in subclause
> 14.3.3; and
>
> b. if the receive media request is a broadcast group call, system call,
> emergency call or an imminent peril call, shall include a Transmission
> Indicator field indicating the relevant call types;
>
> 2\. shall create an instance of the \'Transmission participant state
> transition diagram for basic reception control operation\';
>
> 3\. shall map the stored User ID and the SSRC of the user transmitting the
> media with instance of \'Transmission participant state transition diagram
> for basic reception control operation\' created in step 2; and
>
> 4\. shall remain in the \'U: reception controller\' state.
##### 6.1.1.4.3 Test description {#test-description-7 .H6}
##### 6.1.1.4.3.1 Pre-test conditions {#pre-test-conditions-7 .H6}
##### System Simulator: {#system-simulator-3 .H6}
\- SS (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
##### IUT: {#iut-3 .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
##### Preamble: {#preamble-3 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- UE States at the end of the preamble
\- The UE is in E-UTRA Registered, Idle Mode state.
\- The MCVideo Client Application has been activated and User has registered-
in as the MCVideo User with the Server as active user at the Client.
##### 6.1.1.4.3.2 Test procedure sequence {#test-procedure-sequence-7 .H6}
Table 6.1.1.4.3.2-1: Main Behaviour
St Procedure Message Sequence TP Verdict
* * *
                                                                                                                                                                                           U - S              Message
1 Check: Does the UE (MCVideo client) correctly perform procedure \'MCX CT
group call establishment with manual commencement\' as described in TS
36.579-1 [2] Table 5.3.5.3-1? - - 1 P 2-5 Void - - - - 6 Check: Does the UE
(MCVideo client) correctly perform procedure \'MCVideo Media Transmission
Notification and Request CT\' as described in TS 36.579-1 [2] Table
5.3B.3.3-1? - - 2, 3 P 7-10 Void - - - - 11 Check: Does the UE (MCVideo
client) correctly perform procedure \'MCX CT call release\' as described in TS
36.579-1 [2] Table 5.3.12.3-1? - - 4 P 12 Void - - - -
##### 6.1.1.4.3.3 Specific message contents {#specific-message-contents-7 .H6}
Table 6.1.1.4.3.3-1: SIP INVITE from the SS (Step 1, Table 6.1.1.4.3.2-1;\
Step 2, TS 36.579-1 [2] Table 5.3.5.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.2-1, condition MANUAL
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP Message**  
MIME part body SDP Message as described in Table 6.1.1.4.3.3-1A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.1.1.4.3.3-2
Table 6.1.1.4.3.3-1A: SDP in SIP INVITE (Table 6.1.1.4.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition
INITIAL_SDP_OFFER
* * *
Table 6.1.1.4.3.3-2: MCVideo-Info in SIP INVITE (Table 6.1.1.4.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.2-2, condition GROUP-CALL
* * *
Table 6.1.1.4.3.3-3..4: Void
Table 6.1.1.4.3.3-5: SIP 200 (OK) from the UE (Step 1, Table 6.1.1.4.3.2-1;\
Step 7, TS 36.579-1 [2] Table 5.3.5.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.17.1.1-1, condition INVITE-RSP
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP Message**  
MIME part body SDP Message as described in Table 6.1.1.4.3.3-5A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.1.1.4.3.3-6
Table 6.1.1.4.3.3-5A: SDP in SIP 200 (OK) (Table 6.1.1.4.3.3-5)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.1-2, condition SDP_ANSWER
* * *
Table 6.1.1.4.3.3-6: MCVideo-Info in SIP 200 (OK) (Table 6.1.1.4.3.3-5)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition INVITE-RSP
* * *
Table 6.1.1.4.3.6-7: Void
6.1.1.5 On-network / On-demand Pre-arranged Group Call / Emergency Group Call
/ Client Originated (CO)
##### 6.1.1.5.1 Test Purpose (TP) {#test-purpose-tp-8 .H6}
##### (1) {#section-46 .H6}
**with** { the UE (MCVideo Client) registered and authorized for MCVideo
Service }
ensure that {
**when** { the MCVideo User requests the establishment of a MCVideo On-demand
Pre-arranged Emergency Group Call, with implicit Transmission Control }
**then** { the UE (MCVideo Client) requests On-demand Pre-arranged Emergency
Group Call by sending a SIP INVITE message **and,** after indication from the
SS (MCVideo Server) that the call was established, provides transmission
granted notification to the MCVideo User }
}
##### (2) {#section-47 .H6}
**with** { the UE (MCVideo Client) having established an MCVideo On-demand
Pre-arranged Group Call }
ensure that {
**when** {the MCVideo User engages in communication with the invited MCVideo
User(s)}
**then** { the UE (MCVideo Client) respects the Transmission Control imposed
by the SS (MCVideo Server) (Transmission Granted, Transmission Control ACK,
Transmission End Request, Transmission End Response, Transmission Idle ) }
}
##### (3) {#section-48 .H6}
**with** { the UE (MCVideo Client) having an ongoing On-demand Pre-arranged
Emergency Group Call, with implicit Transmission Control }
ensure that {
**when** { the MCVideo User requests to terminate the ongoing MCVideo Group
Call }
**then** { the UE (MCVideo Client) sends a Transmission End Request, **and**
acknowledges the Transmission End Response with a Transmission Control ACK,
**and** then sends a SIP BYE request **and** leaves the MCVideo Session }
}
##### 6.1.1.5.2 Conformance requirements {#conformance-requirements-8 .H6}
References: The conformance requirements covered in the current Test Caseare
specified in TS 24.281, clauses 9.2.1.2.1.1, 6.2.8.1.1, 6.2.8.1.2, 6.2.8.1.3,
6.2.8.1.4, 6.2.1 and TS 24.581, Test Case 6.2.4.4.6. The following represents
a copy/paste extraction of the requirements relevant to the test purpose; any
references within the copy/paste text should be understood within the scope of
the core spec they have been copied from. Unless otherwise stated, these are
Rel-15 requirements.
[TS 24.281, clause 9.2.1.2.1.1]
Upon receiving a request from an MCVideo user to establish an MCVideo
prearranged group session the MCVideo client shall generate an initial SIP
INVITE request by following the UE originating session procedures specified in
3GPP TS 24.229 [11], with the clarifications given below.
The MCVideo client:
> 1) if the MCVideo user has requested the origination of an MCVideo emergency
> group call or is originating an MCVideo prearranged group call and the
> MCVideo emergency state is already set, the MCVideo client shall comply with
> the procedures in subclause 6.2.8.1.1;
>
> 2) if the MCVideo user has requested the origination of an MCVideo imminent
> peril group call, the MCVideo client shall comply with the procedures in
> subclause 6.2.8.1.9;
>
> 3) if the MCVideo user has requested the origination of a broadcast group
> call, the MCVideo client shall comply with the procedures in subclause
> 6.2.8.2;
>
> 4) shall include the g.3gpp.mcvideo media feature tag and the g.3gpp.icsi-
> ref media feature tag with the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" in the Contact header field of the SIP INVITE
> request according to IETF RFC 3840 [22];
>
> 5) shall include an Accept-Contact header field containing the
> g.3gpp.mcvideo media feature tag along with the \"require\" and \"explicit\"
> header field parameters according to IETF RFC 3841 [20];
>
> 6) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
> (coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
> field according to IETF RFC 6050 [14] in the SIP INVITE request;
>
> 7) shall include an Accept-Contact header field with the g.3gpp.icsi-ref
> media feature tag containing the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" along with the \"require\" and \"explicit\"
> header field parameters according to IETF RFC 3841 [20];
>
> 8) should include the \"timer\" option tag in the Supported header field;
>
> 9) should include the Session-Expires header field according to IETF RFC
> 4028 [23]. It is recommended that the \"refresher\" header field parameter
> is omitted. If included, the \"refresher\" header field parameter shall be
> set to \"uac\";
>
> 10) shall set the Request-URI of the SIP INVITE request to the public
> service identity identifying the participating MCVideo function serving the
> MCVideo user;
>
> NOTE 1: The MCVideo client is configured with public service identity
> identifying the participating MCVideo function serving the MCVideo user.
>
> 11) may include a P-Preferred-Identity header field in the SIP INVITE
> request containing a public user identity as specified in 3GPP TS 24.229
> [11];
>
> 12) if the MCVideo emergency state is already set or the MCVideo client
> emergency group state for this group is set to \"MVEG 2: in-progress\", the
> MCVideo client shall include the Resource-Priority header field and comply
> with the procedures in subclause 6.2.8.1.2;
>
> 13) if the MCVideo client imminent peril group state for this group is set
> to \"MVIG 2: in-progress\" or \"MVIG 4: confirm-pending\" shall include the
> Resource-Priority header field and comply with the procedures in subclause
> 6.2.8.1.12;
>
> 14) shall contain in an application/vnd.3gpp.mcvideo-info+xml MIME body with
> the \ element containing the \ element with:
>
> a) the \ element set to a value of \"prearranged\";
>
> b) the \ element set to the group identity;
>
> c) the \ element set to the MCVideo client ID of the
> originating MCVideo client; and
>
> NOTE 2: The MCVideo client does not include the MCVideo ID of the
> originating MCVideo user in the body, as this will be inserted into the body
> of the SIP INVITE request that is sent from the originating participating
> MCVideo function.
>
> d) if the group identity can be determined to be a TGI and if the MCVideo
> client can associate the TGI with a MCVideo group ID, the \ group-id> element set to the MCVideo group ID;
>
> NOTE 3: The text \"can associate the TGI with a MCVideo group ID\" means
> that the MCVideo client is able to determine that there is a constituent
> group of the temporary group that it is a member of.
>
> NOTE 4: The MCVideo client is informed about temporary groups and regrouping
> of MCVideo groups that the user is a member of as specified in 3GPP TS
> 24.481 [24].
>
> NOTE 5: If the MCVideo user selected a TGI where there are several MCVideo
> groups where the MCVideo user is a member, the MCVideo client selects one of
> those MCVideo groups.
>
> 15) shall include an SDP offer according to 3GPP TS 24.229 [11] with the
> clarifications given in subclause 6.2.1;
>
> 16) if an implicit transmission request is required, shall indicate this as
> specified in subclause 6.4; and
>
> 17) shall send the SIP INVITE request towards the MCVideo server according
> to 3GPP TS 24.229 [11].
On receiving a SIP 2xx response to the SIP INVITE request, the MCVideo client:
> 1) shall interact with the user plane as specified in 3GPP TS 24.581 [5] ;
>
> 2) if the MCVideo emergency group call state is set to \"MVEGC 2: emergency-
> call-requested\" or \"MVEGC 3: emergency-call-granted\" or the MCVideo
> imminent peril group call state is set to \"MVIGC 2: imminent-peril-call-
> requested\" or \"MVIGC 3: imminent-peril-call-granted\", the MCVideo client
> shall perform the actions specified in subclause 6.2.8.1.4; and
>
> 3) may subscribe to the conference event package as specified in subclause
> 9.1.3.1.
On receiving a SIP 4xx response, a SIP 5xx response or a SIP 6xx response to
the SIP INVITE request:
> 1) if the MCVideo emergency group call state is set to \"MVEGC 2: emergency-
> call-requested\" or \"MVEGC 3: emergency-call-granted\"; or
>
> 2) if the MCVideo imminent peril group call state is set to \"MVIGC 2:
> imminent-peril-call-requested\" or \"MVIGC 3: imminent-peril-call-granted\";
the MCVideo client shall perform the actions specified in subclause 6.2.8.1.5.
On receiving a SIP INFO request where the Request-URI contains an MCVideo
session ID identifying an ongoing group session, the MCVideo client shall
follow the actions specified in subclause 6.2.8.1.13.
[TS 24.281, clause 6.2.8.1.1]
This subclause is referenced from other procedures.
When the MCVideo emergency state is set and this MCVideo user and MCVideo
group are authorized to initiate MCVideo emergency group calls as determined
by the procedures of subclause 6.2.8.1.8, the MCVideo client:
> 1) shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body in
> the SIP INVITE request, an \ element set to \"true\" and if
> the MCVideo emergency group call state is set to \"MVEGC 1: emergency-gc-
> capable\", shall set the MCVideo emergency group call state to \"MVEGC 2:
> emergency-call-requested\";
>
> 2) if the MCVideo user has also requested an MCVideo emergency alert to be
> sent and this is an authorized request for MCVideo emergency alert as
> determined by the procedures of subclause 6.2.8.1.6, and the MCVideo
> emergency alert state is set to \"MVEA 1: no-alert\", shall:
>
> a) set the \ element of the application/vnd.3gpp.mcvideo-info+xml
> MIME body to \"true\" and set the MCVideo emergency alert state to \"MVEA 2:
> emergency-alert-confirm-pending\"; and
>
> b) perform the procedures specified in subclause 6.2.9.1 for the MCVideo
> emergency alert trigger;
>
> 3) if the MCVideo user has not requested an MCVideo emergency alert to be
> sent and the MCVideo emergency alert state is set to \"MVEA 1: no-alert\",
> shall set the \ element of the application/vnd.3gpp.mcvideo-
> info+xml MIME body to \"false\"; and
>
> 4) if the MCVideo client emergency group state of the group is set to a
> value other than \"MVEG 2: in-progress\" set the MCVideo client emergency
> group state of the MCVideo group to \"MVEG 3: confirm-pending\".
>
> NOTE 1: This is the case of an MCVideo user already being in the MCVideo
> emergency state it initiated previously while originating an MCVideo
> emergency group call or MCVideo emergency alert. All group calls the MCVideo
> user originates while in MCVideo emergency state will be MCVideo emergency
> group calls.
When the MCVideo emergency state is clear and the MCVideo emergency group call
state is set to \"MVEGC 1: emergency-gc-capable\" and the received SIP request
contains an authorized request for MCVideo emergency group call as determined
by the procedures of subclause 6.2.8.1.8, the MCVideo client shall set the
MCVideo emergency state and perform the following actions:
> 1) shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body in
> the SIP INVITE request an \ element set to \"true\" and set
> the MCVideo emergency group call state to \"MVEGC 2: emergency-call-
> requested\" state;
>
> 2) if the MCVideo user has also requested an MCVideo emergency alert to be
> sent and this is an authorized request for MCVideo emergency alert as
> determined by the procedures of subclause 6.2.8.1.6, shall:
>
> a) include in the application/vnd.3gpp.mcvideo-info+xml MIME body the
> \ element set to \"true\" and set the MCVideo emergency alert
> state to \"MVEA 2: emergency-alert-confirm-pending\"; and
>
> b) perform the procedures specified in subclause 6.2.9.1 for the MCVideo
> emergency alert trigger;
>
> 3) if the MCVideo user has not requested an MCVideo emergency alert to be
> sent, shall set the \ element of the
> application/vnd.3gpp.mcvideo-info+xml MIME body to \"false\"; and
>
> 4) if the MCVideo client emergency group state of the group is set to a
> value other than \"MVEG 2: in-progress\" shall set the MCVideo client
> emergency group state of the MCVideo group to \"MVEG 3: confirm-pending\".
>
> NOTE 2: This is the case of an initial MCVideo emergency group call and
> optionally an MCVideo emergency alert being sent. As the MCVideo emergency
> state is not sent, there is no MCVideo emergency alert outstanding.
>
> NOTE 3: An MCVideo group call originated by an affiliated member of an
> MCVideo group which is in an in-progress emergency state (as tracked on the
> MCVideo client by the MCVideo client emergency group state) but is not in an
> MCVideo emergency state of their own will also be an MCVideo emergency group
> call. The \ and \ elements of the
> application/vnd.3gpp.mcvideo-info+xml MIME body do not need to be included
> in this case and hence no action needs to be taken in this subclause.
[TS 24.281, clause 6.2.8.1.2]
This subclause is referenced from other procedures.
If the MCVideo emergency group call state is set to either \"MVEGC 2:
emergency-call-requested\" or \"MVEGC 3: emergency-call-granted\" and this is
an authorized request for an MCVideo emergency group call as determined by the
procedures of subclause 6.2.8.1.8, or the MCVideo client emergency group state
of the group is set to \"MVEG 2: in-progress\", the MCVideo client shall
include in the SIP INVITE request a Resource-Priority header field populated
with the values for an MCVideo emergency group call as specified in subclause
6.2.8.1.15.
> NOTE: The MCVideo client ideally would not need to maintain knowledge of the
> in-progress emergency state of the group (as tracked on the MCVideo client
> by the MCVideo client emergency group state) but can use this knowledge to
> provide a Resource-Priority header field set to emergency level priority,
> which starts the infrastructure priority adjustment process sooner than
> otherwise would be the case.
If this is an authorized request to cancel the MCVideo emergency group call as
determined by the procedures of subclause 6.2.8.1.7, and the MCVideo client
emergency group state of the group is \"no-emergency\" or \"cancel-pending\",
the MCVideo client shall include in the SIP INVITE request a Resource-Priority
header field populated with the values for a normal MCVideo group call as
specified in subclause 6.2.8.1.15.
[TS 24.281, clause 6.2.8.1.3]
This subclause is referenced from other procedures.
Upon receiving a SIP INFO request within the dialog of the SIP request for a
priority group call:
> \- with the Info-Package header field containing the g.3gpp.mcvideo-info
> package name;
>
> \- with the application/vnd.3gpp.mcvideo-info+xml MIME body associated with
> the info package according to IETF RFC 6086 [54]; and
>
> \- with one or more of the \, \ and
> \ elements set in the application/vnd.3gpp.mcvideo-info+xml
> MIME body;
the MCVideo client:
> 1) shall send a SIP 200 (OK) response to the SIP INFO request as specified
> in 3GPP TS 24.229 [4];
>
> 2) if the MCVideo emergency group call state is set to \"MVEGC 3: emergency-
> call-granted\":
>
> a) if the MCVideo emergency alert state is set to \"MVEA 2: emergency-alert-
> confirm-pending\":
>
> i) if the \ element is set to a value of \"false\", shall set the
> MCVideo emergency alert state to \"MVEA 1: no-alert\"; and
>
> ii) if the \ element is set to a value of \"true\", shall set the
> MCVideo emergency alert state to \"MVEA 3: emergency-alert-initiated\";
>
> 3) if the MCVideo imminent peril group call state is set to \"MVIGC 2:
> imminent-peril-call-requested\" or \"MVIGC 3: imminent-peril-call-granted\":
>
> a) if the \ element is set to a value of \"false\" and an
> \ element is set to a value of \"true\", shall:
>
> i) set the MCVideo imminent peril group state to \"MVIG 1: no-imminent-
> peril\";
>
> ii) set the MCVideo imminent peril group call state to \"MVIGC 1: imminent-
> peril-capable\"; and
>
> iii) set the MCVideo client emergency group state of the group to \"MVEG 2:
> in-progress\"; and
>
> NOTE 1: This is the case of an MCVideo client attempting to make an imminent
> peril group call when the group is in an in-progress emergency group state.
> The MCVideo client will then receive a notification that the imminent peril
> call request was denied, however they will be participating at the emergency
> level priority of the group. This could occur for example when an MCVideo
> client requests an imminent peril call to a group that they are not
> currently affiliated with.
>
> NOTE 2: the MCVideo client emergency group state above is the MCVideo
> client\'s view of the in-progress emergency state of the group.
>
> 4) if the SIP request for a priority group call sent by the MCVideo client
> did not contain an \ element and if the MCVideo emergency
> alert state is set to \"MVEA 4: Emergency-alert-cancel-pending\":
>
> a) if the \ element contained in the SIP INFO request is set to a
> value of \"true\", shall set the MCVideo emergency alert state to \"MVEA 3:
> emergency-alert-initiated\"; and
>
> b) if the \ element contained in the SIP INFO request is set to a
> value of \"false\", shall set the MCVideo emergency alert state to \"MVEA 1:
> no-alert\".
[TS 24.281, clause 6.2.8.1.4]
In the procedures in this subclause, a priority group call refers to an
MCVideo emergency group call or an MCVideo imminent peril group call.
On receiving a SIP 2xx response to a SIP request for a priority group call,
the MCVideo client:
> 1) if the MCVideo emergency group call state is set to \"MVEGC 2: emergency-
> call-requested\" or \"MVEGC 3: emergency-call-granted\":
>
> a) shall set the MCVideo client emergency group state of the group to \"MVEG
> 2: in-progress\" if it was not already set;
>
> b) if the MCVideo emergency alert state is set to \"MVEA 2: emergency-alert-
> confirm-pending\" and the SIP 2xx response to the SIP request for a priority
> group call does not contain a Warning header field as specified in subclause
> 4.4 with the warning text containing the mcvideo-warn-code set to \"149\",
> shall set the MCVideo emergency alert state to \"MVEA 3: emergency-alert-
> initiated;
>
> c) shall set the MCVideo emergency group call state to \"MVEGC 3: emergency-
> call-granted\"; and
>
> d) shall set the MCVideo imminent peril group call state to \"MVIGC 1:
> imminent-peril-capable\" and the MCVideo imminent peril group state to
> \"MVIG 1: no-imminent-peril\"; or
>
> 2) if the MCVideo imminent peril group call state is set to \"MVIGC 2:
> imminent-peril-call-requested\" or \"MVIGC 3: imminent-peril-call-granted\"
> and the SIP 2xx response to the SIP request for an imminent peril group call
> does not contain a Warning header field as specified in subclause 4.4 with
> the warning text containing the mcvideo-warn-code set to \"149\":
>
> a) set the MCVideo imminent peril group call state to \"MVIGC 3: imminent-
> peril-call-granted\"; and
>
> b) set the MCVideo imminent peril group state to \"MVIG 2: in-progress\".
[TS 24.281, clause 6.2.1]
The SDP offer shall contain two SDP media-level sections for MCVideo video
media according to 3GPP TS 24.229 [11] and, if transmission control shall be
used during the session, shall contain one SDP media-level section for a
media- transmission control entity according to 3GPP TS 24.581 [5].
When composing an SDP offer according to 3GPP TS 24.229 [11] the MCVideo
client:
> 1) shall set the IP address of the MCVideo client for the offered MCVideo
> video media stream and, if transmission control shall be used, for the
> offered media-transmission control entity;
>
> NOTE: If the MCVideo client is behind a NAT the IP address and port included
> in the SDP offer can be a different IP address and port than the actual IP
> address and port of the MCVideo client depending on the NAT traversal method
> used by the SIP/IP Core.
>
> 2) shall include an \"m=audio\" media-level section for the MCVideo media
> stream consisting of:
>
> a) the port number for the media stream selected; and
>
> b) the codec(s) and media parameters and attributes with the following
> clarification:
>
> i) if the MCVideo client is initiating a call to a group identity;
>
> ii) if the \ element is present in the group
> document retrieved by the group management client as specified in 3GPP TS
> 24.481 [24] containing an \ element with a \"name\" attribute; and
>
> iii) if the MCVideo client supports the encoding name indicated in the value
> of the \"name\" attribute;
>
> then the MCVideo client:
>
> i) shall insert the value of the \"name\" attribute in the \
> field of the \"a=rtpmap\" attribute as defined in IETF RFC 4566 [2]; and
>
> c) \"i=\" field set to \"audio component of MCVideo\" according to 3GPP TS
> 24.229 [11];
>
> 3) shall include an \"m=video\" media-level section for the MCVideo media
> stream consisting of:
>
> a) the port number for the media stream selected; and
>
> b) the codec(s) and media parameters and attributes with the following
> clarification:
>
> i) if the MCVideo client is initiating a call to a group identity;
>
> ii) if the \ element is present in the group
> document retrieved by the group management client as specified in 3GPP TS
> 24.481 [24] containing an \ element with a \"name\" attribute; and
>
> iii) if the MCVideo client supports the encoding name indicated in the value
> of the \"name\" attribute;
>
> then the MCVideo client:
>
> i) shall insert the value of the \"name\" attribute in the \
> field of the \"a=rtpmap\" attribute as defined in IETF RFC 4566 [2];
>
> c) if the SDP offer is for an ambient viewing call:
>
> i) if this is a remotely initiated ambient viewing call, include an
> \"a=recvonly\" attribute; or
>
> ii) if this is a locally initiated ambient viewing call, include an
> \"a=sendonly\" attribute; and
>
> d) \"i=\" field set to \"video component of MCVideo\" according to 3GPP TS
> 24.229 [11];
>
> 4) if transmission control shall be used during the session, shall include
> an \"m=application\" media-level section as specified in 3GPP TS 24.581 [5]
> clause 12 for a media-transmission control entity, consisting of:
>
> a) the port number for the media-transmission control entity selected as
> specified in 3GPP TS 24.581 [5]; and
>
> b) the \'fmtp\' attributes as specified in 3GPP TS 24.581 [5] clause 14; and
>
> 5) if end-to-end security is required for a private call and the SDP offer
> is not for establishing a pre-established session, shall include the MIKEY-
> SAKKE I_MESSAGE in an \"a=key-mgmt\" attribute as a \"mikey\" attribute
> value in the SDP offer as specified in IETF RFC 4567 [34].
>
> [TS 24.581, clause 6.2.4.4.6]
Upon receiving a Transmission Granted message from the transmission control
server, the transmission participant:
> 1\. if the first bit in the subtype of the Transmission Granted message is
> set to \'1\' (Acknowledgment is required) as described in subclause 9.2.2.1,
> shall send a Transmission control Ack message. The Transmission control Ack
> message:
>
> a. shall include the Message Type field set to \'0\' (Transmission Granted);
> and
>
> b. shall include the Source field set to \'0\' (the transmission participant
> is the source);
>
> 2\. shall store the SSRC of granted transmission participant received in the
> Transmission Granted message and use it in the RTP media packets until the
> transmission is relased;
>
> 3\. shall provide Transmission granted notification to the user, if not
> already done;
>
> 4\. shall stop timer T100 (Transmission Request); and
>
> 5\. shall enter the \'U: has permission to transmit\' state.
##### 6.1.1.5.3 Test description {#test-description-8 .H6}
##### 6.1.1.5.3.1 Pre-test conditions {#pre-test-conditions-8 .H6}
##### System Simulator: {#system-simulator-4 .H6}
\- SS (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
##### IUT: {#iut-4 .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
##### Preamble: {#preamble-4 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- UE States at the end of the preamble
\- The UE is in E-UTRA Registered, Idle Mode state.
\- The MCVideo Client Application has been activated and User has registered-
in as the MCVideo User with the Server as active user at the Client.
##### 6.1.1.5.3.2 Test procedure sequence {#test-procedure-sequence-8 .H6}
Table 6.1.1.5.3.2-1: Main Behaviour
+------------+------------+------------+---------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +============+============+============+=========+=========+====+ | | | U - S | Message | | | +------------+------------+------------+---------+---------+----+ | 1 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | the | | | | | | | est | | | | | | | ablishment | | | | | | | of a | | | | | | | emergency | | | | | | | group call | | | | | | | with | | | | | | | implicit | | | | | | | tr | | | | | | | ansmission | | | | | | | request. | | | | | | | | | | | | | | (NOTE 1). | | | | | +------------+------------+------------+---------+---------+----+ | 2 | Check: | - | - | 1, 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | CO session | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3B.1.3-1 | | | | | | | to | | | | | | | establish | | | | | | | an | | | | | | | emergency | | | | | | | group call | | | | | | | with | | | | | | | implicit | | | | | | | tr | | | | | | | ansmission | | | | | | | control | | | | | | | according | | | | | | | to option | | | | | | | b,ii of | | | | | | | NOTE 1 in | | | | | | | TS | | | | | | | 36.579.1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.1.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 3-7 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 8 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | provide | | | | | | | tr | | | | | | | ansmission | | | | | | | granted | | | | | | | no | | | | | | | tification | | | | | | | to the | | | | | | | user? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 9 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | release | | | | | | | the call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 10 | Check: | - | - | 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | tr | | | | | | | ansmission | | | | | | | End | | | | | | | Request | | | | | | | CO\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.7.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 11-13 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 14 | Check: | - | - | 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CO | | | | | | | call | | | | | | | release\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 15 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | NOTE 1: | | | | | | | This is | | | | | | | expected | | | | | | | to be done | | | | | | | via a | | | | | | | suitable | | | | | | | impl | | | | | | | ementation | | | | | | | dependent | | | | | | | MMI. | | | | | | +------------+------------+------------+---------+---------+----+
##### 6.1.1.5.3.3 Specific message contents {#specific-message-contents-8 .H6}
Table 6.1.1.5.3.3-1: SIP INVITE from the UE (Step 2, Table 6.1.1.5.3.2-1;\
Step 2, TS 36.579-1 [2] Table 5.3B.1.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.1-1, condition EMERGENCY-CALL
* * *
Information Element Value/remark Comment Reference Condition **Message Body**  
MIME body part **SDP message**  
MIME-part-body SDP Message as described in Table 6.1.1.5.3.3-1A  
MIME-body-part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.1.1.5.3.3-2
Table 6.1.1.5.3.3-1A: SDP message in SIP INVITE (Table 6.1.1.5.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.1-2, condition
INITIAL_SDP_OFFER, IMPLICIT_GRANT_REQUESTED
* * *
Table 6.1.1.5.3.3-2: MCVideo-Info in SIP INVITE (Table 6.1.1.5.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition GROUP-CALL,
EMERGENCY-CALL, INVITE_REFER
* * *
Table 6.1.1.5.3.3-3: SIP 200 (OK) from the SS (Step 2, Table 6.1.1.5.3.2-1;\
Step 4, TS 36.579-1 [2] Table 5.3B.1.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.17.1.2-1, condition INVITE-RSP
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
SDP Message SDP Message as described in Table 6.1.1.5.3.3-3A
Table 6.1.1.5.3.3-3A: SDP message in SIP 200 (OK) (Table 6.1.1.5.3.3-3)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition SDP_ANSWER,
IMPLICIT_GRANT_REQUESTED
* * *
Table 6.1.1.5.3.3-4: Transmission Granted from the SS (Step 2, Table
6.1.1.5.3.2-1;\ Step 6a1, TS 36.579-1 [2] Table 5.3B.1.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.1-1, condition EMERGENCY-CALL
* * *
Table 6.1.1.5.3.3-5: Transmission Idle from the SS (Step 10, Table
6.1.1.5.3.2-1;\ Step 4, TS 36.579-1 [2] Table 5.3B.7.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.16-1, condition EMERGENCY-
CALL
* * *
Table 6.1.1.5.3.3-6..8: Void
6.1.1.6 On-network / On-demand Pre-arranged Group Call / Emergency Group Call
/ Client Terminated (CT)
##### 6.1.1.6.1 Test Purpose (TP) {#test-purpose-tp-9 .H6}
##### (1) {#section-49 .H6}
**with** { the UE (MCVideo Client) registered and authorised for MCVideo
Service }
ensure that {
**when** { the UE (MCVideo Client) receives a SIP INVITE message from the SS
(MCVideo Server) with an emergency indication for a MCVideo On-demand Pre-
arranged Emergency Group Call }
**then** { the UE (MCVideo Client) displays an indication for the Pre-arranged
MCVideo Emergency Group Call to the MCVideo User **and** responds to the SS
(MCVideo Server) with a SIP 200 (OK) message }
}
##### (2) {#section-50 .H6}
**with** { the UE (MCVideo Client) having an incoming Pre-arranged Emergency
Group Call, with implicit Transmission Control }
ensure that {
**when** { the MCVideo Client) receives a Media Transmission Notification
message from the SS (MCVideo Server) }
**then** {the UE (MCVideo Client) provides media transmission notification to
the MCVideo User **and** sends a Receive Media Request message to the SS
(MCVideo Server) **and** respects the Reception Control imposed by the SS
(MCVideo Server) (Media Transmission Notification, Receive Media Request,
Receive Media Response, Media Reception End Request, Media Reception End
Response) }
##### (3) {#section-51 .H6}
**with** { the UE (MCVideo Client) having sent a Receive Media Request message
}
ensure that {
**when** { the MCVideo Client) receives a Receive Media Response message from
the SS (MCVideo Server) }
**then** {the UE (MCVideo Client) provides receive media success notification
to the MCVideo User }
##### (4) {#section-52 .H6}
**with** { the UE (MCVideo Client) having an ongoing On-demand Pre-arranged
Emergency Group Call, with implicit Transmission Control }
ensure that {
**when** {the MCVideo User requests to terminate the ongoing MCVideo Emergency
Group Call }
**then** { the UE (MCVideo Client) sends a Media Reception End Request message
.
}
}
(5
**with** { the UE (MCVideo Client) having an ongoing On-demand Pre-arranged
Group Call with Automatic Commencement Mode }
ensure that {
**when** { the UE (MCVideo Client) receives a SIP BYE message }
**then** { the UE (MCVideo Client) sends a SIP 200 (OK) message and leaves the
MCVideo session }
}
##### 6.1.1.6.2 Conformance requirements {#conformance-requirements-9 .H6}
References: The conformance requirements covered in the current Test Case are
specified in TS 24.281, clauses 9.2.1.2.1.2, 9.2.1.2.1.6, 6.2.3.1.2, and
6.2.6. The following represents a copy/paste extraction of the requirements
relevant to the test purpose; any references within the copy/paste text should
be understood within the scope of the core spec they have been copied from.
Unless otherwise stated, these are Rel-15 requirements.
[TS 24.281, clause 9.2.1.2.1.2]
In the procedures in this subclause:
1) emergency indication in an incoming SIP INVITE request refers to the
\ element of the application/vnd.3gpp.mcvideo-info+xml MIME
body; and
2) imminent peril indication in an incoming SIP INVITE request refers to the
\ element of the application/vnd.3gpp.mcvideo-info+xml MIME
body.
Upon receipt of an initial SIP INVITE request, the MCVideo client shall follow
the procedures for termination of multimedia sessions in the IM CN subsystem
as specified in 3GPP TS 24.229 [11] with the clarifications below.
The MCVideo client:
1) may reject the SIP INVITE request if either of the following conditions are
met:
a) MCVideo client does not have enough resources to handle the call; or
b) any other reason outside the scope of this specification;
2) if the SIP INVITE request is rejected in step 1), shall respond toward
participating MCVideo function either with appropriate reject code as
specified in 3GPP TS 24.229 [51] and warning texts as specified in subclause
4.4.2 or with SIP 480 (Temporarily unavailable) response not including warning
texts if the user is authorized to restrict the reason for failure and skip
the rest of the steps of this subclause;
NOTE: If the SIP INVITE request contains an emergency indication or imminent
peril indication, the MCVideo client can by means beyond the scope of this
specification choose to accept the request.
3) shall check if a Resource-Priority header field is included in the incoming
SIP INVITE request and may perform further actions outside the scope of this
specification to act upon an included Resource-Priority header field as
specified in 3GPP TS 24.229 [11];
4) if the SIP INVITE request contains an application/vnd.3gpp.mcvideo-info+xml
MIME body with the \ element containing the \
element with the \ element set to a value of \"true\":
a) should display to the MCVideo user an indication that this is a SIP INVITE
request for an MCVideo emergency group call and:
i) should display the MCVideo ID of the originator of the MCVideo emergency
group call contained in the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body;
ii) should display the MCVideo group identity of the group with the emergency
condition contained in the \ element; and
iii) if the \ element is set to \"true\", should display to the
MCVideo user an indication of the MCVideo emergency alert and associated
information;
b) shall set the MCVideo emergency group state to \"MVEG 2: in-progress\";
c) shall set the MCVideo imminent peril group state to \"MVIG 1: no-imminent-
peril\"; and
d) shall set the MCVideo imminent peril group call state to \"MVIGC 1:
imminent-peril-gc-capable\"; otherwise
5) if the SIP INVITE request contains an application/vnd.3gpp.mcvideo-info+xml
MIME body with the \ element containing the \
element with the \ element set to a value of \"true\":
a) should display to the MCVideo user an indication that this is a SIP INVITE
request for an MCVideo imminent peril group call and:
i) should display the MCVideo ID of the originator of the MCVideo imminent
peril group call contained in the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body; and
ii) should display the MCVideo group identity of the group with the imminent
peril condition contained in the \ element; and
b) shall set the MCVideo imminent peril group state to \"MVIG 2: in-
progress\";
6) may display to the MCVideo user the MCVideo ID of the inviting MCVideo
user;
7) shall perform the automatic commencement procedures specified in subclause
6.2.3.1.2 if one of the following conditions are met:
a) SIP INVITE request contains an Answer-Mode header field with the value
\"Auto\" and the MCVideo service setting at the invited MCVideo client for
answering the call is set to automatic commencement mode; or
b) SIP INVITE request contains an Answer-Mode header field with the value
\"Auto\" and the MCVideo service setting at the invited MCVideo client for
answering the call is set to manual commencement mode, yet the invited MCVideo
client allows the call to be answered with automatic commencement mode;
8) shall perform the manual commencement procedures specified in subclause
6.2.3.2.2 if one of the following conditions are met:
a) SIP INVITE request contains an Answer-Mode header field with the value
\"Manual\" and the MCVideo service setting at the invited MCVideo client for
answering the call is to use manual commencement mode; or
b) SIP INVITE request contains an Answer-Mode header field with the value
\"Manual\" and the MCVideo service setting at the invited MCVideo client for
answering the call is set to automatic commencement mode, yet the invited
MCVideo client allows the call to be answered with manual commencement mode;
and
9) when the SIP 200 (OK) response to the SIP INVITE request is sent, may
subscribe to the conference event package as specified in subclause
9.1.3.19.2.1.2.1.6 MCVideo client receives SIP re-INVITE request
This subclause covers both on-demand session.
Upon receipt of a SIP re-INVITE request the MCVideo client:
1) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body with the \ element containing the \ element with the \ element set to a value of \"true\":
a) should display to the MCVideo user the MCVideo ID of the originator of the
MCVideo emergency group call and an indication that this is an MCVideo
emergency group call;
b) if the \ element containing the \ element
contains an \ element set to \"true\", should display to the
MCVideo user an indication of the MCVideo emergency alert and associated
information;
c) shall set the MCVideo emergency group state to \"MVEG 2: in-progress\";
d) shall set the MCVideo imminent peril group state to \"MVIG 1: no-imminent-
peril\"; and
e) shall set the MCVideo imminent peril group call state to \"MVIGC 1:
imminent-peril-gc-capable\";
2) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body with the \ element containing the \ element with the \ element set to a value of
\"true\":
a) should display to the MCVideo user the MCVideo ID of the originator of the
MCVideo imminent peril group call and an indication that this is an MCVideo
imminent peril group call; and
b) shall set the MCVideo imminent peril group state to \"MIG 2: in-progress\";
3) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body with the \ element containing the \ element with the \ element set to a value of \"false\":
a) should display to the MCVideo user the MCVideo ID of the MCVideo user
cancelling the MCVideo emergency group call;
b) if the \ element containing the \ element
contains an \ element set to \"false\":
i) should display to the MCVideo user an indication of the MCVideo emergency
alert cancellation and the MCVideo ID of the MCVideo user cancelling the
MCVideo emergency alert; and
ii) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body including an \ element:
A) should display to the MCVideo user the MCVideo ID contained in the
\ element of the MCVideo user that originated the MCVideo
emergency alert; and
B) if the MCVideo ID contained in the \ element is the MCVideo
ID of the receiving MCVideo user shall set the MCVideo emergency alert state
to \"MVEA 1: no-alert\";
c) shall set the MCVideo emergency group state to \"MVEG 1: no-emergency\";
and
d) if the MCVideo emergency group call state of the group is set to \"MVEGC 3:
emergency-call-granted\", shall set the MCVideo emergency group call state of
the group to \"MVEGC 1: emergency-gc-capable\";
4) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
info+xml MIME body with the \ element containing the \ element with the \ element set to a value of
\"false\":
a) should display to the MCVideo user the MCVideo ID of the MCVideo user
cancelling the MCVideo imminent peril group call and an indication that this
is an MCVideo imminent peril group call;
b) shall set the MCVideo imminent peril group state to \"MVIG 1: no-imminent-
peril\"; and
c) shall set the MCVideo imminent peril group call state to \"MVIGC 1:
imminent-peril-gc-capable\";
5) shall check if a Resource-Priority header field is included in the incoming
SIP re-INVITE request and may perform further actions outside the scope of
this specification to act upon an included Resource-Priority header field as
specified in 3GPP TS 24.229 [11];
6) shall accept the SIP re-INVITE request and generate a SIP 200 (OK) response
according to rules and procedures of 3GPP TS 24.229 [11];
7) shall include the g.3gpp.mcvideo media feature tag in the Contact header
field of the SIP 200 (OK) response;
8) shall include the g.3gpp.icsi-ref media feature tag containing the value of
\"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" in the Contact header field of the
SIP 200 (OK) response;
9) if the SIP re-INVITE request was received within an on-demand session,
shall include an SDP answer in the SIP 200 (OK) response to the SDP offer in
the incoming SIP re-INVITE request according to 3GPP TS 24.229 [11] with the
clarifications given in subclause 6.2.2;
10) shall send the SIP 200 (OK) response towards the MCVideo server according
to rules and procedures of 3GPP TS 24.229 [11]; and
11) shall interact with the media plane as specified in 3GPP TS 24.581 [5].
[TS 24.281, clause 6.2.3.1.2]
When performing the automatic commencement mode procedures, the MCVideo client
shall follow the procedures in subclause 6.2.3.1.1 with the following
clarification:
\- The MCVideo client may include a P-Answer-State header field with the value
\"Confirmed\" as specified in IETF RFC 4964 [30] in the SIP 200 (OK) response.
[TS 24.281, clause 6.2.6]
Upon receiving a SIP BYE request, the MCVideo client:
1) shall interact with the media plane as specified in 3GPP TS 24.581[5]; and
2) shall send SIP 200 (OK) response towards MCVideo server according to 3GPP
TS 24.229 [11].
##### 6.1.1.6.3 Test description {#test-description-9 .H6}
##### 6.1.1.6.3.1 Pre-test conditions {#pre-test-conditions-9 .H6}
##### System Simulator: {#system-simulator-5 .H6}
\- SS (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
##### IUT: {#iut-5 .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
##### Preamble: {#preamble-5 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- UE States at the end of the preamble
\- The UE is in E-UTRA Registered, Idle Mode state.
\- The MCVideo Client Application has been activated and User has registered-
in as the MCVideo User with the Server as active user at the Client.
##### 6.1.1.6.3.2 Test procedure sequence {#test-procedure-sequence-9 .H6}
Table 6.1.1.6.3.2-1: Main Behaviour
+------------+------------+------------+---------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +============+============+============+=========+=========+====+ | | | U - S | Message | | | +------------+------------+------------+---------+---------+----+ | 1 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CT | | | | | | | session | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3.4.3-1 | | | | | | | to | | | | | | | establish | | | | | | | an | | | | | | | emergency | | | | | | | group call | | | | | | | with | | | | | | | automatic | | | | | | | co | | | | | | | mmencement | | | | | | | mode? | | | | | +------------+------------+------------+---------+---------+----+ | 2-4 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 5 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | notify the | | | | | | | user of | | | | | | | the | | | | | | | emergency | | | | | | | group | | | | | | | call? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 6 | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Tr | | | | | | | ansmission | | | | | | | No | | | | | | | tification | | | | | | | and | | | | | | | Request | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.3.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 7-10 | Void | - | - | 2 | P | +------------+------------+------------+---------+---------+----+ | 11 | Check: | - | - | 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | provide | | | | | | | receive | | | | | | | media | | | | | | | success | | | | | | | no | | | | | | | tification | | | | | | | to the | | | | | | | user? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 12 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | end of | | | | | | | r | | | | | | | eception.\ | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 13 | Check: | - | - | 4 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Reception | | | | | | | End | | | | | | | Request | | | | | | | CO\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.8.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 14-15 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 16 | Check: | - | - | 5 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CT | | | | | | | call | | | | | | | release\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3.12.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 17 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | NOTE 1: | | | | | | | This is | | | | | | | expected | | | | | | | to be done | | | | | | | via a | | | | | | | suitable | | | | | | | impl | | | | | | | ementation | | | | | | | dependent | | | | | | | MMI. | | | | | | +------------+------------+------------+---------+---------+----+
##### 6.1.1.6.3.3 Specific message contents {#specific-message-contents-9 .H6}
Table 6.1.1.6.3.3-1: SIP INVITE from the SS (Step 1, Table 6.1.1.6.3.2-1;\
Step 2, TS 36.579-1 [2] Table 5.3.4.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.2-1
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP Message**  
MIME part body SDP Message as described in Table 6.1.1.6.3.3-1A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.1.1.6.3.3-2
Table 6.1.1.6.3.3-1A: SDP in SIP INVITE (Table 6.1.1.6.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition
INITIAL_SDP_OFFER
* * *
Table 6.1.1.6.3.3-2: MCVideo-Info in SIP INVITE (Table 6.1.1.6.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.2-2, condition GROUP-CALL,
EMERGENCY-CALL
* * *
Table 6.1.1.6.3.3-3: SIP 200 (OK) from the UE (Step 1, Table 6.1.1.6.3.2-1;\
Step 4, TS 36.579-1 [2] Table 5.3.4.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.17.1.1-1, condition INVITE-RSP,
GROUP-CALL
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP Message**  
MIME part body SDP Message as described in Table 6.1.1.6.3.3-3A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.1.1.6.3.3-4
Table 6.1.1.6.3.3-3A: SDP in SIP 200 (OK) (Table 6.1.1.6.3.3-3)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.1-2, condition SDP_ANSWER
* * *
Table 6.1.1.6.3.3-4: MCVideo-Info in SIP 200 (OK) (Table 6.1.1.6.3.3-3)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition INVITE-RSP
* * *
Table 6.1.1.6.3.3-4A: Media Transmission Notification from the SS (Step 6,
Table 6.1.1.6.3.2-1;\ Step 1, TS 36.579-1 [2] Table 5.3B.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.7-1, condition EMERGENCY-CALL
* * *
Table 6.1.1.6.3.3-4B..5: Void
Table 6.1.1.6.3.3-5A: Media Reception End Request from the UE (Step 13, Table
6.1.1.6.3.2-1;\ Step 1, TS 36.579-1 [2] Table 5.3B.8.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.3.3-1, condition UPLINK,
EMERGENCY-CALL
* * *
Table 6.1.1.6.3.3-5B: Transmission Idle from the SS (Step 13, Table
6.1.1.6.3.2-1;\ Step 3, TS 36.579-1 [2] Table 5.3B.8.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.16-1, condition EMERGENCY-
CALL
* * *
Table 6.1.1.6.3.3-6..7: Void
6.1.1.7 On-network / On-demand Pre-arranged Group Call / Broadcast Group Call
/ Client Originated (CO)
##### 6.1.1.7.1 Test Purpose (TP) {#test-purpose-tp-10 .H6}
##### (1) {#section-53 .H6}
**with** { the UE (MCVideo Client) registered and authorized for MCVideo
Service }
ensure that {
**when** { the MCVideo User requests the establishment of a MCVideo On-demand
Pre-Arranged Broadcast Group Call }
**then** { the UE (MCVideo Client) requests an On-demand Pre-Arranged
Broadcast Group Call by sending a SIP INVITE message **and** acknowledges the
SIP 200 (OK) message from the SS (MCVideo Server) upon receipt }
}
##### (2) {#section-54 .H6}
**with** { the UE (MCVideo Client) having established an MCVideo On-demand
Pre-arranged Broadcast Group Call with Automatic Commencement Mode }
ensure that {
**when** { the MCVideo User engages in communication with the invited MCVideo
User(s) }
**then** { the UE (MCVideo Client) provides transmission granted notification
to the MCVideo User **and** respects the Transmission Control imposed by the
MCVideo Server }
}
##### (3) {#section-55 .H6}
**with** { the UE (MCVideo Client) having an ongoing On-demand Pre-arranged
Broadcast Group Call}
ensure that {
**when** {the UE (MCVideo User) requests to release to end the permission to
send RTP media }
**then** { the UE (MCVideo Client) sends a Transmission End Request message
**and** acknowledges the Transmission End Response from the SS (MCVideo
Server) **and** sends a SIP BYE message **and** leaves the MCVideo Session }
}
##### 6.1.1.7.2 Conformance requirements {#conformance-requirements-10 .H6}
References: The conformance requirements covered in the current Test Case are
specified in TS 24.281, clauses 6.2.8.2 and 9.2.1.2.1.1; also TS 24.581,
clauses 6.2.4.2.2, 6.2.4.5.3, 6.2.4.6.4. The following represents a copy/paste
extraction of the requirements relevant to the test purpose; any references
within the copy/paste text should be understood within the scope of the core
spec they have been copied from. Unless otherwise stated, these are Rel-15
requirements.
[TS 24.281, clause 6.2.8.2]
NOTE: This subclause is referenced from other procedures.
When the MCVideo user initiates a broadcast group call, the MCVideo client:
> 1) in the case of the prearranged group call is initiated on-demand, shall
> include in the application/vnd.3gpp.mcvideo-info+xml MIME body the
> \ element set to \"true\" as defined in clause F.1; and
>
> 2) in the case the prearranged group call is initiated using a pre-
> established session, shall include in the application/vnd.3gpp.mcvideo-
> info+xml MIME body in the \"body\" URI header field in the Refer-To header
> field the \ element set to \"true\" as defined in clause F.1.
[TS 24.281, clause 9.2.1.2.1.1]
Upon receiving a request from an MCVideo user to establish an MCVideo
prearranged group session the MCVideo client shall generate an initial SIP
INVITE request by following the UE originating session procedures specified in
3GPP TS 24.229 [11], with the clarifications given below.
The MCVideo client:
...
> 3) if the MCVideo user has requested the origination of a broadcast group
> call, the MCVideo client shall comply with the procedures in subclause
> 6.2.8.2;
>
> 4) shall include the g.3gpp.mcvideo media feature tag and the g.3gpp.icsi-
> ref media feature tag with the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" in the Contact header field of the SIP INVITE
> request according to IETF RFC 3840 [22];
>
> 5) shall include an Accept-Contact header field containing the
> g.3gpp.mcvideo media feature tag along with the \"require\" and \"explicit\"
> header field parameters according to IETF RFC 3841 [20];
>
> 6) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
> (coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
> field according to IETF RFC 6050 [14] in the SIP INVITE request;
>
> 7) shall include an Accept-Contact header field with the g.3gpp.icsi-ref
> media feature tag containing the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" along with the \"require\" and \"explicit\"
> header field parameters according to IETF RFC 3841 [20];
>
> 8) should include the \"timer\" option tag in the Supported header field;
>
> 9) should include the Session-Expires header field according to IETF RFC
> 4028 [23]. It is recommended that the \"refresher\" header field parameter
> is omitted. If included, the \"refresher\" header field parameter shall be
> set to \"uac\";
>
> 10) shall set the Request-URI of the SIP INVITE request to the public
> service identity identifying the participating MCVideo function serving the
> MCVideo user;
>
> NOTE 1: The MCVideo client is configured with public service identity
> identifying the participating MCVideo function serving the MCVideo user.
>
> 11) may include a P-Preferred-Identity header field in the SIP INVITE
> request containing a public user identity as specified in 3GPP TS 24.229
> [11];
>
> ...
>
> 14) shall contain in an application/vnd.3gpp.mcvideo-info+xml MIME body with
> the \ element containing the \ element with:
>
> a) the \ element set to a value of \"prearranged\";
>
> b) the \ element set to the group identity;
>
> c) the \ element set to the MCVideo client ID of the
> originating MCVideo client; and
>
> NOTE 2: The MCVideo client does not include the MCVideo ID of the
> originating MCVideo user in the body, as this will be inserted into the body
> of the SIP INVITE request that is sent from the originating participating
> MCVideo function.
>
> d) if the group identity can be determined to be a TGI and if the MCVideo
> client can associate the TGI with a MCVideo group ID, the \ group-id> element set to the MCVideo group ID;
>
> NOTE 3: The text \"can associate the TGI with a MCVideo group ID\" means
> that the MCVideo client is able to determine that there is a constituent
> group of the temporary group that it is a member of.
>
> NOTE 4: The MCVideo client is informed about temporary groups and regrouping
> of MCVideo groups that the user is a member of as specified in 3GPP TS
> 24.481 [24].
>
> NOTE 5: If the MCVideo user selected a TGI where there are several MCVideo
> groups where the MCVideo user is a member, the MCVideo client selects one of
> those MCVideo groups.
>
> 15) shall include an SDP offer according to 3GPP TS 24.229 [11] with the
> clarifications given in subclause 6.2.1;
>
> 16) if an implicit transmission request is required, shall indicate this as
> specified in subclause 6.4; and
>
> 17) shall send the SIP INVITE request towards the MCVideo server according
> to 3GPP TS 24.229 [11].
[TS 24.581, clause 6.2.4.2.2]
When a call is initiated as described in 3GPP TS 24.281 [2], the transmission
participant:
> 1\. shall create an instance of the \'Transmission participant state
> transition diagram for basic transmission control operation\';
>
> 2\. if the originating transmission participant receives a transmission
> control message before it receives the SIP 200 (OK) response, shall store
> the transmission control message;
>
> NOTE: The originating transmission participant might receive a transmission
> control message before the SIP 200 (OK) response when initiating, joining or
> rejoining a call because of processing delays of the SIP 200 (OK) response
> in the SIP core.
>
> 3\. if the established MCVideo call is a chat group call and the SIP INVITE
> request is not an implicit Transmission request, shall enter the \'U: has no
> permission to transmit\' state;
>
> 4\. if for the established MCVideo call the SIP INVITE request is an
> implicit Transmission request:
>
> a. shall start timer T100 (Transmission Request) and initialise counter C100
> (Transmission Request) to 1;
>
> b. shall enter the \'U: pending request to transmit\' state; and
>
> c. if the transmission participant has received and stored a transmission
> control message before the reception of the SIP 200 (OK) response, shall act
> as if the transmission control message was received in the \'U: pending
> request to transmit\' state after entering the \'U: pending request to
> transmit\' state; and
>
> 5\. if the established MCVideo call is a broadcast group call, shall enter
> the \'U: has permission to transmit\' state.
When the transmission participant is rejoining an ongoing MCVideo call as
described in 3GPP TS 24.281 [2] the transmission participant shall enter the
\'U: has no permission to transmit\' state.
[TS 24.581, clause 6.2.4.5.3]
Upon receiving an indication from the user to end the permission to send RTP
media, the transmission participant:
> 1\. shall send a Transmission end request message towards the transmission
> control server. The Transmission end request message, if the session is a
> broadcast call and if the session was established as a normal call, shall
> include the Transmission Indicator with the A-bit set to \'1\' (Normal
> call);
>
> 2\. shall start timer T101 (Transmission End Request) and initialize counter
> C101 (Transmission End Request) to 1; and
>
> 3\. shall enter the \'U: pending end of transmission\' state.
[TS 24.581, clause 6.2.4.6.4]
Upon receiving a Transmission end response message, the transmission
participant:
> 1\. if the first bit in the subtype of the Transmission end response message
> to \'1\' (Acknowledgment is required) as described in subclause 9.2.2.1,
> shall send a Transmission control Ack message. The Transmission control Ack
> message:
>
> a. shall include the Message Type field set to \'1\' (Transmission end
> response); and
>
> b. shall include the Source field set to \'0\' (the transmission participant
> is the source);
>
> 2\. may provide a Transmission end notification to the MCVideo user;
>
> 3\. if the Transmission Indicator field is included and the B-bit set to
> \'1\' (Broadcast group call), shall provide a notification to the user
> indicating the type of call;
>
> 4\. shall stop timer T101 (Transmission End Request);
>
> 5\. if the session is not a broadcast group call or if the A-bit in the
> Transmission Indicator field is set to \'1\' (Normal call), shall enter the
> \'U: has no permission to transmit\' state; and
>
> 6\. if the session was initiated as a broadcast group call:
>
> a. shall indicate to the MCVideo client the media transmission is completed;
> and
>
> b shall enter the \'Call releasing\' state.
##### 6.1.1.7.3 Test description {#test-description-10 .H6}
##### 6.1.1.7.3.1 Pre-test conditions {#pre-test-conditions-10 .H6}
##### System Simulator: {#system-simulator-6 .H6}
\- SS (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
##### IUT: {#iut-6 .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
##### Preamble: {#preamble-6 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- UE States at the end of the preamble
\- The UE is in E-UTRA Registered, Idle Mode state.
\- The MCVideo Client Application has been activated and User has registered-
in as the MCVideo User with the Server as active user at the Client.
##### 6.1.1.7.3.2 Test procedure sequence {#test-procedure-sequence-10 .H6}
Table 6.1.1.7.3.2-1: Main Behaviour
+------------+------------+------------+---------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +============+============+============+=========+=========+====+ | | | U - S | Message | | | +------------+------------+------------+---------+---------+----+ | 1 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | the | | | | | | | est | | | | | | | ablishment | | | | | | | of a | | | | | | | broadcast | | | | | | | group call | | | | | | | with | | | | | | | implicit | | | | | | | tr | | | | | | | ansmission | | | | | | | request. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 2 | Check: | - | - | 1, 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | CO session | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3B.1.3-1 | | | | | | | to | | | | | | | establish | | | | | | | a | | | | | | | broadcast | | | | | | | group call | | | | | | | with | | | | | | | implicit | | | | | | | tr | | | | | | | ansmission | | | | | | | control | | | | | | | according | | | | | | | to option | | | | | | | b,ii of | | | | | | | NOTE 1 in | | | | | | | TS | | | | | | | 36.579.1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.1.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 3-7 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 8 | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | provide | | | | | | | tr | | | | | | | ansmission | | | | | | | granted | | | | | | | no | | | | | | | tification | | | | | | | to the | | | | | | | user? | | | | | | | | | | | | | | (NOTE 1 | | | | | +------------+------------+------------+---------+---------+----+ | 9 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | end of | | | | | | | tra | | | | | | | nsmission. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 10 | Check: | - | - | 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | tr | | | | | | | ansmission | | | | | | | End | | | | | | | Request | | | | | | | CO\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.7.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 11-12 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 12A | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | release | | | | | | | the call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 13 | Check: | - | - | 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CO | | | | | | | call | | | | | | | release\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 14 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | NOTE 1: | | | | | | | This is | | | | | | | expected | | | | | | | to be done | | | | | | | via a | | | | | | | suitable | | | | | | | impl | | | | | | | ementation | | | | | | | dependent | | | | | | | MMI. | | | | | | +------------+------------+------------+---------+---------+----+
##### 6.1.1.7.3.3 Specific message contents {#specific-message-contents-10
.H6}
Table 6.1.1.7.3.3-1: SIP INVITE from the UE (Step 2, Table 6.1.1.7.3.2-1;\
Step 2, TS 36.579-1 [2] Table 5.3B.1.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.1-1
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP message**  
MIME-part-body SDP Message as described in Table 6.1.1.7.3.3-1A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.1.1.7.3.3-2
Table 6.1.1.7.3.3-1A: SDP message in SIP INVITE (Table 6.1.1.7.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.1-2, condition
INITIAL_SDP_OFFER, IMPLICIT_GRANT_REQUESTED
* * *
Table 6.1.1.7.3.3-2: MCVideo-Info in SIP INVITE (Table 6.1.1.7.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition GROUP-CALL,
BROADCAST-CALL, INVITE_REFER
* * *
Table 6.1.1.7.3.3-3: SIP 200 (OK) from the SS (Step 2, Table 6.1.1.7.3.2-1;\
Step 4, TS 36.579-1 [2] Table 5.3B.1.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.17.1.2-1, condition INVITE-RSP
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
SDP Message SDP Message as described in Table 6.1.1.7.3.3-3A
Table 6.1.1.7.3.3-3A: SDP message in SIP 200 (OK) (Table 6.1.1.7.3.3-3)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition SDP_ANSWER,
IMPLICIT_GRANT_REQUESTED
* * *
Table 6.1.1.7.3.3-4: Transmission Granted from the SS (Step 2, Table
6.1.1.7.3.2-1;\ Step 6a1, TS 36.579-1 [2] Table 5.3B.1.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.1-1, condition ACK,
BROADCAST-CALL
* * *
Table 6.1.1.7.3.3-4A: Transmission Idle from the SS (Step 10, Table
6.1.1.7.3.2-1;\ Step 4, TS 36.579-1 [2] Table 5.3B.7.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.16-1, condition BROADCAST-
CALL
* * *
Table 6.1.1.7.3.3-5..7: Void
6.1.1.8 On-network / On-demand Pre-arranged Group Call / Broadcast Group Call
/ Client Terminated (CT)
##### 6.1.1.8.1 Test Purpose (TP) {#test-purpose-tp-11 .H6}
##### (1) {#section-56 .H6}
**with** { the UE (MCVideo Client) registered and authorised for MCVideo
Service }
ensure that {
**when** { the MCVideo Client receives a SIP INVITE message of an MCVideo On-
demand Pre-arranged Broadcast Group Call from the SS (MCVideo Server) }
**then** { the UE (MCVideo Client) responds with a SIP 200 (OK) message }
}
##### (2) {#section-57 .H6}
**with** { the UE (MCVideo Client) having an ongoing On-demand Pre-arranged
Broadcast Group Call, with implicit Reception Control }
ensure that {
**when** { the UE (MCVideo Client) receives a Media Transmission Notification
message from the SS (MCVideo Server) and the MCVideo User requests permission
to receive media }
**then** {the UE (MCVideo Client) sends a Receive Media Request message to the
SS (MCVideo Server) **and** provides receive media success notification to the
MCVideo User and provides a notification to the MCVideo User indicating the
type of call }
}
##### (3) {#section-58 .H6}
**with** { the UE (MCVideo Client) having an ongoing On-demand Pre-arranged
Broadcast Group Call, with implicit Reception Control }
ensure that {
**when** {the UE (MCVideo Client) receives a Media Reception End Request
message }
**then** {UE (MCVideo Client) responds with a Media Reception End Response
message **and** informs the MCVideo User that the receiving RTP media is being
ended and provides a notification to the MCVideo User indicating the type of
call }
}
##### (4) {#section-59 .H6}
**with** { the UE (MCVideo Client) having received a Media Reception End
Request message }
ensure that {
**when** {the UE (MCVideo Client) receives a SIP BYE message }
**then** { the UE (MCVideo Client) responds with a SIP 200 (OK) message and
leaves the call }
}
##### 6.1.1.8.2 Conformance requirements {#conformance-requirements-11 .H6}
References: The conformance requirements covered in the current Test Case are
specified in TS 24.281, clauses 9.2.1.2.1.2, 6.2.6, and 10.2.2.2.2; TS 24.581,
clause 6.2.5.3.3, 6.2.5.3.4, 6.2.5.3.5, and 6.2.5.5.5. The following
represents a copy/paste extraction of the requirements relevant to the test
purpose; any references within the copy/paste text should be understood within
the scope of the core spec they have been copied from. Unless otherwise
stated, these are Rel-15 requirements.
[TS 24.281, clause 9.2.1.2.1.2]
In the procedures in this subclause:
> 1) emergency indication in an incoming SIP INVITE request refers to the
> \ element of the application/vnd.3gpp.mcvideo-info+xml MIME
> body; and
>
> 2) imminent peril indication in an incoming SIP INVITE request refers to the
> \ element of the application/vnd.3gpp.mcvideo-info+xml
> MIME body.
Upon receipt of an initial SIP INVITE request, the MCVideo client shall follow
the procedures for termination of multimedia sessions in the IM CN subsystem
as specified in 3GPP TS 24.229 [11] with the clarifications below.
The MCVideo client:
> 1) may reject the SIP INVITE request if either of the following conditions
> are met:
>
> a) MCVideo client does not have enough resources to handle the call; or
>
> b) any other reason outside the scope of this specification;
>
> 2) if the SIP INVITE request is rejected in step 1), shall respond toward
> participating MCVideo function either with appropriate reject code as
> specified in 3GPP TS 24.229 [51] and warning texts as specified in subclause
> 4.4.2 or with SIP 480 (Temporarily unavailable) response not including
> warning texts if the user is authorised to restrict the reason for failure
> and skip the rest of the steps of this subclause;
>
> NOTE: If the SIP INVITE request contains an emergency indication or imminent
> peril indication, the MCVideo client can by means beyond the scope of this
> specification choose to accept the request.
>
> 3) shall check if a Resource-Priority header field is included in the
> incoming SIP INVITE request and may perform further actions outside the
> scope of this specification to act upon an included Resource-Priority header
> field as specified in 3GPP TS 24.229 [11];
>
> 4) if the SIP INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element containing the \ Params> element with the \ element set to a value of
> \"true\":
>
> a) should display to the MCVideo user an indication that this is a SIP
> INVITE request for an MCVideo emergency group call and:
>
> i) should display the MCVideo ID of the originator of the MCVideo emergency
> group call contained in the \ element of the
> application/vnd.3gpp.mcvideo-info+xml MIME body;
>
> ii) should display the MCVideo group identity of the group with the
> emergency condition contained in the \ element;
> and
>
> iii) if the \ element is set to \"true\", should display to the
> MCVideo user an indication of the MCVideo emergency alert and associated
> information;
>
> b) shall set the MCVideo emergency group state to \"MVEG 2: in-progress\";
>
> c) shall set the MCVideo imminent peril group state to \"MVIG 1: no-
> imminent-peril\"; and
>
> d) shall set the MCVideo imminent peril group call state to \"MVIGC 1:
> imminent-peril-gc-capable\"; otherwise
>
> 5) if the SIP INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element containing the \ Params> element with the \ element set to a value of
> \"true\":
>
> a) should display to the MCVideo user an indication that this is a SIP
> INVITE request for an MCVideo imminent peril group call and:
>
> i) should display the MCVideo ID of the originator of the MCVideo imminent
> peril group call contained in the \ element of the
> application/vnd.3gpp.mcvideo-info+xml MIME body; and
>
> ii) should display the MCVideo group identity of the group with the imminent
> peril condition contained in the \ element; and
>
> b) shall set the MCVideo imminent peril group state to \"MVIG 2: in-
> progress\";
>
> 6) may display to the MCVideo user the MCVideo ID of the inviting MCVideo
> user;
>
> 7) shall perform the automatic commencement procedures specified in
> subclause 6.2.3.1.2 if one of the following conditions are met:
>
> a) SIP INVITE request contains an Answer-Mode header field with the value
> \"Auto\" and the MCVideo service setting at the invited MCVideo client for
> answering the call is set to automatic commencement mode; or
>
> b) SIP INVITE request contains an Answer-Mode header field with the value
> \"Auto\" and the MCVideo service setting at the invited MCVideo client for
> answering the call is set to manual commencement mode, yet the invited
> MCVideo client allows the call to be answered with automatic commencement
> mode;
>
> 8) shall perform the manual commencement procedures specified in subclause
> 6.2.3.2.2 if one of the following conditions are met:
>
> a) SIP INVITE request contains an Answer-Mode header field with the value
> \"Manual\" and the MCVideo service setting at the invited MCVideo client for
> answering the call is to use manual commencement mode; or
>
> b) SIP INVITE request contains an Answer-Mode header field with the value
> \"Manual\" and the MCVideo service setting at the invited MCVideo client for
> answering the call is set to automatic commencement mode, yet the invited
> MCVideo client allows the call to be answered with manual commencement mode;
> and
>
> 9) when the SIP 200 (OK) response to the SIP INVITE request is sent, may
> subscribe to the conference event package as specified in subclause 9.1.3.1.
[TS 24.281, clause 6.2.6]
Upon receiving a SIP BYE request, the MCVideo client:
> 1) shall interact with the media plane as specified in 3GPP TS 24.581[5];
> and
>
> 2) shall send SIP 200 (OK) response towards MCVideo server according to 3GPP
> TS 24.229 [11].
[TS 24.281, clause 10.2.2.2.2]
Upon receipt of an initial SIP INVITE request, the MCVideo client shall follow
the procedures for termination of multimedia sessions in the IM CN subsystem
as specified in 3GPP TS 24.229 [11] with the clarifications below.
The MCVideo client:
> 1) may reject the SIP INVITE request if any of the following conditions are
> met:
>
> a) MCVideo client is already occupied in another session and the number of
> simultaneous sessions exceeds \, the maximum simultaneous MCVideo
> session for private call, as specified in TS 24.484 [25];
>
> b) MCVideo client does not have enough resources to handle the call; or
>
> c) any other reason outside the scope of this specification;
otherwise, continue with the rest of the steps.
> NOTE 1: If the SIP INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element set to a value of
> \"true\", the participating MCVideo function can choose to accept the
> request.
>
> 2) if the SIP INVITE request is rejected in step 1), shall respond toward
> participating MCVideo function either with appropriate reject code as
> specified in 3GPP TS 24.229 [11] and warning texts as specified in subclause
> 4.4.2 or with SIP 480 (Temporarily unavailable) response not including
> warning texts if the user is authorised to restrict the reason for failure
> according to \ as specified in 3GPP TS 24.484
> [25] and skip the rest of the steps of this subclause;
>
> 3) if the SIP INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element containing the \ Params> element with the \ element set to a value of
> \"true\":
>
> a) should display to the MCVideo user an indication that this is a SIP
> INVITE request for an MCVideo emergency private call and:
>
> i) should display the MCVideo ID of the originator of the MCVideo emergency
> private call contained in the \ element of the
> application/vnd.3gpp.mcvideo-info+xml MIME body; and
>
> ii) if the \ element is set to \"true\", should display to the
> MCVideo user an indication of the MCVideo emergency alert and associated
> information; and
>
> b) shall set the MCVideo emergency private priority state to \"MVEPP 2: in-
> progress\" for this private call;
>
> 4) if the SDP offer of the SIP INVITE request contains an \"a=key-mgmt\"
> attribute field with a \"mikey\" attribute value containing a MIKEY-SAKKE
> I_MESSAGE:
>
> a) shall extract the MCVideo ID of the originating MCVideo client from the
> initiator field (IDRi) of the I_MESSAGE as described in 3GPP TS 33.180 [8];
>
> b) shall convert the MCVideo ID to a UID as described in 3GPP TS 33.180 [8];
>
> c) shall use the UID to validate the signature of the MIKEY-SAKKE I_MESSAGE
> as described in 3GPP TS 33.180 [8];
>
> d) if authentication verification of the MIKEY-SAKKE I_MESSAGE fails, shall
> reject the SIP INVITE request with a SIP 488 (Not Acceptable Here) response
> as specified in IETF RFC 4567 [34], and include warning text set to \"136
> authentication of the MIKEY-SAKE I_MESSAGE failed\" in a Warning header
> field as specified in subclause 4.4; and
>
> e) if the signature of the MIKEY-SAKKE I_MESSAGE was successfully validated:
>
> i) shall extract and decrypt the encapsulated PCK using the terminating
> user\'s (KMS provisioned) UID key as described in 3GPP TS 33.180 [8]; and
>
> ii) shall extract the PCK-ID, from the payload as specified in 3GPP TS
> 33.180 [8];
>
> NOTE 2: With the PCK successfully shared between the originating MCVideo
> client and the terminating MCVideo client, both clients are able to use
> SRTP/SRTCP to create an end-to-end secure session.
>
> 5) may check if a Resource-Priority header field is included in the incoming
> SIP INVITE request and may perform further actions outside the scope of this
> specification to act upon an included Resource-Priority header field as
> specified in 3GPP TS 24.229 [11];
>
> 6) may display to the MCVideo user the MCVideo ID of the inviting MCVideo
> user;
>
> 7) shall perform the automatic commencement procedures specified in
> subclause 6.2.3.1.1 if one of the following conditions are met:
>
> a) SIP INVITE request contains an Answer-Mode header field with the value
> \"Auto\" and the MCVideo service setting at the invited MCVideo client for
> answering the call is set to automatic commencement mode;
>
> b) SIP INVITE request contains an Answer-Mode header field with the value
> \"Auto\" and the MCVideo service setting at the invited MCVideo client for
> answering the call is set to manual commencement mode, yet the invited
> MCVideo client is willing to answer the call with automatic commencement
> mode; or
>
> c) SIP INVITE request contains a Priv-Answer-Mode header field with the
> value of \"Auto\"; and
>
> 8) shall perform the manual commencement procedures specified in subclause
> 6.2.3.2.1 if either of the following conditions are met:
>
> a) SIP INVITE request contains an Answer-Mode header field with the value
> \"Manual\" and the MCVideo service setting at the invited MCVideo client for
> answering the call is set to manual commencement mode;
>
> b) SIP INVITE request contains an Answer-Mode header field with the value
> \"Manual\" and the MCVideo service setting at the invited MCVideo client for
> answering the call is set to automatic commencement mode, yet the invited
> MCVideo client allows the call to be answered with manual commencement mode;
> or
>
> c) SIP INVITE request contains a Priv-Answer-Mode header field with the
> value of \"Manual\".
Upon receiving the SIP CANCEL request cancelling a SIP INVITE request for
which a dialog exists at the MCVideo client and a SIP 200 (OK) response has
not yet been sent to the SIP INVITE request then the MCVideo client:
> 1) shall send a SIP 200 (OK) response to the SIP CANCEL request according to
> 3GPP TS 24.229 [11]; and
>
> 2) shall send a SIP 487 (Request Terminated) response to the SIP INVITE
> request according to 3GPP TS 24.229 [11].
Upon receiving a SIP BYE request for an established dialog, the MCVideo
client:
> shall follow the procedures in subclause 10.2.5.2.
[TS 24.581, clause 6.2.5.3.3]
Upon receiving an indication from the user to request permission to receive
media, the transmission participant:
> 1\. shall send the Receive Media Request message toward the transmission
> control server; The Receive Media Request message:
>
> a. if a different priority than the normal priority is required, shall
> include the Reception Priority field with the priority not higher than
> negotiated with the transmission control server as specified in subclause
> 14.3.3; and
>
> b. if the receive media request is a broadcast group call, system call,
> emergency call or an imminent peril call, shall include a Transmission
> Indicator field indicating the relevant call types;
>
> 2\. shall create an instance of the \'Transmission participant state
> transition diagram for basic reception control operation\';
>
> 3\. shall map the stored User ID and the SSRC of the user transmitting the
> media with instance of \'Transmission participant state transition diagram
> for basic reception control operation\' created in step 2; and
>
> 4\. shall remain in the \'U: reception controller\' state.
[TS 24.581, clause 6.2.5.3.4]
Upon receiving a Transmission end notify message, the transmission
participant:
> 1\. shall inform the user about the media transmission ended by another
> user; and
>
> 2\. shall remain in the \'U: reception controller\' state.
[TS 24.581, clause 6.2.5.3.5]
Upon receiving an MCVideo call release step 1 request from the application and
signalling plane when the MCVideo call is going to be released or when the
transmission participant is leaving the MCVideo call, the transmission
participant:
> 1\. shall stop receiving reception control messages;
>
> 2\. shall request the MCVideo client to stop receiving RTP media packets;
> and
>
> 3\. shall enter the \'Call releasing\' state.
[TS 24.581, clause 6.2.5.5.5]
Upon receiving a Media reception end request message, the transmission
participant:
> 1\. if the first bit in the subtype of the Media reception end request
> message set to \"1\" (Acknowledgment is required) as described in subclause
> 8.3.2, shall send a Reception control Ack message. The Reception control Ack
> message:
>
> a. shall include the Message Type field set to \'2\' (Media reception end
> request);
>
> b. shall include the Source field set to \'0\' (the transmission participant
> is the source); and
>
> c. shall include the Message Name field set to MCV2.
>
> 2\. shall inform the user that the receiving RTP media is being ended;
>
> 3\. may give information to the user about the reason for ending the
> received RTP media;
>
> 4\. shall request the MCVideo client to discard any remaining buffered RTP
> media packets and stop displaying to user;
>
> 5\. shall send a Media reception end response message towards the
> transmission control server;
>
> 6\. may provide a Media reception end notification to the MCVideo user;
>
> 7\. if the Receive Media Indicator field is included and the B-bit set to
> \'1\' (Broadcast group call), shall provide a notification to the user
> indicating the type of call; and
>
> 8\. shall enter the \'terminated\' state.
##### 6.1.1.8.3 Test description {#test-description-11 .H6}
##### 6.1.1.8.3.1 Pre-test conditions {#pre-test-conditions-11 .H6}
##### System Simulator: {#system-simulator-7 .H6}
\- SS (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
##### IUT: {#iut-7 .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
##### Preamble: {#preamble-7 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- UE States at the end of the preamble
\- The UE is in E-UTRA Registered, Idle Mode state.
\- The MCVideo Client Application has been activated and User has registered-
in as the MCVideo User with the Server as active user at the Client.
##### 6.1.1.8.3.2 Test procedure sequence {#test-procedure-sequence-11 .H6}
Table 6.1.1.8.3.2-1: Main Behaviour
+------------+------------+------------+---------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +============+============+============+=========+=========+====+ | | | U - S | Message | | | +------------+------------+------------+---------+---------+----+ | 1 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CT | | | | | | | session | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3.4.3-1 | | | | | | | to | | | | | | | establish | | | | | | | a | | | | | | | broadcast | | | | | | | group | | | | | | | call? | | | | | +------------+------------+------------+---------+---------+----+ | 2-4 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 5 | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Tr | | | | | | | ansmission | | | | | | | No | | | | | | | tification | | | | | | | and | | | | | | | Request | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.3.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 6-8 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 9 | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | provide | | | | | | | receive | | | | | | | media | | | | | | | success | | | | | | | no | | | | | | | tification | | | | | | | and the | | | | | | | type of | | | | | | | call to | | | | | | | the user? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 10 | Check: | - | - | 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Reception | | | | | | | End | | | | | | | Request | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5. | | | | | | | 3B.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 11-12 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 13 | Check: | - | - | 4 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CT | | | | | | | call | | | | | | | release\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3.12.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 14 | Void | - | - | 4 | P | +------------+------------+------------+---------+---------+----+ | NOTE 1: | | | | | | | This is | | | | | | | expected | | | | | | | to be done | | | | | | | via a | | | | | | | suitable | | | | | | | impl | | | | | | | ementation | | | | | | | dependent | | | | | | | MMI. | | | | | | +------------+------------+------------+---------+---------+----+
##### 6.1.1.8.3.3 Specific message contents {#specific-message-contents-11
.H6}
Table 6.1.1.8.3.3-1: SIP INVITE from the SS (Step 1, Table 6.1.1.8.3.2-1;\
Step 2, TS 36.579-1 [2] Table 5.3.4.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.2-1
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP Message**  
MIME part body SDP Message as described in Table 6.1.1.8.3.3-1A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.1.1.8.3.3-2
Table 6.1.1.8.3.3-1A: SDP in SIP INVITE (Table 6.1.1.8.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition
INITIAL_SDP_OFFER
* * *
Table 6.1.1.8.3.3-2: MCVideo-Info in SIP INVITE (Table 6.1.1.8.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.2-2, condition GROUP-CALL,
BROADCAST-CALL
* * *
Table 6.1.1.8.3.3-3: SIP 200 (OK) from the UE (Step 1, Table 6.1.1.8.3.2-1;\
Step 4, TS 36.579-1 [2] Table 5.3.4.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.17.1.1-1, condition INVITE-RSP
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP Message**  
MIME part body SDP Message as described in Table 6.1.1.8.3.3-3A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.1.1.8.3.3-4
Table 6.1.1.8.3.3-3A: SDP in SIP 200 (OK) (Table 6.1.1.8.3.3-3)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.1-2, condition SDP_ANSWER
* * *
Table 6.1.1.8.3.3-4: MCVideo-Info in SIP 200(OK) (Table 6.1.1.8.3.3-3)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition INVITE-RSP
* * *
Table 6.1.1.8.3.3-4A: Media Transmission Notification from the SS (Step 5,
Table 6.1.1.8.3.2-1;\ Step 1, TS 36.579-1 [2] Table 5.3B.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.7-1, condition BROADCAST-CALL
* * *
Table 6.1.1.8.3.3-5..6: Void
Table 6.1.1.8.3.3-7: Media Reception End Request from the SS (Step 10, Table
6.1.1.8.3.2-1;\ Step 1, TS 36.579-1 [2] Table 5.3B.10.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.3.3-1, condition DOWNLINK,
BROADCAST-CALL
* * *
Table 6.1.1.8.3.3-7A: Transmission Idle from the SS (Step 10, Table
6.1.1.8.3.2-1;\ Step 4, TS 36.579-1 [2] Table 5.3B.10.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.16-1, condition BROADCAST-
CALL
* * *
Table 6.1.1.8.3.3-8..9: Void
6.1.1.9 On-network / On-demand Pre-arranged Group Call / Broadcast Group Call
with Temporary Group / Client Originated (CO)
##### 6.1.1.9.1 Test Purpose (TP) {#test-purpose-tp-12 .H6}
##### (1) {#section-60 .H6}
**with** { the UE (MCVideo Client) registered and authorised for MCVideo
Service }
ensure that {
**when** { the MCVideo User requests the establishment of a MCVideo On-demand
Pre-arranged Broadcast Group Call with a Temporary Group }
**then** { the UE (MCVideo Client) requests On-demand Pre-arranged Broadcast
Group Call by sending a SIP INVITE message and responds to a SIP 200 (OK)
message with a SIP ACK message }
}
##### (2) {#section-61 .H6}
**with** { the UE (MCVideo Client) having an ongoing On-demand Pre-arranged
Broadcast Group Call }
ensure that {
**when** { the MCVideo User requests to terminate the ongoing MCVideo
Broadcast Group Call before the Broadcast has been completed }
**then** { the UE (MCVideo Client) sends a SIP BYE request and leaves the
MCVideo Session }
}
##### 6.1.1.9.2 Conformance requirements {#conformance-requirements-12 .H6}
References: The conformance requirements covered in the current Test Case are
specified in TS 24.281, clauses 9.2.1.2.1.1, 6.2.8.2, 6.2.4.1; also, TS
24.481, clause 6.3.14. The following represents a copy/paste extraction of the
requirements relevant to the test purpose; any references within the
copy/paste text should be understood within the scope of the core spec they
have been copied from. Unless otherwise stated, these are Rel-15 requirements.
[TS 24.281, clause 9.2.1.2.1.1]
Upon receiving a request from an MCVideo user to establish an MCVideo
prearranged group session the MCVideo client shall generate an initial SIP
INVITE request by following the UE originating session procedures specified in
3GPP TS 24.229 [11], with the clarifications given below.
The MCVideo client:
...
> 3) if the MCVideo user has requested the origination of a broadcast group
> call, the MCVideo client shall comply with the procedures in subclause
> 6.2.8.2;
>
> 4) shall include the g.3gpp.mcvideo media feature tag and the g.3gpp.icsi-
> ref media feature tag with the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" in the Contact header field of the SIP INVITE
> request according to IETF RFC 3840 [22];
>
> 5) shall include an Accept-Contact header field containing the
> g.3gpp.mcvideo media feature tag along with the \"require\" and \"explicit\"
> header field parameters according to IETF RFC 3841 [20];
>
> 6) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
> (coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
> field according to IETF RFC 6050 [14] in the SIP INVITE request;
>
> 7) shall include an Accept-Contact header field with the g.3gpp.icsi-ref
> media feature tag containing the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" along with the \"require\" and \"explicit\"
> header field parameters according to IETF RFC 3841 [20];
>
> 8) should include the \"timer\" option tag in the Supported header field;
>
> 9) should include the Session-Expires header field according to IETF RFC
> 4028 [23]. It is recommended that the \"refresher\" header field parameter
> is omitted. If included, the \"refresher\" header field parameter shall be
> set to \"uac\";
>
> 10) shall set the Request-URI of the SIP INVITE request to the public
> service identity identifying the participating MCVideo function serving the
> MCVideo user;
>
> NOTE 1: The MCVideo client is configured with public service identity
> identifying the participating MCVideo function serving the MCVideo user.
>
> 11) may include a P-Preferred-Identity header field in the SIP INVITE
> request containing a public user identity as specified in 3GPP TS 24.229
> [11];
>
> ...
>
> 14) shall contain in an application/vnd.3gpp.mcvideo-info+xml MIME body with
> the \ element containing the \ element with:
>
> a) the \ element set to a value of \"prearranged\";
>
> b) the \ element set to the group identity;
>
> c) the \ element set to the MCVideo client ID of the
> originating MCVideo client; and
>
> NOTE 2: The MCVideo client does not include the MCVideo ID of the
> originating MCVideo user in the body, as this will be inserted into the body
> of the SIP INVITE request that is sent from the originating participating
> MCVideo function.
>
> d) if the group identity can be determined to be a TGI and if the MCVideo
> client can associate the TGI with a MCVideo group ID, the \ group-id> element set to the MCVideo group ID;
>
> NOTE 3: The text \"can associate the TGI with a MCVideo group ID\" means
> that the MCVideo client is able to determine that there is a constituent
> group of the temporary group that it is a member of.
>
> NOTE 4: The MCVideo client is informed about temporary groups and regouping
> of MCVideo groups that the user is a member of as specified in 3GPP TS
> 24.481 [24].
>
> NOTE 5: If the MCVideo user selected a TGI where there are several MCVideo
> groups where the MCVideo user is a member, the MCVideo client selects one of
> those MCVideo groups.
>
> 15) shall include an SDP offer according to 3GPP TS 24.229 [11] with the
> clarifications given in subclause 6.2.1;
>
> 16) if an implicit transmission request is required, shall indicate this as
> specified in subclause 6.4; and
>
> 17) shall send the SIP INVITE request towards the MCVideo server according
> to 3GPP TS 24.229 [11].
[TS 24.281, clause 6.2.8.2]
> NOTE: This subclause is referenced from other procedures.
When the MCVideo user initiates a broadcast group call, the MCVideo client:
> 1) in the case of the prearranged group call is initiated on-demand, shall
> include in the application/vnd.3gpp.mcvideo-info+xml MIME body the
> \ element set to \"true\" as defined in clause F.1; and
>
> 2) in the case the prearranged group call is initiated using a pre-
> established session, shall include in the application/vnd.3gpp.mcvideo-
> info+xml MIME body in the \"body\" URI header field in the Refer-To header
> field the \ element set to \"true\" as defined in clause F.1.
[TS 24.281, clause 6.2.4.1]
Upon receiving a request from an MCVideo user to leave an MCVideo session
established using on-demand session signalling, the MCVideo client:
> 1) shall interact with the media plane as specified in 3GPP TS 24.581 [5];
>
> 2) shall generate a SIP BYE request according to 3GPP TS 24.229 [11];
>
> 3) shall set the Request-URI to the MCVideo session identity to leave; and
>
> 4) shall send a SIP BYE request towards MCVideo server according to 3GPP TS
> 24.229 [11].
Upon receiving a SIP 200 (OK) response to the SIP BYE request, the MCVideo
client shall interact with the media plane as specified in 3GPP TS 24.581 [5].
[TS 24.481, clause 6.3.14]
In order to form a temporary MCS group, a GMC shall send a HTTP POST request
according to procedures specified in IETF RFC 2616 [21] and subclause 6.2.3.
In the HTTP POST request, the GMC:
> a) shall set the Request-URI to an XCAP URI:
>
> 1) in users tree where the XUI is set to a group creation XUI configuration
> parameter; and
>
> 2) with the document selector identifying the temporary MCS group to be
> created; and
>
> b) shall include an application/vnd.3gpp.GMOP+xml MIME body containing a
> GMOP document requesting group regroup creation specified in subclause
> 7.3.4.3, with a \ element containing a group document for an MCS
> group. In the group document, the GMC shall include the \ temporary> element according to subclause 7.2. In the \ temporary> element, the GMC shall include \
> element according to subclause 7.2. In the \
> element, the GMC shall include one \ element
> according to subclause 7.2 for each MCS group to be combined.
Upon reception of an HTTP 2xx response to the sent HTTP POST request, the GMC
shall consider the temporary MCS group formation as successful.
Upon reception of an HTTP 409 (Conflict) response with at least one \ element in the \ error element, the GMC may repeat
procedures of the present subclause and identify the temporary MCS group being
formed with an MCS Group ID indicated in an \ element.
##### 6.1.1.9.3 Test description {#test-description-12 .H6}
##### 6.1.1.9.3.1 Pre-test conditions {#pre-test-conditions-12 .H6}
##### System Simulator: {#system-simulator-8 .H6}
\- SS (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
##### IUT: {#iut-8 .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
##### Preamble: {#preamble-8 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- An MCVideo temporary group T has been created by performing procedure \'MCX
NW initiated temporary group creation\' as specified in TS 36.579-1 [2] clause
5.3.22.
\- UE States at the end of the preamble
\- The UE is in E-UTRA Registered, Idle Mode state.
\- The MCVideo Client Application has been activated and User has registered-
in as the MCVideo User with the Server as active user at the Client.
##### 6.1.1.9.3.2 Test procedure sequence {#test-procedure-sequence-12 .H6}
Table 6.1.1.9.3.2-1: Main Behaviour
+------------+------------+------------+---------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +============+============+============+=========+=========+====+ | | | U - S | Message | | | +------------+------------+------------+---------+---------+----+ | 1 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | the | | | | | | | est | | | | | | | ablishment | | | | | | | of a | | | | | | | broadcast | | | | | | | group call | | | | | | | for the | | | | | | | selected | | | | | | | MCVideo | | | | | | | temporary | | | | | | | group | | | | | | | group T | | | | | | | with | | | | | | | implicit | | | | | | | tr | | | | | | | ansmission | | | | | | | request. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 2 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | CO session | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3B.1.3-1 | | | | | | | to | | | | | | | establish | | | | | | | a | | | | | | | broadcast | | | | | | | group call | | | | | | | with the | | | | | | | temporary | | | | | | | group and | | | | | | | with | | | | | | | implicit | | | | | | | tr | | | | | | | ansmission | | | | | | | control | | | | | | | according | | | | | | | to option | | | | | | | b,iii of | | | | | | | NOTE 1 in | | | | | | | TS | | | | | | | 36.579.1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.1.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 3-5 | Void | - | - | 1 | P | +------------+------------+------------+---------+---------+----+ | 6 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | release | | | | | | | the call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 7 | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CO | | | | | | | call | | | | | | | release\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3.10.3-1 | | | | | | | before the | | | | | | | broadcast | | | | | | | has been | | | | | | | completed? | | | | | +------------+------------+------------+---------+---------+----+ | 8 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | NOTE 1: | | | | | | | This is | | | | | | | expected | | | | | | | to be done | | | | | | | via a | | | | | | | suitable | | | | | | | impl | | | | | | | ementation | | | | | | | dependent | | | | | | | MMI. | | | | | | +------------+------------+------------+---------+---------+----+
##### 6.1.1.9.3.3 Specific message contents {#specific-message-contents-12
.H6}
Table 6.1.1.9.3.3-1: SIP INVITE from the UE (Step 2, Table 6.1.1.9.3.2-1;\
Step 2, TS 36.579-1 [2] Table 5.3B.1.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.1-1
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP message**  
MIME-part-body SDP Message as described in Table 6.1.1.9.3.3-1A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.1.1.9.3.3-2
Table 6.1.1.9.3.3-1A: SDP message in SIP INVITE (Table 6.1.1.9.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.1-2, condition
INITIAL_SDP_OFFER, IMPLICIT_GRANT_REQUESTED
* * *
Table 6.1.1.9.3.3-2: MCVideo-Info in SIP INVITE (Table 6.1.1.9.3.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition GROUP-CALL,
BROADCAST-CALL, INVITE_REFER
* * *
Information Element Value/remark Comment Reference Condition mcvideoinfo  
mcvideo-Params  
mcvideo-request-uri px_MCVideo_Group_T_ID  
associated-group-id px_MCVideo_Group_A_ID
Table 6.1.1.9.3.3-3: SIP 200 (OK) from the SS (Step 2, Table 6.1.1.9.3.2-1;\
Step 4, TS 36.579-1 [2] Table 5.3B.1.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.17.1.2.-1, condition INVITE-RSP
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
SDP Message SDP Message as described in Table 6.1.1.9.3.3-3A
Table 6.1.1.9.3.3-3A: SDP message in SIP 200 (OK) (Table 6.1.1.9.3.3-3)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition SDP_ANSWER
* * *
Table 6.1.1.9.3.3-4..6: Void
6.1.1.10 On-network / On-demand Pre-arranged Group Call / Imminent Peril Group
Call / Client Originated (CO)
##### 6.1.1.10.1 Test Purpose (TP) {#test-purpose-tp-13 .H6}
##### (1) {#section-62 .H6}
**with** { the UE (MCVideo Client) registered and authorised for MCVideo
Service }
ensure that {
**when** { the MCVideo User requests the establishment of an MCVideo On-demand
Pre-arranged Imminent Peril Group Call }
**then** { the UE (MCVideo Client) sends a SIP INVITE message to setup the
Imminent Peril Group Call }
}
##### (2) {#section-63 .H6}
**with** { the UE (MCVideo Client) having established an MCVideo On-demand
Pre-arranged Imminent Peril Group Call }
ensure that {
**when** { the MCVideo User receives a Transmission Granted message ) }
**then** { the UE (MCVideo Client) responds with a Transmission Control Ack
message **and** provides Transmission granted notification to the MCVideo User
**and** respects Transmission Control (Transmission Granted, Transmission
Control ACK, Transmission End Request, Transmission Control Response) }
}
##### (3) {#section-64 .H6}
**with** { the UE (MCVideo Client) having an ongoing MCVideo On-demand Pre-
arranged Imminent Peril Group Call }
ensure that {
**when** { the MCVideo User requests to release Transmission control }
**then** { the UE (MCVideo Client) sends a Transmission End Request message
and then responds to the Transmission End Response message with a Transmission
Control ACK message }
}
##### (4) {#section-65 .H6}
**with** { the UE (MCVideo Client) having released Transmission control }
ensure that {
**when** { the MCVideo User requests to terminate the On-demand Pre-arranged
Imminent Peril Group Call }
**then** { the UE (MCVideo Client) sends a SIP BYE request and leaves the
MCVideo Session }
}
##### 6.1.1.10.2 Conformance requirements {#conformance-requirements-13 .H6}
References: The conformance requirements covered in the current Test Caseare
specified in TS 24.281, clauses 9.2.1.2.1.1 and 6.2.8.1.9; TS 24.581 clauses
6.2.4.2.2, 6.2.4.4.6, 6.2.4.5.3, 6.2.4.6.4. The following represents a
copy/paste extraction of the requirements relevant to the test purpose; any
references within the copy/paste text should be understood within the scope of
the core spec they have been copied from. Unless otherwise stated, these are
Rel-15 requirements.
[TS 24.281, clause 9.2.1.2.1.1]
Upon receiving a request from an MCVideo user to establish an MCVideo
prearranged group session the MCVideo client shall generate an initial SIP
INVITE request by following the UE originating session procedures specified in
3GPP TS 24.229 [11], with the clarifications given below.
The MCVideo client:
> 1) if the MCVideo user has requested the origination of an MCVideo emergency
> group call or is originating an MCVideo prearranged group call and the
> MCVideo emergency state is already set, the MCVideo client shall comply with
> the procedures in subclause 6.2.8.1.1;
>
> 2) if the MCVideo user has requested the origination of an MCVideo imminent
> peril group call, the MCVideo client shall comply with the procedures in
> subclause 6.2.8.1.9;
>
> 3) if the MCVideo user has requested the origination of a broadcast group
> call, the MCVideo client shall comply with the procedures in subclause
> 6.2.8.2;
>
> 4) shall include the g.3gpp.mcvideo media feature tag and the g.3gpp.icsi-
> ref media feature tag with the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" in the Contact header field of the SIP INVITE
> request according to IETF RFC 3840 [22];
>
> 5) shall include an Accept-Contact header field containing the
> g.3gpp.mcvideo media feature tag along with the \"require\" and \"explicit\"
> header field parameters according to IETF RFC 3841 [20];
>
> 6) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
> (coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
> field according to IETF RFC 6050 [14] in the SIP INVITE request;
>
> 7) shall include an Accept-Contact header field with the g.3gpp.icsi-ref
> media feature tag containing the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" along with the \"require\" and \"explicit\"
> header field parameters according to IETF RFC 3841 [20];
>
> 8) should include the \"timer\" option tag in the Supported header field;
>
> 9) should include the Session-Expires header field according to IETF RFC
> 4028 [23]. It is recommended that the \"refresher\" header field parameter
> is omitted. If included, the \"refresher\" header field parameter shall be
> set to \"uac\";
>
> 10) shall set the Request-URI of the SIP INVITE request to the public
> service identity identifying the participating MCVideo function serving the
> MCVideo user;
>
> NOTE 1: The MCVideo client is configured with public service identity
> identifying the participating MCVideo function serving the MCVideo user.
>
> 11) may include a P-Preferred-Identity header field in the SIP INVITE
> request containing a public user identity as specified in 3GPP TS 24.229
> [11];
>
> 12) if the MCVideo emergency state is already set or the MCVideo client
> emergency group state for this group is set to \"MVEG 2: in-progress\", the
> MCVideo client shall include the Resource-Priority header field and comply
> with the procedures in subclause 6.2.8.1.2;
>
> 13) if the MCVideo client imminent peril group state for this group is set
> to \"MVIG 2: in-progress\" or \"MVIG 4: confirm-pending\" shall include the
> Resource-Priority header field and comply with the procedures in subclause
> 6.2.8.1.12;
>
> 14) shall contain in an application/vnd.3gpp.mcvideo-info+xml MIME body with
> the \ element containing the \ element with:
>
> a) the \ element set to a value of \"prearranged\";
>
> b) the \ element set to the group identity;
>
> c) the \ element set to the MCVideo client ID of the
> originating MCVideo client; and
>
> NOTE 2: The MCVideo client does not include the MCVideo ID of the
> originating MCVideo user in the body, as this will be inserted into the body
> of the SIP INVITE request that is sent from the originating participating
> MCVideo function.
>
> d) if the group identity can be determined to be a TGI and if the MCVideo
> client can associate the TGI with a MCVideo group ID, the \ group-id> element set to the MCVideo group ID;
>
> NOTE 3: The text \"can associate the TGI with a MCVideo group ID\" means
> that the MCVideo client is able to determine that there is a constituent
> group of the temporary group that it is a member of.
>
> NOTE 4: The MCVideo client is informed about temporary groups and regrouping
> of MCVideo groups that the user is a member of as specified in 3GPP TS
> 24.481 [24].
>
> NOTE 5: If the MCVideo user selected a TGI where there are several MCVideo
> groups where the MCVideo user is a member, the MCVideo client selects one of
> those MCVideo groups.
>
> 15) shall include an SDP offer according to 3GPP TS 24.229 [11] with the
> clarifications given in subclause 6.2.1;
>
> 16) if an implicit transmission request is required, shall indicate this as
> specified in subclause 6.4; and
>
> 17) shall send the SIP INVITE request towards the MCVideo server according
> to 3GPP TS 24.229 [11].
On receiving a SIP 2xx response to the SIP INVITE request, the MCVideo client:
> 1) shall interact with the user plane as specified in 3GPP TS 24.581 [5] ;
>
> 2) if the MCVideo emergency group call state is set to \"MVEGC 2: emergency-
> call-requested\" or \"MVEGC 3: emergency-call-granted\" or the MCVideo
> imminent peril group call state is set to \"MVIGC 2: imminent-peril-call-
> requested\" or \"MVIGC 3: imminent-peril-call-granted\", the MCVideo client
> shall perform the actions specified in subclause 6.2.8.1.4; and
>
> 3) may subscribe to the conference event package as specified in subclause
> 9.1.3.1.
On receiving a SIP 4xx response, a SIP 5xx response or a SIP 6xx response to
the SIP INVITE request:
> 1) if the MCVideo emergency group call state is set to \"MVEGC 2: emergency-
> call-requested\" or \"MVEGC 3: emergency-call-granted\"; or
>
> 2) if the MCVideo imminent peril group call state is set to \"MVIGC 2:
> imminent-peril-call-requested\" or \"MVIGC 3: imminent-peril-call-granted\";
the MCVideo client shall perform the actions specified in subclause 6.2.8.1.5.
On receiving a SIP INFO request where the Request-URI contains an MCVideo
session ID identifying an ongoing group session, the MCVideo client shall
follow the actions specified in subclause 6.2.8.1.13.
[TS 24.281, clause 6.2.8.1.9]
This subclause is referenced from other procedures.
When the MCVideo client receives a request from the MCVideo user to originate
an MCVideo imminent peril group call, and this is an authorised request for an
MCVideo imminent peril group call as determined by the procedures of subclause
6.2.8.1.8, the MCVideo client:
> 1) if the MCVideo client imminent peril group state is set to \"MVIGC 1:
> imminent-peril-capable\" and the in-progress emergency state of the group is
> set to a value of \"false\":
>
> a) shall include in the SIP request a MIME mcvideoinfo body as defined in
> Annex F.1 with the \ element set to \"true\" and set the
> MCVideo emergency group call state to \"MVIGC 2: imminent-peril-call-
> requested\" state; and
>
> b) if the MCVideo client imminent peril group state of the group is set to a
> value other than \"MVIG 2: in-progress\" shall set the MCVideo client
> emergency group state of the MCVideo group to \"MVIG 3: confirm-pending\".
>
> NOTE: An MCVideo group call originated by an affiliated member of an MCVideo
> group which is in an in-progress imminent peril state (as tracked on the
> MCVideo client by the MCVideo client imminent peril group state) will also
> have the priority associated with MCVideo imminent peril group calls. The
> \ element of the MIME mcvideoinfo body does not need to
> be included in this case, nor do any state changes result and hence no
> action needs to be taken in this subclause.
[TS 24.581, clause 6.2.4.2.2]
When a call is initiated as described in 3GPP TS 24.281 [2], the transmission
participant:
> 1\. shall create an instance of the \'Transmission participant state
> transition diagram for basic transmission control operation\';
>
> 2\. if the originating transmission participant receives a transmission
> control message before it receives the SIP 200 (OK) response, shall store
> the transmission control message;
>
> NOTE: The originating transmission participant might receive a transmission
> control message before the SIP 200 (OK) response when initiating, joining or
> rejoining a call because of processing delays of the SIP 200 (OK) response
> in the SIP core.
>
> 3\. if the established MCVideo call is a chat group call and the SIP INVITE
> request is not an implicit Transmission request, shall enter the \'U: has no
> permission to transmit\' state;
>
> 4\. if for the established MCVideo call the SIP INVITE request is an
> implicit Transmission request:
>
> a. shall start timer T100 (Transmission Request) and initialise counter C100
> (Transmission Request) to 1;
>
> b. shall enter the \'U: pending request to transmit\' state; and
>
> c. if the transmission participant has received and stored a transmission
> control message before the reception of the SIP 200 (OK) response, shall act
> as if the transmission control message was received in the \'U: pending
> request to transmit\' state after entering the \'U: pending request to
> transmit\' state; and
>
> 5\. if the established MCVideo call is a broadcast group call, shall enter
> the \'U: has permission to transmit\' state.
When the transmission participant is rejoining an ongoing MCVideo call as
described in 3GPP TS 24.281 [2] the transmission participant shall enter the
\'U: has no permission to transmit\' state.
[TS 24.581, clause 6.2.4.4.6]
Upon receiving a Transmission Granted message from the transmission control
server, the transmission participant:
> 1\. if the first bit in the subtype of the Transmission Granted message is
> set to \'1\' (Acknowledgment is required) as described in subclause 9.2.2.1,
> shall send a Transmission control Ack message. The Transmission control Ack
> message:
>
> a. shall include the Message Type field set to \'0\' (Transmission Granted);
> and
>
> b. shall include the Source field set to \'0\' (the transmission participant
> is the source);
>
> 2\. shall provide Transmission granted notification to the user, if not
> already done;
>
> 3\. shall stop timer T100 (Transmission Request); and
>
> 4\. shall enter the \'U: has permission to transmit\' state.
[TS 24.581, clause 6.2.4.5.3]
Upon receiving an indication from the user to end the permission to send RTP
media, the transmission participant:
> 1\. shall send a Transmission end request message towards the transmission
> control server. The Transmission end request message, if the session is a
> broadcast call and if the session was established as a normal call, shall
> include the Transmission Indicator with the A-bit set to \'1\' (Normal
> call);
>
> 2\. shall start timer T101 (Transmission End Request) and initialize counter
> C101 (Transmission End Request) to 1; and
>
> 3\. shall enter the \'U: pending end of transmission\' state.
[TS 24.581, clause 6.2.4.6.4]
Upon receiving a Transmission end response message, the transmission
participant:
> 1\. if the first bit in the subtype of the Transmission end response message
> to \'1\' (Acknowledgment is required) as described in subclause 9.2.2.1,
> shall send a Transmission control Ack message. The Transmission control Ack
> message:
>
> a. shall include the Message Type field set to \'1\' (Transmission end
> response); and
>
> b. shall include the Source field set to \'0\' (the transmission participant
> is the source);
>
> 2\. may provide a Transmission end notification to the MCVideo user;
>
> 3\. if the Transmission Indicator field is included and the B-bit set to
> \'1\' (Broadcast group call), shall provide a notification to the user
> indicating the type of call;
>
> 4\. shall stop timer T101 (Transmission End Request);
>
> 5\. if the session is not a broadcast group call or if the A-bit in the
> Transmission Indicator field is set to \'1\' (Normal call), shall enter the
> \'U: has no permission to transmit\' state; and
>
> 6\. if the session was initiated as a broadcast group call:
>
> a. shall indicate to the MCVideo client the media transmission is completed;
> and
>
> b shall enter the \'Call releasing\' state.
##### 6.1.1.10.3 Test description {#test-description-13 .H6}
##### 6.1.1.10.3.1 Pre-test conditions {#pre-test-conditions-13 .H6}
##### System Simulator: {#system-simulator-9 .H6}
\- SS (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
##### IUT: {#iut-9 .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
##### Preamble: {#preamble-9 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- UE States at the end of the preamble
\- The UE is in E-UTRA Registered, Idle Mode state.
\- The MCVideo Client Application has been activated and User has registered-
in as the MCVideo User with the Server as active user at the Client.
##### 6.1.1.10.3.2 Test procedure sequence {#test-procedure-sequence-13 .H6}
Table 6.1.1.10.3.2-1: Main Behaviour
+------------+------------+------------+---------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +============+============+============+=========+=========+====+ | | | U - S | Message | | | +------------+------------+------------+---------+---------+----+ | 1 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | the | | | | | | | est | | | | | | | ablishment | | | | | | | of a | | | | | | | imminent | | | | | | | peril | | | | | | | group call | | | | | | | with | | | | | | | implicit | | | | | | | tr | | | | | | | ansmission | | | | | | | request. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 2 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | CO session | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3B.1.3-1 | | | | | | | to | | | | | | | establish | | | | | | | an | | | | | | | imminent | | | | | | | peril | | | | | | | group call | | | | | | | with | | | | | | | implicit | | | | | | | tr | | | | | | | ansmission | | | | | | | control | | | | | | | according | | | | | | | to option | | | | | | | b,ii of | | | | | | | NOTE 1 in | | | | | | | TS | | | | | | | 36.579.1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.1.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 3-7 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 8 | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | provide | | | | | | | tr | | | | | | | ansmission | | | | | | | granted | | | | | | | no | | | | | | | tification | | | | | | | to the | | | | | | | user? | | | | | | | | | | | | | | (NOTE 1). | | | | | +------------+------------+------------+---------+---------+----+ | 9 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | end of | | | | | | | tra | | | | | | | nsmission. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 10 | Check: | - | - | 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | tr | | | | | | | ansmission | | | | | | | End | | | | | | | Request | | | | | | | CO\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.7.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 11-12 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 13 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | release | | | | | | | the call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 14 | Check: | - | - | 4 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CO | | | | | | | call | | | | | | | release\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 15 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | NOTE 1: | | | | | | | This is | | | | | | | expected | | | | | | | to be done | | | | | | | via a | | | | | | | suitable | | | | | | | impl | | | | | | | ementation | | | | | | | dependent | | | | | | | MMI. | | | | | | +------------+------------+------------+---------+---------+----+
##### 6.1.1.10.3.3 Specific message contents {#specific-message-contents-13
.H6}
Table 6.1.1.10.3.3-1: SIP INVITE from the UE (Step 2, Table 6.1.1.10.3.2-1;\
Step 2, TS 36.579-1 [2] Table 5.3B.1.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.1-1, condition IMMPERIL-CALL
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP message**  
MIME-part-body SDP Message as described in Table 6.1.1.10.3.3-1A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.1.1.10.3.3-2
Table 6.1.1.10.3.3-1A: SDP message in SIP INVITE (Table 6.1.1.10.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.1-2, condition
INITIAL_SDP_OFFER, IMPLICIT_GRANT_REQUESTED
* * *
Table 6.1.1.10.3.3-2: MCVideo-Info in SIP INVITE (Table 6.1.1.10.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition GROUP-CALL,
IMMPERIL-CALL, INVITE_REFER
* * *
Table 6.1.1.10.3.3-3: SIP 200 (OK) from the SS (Step 2, Table 6.1.1.10.3.2-1;\
Step 4, TS 36.579-1 [2] Table 5.3B.1.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.17.1.2-1, condition INVITE-RSP
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
SDP Message SDP Message as described in Table 6.1.1.10.3.3-3A
Table 6.1.1.10.3.3-3A: SDP message in SIP 200 (OK) (Table 6.1.1.10.3.3-3)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition SDP_ANSWER,
IMPLICIT_GRANT_REQUESTED
* * *
Table 6.1.1.10.3.3-4: Void
Table 6.1.1.10.3.3-5: Transmission Granted from the SS (Step 2, Table
6.1.1.10.3.2-1;\ Step 6a1, TS 36.579-1 [2] Table 5.3B.1.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.1-1, condition IMMPERIL-CALL
* * *
Table 6.1.1.10.3.3-5A: Transmission Idle from the SS (Step 10, Table
6.1.1.10.3.2-1;\ Step 4, TS 36.579-1 [2] Table 5.3B.7.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.16-1, condition IMMPERIL-CALL
* * *
Table 6.1.1.10 3.3-6..8: Void
6.1.1.11 On-network / On-demand Pre-arranged Group Call / Imminent Peril Group
Call / Client Terminated (CT)
##### 6.1.1.11.1 Test Purpose (TP) {#test-purpose-tp-14 .H6}
##### (1) {#section-66 .H6}
**with** { the UE (MCVideo Client) registered and authorized for MCVideo
Service }
ensure that {
**when** { the MCVideo Client receives a SIP INVITE message of an MCVideo On-
demand Pre-arranged Imminent Peril Group Call and the MCVideo User answers the
call }
**then** { the MCVideo Client responds to the SS (MCVideo Server) with a SIP
200 (OK) message }
}
##### (2) {#section-67 .H6}
**with** { the UE (MCVideo Client) having an ongoing MCVideo Pre-arranged
Imminent Peril Group Call }
ensure that {
**when** { the UE (MCVideo Client) receives a Media Transmission Notification
message from the SS (MCVideo Server) }
**then** { the UE (MCVideo Client) provides media transmission notification to
the MCVideo User **and** sends a Receive Media Request message to the SS
(MCVideo Server) }
##### (3) {#section-68 .H6}
**with** { the UE (MCVideo Client) having an ongoing MCVideo On-network Pre-
arranged Imminent Peril Group Call }
ensure that {
**when** { the MCVideo User requests to end the RTP media reception }
**then** { the UE (MCVideo Client) sends a Media Reception End Request message
}
}
##### (4) {#section-69 .H6}
**with** { the UE (MCVideo Client) having an ongoing MCVideo On-demand Pre-
arranged Imminent Peril Group Call }
ensure that {
**when** { the MCVideo User requests to terminate the On-demand Pre-arranged
Imminent Peril Group Call }
**then** { the UE (MCVideo Client) sends a SIP BYE message and leaves the
MCVideo Session }
}
##### 6.1.1.11.2 Conformance requirements {#conformance-requirements-14 .H6}
References: The conformance requirements covered in the current Test Case are
specified in TS 24.281, clauses 9.2.1.2.1.2, TS 24.581 clauses 6.2.5.2.2,
6.2.5.3.2, 6.2.5.3.3, 6.2.5.4.5, 6.2.5.5.3, 6.2.5.6.4. The following
represents a copy/paste extraction of the requirements relevant to the test
purpose; any references within the copy/paste text should be understood within
the scope of the core spec they have been copied from. Unless otherwise
stated, these are Rel-15 requirements.
[TS 24.281, clause 9.2.1.2.1.2]
In the procedures in this subclause:
> 1) emergency indication in an incoming SIP INVITE request refers to the
> \ element of the application/vnd.3gpp.mcvideo-info+xml MIME
> body; and
>
> 2) imminent peril indication in an incoming SIP INVITE request refers to the
> \ element of the application/vnd.3gpp.mcvideo-info+xml
> MIME body.
Upon receipt of an initial SIP INVITE request, the MCVideo client shall follow
the procedures for termination of multimedia sessions in the IM CN subsystem
as specified in 3GPP TS 24.229 [11] with the clarifications below.
The MCVideo client:
> 1) may reject the SIP INVITE request if either of the following conditions
> are met:
>
> a) MCVideo client does not have enough resources to handle the call; or
>
> b) any other reason outside the scope of this specification;
>
> 2) if the SIP INVITE request is rejected in step 1), shall respond toward
> participating MCVideo function either with appropriate reject code as
> specified in 3GPP TS 24.229 [51] and warning texts as specified in subclause
> 4.4.2 or with SIP 480 (Temporarily unavailable) response not including
> warning texts if the user is authorised to restrict the reason for failure
> and skip the rest of the steps of this subclause;
>
> NOTE: If the SIP INVITE request contains an emergency indication or imminent
> peril indication, the MCVideo client can by means beyond the scope of this
> specification choose to accept the request.
>
> 3) shall check if a Resource-Priority header field is included in the
> incoming SIP INVITE request and may perform further actions outside the
> scope of this specification to act upon an included Resource-Priority header
> field as specified in 3GPP TS 24.229 [11];
>
> 4) if the SIP INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element containing the \ Params> element with the \ element set to a value of
> \"true\":
>
> a) should display to the MCVideo user an indication that this is a SIP
> INVITE request for an MCVideo emergency group call and:
>
> i) should display the MCVideo ID of the originator of the MCVideo emergency
> group call contained in the \ element of the
> application/vnd.3gpp.mcvideo-info+xml MIME body;
>
> ii) should display the MCVideo group identity of the group with the
> emergency condition contained in the \ element;
> and
>
> iii) if the \ element is set to \"true\", should display to the
> MCVideo user an indication of the MCVideo emergency alert and associated
> information;
>
> b) shall set the MCVideo emergency group state to \"MVEG 2: in-progress\";
>
> c) shall set the MCVideo imminent peril group state to \"MVIG 1: no-
> imminent-peril\"; and
>
> d) shall set the MCVideo imminent peril group call state to \"MVIGC 1:
> imminent-peril-gc-capable\"; otherwise
>
> 5) if the SIP INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element containing the \ Params> element with the \ element set to a value of
> \"true\":
>
> a) should display to the MCVideo user an indication that this is a SIP
> INVITE request for an MCVideo imminent peril group call and:
>
> i) should display the MCVideo ID of the originator of the MCVideo imminent
> peril group call contained in the \ element of the
> application/vnd.3gpp.mcvideo-info+xml MIME body; and
>
> ii) should display the MCVideo group identity of the group with the imminent
> peril condition contained in the \ element; and
>
> b) shall set the MCVideo imminent peril group state to \"MVIG 2: in-
> progress\";
>
> 6) may display to the MCVideo user the MCVideo ID of the inviting MCVideo
> user;
>
> 7) shall perform the automatic commencement procedures specified in
> subclause 6.2.3.1.2 if one of the following conditions are met:
>
> a) SIP INVITE request contains an Answer-Mode header field with the value
> \"Auto\" and the MCVideo service setting at the invited MCVideo client for
> answering the call is set to automatic commencement mode; or
>
> b) SIP INVITE request contains an Answer-Mode header field with the value
> \"Auto\" and the MCVideo service setting at the invited MCVideo client for
> answering the call is set to manual commencement mode, yet the invited
> MCVideo client allows the call to be answered with automatic commencement
> mode;
>
> 8) shall perform the manual commencement procedures specified in subclause
> 6.2.3.2.2 if one of the following conditions are met:
>
> a) SIP INVITE request contains an Answer-Mode header field with the value
> \"Manual\" and the MCVideo service setting at the invited MCVideo client for
> answering the call is to use manual commencement mode; or
>
> b) SIP INVITE request contains an Answer-Mode header field with the value
> \"Manual\" and the MCVideo service setting at the invited MCVideo client for
> answering the call is set to automatic commencement mode, yet the invited
> MCVideo client allows the call to be answered with manual commencement mode;
> and
>
> 9) when the SIP 200 (OK) response to the SIP INVITE request is sent, may
> subscribe to the conference event package as specified in subclause 9.1.3.1.
[TS 24.581, clause 6.2.5.2.2]
When an MCVideo call is established, the terminating transmission participant:
> 1\. shall create an instance of a \'Transmission participant state
> transition diagram for general reception control operation\'; and
>
> 2\. shall enter the \'U: reception controller\' state.
>
> NOTE: From a transmission participant perspective the MCVideo call is
> established when the application and signalling plane sends the SIP 200 (OK)
> response.
[TS 24.581, clause 6.2.5.3.2]
Upon receiving the media transmission notification from the transmission
control server, the transmission participant:
> 1\. if the first bit in the subtype of the media transmission notification
> message is set to \'1\' (Acknowledgment is required) as described in clause
> 9.2.2.1, shall send a Transmission control Ack message. The Transmission
> control Ack message:
>
> a. shall include the Message Type field set to \'6\' (Media transmission
> notification); and
>
> b. shall include the Source field set to \'0\' (the transmission participant
> is the source);
>
> 2\. shall provide media transmission notification to the user;
>
> 3\. shall store the User ID and the SSRC of the user transmitting the media;
>
> 4\. if the Reception Mode field is set to \'0\' indicating automatic
> reception mode:
>
> a. shall create an instance of the \'Transmission participant state
> transition diagram for basic reception control operation\';
>
> b. shall map the stored User ID and the SSRC of the user transmitting the
> media with the instance of \'Transmission participant state transition
> diagram for basic reception control operation\' created in step a); and
>
> c. shall enter the \'U: has permission to receive\' state;
>
> 5\. may display the details of the incoming media to the user; and
>
> 6\. shall remain in the \'U: reception controller\' state.
[TS 24.581, clause 6.2.5.3.3]
Upon receiving an indication from the user to request permission to receive
media, the transmission participant:
> 1\. shall send the Receive Media Request message toward the transmission
> control server; The Receive Media Request message:
>
> a. if a different priority than the normal priority is required, shall
> include the Reception Priority field with the priority not higher than
> negotiated with the transmission control server as specified in subclause
> 14.3.3; and
>
> b. if the receive media request is a broadcast group call, system call,
> emergency call or an imminent peril call, shall include a Transmission
> Indicator field indicating the relevant call types;
>
> 2\. shall create an instance of the \'Transmission participant state
> transition diagram for basic reception control operation\';
>
> 3\. shall map the stored User ID and the SSRC of the user transmitting the
> media with instance of \'Transmission participant state transition diagram
> for basic reception control operation\' created in step 2; and
>
> 4\. shall remain in the \'U: reception controller\' state.
[TS 24.581, clause 6.2.5.4.5]
Upon receiving a granted response for Receive media request message, the
transmission participant:
> 1\. if the first bit in the subtype of the Receive media response message is
> set to \'1\' (Acknowledgment is required) as described in subclause 9.2.2.1,
> shall send a Transmission control Ack message. The Transmission control Ack
> message:
>
> a. shall include the Message Type field set to \'7\' (Receive media
> response); and
>
> b. shall include the Source field set to \'0\' (the transmission participant
> is the source);
>
> 2\. shall provide receive media success notification to the user;
>
> 3\. if the Receive Media Indicator field is included and the B-bit is set to
> \'1\' (Broadcast group call), shall provide a notification to the user
> indicating the type of call;
>
> 4\. shall stop timer T103 (Receive Media Request); and
>
> 5\. shall enter the \'U: has permission to receive\' state.
[TS 24.581, clause 6.2.5.5.3]
Upon receiving an indication from the user to end the RTP media reception, the
transmission participant:
> 1\. shall send a Media reception end request message towards the
> transmission control server The Media reception end request message:
>
> a. if the session is a broadcast call and if the session was established as
> a normal call, shall include the Transmission Indicator with the A-bit set
> to \'1\' (Normal call); and
>
> b. shall include the SSRC of user transmitting the media in the Media
> reception end request message;
>
> 2\. shall remove the indication that the participant is overriding without
> revoke if this indication is stored;
>
> 3\. shall remove the indication that the participant is overridden without
> revoke if this indication is stored;
>
> 4\. shall start timer T104 (Receive Media Release) and initialize counter
> C104 (Receive Media Release) to 1; and
>
> 5\. shall enter the \'U: pending reception release\' state.
[TS 24.581, clause 6.2.5.6.4]
Upon receiving a MRE response message, the transmission participant:
> 1\. if the first bit in the subtype of the MRE response message to \'1\'
> (Acknowledgment is required) as described in subclause 9.2.2.1, shall send a
> Transmission control Ack message. The Transmission control Ack message:
>
> a. shall include the Message Type field set to \'3\' (Media reception end
> response); and
>
> b. shall include the Source field set to \'0\' (the transmission participant
> is the source);
>
> 2\. may provide a Media reception end notification to the MCVideo user;
>
> 3\. if the Receive Media Indicator field is included and the B-bit set to
> \'1\' (Broadcast group call), shall provide a notification to the user
> indicating the type of call;
>
> 4\. shall stop timer T104 (Receive Media Release); and
>
> 5\. shall enter the \'terminated\' state.
##### 6.1.1.11.3 Test description {#test-description-14 .H6}
##### 6.1.1.11.3.1 Pre-test conditions {#pre-test-conditions-14 .H6}
##### System Simulator: {#system-simulator-10 .H6}
\- SS (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
##### IUT: {#iut-10 .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
##### Preamble: {#preamble-10 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- UE States at the end of the preamble
\- The UE is in E-UTRA Registered, Idle Mode state.
\- The MCVideo Client Application has been activated and User has registered-
in as the MCVideo User with the Server as active user at the Client.
##### 6.1.1.11.3.2 Test procedure sequence {#test-procedure-sequence-14 .H6}
Table 6.1.1.11.3.2-1: Main Behaviour
+------------+------------+------------+---------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +============+============+============+=========+=========+====+ | | | U - S | Message | | | +------------+------------+------------+---------+---------+----+ | 1 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CT | | | | | | | group call | | | | | | | est | | | | | | | ablishment | | | | | | | with | | | | | | | manual | | | | | | | comm | | | | | | | encement\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3.5.3-1 | | | | | | | to | | | | | | | establish | | | | | | | an | | | | | | | imminent | | | | | | | peril | | | | | | | group call | | | | | | | with | | | | | | | manual | | | | | | | co | | | | | | | mmencement | | | | | | | mode? | | | | | +------------+------------+------------+---------+---------+----+ | 2-5 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 6 | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Tr | | | | | | | ansmission | | | | | | | No | | | | | | | tification | | | | | | | and | | | | | | | Request | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.3.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 7-10 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 11 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | end of | | | | | | | reception. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 12 | Check: | - | - | 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Reception | | | | | | | End | | | | | | | Request | | | | | | | CO\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3B.8.3-1 | | | | | | | to end the | | | | | | | RTP media | | | | | | | reception? | | | | | +------------+------------+------------+---------+---------+----+ | 13 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 14 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | release | | | | | | | the call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 15 | Check: | - | - | 4 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CO | | | | | | | call | | | | | | | release\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 16 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | NOTE 1: | | | | | | | This is | | | | | | | expected | | | | | | | to be done | | | | | | | via a | | | | | | | suitable | | | | | | | impl | | | | | | | ementation | | | | | | | dependent | | | | | | | MMI. | | | | | | +------------+------------+------------+---------+---------+----+
##### 6.1.1.11.3.3 Specific message contents {#specific-message-contents-14
.H6}
Table 6.1.1.11.3.3-1: SIP INVITE from the SS (Step 1, Table 6.1.1.11.3.2-1;\
Step 2, TS 36.579-1 [2] Table 5.3.5.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.2-1, condition MANUAL
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP Message**  
MIME part body SDP Message as described in Table 6.1.1.11.3.3-1A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.1.1.11.3.3-2
Table 6.1.1.11.3.3-1A: SDP in SIP INVITE (Table 6.1.1.11.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition
INITIAL_SDP_OFFER
* * *
Table 6.1.1.11.3.3-2: MCVideo-Info in SIP INVITE (Table 6.1.1.11.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.2-2, condition GROUP-CALL,
IMMPERIL-CALL
* * *
Table 6.1.1.11.3.3-3: Void
Table 6.1.1.11.3.3-4: SIP 200 (OK) from the UE (Step 2, Table 6.1.1.11.3.2-1;\
Step 7, TS 36.579-1 [2] Table 5.3.5.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.17.1.1-1, condition INVITE-RSP
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP Message**  
MIME part body SDP Message as described in Table 6.1.1.11.3.3-4A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.1.1.11.3.3-4B
Table 6.1.1.11.3.3-4A: SDP in SIP 200 (OK) (Table 6.1.1.11.3.3-4)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.1-2, condition SDP_ANSWER
* * *
Table 6.1.1.11.3.3-4B: MCVideo-Info in SIP 200 (OK) (Table 6.1.1.11.3.3-4)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition INVITE-RSP
* * *
Table 6.1.1.11.3.3-5..6: Void
Table 6.1.1.11.3.3-6A: Media Transmission Notification from the SS (Step 6,
Table 6.1.1.11.3.2-1;\ Step 1, TS 36.579-1 [2] Table 5.3B.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.7-1, condition IMMPERIL-CALL
* * *
Table 6.1.1.11.3.3-7..8: Void
Table 6.1.1.11.3.3-9: Media Reception End Request from the UE (Step 12, Table
6.1.1.11.3.2-1;\ Step 1, TS 36.579-1 [2] Table 5.3B.8.3-1)
* * *
**Derivation** Path: TS 36.579-1 [2], Table 5.5.11.3.3-1, condition UPLINK,
IMMPERIL-CALL
* * *
Table 6.1.1.11.3.3-9A: Transmission Idle from the SS (Step 12, Table
6.1.1.11.3.2-1;\ Step 3, TS 36.579-1 [2] Table 5.3B.8.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.16-1, condition IMMPERIL-CALL
* * *
Table 6.1.1.11.3.3-10: SIP BYE from the UE (Step 15, Table 6.1.1.11.3.2-1;\
Step 1, TS 36.579-1 [2] Table 5.3.10.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.2.2.1-1, condition MT_CALL
* * *
Table 6.1.1.11.3.3-11: Void
6.1.1.12 On-network / On-demand Pre-arranged Group Call / Transmission Control
State Transitions / Client Originated (CO)
##### 6.1.1.12.1 Test Purpose (TP) {#test-purpose-tp-15 .H6}
##### (1) {#section-70 .H6}
**with** { the UE (MCVideo Client) registered and authorised for MCVideo
Service }
ensure that {
**when** { the MCVideo User requests the establishment of an MCVideo On-demand
Pre-arranged Group Call forcing Automatic Commencement Mode and implicit
Transmission Control }
**then** { the UE (MCVideo Client) requests an On-demand Automatic
Commencement Mode Pre-arranged Group Call establishment with implicit
Transmission Control by sending a SIP INVITE message, **and** , after
indication from the SS (MCVideo Server) that the call was established,
provides transmission granted notification to the MCVideo User }
}
##### (2) {#section-71 .H6}
**with** { the UE (MCVideo Client) having established a MCVideo On-demand Pre-
arranged Group Call with Automatic Commencement Mode }
ensure that {
**when** { the MCVideo User engages in communication with the invited MCVideo
User(s) **and** requests to terminate the ongoing MCVideo Group Call }
**then** { the UE (MCVideo Client) respects the Transmission Control imposed
by the SS(MCVideo Server) (Transmission Granted, Media Reception Notification,
Transmission Revoked, Queue Position Request, Queue Position Info,
Transmission Control ACK, Transmission End Request, Transmission End Response,
Transmission Request, Transmission Rejected, Transmission Cancel Request
Notify }
}
##### (3) {#section-72 .H6}
**with** { the UE (MCVideo Client) having an ongoing On-demand Pre-arranged
Group Call with Automatic Commencement Mode }
ensure that {
**when** { the MCVideo User requests to end the call }
**then** { the UE (MCVideo Client) sends SIP BYE message, **and** leaves the
MCVideo Session }
}
##### 6.1.1.12.2 Conformance requirements {#conformance-requirements-15 .H6}
References: The conformance requirements covered in the current TC are
specified in: TS 24.281, clauses 6.2.3.1.2, 6.2.4.1, 9.2.1.2.1.1, TS 24.581,
clauses 6.2.4.2.2, 6.2.4.3.2, 6.2.4.4.2, 6.2.4.4.5, 6.2.4.4.6, 6.2.4.5.5,
6.2.4.5.6, 6.2.4.5.7, 6.2.4.6.4, 6.2.4.8.2, 6.2.4.9.2, 6.2.4.9.4, 6.2.4.9.6.
The following represents a copy/paste extraction of the requirements relevant
to the test purpose; any references within the copy/paste text should be
understood within the scope of the core spec they have been copied from.
Unless otherwise stated, these are Rel-15 requirements.
[TS 24.281, clause 6.2.3.1.2]
When performing the automatic commencement mode procedures, the MCVideo client
shall follow the procedures in subclause 6.2.3.1.1 with the following
clarification:
> \- The MCVideo client may include a P-Answer-State header field with the
> value \"Confirmed\" as specified in IETF RFC 4964 [30] in the SIP 200 (OK)
> response.
[TS 24.281, clause 6.2.4.1]
Upon receiving a request from an MCVideo user to leave an MCVideo session
established using on-demand session signalling, the MCVideo client:
> 1) shall interact with the media plane as specified in 3GPP TS 24.581 [5];
>
> 2) shall generate a SIP BYE request according to 3GPP TS 24.229 [11];
>
> 3) shall set the Request-URI to the MCVideo session identity to leave; and
>
> 4) shall send a SIP BYE request towards MCVideo server according to 3GPP TS
> 24.229 [11].
Upon receiving a SIP 200 (OK) response to the SIP BYE request, the MCVideo
client shall interact with the media plane as specified in 3GPP TS 24.581 [5].
[TS 24.281, clause 9.2.1.2.1.1]
Upon receiving a request from an MCVideo user to establish an MCVideo
prearranged group session the MCVideo client shall generate an initial SIP
INVITE request by following the UE originating session procedures specified in
3GPP TS 24.229 [11], with the clarifications given below.
The MCVideo client:
> 1) if the MCVideo user has requested the origination of an MCVideo emergency
> group call or is originating an MCVideo prearranged group call and the
> MCVideo emergency state is already set, the MCVideo client shall comply with
> the procedures in subclause 6.2.8.1.1;
>
> 2) if the MCVideo user has requested the origination of an MCVideo imminent
> peril group call, the MCVideo client shall comply with the procedures in
> subclause 6.2.8.1.9;
>
> 3) if the MCVideo user has requested the origination of a broadcast group
> call, the MCVideo client shall comply with the procedures in subclause
> 6.2.8.2;
>
> 4) shall include the g.3gpp.mcvideo media feature tag and the g.3gpp.icsi-
> ref media feature tag with the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" in the Contact header field of the SIP INVITE
> request according to IETF RFC 3840 [22];
>
> 5) shall include an Accept-Contact header field containing the
> g.3gpp.mcvideo media feature tag along with the \"require\" and \"explicit\"
> header field parameters according to IETF RFC 3841 [20];
>
> 6) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
> (coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
> field according to IETF RFC 6050 [14] in the SIP INVITE request;
>
> 7) shall include an Accept-Contact header field with the g.3gpp.icsi-ref
> media feature tag containing the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" along with the \"require\" and \"explicit\"
> header field parameters according to IETF RFC 3841 [20];
>
> 8) should include the \"timer\" option tag in the Supported header field;
>
> 9) should include the Session-Expires header field according to IETF RFC
> 4028 [23]. It is recommended that the \"refresher\" header field parameter
> is omitted. If included, the \"refresher\" header field parameter shall be
> set to \"uac\";
>
> 10) shall set the Request-URI of the SIP INVITE request to the public
> service identity identifying the participating MCVideo function serving the
> MCVideo user;
>
> NOTE 1: The MCVideo client is configured with public service identity
> identifying the participating MCVideo function serving the MCVideo user.
>
> 11) may include a P-Preferred-Identity header field in the SIP INVITE
> request containing a public user identity as specified in 3GPP TS 24.229
> [11];
>
> 12) if the MCVideo emergency state is already set or the MCVideo client
> emergency group state for this group is set to \"MVEG 2: in-progress\", the
> MCVideo client shall include the Resource-Priority header field and comply
> with the procedures in subclause 6.2.8.1.2;
>
> 13) if the MCVideo client imminent peril group state for this group is set
> to \"MVIG 2: in-progress\" or \"MVIG 4: confirm-pending\" shall include the
> Resource-Priority header field and comply with the procedures in subclause
> 6.2.8.1.12;
>
> 14) shall contain in an application/vnd.3gpp.mcvideo-info+xml MIME body with
> the \ element containing the \ element with:
>
> a) the \ element set to a value of \"prearranged\";
>
> b) the \ element set to the group identity;
>
> c) the \ element set to the MCVideo client ID of the
> originating MCVideo client; and
>
> NOTE 2: The MCVideo client does not include the MCVideo ID of the
> originating MCVideo user in the body, as this will be inserted into the body
> of the SIP INVITE request that is sent from the originating participating
> MCVideo function.
>
> d) if the group identity can be determined to be a TGI and if the MCVideo
> client can associate the TGI with a MCVideo group ID, the \ group-id> element set to the MCVideo group ID;
>
> NOTE 3: The text \"can associate the TGI with a MCVideo group ID\" means
> that the MCVideo client is able to determine that there is a constituent
> group of the temporary group that it is a member of.
>
> NOTE 4: The MCVideo client is informed about temporary groups and regrouping
> of MCVideo groups that the user is a member of as specified in 3GPP TS
> 24.481 [24].
>
> NOTE 5: If the MCVideo user selected a TGI where there are several MCVideo
> groups where the MCVideo user is a member, the MCVideo client selects one of
> those MCVideo groups.
>
> 15) shall include an SDP offer according to 3GPP TS 24.229 [11] with the
> clarifications given in subclause 6.2.1;
>
> 16) if an implicit transmission request is required, shall indicate this as
> specified in subclause 6.4; and
>
> 17) shall send the SIP INVITE request towards the MCVideo server according
> to 3GPP TS 24.229 [11].
On receiving a SIP 2xx response to the SIP INVITE request, the MCVideo client:
> 1) shall interact with the user plane as specified in 3GPP TS 24.581 [5]
>
> 2) if the MCVideo emergency group call state is set to \"MVEGC 2: emergency-
> call-requested\" or \"MVEGC 3: emergency-call-granted\" or the MCVideo
> imminent peril group call state is set to \"MVIGC 2: imminent-peril-call-
> requested\" or \"MVIGC 3: imminent-peril-call-granted\", the MCVideo client
> shall perform the actions specified in subclause 6.2.8.1.4; and
>
> 3) may subscribe to the conference event package as specified in subclause
> 9.1.3.1.
On receiving a SIP 4xx response, a SIP 5xx response or a SIP 6xx response to
the SIP INVITE request:
> 1) if the MCVideo emergency group call state is set to \"MVEGC 2: emergency-
> call-requested\" or \"MVEGC 3: emergency-call-granted\"; or
>
> 2) if the MCVideo imminent peril group call state is set to \"MVIGC 2:
> imminent-peril-call-requested\" or \"MVIGC 3: imminent-peril-call-granted\";
the MCVideo client shall perform the actions specified in subclause 6.2.8.1.5.
On receiving a SIP INFO request where the Request-URI contains an MCVideo
session ID identifying an ongoing group session, the MCVideo client shall
follow the actions specified in subclause 6.2.8.1.13
[TS 24.581, clause 6.2.4.2.2]
When a call is initiated as described in 3GPP TS 24.281 [2], the transmission
participant:
> 1\. shall create an instance of the \'Transmission participant state
> transition diagram for basic transmission control operation\';
>
> 2\. if the originating transmission participant receives a transmission
> control message before it receives the SIP 200 (OK) response, shall store
> the transmission control message;
>
> NOTE: The originating transmission participant might receive a transmission
> control message before the SIP 200 (OK) response when initiating, joining or
> re-joining a call because of processing delays of the SIP 200 (OK) response
> in the SIP core.
>
> 3\. if the established MCVideo call is a chat group call and the SIP INVITE
> request is not an implicit Transmission request, shall enter the \'U: has no
> permission to transmit\' state;
>
> 4\. if for the established MCVideo call the SIP INVITE request is an
> implicit Transmission request:
>
> a. shall start timer T100 (Transmission Request) and initialise counter C100
> (Transmission Request) to 1;
>
> b. shall enter the \'U: pending request to transmit\' state; and
>
> c. if the transmission participant has received and stored a transmission
> control message before the reception of the SIP 200 (OK) response, shall act
> as if the transmission control message was received in the \'U: pending
> request to transmit\' state after entering the \'U: pending request to
> transmit\' state; and
>
> 5\. if the established MCVideo call is a broadcast group call, shall enter
> the \'U: has permission to transmit\' state.
When the transmission participant is re-joining an ongoing MCVideo call as
described in 3GPP TS 24.281 [2] the transmission participant shall enter the
\'U: has no permission to transmit\' state.
[TS 24.581, clause 6.2.4.3.2]
Upon receiving an indication from the user to request permission to send
media, the transmission participant:
> 1\. void
>
> 2\. shall send the Transmission Request message toward the transmission
> control server; The Transmission Request message:
>
> a. if a different priority than the normal priority is required, shall
> include the Transmission Priority field with the priority not higher than
> negotiated with the transmission control server as specified in subclause
> 14.3.3; and
>
> b. if the Transmission request is a broadcast group call, system call,
> emergency call or an imminent peril call, shall include a Transmission
> Indicator field indicating the relevant call types;
>
> 3\. shall start timer T100 (Transmission Request) and initialise counter
> C100 (Transmission Request) to 1; and
>
> 4\. shall enter the \'U: pending request to transmit\' state.
[TS 24.581, clause 6.2.4.4.2]
Upon receiving a Transmission rejected message, the transmission participant:
> 1\. if the first bit in the subtype of the Transmission rejected message is
> set to \'1\' (Acknowledgment is required) as described in subclause 9.2.2.1,
> shall send a Transmission control Ack message. The Transmission control Ack
> message:
>
> a. shall include the Message Type field set to \'1\' (Transmission
> rejected); and
>
> b. shall include the Source field set to \'0\' (the transmission participant
> is the source);
>
> 2\. shall provide Transmission rejected notification to the user;
>
> 3\. may display the Transmission rejected reason to the user using
> information in the Reject Cause field;
>
> 4\. shall stop timer T100 ( Transmission Request); and
>
> 5\. shall enter the \'U: has no permission to transmit\' state.
[TS 24.581, clause 6.2.4.4.5]
Upon receiving a Queue Position Info message, the transmission participant:
> 1\. if the first bit in the subtype of the Queue Position Info message is
> set to \'1\' (Acknowledgment is required) as described in subclause 9.2.2.1,
> shall send a Transmission control Ack message. The Transmission control Ack
> message:
>
> a. shall include the Message Type field set to \'5\' (Queue Position Info);
> and
>
> b. shall include the Source field set to \'0\' (the transmission participant
> is the source);
>
> 2\. shall provide Transmission request queued notification to the MCVideo
> user;
>
> 3\. may provide the queue position and priority to the MCVideo user; and
>
> 4\. shall enter the \'U: queued transmission\' state.
[TS 24.581, clause 6.2.4.4.6]
Upon receiving a Transmission Granted message from the transmission control
server, the transmission participant:
> 1\. if the first bit in the subtype of the Transmission Granted message is
> set to \'1\' (Acknowledgment is required) as described in subclause 9.2.2.1,
> shall send a Transmission control Ack message. The Transmission control Ack
> message:
>
> a. shall include the Message Type field set to \'0\' (Transmission Granted);
> and
>
> b. shall include the Source field set to \'0\' (the transmission participant
> is the source);
>
> 2\. shall store the SSRC of granted transmission participant received in the
> Transmission Granted message and use it in the RTP media packets until the
> transmission is released;
>
> 3\. shall provide Transmission granted notification to the user, if not
> already done;
>
> 4\. shall stop timer T100 (Transmission Request); and
>
> 5\. shall enter the \'U: has permission to transmit\' state.
[TS 24.581, clause 6.2.4.5.5]
Upon receiving a Transmission Revoked message, the transmission participant:
> 1\. shall inform the user that the permission to send RTP media is being
> revoked;
>
> 2\. may give information to the user about the reason for revoking the
> permission to send media:
>
> 3\. shall request the media in the MCVideo client discard any remaining
> buffered RTP media packets and to stop forwarding of encoded video to the
> MCVideo server; and
>
> 4\. if the revoke reason is:
>
> a. terminate the RTP stream, shall enter the \'U: pending end of
> transmission\' state:
>
> i. shall send a Transmission end request message towards the transmission
> control server; and
>
> ii. shall start timer T101 (Transmission End Request) and initialize counter
> C101 (Transmission End Request) to 1; or
>
> b. queue the transmission, shall enter the \'U: queued transmission\' state:
>
> i. shall send a Queue Position Request message towards the transmission
> control server; and
>
> ii. shall start timer T102 (Transmission Queue Position Request) and
> initialize counter C102 (Queue Position Request) to 1.
[TS 24.581, clause 6.2.4.5.6]
Upon receiving a Media Reception notification message, the transmission
participant:
> 1\. shall inform the user about the media reception by another user; and
>
> 2\. shall remain in the \'U: has permission to transmit\' state.
[TS 24.581, clause 6.2.4.5.7]
Upon receiving a Transmission End Request message from transmission control
server, the transmission participant:
> 1\. shall inform the user that the permission to send RTP media is being
> revoked;
>
> 2\. may give information to the user about the reason for terminating the
> permission to send media;
>
> 3\. shall request the media in the MCVideo client to discard any remaining
> buffered RTP media packets and to stop forwarding of encoded video to the
> MCVideo server; and
>
> 4\. shall send Transmission End Response message to the transmission control
> server.
>
> 5\. if the session is not a broadcast group call or if the A-bit in the
> Transmission Indicator field is set to \'1\' (Normal call), shall enter the
> \'U: has no permission to transmit\' state; and
>
> 6\. if the session was initiated as a broadcast group call:
>
> a. shall indicate to the MCVideo client the media transmission is completed;
> and
>
> b shall enter the \'Call releasing\' state.
[TS 24.581, clause 6.2.4.6.4]
Upon receiving a Transmission end response message, the transmission
participant:
> 1\. if the first bit in the subtype of the Transmission end response message
> to \'1\' (Acknowledgment is required) as described in subclause 9.2.2.1,
> shall send a Transmission control Ack message. The Transmission control Ack
> message:
>
> a. shall include the Message Type field set to \'1\' (Transmission end
> response); and
>
> b. shall include the Source field set to \'0\' (the transmission participant
> is the source);
>
> 2\. may provide a Transmission end notification to the MCVideo user;
>
> 3\. if the Transmission Indicator field is included and the B-bit set to
> \'1\' (Broadcast group call), shall provide a notification to the user
> indicating the type of call;
>
> 4\. shall stop timer T101 (Transmission End Request);
>
> 5\. if the session is not a broadcast group call or if the A-bit in the
> Transmission Indicator field is set to \'1\' (Normal call), shall enter the
> \'U: has no permission to transmit\' state; and
>
> 6\. if the session was initiated as a broadcast group call:
>
> a. shall indicate to the MCVideo client the media transmission is completed;
> and
>
> b shall enter the \'Call releasing\' state.
[TS 24.581, clause 6.2.4.8.2]
Upon receiving an MCVideo call release step 2 request from the application and
signalling, the transmission participant:
> 1\. shall release all resources including any running timers associated with
> the MCVideo call; and
>
> 2\. shall enter the \'Start-stop\' state and terminate the current instance
> of the \'Transmission control state machine -- basic\'.
[TS 24.581, clause 6.2.4.9.2]
Upon receiving a Queue Position Info message, the transmission participant:
> 1\. if the first bit in the subtype of the Queue Position Info message is
> set to \'1\' (Acknowledgment is required) as described in subclause 9.2.2.1,
> shall send a Transmission control Ack message. The Transmission control Ack
> message:
>
> a. shall include the Message Type field set to \'5\' (Queue Position Info);
> and
>
> b. shall include the Source field set to \'0\' (the transmission participant
> is the source);
>
> 2\. if the message indicates that the request has been queued or if a
> request for the queue position was sent, the transmission participant:
>
> a. may provide the queue position and priority (if available) to the MCVideo
> user;
>
> 3\. shall stop the timer T102 (Transmission Queue Position Request), if
> running; and
>
> 4\. shall remain in the \'U: queued transmission\' state.
[TS 24.581, clause 6.2.4.9.4]
Upon receipt of an indication from the MCVideo client to cancel the media
transmit request from the queue, the transmission participant:
> 1\. shall send the Transmission end request message to the transmission
> control server. The Transmission end request message, if the session is a
> broadcast call and if the session was established as a normal call, shall
> include the Transmission Indicator with the A-bit set to \'1\' (Normal
> call);
>
> 2\. shall start timer T101 (Transmission End Request) and initialize counter
> C101 (Transmission End Request) to 1; and
>
> 3\. shall enter the \'U: pending end of transmission\' state.
[TS 24.581, clause 6.2.4.9.6]
Upon receiving a Transmission cancel request notify message, the transmission
participant:
> 1\. if the first bit in the subtype of the Transmission cancel request
> notify message is set to \'1\' (Acknowledgment is required) as described in
> subclause 9.2.2.1, shall send a Transmission control Ack message. The
> Transmission control Ack message:
>
> a. shall include the Message Type field set to \'10\' (Transmission cancel
> request notify); and
>
> b. shall include the Source field set to \'0\' (the transmission participant
> is the source);
>
> 2\. shall enter in the \'U: has no permission to transmit\' state.
##### 6.1.1.12.3 Test description {#test-description-15 .H6}
##### 6.1.1.12.3.1 Pre-test conditions {#pre-test-conditions-15 .H6}
##### System Simulator: {#system-simulator-11 .H6}
\- SS (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
UE:
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
##### Preamble: {#preamble-11 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- UE States at the end of the preamble
\- The UE is in E-UTRA Registered, Idle Mode state.
\- The MCVideo Client Application has been activated and User has registered-
in as the MCVideo User with the Server as active user at the Client.
##### 6.1.1.12.3.2 Test procedure sequence {#test-procedure-sequence-15 .H6}
Table 6.1.1.12.3.2-1: Main Behaviour
+-----------+-----------+-----------+-----------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +===========+===========+===========+===========+=========+====+ | | | U - S | Message | | | +-----------+-----------+-----------+-----------+---------+----+ | 1 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | the | | | | | | | esta | | | | | | | blishment | | | | | | | of a | | | | | | | group | | | | | | | call with | | | | | | | automatic | | | | | | | com | | | | | | | mencement | | | | | | | mode and | | | | | | | implicit | | | | | | | tra | | | | | | | nsmission | | | | | | | request. | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 2 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | CO | | | | | | | session | | | | | | | establis | | | | | | | hment/mod | | | | | | | ification | | | | | | | without | | | | | | | pr | | | | | | | ovisional | | | | | | | responses | | | | | | | other | | | | | | | than 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.1.3-1 | | | | | | | to | | | | | | | establish | | | | | | | a group | | | | | | | call with | | | | | | | automatic | | | | | | | com | | | | | | | mencement | | | | | | | mode and | | | | | | | implicit | | | | | | | tra | | | | | | | nsmission | | | | | | | control | | | | | | | according | | | | | | | to option | | | | | | | b,ii of | | | | | | | NOTE 1 in | | | | | | | TS | | | | | | | 36.579.1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5. | | | | | | | 3B.1.3-1? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 3-6 | Void | - | - | - | - | +-----------+-----------+-----------+-----------+---------+----+ | 6A | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | provide | | | | | | | tra | | | | | | | nsmission | | | | | | | granted | | | | | | | not | | | | | | | ification | | | | | | | to the | | | | | | | user? | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 7 | The SS | \ 1) shall accept the SIP INVITE request and generate a SIP 200 (OK) response
> according to rules and procedures of 3GPP TS 24.229 [11];
>
> 2) shall include the option tag \"timer\" in a Require header field of the
> SIP 200 (OK) response;
>
> 3) shall include the g.3gpp.mcvideo media feature tag in the Contact header
> field of the SIP 200 (OK) response;
>
> 4) shall include the g.3gpp.icsi-ref media feature tag containing the value
> of \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" in the Contact header field
> of the SIP 200 (OK) response;
>
> 5) shall include the Session-Expires header field in the SIP 200 (OK)
> response and start the SIP session timer according to IETF RFC 4028 [23].
> The \"refresher\" parameter in the Session-Expires header field shall be set
> to \"uas\";
>
> 6) shall, if the incoming SIP INVITE request contains a Replaces header
> field, include in the SDP answer in the SIP 200 (OK) response to the SDP
> offer the parameters used for the pre-established session identified by the
> contents of the Replaces header field;
>
> 7) shall, if the incoming SIP INVITE request does not contain a Replaces
> header field, include an SDP answer in the SIP 200 (OK) response to the SDP
> offer in the incoming SIP INVITE request according to 3GPP TS 24.229 [11]
> with the clarifications given in subclause 6.2.2;
>
> NOTE: In the case of a new emergency call where the terminating client is
> using a pre-established session, the SIP INVITE request containing a
> Replaces header is used to replace the pre-established session.
>
> 8) shall send the SIP 200 (OK) response towards the MCVideo server according
> to rules and procedures of 3GPP TS 24.229 [11];
>
> 9) shall, if the incoming SIP INVITE request contains a Replaces header
> field, release the pre-established session identified by the contents of the
> Replaces header field; and
>
> 10) shall interact with the media plane as specified in 3GPP TS 24.581 [5].
When NAT traversal is supported by the MCVideo client and when the MCVideo
client is behind a NAT, generation of SIP responses is done as specified in
this subclause and as specified in IETF RFC 5626 [35].
[TS 24.281, clause 6.2.3.1.2]
When performing the automatic commencement mode procedures, the MCVideo client
shall follow the procedures in subclause 6.2.3.1.1 with the following
clarification:
> \- The MCVideo client may include a P-Answer-State header field with the
> value \"Confirmed\" as specified in IETF RFC 4964 [30] in the SIP 200 (OK)
> response.
[TS 24.281, clause 9.2.1.2.3.3]
Upon receiving a SIP BYE request for releasing the prearranged MCVideo group
call, the MCVideo client shall follow the procedures as specified in subclause
6.2.6.
[TS 24.581, clause 6.2.5.2.2]
When an MCVideo call is established, the terminating transmission participant:
> 1\. shall create an instance of a \'Transmission participant state
> transition diagram for general reception control operation\'; and
>
> 2\. shall enter the \'U: reception controller\' state.
>
> NOTE: From a transmission participant perspective the MCVideo call is
> established when the application and signalling plane sends the SIP 200 (OK)
> response.
[TS 24.581, clause 6.2.5.3.2]
Upon receiving the media transmission notification from the transmission
control server, the transmission participant:
> 1\. if the first bit in the subtype of the media transmission notification
> message is set to \'1\' (Acknowledgment is required) as described in clause
> 9.2.2.1, shall send a Transmission control Ack message. The Transmission
> control Ack message:
>
> a. shall include the Message Type field set to \'6\' (Media transmission
> notification); and
>
> b. shall include the Source field set to \'0\' (the transmission participant
> is the source);
>
> 2\. shall provide media transmission notification to the user;
>
> 3\. shall store the User ID and the SSRC of the user transmitting the media;
>
> 4\. if the Reception Mode field is set to \'0\' indicating automatic
> reception mode:
>
> a. shall create an instance of the \'Transmission participant state
> transition diagram for basic reception control operation\';
>
> b. shall map the stored User ID and the SSRC of the user transmitting the
> media with the instance of \'Transmission participant state transition
> diagram for basic reception control operation\' created in step a); and
>
> c. shall enter the \'U: has permission to receive\' state;
>
> 5\. may display the details of the incoming media to the user; and
>
> 6\. shall remain in the \'U: reception controller\' state.
[TS 24.581, clause 6.2.5.3.3]
Upon receiving an indication from the user to request permission to receive
media, the transmission participant:
> 1\. shall send the Receive Media Request message toward the transmission
> control server; The Receive Media Request message:
>
> a. if a different priority than the normal priority is required, shall
> include the Reception Priority field with the priority not higher than
> negotiated with the transmission control server as specified in subclause
> 14.3.3; and
>
> b. if the receive media request is a broadcast group call, system call,
> emergency call or an imminent peril call, shall include a Transmission
> Indicator field indicating the relevant call types;
>
> 2\. shall create an instance of the \'Transmission participant state
> transition diagram for basic reception control operation\';
>
> 3\. shall map the stored User ID and the SSRC of the user transmitting the
> media with instance of \'Transmission participant state transition diagram
> for basic reception control operation\' created in step 2; and
>
> 4\. shall remain in the \'U: reception controller\' state.
[TS 24.581, clause 6.2.5.3.4]
Upon receiving a Transmission end notify message, the transmission
participant:
> 1\. shall inform the user about the media transmission ended by another
> user; and
>
> 2\. shall remain in the \'U: reception controller\' state.
[TS 24.581, clause 6.2.5.4.5]
Upon receiving a granted response for Receive media request message, the
transmission participant:
> 1\. if the first bit in the subtype of the Receive media response message is
> set to \'1\' (Acknowledgment is required) as described in subclause 9.2.2.1,
> shall send a Transmission control Ack message. The Transmission control Ack
> message:
>
> a. shall include the Message Type field set to \'7\' (Receive media
> response); and
>
> b. shall include the Source field set to \'0\' (the transmission participant
> is the source);
>
> 2\. shall provide receive media success notification to the user;
>
> 3\. if the Receive Media Indicator field is included and the B-bit is set to
> \'1\' (Broadcast group call), shall provide a notification to the user
> indicating the type of call;
>
> 4\. shall stop timer T103 (Receive Media Request); and
>
> 5\. shall enter the \'U: has permission to receive\' state.
[TS 24.581, clause 6.2.5.5.3]
Upon receiving an indication from the user to end the RTP media reception, the
transmission participant:
> 1\. shall send a Media reception end request message towards the
> transmission control server The Media reception end request message:
>
> a. if the session is a broadcast call and if the session was established as
> a normal call, shall include the Transmission Indicator with the A-bit set
> to \'1\' (Normal call); and
>
> b. shall include the SSRC of user transmitting the media in the Media
> reception end request message;
>
> 2\. shall remove the indication that the participant is overriding without
> revoke if this indication is stored;
>
> 3\. shall remove the indication that the participant is overridden without
> revoke if this indication is stored;
>
> 4\. shall start timer T104 (Receive Media Release) and initialize counter
> C104 (Receive Media Release) to 1; and
>
> 5\. shall enter the \'U: pending reception release\' state.
[TS 24.581, clause 6.2.5.5.4]
Upon receiving a Media reception override notify message, the transmission
participant:
> 1\. shall inform the user that the permission to receive a RTP media is
> being overridden;
>
> 2\. may give information to the user about the reason for overriding the
> received RTP media;
>
> 3\. shall send a Media reception end request message towards the
> transmission control server;
>
> 4\. shall start timer T104 (Receive Media Release) and initialize counter
> C104 (Receive Media Release) to 1; and
>
> 5\. shall enter the \'U: pending reception release\' state.
[TS 24.581, clause 6.2.5.5.5]
Upon receiving a Media reception end request message, the transmission
participant:
> 1\. if the first bit in the subtype of the Media reception end request
> message set to \"1\" (Acknowledgment is required) as described in subclause
> 8.3.2, shall send a Reception control Ack message. The Reception control Ack
> message:
>
> a. shall include the Message Type field set to \'2\' (Media reception end
> request);
>
> b. shall include the Source field set to \'0\' (the transmission participant
> is the source); and
>
> c. shall include the Message Name field set to MCV2.
>
> 2\. shall inform the user that the receiving RTP media is being ended;
>
> 3\. may give information to the user about the reason for ending the
> received RTP media;
>
> 4\. shall request the MCVideo client to discard any remaining buffered RTP
> media packets and stop displaying to user;
>
> 5\. shall send a Media reception end response message towards the
> transmission control server;
>
> 6\. may provide a Media reception end notification to the MCVideo user;
>
> 7\. if the Receive Media Indicator field is included and the B-bit set to
> \'1\' (Broadcast group call), shall provide a notification to the user
> indicating the type of call; and
>
> 8\. shall enter the \'terminated\' state.
[TS 24.581, clause 6.2.5.6.4]
Upon receiving a MRE response message, the transmission participant:
> 1\. if the first bit in the subtype of the MRE response message set to \'1\'
> (Acknowledgment is required) as described in subclause 9.2.2.1, shall send a
> Transmission control Ack message. The Transmission control Ack message:
>
> a. shall include the Message Type field set to \'3\' (Media reception end
> response); and
>
> b. shall include the Source field set to \'0\' (the transmission participant
> is the source);
>
> 2\. may provide a Media reception end notification to the MCVideo user;
>
> 3\. if the Receive Media Indicator field is included and the B-bit set to
> \'1\' (Broadcast group call), shall provide a notification to the user
> indicating the type of call;
>
> 4\. shall stop timer T104 (Receive Media Release); and
>
> 5\. shall enter the \'terminated\'.
[TS 24.581, clause 6.2.5.8.1]
This state is part of the \'Transmission participant state transition diagram
for basic reception control operation\'. On entering this state, the
transmission participant:
> 1\. shall delete the instance of this basic reception control state machine;
> and
>
> 2\. if the session was initiated as a broadcast group call, shall indicate
> to the \'Transmission participant state transition diagram for general
> reception control operation\' state machine to move to \'Call releasing\'
> state.
##### 6.1.1.13.3 Test description {#test-description-16 .H6}
##### 6.1.1.13.3.1 Pre-test conditions {#pre-test-conditions-16 .H6}
##### System Simulator: {#system-simulator-12 .H6}
\- SS (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
##### IUT: {#iut-11 .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
##### Preamble: {#preamble-12 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- UE States at the end of the preamble
\- The UE is in E-UTRA Registered, Idle Mode state.
\- The MCVideo Client Application has been activated and User has registered-
in as the MCVideo User with the Server as active user at the Client.
##### 6.1.1.13.3.2 Test procedure sequence {#test-procedure-sequence-16 .H6}
Table 6.1.1.13.3.2-1: Main Behaviour
+-----------+-----------+-----------+-----------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +===========+===========+===========+===========+=========+====+ | | | U - S | Message | | | +-----------+-----------+-----------+-----------+---------+----+ | 1 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CT | | | | | | | session | | | | | | | establis | | | | | | | hment/mod | | | | | | | ification | | | | | | | without | | | | | | | pr | | | | | | | ovisional | | | | | | | responses | | | | | | | other | | | | | | | than 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3.4.3-1 | | | | | | | to | | | | | | | establish | | | | | | | a group | | | | | | | call with | | | | | | | automatic | | | | | | | com | | | | | | | mencement | | | | | | | mode? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 2-4 | Void | - | - | - | - | +-----------+-----------+-----------+-----------+---------+----+ | 5 | Check: | - | - | - | - | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Tra | | | | | | | nsmission | | | | | | | Not | | | | | | | ification | | | | | | | and | | | | | | | Request | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5. | | | | | | | 3B.3.3-1? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 6-8 | Void | - | - | - | - | +-----------+-----------+-----------+-----------+---------+----+ | 9 | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | provide | | | | | | | receive | | | | | | | media | | | | | | | success | | | | | | | not | | | | | | | ification | | | | | | | to the | | | | | | | user? | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 10 | The SS | \ 1) if the MCVideo user has requested the origination of an MCVideo emergency
> group call or is originating an MCVideo chat group call and the MCVideo
> emergency state is already set, the MCVideo client shall comply with the
> procedures in subclause 6.2.8.1.1;
>
> 2) if the MCVideo user has requested the origination of an MCVideo imminent
> peril group call, the MCVideo client shall comply with the procedures in
> subclause 6.2.8.1.9;
>
> 3) shall include the g.3gpp.mcvideo media feature tag and the g.3gpp.icsi-
> ref media feature tag with the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" in the Contact header field of the SIP INVITE
> request according to IETF RFC 3840 [22];
>
> 4) shall include an Accept-Contact header field containing the
> g.3gpp.mcvideo media feature tag along with the \"require\" and \"explicit\"
> header field parameters according to IETF RFC 3841 [20];
>
> 5) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
> (coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
> field according to IETF RFC 6050 [14] in the SIP INVITE request;
>
> 6) shall include an Accept-Contact header field with the g.3gpp.icsi-ref
> media feature tag containing the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" along with the \"require\" and \"explicit\"
> header field parameters according to IETF RFC 3841 [20];
>
> 7) should include the \"timer\" option tag in the Supported header field;
>
> 8) should include the Session-Expires header field according to IETF RFC
> 4028 [23]. It is recommended that the refresher parameter is omitted. If
> included, the refresher parameter shall be set to \"uac\";
>
> 9) shall set the Request-URI of the SIP INVITE request to the public service
> identity identifying the participating MCVideo function serving the MCVideo
> user;
>
> NOTE 1: The MCVideo client is configured with public service identity
> identifying the participating MCVideo function serving the MCVideo user.
>
> 10) may include a P-Preferred-Identity header field in the SIP INVITE
> request containing a public user identity as specified in 3GPP TS 24.229
> [11];
>
> 11) if the MCVideo emergency state is already set or the MCVideo client
> emergency group state for this group is set to \"MVEG 2: in-progress\", the
> MCVideo client shall comply with the procedures in subclause 6.2.8.1.2;
>
> 12) if the MCVideo client imminent peril group state for this group is set
> to \"MIG 2: in-progress\" or \"MVIG 3: confirm-pending\" shall include the
> Resource-Priority header field and comply with the procedures in subclause
> 6.2.8.1.12;
>
> 13) shall contain an application/vnd.3gpp.mcvideo-info+xml MIME body with
> the \ element containing the \ element with:
>
> a) the \ element set to a value of \"chat\";
>
> b) the \ element set to the group identity; and
>
> c) the \ element set to the MCVideo client ID of the
> originating MCVideo client;
>
> NOTE 2: The MCVideo ID of the originating MCVideo user is not included in
> the body, as this will be inserted into the body of the SIP INVITE request
> that is sent by the originating participating MCVideo function.
>
> 14) shall include in the SIP INVITE request an SDP offer according to 3GPP
> TS 24.229 [11] with the clarifications specified in subclause 6.2.1;
>
> 15) if an implicit transmission request is required, shall indicate this as
> specified in subclause 6.4; and
>
> 16) shall send the SIP INVITE request according to 3GPP TS 24.229 [11].
On receiving a SIP 2xx response to the SIP INVITE request, the MCVideo client:
> 1) shall interact with the user plane as specified in 3GPP TS 24.581 [5];
> and
>
> 2) if the MCVideo emergency group call state is set to \"MEGC 2: emergency-
> call-requested\" or \"MVEGC 3: emergency-call-granted\" or the MCVideo
> imminent peril group call state is set to \"MVIGC 2: imminent-peril-call-
> requested\" or \"MVIGC 3: imminent-peril-call-granted\", the MCVideo client
> shall perform the actions specified in subclause 6.2.8.1.4.
On receiving a SIP 4xx response, a SIP 5xx response or a SIP 6xx response to
the SIP INVITE request:
> 1) if the MCVideo emergency group call state is set to \"MVEGC 2: emergency-
> call-requested\" or \"MVEGC 3: emergency-call-granted\"; or
>
> 2) if the MCVideo imminent peril group call state is set to \"MVIGC 2:
> imminent-peril-call-requested\" or \"MVIGC 3: imminent-peril-call-granted\";
the MCVideo client shall perform the actions specified in subclause 6.2.8.1.5.
On receiving a SIP INFO request where the Request-URI contains an MCVideo
session ID identifying an ongoing group session, the MCVideo client shall
follow the actions specified in subclause 6.2.8.1.13.
[TS 24.281, clause 9.2.2.2.2.1]
When an MCVideo client wants to leave the MCVideo session that has been
established using on-demand session, the MCVideo client shall follow the
procedures as specified in clause 6.2.4.1.
[TS 24.581, clause 6.2.1]
Based on the negotiations during the call establishment specified in 3GPP TS
24.281 [2], a new instance of the \'Transmission participant state transition
diagram for basic transmission control operation\', as specified in subclause
6.2.4 and a new instance of the \'Transmission participant state transition
diagram for basic reception control operation\' as specified in subclause
6.2.5, shall be created for this call.
The SIP INVITE request sent by the application and signalling plane:
> 1\. shall be regarded an implicit Transmission request when an implicit
> Transmission request is negotiated; and
>
> 2\. shall not be regarded as an implicit Transmission request in case of a
> re-join to an already on-going group call.
>
> NOTE: The transmission participant can negotiate the use of prioritization
> of the Transmission Media Request message. In that case, the transmission
> participant can request permission to send media at a priority level that is
> either the same as or lower than the highest priority that was permitted to
> the participant in the MCVideo call initialization. If a transmission
> participant is authorized for pre-emptive priority in the MCVideo call it is
> good practise to always request permission to send RTP media packets at a
> priority level that is lower than pre-emptive priority unless the user
> explicitly requests to pre-empt the current RTP media packets sender.
[TS 24.581, clause 6.2.4.1]
The transmission participant shall behave according to the state diagram and
the state transitions specified in this subclause.
Figure 6.2.4.1-1 shows the state diagram for \'Transmission participant state
transition diagram for basic transmission control operation\'.
...
State details are explained in the following subclauses.
If a transmission control message arrives in a state where there is no
specific procedure specified for received transmission control message, the
transmission participant shall discard the transmission control message and
shall remain in the current state.
> NOTE: A badly formatted transmission control message received in any state
> is ignored by the transmission participant and does not cause any change of
> the current state.
[TS 24.581, clause 6.2.4.4.6]
Upon receiving a Transmission Granted message from the transmission control
server, the transmission participant:
> 1\. if the first bit in the subtype of the Transmission Granted message is
> set to \'1\' (Acknowledgment is required) as described in subclause 9.2.2.1,
> shall send a Transmission control Ack message. The Transmission control Ack
> message:
>
> a. shall include the Message Type field set to \'0\' (Transmission Granted);
> and
>
> b. shall include the Source field set to \'0\' (the transmission participant
> is the source);
>
> 2\. shall store the SSRC of granted transmission participant received in the
> Transmission Granted message and use it in the RTP media packets until the
> transmission is released;
>
> 3\. shall provide Transmission granted notification to the user, if not
> already done;
>
> 4\. shall stop timer T100 (Transmission Request); and
>
> 5\. shall enter the \'U: has permission to transmit\' state.
[TS 24.581, clause 6.2.4.5.3]
Upon receiving an indication from the user to end the permission to send RTP
media, the transmission participant:
> 1\. shall send a Transmission end request message towards the transmission
> control server. The Transmission end request message, if the session is a
> broadcast call and if the session was established as a normal call, shall
> include the Transmission Indicator with the A-bit set to \'1\' (Normal
> call);
>
> 2\. shall start timer T101 (Transmission End Request) and initialize counter
> C101 (Transmission End Request) to 1; and
>
> 3\. shall enter the \'U: pending end of transmission\' state.
[TS 24.581, clause 6.2.4.4.7]
Upon receiving an indication from the user to end the Transmission request,
the transmission participant:
> 1\. shall send a Transmission end request message towards the transmission
> control server. The Transmission end request message, if the session is a
> broadcast call and if the session was established as a normal call, shall
> include the Transmission Indicator with the A-bit set to \'1\' (Normal
> call);
>
> 2\. shall stop time T100 (Transmission Request)
>
> 3\. shall start timer T101 (Transmission End Request) and initialize counter
> C101 (Transmission End Request) to 1; and
4\. shall enter the \'U: pending end of transmission\' state.
##### 6.1.2.1.3 Test description {#test-description-17 .H6}
##### 6.1.2.1.3.1 Pre-test conditions {#pre-test-conditions-17 .H6}
##### System Simulator: {#system-simulator-13 .H6}
\- SS (MCVideo server).
\- E-UTRA related parameters are set to the default parameters for the basic
single cell environment, as defined in TS 36.508 [24] subclause 4.4.
##### IUT: {#iut-12 .H6}
\- UE (MCVideo client) has been provisioned with the Initial UE Configuration
Data as specified in TS 36.579-1 [2] clause 5.5.8.1 allowing for the location
of the configuration management server for configuration of the MCVideo UE
initial configuration management object (MO) and the default MCVideo user
profile configuration management object (MO).
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
##### Preamble: {#preamble-13 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- UE States at the end of the preamble
\- The UE is in E-UTRA Registered, Idle Mode state.
\- The MCVideo Client Application has been activated and user has registered-
in as the MCVideo User with the Server as active user at the client.
##### 6.1.2.1.3.2 Test procedure sequence {#test-procedure-sequence-17 .H6}
Table 6.1.2.1.3.2-1: Main Behaviour
+------------+------------+------------+---------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +============+============+============+=========+=========+====+ | | | U - S | Message | | | +------------+------------+------------+---------+---------+----+ | 1 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | the | | | | | | | est | | | | | | | ablishment | | | | | | | of a chat | | | | | | | group call | | | | | | | with | | | | | | | implicit | | | | | | | tr | | | | | | | ansmission | | | | | | | request. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 2 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | CO session | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3B.1.3-1 | | | | | | | to | | | | | | | establish | | | | | | | the chat | | | | | | | group call | | | | | | | with | | | | | | | implicit | | | | | | | tr | | | | | | | ansmission | | | | | | | control | | | | | | | according | | | | | | | to option | | | | | | | b,ii of | | | | | | | NOTE 1 in | | | | | | | TS | | | | | | | 36.579.1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.1.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 3-7 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 8 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | notify the | | | | | | | user that | | | | | | | the call | | | | | | | has been | | | | | | | es | | | | | | | tablished? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 9 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | end of | | | | | | | tra | | | | | | | nsmission. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 10 | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | tr | | | | | | | ansmission | | | | | | | End | | | | | | | Request | | | | | | | CO\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.7.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 11-13 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 14 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | release | | | | | | | the call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 15 | Check: | - | - | 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CO | | | | | | | call | | | | | | | release\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 16 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | NOTE 1: | | | | | | | This is | | | | | | | expected | | | | | | | to be done | | | | | | | via a | | | | | | | suitable | | | | | | | impl | | | | | | | ementation | | | | | | | dependent | | | | | | | MMI. | | | | | | +------------+------------+------------+---------+---------+----+
##### 6.1.2.1.3.3 Specific message contents {#specific-message-contents-17
.H6}
Table 6.1.2.1.3.3-1: SIP INVITE from the UE (Step 2, Table 6.1.2.1.3.2-1;\
Step 2, TS 36.579-1 [2] Table 5.3B.1.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.1-1
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP message**  
MIME-part-body SDP Message as described in Table 6.1.2.1.3.3-1A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.1.2.1.3.3-2
Table 6.1.2.1.3.3-1A: SDP message in SIP INVITE (Table 6.1.2.1.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.1-2, condition
INITIAL_SDP_OFFER, IMPLICIT_GRANT_REQUESTED
* * *
Table 6.1.2.1.3.3-2: MCVideo-Info in SIP INVITE (Table 6.1.2.1.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition CHAT-GROUP-
CALL, INVITE_REFER
* * *
Table 6.1.2.1.3.3-3: SIP 200 (OK) from the SS (Step 2, Table 6.1.2.1.3.2-1;\
Step 4, TS 36.579-1 [2] Table 5.3B.1.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.17.1.2-1, condition INVITE-RSP
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
SDP Message As described in Table 6.1.2.1.3.3-3B
Table 6.1.2.1.3.3-3A: Void
Table 6.1.2.1.3.3-3B: SDP message in SIP 200 (OK) (Table 6.1.1.12.3.3-3)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition SDP_ANSWER,
IMPLICIT_GRANT_REQUESTED
* * *
Table 6.1.2.1.3.3-4..8: Void
6.1.2.2 On-network / Chat Group Call / Upgrade to Emergency Chat Group Call /
Cancel Emergency Chat Group Call / Upgrade to Imminent Peril Chat Group Call /
Cancel Imminent Peril Chat Group Call / Client Origination (CO)
##### 6.1.2.2.1 Test Purpose (TP) {#test-purpose-tp-18 .H6}
##### (1) {#section-82 .H6}
**with** { UE (MCVideo Client) registered and authorised for MCVideo Service }
ensure that {
**when** { the MCVideo User requests the establishment of an on-demand MCVideo
group session using a MCVideo group identity identifying a chat MCVideo group
}
**then** {the UE (MCVideo Client) requests to join the Chat Group Call by
generating a SIP INVITE message **and** , after indication from the SS
(MCVideo Server_ that Transmission is granted, the UE (MCVideo Client)
provides transmission granted notification to the user and respects
Transmission Control throughout the session (Transmission Granted,
Transmission Control ACK, Transmission End Request, Transmission End Response)
}
}
##### (2) {#section-83 .H6}
**with** { UE (MCVideo Client) having established a Chat Group Call and the
MCVideo User being authorized for initiating an MCVideo Emergency Group Call }
ensure that {
**when** { the MCVideo User requests to upgrade the ongoing MCVideo Group Call
to a MCVideo Emergency Group Call with Transmission Control }
**then** { UE (MCVideo Client) sends a SIP re-INVITE request and upon receipt
of a SIP 2xx response considers the call as being upgraded to an Emergency
Group Call **and** notifies the MCVideo User that the call has been upgraded }
}
##### (3) {#section-84 .H6}
**with** { UE (MCVideo Client) having upgraded an On-demand Group Call to an
Emergency Chat Group Call and the MCVideo User being authorized for cancelling
a MCVideo Emergency state (MCVideo in-progress emergency cancel) }
ensure that {
**when** { the MCVideo User requests to cancel the ongoing McVideo Emergency
state }
**then** { UE (MCVideo Client) sends a SIP re-INVITE request and upon receipt
of a SIP 2xx response considers the emergency condition cancelled **and**
notifies the user that the call has been downgraded }
}
##### (4) {#section-85 .H6}
**with** { UE (MCVideo Client) having established an a Chat Group Call and the
MCVideo User being authorized for initiating an MCVideo Imminent Peril Chat
Group Call }
ensure that {
**when** { the MCVideo User requests to upgrade the ongoing MCVideo Chat Group
Call to a MCVideo Imminent Peril Chat Group Call with Transmission Control }
**then** { UE (MCVideo Client) sends a SIP re-INVITE request and upon receipt
of a SIP 2xx response considers the call as being upgraded to Imminent Peril
Chat Group Call **and** notifies the user that the call has been upgraded }
}
##### (5) {#section-86 .H6}
**with** { UE (MCVideo Client) having upgraded an On-demand Chat Group Call to
an Imminent Peril Group Call and the MCVideo User being authorized for
cancelling an MCVideo Imminent Peril Chat Group Call state (MCVideo in-
progress imminent peril cancel) }
ensure that {
**when** { the MCVideo User requests to cancel the ongoing MCVideo Imminent
Peril state }
**then** { UE (MCVideo Client) sends a SIP re-INVITE request and upon receipt
of a SIP 2xx response considers the imminent peril condition cancelled }
}
##### (6) {#section-87 .H6}
**with** { UE (MCVideo Client) having an ongoing On-demand Chat Group Call }
ensure that **{**
**when** { the MCVideo User requests to terminate the ongoing MCVideo Chat
Group Call }
**then** { UE (MCVideo Client) sends a SIP BYE request and leaves the MCVideo
session }
}
##### 6.1.2.2.2 Conformance Requirements {#conformance-requirements-18 .H6}
References: The conformance requirements covered in the present TC are
specified in: TS 24.281, clauses 9.2.2.2.1.1, 9.2.2.2.1.3, 9.2.2.2.1.4,
9.2.2.2.1.5, TS 24.581 clauses 6.2.1, 6.2.4.4.6, 6.4.1, 6.4.2, 6.4.3, 6.4.4.
The following represents a copy/paste extraction of the requirements relevant
to the test purpose; any references within the copy/paste text should be
understood within the scope of the core spec they have been copied from.
Unless otherwise stated these are Rel-14 requirements.
[TS 24.281, clause 9.2.2.2.1.1]
Upon receiving a request from an MCVideo user to establish an MCVideo group
session using an MCVideo group identity, identifying a chat MCVideo group, the
MCVideo client shall generate an initial SIP INVITE request by following the
UE originating session procedures specified in 3GPP TS 24.229 [11], with the
clarifications given below.
The MCVideo client:
> 1) if the MCVideo user has requested the origination of an MCVideo emergency
> group call or is originating an MCVideo chat group call and the MCVideo
> emergency state is already set, the MCVideo client shall comply with the
> procedures in subclause 6.2.8.1.1;
>
> 2) if the MCVideo user has requested the origination of an MCVideo imminent
> peril group call, the MCVideo client shall comply with the procedures in
> subclause 6.2.8.1.9;
>
> 3) shall include the g.3gpp.mcvideo media feature tag and the g.3gpp.icsi-
> ref media feature tag with the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" in the Contact header field of the SIP INVITE
> request according to IETF RFC 3840 [22];
>
> 4) shall include an Accept-Contact header field containing the
> g.3gpp.mcvideo media feature tag along with the \"require\" and \"explicit\"
> header field parameters according to IETF RFC 3841 [20];
>
> 5) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
> (coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
> field according to IETF RFC 6050 [14] in the SIP INVITE request;
>
> 6) shall include an Accept-Contact header field with the g.3gpp.icsi-ref
> media feature tag containing the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" along with the \"require\" and \"explicit\"
> header field parameters according to IETF RFC 3841 [20];
>
> 7) should include the \"timer\" option tag in the Supported header field;
>
> 8) should include the Session-Expires header field according to IETF RFC
> 4028 [23]. It is recommended that the refresher parameter is omitted. If
> included, the refresher parameter shall be set to \"uac\";
>
> 9) shall set the Request-URI of the SIP INVITE request to the public service
> identity identifying the participating MCVideo function serving the MCVideo
> user;
>
> NOTE 1: The MCVideo client is configured with public service identity
> identifying the participating MCVideo function serving the MCVideo user.
>
> 10) may include a P-Preferred-Identity header field in the SIP INVITE
> request containing a public user identity as specified in 3GPP TS 24.229
> [11];
>
> 11) if the MCVideo emergency state is already set or the MCVideo client
> emergency group state for this group is set to \"MVEG 2: in-progress\", the
> MCVideo client shall comply with the procedures in subclause 6.2.8.1.2;
>
> 12) if the MCVideo client imminent peril group state for this group is set
> to \"MIG 2: in-progress\" or \"MVIG 3: confirm-pending\" shall include the
> Resource-Priority header field and comply with the procedures in subclause
> 6.2.8.1.12;
>
> 13) shall contain an application/vnd.3gpp. mcvideo-info+xml MIME body with
> the \ element containing the \ element with:
>
> a) the \ element set to a value of \"chat\";
>
> b) the \ element set to the group identity; and
>
> c) the \ element set to the MCVideo client ID of the
> originating MCVideo client;
>
> NOTE 2: The MCVideo ID of the originating MCVideo user is not included in
> the body, as this will be inserted into the body of the SIP INVITE request
> that is sent by the originating participating MCVideo function.
>
> 14) shall include in the SIP INVITE request an SDP offer according to 3GPP
> TS 24.229 [11] with the clarifications specified in subclause 6.2.1;
>
> 15) if an implicit transmission request is required, shall indicate this as
> specified in subclause 6.4; and
>
> 16) shall send the SIP INVITE request according to 3GPP TS 24.229 [11].
On receiving a SIP 2xx response to the SIP INVITE request, the MCVideo client:
> 1) shall interact with the user plane as specified in 3GPP TS 24.581 [5];
> and
>
> 2) if the MCVideo emergency group call state is set to \"MEGC 2: emergency-
> call-requested\" or \"MVEGC 3: emergency-call-granted\" or the MCVideo
> imminent peril group call state is set to \"MVIGC 2: imminent-peril-call-
> requested\" or \"MVIGC 3: imminent-peril-call-granted\", the MCVideo client
> shall perform the actions specified in subclause 6.2.8.1.4.
On receiving a SIP 4xx response, a SIP 5xx response or a SIP 6xx response to
the SIP INVITE request:
> 1) if the MCVideo emergency group call state is set to \"MVEGC 2: emergency-
> call-requested\" or \"MVEGC 3: emergency-call-granted\"; or
>
> 2) if the MCVideo imminent peril group call state is set to \"MVIGC 2:
> imminent-peril-call-requested\" or \"MVIGC 3: imminent-peril-call-granted\";
the MCVideo client shall perform the actions specified in subclause 6.2.8.1.5.
On receiving a SIP INFO request where the Request-URI contains an MCVideo
session ID identifying an ongoing group session, the MCVideo client shall
follow the actions specified in subclause 6.2.8.1.13.
[TS 24.281, clause 9.2.2.2.1.3]
This subclause covers both on-demand session.
Upon receiving a request from an MCVideo user to cancel the in-progress
emergency condition on a chat MCVideo group, the MCVideo client shall generate
a SIP re-INVITE request as specified in 3GPP TS 24.229 [11], with the
clarifications given below.
The MCVideo client:
> 1) if the MCVideo user is not authorised to cancel the in-progress emergency
> group state of the MCVideo group as determined by the procedures of
> subclause 6.2.8.1.7, the MCVideo client:
>
> a) should indicate to the MCVideo user that they are not authorised to
> cancel the in-progress emergency group state of the MCVideo group; and
>
> b) shall skip the remaining steps of the current subclause;
>
> 2) shall, if the MCVideo user is cancelling an in-progress emergency
> condition and optionally an MCVideo emergency alert originated by the
> MCVideo user, include an application/vnd.3gpp.mcvideo-info+xml MIME body
> populated as specified in subclause 6.2.8.1.3;
>
> 3) shall, if the MCVideo user is cancelling an in-progress emergency
> condition and optionally an MCVideo emergency alert originated by another
> MCVideo user, include an application/vnd.3gpp.mcvideo-info+xml MIME body
> populated as specified in subclause 6.2.8.1.14;
>
> 4) shall, if the SIP re-INVITE request is to be sent within an on-demand
> session, include in the SIP re-INVITE request an SDP offer according to 3GPP
> TS 24.229 [51] with the clarifications specified in subclause 6.2.1;
>
> 5) shall include a Resource-Priority header field and comply with the
> procedures in subclause 6.2.8.1.2; and
>
> 6) shall send the SIP re-INVITE request according to 3GPP TS 24.229 [11].
On receiving a SIP 2xx response to the SIP re-INVITE request, the MCVideo
client:
> 1) shall set the MCVideo emergency group state of the group to \"MVEG 1: no-
> emergency\";
>
> 2) shall set the MCVideo emergency group call state of the group to \"MVEGC
> 1: emergency-gc-capable\"; and
>
> 3) if the MCVideo emergency alert state is set to \"MVEA 4: Emergency-alert-
> cancel-pending\", the sent SIP re-INVITE request did not contain an
> \ element in the application/vnd.3gpp.mcvideo-info+xml MIME
> body and the SIP 2xx response to the SIP request for a priority group call
> does not contain a Warning header field as specified in subclause 4.4 with
> the warning text containing the mcvideo-warn-code set to \"149\", shall set
> the MCVideo emergency alert state to \"MVEA 1: no-alert\".
On receiving a SIP 4xx response, SIP 5xx response or SIP 6xx response to the
SIP re-INVITE request:
> 1) shall set the MCVideo emergency group state as \"MVEG 2: in-progress\";
>
> 2) if the SIP 4xx response, SIP 5xx response or SIP 6xx response contains an
> application/vnd.3gpp.mcvideo-info+xml MIME body with an \ element
> set to a value of \"true\" and the sent SIP re-INVITE request did not
> contain an \ element in the application/vnd.3gpp.mcvideo-
> info+xml MIME body, the MCVideo client shall set the MCVideo emergency alert
> state to \"MVEA 3: emergency-alert-initiated\"; and
>
> 3) if the SIP 4xx response, SIP 5xx response or SIP 6xx response did not
> contain an application/vnd.3gpp.mcvideo-info+xml MIME body with an \ ind> element and did not contain an \ element, the MCVideo
> emergency alert (MVEA) state shall revert to its value prior to entering the
> current procedure.
>
> NOTE 3: If the in-progress emergency group state cancel request is rejected,
> the state of the session does not change, i.e. continues with MCVideo
> emergency group call level priority.
On receiving a SIP INFO request where the Request-URI contains an MCVideo
session ID identifying an ongoing group session, the MCVideo client shall
follow the actions specified in subclause 6.2.8.1.13.
[TS 24.281, clause 9.2.2.2.1.4]
This subclause covers both on-demand sessions.
Upon receiving a request from an MCVideo user to upgrade the MCVideo group
session to an emergency condition or an imminent peril condition on a chat
MCVideo group, the MCVideo client shall generate a SIP re-INVITE request as
specified in 3GPP TS 24.229 [11], with the clarifications given below.
> 1) if the MCVideo user is requesting to upgrade the MCVideo group session to
> an in-progress emergency group state and is not authorised to do so as
> determined by the procedures of subclause 6.2.8.1.8, the MCVideo client:
>
> a) should indicate to the MCVideo user that they are not authorised to
> upgrade the MCVideo group session to an in-progress emergency group state;
> and
>
> b) shall skip the remaining steps of the current subclause;
>
> 2) if the MCVideo user is requesting to upgrade the MCVideo group session to
> an in-progress imminent peril state and is not authorised to do so as
> determined by the procedures of subclause 6.2.8.1.8, the MCVideo client:
>
> a) should indicate to the MCVideo user that they are not authorised to
> upgrade the MCVideo group session to an in-progress imminent peril group
> state; and
>
> b) shall skip the remaining steps of the current subclause;
>
> 3) if the MCVideo user has requested to upgrade the MCVideo group session to
> an MCVideo emergency call, the MCVideo client:
>
> a) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body
> populated as specified in subclause 6.2.8.1.1;
>
> b) if an indication of an MCVideo emergency alert is to be included, shall
> perform the procedures specified in subclause 6.2.9.1 for the MCVideo
> emergency alert trigger; and
>
> c) shall include a Resource-Priority header field and comply with the
> procedures in subclause 6.2.8.1.2.
>
> 4) if the MCVideo user has requested to upgrade the MCVideo group session to
> an MCVideo imminent peril call, the MCVideo client:
>
> a) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body
> populated as specified in subclause 6.2.8.1.9; and
>
> b) shall include a Resource-Priority header field and comply with the
> procedures in subclause 6.2.8.1.12;
>
> 5) if the SIP re-INVITE request is to be sent within an on-demand session,
> shall include in the SIP re-INVITE request an SDP offer according to 3GPP TS
> 24.229 [11] with the clarifications specified in subclause 6.2.1;
>
> 6) if an implicit transmission request is required, shall indicate this as
> specified in subclause 6.4;
>
> 7) shall include a Resource-Priority header field and comply with the
> procedures in subclause 6.2.8.1.2; and
>
> 8) shall send the SIP re-INVITE request according to 3GPP TS 24.229 [11].
On receiving a SIP 2xx response to the SIP re-INVITE request the MCVideo
client:
> 1) shall interact with the user plane as specified in 3GPP TS 24.581 [5];
> and
>
> 2) shall perform the actions specified in subclause 6.2.8.1.4.
On receiving a SIP 4xx response, SIP 5xx response or SIP 6xx response to the
SIP re-INVITE request the MCVideo client shall perform the actions specified
in subclause 6.2.8.1.5.
On receiving a SIP INFO request where the Request-URI contains an MCVideo
session ID identifying an ongoing group session, the MCVideo client shall
follow the actions specified in subclause 6.2.8.1.13.
[TS 24.281, clause 9.2.2.2.1.5]
This subclause covers on-demand session.
Upon receiving a request from an MCVideo user to cancel the in-progress
imminent peril condition on a chat MCVideo group, the MCVideo client shall
generate a SIP re-INVITE request by following the procedures specified in 3GPP
TS 24.229 [11], with the clarifications given below.
The MCVideo client:
> 1) if the MCVideo user is not authorised to cancel the in-progress imminent
> peril group state of the MCVideo group as determined by the procedures of
> subclause 6.2.8.1.10, the MCVideo client:
>
> a) should indicate to the MCVideo user that they are not authorised to
> cancel the in-progress imminent peril group state of the MCVideo group; and
>
> b) shall skip the remaining steps of the current subclause;
>
> 2) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body
> populated as specified in subclause 6.2.8.1.11;
>
> 3) shall include a Resource-Priority header field and comply with the
> procedures in subclause 6.2.8.1.12;
>
> 4) shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body with
> the \ element containing the \ element with:
>
> a) the \ element set to a value of \"chat\"; and
>
> b) the \ element set to the group identity;
>
> NOTE 1: The MCVideo ID of the originating MCVideo user is not included in
> the body, as this will be inserted into the body of the SIP re-INVITE
> request that is sent by the originating participating MCVideo function.
>
> 5) shall include the g.3gpp.mcvideo media feature tag in the Contact header
> field of the SIP re-INVITE request according to IETF RFC 3840 [22];
>
> 6) if the SIP re-INVITE request is to be sent within an on-demand session,
> shall include in the SIP re-INVITE request an SDP offer according to 3GPP TS
> 24.229 [11] with the clarifications specified in subclause 6.2.1;
>
> 7) shall send the SIP re-INVITE request according to 3GPP TS 24.229 [11].
On receiving a SIP 2xx response to the SIP re-INVITE request, the MCVideo
client:
> 1) shall interact with the user plane as specified in 3GPP TS 24.581 [5];
>
> 2) shall set the MCVideo imminent peril group state of the group to \"MVIG
> 1: no-imminent-peril\"; and
>
> 3) shall set the MCVideo imminent peril group call state of the group to
> \"MVIGC 1: imminent-peril-gc-capable\".
On receiving a SIP 4xx response, SIP 5xx response or SIP 6xx response to the
SIP re-INVITE request:
> 1) if the SIP 4xx response, SIP 5xx response or SIP 6xx response:
>
> a) contains an application/vnd.3gpp.mcvideo-info+xml MIME body with an
> \ element set to a value of \"true\"; or
>
> b) does not contain an application/vnd.3gpp.mcvideo-info+xml MIME body with
> an \ element;
>
> then the MCVideo client shall set the MCVideo imminent peril group state as
> \"MIG 2: in-progress\".
>
> NOTE 2: This is the case where the MCVideo client requested the cancellation
> of the MCVideo imminent peril in-progress state and was rejected.
[TS 24.581, clause 6.2.1]
Based on the negotiations during the call establishment specified in 3GPP TS
24.281 [2], a new instance of the \'Transmission participant state transition
diagram for basic transmission control operation\', as specified in subclause
6.2.4 and a new instance of the \'Transmission participant state transition
diagram for basic reception control operation\' as specified in subclause
6.2.5, shall be created for this call.
The SIP INVITE request sent by the application and signalling plane:
> 1\. shall be regarded an implicit Transmission request when an implicit
> Transmission request is negotiated; and
>
> 2\. shall not be regarded as an implicit Transmission request in case of a
> re-join to an already on-going group call.
>
> NOTE: The transmission participant can negotiate the use of prioritization
> of the Transmission Media Request message. In that case, the transmission
> participant can request permission to send media at a priority level that is
> either the same as or lower than the highest priority that was permitted to
> the participant in the MCVideo call initialization. If a transmission
> participant is authorized for pre-emptive priority in the MCVideo call it is
> good practise to always request permission to send RTP media packets at a
> priority level that is lower than pre-emptive priority unless the user
> explicitly requests to pre-empt the current RTP media packets sender.
[TS 24.581, clause 6.2.4.4.6]
Upon receiving a Transmission Granted message from the transmission control
server, the transmission participant:
> 1\. if the first bit in the subtype of the Transmission Granted message is
> set to \'1\' (Acknowledgment is required) as described in subclause 9.2.2.1,
> shall send a Transmission control Ack message. The Transmission control Ack
> message:
>
> a. shall include the Message Type field set to \'0\' (Transmission Granted);
> and
>
> b. shall include the Source field set to \'0\' (the transmission participant
> is the source);
>
> 2\. shall store the SSRC of granted transmission participant received in the
> Transmission Granted message and use it in the RTP media packets until the
> transmission is released;
>
> 3\. shall provide Transmission granted notification to the user, if not
> already done;
>
> 4\. shall stop timer T100 (Transmission Request); and
>
> 5\. shall enter the \'U: has permission to transmit\' state.
[TS 24.581, clause 6.4.1]
Once an on-demand MCVideo session is established or a pre-established session
is in use when the participating MCVideo function receives transmission
control messages from the transmission participant in the MCVideo client or
from the transmission control server in the controlling MCVideo function, the
behaviour of the participating MCVideo function is described in the following
subclauses.
[TS 24.581, clause 6.4.2]
Upon receiving a transmission control message the participating MCVideo
function:
> 1\. shall immediately forward the transmission control message to the
> transmission control server if the message is received from the transmission
> participant;
>
> 2\. if an MBMS subchannel is not used for a transmission in the session the
> transmission control message is associated with, shall immediately forward
> the transmission control message to the transmission participant if the
> message is received from the transmission control server; and
>
> 3\. if an MBMS subchannel is used for a transmission in the session the
> transmission control message is associated with:
>
> a. if
>
> i. the transmission control message is not a Transmission Idle message or a
> Media Transmission Notify message;
>
> ii. the MCVideo client has not reported \"listening\" status as specified in
> 3GPP TS 24.281 [2] subclause 14.2.3; or
>
> iii. the MCVideo client has reported \"not-listening\" status as specified
> in 3GPP TS 24.281 [2] subclause 14.2.3 in the latest received MBMS bearer
> listening status report;
>
> shall immediately forward the transmission control message to the
> transmission participant; and
>
> b. if
>
> i. the MCVideo client has reported \"listening\" status as specified in 3GPP
> TS 24.281 [2] subclause 14.2.3 in the latest received MBMS bearer listening
> status report; and
>
> ii if the transmission control message is the Transmission Idle message or
> the Media Transmission Notify message,
>
> shall perform actions as specified in subclause 10.2.
>
> NOTE: When the Transmit Idle or Media Transmission Notify messages are
> discarded the messages are sent to the MCVideo clients over the MBMS
> subchannel allocated for the transmission as specified in subclause 10.2.
[TS 24.581, clause 6.4.3]
Upon receiving RTP media packets the participating MCVideo function:
> 1\. shall immediately forward the RTP media packet to the controlling
> MCVideo function if the RTP packet is from an MCVideo client; and
>
> 2\. if an MBMS subchannel is not used for a transmission in the session the
> RTP media packets are associated with, shall immediately forward the RTP
> media packets to the MCVideo client if the RTP packet is from the
> controlling MCVideo function or the non-controlling MCVideo function.
3\. if an MBMS subchannel is used for a transmission in the session the RTP
media packets are associated with and if RTP media packets are received from
the controlling MCVideo function or the non-controlling MCVideo function:
> a. if
>
> i. the MCVideo client has not reported \"listening\" status as specified in
> 3GPP TS 24.281 [2] subclause 14.2.3; or
>
> ii. the MCVideo client has reported \"not-listening\" status as specified in
> 3GPP TS 24.281 [2] subclause 14.2.3 in the latest received MBMS bearer
> listening status report,
>
> shall immediately forward the RTP media packets to the MCVideo client; and
>
> b. if the MCVideo client has reported \"listening\" status as specified in
> 3GPP TS 24.281 [2] subclause 14.2.3 in the latest received MBMS bearer
> listening status report, shall perform actions as specified in subclause
> 10.2.
[TS 24.581, clause 6.4.4]
When the participating function receives an indication from the application
and signalling plane that session release is initiated, the participating
MCVideo function:
> 1\. shall stop sending transmission control messages towards the
> transmission participant and the transmission control server; and
>
> 2\. shall stop sending RTP media packets towards the MCVideo client and
> towards the controlling MCVideo function.
When the participating MCVideo function receives an indication from the
application and signalling plane that the session is released, the
participating MCVideo function:
> 1\. in case of a pre-established session, shall perform the actions in
> subclause 9.3.2; and
>
> 2\. in case of an on-demand session, shall release the media resources
> associated with the session.
##### 6.1.2.2.3 Test description {#test-description-18 .H6}
##### 6.1.2.2.3.1 Pre-test conditions {#pre-test-conditions-18 .H6}
Same pre-test conditions as for MCVideo test case 6.1.1.1 with the following
exception(s):
None.
##### 6.1.2.2.3.2 Test procedure sequence {#test-procedure-sequence-18 .H6}
Same test procedure sequence as for MCVideo test case 6.1.1.1 with the
following exception(s) and clarification(s):
\- The term \"Group Call\" is replaced with \"Chat Group Call\"
\- The term \"pre-arranged\" can be ignored
##### 6.1.2.2.3.3 Specific message contents {#specific-message-contents-18
.H6}
Same specific message contents as for MCVideo test case 6.1.1.1 with the
following exception(s) and clarification(s):
\- The condition \"GROUP-CALL\" is replaced with \"CHAT-GROUP-CALL\"
6.1.2.3 On-network / Chat Group Call / Upgrade to Emergency Chat Group Call /
Cancel Emergency Chat Group Call / Upgrade to Imminent Peril Chat Group Call /
Cancel Imminent Peril Chat Group Call / Client Terminated (CT)
##### 6.1.2.3.1 Test Purpose (TP) {#test-purpose-tp-19 .H6}
##### (1) {#section-88 .H6}
**with** { UE (MCVideo Client) registered and authorised for MCVideo Service }
ensure that {
**when** { the MCVideo User requests to join a MCVideo Chat Group Session }
**then** { the UE (MCVideo Client) sends a SIP INVITE message to the SS
(MCVideo Server) and responds to a SIP 200 (OK) message from the SS (MCVideo
Server) with a SIP ACK message and, provides transmission granted notification
to the MCVideo User, **and** respects Transmission Control through the session
}
}
##### (2) {#section-89 .H6}
**with** { UE (MCVideo Client) having an ongoing Chat Group Call }
ensure that {
**when** { the UE (MCVideo Client) receives an upgrade of the ongoing MCVideo
Group Call to an MCVideo Emergency Group Call via a SIP INVITE message from
the SS (MCVideo Server) }
**then** { UE (MCVideo Client) responds to the SIP re-INVITE request with a
SIP 200 (OK) response and considers the call as being upgraded to an Emergency
Group Call }
}
##### (3) {#section-90 .H6}
**with** { UE (MCVideo Client) having an ongoing Chat Group Call, which was
upgraded to an Emergency Chat Group Call }
ensure that {
**when** { the UE (MCVideo Client) receives a cancellation of the ongoing
McVideo Emergency state via a SIP re-INVITE message from the SS (MCVideo
Server)}
**then** { UE (MCVideo Client) responds to the SIP re-INVITE request with a
SIP 200 (OK) response **and** considers the emergency condition cancelled }
}
##### (4) {#section-91 .H6}
**with** { UE (MCVideo Client) having an ongoing Chat Group Call }
ensure that {
**when** { the UE (MCVideo Client) receives an upgrade of the ongoing MCVideo
Chat Group Call to a MCVideo Imminent Peril Chat Group Call via a SIP re-
INVITE message from the SS (MCVideo Server) }
**then** { UE (MCVideo Client) responds to the SIP re-INVITE request with a
SIP 200 (OK) response and considers the call as being upgraded to an Imminent
Peril Chat Group Call ( }
}
##### (5) {#section-92 .H6}
**with** { UE (MCVideo Client) having an ongoing Chat Group Call, which was
upgraded to an Imminent Peril Chat Group Call }
ensure that {
**when** { the UE (MCVideo Client) receives a cancellation of the ongoing
McVideo Imminent Peril state via a SIP re-INVITE message from the SS (MCVideo
Server) }
**then** { UE (MCVideo Client) responds to the SIP re-INVITE request with a
SIP 200 (OK) response **and** considers the imminent peril condition
cancelled.}
}
##### (6) {#section-93 .H6}
**with** { UE (MCVideo Client) having an ongoing Chat Group Call }
ensure that {
**when** { the UE (MCVideo Client) receives a Media Transmission Notification
message from the SS (MCVideo Server) }
**then** {The UE (MCVideo Client) provides media transmission notification to
the MCVideo User }
}
##### (7) {#section-94 .H6}
**with** { UE (MCVideo Client) having provided media transmission notification
to the MCVideo User after receiving a Media Transmission Notification message
from the SS (MCVideo Server)}
ensure that {
**when** { the MCVideo User requests permission to receive media }
**then** {The UE (MCVideo Client) sends a Receive Media Request message to the
SS (MCVideo Server) **and** provides receive media success notification to the
MCVideo User upon reception of the Receive Media Response message }
}
##### (8) {#section-95 .H6}
**with** { UE (MCVideo Client) having an ongoing Chat Group Call }
ensure that {
**when** { the UE (MCVideo User) requests to terminate the ongoing MCVideo
Chat Group Call }
**then** { UE (MCVideo Client) sends a SIP BYE request and leaves the MCVideo
session }
}
##### 6.1.2.3.2 Conformance requirements {#conformance-requirements-19 .H6}
References: The conformance requirements covered in the current TC are
specified in: TS 24.281 clauses 9.2.2.3.1.1, 9.2.2.3.1.3, 9.2.2.4.1.1,
9.2.2.4.1.2, 9.2.2.4.1.3, 9.2.2.5.1.2, 9.2.2.5.1.3, 9.2.2.5.1.6, TS 24.581,
clauses 6.2.4.2.2, 6.3.2.2, 6.3.4.4.12, 6.3.5.3.9, and 6.3.5.4.8. The
following represents a copy/paste extraction of the requirements relevant to
the test purpose; any references within the copy/paste text should be
understood within the scope of the core spec they have been copied from.
Unless otherwise stated, these are Rel-14 requirements.
[TS 24.281, Clause 9.2.2.3.1.1]
In the procedures in this subclause:
> 1) group identity in an incoming SIP INVITE request refers to the group
> identity from the \ element of the
> application/vnd.3gpp.mcvideo-info+xml MIME body of the incoming SIP INVITE
> request;
>
> 2) emergency indication in an incoming SIP INVITE request refers to the
> \ element of the application/vnd.3gpp.mcvideo-info+xml MIME
> body;
>
> 3) imminent peril indication in an incoming SIP INVITE request refers to the
> \ element of the application/vnd.3gpp.mcvideo-info+xml
> MIME body.
Upon receipt of a \"SIP INVITE request for originating participating MCVideo
function\" for a group identity identifying a chat MCVideo group containing an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \
element set to a value of \"chat\", the participating MCVideo function:
> 1) if unable to process the request due to a lack of resources or a risk of
> congestion exists, may reject the SIP INVITE request with a SIP 500 (Server
> Internal Error) response. The participating MCVideo function may include a
> Retry-After header field to the SIP 500 (Server Internal Error) response as
> specified in IETF RFC 3261 [15]. Otherwise, continue with the rest of the
> steps;
>
> NOTE 1: if the SIP INVITE request contains an emergency indication set to a
> value of \"true\" or an imminent peril indication set to a value of \"true\"
> and this is an authorized request for originating a priority call as
> determined by subclause 6.3.2.1.8.1, the participating MCVideo function can
> according to local policy choose to accept the request.
>
> 2) shall determine the MCVideo ID of the calling user from public user
> identity in the P-Asserted-Identity header field of the SIP INVITE request,
> and authorise the calling user;
>
> NOTE 2: The MCVideo ID of the calling user is bound to the public user
> identity at the time of service authorisation, as documented in subclause
> 7.3.
>
> 3) if through local policy in the originating participating MCVideo
> function, the user identified by the MCVideo ID is not authorized to make
> chat group calls, shall reject the \"SIP INVITE request for originating
> participating MCVideo function\" with a SIP 403 (Forbidden) response to the
> SIP INVITE request, with warning text set to \"108 user not authorized to
> make chat group calls\" in a Warning header field as specified in subclause
> 4.4;
>
> 4) shall determine if the media parameters are acceptable and the MCVideo
> codecs are offered in the SDP offer and if not, reject the request with a
> SIP 488 (Not Acceptable Here) response. Otherwise, continue with the rest of
> the steps;
>
> 5) shall check if the number of maximum simultaneous MCVideo group calls
> supported for the MCVideo user as specified in the \
> element of the \ element of the MCVideo user profile
> document (see the MCVideo user profile document in 3GPP TS 24.484 [25]) has
> been exceeded. If exceeded, the MCVideo function shall respond with a SIP
> 486 (Busy Here) response with the warning text set to \"103 maximum
> simultaneous MCVideo group calls reached\" in a Warning header field as
> specified in subclause 4.4. Otherwise, continue with the rest of the steps;
>
> NOTE 3: If the SIP INVITE request contains an emergency indication set to a
> value of \"true\" or an imminent peril indication set to a value of \"true\"
> and this is an authorized request for originating a priority call as
> determined by subclause 6.3.2.1.8.1, the participating MCVideo function can
> according to local policy choose to allow for an exception to the limit for
> the maximum simultaneous MCVideo sessions supported for the MCVideo user.
>
> 6) if the user identified by the MCVideo ID is not affiliated to the group
> identified in the \"SIP INVITE request for originating participating MCVideo
> function\" as determined by subclause 8.2.2.2.11, shall perform the actions
> specified in subclause 8.2.2.2.12 for implicit affiliation;
>
> 7) if the actions for implicit affiliation specified in step 6) above were
> performed but not successful in affiliating the MCVideo user due to the
> MCVideo user already having N2 simultaneous affiliations, shall reject the
> \"SIP INVITE request for originating participating MCVideo function\" with a
> SIP 486 (Busy Here) response with the warning text set to \"102 too many
> simultaneous affiliations\" in a Warning header field as specified in
> subclause 4.4. and skip the rest of the steps.
>
> NOTE 4: N2 is the total number of MCVideo groups that an MCVideo user can be
> affiliated to simultaneously as specified in 3GPP TS 23.281 [26].
>
> NOTE 5: if the SIP INVITE request contains an emergency indication set to a
> value of \"true\" or an imminent peril indication set to a value of \"true\"
> and this is an authorized request for originating a priority call as
> determined by subclause 6.3.2.1.8.1, the participating MCVideo function can
> according to local policy choose to allow an exception to the N2 limit.
> Alternatively, a lower priority affiliation of the MCVideo user could be
> cancelled to allow for the new affiliation.
>
> 8) shall determine the public service identity of the controlling MCVideo
> function associated with the group identity in the SIP INVITE request;
>
> NOTE 6: The public service identity can identify the controlling MCVideo
> function in the primary MCVideo system or a partner MCVideo system.
>
> NOTE 7: How the participating MCVideo server discovers the public service
> identity of the controlling MCVideo function associated with the group
> identity is out of scope of the current document.
>
> 9) shall generate a SIP INVITE request as specified in subclause 6.3.2.1.3;
>
> 10) shall set the Request-URI to the public service identity of the
> controlling MCVideo function associated with the group identity present in
> the incoming SIP INVITE request;
>
> 11) shall include the MCVideo ID of the calling user in \ user-id> element of the application/vnd.3gpp.mcvideo-info+xml MIME body of
> the SIP INVITE request;
>
> 12) shall include in the SIP INVITE request an SDP offer based on the SDP
> offer in the received SIP INVITE request as specified in subclause
> 6.3.2.1.1.1;
>
> 13) if the received SIP INVITE request contains an
> application/vnd.3gpp.location-info+xml MIME body as specified in Annex F.3;
> and
>
> a) if not already included, shall include a Content-Type header field set to
> \"application/vnd.3gpp.location-info+xml\"; and
>
> b) if not already copied, shall copy the contents of the
> application/vnd.3gpp.location-info+xml MIME body received in the SIP INVITE
> request into an application/vnd.3gpp.location-info+xml MIME body included in
> the outgoing SIP request;
>
> NOTE 8: Note that the application/vnd.3gpp.mcvideo-info+xml MIME body will
> already have been copied into the outgoing SIP INVITE request by subclause
> 6.3.2.1.3.
>
> 14) if a Resource-Priority header field was included in the received SIP
> INVITE request, shall include a Resource-Priority header field according to
> rules and procedures of IETF RFC 4412 [33] set to the value indicated in the
> Resource-Priority header field of the SIP INVITE request from the MCVideo
> client; and
>
> NOTE 9: The participating MCVideo function will leave verification of the
> Resource-Priority header field to the controlling MCVideo function.
>
> 15) shall forward the SIP INVITE request according to 3GPP TS 24.229 [11].
Upon receipt of a SIP 302 (Moved Temporarily) response to the above SIP INVITE
request in step 14), the participating MCVideo function:
> 1) shall generate a SIP INVITE request as specified in subclause 6.3.2.1.10;
>
> 2) shall include an SDP offer based upon the SDP offer in the received SIP
> INVITE request from the MCVideo client as specified in subclause
> 6.3.2.1.1.1; and
>
> 3) shall forward the SIP INVITE request according to 3GPP TS 24.229 [11];
Upon receipt of a SIP 2xx response to the above SIP INVITE request in step 14)
the participating MCVideo function:
> 1) if the SIP 2xx response contains an application/vnd.3gpp.mcvideo-info+xml
> MIME body with an \ element, shall perform the procedures in
> subclause 6.3.2.3.2;
>
> 2) shall generate a SIP 200 (OK) response as specified in the subclause
> 6.3.2.1.5.2;
>
> 3) shall include in the SIP 200 (OK) response an SDP answer as specified in
> the subclause 6.3.2.1.2.1;
>
> 4) shall include Warning header field(s) that were received in the incoming
> SIP 200 (OK) response;
>
> 5) shall include the public service identity received in the P-Asserted-
> Identity header field of the incoming SIP 200 (OK) response into the
> P-Asserted-Identity header field of the outgoing SIP 200 (OK) response;
>
> 6) if the procedures of subclause 8.2.2.2.12 for implicit affiliation were
> performed in the present subclause, shall complete the implicit affiliation
> by performing the procedures of subclause 8.2.2.2.13;
>
> 7) shall send the SIP 200 (OK) response to the MCVideo client according to
> 3GPP TS 24.229 [11]; and
>
> 8) shall interact with the media plane as specified in 3GPP TS 24.581 [5].
Upon receipt of a SIP 4xx, 5xx or 6xx response to the above SIP INVITE request
in step 14) the participating MCVideo function:
> 1) shall generate a SIP response according to 3GPP TS 24.229 [11];
>
> 2) shall include Warning header field(s) that were received in the incoming
> SIP response;
>
> 3) shall forward the SIP response to the MCVideo client according to 3GPP TS
> 24.229 [11]; and
>
> 4) if the implicit affiliation procedures of subclause 8.2.2.2.12 were
> invoked in the current procedure, shall perform the procedures of subclause
> 8.2.2.2.14.
[TS 24.281, clause 9.2.2.3.1.3]
This subclause covers on-demand session.
Upon receipt of a \"SIP INVITE request for terminating participating MCVideo
function\", for a terminating MCVideo client of a chat MCVideo group, the
participating MCVideo function:
> 1) if unable to process the request due to a lack of resources or a risk of
> congestion exists, may reject the \"SIP INVITE request for terminating
> participating MCVideo function\" with a SIP 500 (Server Internal Error)
> response. The participating MCVideo function may include a Retry-After
> header field to the SIP 500 (Server Internal Error) response as specified in
> IETF RFC 3261 [15]. Otherwise, continue with the rest of the steps;
>
> NOTE: If the SIP INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element set to a value of
> \"true\", the participating MCVideo function can by means beyond the scope
> of this specification choose to accept the request.
>
> 2) shall check the presence of the isfocus media feature tag in the URI of
> the Contact header field and if it is not present then the participating
> MCVideo function shall reject the request with a SIP 403 (Forbidden)
> response with the warning text set to \"104 isfocus not assigned\" in a
> Warning header field as specified in subclause 4.4. Otherwise, continue with
> the rest of the steps;
>
> 3) shall generate a SIP INVITE request as specified in subclause 6.3.2.2.3;
>
> 4) shall set the Request-URI to the public user identity associated with the
> MCVideo ID of the MCVideo user to be invited based on the contents of the
> Request-URI of the received \"SIP INVITE request for terminating
> participating MCVideo function\";
>
> 5) shall copy the contents of the P-Asserted-Identity header field of the
> incoming \"SIP INVITE request for terminating participating MCVideo
> function\" to the P-Asserted-Identity header field of the outgoing SIP
> INVITE request;
>
> 6) shall include in the SIP INVITE request an SDP offer based on the SDP
> offer in the received \"SIP INVITE request for terminating participating
> MCVideo function\" as specified in subclause 6.3.2.2.1;
>
> 7) if the received SIP INVITE request contains a Resource-Priority header
> field, shall include a Resource-Priority header field with the contents set
> as in the received Resource-Priority header field;
>
> 8) shall perform the procedures specified in subclause 6.3.2.2.9 to include
> any MIME bodies in the received SIP INVITE request; and
>
> 9) shall send the SIP INVITE request towards the MCVideo client according to
> 3GPP TS 24.229 [11].
Upon receiving a SIP 200 (OK) response to the above SIP INVITE request sent to
the MCVideo client, the participating MCVideo function:
> 1) shall generate a SIP 200 (OK) response as described in the subclause
> 6.3.2.2.4.2;
>
> 2) shall include in the SIP 200 (OK) response an SDP answer based on the SDP
> answer in the received SIP 200 (OK) response as specified in subclause
> 6.3.2.2.2.1;
>
> 3) shall interact with the media plane as specified in 3GPP TS 24.581 [5];
> and
>
> 4) shall forward the SIP 200 (OK) response according to 3GPP TS 24.229 [11].
[TS 24.281, Clause 9.2.2.4.1.1]
In the procedures in this subclause:
> 1) MCVideo ID in an incoming SIP INVITE request refers to the MCVideo ID of
> the originating user from the \ element of the
> application/vnd.3gpp.mcvideo-info+xml MIME body of the incoming SIP INVITE
> request;
>
> 2) group identity in an incoming SIP INVITE request refers to the group
> identity from the \ element of the
> application/vnd.3gpp.mcvideo-info+xml MIME body of the incoming SIP INVITE
> request;
>
> 3) MCVideo ID in an outgoing SIP INVITE request refers to the MCVideo ID of
> the called user in the \ element of the
> application/vnd.3gpp.mcvideo-info+xml MIME body of the outgoing SIP INVITE
> request;
>
> 4) emergency indication in an incoming SIP INVITE request refers to the
> \ element of the application/vnd.3gpp.mcvideo-info+xml MIME
> body; and
>
> 5) alert indication in an incoming SIP INVITE request refers to the \ ind> element of the application/vnd.3gpp.mcvideo-info+xml MIME body.
Upon receipt of a \"SIP INVITE request for controlling MCVideo function of an
MCVideo group\" containing a group identity identifying a chat MCVideo group,
the controlling MCVideo function:
> 1) if unable to process the request due to a lack of resources or a risk of
> congestion exists, may reject the SIP INVITE request with a SIP 500 (Server
> Internal Error) response. The controlling MCVideo function may include a
> Retry-After header field to the SIP 500 (Server Internal Error) response as
> specified in IETF RFC 3261 [15] and skip the rest of the steps;
>
> NOTE 1: If the SIP INVITE request contains an emergency indication set to a
> value of \"true\", the controlling MCVideo function can by means beyond the
> scope of this specification choose to accept the request.
>
> 2) shall reject the SIP request with a SIP 403 (Forbidden) response and not
> process the remaining steps if:
>
> a) an Accept-Contact header field does not include the g.3gpp.mcvideo media
> feature tag;
>
> b) an Accept-Contact header field does not include the g.3gpp.icsi-ref media
> feature tag containing the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\"; or
>
> c) the isfocus media feature tag is present in the Contact header field;
>
> 3) if received SIP INVITE request includes an
> application/vnd.3gpp.mcvideoinfo+xml MIME body with an \
> element included or an \ element included, shall validate
> the request as described in subclause 6.3.3.1.17;
>
> 4) shall retrieve the necessary group document(s) from the group management
> server for the group identity contained in the SIP INVITE request and carry
> out initial processing as specified in subclause 6.3.5.2 and continue with
> the rest of the steps if the checks in subclause 6.3.5.2 succeed;
>
> 5) if the MCVideo user identified by the MCVideo ID in the SIP INVITE
> request is not affiliated with the MCVideo group identified by the group
> identity in the SIP INVITE request as determined by the procedures of
> subclause 6.3.6:
>
> a) shall check if the MCVideo user is eligible to be implicitly affiliated
> with the MCVideo chat group as determined by subclause 8.2.2.3.6; and
>
> b) if the MCVideo user is not eligible for implicit affiliation, shall
> reject the SIP INVITE request with a SIP 403 (Forbidden) response with the
> warning text set to \"120 user is not affiliated to this group\" in a
> Warning header field as specified in subclause 4.4 and skip the rest of the
> steps below;
>
> 6) if the SIP INVITE request contains unauthorized request for an MCVideo
> emergency group call as determined by subclause 6.3.3.1.13.2:
>
> a) shall reject the SIP INVITE request with a SIP 403 (Forbidden) response
> as specified in subclause 6.3.3.1.14; and
>
> b) shall send the SIP 403 (Forbidden) response as specified in 3GPP TS
> 24.229 [11] and skip the rest of the steps;
>
> 7) if the SIP INVITE request contains an unauthorized request for an MCVideo
> imminent peril group call as determined by subclause 6.3.3.1.13.6, shall
> reject the SIP INVITE request with a SIP 403 (Forbidden) response with the
> following clarifications:
>
> a) shall include in the SIP 403 (Forbidden) response an
> application/vnd.3gpp.mcvideo-info+xml MIME body as specified in clause F.1
> with the \ element containing the \ element
> with the \ element set to a value of \"false\"; and
>
> b) shall send the SIP 403 (Forbidden) response as specified in 3GPP TS
> 24.229 [11] and skip the rest of the steps;
>
> 8) if a Resource-Priority header field is included in the SIP INVITE
> request:
>
> a) if the Resource-Priority header field is set to the value indicated for
> emergency calls and the SIP INVITE request does not contain an emergency
> indication and the in-progress emergency state of the group is set to a
> value of \"false\", shall reject the SIP INVITE request with a SIP 403
> (Forbidden) response and skip the remaining steps; and
>
> b) if the Resource-Priority header field is set to the value indicated for
> imminent peril calls and the SIP INVITE request does not contain an imminent
> peril indication and the in-progress imminent peril state of the group is
> set to a value of \"false\", shall reject the SIP INVITE request with a SIP
> 403 (Forbidden) response; and skip the remaining steps;
>
> 9) shall determine if the media parameters are acceptable and the MCVideo
> codecs are offered in the SDP offer and if not reject the request with a SIP
> 488 (Not Acceptable Here) response and skip the rest of the steps;
>
> 10) shall create a chat group session and allocate an MCVideo session
> identity for the chat group session if the MCVideo chat group session
> identity does not already exist, and may handle timer TNG3 (group call
> timer) as specified in subclause 6.3.3.5;
>
> 11) if the chat group session is ongoing and the \ participant-count> as specified in 3GPP TS 24.481 [24] is already reached:
>
> a) if, according to local policy, the user identified by the MCVideo ID in
> the SIP INVITE request is deemed to have a higher priority than an existing
> user in the chat group session, may remove a participant from the session by
> following subclause 9.2.1.4.4.3, and skip the next step; and
>
> NOTE 2: The local policy for deciding whether to admit a user to a call that
> has reached its maximum amount of participants can include the \ priority> and the \ of the user as well as other
> information of the user from the group document as specified in 3GPP TS
> 24.481 [24]. The local policy decisions can also include taking into account
> whether the imminent-peril indicator or emergency indicator was received in
> the SIP INVITE request.
>
> b) shall return a SIP 486 (Busy Here) response with the warning text set to
> \"122 too many participants\" to the originating network as specified in
> subclause 4.4. Otherwise, continue with the rest of the steps;
>
> 12) if the received SIP INVITE request was determined to be eligible for
> implicit affiliation in step 5) and if subclause 8.2.2.3.7 was not
> previously invoked in the present subclause, shall perform the implicit
> affiliation as specified in subclause 8.2.2.3.7;
>
> 13) if the SIP INVITE request contains an emergency indication set to a
> value of \"true\" or the in-progress emergency state of the group to
> \"true\" the controlling MCVideo function shall:
>
> a) validate that the SIP INVITE request includes a Resource-Priority header
> field populated with the values for an MCVideo emergency group call as
> specified in subclause 6.3.3.1.19, and if not:
>
> i) perform the actions specified in subclause 6.3.3.1.8;
>
> ii) send the SIP UPDATE request generated in subclause 6.3.3.1.8 towards the
> initiator of the SIP INVITE request according to 3GPP TS 24.229 [11]; and
>
> iii) upon receiving a SIP 200 (OK) response to the SIP UPDATE request sent
> in subclause 6.3.3.1.8, proceed with the rest of the steps.
>
> NOTE 3: Verify that the Resource-Priority header is included and properly
> populated for both ongoing and newly- entered in-progress emergency states
> of the specified group.
>
> b) if the in-progress emergency state of the group is set to a value of
> \"true\" and this MCVideo user is indicating a new emergency indication:
>
> i) for each of the other affiliated members of the group generate a SIP
> MESSAGE request notification of the MCVideo user\'s emergency indication as
> specified in subclause 6.3.3.1.11 with the following clarifications:
>
> A) set the \ element of the application/vnd.3gpp.mcvideo-
> info+xml MIME body to a value of \"true\";
>
> B) if the received SIP INVITE contains an alert indication set to a value of
> \"true\" and this is an authorized request for an MCVideo emergency alert
> meeting the conditions specified in subclause 6.3.3.1.13.1, perform the
> procedures specified in subclause 6.3.3.1.12; and
>
> C) send the SIP MESSAGE request as specified in 3GPP TS 24.229 [11];
>
> ii) cache the information that this MCVideo user has initiated an MCVideo
> emergency call; and
>
> iii) if the SIP INVITE request contains an authorized request for an MCVideo
> emergency alert as determined in step i) B) above, cache the information
> that this MCVideo user has initiated an MCVideo emergency alert; and
>
> c) if the in-progress emergency state of the group is set to a value of
> \"false\":
>
> i) shall set the value of the in-progress emergency state of the group to
> \"true\";
>
> ii) shall start timer TNG2 (in-progress emergency group call timer) and
> handle its expiry as specified in subclause 6.3.3.1.16;
>
> iii) shall generate SIP re-INVITE requests for the MCVideo emergency group
> call to the other affiliated and joined participants of the chat MCVideo
> group as specified in subclause 6.3.3.1.6;
>
> iv) shall generate SIP INVITE requests for the MCVideo emergency group call
> to the affiliated but not joined members of the chat MCVideo group as
> specified in subclause 6.3.3.1.7;
>
> A) for each affiliated but not joined member shall send the SIP INVITE
> request towards the MCVideo client as specified in 3GPP TS 24.229 [11]; and
>
> B) upon receiving a SIP 200 (OK) response to the SIP INVITE request the
> controlling MCVideo function shall interact with the media plane as
> specified in 3GPP TS 24.581 [5];
>
> v) shall cache the information that this MCVideo user has initiated an
> MCVideo emergency call; and
>
> vi) if the \ element of the application/vnd.3gpp.mcvideo-info+xml
> MIME body is set to \"true\" and is an authorized request for an MCVideo
> emergency alert as specified in subclause 6.3.3.1.13.1, shall cache the
> information that this MCVideo user has initiated an MCVideo emergency alert;
> and
>
> vii) if the in-progress imminent peril state of the group is set to a value
> of \"true\", shall set it to a value of \"false\";
>
> 14) if the in-progress emergency state of the group is set to a value of
> \"false\" and if the SIP INVITE request contains an imminent peril
> indication set to a value of \"true\" or the in-progress imminent peril
> state of the group is set to \"true\", the controlling MCVideo function
> shall:
>
> a) validate that the SIP INVITE request includes a Resource-Priority header
> field populated with the values for an MCVideo imminent peril group call as
> specified in subclause 6.3.3.1.19, and if not:
>
> i) perform the actions specified in subclause 6.3.3.1.8;
>
> ii) send the SIP UPDATE request generated in subclause 6.3.3.1.8 towards the
> initiator of the SIP INVITE request according to 3GPP TS 24.229 [11]; and
>
> iii) upon receiving a SIP 200 (OK) response to the SIP UPDATE request sent
> in subclause 6.3.3.1.8 proceed with the rest of the steps.
>
> NOTE 4: Verify that the Resource-Priority header is included and properly
> populated for both ongoing and newly- entered in-progress imminent peril
> states of the specified group.
>
> b) if the in-progress imminent peril state of the group is set to a value of
> \"true\" and this MCVideo user is indicating a new imminent peril
> indication:
>
> i) for each of the other affiliated member of the group generate a SIP
> MESSAGE request notification of the MCVideo user\'s imminent peril
> indication as specified in subclause 6.3.3.1.11 with the following
> clarifications;
>
> A) set the \ element of the application/vnd.3gpp.mcvideo-
> info+xml MIME body to a value of \"true\"; and
>
> B) send the SIP MESSAGE request as specified in 3GPP TS 24.229 [11]; and
>
> ii) cache the information that this MCVideo user has initiated an MCVideo
> imminent peril call; and
>
> c) if the in-progress imminent peril state of the group is set to a value of
> \"false\":
>
> i) shall set the value of the in-progress imminent peril state of the group
> to \"true\";
>
> ii) shall generate SIP re-INVITE requests for the MCVideo imminent peril
> group call to the other affiliated and joined participants of the chat
> MCVideo group as specified in subclause 6.3.3.1.15;
>
> iii) shall generate SIP INVITE requests for the MCVideo imminent peril call
> to the affiliated but not joined members of the chat MCVideo group as
> specified in subclause 6.3.3.1.7;
>
> A) for each affiliated but not joined member shall send the SIP INVITE
> request towards the MCVideo client as specified in 3GPP TS 24.229 [11]; and
>
> B) Upon receiving a SIP 200 (OK) response to the SIP INVITE request the
> controlling MCVideo function shall interact with the media plane as
> specified in 3GPP TS 24.581 [5]; and
>
> iv) shall cache the information that this MCVideo user has initiated an
> MCVideo imminent peril call;
>
> 15) shall accept the SIP request and generate a SIP 200 (OK) response to the
> SIP INVITE request according to 3GPP TS 24.229 [11];
>
> 16) shall include in the SIP 200 (OK) response an SDP answer according to
> 3GPP TS 24.229 [11] with the clarifications specified in subclause 6.3.3.2.1
> unless the procedures of subclause 6.3.3.1.8 were performed in step 13)a) or
> step 14)a) above;
>
> 17) should include the Session-Expires header field and start supervising
> the SIP session according to IETF RFC 4028 [23]. It is recommended that the
> \"refresher\" header field parameter is omitted. If included, the
> \"refresher\" header field parameter shall be set to \"uac\";
>
> 18) shall include the \"timer\" option tag in a Require header field;
>
> 19) shall include the following in a Contact header field:
>
> a) the g.3gpp.mcvideo media feature tag;
>
> b) the g.3gpp.icsi-ref media feature tag containing the value of
> \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\";
>
> c) the MCVideo session identity; and
>
> d) the media feature tag isfocus;
>
> 20) shall include the \"tdialog\" option tag in a Supported header field
> according to IETF RFC 4538 [32];
>
> 21) if the SIP INVITE request contains an alert indication set to a value of
> \"true\" and this is an unauthorized request for an MCVideo emergency alert
> as specified in subclause 6.3.3.1.13.1, shall include in the SIP 200 (OK)
> response the warning text set to \"149 SIP INFO request pending\" in a
> Warning header field as specified in subclause 4.4;
>
> 22) if the received SIP INVITE request contains an
> application/vnd.3gpp.mcvideo-info+xml MIME body with the \ ind> element set to a value of \"true\" and if the in-progress emergency
> state of the group is set to a value of \"true\", shall include in the SIP
> 200 (OK) response the warning text set to \"149 SIP INFO request pending\"
> in a Warning header field as specified in subclause 4.4;
>
> NOTE 5: In this case, the request was for an imminent peril call but a
> higher priority MCVideo emergency call was already in progress on the group.
> Hence, the imminent peril call request aspect of the request is denied but
> the request is granted with emergency level priority.
>
> 23) shall interact with media plane as specified in 3GPP TS 24.581 [5];
>
> 24) shall send the SIP 200 (OK) response to the MCVideo client according to
> 3GPP TS 24.229 [11]; and
>
> 25) if the chat group session was already ongoing and if at least one of the
> participants has subscribed to the conference event package, shall send a
> SIP NOTIFY request to all participants with a subscription to the conference
> event package as specified in subclause 9.2.3.4.2.
Upon receiving a SIP ACK to the SIP 200 (OK) response sent towards the
inviting MCVideo client, and the SIP 200 (OK) response was sent with the
warning text set to \"149 SIP INFO request pending\" in a Warning header field
as specified in subclause 4.4, the controlling MCVideo function shall follow
the procedures in subclause 6.3.3.1.18.
[TS 24.281, clause 9.2.2.4.1.2]
In the procedures in this subclause:
> 1) emergency indication in an incoming SIP re-INVITE request refers to the
> \ element of the application/vnd.3gpp.mcvideo-info+xml MIME
> body; and
>
> 2) imminent peril indication in an incoming SIP re-INVITE request refers to
> the \ element of the application/vnd.3gpp.mcvideo-
> info+xml MIME body.
Upon receipt of a SIP re-INVITE request for an MCVideo session identity
identifying a chat MCVideo group session, the controlling MCVideo function:
> 1) if unable to process the request due to a lack of resources or a risk of
> congestion exists, may reject the SIP re-INVITE request with a SIP 500
> (Server Internal Error) response. The controlling MCVideo function may
> include a Retry-After header field to the SIP 500 (Server Internal Error)
> response as specified in IETF RFC 3261 [15] and skip the rest of the steps;
>
> NOTE 1: if the SIP re-INVITE request contains an emergency indication or an
> imminent peril indication set to a value of \"true\" and this is an
> authorized request for originating an MCVideo emergency group call as
> determined by subclause 6.3.3.1.13.2, or for originating an MCVideo imminent
> peril group call as determined by subclause 6.3.3.1.13.5, the controlling
> MCVideo function can according to local policy choose to accept the request.
>
> 2) if the received SIP re-INVITE request includes an
> application/vnd.3gpp.mcvideo-info+xml MIME body with an \
> element included or an \ element included, shall validate
> the request as described in subclause 6.3.3.1.17;
>
> 3) if the SIP re-INVITE request contains an unauthorized request for an
> MCVideo emergency call as determined by subclause 6.3.3.1.13.2:
>
> a) shall reject the SIP re-INVITE request with a SIP 403 (Forbidden)
> response as specified in subclause 6.3.3.1.14; and
>
> b) shall send the SIP 403 (Forbidden) response as specified in 3GPP TS
> 24.229 [11] and skip the rest of the steps;
>
> 4) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element set to a value of
> \"true\" and is an authorized request to initiate an MCVideo emergency group
> call as determined by subclause 6.3.3.1.13.2, the controlling MCVideo
> function shall:
>
> a) validate that the SIP re-INVITE request includes a Resource-Priority
> header field is populated correctly for an MCVideo emergency group call as
> specified in subclause 6.3.3.1.19, and if not:
>
> i) shall perform the actions specified in subclause 6.3.3.1.8; and
>
> ii) upon receiving a SIP 200 (OK) response to the SIP UPDATE request sent in
> subclause 6.3.3.18 shall proceed with the rest of the steps.
>
> NOTE 2: Verify that the Resource-Priority header is included and properly
> populated for both ongoing and newly-entered in-progress emergency states of
> the specified group.
>
> b) if the in-progress emergency state of the group is set to a value of
> \"true\" and this MCVideo user is indicating a new emergency indication:
>
> i) shall cache the MCVideo ID of the MCVideo user that has initiated an
> MCVideo emergency call;
>
> ii) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element set to a value of \"true\"
> and is an authorized request for an MCVideo emergency alert as determined by
> subclause 6.3.3.1.13.1, shall cache the MCVideo ID of the MCVideo user that
> has initiated an MCVideo emergency alert; and
>
> iii) for each of the other affiliated members of the group, generate a SIP
> MESSAGE request notification of the MCVideo user\'s emergency indication as
> specified in subclause 6.3.3.1.11 with the following clarifications:
>
> A) set the \ element of the application/vnd.3gpp.mcvideo-
> info+xml MIME body to a value of \"true\";
>
> B) if the received SIP re-INVITE contains an alert indication set to a value
> of \"true\" and this is an authorized request for an MCVideo emergency alert
> meeting the conditions specified in subclause 6.3.3.1.13.1, perform the
> procedures specified in subclause 6.3.3.1.12; and
>
> C) send the SIP MESSAGE request as specified in 3GPP TS 24.229 [11]; and
>
> c) if the in-progress emergency state of the group is set to a value of
> \"false\":
>
> i) shall set the value of the in-progress emergency state of the group to
> \"true\";
>
> ii) shall cache the MCVideo ID of the MCVideo user that has initiated an
> MCVideo emergency call;
>
> iii) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element set to a value of \"true\"
> and this is an authorized request for an MCVideo emergency alert as
> specified in subclause 6.3.3.1.13.1, shall cache the MCVideo ID of the
> MCVideo user that has initiated an MCVideo emergency alert;
>
> iv) shall start timer TNG2 (in-progress emergency group call timer) and
> handle its expiry as specified in subclause 6.3.3.1.16;
>
> v) shall generate SIP re-INVITE requests for the MCVideo emergency group
> call to the other affiliated and joined participants of the chat MCVideo
> group as specified in subclause 6.3.3.1.6. The MCVideo controlling function:
>
> A) for each affiliated and joined member shall send the SIP re-INVITE
> request towards the MCVideo client as specified in 3GPP TS 24.229 [11]; and
>
> B) Upon receiving a SIP 200 (OK) response to the SIP re-INVITE request the
> controlling MCVideo function shall interact with the media plane as
> specified in 3GPP TS 24.581 [5]; and
>
> vi) shall generate SIP INVITE requests for the MCVideo emergency group call
> to the affiliated but not joined members of the chat MCVideo group as
> specified in subclause 6.3.3.1.7. The controlling MCVideo function:
>
> A) for each affiliated but not joined member shall send the SIP INVITE
> request towards the MCVideo client as specified in 3GPP TS 24.229 [11]; and
>
> B) Upon receiving a SIP 200 (OK) response to the SIP INVITE request the
> controlling MCVideo function shall interact with the media plane as
> specified in 3GPP TS 24.581 [5]; and
>
> vii) if the in-progress imminent peril state of the group is set to a value
> of \"true\", shall set it to a value of \"false\";
>
> 5) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element set to a value of
> \"false\" and is an unauthorized request for an MCVideo emergency group call
> cancellation as determined by subclause 6.3.3.1.13.4:
>
> a) shall reject the SIP re-INVITE request with a SIP 403 (Forbidden)
> response;
>
> b) shall include in the SIP 403 (Forbidden) response an
> application/vnd.3gpp.mcvideo-info+xml MIME body as specified in annex F.1
> with an \ element set to a value of \"true\";
>
> c) if an \ element of the mcvideoinfo MIME body is included set
> to \"false\" and there is an outstanding MCVideo emergency alert for this
> MCVideo user, shall include in the application/vnd.3gpp.mcvideo-info+xml
> MIME body and \ element set to a value of \"true\"; and
>
> d) shall send the SIP 403 (Forbidden) response as specified in 3GPP TS
> 24.229 [11] and skip the rest of the steps;
>
> 6) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element set to a value of
> \"false\" and is determined to be an authorized request for an MCVideo
> emergency call cancellation as specified in subclause 6.3.3.1.13.4 and the
> in-progress emergency state of the group to is set to a value of \"true\"
> the controlling MCVideo function shall:
>
> a) validate that the SIP re-INVITE request includes a Resource-Priority
> header field is populated correctly for a normal priority MCVideo group call
> as specified in subclause 6.3.3.1.19, and if not:
>
> i) shall perform the actions specified in subclause 6.3.3.1.8; and
>
> ii) upon receiving a SIP 200 (OK) response to the SIP UPDATE request sent in
> subclause 6.3.3.1.8 shall proceed with the rest of the steps;
>
> NOTE 3: Verify that the Resource-Priority header is included and properly
> populated for an in-progress emergency state cancellation of the specified
> group.
>
> b) shall set the in-progress emergency group state of the group to a value
> of \"false\";
>
> c) shall clear the cache of the MCVideo ID of the MCVideo user identified by
> the \ element as having an outstanding MCVideo emergency
> group call;
>
> d) if an \ element of the application/vnd.3gpp.mcvideo-info+xml
> MIME body is included and set to \"false\" and is determined to be an
> authorized request for an MCVideo emergency alert cancellation as specified
> in subclause 6.3.3.1.13.3 and there is an outstanding MCVideo emergency
> alert for this MCVideo user shall:
>
> i) if the received SIP re-INVITE request contains an \
> element in the application/vnd.3gpp.mcvideo-info+xml MIME body, clear the
> cache of the MCVideo ID of the MCVideo user identified by the \ by> element as having an outstanding MCVideo emergency alert; and
>
> ii) if the received SIP re-INVITE request does not contain an \ by> element in the application/vnd.3gpp.mcvideo-info+xml MIME body, clear
> the cache of the MCVideo ID of the sender of the SIP re-INVITE request as
> having an outstanding MCVideo emergency alert;
>
> e) shall generate SIP re-INVITE requests to the other affiliated and joined
> members of the MCVideo group as specified in subclause 6.3.3.1.6. The
> MCVideo controlling function:
>
> i) for each affiliated and joined member shall send the SIP re-INVITE
> request towards the MCVideo client as specified in 3GPP TS 24.229 [11]; and
>
> ii) Upon receiving a SIP 200 (OK) response to the SIP re-INVITE request the
> controlling MCVideo function shall interact with the media plane as
> specified in 3GPP TS 24.581 [5]; and
>
> NOTE 4: Subclause 6.3.3.1.5 will inform the affiliated and joined members of
> the cancellation of the MCVideo group\'s in-progress emergency state and the
> cancellation of the MCVideo emergency alert if applicable.
>
> f) for each of the affiliated but not joined members of the group shall:
>
> i) generate a SIP MESSAGE request notification of the cancellation of the
> MCVideo user\'s emergency call as specified in subclause 6.3.3.1.11;
>
> ii) set the \ element of the application/vnd.3gpp.mcvideo-
> info+xml MIME body to a value of \"false\";
>
> iii) if indicated above in step d), set the \ element of the
> application/vnd.3gpp.mcvideo-info+xml MIME body to a value of \"false\"; and
>
> iv) send the SIP MESSAGE request according to 3GPP TS 24.229 [11];
>
> 7) if a Resource-Priority header field is included in the SIP re-INVITE
> request:
>
> a) if the Resource-Priority header field is set to the value indicated for
> emergency calls and the received SIP re-INVITE request does not contain an
> authorized request for an MCVideo emergency call as determined in step 4)
> above and the in-progress emergency state of the group is set to a value of
> \"false\", shall reject the SIP re-INVITE request with a SIP 403 (Forbidden)
> response and skip the remaining steps; or
>
> b) if the Resource-Priority header field is set to the value indicated for
> imminent peril calls and the received SIP re-INVITE request does not contain
> an authorized request for an MCVideo imminent peril call as determined by
> the procedures of subclause 6.3.3.1.13.5 and the in-progress imminent peril
> state of the group is set to a value of \"false\", shall reject the SIP re-
> INVITE request with a SIP 403 (Forbidden) response and skip the remaining
> steps;
>
> 8) if the received SIP re-INVITE request contains an imminent peril
> indication, shall perform the procedures specified in subclause 9.2.2.4.1.3
> and skip the rest of the steps;
>
> 9) shall include in the SIP 200 (OK) response an SDP answer according to
> 3GPP TS 24.229 [11] with the clarifications specified in subclause 6.3.3.2.1
> unless the procedures of subclause 6.3.3.1.8 were performed in step 6) a) i)
> above;
>
> 10) shall include the \"tdialog\" option tag in a Supported header field
> according to IETF RFC 4538 [32];
>
> 11) if the received SIP re-INVITE request contains an
> application/vnd.3gpp.mcvideo-info+xml MIME body with the \
> element set to a value of \"true\" and if this is an unauthorized request
> for an MCVideo emergency alert as determined by subclause 6.3.3.1.13.1,
> shall include in the SIP 200 (OK) response the warning text set to \"149 SIP
> INFO request pending\" in a Warning header field as specified in subclause
> 4.4;
>
> 12) if the received SIP re-INVITE request contains an
> application/vnd.3gpp.mcvideo-info+xml MIME body with the \
> element set to a value of \"false\" and if this is an unauthorized request
> for an MCVideo emergency alert cancellation as determined by subclause
> 6.3.3.1.13.3, shall include in the SIP 200 (OK) response the warning text
> set to \"149 SIP INFO request pending\" in a Warning header field as
> specified in subclause 4.4;
>
> 13) if the received SIP re-INVITE request contains an
> application/vnd.3gpp.mcvideo-info+xml MIME body with the \ ind> element set to a value of \"true\", this is an authorized request for
> an MCVideo imminent peril group call and if the in-progress emergency state
> of the group is set to a value of \"true\", shall include in the SIP 200
> (OK) response the warning text set to \"149 SIP INFO request pending\" in a
> Warning header field as specified in subclause 4.4;
>
> NOTE 5: In this case, the request was for an imminent peril call but a
> higher priority MCVideo emergency call was already in progress on the group.
> Hence, the imminent peril call request aspect of the request is denied but
> the request is granted with emergency level priority.
>
> 14) shall interact with media plane as specified in 3GPP TS 24.581 [5]; and
>
> 15) shall send the SIP 200 (OK) response towards the MCVideo client
> according to 3GPP TS 24.229 [11].
Upon receiving a SIP ACK to the SIP 200 (OK) response sent towards the
inviting MCVideo client, and the SIP 200 (OK) response was sent with the
warning text set to \"149 SIP INFO request pending\" in a Warning header field
as specified in subclause 4.4, the controlling MCVideo function shall follow
the procedures in subclause 6.3.3.1.18.
[TS 24.281, clause 9.2.2.4.1.3]
In the procedures in this subclause:
> 1) imminent peril indication in an incoming SIP INVITE request refers to the
> \ element of the application/vnd.3gpp.mcvideo-info+xml
> MIME body.
When the controlling function receives a SIP re-INVITE request with and
imminent peril indication, the controlling function:
> 1) if the SIP re-INVITE request contains an unauthorized request for an
> MCVideo imminent peril group call as determined by subclause 6.3.3.1.13.5,
> shall reject the SIP re-INVITE request with a SIP 403 (Forbidden) response
> with the following clarifications:
>
> a) shall include in the SIP 403 (Forbidden) response an
> application/vnd.3gpp.mcvideo-info+xml MIME body as specified in Annex F.1
> with the \ element containing the \ element
> with the \ element set to a value of \"false\"; and
>
> b) shall send the SIP 403 (Forbidden) response as specified in 3GPP TS
> 24.229 [11] and skip the rest of the steps;
>
> 2) if the in-progress emergency group state of the group is set to a value
> of \"false\" and if the SIP re-INVITE request contains an imminent peril
> indication set to a value of \"true\" or the in-progress imminent peril
> state of the group to \"true\", the controlling MCVideo function shall:
>
> a) validate that the SIP re-INVITE request includes a Resource-Priority
> header field with the namespace set to the MCVideo-specific namespace and
> the priority set to the priority designated for imminent peril calls and if
> not:
>
> i) perform the actions specified in subclause 6.3.3.1.8;
>
> ii) send the SIP UPDATE request generated in subclause 6.3.3.1.8 towards the
> initiator of the SIP re-INVITE request according to 3GPP TS 24.229 [11]; and
>
> iii) upon receiving a SIP 200 (OK) response to the SIP UPDATE request sent
> in subclause 6.3.3.1.8 proceed with the rest of the steps.
>
> NOTE 3: Verify that the Resource-Priority header is included and properly
> populated for both ongoing and newly- entered in-progress imminent peril
> states of the specified group.
>
> b) if the in-progress imminent peril state of the group is set to a value of
> \"true\" and this MCVideo user is indicating a new imminent peril
> indication:
>
> i) for each of the other affiliated member of the group generate a SIP
> MESSAGE request notification of the MCVideo user\'s imminent peril
> indication as specified in subclause 6.3.3.1.11 with the following
> clarifications;
>
> A) set the \ element of the application/vnd.3gpp.mcvideo-
> info+xml MIME body to a value of \"true\"; and
>
> B) send the SIP MESSAGE request as specified in 3GPP TS 24.229 [11]; and
>
> ii) cache the information that this MCVideo user has initiated an MCVideo
> imminent peril call; and
>
> c) if the in-progress imminent peril state of the group is set to a value of
> \"false\":
>
> i) shall set the value of the in-progress imminent peril state of the group
> to \"true\";
>
> ii) shall generate SIP re-INVITE requests for the MCVideo imminent peril
> group call to the other affiliated and joined participants of the chat
> MCVideo group as specified in subclause 6.3.3.1.15;
>
> iii) shall generate SIP INVITE requests for the MCVideo imminent peril group
> call to the affiliated but not joined members of the chat MCVideo group as
> specified in subclause 6.3.3.1.7;
>
> A) for each affiliated but not joined member shall send the SIP INVITE
> request towards the MCVideo client as specified in 3GPP TS 24.229 [11]; and
>
> B) Upon receiving a SIP 200 (OK) response to the SIP INVITE request the
> controlling MCVideo function shall interact with the media plane as
> specified in 3GPP TS 24.581 [5]; and
>
> iv) shall cache the information that this MCVideo user has initiated an
> MCVideo imminent peril call;
>
> 3) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element set to a value of
> \"false\" and is an unauthorized request for an MCVideo imminent peril group
> call cancellation as determined by subclause 6.3.3.1.13.6 shall:
>
> a) reject the SIP re-INVITE request with a SIP 403 (Forbidden) response to
> the SIP re-INVITE request; and
>
> b) include in the SIP 403 (Forbidden) response:
>
> i) include in the SIP 403 (Forbidden) response an
> application/vnd.3gpp.mcvideo-info+xml MIME body as specified in Annex F.1
> with the \ element containing the \ element
> with the \ element set to a value of \"false\";
>
> ii) send the SIP 403 (Forbidden) response as specified in 3GPP TS 24.229
> [11]; and
>
> iii) skip the rest of the steps;
>
> 4) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element set to a value of
> \"false\" and is determined to be an authorized request for an MCVideo
> imminent peril call cancellation as specified in subclause 6.3.3.1.13.6 and
> the in-progress imminent peril state of the group to is set to a value of
> \"true\" the controlling MCVideo function shall:
>
> a) validate that the SIP re-INVITE request includes a Resource-Priority
> header field with the namespace set to the MCVideo-specific namespace, and
> the priority set to the priority level designated for a normal priority
> MCVideo group call, and if not:
>
> i) shall perform the actions specified in subclause 6.3.3.1.8; and
>
> ii) upon receiving a SIP 200 (OK) response to the SIP UPDATE request sent in
> subclause 6.3.3.1.8 shall proceed with the rest of the steps;
>
> NOTE 3: verify that the Resource-Priority header is included and properly
> populated for an in-progress emergency group state cancellation of the
> specified group.
>
> b) shall set the in-progress imminent peril state of the group to a value of
> \"false\";
>
> c) shall cache the information that this MCVideo user no longer has an
> outstanding MCVideo imminent peril group call;
>
> d) shall generate SIP re-INVITES requests to the other affiliated and joined
> members of the MCVideo group as specified in subclause 6.3.3.1.15. The
> MCVideo controlling function:
>
> i) for each affiliated and joined member shall send the SIP re-INVITE
> request towards the MCVideo client as specified in 3GPP TS 24.229 [11]; and
>
> ii) Upon receiving a SIP 200 (OK) response to the SIP re-INVITE request the
> controlling MCVideo function shall interact with the media plane as
> specified in 3GPP TS 24.581 [5]; and
>
> NOTE 4: subclause 6.3.3.1.15 will inform the affiliated and joined members
> of the cancellation of the MCVideo group\'s in-progress emergency group
> state and the cancellation of the MCVideo emergency alert if applicable.
>
> e) for each of the affiliated but not joined members of the group shall:
>
> i) generate a SIP MESSAGE request notification of the cancellation of the
> MCVideo user\'s imminent peril call as specified in subclause 6.3.3.1.11;
>
> ii) set the \ element of the
> application/vnd.3gpp.mcvideo-info+xml MIME body to a value of \"false\"; and
>
> iii) send the SIP MESSAGE request according to 3GPP TS 24.229 [11];
>
> 5) shall include in the SIP 200 (OK) response an SDP answer according to
> 3GPP TS 24.229 [11] with the clarifications specified in subclause 6.3.3.2.1
> unless the procedures of subclause 6.3.3.1.8 were performed in step 2) or 4)
> above;
>
> 6) shall include the \"norefersub\" option tag in a Supported header field
> according to IETF RFC 4488 [31];
>
> 7) shall include the \"tdialog\" option tag in a Supported header field
> according to IETF RFC 4538 [32];
>
> 8) shall interact with media plane as specified in 3GPP TS 24.581 [5]; and
>
> 9) shall send the SIP 200 (OK) response towards the MCVideo client according
> to 3GPP TS 24.229 [11].
[TS 24.281, clause 9.2.2.5.1.2]
Upon receipt of a \"SIP INVITE request for non-controlling MCVideo function of
an MCVideo group\" and if a chat group call is not ongoing, the non-
controlling MCVideo function of an MCVideo group:
> NOTE 1: The Contact header field of the SIP INVITE request contains the
> \"isfocus\" feature media tag.
>
> 1) if unable to process the request due to a lack of resources or a risk of
> congestion exists, may reject the SIP INVITE request with a SIP 500 (Server
> Internal Error) response. The controlling MCVideo function may include a
> Retry-After header field to the SIP 500 (Server Internal Error) response as
> specified in IETF RFC 3261 [15]. Otherwise, continue with the rest of the
> steps;
>
> 2) shall determine if the media parameters are acceptable and the MCVideo
> codecs are offered in the SDP offer and if not, reject the request with a
> SIP 488 (Not Acceptable Here) response. Otherwise, continue with the rest of
> the steps;
>
> 3) shall reject the SIP request with a SIP 403 (Forbidden) response and not
> process the remaining steps if:
>
> a) an Accept-Contact header field does not include the g.3gpp.mcvideo media
> feature tag; or
>
> b) an Accept-Contact header field does not include the g.3gpp.icsi-ref media
> feature tag containing the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\";
>
> 4) if the partner MCVideo system does not have a mutual aid relationship
> with the primary MCVideo system identified by the contents of the
> P-Asserted-Identity, shall reject the \"SIP INVITE request for non-
> controlling MCVideo function of an MCVideo group\" with a SIP 403
> (Forbidden) response, with warning text set to \"128 isfocus already
> assigned\" in a Warning header field as specified in subclause 4.4, and
> shall not process the remaining steps;
>
> 5) shall check if a Resource-Priority header field is included in the
> incoming SIP INVITE request and may apply any preferential treatment to the
> SIP request as specified in 3GPP TS 24.229 [11];
>
> 6) shall generate SIP 200 (OK) response to the SIP INVITE request as
> specified in the subclause x.x.x.x before continuing with the rest of the
> steps;
>
> 7) shall include in the SIP 200 (OK) response an SDP answer to the SDP offer
> in the incoming SIP INVITE request as specified in the subclause x.x.x.x;
>
> 8) shall interact with the media plane as specified in 3GPP TS 24.581 [5]
> subclause 6.3.5; and
>
> NOTE 2: Resulting media plane processing is completed before the next step
> is performed.
>
> 9) shall send a SIP 200 (OK) response to the controlling MCVideo function
> according to 3GPP TS 24.229 [11].
[TS 24.281, clause 9.2.2.5.1.3]
Upon receipt of a \"SIP INVITE request for non-controlling MCVideo function of
an MCVideo group\" and if a chat group call is already ongoing, the non-
controlling MCVideo function of an MCVideo group:
> NOTE 1: The Contact header field of the SIP INVITE request contains the
> \"isfocus\" feature media tag.
>
> 1) shall determine if the media parameters are acceptable and the MCVideo
> codecs are offered in the SDP offer and if not reject the request with a SIP
> 488 (Not Acceptable Here) response. Otherwise, continue with the rest of the
> steps;
>
> 2) shall reject the SIP request with a SIP 403 (Forbidden) response and not
> process the remaining steps if:
>
> a) an Accept-Contact header field does not include the g.3gpp.mcvideo media
> feature tag; or
>
> b) an Accept-Contact header field does not include the g.3gpp.icsi-ref media
> feature tag containing the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\";
>
> 3) if the partner MCVideo system does not have a mutual aid relationship
> with the primary MCVideo system identified by the contents of the
> P-Asserted-Identity, shall reject the \"SIP INVITE request for non-
> controlling MCVideo function of an MCVideo group\" with a SIP 403
> (Forbidden) response, with warning text set to \"128 isfocus already
> assigned\" in a Warning header field as specified in subclause 4.4, and
> shall not process the remaining steps;
>
> 4) shall cache the content of the SIP INVITE request, if received in the
> Contact header field and if the specific feature tags are supported;
>
> 5) shall check if a Resource-Priority header field is included in the
> incoming SIP INVITE request and may apply any preferential treatment to the
> SIP request as specified in 3GPP TS 24.229 [11];
>
> 6) shall generate SIP 200 (OK) response to the SIP INVITE request as
> specified in the subclause x.x.x.x before continuing with the rest of the
> steps;
>
> 7) shall include in the SIP 200 (OK) response an SDP answer to the SDP offer
> in the incoming SIP INVITE request as specified in the subclause x.x.x.x;
>
> 8) shall instruct the media plane to initialise the switch to the non-
> controlling mode as specified in 3GPP TS 24.581 [5] subclause x.x.x.x;
>
> NOTE 2: Resulting media plane processing is completed before the next step
> is performed.
>
> 9) if the media plane provided information about the current speaker(s),
> cache the information about the current speaker(s); and
>
> 10) shall send a SIP 200 (OK) response to the controlling MCVideo function
> according to 3GPP TS 24.229 [11].
Upon receipt of the SIP ACK request, the non-controlling MCVideo function of
an MCVideo group:
> 1) if information about a current speaker(s) is cached:
>
> a) shall generate a SIP INFO request as specified in subclause x.x.x.x; and
>
> b) shall send the SIP INFO request to the controlling MCVideo function as
> specified in 3GPP TS 24.229 [11];
>
> 2) shall instruct the media plane to finalise the switch to the non-
> controlling mode as specified in 3GPP TS 24.581 [5] subclause 6.3.5.3; and
>
> Editor\'s Note: the need for these media plane procedures is FFS.
>
> 3) if at least one of the MCVideo clients in the chat group session has a
> subscription to the conference event package, shall subscribe to the
> conference event package from the controlling MCVideo function as specified
> in subclause 9.2.3.5.3.
[TS 24.281, clause 9.2.2.5.1.6]
Upon receipt of a SIP re-INVITE request from an MCVideo client the non-
controlling MCVideo function shall act as the controlling MCVideo function and
shall perform the actions in subclause 9.2.2.4.1.2.
[TS 24.581, clause 6.2.4.2.2]
When a call is initiated as described in 3GPP TS 24.281 [2], the transmission
participant:
> 1\. shall create an instance of the \'Transmission participant state
> transition diagram for basic transmission control operation\';
>
> 2\. if the originating transmission participant receives a transmission
> control message before it receives the SIP 200 (OK) response, shall store
> the transmission control message;
>
> NOTE: The originating transmission participant might receive a transmission
> control message before the SIP 200 (OK) response when initiating, joining or
> re-joining a call because of processing delays of the SIP 200 (OK) response
> in the SIP core.
>
> 3\. if the established MCVideo call is a chat group call and the SIP INVITE
> request is not an implicit Transmission request, shall enter the \'U: has no
> permission to transmit\' state;
>
> 4\. if for the established MCVideo call the SIP INVITE request is an
> implicit Transmission request:
>
> a. shall start timer T100 (Transmission Request) and initialise counter C100
> (Transmission Request) to 1;
>
> b. shall enter the \'U: pending request to transmit\' state; and
>
> c. if the transmission participant has received and stored a transmission
> control message before the reception of the SIP 200 (OK) response, shall act
> as if the transmission control message was received in the \'U: pending
> request to transmit\' state after entering the \'U: pending request to
> transmit\' state; and
>
> 5\. if the established MCVideo call is a broadcast group call, shall enter
> the \'U: has permission to transmit\' state.
When the transmission participant is re-joining an ongoing MCVideo call as
described in 3GPP TS 24.281 [2] the transmission participant shall enter the
\'U: has no permission to transmit\' state.
[TS 24.581, clause 6.3.2.2]
When an MCVideo call is established a new instance of the transmission control
server state machine for \'general transmission control operation\' is
created.
For each MCVideo client added to the MCVideo call, a new instance of the
transmission control server state machine for \'basic transmission control
operation towards the transmission participant\' is added.
If the optional \"mc_queueing\" feature is supported and has been negotiated
as specified in clause 14, the transmission control server could queue the
implicit transmission control request for the media-transmission control
entity.
The original initial SIP INVITE request or SIP REFER request to establish an
MCVideo chat group call or to re-join an ongoing MCVideo call is not handled
as an implicit transmission control request message by the transmission
control server unless explicitly stated in the SIP INVITE request or in the
SIP REFER request.
The permission to send media to the inviting MCVideo client due to implicit
transmission control request is applicable to both confirmed indication and
unconfirmed indication.
When the first unconfirmed indication is received from the invited
participating MCVideo function (see 3GPP TS 24.281 [2]) the transmission
control server optionally can give an early indication to send RTP media
packets, to the inviting MCVideo client.
If an early indication to send RTP media packets is given to the inviting
MCVideo client, the transmission participant is granted the permission to send
media and the MCVideo server buffers RTP media packets received from the
MCVideo client at least until the first invited MCVideo client accepts the
invitation or until the RTP media packet buffer exceeds it maximum limit to
store RTP media packets.
If the MCVideo server does not support or does not allow media buffering then
when an early indication to send RTP media packets is not given to the
inviting MCVideo client, the transmission participant is granted the
permission to send media when the first invited MCVideo client accepts the
media.
Before the transmission control server sends the first transmission control
message in the MCVideo call, the transmission control server has to assign
itself a SSRC identifier to be included in media transmission control messages
and quality feedback messages if the MCVideo server is supporting that option.
A suitable algorithm to generate the SSRC identifier is described in IETF RFC
3550 [3].
The transmission participant and the transmission control server can negotiate
the maximum priority level that the transmission participant is permitted to
request. The transmission control server can pre-empt the current sender based
on the negotiated maximum priority level that the transmission participant is
permitted to request and the priority level included in the Transmission Media
Request message.
> NOTE: The maximum priority level that a transmission participant can use is
> negotiated as specified in subclause 14.3.3 and is based on group
> configuration data retrieved by the controlling MCVideo function from the
> group management server as described in 3GPP TS 24.481 [12] and service
> configuration data retrieved by the controlling MCVideo function from the
> configuration management server as described in 3GPP TS 24.484 [13].
The transmission participant and the transmission control server can negotiate
queueing of Transmission requests using the \"mc_queueing\" fmtp attribute as
described in clause 14. If queueing is supported and negotiated, the
transmission control server queues the transmission control request if a
Transmission Media Request message is received when another transmission
participant has the transmission and the priority of the current speaker is
the same or higher.
[TS 24.581, clause 6.3.4.4.12]
Upon receiving an implicit Transmission request due to an upgrade to an
emergency group call or due to an upgrade to imminent peril call, the
transmission control arbitration logic in the transmission control server:
> 1\. if counter Cx (Simultaneous transmission video) has not reached its
> upper limit:
>
> a. shall perform the actions specified in the subclause 6.3.4.4.2;
>
> 2\. if counter Cx (Simultaneous transmission video) has reached its upper
> limit:
>
> a. select one of the transmission participants with permission to send media
> without the pre-emptive priority or low effective priority;
>
> b. shall stop timer T4 (Transmission Grant), if running;
>
> c. shall set the Reject Cause field in the Transmission Revoke message to #4
> (Media Transmission pre-empted);
>
> d. shall enter the \'G: pending Transmission Revoke\' state as specified in
> the subclause 6.3.4.5.2;
>
> e. shall insert the transmission participant into the active Transmission
> request queue to the position in front of all queued requests, if not
> inserted yet or update the position of the transmission participant in the
> active Transmission request queue to the position in front of all other
> queued requests, if already inserted; and
>
> f. shall send a Transmission Queue Position Info message to the requesting
> transmission participant, if negotiated support of queueing Transmission
> requests as specified in clause 14. The Queue Position Request message:
>
> i. shall include the queue position and transmission priority in the Queue
> Info field; and
>
> ii. if a group call is a broadcast group call, a system call, an emergency
> call, an imminent peril call, or a temporary group session, shall include
> the Transmission Indicator field with appropriate indications.
[TS 24.581, clause 6.3.5.3.9]
When an ongoing session is upgraded to an emergency group call and when the
application and signalling plane indicates that a subsequent SDP offer
included the \"mc_implicit_request\" fmtp attribute as described in clause 14,
the transmission control interface towards the MCVideo client in the
transmission control server:
> 1\. shall indicate to the transmission control server arbitration logic that
> an implicit Transmission request is received due to an upgrade to an
> emergency group call; and
>
> 2\. shall remain in the \'U: not permitted and Transmit Idle\' state.
[TS 24.581, clause 6.3.5.4.8]
When an ongoing session is upgraded to an emergency group call and when the
application and signalling plane indicates that a subsequent SDP offer
included the \"mc_implicit_request\" fmtp attribute as specified in clause 14,
the transmission control interface towards the MCVideo client in the
transmission control server:
> 1\. shall indicate to the transmission control server arbitration logic that
> an implicit Transmission request is received due to an upgrade to an
> emergency group call; and
>
> 2\. shall remain in the \'U: not permitted and Transmit Taken\' state.
##### 6.1.2.3.3 Test description {#test-description-19 .H6}
##### 6.1.2.3.3.1 Pre-test conditions {#pre-test-conditions-19 .H6}
##### System Simulator: {#system-simulator-14 .H6}
\- SS (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
##### IUT: {#iut-13 .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
##### Preamble: {#preamble-14 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- UE States at the end of the preamble
\- The UE is in E-UTRA Registered, Idle Mode state.
\- The MCVideo Client Application has been activated and User has registered-
in as the MCVideo User with the Server as active user at the Client.
##### 6.1.2.3.3.2 Test procedure sequence {#test-procedure-sequence-19 .H6}
Table 6.1.2.3.3.2-1: Main Behaviour
+------------+------------+------------+---------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +============+============+============+=========+=========+====+ | | | U - S | Message | | | +------------+------------+------------+---------+---------+----+ | 1 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | the | | | | | | | est | | | | | | | ablishment | | | | | | | of a chat | | | | | | | group call | | | | | | | with | | | | | | | implicit | | | | | | | tr | | | | | | | ansmission | | | | | | | request. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 2 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | CO session | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3B.1.3-1 | | | | | | | to | | | | | | | establish | | | | | | | a chat | | | | | | | group call | | | | | | | with | | | | | | | implicit | | | | | | | tr | | | | | | | ansmission | | | | | | | control | | | | | | | according | | | | | | | to option | | | | | | | b,ii of | | | | | | | NOTE 1 in | | | | | | | TS | | | | | | | 36.579.1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.1.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 3-7 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 8 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | provide | | | | | | | tr | | | | | | | ansmission | | | | | | | granted | | | | | | | no | | | | | | | tification | | | | | | | to the | | | | | | | user? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 9 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | end of | | | | | | | tra | | | | | | | nsmission. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 10 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | tr | | | | | | | ansmission | | | | | | | End | | | | | | | Request | | | | | | | CO\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.7.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 11 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 12 | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CT | | | | | | | session | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3.4.3-1 | | | | | | | to upgrade | | | | | | | the call | | | | | | | to an | | | | | | | emergency | | | | | | | chat group | | | | | | | call? | | | | | +------------+------------+------------+---------+---------+----+ | 13-15 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 16 | Check: | - | - | 6, 7 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Tr | | | | | | | ansmission | | | | | | | No | | | | | | | tification | | | | | | | and | | | | | | | Request | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.3.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 17-20 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 21 | Check: | - | - | 7 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | provide | | | | | | | receive | | | | | | | media | | | | | | | success | | | | | | | no | | | | | | | tification | | | | | | | to the | | | | | | | user? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 21A | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Reception | | | | | | | End | | | | | | | Request | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5. | | | | | | | 3B.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 22 | Check: | - | - | 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CT | | | | | | | session | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3.4.3-1 | | | | | | | to | | | | | | | downgrade | | | | | | | the call? | | | | | +------------+------------+------------+---------+---------+----+ | 23-25 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 26 | Check: | - | - | 6, 7 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Tr | | | | | | | ansmission | | | | | | | No | | | | | | | tification | | | | | | | and | | | | | | | Request | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.3.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 27-30 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 31 | Check: | - | - | 7 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | provide | | | | | | | receive | | | | | | | media | | | | | | | success | | | | | | | no | | | | | | | tification | | | | | | | to the | | | | | | | user? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 31A | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Reception | | | | | | | End | | | | | | | Request | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5. | | | | | | | 3B.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 32 | Check: | - | - | 4 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CT | | | | | | | session | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3.4.3-1 | | | | | | | to upgrade | | | | | | | the call | | | | | | | to an | | | | | | | imminent | | | | | | | peril chat | | | | | | | group | | | | | | | call? | | | | | +------------+------------+------------+---------+---------+----+ | 33-35 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 36 | Check: | - | - | 6, 7 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Tr | | | | | | | ansmission | | | | | | | No | | | | | | | tification | | | | | | | and | | | | | | | Request | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.3.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 37-40 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 41 | Check: | - | - | 7 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | provide | | | | | | | receive | | | | | | | media | | | | | | | success | | | | | | | no | | | | | | | tification | | | | | | | to the | | | | | | | user? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 41A | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Reception | | | | | | | End | | | | | | | Request | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5. | | | | | | | 3B.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 42 | Check: | - | - | 5 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CT | | | | | | | session | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3.4.3-1 | | | | | | | to | | | | | | | downgrade | | | | | | | the call? | | | | | +------------+------------+------------+---------+---------+----+ | 43-45 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 46 | Check: | - | - | 6, 7 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Tr | | | | | | | ansmission | | | | | | | No | | | | | | | tification | | | | | | | and | | | | | | | Request | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.3.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 47-50 | Void | - | - | 6 | P | +------------+------------+------------+---------+---------+----+ | 51 | Check: | - | - | 7 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | provide | | | | | | | receive | | | | | | | media | | | | | | | success | | | | | | | no | | | | | | | tification | | | | | | | to the | | | | | | | user? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 52 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 53 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | release | | | | | | | the call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 53A | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Reception | | | | | | | End | | | | | | | Request | | | | | | | CO\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.8.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 54 | Check: | - | - | 8 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CO | | | | | | | call | | | | | | | release\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 55 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | NOTE 1: | | | | | | | This is | | | | | | | expected | | | | | | | to be done | | | | | | | via a | | | | | | | suitable | | | | | | | impl | | | | | | | ementation | | | | | | | dependent | | | | | | | MMI. | | | | | | +------------+------------+------------+---------+---------+----+
##### 6.1.2.3.3.3 Specific message contents {#specific-message-contents-19
.H6}
Table 6.1.2.3.3.3-1: SIP INVITE from the UE (Step 2, Table 6.1.2.3.3.2-1;\
Step 2, TS 36.579-1 [2] Table 5.3B.1.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.1-1
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP message**  
MIME-part-body SDP Message as described in Table 6.1.2.3.3.3-1A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.1.2.3.3-2
Table 6.1.2.3.3.3-1A: SDP message in SIP INVITE (Table 6.1.2.3.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.1-2, condition
INITIAL_SDP_OFFER, IMPLICIT_GRANT_REQUESTED
* * *
Table 6.1.2.3.3.3-2: MCVideo-Info in SIP INVITE (Table 6.1.2.3.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition CHAT-GROUP-
CALL, INVITE_REFER
* * *
Table 6.1.2.3.3.3-3: SIP 200 (OK) from the SS (Step 2, Table 6.1.2.3.3.2-1;\
Step 4, TS 36.579-1 [2] Table 5.3B.1.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.17.1.2-1, condition INVITE-RSP
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
SDP Message As described in Table 6.1.2.3.3.3-3A
Table 6.1.2.3.3.3-3A: SDP message in SIP 200 (OK) (Table 6.1.2.3.3.3-3)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition SDP_ANSWER,
IMPLICIT_GRANT_REQUESTED
* * *
Table 6.1.2.3.3.3-4..7: Void
Table 6.1.2.3.3.3-8: SIP INVITE from the SS (Step 12, Table 6.1.2.3.3.2-1;\
Step 2, TS 36.579-1 [2] Table 5.3.4.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.2-1, condition re_INVITE,
MO_CALL
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP Message**  
MIME part body SDP Message as described in Table 6.1.2.3.3.3-8A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.1.2.3.3.3-9
Table 6.1.2.3.3.3-8A: SDP in SIP INVITE\ (Table 6.1.2.3.3.3-8, 6.1.2.3.3.3-14,
6.1.2.3.3.3-16, 6.1.2.3.3.3-20)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition SDP_OFFER
* * *
Table 6.1.2.3.3.3-9: MCVideo-Info in SIP INVITE (Table 6.1.2.3.3.3-8)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.2-2, condition CHAT-GROUP-
CALL, EMERGENCY-CALL
* * *
Table 6.1.2.3.3.3-10: SIP 200 (OK) from the UE (Steps 12, 22, 32, 42, Table
6.1.2.3.3.2-1;\ Step 4, TS 36.579-1 [2] Table 5.3.4.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.17.1.1-1, condition INVITE-RSP
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP Message**  
MIME part body SDP Message as described in Table 6.1.2.3.3.3-10A  
MIME body part **MCVideo-Info**  
**MIME-part-body** MCVideo-Info as described in Table 6.1.2.3.3.3-11
Table 6.1.2.3.3.3-10A: SDP in SIP 200 (OK) (Table 6.1.2.3.3.3-3)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.1-2, condition SDP_ANSWER
* * *
Table 6.1.2.3.3.3-11: MCVideo-Info in SIP 200(OK) (Table 6.1.2.3.3.3-10)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition INVITE-RSP
* * *
Table 6.1.2.3.3.3-11A: Media Transmission Notification from the SS (Step 16,
Table 6.1.2.3.3.2-1;\ Step 1, TS 36.579-1 [2] Table 5.3B.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.7-1, condition EMERGENCY-CALL
* * *
Table 6.1.2.3.3.3-11B: Transmission Idle from the SS (Step 21A, Table
6.1.2.3.3.2-1;\ Step 4, TS 36.579-1 [2] Table 5.3B.10.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.16-1, condition EMERGENCY-
CALL
* * *
Table 6.1.2.3.3.3-12..13: Void
Table 6.1.2.3.3.3-14: SIP INVITE from the SS (Step 22, Table 6.1.2.3.3.2-1;\
Step 2, TS 36.579-1 [2] Table 5.3.4.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.2-1, condition re_INVITE,
MO_CALL
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP Message**  
MIME part body SDP Message as described in Table 6.1.2.3.3.3-8A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.1.2.3.3.3-15
Table 6.1.2.3.3.3-15: MCVideo-Info in SIP INVITE (Table 6.1.2.3.3.3-14)
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.2-2, condition CHAT-GROUP-CALL
* * *
Information Element Value/remark Comment Reference Condition mcvideoinfo  
mcvideo-Params  
emergency-ind Encrypted \ with mcvideoBoolean set to false
Encryption according to NOTE 1 in TS 36.579-1 [2] Table 5.5.3.2.2-2  
alert-ind Encrypted \ with mcvideoBoolean set to false Encryption
according to NOTE 1 in TS 36.579-1 [2] Table 5.5.3.2.2-2
Table 6.1.2.3.3.3-16: SIP INVITE from the SS (Step 32, Table 6.1.2.3.3.2-1;\
Step 2, TS 36.579-1 [2] Table 5.3.4.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.2-1, condition re_INVITE,
MO_CALL
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP Message**  
MIME part body SDP Message as described in Table 6.1.2.3.3.3-8A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.1.2.3.3.3-17
Table 6.1.2.3.3.3-17: MCVideo-Info in SIP INVITE (Table 6.1.2.3.3.3.16)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.2-2, condition CHAT-GROUP-
CALL, IMMPERIL-CALL
* * *
Table 6.1.2.3.3.3-17A: Media Transmission Notification from the SS (Step 36,
Table 6.1.2.3.3.2-1;\ Step 1, TS 36.579-1 [2] Table 5.3B.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.7-1, condition IMMPERIL-CALL
* * *
Table 6.1.2.3.3.3-17B: Transmission Idle from the SS (Step 41A, Table
6.1.2.3.3.2-1;\ Step 4, TS 36.579-1 [2] Table 5.3B.10.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.16-1, condition IMMPERIL-CALL
* * *
Table 6.1.2.3.3.3-18..19: Void
Table 6.1.2.3.3.3-20: SIP INVITE from the SS (Step 42, Table 6.1.2.3.3.2-1;\
Step 2, TS 36.579-1 [2] Table 5.3.4.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.2-1, condition re_INVITE,
MO_CALL
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP Message**  
MIME part body SDP Message as described in Table 6.1.2.3.3.3-8A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.1.2.3.3.3-21
Table 6.1.2.3.3.3-21: MCVideo-Info in SIP INVITE (Table 6.1.2.3.3.3-20)
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.2-2, condition CHAT-GROUP-CALL
* * *
Information Element Value/remark Comment Reference Condition mcvideoinfo  
mcvideo-Params  
imminentperil-ind Encrypted \ with mcvideoBoolean set to
false Encryption according to NOTE 1 in TS 36.579-1 [2] Table 5.5.3.2.2-2
6.1.2.4 On-network / Chat Group Call / Emergency Call / Imminent Peril Call /
Client Terminated (CT)
##### 6.1.2.4.1 Test Purpose (TP) {#test-purpose-tp-20 .H6}
##### (1) {#section-96 .H6}
**with** { UE (MCVideo Client) registered and authorised for MCVideo Service }
ensure that {
**when** { the UE (MCVideo Client) receives a SIP INVITE message from the SS
(MCVideo Server) with an emergency indication for a MCVideo On-demand
Emergency Chat Group Call }
**then** { the UE (MCVideo Client) displays an indication for the MCVideo
Emergency Chat Group Call to the MCVideo User , **and** responds to the SS
(MCVideo Server) with a SIP 200 (OK) message }
}
##### (2) {#section-97 .H6}
**with** { the UE (MCVideo Client) having an ongoing MCVideo Emergency Chat
Group Call, with implicit Reception Control }
ensure that {
**when** { the UE (MCVideo Client) receives a Media Transmission Notification
message from the SS (MCVideo Server) }
**then** {the UE (MCVideo Client) provides media transmission notification to
the MCVideo User **and** , upon receipt of approval from the user, sends a
Receive Media Request message to the SS (MCVideo Server) **and** respects the
Reception Control imposed by the SS (MCVideo Server) (Media Transmission
Notification, Receive Media Request, Receive Media Response, Transmission
Granted, Media Reception End Request, Media Reception End Response) }
}
##### (3) {#section-98 .H6}
**with** { the UE (MCVideo Client) having an ongoing Emergency Chat Group
Call, with implicit Reception Control and having sent a Receive Media Request
message }
ensure that {
**when** { the UE (MCVideo Client) receives a Receive Media Response message
from the SS ( MCVideo Server) } **then** {the UE (MCVideo Client) provides
receive media success notification to the MCVideo User }
}
##### (4) {#section-99 .H6}
**with** { the UE (MCVideo Client) having an ongoing Emergency Chat Group
Call, with implicit Reception Control }
ensure that {
**when** {the UE MCVideo Client) receives a Media Reception End Request
message from the SS (MCVideo Server) }
**then** { the UE (MCVideo Client) notifies the MCVideo User, **and** upon
receipt of user acceptance, sends a Media Reception End Response message to
the SS (MCVideo Server }
}
##### (5) {#section-100 .H6}
**with** { the UE (MCVideo Client) having an ongoing Emergency Chat Group Call
with Automatic Commencement Mode }
ensure that {
**when** { the MCVideo User requests to end the Emergency Chat Group Call, }
**then** { the UE (MCVideo Client) sends a SIP BYE message to the SS (MCVideo
Server, receives a SIP 200 (OK) message, and leaves the MCVideo session }
}
##### (6) {#section-101 .H6}
**with** { UE (MCVideo Client) registered and authorised for MCVideo Service }
ensure that {
**when** { the UE (MCVideo Client) receives a SIP INVITE message from the SS
(MCVideo Server) with an imminent peril indication for a MCVideo On-demand
Imminent Peril Chat Group Call }
**then** { the UE (MCVideo Client) displays an indication for the MCVideo
Imminent Peril Chat Group Call to the MCVideo User, **and** responds to the SS
(MCVideo Server) with a SIP 200 (OK) message }
}
##### (7) {#section-102 .H6}
**with** { the UE (MCVideo Client) having an ongoing Imminent Peril Chat Group
Call, with implicit Reception Control }
ensure that {
**when** { the UE (MCVideo Client) receives a Media Transmission Notification
message from the SS (MCVideo Server) }
**then** {the UE (MCVideo Client) provides media transmission notification to
the MCVideo User **and** , upon receipt of approval from the user, sends a
Receive Media Request message to the SS (MCVideo Server) **and** respects the
Reception Control imposed by the SS (MCVideo Server) (Media Transmission
Notification, Receive Media Request, Receive Media Response, Transmission
Granted, Media Reception End Request, Media Reception End Response) }
##### (8) {#section-103 .H6}
**with** { the UE (MCVideo Client) having an ongoing Imminent Peril Chat Group
Call, with implicit Reception Control and having sent a Receive Media Request
message }
ensure that {
**when** { the UE (MCVideo Client) receives a Receive Media Response message
from the SS (MCVideo Server) }
**then** {the UE (MCVideo Client) provides receive media success notification
to the MCVideo User }
##### (9) {#section-104 .H6}
**with** { the UE (MCVideo Client) having an ongoing Imminent Peril Chat Group
Call, with implicit Reception Control }
ensure that {
**when** {the UE (MCVideo Client) receives a Media Reception End Request
message from the SS (MCVideo Server) }
**then** {the UE (MCVideo Client) notifies the MCVideo User, **and** upon
receipt of user acceptance, sends a Media Reception End Response message to
the SS (MCVideo Server }
##### (10) {#section-105 .H6}
**with** { the UE (MCVideo Client) having an ongoing Imminent Peril Chat Group
Call with Automatic Commencement Mode }
ensure that {
**when** { the MCVideo User requests to end the Emergency Chat Group Call, }
**then** { the UE (MCVideo Client) sends a SIP BYE message to the SS (MCVideo
Server, receives a SIP 200 (OK) message, and leaves the MCVideo session }
}
##### 6.1.2.4.2 Conformance requirements {#conformance-requirements-20 .H6}
References: The conformance requirements covered in the current TC are
specified in: TS 24.281, clauses ~~2~~, 9.2.2.2.1.2, 9.2.2.2.1.6, 9.2.2.2.2.2,
6.2.6 and TS 24.581, clauses 6.2.5.3.2, 6.2.5.3.3, 6.2.5.4.5. The following
represents a copy/paste extraction of the requirements relevant to the test
purpose; any references within the copy/paste text should be understood within
the scope of the core spec they have been copied from. Unless otherwise
stated, these are Rel-14 requirements.
[TS 24.281, clause 9.2.2.2.1.2]
This clause covers both on-demand session and pre-established sessions.
Upon receipt of a SIP re-INVITE request the MCVideo client:
> 1) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element containing the \ Params> element with the \ element set to a value of
> \"true\":
>
> a) should display to the MCVideo user the MCVideo ID of the originator of
> the MCVideo emergency group call and an indication that this is an MCVideo
> emergency group call;
>
> b) if the \ element containing the \ element
> contains an \ element set to \"true\", should display to the
> MCVideo user an indication of the MCVideo emergency alert and associated
> information;
>
> c) shall set the MCVideo emergency group state to \"MVEG 2: in-progress\";
>
> d) shall set the MCVideo imminent peril group state to \"MVIG 1: no-
> imminent-peril\"; and
>
> e) shall set the MCVideo imminent peril group call state to \"MIGC 1:
> imminent-peril-gc-capable\";
>
> 2) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element containing the \ Params> element with the \ element set to a value of
> \"true\":
>
> a) should display to the MCVideo user the MCVideo ID of the originator of
> the MCVideo imminent peril group call and an indication that this is an
> MCVideo imminent peril group call; and
>
> b) shall set the MCVideo imminent peril group state to \"MVIG 2: in-
> progress\";
>
> 3) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element containing the \ Params> element with the \ element set to a value of
> \"false\":
>
> a) should display to the MCVideo user the MCVideo ID of the MCVideo user
> cancelling the MCVideo emergency group call;
>
> b) if the \ element containing the \ element
> contains an \ element set to \"false\":
>
> i) should display to the MCVideo user an indication of the MCVideo emergency
> alert cancellation and the MCVideo ID of the MCVideo user cancelling the
> MCVideo emergency alert; and
>
> ii) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body including an \ element:
>
> A) should display to the MCVideo user the MCVideo ID contained in the
> \ element of the MCVideo user that originated the MCVideo
> emergency alert; and
>
> B) if the MCVideo ID contained in the \ element is the
> MCVideo ID of the receiving MCVideo user, shall set the MCVideo emergency
> alert state to \"MVEA 1: no-alert\";
>
> c) shall set the MCVideo emergency group state to \"MVEG 1: no-emergency\";
> and
>
> d) if the MCVideo emergency group call state of the group is set to \"MVEGC
> 3: emergency-call-granted\", shall set the MCVideo emergency group call
> state of the group to \"MVEGC 1: emergency-gc-capable\";
>
> 4) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element containing the \ Params> element with the \ element set to a value of
> \"false\":
>
> a) should display to the MCVideo user the MCVideo ID of the MCVideo user
> cancelling the MCVideo imminent peril group call and an indication that this
> is an MCVideo imminent peril group call;
>
> b) shall set the MCVideo imminent peril group state to \"MVIG 1: no-
> imminent-peril\"; and
>
> c) shall set the MCVideo imminent peril group call state to \"MIGC 1:
> imminent-peril-gc-capable\";
>
> 5) may check if a Resource-Priority header field is included in the incoming
> SIP re-INVITE request and may perform further actions outside the scope of
> this specification to act upon an included Resource-Priority header field as
> specified in 3GPP TS 24.229 [11];
>
> 6) shall accept the SIP re-INVITE request and generate a SIP 200 (OK)
> response according to rules and procedures of 3GPP TS 24.229 [11];
>
> 7) shall include the g.3gpp.mcvideo media feature tag in the Contact header
> field of the SIP 200 (OK) response;
>
> 8) shall include the g.3gpp.icsi-ref media feature tag containing the value
> of \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" in the Contact header field
> of the SIP 200 (OK) response;
>
> 9) if the SIP re-INVITE request was received within an on-demand session,
> shall include an SDP answer in the SIP 200 (OK) response to the SDP offer in
> the incoming SIP re-INVITE request according to 3GPP TS 24.229 [11] with the
> clarifications given in clause 6.2.2; and
>
> 10) shall send the SIP 200 (OK) response towards the MCVideo server
> according to rules and procedures of 3GPP TS 24.229 [11].
[TS 24.281, clause 9.2.2.2.1.6]
This procedure is used for MCVideo emergency and MCVideo imminent peril calls
when the MCVideo client is affiliated but not joined to the chat group.
In the procedures in this clause:
> 1) emergency indication in an incoming SIP INVITE request refers to the
> \ element of the application/vnd.3gpp.mcvideo-info+xml MIME
> body; and
>
> 2) imminent peril indication in an incoming SIP INVITE request refers to the
> \ element of the application/vnd.3gpp.mcvideo-info+xml
> MIME body.
Upon receipt of an initial SIP INVITE request, the MCVideo client:
> 1) may reject the SIP INVITE request if either of the following conditions
> is met:
>
> a) MCVideo client does not have enough resources to handle the call; or
>
> b) any other reason outside the scope of this specification;
>
> 2) if the SIP INVITE request is rejected in step 1), shall respond toward
> participating MCVideo function either with appropriate reject code as
> specified in 3GPP TS 24.229 [11] and warning texts as specified in clause
> 4.4.2 or with SIP 480 (Temporarily unavailable) response not including
> warning texts if the user is authorised to restrict the reason for failure
> and skip the rest of the steps of this clause;
>
> NOTE 1: if the SIP INVITE request contains an emergency indication or
> imminent peril indication, the MCVideo client can by means beyond the scope
> of this specification choose to accept the request.
>
> 3) if the SIP INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element containing the \ Params> element with the \ element set to a value of
> \"true\":
>
> a) should display to the MCVideo user an indication that this is a SIP
> INVITE request for an MCVideo emergency group call and:
>
> i) should display the MCVideo ID of the originator of the MCVideo emergency
> group call contained in the \ element of the
> application/vnd.3gpp.mcvideo-info+xml MIME body;
>
> ii) should display the MCVideo group identity of the group with the
> emergency condition contained in the \ element;
> and
>
> iii) if the \ element is set to \"true\", should display to the
> MCVideo user an indication of the MCVideo emergency alert and associated
> information;
>
> b) shall set the MCVideo emergency group state to \"MVEG 2: in-progress\";
>
> c) shall set the MCVideo imminent peril group state to \"MVIG 1: no-
> imminent-peril\"; and
>
> d) shall set the MCVideo imminent peril group call state to \"MVIGC 1:
> imminent-peril-gc-capable\"; otherwise
>
> 4) if the SIP INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element containing the \ Params> element with the \ element set to a value of
> \"true\":
>
> a) should display to the MCVideo user an indication that this is a SIP
> INVITE request for an MCVideo imminent peril group call and:
>
> i) should display the MCVideo ID of the originator of the MCVideo imminent
> peril group call contained in the \ element of the
> application/vnd.3gpp.mcvideo-info+xml MIME body; and
>
> ii) should display the MCVideo group identity of the group with the imminent
> peril condition contained in the \ element; and
>
> b) shall set the MCVideo imminent peril group state to \"MVIG 3: in-
> progress\";
>
> 5) shall check if a Resource-Priority header field is included in the
> incoming SIP INVITE request and may perform further actions outside the
> scope of this specification to act upon an included Resource-Priority header
> field as specified in 3GPP TS 24.229 [11];
>
> 6) shall accept the SIP INVITE request and generate a SIP 200 (OK) response
> according to rules and procedures of 3GPP TS 24.229 [11];
>
> 7) shall include the option tag \"timer\" in a Require header field of the
> SIP 200 (OK) response;
>
> 8) shall include the g.3gpp.mcvideo media feature tag in the Contact header
> field of the SIP 200 (OK) response;
>
> 9) shall include the g.3gpp.icsi-ref media feature tag containing the value
> of \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" in the Contact header field
> of the SIP 200 (OK) response;
>
> 10) shall include the Session-Expires header field in the SIP 200 (OK)
> response and start the SIP session timer according to IETF RFC 4028 [23]. If
> no \"refresher\" parameter was included in the received SIP INVITE request
> the \"refresher\" parameter in the Session-Expires header field shall be set
> to \"uas\", otherwise shall include a \"refresher\" parameter set to the
> value received in the Session-Expires header field the received SIP INVITE
> request;
>
> 11) shall include an SDP answer in the SIP 200 (OK) response to the SDP
> offer in the incoming SIP INVITE request according to 3GPP TS 24.229 [11]
> with the clarifications given in clause 6.2.2;
>
> 12) shall send the SIP 200 (OK) response towards the MCVideo server
> according to rules and procedures of 3GPP TS 24.229 [11]; and
>
> 13) shall interact with the media plane as specified in 3GPP TS 24.581 [5].
[TS 24.281, clause 9.2.2.2.2.2]
Upon receiving a SIP BYE request for releasing the MCVideo chat session, the
MCVideo client shall follow the procedures as specified in subclause 6.2.6.
[TS 24.281, clause 6.2.6]
Upon receiving a SIP BYE request, the MCVideo client:
> 1) shall interact with the media plane as specified in 3GPP TS 24.581[5];
> and
>
> 2) shall send SIP 200 (OK) response towards MCVideo server according to 3GPP
> TS 24.229 [11].
[TS 24.581, clause 6.2.5.3.2]
Upon receiving the media transmission notification from the transmission
control server, the transmission participant:
> 1\. if the first bit in the subtype of the media transmission notification
> message is set to \'1\' (Acknowledgment is required) as described in
> subclause 9.2.2.1, shall send a Transmission control Ack message. The
> Transmission control Ack message:
>
> a. shall include the Message Type field set to \'6\' (Media transmission
> notification); and
>
> b. shall include the Source field set to \'0\' (the transmission participant
> is the source);
>
> 2\. shall provide media transmission notification to the user;
>
> 3\. shall store the User ID and the SSRC of the user transmitting the media;
>
> 4\. if the Reception Mode field is set to \'0\' indicating automatic
> reception mode:
>
> a. shall create an instance of the \'Transmission participant state
> transition diagram for basic reception control operation\';
>
> b. shall map the stored User ID and the SSRC of the user transmitting the
> media with the instance of \'Transmission participant state transition
> diagram for basic reception control operation\' created in step a); and
>
> c. shall enter the \'U: has permission to receive\' state;
>
> 5\. may display the details of the incoming media to the user; and
>
> 6\. shall remain in the \'U: reception controller\' state.
[TS 24.581, clause 6.2.5.3.3]
Upon receiving an indication from the user to request permission to receive
media, the transmission participant:
> 1\. shall send the Receive Media Request message toward the transmission
> control server; The Receive Media Request message:
>
> a. if a different priority than the normal priority is required, shall
> include the Reception Priority field with the priority not higher than
> negotiated with the transmission control server as specified in subclause
> 14.3.3; and
>
> b. if the receive media request is a broadcast group call, system call,
> emergency call or an imminent peril call, shall include a Transmission
> Indicator field indicating the relevant call types;
>
> 2\. shall create an instance of the \'Transmission participant state
> transition diagram for basic reception control operation\';
>
> 3\. shall map the stored User ID and the SSRC of the user transmitting the
> media with instance of \'Transmission participant state transition diagram
> for basic reception control operation\' created in step 2; and
>
> 4\. shall remain in the \'U: reception controller\' state.
[TS 24.581, clause 6.2.5.4.5]
Upon receiving a granted response for Receive media request message, the
transmission participant:
> 1\. if the first bit in the subtype of the Receive media response message is
> set to \'1\' (Acknowledgment is required) as described in subclause 9.2.2.1,
> shall send a Transmission control Ack message. The Transmission control Ack
> message:
>
> a. shall include the Message Type field set to \'7\' (Receive media
> response); and
>
> b. shall include the Source field set to \'0\' (the transmission participant
> is the source);
>
> 2\. shall provide receive media success notification to the user;
>
> 3\. if the Receive Media Indicator field is included and the B-bit is set to
> \'1\' (Broadcast group call), shall provide a notification to the user
> indicating the type of call;
>
> 4\. shall stop timer T103 (Receive Media Request); and
>
> 5\. shall enter the \'U: has permission to receive\' state.
##### 6.1.2.4.3 Test description {#test-description-20 .H6}
##### 6.1.2.4.3.1 Pre-test conditions {#pre-test-conditions-20 .H6}
##### System Simulator: {#system-simulator-15 .H6}
\- SS (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
##### IUT: {#iut-14 .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
##### Preamble: {#preamble-15 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- UE States at the end of the preamble
\- The UE is in E-UTRA Registered, Idle Mode state.
\- The MCVideo Client Application has been activated and User has registered-
in as the MCVideo User with the Server as active user at the Client.
##### 6.1.2.4.3.2 Test procedure sequence {#test-procedure-sequence-20 .H6}
Table 6.1.2.4.3.2-1: Main Behaviour
+------------+------------+------------+---------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +============+============+============+=========+=========+====+ | | | U - S | Message | | | +------------+------------+------------+---------+---------+----+ | 1 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CT | | | | | | | session | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3.4.3-1 | | | | | | | to | | | | | | | establish | | | | | | | an | | | | | | | emergency | | | | | | | chat group | | | | | | | call? | | | | | +------------+------------+------------+---------+---------+----+ | 2-4 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 5 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | notify the | | | | | | | user that | | | | | | | the | | | | | | | emergency | | | | | | | chat group | | | | | | | call has | | | | | | | been | | | | | | | es | | | | | | | tablished? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 6 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 6A | Check: | - | - | 2, 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Tr | | | | | | | ansmission | | | | | | | No | | | | | | | tification | | | | | | | and | | | | | | | Request | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.3.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 6B-6E | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 6F | Check: | - | - | 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | provide | | | | | | | receive | | | | | | | media | | | | | | | success | | | | | | | no | | | | | | | tification | | | | | | | to the | | | | | | | user? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 6G | Check: | - | - | 4 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Reception | | | | | | | End | | | | | | | Request | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5. | | | | | | | 3B.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 6H-6I | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 7 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | release | | | | | | | the call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 8 | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CO | | | | | | | call | | | | | | | release\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 9 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 10 | Check: | - | - | 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CT | | | | | | | session | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3.4.3-1 | | | | | | | to | | | | | | | establish | | | | | | | an | | | | | | | imminent | | | | | | | peril chat | | | | | | | group | | | | | | | call? | | | | | +------------+------------+------------+---------+---------+----+ | 11-13 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 14 | Check: | - | - | 6 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | notify the | | | | | | | user that | | | | | | | the | | | | | | | imminent | | | | | | | peril chat | | | | | | | group call | | | | | | | has been | | | | | | | es | | | | | | | tablished? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 14A | Check: | - | - | 7 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Tr | | | | | | | ansmission | | | | | | | No | | | | | | | tification | | | | | | | and | | | | | | | Request | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.3.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 14B-14E | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 14F | Check: | - | - | 8 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | provide | | | | | | | receive | | | | | | | media | | | | | | | success | | | | | | | no | | | | | | | tification | | | | | | | to the | | | | | | | user? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 14G | Check: | - | - | 4, 9 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Reception | | | | | | | End | | | | | | | Request | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5. | | | | | | | 3B.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 14H-15 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 16 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | release | | | | | | | the call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 17 | Check: | - | - | 10 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CO | | | | | | | call | | | | | | | release\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 18 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | NOTE 1: | | | | | | | This is | | | | | | | expected | | | | | | | to be done | | | | | | | via a | | | | | | | suitable | | | | | | | impl | | | | | | | ementation | | | | | | | dependent | | | | | | | MMI. | | | | | | +------------+------------+------------+---------+---------+----+
##### 6.1.2.4.3.3 Specific message contents {#specific-message-contents-20
.H6}
Table 6.1.2.4.3.3-1: SIP INVITE from the SS (Step 1, Table 6.1.2.4.3.2-1;\
Step 2, TS 36.579-1 [2] Table 5.3.4.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.2-1, condition EMERGENCY-CALL
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP Message**  
MIME part body SDP Message as described in Table 6.1.2.4.3.3-1A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.1.2.4.3.3-2
Table 6.1.2.4.3.3-1A: SDP in SIP INVITE (Table 6.1.2.4.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition
INITIAL_SDP_OFFER
* * *
Table 6.1.2.4.3.3-2: MCVideo-Info in SIP INVITE (Table 6.1.2.4.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.2-2, condition EMERGENCY-CALL,
CHAT-GROUP-CALL
* * *
Table 6.1.2.4.3.3-3: SIP 200 (OK) from the UE (Steps 3, 10, Table
6.1.2.4.3.2-1;\ Step 4, TS 36.579-1 [2] Table 5.3.4.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.17.1.1-1, condition INVITE-RSP
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP Message**  
MIME part body SDP Message as described in Table 6.1.2.4.3.3-3A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.1.2.4.3.3-4
Table 6.1.2.4.3.3-3A: SDP in SIP 200 (OK) (Table 6.1.2.4.3.3-3)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.1-2, condition SDP_ANSWER
* * *
Table 6.1.2.4.3.3-4: MCVideo-Info in SIP 200 (OK) (Table 6.1.2.4.3.3-3)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition INVITE-RSP
* * *
Table 6.1.2.4.3.3-5: Void
Table 6.1.2.4.3.3-5A: Media Transmission Notification from the SS (Step 6A,
Table 6.1.2.4.3.2-1;\ Step 1, TS 36.579-1 [2] Table 5.3B.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.7-1, condition EMERGENCY-CALL
* * *
Table 6.1.2.4.3.3-5B..5C: Void
Table 6.1.2.4.3.3-5D: Media Reception End Request from the SS (Step 6G, Table
6.1.2.4.3.2-1;\ Step 1, TS 36.579-1 [2] Table 5.3B.10.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.3.3-1, condition DOWNLINK,
EMERGENCY-CALL
* * *
Table 6.1.2.4.3.3-6: SIP BYE from the UE (Steps 8, 17, Table 6.1.2.4.3.2-1;\
Step 1, TS 36.579-1 [2] Table 5.3.10.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.2.2.1-1, condition MT_CALL
* * *
Table 6.1.2.4.3.3-7: Void
Table 6.1.2.4.3.3-8: SIP INVITE from the SS (Step 10, Table 6.1.2.4.3.2-1;\
Step 2, TS 36.579-1 [2] Table 5.3.4.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.2-1, condition IMMPERIL-CALL
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP Message**  
MIME part body SDP Message as described in Table 6.1.2.4.3.3-8A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.1.2.4.3.3-9
Table 6.1.2.4.3.3-8A: SDP in SIP INVITE (Table 6.1.2.4.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition
INITIAL_SDP_OFFER
* * *
Table 6.1.2.4.3.3-9: MCVideo-Info in SIP INVITE (Table 6.1.2.4.3.3-8)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.2-2, condition IMMPERIL-CALL,
CHAT-GROUP-CALL
* * *
Table 6.1.2.4.3.3-10..12: Void
Table 6.1.2.4.3.3-13: Media Transmission Notification from the SS (Step 14A,
Table 6.1.2.4.3.2-1;\ Step 1, TS 36.579-1 [2] Table 5.3B.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.7-1, condition IMMPERIL-CALL
* * *
Table 6.1.2.4.3.3-14..15: Void
Table 6.1.2.4.3.3-16: Media Reception End Request from the SS (Step 14G, Table
6.1.2.4.3.2-1;\ Step 1, TS 36.579-1 [2] Table 5.3B.10.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.3.3-1, condition DOWNLINK,
IMMPERIL-CALL
* * *
6.1.2.5 On-network / Chat Group Call / Emergency Call / Imminent Peril Call /
Client Originated (CO)
##### 6.1.2.5.1 Test Purpose (TP) {#test-purpose-tp-21 .H6}
##### (1) {#section-106 .H6}
**with** { UE (MCVideo Client) registered and authorized for MCVideo Service }
ensure that {
**when** { the MCVideo User requests to establish a MCVideo Emergency Chat
Group Call with implicit Transmission Control}
**then** { the UE(MCVideo Client) sends a SIP INVITE message, **and** , upon
receipt of a Transmission Granted message from the SS MCVideo Server that the
call was established, notifies the user **and** respects Transmission Control
(Transmission Granted, Transmission Control ACK, Transmission End Request,
Transmission End Response) }
}
##### (2) {#section-107 .H6}
**with** { UE (MCVideo Client) having an ongoing MCVideo Emergency Chat Group
Call }
ensure that {
**when** { the MCVideo User requests to terminate the ongoing MCVideo
Emergency Chat Group Call }
**then** { the UE (MCVideo Client) sends a SIP BYE request and leaves the
MCVideo session}
}
##### (3) {#section-108 .H6}
**with** { UE (MCVideo Client) registered and authorized for MCVideo Service }
ensure that {
**when** { the UE(MCVideo Client) requests to establish a MCVideo Imminent
Peril Chat Group Call }
**then** { the UE(MCVideo Client) requests the establishment of a MCVideo
Imminent Peril Chat Group Call by sending a SIP INVITE message, **and** , upon
receipt of a Transmission Granted message from the SS (MCVideo Server) that
the call was established, notifies the user and respects Transmission Control
((Transmission Granted, Transmission Control ACK, Transmission End Request,
Transmission End Response) }
}
}
##### (4) {#section-109 .H6}
**with** { UE (MCVideo Client) having an ongoing MCVideo Imminent Peril Chat
Group Call }
ensure that {
**when** { the MCVideo User requests to terminate the ongoing MCVideo Imminent
Peril Chat Group Call }
**then** { UE (MCVideo Client) sends a SIP BYE request and leaves the MCVideo
session}
}
##### 6.1.2.5.2 Conformance requirements {#conformance-requirements-21 .H6}
References: The conformance requirements covered in the current TC are
specified in TS 24.281 clauses 9.2.2.2.1.1.1, 9.2.2.2.2.1, 6.2.4.1 and TS
24.581 clauses 6.2.4.2.2, 6.2.4.4.6, 6.2.4.5.3, 6.2.4.6.4, 6.2.4.8.26. The
following represents a copy/paste extraction of the requirements relevant to
the test purpose; any references within the copy/paste text should be
understood within the scope of the core spec they have been copied from.
Unless otherwise stated, these are Rel-14 requirements.
[TS 24.281, clause 9.2.2.2.1.1.1]
Upon receiving a request from an MCVideo user to establish an MCVideo group
session using an MCVideo group identity, identifying a chat MCVideo group, the
MCVideo client shall generate an initial SIP INVITE request by following the
UE originating session procedures specified in 3GPP TS 24.229 [11], with the
clarifications given below.
The MCVideo client:
> 1) if the MCVideo user has requested the origination of an MCVideo emergency
> group call or is originating an MCVideo chat group call and the MCVideo
> emergency state is already set, the MCVideo client shall comply with the
> procedures in subclause 6.2.8.1.1;
>
> 2) if the MCVideo user has requested the origination of an MCVideo imminent
> peril group call, the MCVideo client shall comply with the procedures in
> subclause 6.2.8.1.9;
>
> 3) shall include the g.3gpp.mcvideo media feature tag and the g.3gpp.icsi-
> ref media feature tag with the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" in the Contact header field of the SIP INVITE
> request according to IETF RFC 3840 [22];
>
> 4) shall include an Accept-Contact header field containing the
> g.3gpp.mcvideo media feature tag along with the \"require\" and \"explicit\"
> header field parameters according to IETF RFC 3841 [20];
>
> 5) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
> (coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
> field according to IETF RFC 6050 [14] in the SIP INVITE request;
>
> 6) shall include an Accept-Contact header field with the g.3gpp.icsi-ref
> media feature tag containing the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" along with the \"require\" and \"explicit\"
> header field parameters according to IETF RFC 3841 [20];
>
> 7) should include the \"timer\" option tag in the Supported header field;
>
> 8) should include the Session-Expires header field according to IETF RFC
> 4028 [23]. It is recommended that the refresher parameter is omitted. If
> included, the refresher parameter shall be set to \"uac\";
>
> 9) shall set the Request-URI of the SIP INVITE request to the public service
> identity identifying the participating MCVideo function serving the MCVideo
> user;
>
> NOTE 1: The MCVideo client is configured with public service identity
> identifying the participating MCVideo function serving the MCVideo user.
>
> 10) may include a P-Preferred-Identity header field in the SIP INVITE
> request containing a public user identity as specified in 3GPP TS 24.229
> [11];
>
> 11) if the MCVideo emergency state is already set or the MCVideo client
> emergency group state for this group is set to \"MVEG 2: in-progress\", the
> MCVideo client shall comply with the procedures in subclause 6.2.8.1.2;
>
> 12) if the MCVideo client imminent peril group state for this group is set
> to \"MIG 2: in-progress\" or \"MVIG 3: confirm-pending\" shall include the
> Resource-Priority header field and comply with the procedures in subclause
> 6.2.8.1.12;
>
> 13) shall contain an application/vnd.3gpp.mcvideo-info+xml MIME body with
> the \ element containing the \ element with:
>
> a) the \ element set to a value of \"chat\";
>
> b) the \ element set to the group identity; and
>
> c) the \ element set to the MCVideo client ID of the
> originating MCVideo client;
>
> NOTE 2: The MCVideo ID of the originating MCVideo user is not included in
> the body, as this will be inserted into the body of the SIP INVITE request
> that is sent by the originating participating MCVideo function.
>
> 14) shall include in the SIP INVITE request an SDP offer according to 3GPP
> TS 24.229 [11] with the clarifications specified in subclause 6.2.1; and
>
> 16) shall send the SIP INVITE request according to 3GPP TS 24.229 [11].
On receiving a SIP 2xx response to the SIP INVITE request, the MCVideo client:
> 1) shall interact with the user plane as specified in 3GPP TS 24.581 [5];
> and
>
> 2) if the MCVideo emergency group call state is set to \"MEGC 2: emergency-
> call-requested\" or \"MVEGC 3: emergency-call-granted\" or the MCVideo
> imminent peril group call state is set to \"MVIGC 2: imminent-peril-call-
> requested\" or \"MVIGC 3: imminent-peril-call-granted\", the MCVideo client
> shall perform the actions specified in subclause 6.2.8.1.4.
On receiving a SIP 4xx response, a SIP 5xx response or a SIP 6xx response to
the SIP INVITE request:
> 1) if the MCVideo emergency group call state is set to \"MVEGC 2: emergency-
> call-requested\" or \"MVEGC 3: emergency-call-granted\"; or
>
> 2) if the MCVideo imminent peril group call state is set to \"MVIGC 2:
> imminent-peril-call-requested\" or \"MVIGC 3: imminent-peril-call-granted\";
the MCVideo client shall perform the actions specified in subclause 6.2.8.1.5.
On receiving a SIP INFO request where the Request-URI contains an MCVideo
session ID identifying an ongoing group session, the MCVideo client shall
follow the actions specified in subclause 6.2.8.1.13.
[TS 24.281, clause 9.2.2.2.2.1]
When an MCVideo client wants to leave the MCVideo session that has been
established using on-demand session, the MCVideo client shall follow the
procedures as specified in clause 6.2.4.1.
[TS 24.281, clause 6.2.4.1]
Upon receiving a request from an MCVideo user to leave an MCVideo session
established using on-demand session signalling, the MCVideo client:
> 1) shall interact with the media plane as specified in 3GPP TS 24.581 [5];
>
> 2) shall generate a SIP BYE request according to 3GPP TS 24.229 [11];
>
> 3) shall set the Request-URI to the MCVideo session identity to leave; and
>
> 4) shall send a SIP BYE request towards MCVideo server according to 3GPP TS
> 24.229 [11].
Upon receiving a SIP 200 (OK) response to the SIP BYE request, the MCVideo
client shall interact with the media plane as specified in 3GPP TS 24.581 [5].
[TS 24.581, clause 6.2.4.2.2]
When a call is initiated as described in 3GPP TS 24.281 [2], the transmission
participant:
> 1\. shall create an instance of the \'Transmission participant state
> transition diagram for basic transmission control operation\';
>
> 2\. if the originating transmission participant receives a transmission
> control message before it receives the SIP 200 (OK) response, shall store
> the transmission control message;
>
> NOTE: The originating transmission participant might receive a transmission
> control message before the SIP 200 (OK) response when initiating, joining or
> rejoining a call because of processing delays of the SIP 200 (OK) response
> in the SIP core.
>
> 3\. if the established MCVideo call is a chat group call and the SIP INVITE
> request is not an implicit Transmission request, shall enter the \'U: has no
> permission to transmit\' state;
>
> 4\. if for the established MCVideo call the SIP INVITE request is an
> implicit Transmission request:
>
> a. shall start timer T100 (Transmission Request) and initialise counter C100
> (Transmission Request) to 1;
>
> b. shall enter the \'U: pending request to transmit\' state; and
>
> c. if the transmission participant has received and stored a transmission
> control message before the reception of the SIP 200 (OK) response, shall act
> as if the transmission control message was received in the \'U: pending
> request to transmit\' state after entering the \'U: pending request to
> transmit\' state; and
>
> 5\. if the established MCVideo call is a broadcast group call, shall enter
> the \'U: has permission to transmit\' state.
When the transmission participant is rejoining an ongoing MCVideo call as
described in 3GPP TS 24.281 [2] the transmission participant shall enter the
\'U: has no permission to transmit\' state.
[TS 24.581, clause 6.2.4.4.6]
Upon receiving a Transmission Granted message from the transmission control
server, the transmission participant:
> 1\. if the first bit in the subtype of the Transmission Granted message is
> set to \'1\' (Acknowledgment is required) as described in clause 9.2.2.1,
> shall send a Transmission control Ack message. The Transmission control Ack
> message:
>
> a. shall include the Message Type field set to \'0\' (Transmission Granted);
> and
>
> b. shall include the Source field set to \'0\' (the transmission participant
> is the source);
>
> 2\. shall store the SSRC of granted transmission participant received in the
> Transmission Granted message and use it in the RTP media packets until the
> transmission is relased;
>
> 3\. shall provide Transmission granted notification to the user, if not
> already done;
>
> 4\. shall stop timer T100 (Transmission Request); and
>
> 5\. shall enter the \'U: has permission to transmit\' state.
[TS 24.581, clause 6.2.4.5.3]
Upon receiving an indication from the user to end the permission to send RTP
media, the transmission participant:
> 1\. shall send a Transmission end request message towards the transmission
> control server. The Transmission end request message, if the session is a
> broadcast call and if the session was established as a normal call, shall
> include the Transmission Indicator with the A-bit set to \'1\' (Normal
> call);
>
> 2\. shall start timer T101 (Transmission End Request) and initialize counter
> C101 (Transmission End Request) to 1; and
>
> 3\. shall enter the \'U: pending end of transmission\' state.
[TS 24.581, clause 6.2.4.6.4]
Upon receiving a Transmission end response message, the transmission
participant:
> 1\. if the first bit in the subtype of the Transmission end response message
> to \'1\' (Acknowledgment is required) as described in clause 9.2.2.1, shall
> send a Transmission control Ack message. The Transmission control Ack
> message:
>
> a. shall include the Message Type field set to \'1\' (Transmission end
> response); and
>
> b. shall include the Source field set to \'0\' (the transmission participant
> is the source);
>
> 2\. may provide a Transmission end notification to the MCVideo user;
>
> 3\. if the Transmission Indicator field is included and the B-bit set to
> \'1\' (Broadcast group call), shall provide a notification to the user
> indicating the type of call;
>
> 4\. shall stop timer T101 (Transmission End Request);
>
> 5\. if the session is not a broadcast group call or if the A-bit in the
> Transmission Indicator field is set to \'1\' (Normal call), shall enter the
> \'U: has no permission to transmit\' state; and
>
> 6\. if the session was initiated as a broadcast group call:
>
> a. shall indicate to the MCVideo client the media transmission is completed;
> and
>
> b shall enter the \'Call releasing\' state.
[TS 24.581, clause 6.2.4.8.2]
Upon receiving an MCVideo call release step 2 request from the application and
signalling, the transmission participant:
> 1\. shall release all resources including any running timers associated with
> the MCVideo call; and
>
> 2\. shall enter the \'Start-stop\' state and terminate the current instance
> of the \'Transmission control state machine -- basic\'.
##### 6.1.2.5.3 Test description {#test-description-21 .H6}
##### 6.1.2.5.3.1 Pre-test conditions {#pre-test-conditions-21 .H6}
##### System Simulator: {#system-simulator-16 .H6}
\- SS (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
##### IUT: {#iut-15 .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
##### Preamble: {#preamble-16 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- UE States at the end of the preamble
\- The UE is in E-UTRA Registered, Idle Mode state.
\- The MCVideo Client Application has been activated and User has registered-
in as the MCVideo User with the Server as active user at the Client.
##### 6.1.2.5.3.2 Test procedure sequence {#test-procedure-sequence-21 .H6}
Table 6.1.2.5.3.2-1: Main Behaviour
+------------+------------+------------+---------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +============+============+============+=========+=========+====+ | | | U - S | Message | | | +------------+------------+------------+---------+---------+----+ | 1 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | the | | | | | | | est | | | | | | | ablishment | | | | | | | of an | | | | | | | emergency | | | | | | | chat group | | | | | | | call with | | | | | | | implicit | | | | | | | tr | | | | | | | ansmission | | | | | | | request. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 2 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | CO session | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3B.1.3-1 | | | | | | | to | | | | | | | establish | | | | | | | an | | | | | | | emergency | | | | | | | chat group | | | | | | | call with | | | | | | | implicit | | | | | | | tr | | | | | | | ansmission | | | | | | | control | | | | | | | according | | | | | | | to option | | | | | | | b,ii of | | | | | | | NOTE 1 in | | | | | | | TS | | | | | | | 36.579.1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.1.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 3-8 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 9 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | notify the | | | | | | | user that | | | | | | | the | | | | | | | emergency | | | | | | | chat group | | | | | | | call has | | | | | | | been | | | | | | | es | | | | | | | tablished? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 10 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | end of | | | | | | | tra | | | | | | | nsmission. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 11 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | tr | | | | | | | ansmission | | | | | | | End | | | | | | | Request | | | | | | | CO\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3B.7.3-1 | | | | | | | to end | | | | | | | tra | | | | | | | nsmission? | | | | | +------------+------------+------------+---------+---------+----+ | 12-13 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 14 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | release | | | | | | | the call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 15 | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CO | | | | | | | call | | | | | | | release\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 16 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 17 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | the | | | | | | | est | | | | | | | ablishment | | | | | | | of an | | | | | | | imminent | | | | | | | peril chat | | | | | | | group | | | | | | | call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 17A | Check: | - | - | 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | CO session | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3B.1.3-1 | | | | | | | to | | | | | | | establish | | | | | | | an | | | | | | | imminent | | | | | | | peril chat | | | | | | | group call | | | | | | | with | | | | | | | implicit | | | | | | | tr | | | | | | | ansmission | | | | | | | control | | | | | | | according | | | | | | | to option | | | | | | | b,ii of | | | | | | | NOTE 1 in | | | | | | | TS | | | | | | | 36.579.1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.1.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 18-22 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 23 | Check: | - | - | 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | notify the | | | | | | | user that | | | | | | | the | | | | | | | imminent | | | | | | | peril chat | | | | | | | group call | | | | | | | has been | | | | | | | es | | | | | | | tablished? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 24 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | end of | | | | | | | tra | | | | | | | nsmission. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 25 | Check: | - | - | 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | tr | | | | | | | ansmission | | | | | | | End | | | | | | | Request | | | | | | | CO\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3B.7.3-1 | | | | | | | to end | | | | | | | tra | | | | | | | nsmission? | | | | | +------------+------------+------------+---------+---------+----+ | 26-27 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 28 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | release | | | | | | | the call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 29 | Check: | - | - | 4 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CO | | | | | | | call | | | | | | | release\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 30 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | NOTE 1: | | | | | | | This is | | | | | | | expected | | | | | | | to be done | | | | | | | via a | | | | | | | suitable | | | | | | | impl | | | | | | | ementation | | | | | | | dependent | | | | | | | MMI. | | | | | | +------------+------------+------------+---------+---------+----+
##### 6.1.2.5.3.3 Specific message contents {#specific-message-contents-21
.H6}
Table 6.1.2.5.3.3-1: SIP INVITE from the UE (Step 2, Table 6.1.2.5.3.2-1;\
Step 2, TS 36.579-1 [2] Table 5.3B.1.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.1-1, condition EMERGENCY CALL
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP message**  
MIME-part-body SDP Message as described in Table 6.1.2.5.3.3-1A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.1.2.5.3.3-2
Table 6.1.2.5.3.3-1A: SDP message in SIP INVITE (Table 6.1.2.5.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.1-2, condition
INITIAL_SDP_OFFER, IMPLICIT_GRANT_REQUESTED
* * *
Table 6.1.2.5.3.3-2: MCVideo-Info in SIP INVITE (Table 6.1.2.5.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition EMERGENCY CALL,
CHAT-GROUP-CALL, INVITE_REFER
* * *
Table 6.1.2.5.3.3-3: SIP 200 (OK) from the SS (Steps 2, 17A, Table
6.1.2.5.3.2-1;\ Step 4, TS 36.579-1 [2] Table 5.3B.1.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.17.1.2-1, condition INVITE-RSP
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
SDP Message SDP Message as described in Table 6.1.2.5.3.3-3A
Table 6.1.2.5.3.3-3A: SDP message in SIP 200 (OK) (Table 6.1.2.5.3.3-3)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition SDP_ANSWER,
IMPLICIT_GRANT_REQUESTED
* * *
Table 6.1.2.5.3.3-4: Transmission Granted from the SS (Step 2, Table
6.1.2.5.3.2-1;\ Step 6a1, TS 36.579-1 [2] Table 5.3B.1.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.1-1, condition EMERGENCY-CALL
* * *
Table 6.1.2.5.3.3-4A: Transmission Idle from the SS (Step 11, Table
6.1.2.5.3.2-1;\ Step 4, TS 36.579-1 [2] Table 5.3B.7.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.16-1, condition EMERGENCY-
CALL
* * *
Table 6.1.2.5.3.3-5..6: Void
Table 6.1.2.5.3.3-7: SIP INVITE from the UE (Step 17A, Table 6.1.2.5.3.2-1;\
Step 2, TS 36.579-1 [2] Table 5.3B.1.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.1-1, condition IMMPERIL-CALL
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP message**  
MIME-part-body SDP Message as described in Table 6.1.2.5.3.3-7A  
**MIME body part** **MCVideo-Info**  
**MIME-part-body** MCVideo-Info as described in Table 6.1.2.5.3.3-8
Table 6.1.2.5.3.3-7A: SDP message in SIP INVITE (Table 6.1.2.5.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.1-2, condition
INITIAL_SDP_OFFER, IMPLICIT_GRANT_REQUESTED
* * *
Table 6.1.2.5.3.3-8: MCVideo-Info in SIP INVITE (Table 6.1.2.5.3.3-7)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition IMMPERIL-CALL,
CHAT-GROUP-CALL, INVITE_REFER
* * *
Table 6.1.2.5.3.3-9: Transmission Granted from the SS (Step 21, Table
6.1.2.5.3.2-1;\ Step 6a1, TS 36.579-1 [2] Table 5.3B.1.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.1-1, condition IMMPERIL-CALL,
* * *
Table 6.1.2.5.3.3-10: Transmission Idle from the SS (Step 25, Table
6.1.2.5.3.2-1;\ Step 4, TS 36.579-1 [2] Table 5.3B.7.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.16-1, condition IMMPERIL-CALL
* * *
6.1.3 Subscription to Conference Event Package
6.1.3.1 On-network / Conference Event Package / Subscription to Conference
Event Package / Termination of subscription
##### 6.1.3.1.1 Test Purpose (TP) {#test-purpose-tp-22 .H6}
1)
**with** { UE (MCVideo Client) registered and authorised for MCVideo Service }
ensure that {
**when** { the MCVideo User requests the establishment of an MCVideo On-demand
Pre-arranged Group Call }
**then** { UE (MCVideo Client) requests On-demand Pre-arranged Group Call by
sending a SIP INVITE message, **and** , after indication from the MCVideo
Server that the call was established and receiving a Transmission Granted
message, notifies the user }
}
##### (2) {#section-110 .H6}
**with** { UE (MCVideo Client) having an ongoing On-demand Pre-arranged Group
Call with Automatic Commencement Mode }
ensure that {
**when** { MCVideo User requests to subscribe to the conference event package
for the ongoing group call }
**then** { UE (MCVideo Client) sends a SIP SUBSCRIBE message with the Expires
header field set to 4294967295 **and** responds to a SIP NOTIFY message with a
SIP 200 (OK) message }
}
##### (3) {#section-111 .H6}
**with** { UE (MCVideo Client) having subscribed to the conference event
package for the ongoing group call }
ensure that {
**when** { MCVideo User requests to terminate the subscription }
**then** { UE (MCVideo Client) sends a SIP SUBSCRIBE message with the Expires
header field set to 0 }
}
##### (4) {#section-112 .H6}
**with** { UE (MCVideo Client) having an ongoing On-demand Pre-arranged Group
Call
**when** { the MCVideo User) requests to end the On-demand Pre-arranged Group
Call }
**then** { UE (MCVideo Client) sends a SIP BYE message and leaves the call }
}
##### 6.1.3.1.2 Conformance Requirements {#conformance-requirements-22 .H6}
References: The conformance requirements covered in the present TC are
specified in: TS 24.281 clause 9.2.1.2.1.1, 9.2.3.2, 9.2.1.2.3.1. Unless
otherwise stated these are Rel-15 requirements.
[TS 24.281, clause 9.2.1.2.1.1]
Upon receiving a request from an MCVideo user to establish an MCVideo
prearranged group session the MCVideo client shall generate an initial SIP
INVITE request by following the UE originating session procedures specified in
3GPP TS 24.229 [11], with the clarifications given below.
The MCVideo client:
> 1) if the MCVideo user has requested the origination of an MCVideo emergency
> group call or is originating an MCVideo prearranged group call and the
> MCVideo emergency state is already set, the MCVideo client shall comply with
> the procedures in clause 6.2.8.1.1;
>
> 2) if the MCVideo user has requested the origination of an MCVideo imminent
> peril group call, the MCVideo client shall comply with the procedures in
> clause 6.2.8.1.9;
>
> 3) if the MCVideo user has requested the origination of a broadcast group
> call, the MCVideo client shall comply with the procedures in clause 6.2.8.2;
>
> 4) shall include the g.3gpp.mcvideo media feature tag and the g.3gpp.icsi-
> ref media feature tag with the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" in the Contact header field of the SIP INVITE
> request according to IETF RFC 3840 [22];
>
> 5) shall include an Accept-Contact header field containing the
> g.3gpp.mcvideo media feature tag along with the \"require\" and \"explicit\"
> header field parameters according to IETF RFC 3841 [20];
>
> 6) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
> (coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
> field according to IETF RFC 6050 [14] in the SIP INVITE request;
>
> 7) shall include an Accept-Contact header field with the g.3gpp.icsi-ref
> media feature tag containing the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" along with the \"require\" and \"explicit\"
> header field parameters according to IETF RFC 3841 [20];
>
> 8) should include the \"timer\" option tag in the Supported header field;
>
> 9) should include the Session-Expires header field according to IETF RFC
> 4028 [23]. It is recommended that the \"refresher\" header field parameter
> is omitted. If included, the \"refresher\" header field parameter shall be
> set to \"uac\";
>
> 10) shall set the Request-URI of the SIP INVITE request to the public
> service identity identifying the participating MCVideo function serving the
> MCVideo user;
>
> NOTE 1: The MCVideo client is configured with public service identity
> identifying the participating MCVideo function serving the MCVideo user.
>
> 11) may include a P-Preferred-Identity header field in the SIP INVITE
> request containing a public user identity as specified in 3GPP TS 24.229
> [11];
>
> 12) if the MCVideo emergency state is already set or the MCVideo client
> emergency group state for this group is set to \"MVEG 2: in-progress\", the
> MCVideo client shall include the Resource-Priority header field and comply
> with the procedures in clause 6.2.8.1.2;
>
> 13) if the MCVideo client imminent peril group state for this group is set
> to \"MVIG 2: in-progress\" or \"MVIG 4: confirm-pending\" shall include the
> Resource-Priority header field and comply with the procedures in clause
> 6.2.8.1.12;
>
> 14) shall contain in an application/vnd.3gpp.mcvideo-info+xml MIME body with
> the \ element containing the \ element with:
>
> a) the \ element set to a value of \"prearranged\";
>
> b) the \ element set to the group identity;
>
> c) the \ element set to the MCVideo client ID of the
> originating MCVideo client; and
>
> NOTE 2: The MCVideo client does not include the MCVideo ID of the
> originating MCVideo user in the body, as this will be inserted into the body
> of the SIP INVITE request that is sent from the originating participating
> MCVideo function.
>
> d) if the group identity can be determined to be a TGI and if the MCVideo
> client can associate the TGI with a MCVideo group ID, the \ group-id> element set to the MCVideo group ID;
>
> NOTE 3: The text \"can associate the TGI with a MCVideo group ID\" means
> that the MCVideo client is able to determine that there is a constituent
> group of the temporary group that it is a member of.
>
> NOTE 4: The MCVideo client is informed about temporary groups and regouping
> of MCVideo groups that the user is a member of as specified in 3GPP TS
> 24.481 [24].
>
> NOTE 5: If the MCVideo user selected a TGI where there are several MCVideo
> groups where the MCVideo user is a member, the MCVideo client selects one of
> those MCVideo groups.
>
> 15) shall include an SDP offer according to 3GPP TS 24.229 [11] with the
> clarifications given in clause 6.2.1;
>
> 16) if an implicit transmission request is required, shall indicate this as
> specified in clause 6.4; and
>
> 17) shall send the SIP INVITE request towards the MCVideo server according
> to 3GPP TS 24.229 [11].
On receiving a SIP 2xx response to the SIP INVITE request, the MCVideo client:
> 1) shall interact with the user plane as specified in 3GPP TS 24.581 [5] ;
>
> 2) if the MCVideo emergency group call state is set to \"MVEGC 2: emergency-
> call-requested\" or \"MVEGC 3: emergency-call-granted\" or the MCVideo
> imminent peril group call state is set to \"MVIGC 2: imminent-peril-call-
> requested\" or \"MVIGC 3: imminent-peril-call-granted\", the MCVideo client
> shall perform the actions specified in clause 6.2.8.1.4; and
>
> 3) may subscribe to the conference event package as specified in clause
> 9.1.3.1.
On receiving a SIP 4xx response, a SIP 5xx response or a SIP 6xx response to
the SIP INVITE request:
> 1) if the MCVideo emergency group call state is set to \"MVEGC 2: emergency-
> call-requested\" or \"MVEGC 3: emergency-call-granted\"; or
>
> 2) if the MCVideo imminent peril group call state is set to \"MVIGC 2:
> imminent-peril-call-requested\" or \"MVIGC 3: imminent-peril-call-granted\";
the MCVideo client shall perform the actions specified in clause 6.2.8.1.5.
On receiving a SIP INFO request where the Request-URI contains an MCVideo
session ID identifying an ongoing group session, the MCVideo client shall
follow the actions specified in clause 6.2.8.1.13.
[TS 24.281, clause 9.2.3.2]
A MCVideo client may subscribe to the conference state event package when a
group call is ongoing and the ongoing group call is not initiated as a
broadcast group call by sending a SIP SUBSCRIBE request to obtain information
of the status of a group session.
When subscribing to the conference state event package, the MCVideo client:
> 1) shall generate a SIP SUBSCRIBE request and use a new SIP-dialog according
> to IETF RFC 6665 [16], IETF RFC 4575 [57] and 3GPP TS 24.229 [11];
>
> 2) shall set the Request-URI of the SIP SUBSCRIBE request to the MCVideo
> session identity of the group session;
>
> 3) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
> (coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
> field according to IETF RFC 6050 [14];
>
> 4) shall include an Accept-Contact header with the media feature tag
> g.3gpp.icsi-ref with the value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
> along with \"require\" and \"explicit\" header field parameters according to
> IETF RFC 3841 [20];
>
> 5) if the MCVideo client wants to receive the current status and later
> notification, shall set the Expires header field according to IETF RFC 6665
> [16], to 4294967295;
>
> NOTE 1: 4294967295, which is equal to 2^32^-1, is the highest value defined
> for Expires header field in IETF RFC 3261 [15].
>
> 6) if the MCVideo client wants to fetch the current state only, shall set
> the Expires header field according to IETF RFC 6665 [16], to zero;
>
> 7) shall include an Accept header field containing the
> application/conference-info+xml\"MIME type;
>
> 8) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body with the
> \ element set to the MCVideo group ID of the group
> session; and
>
> 9) shall send the SIP SUBSCRIBE request using a new SIP dialog according to
> 3GPP TS 24.229 [11].
The responses to the SIP SUBSCRIBE request shall be handled according to IETF
RFC 6665 [16], IETF RFC 4575 [57] and TS 24.229 [11].
Upon receiving a SIP NOTIFY requests to the previously sent SIP SUBSCRIBE
request the MCVideo client:
> 1) shall handle the request according to IETF RFC 6665 [16] and IETF RFC
> 4575 [57]; and
>
> 2) may display the current state information to the MCVideo client based on
> the information in the SIP NOTIFY request body.
When needed the MCVideo client shall terminate the subscription and indicate
it terminated according to IETF RFC 6665 [16].
> NOTE 2: The contents of the received SIP NOTIFY request body is specified in
> clause 6.3.3.4.
[TS 24.281, clause 9.2.1.2.3.1]
When an MCVideo client wants to leave the MCVideo session that has been
established using on-demand session, the MCVideo client shall follow the
procedures as specified in clause 6.2.4.1.
##### 6.1.3.1.3 Test description {#test-description-22 .H6}
##### 6.1.3.1.3.1 Pre-test conditions {#pre-test-conditions-22 .H6}
##### System Simulator: {#system-simulator-17 .H6}
\- SS (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
##### IUT: {#iut-16 .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
##### Preamble: {#preamble-17 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- UE States at the end of the preamble
\- The UE is in E-UTRA Registered, Idle Mode state.
\- The MCVideo Client Application has been activated and User has registered-
in as the MCVideo User with the Server as active user at the Client
##### 6.1.3.1.3.2 Test procedure sequence {#test-procedure-sequence-22 .H6}
Table 6.1.3.1.3.2-1: Main Behaviour
+-----------+-----------+-----------+-----------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +===========+===========+===========+===========+=========+====+ | | | U - S | Message | | | +-----------+-----------+-----------+-----------+---------+----+ | 1 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | the | | | | | | | esta | | | | | | | blishment | | | | | | | of a | | | | | | | group | | | | | | | call with | | | | | | | automatic | | | | | | | com | | | | | | | mencement | | | | | | | mode and | | | | | | | implicit | | | | | | | tra | | | | | | | nsmission | | | | | | | request. | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 2 | Check: | - | - | 1 | - | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | CO | | | | | | | session | | | | | | | establis | | | | | | | hment/mod | | | | | | | ification | | | | | | | without | | | | | | | pr | | | | | | | ovisional | | | | | | | responses | | | | | | | other | | | | | | | than 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.1.3-1 | | | | | | | to | | | | | | | establish | | | | | | | a group | | | | | | | call with | | | | | | | automatic | | | | | | | com | | | | | | | mencement | | | | | | | mode and | | | | | | | implicit | | | | | | | tra | | | | | | | nsmission | | | | | | | control | | | | | | | according | | | | | | | to option | | | | | | | b.i of | | | | | | | NOTE 1 in | | | | | | | TS | | | | | | | 36.579.1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5. | | | | | | | 3B.1.3-1? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 3 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | provide | | | | | | | tra | | | | | | | nsmission | | | | | | | granted | | | | | | | not | | | | | | | ification | | | | | | | to the | | | | | | | user? | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 4 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | subscribe | | | | | | | to the | | | | | | | c | | | | | | | onference | | | | | | | event | | | | | | | package | | | | | | | for the | | | | | | | ongoing | | | | | | | group | | | | | | | call to | | | | | | | receive | | | | | | | the | | | | | | | current | | | | | | | status | | | | | | | and later | | | | | | | notif | | | | | | | ications. | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 5-8 | Check: | - | - | 2 | - | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | steps 2-5 | | | | | | | of the | | | | | | | procedure | | | | | | | \'MCX | | | | | | | Sub | | | | | | | scription | | | | | | | and | | | | | | | Notif | | | | | | | ication\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3.29.3-1 | | | | | | | to | | | | | | | subscribe | | | | | | | to the | | | | | | | c | | | | | | | onference | | | | | | | event | | | | | | | package | | | | | | | for the | | | | | | | ongoing | | | | | | | group | | | | | | | call to | | | | | | | receive | | | | | | | the | | | | | | | current | | | | | | | status | | | | | | | and later | | | | | | | noti | | | | | | | fication? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 9 | The SS | \ | SIP 200 | 2 | P | | | Does the | | (OK) | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | send a | | | | | | | SIP 200 | | | | | | | (OK) in | | | | | | | response | | | | | | | to the | | | | | | | SIP | | | | | | | NOTIFY | | | | | | | message? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 11 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | de- | | | | | | | subscribe | | | | | | | from the | | | | | | | c | | | | | | | onference | | | | | | | event | | | | | | | package. | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 12 | Check: | --> | SIP | 3 | P | | | Does the | | SUBSCRIBE | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | send a | | | | | | | SIP | | | | | | | SUBSCRIBE | | | | | | | message | | | | | | | with the | | | | | | | Expires | | | | | | | header | | | | | | | field set | | | | | | | to 0? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 13 | The SS | \ with mcvideoURI
set to px_MCVideo_Group_A_ID The URI of the group TS 24.281 [26] clause
9.2.3.2  
NOTE 1: Encrypted element as described in TS 36.579-1 [2] Table 5.5.3.2.1-2A
Table 6.1.3.1.3.3-8: SIP 200 (OK) from the SS (Steps 6, 13, Table
6.1.3.1.3.2-1;\ Step 3, TS 36.579-1 [2] Table 5.3.29.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.17.1.2-1, condition SUBSCRIBE-
RSP
* * *
Information Element Value/remark Comment Reference Condition **Contact**  
addr-spec  
user-info and host \"sip:\" & \"conference-event-package\@cf.\" &
px_MCX_DomainName_Organization_A  
port not present
Table 6.1.3.1.3.3-9: SIP NOTIFY from the SS (step 7, Table 6.1.3.1.3.2-1;\
Step 4, TS 36.579-1 [2] Table 5.3.29.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.8-1
* * *
Information Element Value/remark Comment Reference Condition **P-Asserted-
Identity**  
addr-spec  
user-info and host tsc_MCVideo_PublicServiceId_A TS 24.281 [26] clause 6.3.3.4  
**Event**  
event-type \"conference\" TS 24.281 [26] clause 6.3.3.4  
**Expires**  
value \"3600\" 3600 seconds TS 24.281 [26] clause 6.3.3.4  
**Subscription-State**  
expires \"3600\"  
**P-Preferred-Service**  
Service-ID \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" TS 24.281 [26] clause
6.3.3.4  
**Message-body**  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.1.3.1.3.3-10  
MIME body part **Conference-Info**  
MIME-part-body Conference-Info as described in Table 6.1.3.1.3.3-11
Table 6.1.3.1.3.3-10: MCVideo-Info in SIP NOTIFY (Table 6.1.3.1.3.3-9)
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.2-2
* * *
Information Element Value/remark Comment Reference Condition mcvideoinfo  
mcvideo-Params  
mcvideo-calling-user-id not present  
mcvideo-calling-group-id Encrypted (NOTE 1) \ with
mcvideoURI set to px_MCVideo_Group_A_ID  
NOTE 1: Encrypted element as described in TS 36.579-1 [2] Table 5.5.3.2.2-2A
Table 6.1.3.1.3.3-11: Conference-Info in SIP NOTIFY (Table 6.1.3.1.3.3-9)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.15-1
* * *
Table 6.1.3.1.3.3-12: SIP NOTIFY from the SS (step 9, Table 6.1.3.1.3.2-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.8-1
* * *
Information Element Value/remark Comment Reference Condition **P-Asserted-
Identity**  
addr-spec  
user-info and host tsc_MCVideo_PublicServiceId_A TS 24.281 [26] clause 6.3.3.4  
**Event**  
event-type \"conference\" TS 24.281 [26] clause 6.3.3.4  
**Expires**  
value \"3600\" 3600 seconds TS 24.281 [26] clause 6.3.3.4  
**P-Preferred-Service**  
Service-ID \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" TS 24.281 [26] clause
6.3.3.4  
**Message-body**  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.1.3.1.3.3-10  
MIME body part **Conference-Info**  
MIME-part-body Conference-Info as described in Table 6.1.3.1.3.3-13
Table 6.1.3.1.3.3-13: Conference-Info in SIP NOTIFY (Table 6.1.3.1.3.3-12)
Derivation Path: TS 36.579-1 [2], Table 5.5.3.15-1
* * *
Information Element Value/remark Comment Reference Condition conference-info  
users  
**user [3]**  
endpoint  
status disconnected
Table 6.1.3.1.3.3-14: SIP SUBSCRIBE from the UE (step 12, Table 6.1.3.1.3.2-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.14-1, condition re_SUBSCRIBE
* * *
Information Element Value/remark Comment Reference Condition **Accept-
Contact**  
ac-value  
feature-param \"+g.3gpp.icsi-ref=urn:urn-7:3gpp-service.ims.icsi.mcvideo\" TS
24.379 [9] clause 10.1.3.2  
req-param \"require\" TS 24.379 [9] clause 10.1.3.2  
explicit-param \"explicit\" TS 24.379 [9] clause 10.1.3.2  
**Expires**  
value \"0\" TS 24.379 [9] clause 10.1.3.2  
**Accept**  
media-range \"application/conference-info+xml \" TS 24.379 [9] clause 10.1.3.2  
**Message-body**  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.1.3.1.3.3-7
Table 6.1.3.1.3.3-15: Void
6.1.4 Remote change of selected group
6.1.4.1 On-network / Remote Change of Selected Group / Selected Group Change
of Targeted User / Client Originated (CO)
##### 6.1.4.1.1 Test Purpose (TP) {#test-purpose-tp-23 .H6}
##### (1) {#section-113 .H6}
**with** { UE (MCVideo Client) registered and authorised for MCVIDEO Service }
ensure that {
**when** { the MCVideo User requests to send a group selection change request
to change the selected group of a targeted MCVIDEO user to a specific MCVideo
group }
**then** { UE (MCVideo Client) sends a SIP MESSAGE message **and** responds to
a SIP MESSAGE message with a SIP 200 (OK) message }
}
##### 6.1.4.1.2 Conformance Requirements {#conformance-requirements-23 .H6}
References: The conformance requirements covered in the present TC are
specified in: TS 24.281 clause 9.2.4.2.1. Unless otherwise stated these are
Rel-15 requirements.
[TS 24.281, clause 9.2.4.2.1]
Upon receiving a request from the MCVideo user to send a group selection
change request to change the selected group of a targeted MCVideo user to a
specific MCVideo group, the MCVideo client:
> 1) if:
>
> a) the \ element does not exist in the MCVideo
> user profile document with one or more \ elements (see the MCVideo
> user profile document in 3GPP TS 24.484 [25]); or
>
> b) the \ element exists in the MCVideo user
> profile document and the MCVideo ID of the targeted MCVideo user does not
> match with one of the \ elements of the
> \ element of the MCVideo user profile document
> (see the MCVideo user profile document in 3GPP TS 24.484 [25]);
>
> then:
>
> a) should indicate to the requesting MCVideo user that they are not
> authorised to change the selected MCVideo group of the targeted MCVideo
> user; and
>
> b) shall skip the rest of the steps of the present clause;
>
> 2) shall generate a SIP MESSAGE request in accordance with 3GPP TS 24.229
> [11] and IETF RFC 3428 [17] with the following clarifications:
>
> a) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
> (coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
> field according to IETF RFC 6050 [14] in the SIP MESSAGE request;
>
> b) shall include an Accept-Contact header field with the g.3gpp.icsi-ref
> media feature tag containing the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" along with the \"require\" and \"explicit\"
> header field parameters according to IETF RFC 3841 [20];
>
> c) may include a P-Preferred-Identity header field in the SIP MESSAGE
> request containing a public user identity as specified in 3GPP TS 24.229
> [11]; and
>
> d) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body as
> specified in clause F.1 with the \ element containing the
> \ element containing:
>
> i) the \ set to the MCVideo group identity to be
> selected by the targeted MCVideo user; and
>
> ii) an \ element containing the \ element set to a
> value of \"group-selection-change-request\"; and
>
> e) shall insert in the SIP MESSAGE request a MIME resource-lists body with
> the MCVideo ID of the targeted MCVideo user, according to rules and
> procedures of IETF RFC 5366 [37];
>
> 3) shall set the Request-URI to the public service identity identifying the
> participating MCVideo function serving the MCVideo user; and
>
> 4) shall send the SIP MESSAGE request according to rules and procedures of
> 3GPP TS 24.229 [11].
Upon receipt of a SIP 4xx, 5xx or 6xx response to the SIP MESSAGE request,
should indicate to the MCVideo user the failure of the sent group selection
change request and not continue with the rest of the steps.
Upon receiving a \"SIP MESSAGE request for group selection change response for
terminating client\", the MCVideo client:
> 1) shall determine the success or failure of the sent group selection change
> request from the value of the \ element
> contained in the \ element of the \ element of the
> \ element of the application/vnd.3gpp.mcvideo-info+xml MIME
> body included in the received SIP MESSAGE request; and
>
> 2) should indicate to the MCVideo user the success or failure of the sent
> group selection change request.
##### 6.1.4.1.3 Test description {#test-description-23 .H6}
##### 6.1.4.1.3.1 Pre-test conditions {#pre-test-conditions-23 .H6}
Same pre-test conditions as for MCPTT test case 6.1.4.1 (TS 36.579-2 [24])
with the following exception(s):
\- The term \"MCPTT\" is replaced with \"MCVideo\"
##### 6.1.4.1.3.2 Test procedure sequence {#test-procedure-sequence-23 .H6}
Same test procedure sequence as for MCPTT test case 6.1.4.1 (TS 36.579-2 [24])
with the following exception(s):
\- The term \"MCPTT\" is replaced with \"MCVideo\"
##### 6.1.4.1.3.3 Specific message contents {#specific-message-contents-23
.H6}
Same specific message contents as for MCPTT test case 6.1.4.1 (TS 36.579-2
[24]) with the following exception(s):
\- The term \"MCPTT\" is replaced with \"MCVideo\"
\- Condition MCVIDEO is used for all messages.
6.1.4.2 On-network / Remote Change of Selected Group / Selected Group Change
of Targeted User / Client Terminated (CT)
##### 6.1.4.2.1 Test Purpose (TP) {#test-purpose-tp-24 .H6}
##### (1) {#section-114 .H6}
**with** { UE (MCVideo Client) registered and authorised for MCVideo Service }
ensure that {
**when** { MCVideo User requests group to discover which groups the MCVideo
User is affiliated to and to subscribe to affiliation status changes for the
MCVideo User }
**then** { UE (MCVideo Client) sends a SIP SUBSCRIBE message **and** responds
to a SIP NOTIFY message with a SIP 200 (OK) message }
}
##### (2) {#section-115 .H6}
**with** { UE (MCVideo Client) having subscribed to affiliation status changes
}
ensure that {
**when** { MCVideo User requests to de-affiliate from a group }
**then** { UE (MCVideo Client) sends a SIP PUBLISH message **and** responds to
a SIP NOTIFY message with a SIP 200 (OK) message }
}
##### (3) {#section-116 .H6}
**with** { UE (MCVideo Client) having subscribed to affiliation status changes
}
ensure that {
**when** { UE (MCVideo Client) receives to send a group selection change
request to change the selected group of a targeted MCVideo user to a specific
MCVideo group via a SIP MESSAGE message }
**then** { UE (MCVideo Client) responds with a SIP 200 (OK) message **and**
initiates affiliation to the group by sending a SIP PUBLISH message **and**
responds to a SIP NOTIFY message with a SIP 200 (OK) message }
}
##### (4) {#section-117 .H6}
**with** { UE (MCVideo Client) having received a SIP MESSAGE message
indicating a group selection change request }
ensure that {
**when** { UE (MCVideo Client) determines that the group selection change is
successful }
**then** { UE (MCVideo Client) sends the group selection determination via a
SIP MESSAGE message }
}
##### 6.1.4.2.2 Conformance Requirements {#conformance-requirements-24 .H6}
References: The conformance requirements covered in the present TC are
specified in: TS 24.281 clause 8.2.1.2, 8.2.1.3, 9.2.4.2.2. Unless otherwise
stated these are Rel-15 requirements.
[TS 24.281, clause 8.2.1.2]
In order:
> \- to indicate that an MCVideo user is interested in one or more MCVideo
> group(s) at an MCVideo client;
>
> \- to indicate that the MCVideo user is no longer interested in one or more
> MCVideo group(s) at the MCVideo client;
>
> \- to refresh indication of an MCVideo user interest in one or more MCVideo
> group(s) at an MCVideo client due to near expiration of the expiration time
> of an MCVideo group with the affiliation status set to the \"affiliated\"
> state received in a SIP NOTIFY request in clause 8.2.1.3;
>
> \- to send an affiliation status change request in mandatory mode to another
> MCVideo user; or
>
> \- any combination of the above;
the MCVideo client shall generate a SIP PUBLISH request according to 3GPP TS
24.229 [11], IETF RFC 3903 [12], and IETF RFC 3856 [13].
In the SIP PUBLISH request, the MCVideo client:
> 1) shall set the Request-URI to the public service identity identifying the
> originating participating MCVideo function serving the MCVideo user;
>
> 2) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body. In the
> application/vnd.3gpp.mcvideo-info+xml MIME body, the MCVideo client shall
> include the \ element set to the MCVideo ID of the
> MCVideo user;
>
> 3) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
> (coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
> field according to IETF RFC 6050 [14];
>
> 4) if the targeted MCVideo user is interested in at least one MCVideo group
> at the targeted MCVideo client, shall set the Expires header field according
> to IETF RFC 3903 [12], to 4294967295;
>
> NOTE 1: 4294967295, which is equal to 2^32^-1, is the highest value defined
> for Expires header field in IETF RFC 3261 [15].
>
> 5) if the targeted MCVideo user is no longer interested in any MCVideo group
> at the targeted MCVideo client, shall set the Expires header field according
> to IETF RFC 3903 [12], to zero; and
>
> 6) shall include an application/pidf+xml MIME body indicating per-user
> affiliation information according to clause 8.3.1. In the MIME body, the
> MCVideo client:
>
> a) shall include all MCVideo groups where the targeted MCVideo user
> indicates its interest at the targeted MCVideo client;
>
> b) shall include the MCVideo client ID of the targeted MCVideo client;
>
> c) shall not include the \"status\" attribute and the \"expires\" attribute
> in the \ element; and
>
> d) shall set the \ child element of the \ root element to a
> globally unique value.
The MCVideo client shall send the SIP PUBLISH request according to 3GPP TS
24.229 [11].
[TS 24.281, clause 8.2.1.3]
> NOTE 1: The MCVideo UE also uses this procedure to determine which MCVideo
> groups the MCVideo user successfully affiliated to.
In order to discover MCVideo groups:
> 1) which the MCVideo user at an MCVideo client is affiliated to; or
>
> 2) which another MCVideo user is affiliated to;
the MCVideo client shall generate an initial SIP SUBSCRIBE request according
to 3GPP TS 24.229 [11], IETF RFC 3856 [13], and IETF RFC 6665 [16].
In the SIP SUBSCRIBE request, the MCVideo client:
> 1) shall set the Request-URI to the public service identity identifying the
> originating participating MCVideo function serving the MCVideo user;
>
> 2) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body. In the
> application/vnd.3gpp.mcvideo-info+xml MIME body, the MCVideo client shall
> include the \ element set to the MCVideo ID of the
> targeted MCVideo user;
>
> 3) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
> (coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
> field according to IETF RFC 6050 [14];
>
> 4) if the MCVideo client wants to receive the current status and later
> notification, shall set the Expires header field according to IETF RFC 6665
> [16], to 4294967295;
>
> NOTE 2: 4294967295, which is equal to 2^32^-1, is the highest value defined
> for Expires header field in IETF RFC 3261 [15].
>
> 5) if the MCVideo client wants to fetch the current state only, shall set
> the Expires header field according to IETF RFC 6665 [16], to zero; and
>
> 6) shall include an Accept header field containing the application/pidf+xml
> MIME type; and
>
> 7) if requesting MCVideo groups where the MCVideo user is affiliated to at
> the MCVideo client, shall include an application/simple-filter+xml MIME body
> indicating per client restrictions of presence event package notification
> information according to clause 8.3.2.
In order to re-subscribe or de-subscribe, the MCVideo client shall generate an
in-dialog SIP SUBSCRIBE request according to 3GPP TS 24.229 [11], IETF RFC
3856 [13], and IETF RFC 6665 [16]. In the SIP SUBSCRIBE request, the MCVideo
client:
> 1) if the MCVideo client wants to receive the current status and later
> notification, shall set the Expires header field according to IETF RFC 6665
> [16], to 4294967295;
>
> NOTE 3: 4294967295, which is equal to 2^32^-1, is the highest value defined
> for Expires header field in IETF RFC 3261 [15].
>
> 2) if the MCVideo client wants to de-subscribe, shall set the Expires header
> field according to IETF RFC 6665 [16], to zero; and
>
> 3) shall include an Accept header field containing the application/pidf+xml
> MIME type.
Upon receiving a SIP NOTIFY request according to 3GPP TS 24.229 [11], IETF RFC
3856 [13], and IETF RFC 6665 [16], if SIP NOTIFY request contains an
application/pidf+xml MIME body indicating per-user affiliation information
constructed according to clause 8.3.1, then the MCVideo client shall determine
affiliation status of the MCVideo user for each MCVideo group at the MCVideo
client(s) in the MIME body. If the \ child element of the \
root element of the application/pidf+xml MIME body of the SIP NOTIFY request
is included, the \ element value indicates the SIP PUBLISH request which
triggered sending of the SIP NOTIFY request.
[TS 24.281, clause 9.2.4.2.2]
Upon receiving a \"SIP MESSAGE request for group selection change request for
terminating client\", the MCVideo client:
> 1) if the received SIP MESSAGE request contains an
> application/vnd.3gpp.mcvideo-info+xml MIME body containing an \ required> element set to a value of \"true\":
>
> a) shall invoke the procedures of clause 8.2.1.2 to affiliate to the MCVideo
> group identified by the contents of the \ included
> in the application/vnd.3gpp.mcvideo-info+xml MIME body;
>
> b) if the MCVideo client has not already invoked the procedures of clause
> 8.2.1.3, shall invoke the procedures of clause 8.2.1.3; and
>
> c) upon receiving a SIP NOTIFY request including a \ element set to a
> value matching the \ value included in the SIP PUBLISH request sent in
> step 1) a) above as specified in clause 8.2.1.3, shall determine if the
> affiliation procedure to the MCVideo group identified by the contents of the
> \ in the received SIP MESSAGE request was
> successful;
>
> 2) if the received SIP MESSAGE request contained an
> application/vnd.3gpp.mcvideo-info+xml MIME body containing an \ required> element set to a value of \"true\" and the affiliation was
> successful as determined in step 1) c) above, or if the \ required> element was not present in the received SIP MESSAGE request:
>
> a) shall change the MCVideo client\'s selected group to the MCVideo group
> identified by the contents of the \ element
> contained in the application/vnd.3gpp.mcvideo-info+xml MIME body included in
> the received SIP MESSAGE request; and
>
> b) shall determine the success or failure of the change of selected group
> action;
>
> 3) shall generate a SIP MESSAGE request in accordance with 3GPP TS 24.229
> [11] and IETF RFC 3428 [17] with the following clarifications:
>
> a) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
> (coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
> field according to IETF RFC 6050 [14] in the SIP MESSAGE request;
>
> b) shall include an Accept-Contact header field with the g.3gpp.icsi-ref
> media feature tag containing the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" along with the \"require\" and \"explicit\"
> header field parameters according to IETF RFC 3841 [20];
>
> c) may include a P-Preferred-Identity header field in the SIP MESSAGE
> request containing a public user identity as specified in 3GPP TS 24.229
> [11];
>
> d) shall include in an application/resource-lists+xml MIME body, the MCVideo
> ID contained in the \ element in the application/
> vnd.3gpp.mcvideo-info+xml MIME body of the received SIP MESSAGE request; and
>
> e) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body as
> specified in clause F.1 with the \ element containing the
> \ element containing:
>
> i) the \ set to the MCVideo group identity identified
> by the contents of the \ element contained in the
> received SIP MESSAGE request; and
>
> ii) an \ element containing:
>
> A) the \ element set to a value of \"group-selection-change-
> response\";
>
> B) if the MCVideo client was able to successfully change the selected group
> as determined in step 2) b) above, a \
> element set to a value of \"success\"; and
>
> C) if the MCVideo client:
>
> I) was required to affiliate to the MCVideo group identified by the contents
> of the \ in the received SIP MESSAGE request and
> the affiliation failed as determined in step 1) c); or
>
> II) failed to change the selected group as determined in step 2) b);
>
> then a \ element set to a value of \"fail\";
>
> 4) should indicate to the MCVideo user the success or failure of the
> requested change of selected group action;
>
> 5) shall set the Request-URI to the public service identity identifying the
> participating MCVideo function serving the MCVideo user; and
>
> 6) shall send the SIP MESSAGE request according to rules and procedures of
> 3GPP TS 24.229 [11].
##### 6.1.4.2.3 Test description {#test-description-24 .H6}
##### 6.1.4.2.3.1 Pre-test conditions {#pre-test-conditions-24 .H6}
Same pre-test conditions as for MCPTT test case 6.1.4.2 (TS 36.579-2 [24])
with the following exception(s):
\- The term \"MCPTT\" is replaced with \"MCVideo\"
##### 6.1.4.2.3.2 Test procedure sequence {#test-procedure-sequence-24 .H6}
Same test procedure sequence as for MCPTT test case 6.1.4.2 (TS 36.579-2 [24])
with the following exception(s):
\- The term \"MCPTT\" is replaced with \"MCVideo\"
##### 6.1.4.2.3.3 Specific message contents {#specific-message-contents-24
.H6}
Same specific message contents as for MCPTT test case 6.1.4.2 (TS 36.579-2
[24]) with the following exception(s):
\- The term \"MCPTT\" is replaced with \"MCVideo\"
\- Condition MCVIDEO is used for all messages.
## 6.2 Private Calls
6.2.1 On-network / Private Call / On-demand / Automatic Commencement Mode /
With Transmission Control / Upgrade to Emergency Call / Cancellation of
Emergency on User Request / Client Originated (CO)
##### 6.2.1.1 Test Purpose (TP) {#test-purpose-tp-25 .H6}
##### (1) {#section-118 .H6}
**with** { the UE (MCVideo Client) registered and authorised for MCVideo
Service, including authorised to initiate/cancel Private and Private Emergency
Calls with Automatic Commencement }
ensure that {
**when** { the MCVideo User requests the establishment of a MCVideo Private
Call, On-demand Automatic Commencement Mode, no force of Automatic
Commencement, applying end-to-end communication security with Transmission
Control }
**then** { UE (MCVideo Client) sends a SIP INVITE message requesting Private
Call On-demand Automatic Commencement Mode, applying end-to-end communication
security, and offering a media-level section for a media-transmission control
entity, **and** , after indication from the SS (MCVideo Server) that
Transmission is granted, the UE (MCVideo Client) provides transmission granted
notification to the user, sends an acknowledgement to the SS (MCVideo Server)
}
}
##### (2) {#section-119 .H6}
**with** { UE (MCVideo Client) having established a MCVideo Private Call, On-
demand Automatic Commencement Mode with Transmission Control }
ensure that {
**when** { the MCVideo User engages in communication with the invited MCVideo
User }
**then** { UE (MCVideo Client) respects the Transmission Control imposed by
the MCVideo Server (Transmission Granted, Transmission Control ACK,
Transmission End Request, Transmission End Response, Transmission Idle) }
}
##### (3) {#section-120 .H6}
**with** { UE (MCVideo Client) having established a MCVideo Private Call, On-
demand Automatic Commencement Mode with Transmission Control }
ensure that {
**when** { the MCVideo User requests to upgrade the ongoing MCVideo Private
Call to a MCVideo Emergency Private Call with Transmission Control }
**then** { UE (MCVideo Client) sends a SIP re-INVITE message requesting
Private Emergency Call On-demand Automatic Commencement Mode offering a media-
level section for a media-transmission control entity **and** , upon receipt
of a SIP 200 (OK) response, considers the call as being upgraded to an
Emergency Private Call }
}
##### (4) {#section-121 .H6}
**with** { UE (MCVideo Client) having upgraded a MCVideo Private Call, On-
demand Automatic Commencement Mode with Transmission Control to Emergency
Private Call with Transmission Control }
ensure that {
**when** { the MCVideo User engages in communication with the invited MCVideo
User }
**then** { UE (MCVideo Client) respects the Transmission Control imposed by
the SS (MCVideo Server) including override of the invited MCVideo User (who is
not in MCVideo emergency state) and applying Transmission Control
confidentiality and integrity protection }
}
##### (5) {#section-122 .H6}
**with** { UE (MCVideo Client) having upgraded a MCVideo Private Call, On-
demand Automatic Commencement Mode with Transmission Control to Emergency
Private Call with Transmission Control }
ensure that {
**when** { the MCVideo User requests to downgrade the ongoing MCVideo
Emergency Private Call }
**then** { UE (MCVideo Client) sends a SIP re-INVITE request }
**and** , upon receipt of a SIP 200 (OK) response, considers the emergency
condition ended and the call being reverted back to MCVideo Private Call }
}
##### (6) {#section-123 .H6}
**with** { UE (MCVideo Client) having an ongoing MCVideo Private Call, On-
demand Automatic Commencement Mode with Transmission Control }
ensure that {
**when** { the MCVideo User requests to terminate the ongoing MCVideo Private
Call }
**then** { UE (MCVideo Client) sends a SIP BYE request and after receiving a
SIP 200 (OK) leaves the MCVideo session }
}
##### 6.2.1.2 Conformance requirements {#conformance-requirements-25 .H6}
References: The conformance requirements covered in the present TC are
specified in: TS 24.281, clauses 10.2.2.2.1, 10.2.2.2.4, 10.2.2.2.5, and in
TS24.581, clauses 6.2.5.5.3, 6.2.5.5.3a.. The following represents a
copy/paste extraction of the requirements relevant to the test purpose; any
references within the copy/paste text should be understood within the scope of
the core spec they have been copied from. Unless otherwise stated these are
Rel-14 requirements.
[TS 24.281, clause 10.2.2.2.1]
Upon receiving a request from an MCVideo user to establish an MCVideo private
call the MCVideo client shall generate an initial SIP INVITE request by
following the UE originating session procedures specified in 3GPP TS 24.229
[11], with the clarifications given below.
The MCVideo client:
> 1) shall set the Request-URI of the SIP INVITE request to a public service
> identity of the participating MCVideo function serving the MCVideo user;
>
> 2) may include a P-Preferred-Identity header field in the SIP INVITE request
> containing a public user identity as specified in 3GPP TS 24.229 [11];
>
> 3) shall include the g.3gpp.mcvideo media feature tag and the g.3gpp.icsi-
> ref media feature tag with the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" in the Contact header field of the SIP INVITE
> request according to IETF RFC 3840 [22];
>
> 4) shall include an Accept-Contact header field containing the
> g.3gpp.mcvideo media feature tag along with the \"require\" and \"explicit\"
> header field parameters according to IETF RFC 3841 [20];
>
> 5) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
> (coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
> field according to IETF RFC 6050 [14] in the SIP INVITE request;
>
> 6) shall include an Accept-Contact header field with the media feature tag
> g.3gpp.icsi-ref contain with the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" along with parameters \"require\" and
> \"explicit\" according to IETF RFC 3841 [20];
>
> 7) for the establishment of a private call shall insert in the SIP INVITE
> request a MIME resource-lists body with the MCVideo ID of the invited
> MCVideo user, according to rules and procedures of IETF RFC 5366 [37];
>
> 8) if an end-to-end security context needs to be established and if the
> MCVideo user is initiating a private call then:
>
> a) if necessary, shall instruct the key management client to request keying
> material from the key management server as described in 3GPP TS 33.180 [8];
>
> b) shall use the keying material to generate a PCK as described in 3GPP TS
> 33.180 [8];
>
> c) shall use the PCK to generate a PCK-ID with the four most significant
> bits set to \"0001\" to indicate that the purpose of the PCK is to protect
> private call communications and with the remaining twenty-eight bits being
> randomly generated as described in 3GPP TS 33.180 [8];
>
> d) shall encrypt the PCK to a UID associated to the MCVideo client using the
> MCVideo ID and KMS URI of the invited user as determined by the procedures
> of subclause 6.2.8.3.9 and a time related parameter as described in 3GPP TS
> 33.180 [8];
>
> e) shall generate a MIKEY-SAKKE I_MESSAGE using the encapsulated PCK and
> PCK-ID as specified in 3GPP TS 33.180 [8]; and
>
> g) shall add the MCVideo ID of the originating MCVideo to the initiator
> field (IDRi) of the I_MESSAGE as described in 3GPP TS 33.180 [8]; and
>
> f) shall sign the MIKEY-SAKKE I_MESSAGE using the originating MCVideo
> user\'s signing key provided in the keying material together with a time
> related parameter, and add this to the MIKEY-SAKKE payload, as described in
> 3GPP TS 33.180 [8].
>
> 9) shall include an SDP offer according to 3GPP TS 24.229 [11] with the
> clarification given in subclause 6.2.1 and with a media stream of the
> offered media-transmission control entity;
>
> 10) if implicit transmission control is required, shall comply with the
> conditions specified in subclause 6.4;
>
> 11) if the MCVideo user is initiating a private call then:
>
> a) if force of automatic commencement mode at the invited MCVideo client is
> requested by the MCVideo user, shall include in the SIP INVITE request a
> Priv-Answer-Mode header field with the value \"Auto\" according to the rules
> and procedures of IETF RFC 5373 [27];
>
> b) if force of automatic commencement mode at the invited MCVideo client is
> not requested by the MCVideo user and:
>
> i) if automatic commencement mode at the invited MCVideo client is requested
> by the MCVideo user, shall include in the SIP INVITE request an Answer-Mode
> header field with the value \"Auto\" according to the rules and procedures
> of IETF RFC 5373 [27]; and
>
> ii) if manual commencement mode at the invited MCVideo client is requested
> by the MCVideo user, shall include in the SIP INVITE request an Answer-Mode
> header field with the value \"Manual\" according to the rules and procedures
> of IETF RFC 5373 [27]; and
>
> c) shall contain an application/vnd.3gpp.mcvideo-info+xml MIME body with the
> \ element containing the \ element with the
> \ element set to a value of \"private\";
>
> 12) if the MCVideo emergency private call state is set to either \"MVEPC 2:
> emergency-pc-requested\" or \"MVEPC 3: emergency-pc-granted\" or the MCVideo
> emergency private priority state for this private call is set to \"MVEPP 2:
> in-progress\", the MCVideo client shall comply with the procedures in
> subclause 6.2.8.3.3; and
>
> 13) shall send SIP INVITE request towards the MCVideo server according to
> 3GPP TS 24.229 [11].
Upon receiving a SIP 183(Session Progress) response to the SIP INVITE request
the MCVideo client:
> 1) may indicate the progress of the session establishment to the inviting
> MCVideo user.
Upon receiving a SIP 200 (OK) response to the SIP INVITE request the MCVideo
client:
> 1) shall interact with the media plane as specified in 3GPP TS 24.581 [5];
>
> 2) if the MCVideo emergency private call state is set to \"MVEPC 2:
> emergency-pc-requested\" or \"MVEPC 3: emergency-pc-granted\", shall perform
> the actions specified in subclause 6.2.8.3.4; and
>
> 3) shall notify the user that the call has been successfully established.
On receiving a SIP 4xx response, a SIP 5xx response or a SIP 6xx response to
the SIP INVITE request:
> 1) if the MCVideo emergency private call state is set to \"MVEPC 2:
> emergency-pc-requested\"; or
>
> 2) if the MCVideo emergency private call state is set to \"MVEPC 3:
> emergency-pc-granted\";
>
> the MCVideo client shall perform the actions specified in subclause
> 6.2.8.3.5.
On receiving a SIP INFO request where the Request-URI contains an MCVideo
session ID identifying an ongoing session, the MCVideo client shall follow the
actions specified in subclause 6.2.8.3.7.
[TS 24.281, clause 10.2.2.2.4]
This subclause covers on-demand session.
Upon receiving a request from an MCVideo user to cancel the in-progress
emergency condition on an MCVideo emergency private call, the MCVideo client
shall generate a SIP re-INVITE request by following the UE session procedures
specified in 3GPP TS 24.229 [4], with the clarifications given below.
The MCVideo client:
> 1) if the MCVideo user is not authorised to cancel the in-progress emergency
> condition on an MCVideo emergency private call as determined by the
> procedures of subclause 6.2.8.3.1.2, the MCVideo client:
>
> a) should indicate to the MCVideo user that they are not authorised to
> cancel the in-progress emergency condition on an MCVideo emergency private
> call; and
>
> b) shall skip the remaining steps of the current subclause;
>
> 2) shall, if the MCVideo user is cancelling an in-progress emergency
> condition and optionally an MCVideo emergency alert originated by the
> MCVideo user, include an application/vnd.3gpp.mcvideo-info+xml MIME body
> populated as specified in subclause 6.2.8.3.6;
>
> 3) shall, if the MCVideo user is cancelling an in-progress emergency
> condition and optionally an MCVideo emergency alert originated by another
> MCVideo user, include an application/vnd.3gpp.mcvideo-info+xml MIME body
> populated as specified in subclause 6.2.8.3.8;
>
> 4) shall include a Resource-Priority header field and comply with the
> procedures in subclause 6.2.8.3.3;
>
> 5) shall include in the SIP re-INVITE request an SDP offer the media
> parameters as currently established;
>
> NOTE 1: The SIP re-INVITE request can be sent within an on-demand session or
> a pre-established session associated with an MCVideo group session. If the
> SIP re-INVITE request is sent within a pre-established session, the media-
> level section for the offered MCVideo video media stream and the media-level
> section of the offered media-transmission control entity are expected to be
> the same as was negotiated in the existing pre-established session.
>
> 6) if an implicit transmission request is required, shall indicate this as
> specified in subclause 6.4; and
>
> 7) shall send the SIP re-INVITE request according to 3GPP TS 24.229 [4].
On receiving a SIP 2xx response to the SIP re-INVITE request, the MCVideo
client:
> 1) shall interact with the user plane as specified in 3GPP TS 24.380 [5];
>
> 2) shall set the MCVideo emergency private priority state of the MCVideo
> private call to \"MVEPP 1: no-emergency\";
>
> 3) shall set the MCVideo emergency private call state of the call to \"MVEPC
> 1: emergency-pc-capable\"; and
>
> 4) if the MCVideo emergency alert state is set to \"MVPEA 4: Emergency-
> alert-cancel-pending\", the sent SIP re-INVITE request did not contain an
> \ element in the application/vnd.3gpp.mcvideo-info+xml MIME
> body and the SIP 2xx response to the SIP request for a priority group call
> does not contain a Warning header field as specified in subclause 4.4 with
> the warning text containing the mcvideo-warn-code set to \"149\", shall set
> the MCVideo emergency alert state to \"MVPEA 1: no-alert\".
On receiving a SIP 4xx response, SIP 5xx response or SIP 6xx response to the
SIP re-INVITE request:
> 1) if the SIP 4xx response, SIP 5xx response or SIP 6xx response contains an
> application/vnd.3gpp.mcvideo-info+xml MIME body with an \
> element set to a value of \"true\", the MCVideo client shall set the MCVideo
> emergency private priority state as \"MVEPP 2: in-progress\";
>
> 2) if the SIP 4xx response, SIP 5xx response or SIP 6xx response contains an
> application/vnd.3gpp.mcvideo-info+xml MIME body with an \ element
> set to a value of \"true\" and the sent SIP re-INVITE request did not
> contain an \ element in the application/vnd.3gpp.mcvideo-
> info+xml MIME body, the MCVideo client shall set the MCVideo emergency alert
> state to \"MVPEA 3: emergency-alert-initiated\"; and
>
> 3) if the SIP 4xx response, SIP 5xx response or SIP 6xx response did not
> contain an application/vnd.3gpp.mcvideo-info+xml MIME body, shall set the
> MCVideo emergency private priority state as \"MVEPP 2: in-progress\" and the
> MCVideo emergency alert (MPEA) state shall revert to its value prior to
> entering the current procedure.
>
> NOTE 2: If the in-progress emergency private priority state cancel request
> is rejected, the state of the session does not change, i.e. continues with
> MCVideo emergency private call level priority.
On receiving a SIP INFO request where the Request-URI contains an MCVideo
session ID identifying an ongoing group session, the MCVideo client shall
follow the actions specified in subclause 6.2.8.3.7.
[TS 24.281, clause 10.2.2.2.5]
This subclause covers both on-demand session and pre-established sessions.
Upon receiving a request from an MCVideo user to upgrade the ongoing MCVideo
private call to an MCVideo emergency private call, the MCVideo client shall
generate a SIP re-INVITE request as specified in 3GPP TS 24.229 [4], with the
clarifications given below.
> 1) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body
> populated as specified in subclause 6.2.8.3.2;
>
> 2) shall include a Resource-Priority header field and comply with the
> procedures in subclause 6.2.8.3.3.
>
> 3) shall include an SDP offer with the media parameters as currently
> established according to 3GPP TS 24.229 [4];
>
> NOTE: The SIP re-INVITE request can be sent within an on-demand session or a
> pre-established session associated with an MCVideo private call. If the SIP
> re-INVITE request is sent within a pre-established session, the media-level
> section for the offered MCVideo video media stream and the media-level
> section of the offered media-transmission control entity are expected to be
> the same as was negotiated in the existing pre-established session.
>
> 4) if an implicit transmission request is required, shall indicate this as
> specified in subclause 6.4; and
>
> 5) shall send the SIP re-INVITE request according to 3GPP TS 24.229 [4].
On receiving a SIP 2xx response to the SIP re-INVITE request the MCVideo
client:
> 1) shall interact with the user plane as specified in 3GPP TS 24.380 [5];
> and
>
> 2) shall perform the actions specified in subclause 6.2.8.3.4.
On receiving a SIP 4xx response, SIP 5xx response or SIP 6xx response to the
SIP re-INVITE request, the MCVideo client shall perform the actions specified
in subclause 6.2.8.3.5.
On receiving a SIP INFO request where the Request-URI contains an MCVideo
session ID identifying an ongoing group session, the MCVideo client shall
follow the actions specified in subclause 6.2.8.3.7
[TS 24.581, clause 6.3.5.5.3]
Upon receiving a Transmission End Request message from the associated
transmission participant, the transmission control interface towards the
MCVideo client in the transmission control server:
> 1\. if the first bit in the subtype of the Transmission End Request message
> is set to \'1\' (Acknowledgment is required) as described in subclause
> 9.2.2.1, shall send a Transmission control Ack message. The Transmission
> control Ack message:
>
> a. shall include the Message Type field set to \'4\' (Transmission End
> Request); and
>
> b. shall include the Source field set to \'2\' (the controlling MCVideo
> function is the source);
>
> 2\. shall forward the Transmission End Request message to the general
> transmission control operation state machine of the transmission control
> arbitration logic in the MCVideo server with the first bit in the subtype of
> the Transmission End Request message set to \'0\' (Acknowledgment is not
> required), if not already set; and
>
> 3\. shall remain in the \'U: permitted\' state.
[TS 24.581, clause 6.3.5.5.3a]
Upon receiving a Transmission End Response message from the transmission
control server, the transmission control interface towards the MCVideo client
in the transmission control server:
> 1\. shall forward the Transmission End Response message to the associated
> transmission participant; and
>
> 2\. shall enter the state \'U: not permitted and Transmit Idle\'.
##### 6.2.1.3 Test description {#test-description-25 .H6}
##### 6.2.1.3.1 Pre-test conditions {#pre-test-conditions-25 .H6}
##### System Simulator: {#system-simulator-18 .H6}
\- SS (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
##### IUT: {#iut-17 .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
##### Preamble: {#preamble-18 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- UE States at the end of the preamble
\- The UE is in E-UTRA Registered, Idle Mode state.
\- The MCVideo Client Application has been activated and User has registered-
in as the MCVideo User with the Server as active user at the Client
##### 6.2.1.3.2 Test procedure sequence {#test-procedure-sequence-25 .H6}
Table 6.2.1.3.2-1: Main Behaviour
+------------+------------+------------+---------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +============+============+============+=========+=========+====+ | | | U - S | Message | | | +------------+------------+------------+---------+---------+----+ | 1 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | the | | | | | | | est | | | | | | | ablishment | | | | | | | of a | | | | | | | private | | | | | | | call to | | | | | | | user B | | | | | | | with | | | | | | | automatic | | | | | | | co | | | | | | | mmencement | | | | | | | mode and | | | | | | | implicit | | | | | | | tr | | | | | | | ansmission | | | | | | | request. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 2 | Check: | - | - | 1, 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | CO session | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3B.1.3-1 | | | | | | | to | | | | | | | establish | | | | | | | a private | | | | | | | call with | | | | | | | automatic | | | | | | | co | | | | | | | mmencement | | | | | | | mode and | | | | | | | implicit | | | | | | | tr | | | | | | | ansmission | | | | | | | control | | | | | | | according | | | | | | | to option | | | | | | | b,ii of | | | | | | | NOTE 1 in | | | | | | | TS | | | | | | | 36.579.1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.1.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 3-7 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 8 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | notify the | | | | | | | user that | | | | | | | the call | | | | | | | has been | | | | | | | es | | | | | | | tablished? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 8A | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | end of | | | | | | | tra | | | | | | | nsmission. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 8B | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | tr | | | | | | | ansmission | | | | | | | End | | | | | | | Request | | | | | | | CO\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.7.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 9 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | upgrade of | | | | | | | the call | | | | | | | to an | | | | | | | emergency | | | | | | | private | | | | | | | call with | | | | | | | implicit | | | | | | | tr | | | | | | | ansmission | | | | | | | request. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 10 | Check: | - | - | 3, 4 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | CO session | | | | | | | modi | | | | | | | fication\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.11.3-1 | | | | | | | to upgrade | | | | | | | the call | | | | | | | to an | | | | | | | emergency | | | | | | | private | | | | | | | call with | | | | | | | implicit | | | | | | | transmit | | | | | | | media | | | | | | | request? | | | | | +------------+------------+------------+---------+---------+----+ | 11-15 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 16 | Check: | - | - | 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | notify the | | | | | | | user that | | | | | | | the call | | | | | | | has been | | | | | | | upgraded | | | | | | | to an | | | | | | | emergency | | | | | | | private | | | | | | | call? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 16A | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | end of | | | | | | | tra | | | | | | | nsmission. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 16B | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | tr | | | | | | | ansmission | | | | | | | End | | | | | | | Request | | | | | | | CO\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.7.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 17 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | downgrade | | | | | | | of the | | | | | | | call to a | | | | | | | normal | | | | | | | private | | | | | | | call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 18 | Check: | - | - | 5 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | CO session | | | | | | | modi | | | | | | | fication\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.11.3-1 | | | | | | | to | | | | | | | downgrade | | | | | | | the call | | | | | | | without | | | | | | | implicit | | | | | | | transmit | | | | | | | media | | | | | | | request? | | | | | +------------+------------+------------+---------+---------+----+ | 19-23 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 24 | Check: | - | - | 5 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | notify the | | | | | | | user that | | | | | | | the call | | | | | | | has been | | | | | | | d | | | | | | | owngraded? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 25-29 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 30 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | release | | | | | | | the call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 31 | Check: | - | - | 6 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CO | | | | | | | call | | | | | | | release\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 32 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | NOTE 1: | | | | | | | This | | | | | | | action is | | | | | | | expected | | | | | | | to be done | | | | | | | via a | | | | | | | suitable | | | | | | | impl | | | | | | | ementation | | | | | | | dependent | | | | | | | MMI. | | | | | | +------------+------------+------------+---------+---------+----+
##### 6.2.1.3.3 Specific message contents {#specific-message-contents-25 .H6}
Table 6.2.1.3.3-1: SIP INVITE from the UE (Step 2, Table 6.2.1.3.2-1;\ Step 2,
TS 36.579-1 [2] Table 5.3B.1.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.1-1, condition PRIVATE-CALL
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP message**  
MIME-part-body SDP Message as described in Table 6.2.1.3.3-1A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.2.1.3.3-2
Table 6.2.1.3.3-1A: SDP message in SIP INVITE (Table 6.2.1.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.1-2, condition
INITIAL_SDP_OFFER, PRIVATE-CALL, IMPLICIT_GRANT_REQUESTED
* * *
Table 6.2.1.3.3-2: MCVideo-Info in SIP INVITE (Table 6.2.1.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition PRIVATE-CALL,
INVITE_REFER
* * *
Table 6.2.1.3.3-3: SIP 200 (OK) from the SS (Step 2, Table 6.2.1.3.2-1;\ Step
4, TS 36.579-1 [2] Table 5.3B.1.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.17.1.2-1, condition INVITE-RSP
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
SDP Message As described in Table 6.2.1.3.3-3A
Table 6.2.1.3.3-3A: SDP message in SIP 200 (OK) (Table 6.2.1.3.3-3)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition SDP_ANSWER,
IMPLICIT_GRANT_REQUESTED
* * *
Table 6.2.1.3.3-4..5: Void
Table 6.2.1.3.3-6: SIP INVITE from the UE (Step 10, Table 6.2.1.3.2-1;\ Step
2, TS 36.579-1 [2] Table 5.3B.11.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.1-1, condition PRIVATE-CALL,
EMERGENCY-CALL, re_INVITE
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP message**  
MIME-part-body SDP Message as described in Table 6.2.1.3.3-6A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.2.1.3.3-7
Table 6.2.1.3.3-6A: SDP message in SIP INVITE (Table 6.1.1.1.3.3-6)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.1-2, condition PRIVATE-CALL,
SDP_OFFER, IMPLICIT_GRANT_REQUESTED
* * *
Table 6.2.1.3.3-7: MCVideo-Info in SIP INVITE (Table 6.2.1.3.3-6)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition PRIVATE-CALL,
EMERGENCY-CALL, INVITE_REFER
* * *
Table 6.2.1.3.3-7A: SIP 200 (OK) from the SS (Step 10, Table 6.2.1.3.2-1;\
step 3, TS 36.579-1 [2] Table 5.3B.11.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.17.1.2-1, condition INVITE-RSP
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
SDP Message As described in Table 6.2.1.3.3-7B
Table 6.2.1.3.3-7B: SDP message in SIP 200 (OK) (Table 6.2.1.3.3-7A)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition SDP_ANSWER,
IMPLICIT_GRANT_REQUESTED
* * *
Table 6.2.1.3.3-8: Void
Table 6.2.1.3.3-9: Transmission Granted from the SS (Step 10, Table
6.2.1.3.2-1;\ Step 5, TS 36.579-1 [2] Table 5.3B.11.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.1-1, condition ACK,
EMERGENCY-CALL
* * *
Table 6.2.1.3.3-9A: Transmission Idle from the SS (Step 16B, Table
6.2.1.3.2-1;\ Step 4, TS 36.579-1 [2] Table 5.3B.7.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.16-1, condition EMERGENCY-
CALL
* * *
Table 6.2.1.3.3-10: SIP INVITE from the UE (Step 18, Table 6.2.1.3.2-1;\ Step
2, TS 36.579-1 [2] Table 5.3B.11.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.1-1, condition PRIVATE-CALL,
re_INVITE
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP message**  
MIME-part-body SDP Message as described in Table 6.2.1.3.3-10A  
**MIME body part** **MCVideo-Info**  
**MIME-part-body** MCVideo-Info as described in Table 6.2.1.3.3-12
Table 6.2.1.3.3-10A: SDP message in SIP INVITE (Table 6.2.1.3.3-10)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.1-2, condition PRIVATE-CALL,
SDP_OFFER
* * *
Table 6.2.1.3.3-11: MCVideo-Info in SIP INVITE (Table 6.2.1.3.3-11)
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition PRIVATE-CALL,
INVITE_REFER
* * *
Information Element Value/remark Comment Reference Condition mcvideoinfo  
mcvideo-Params  
emergency-ind Encrypted \ with mcvideoBoolean set to false
Encryption according to NOTE 2 in TS 36.579-1 [2] Table 5.5.3.2.1-2
Table 6.2.1.3.3-11A: SIP 200 (OK) from the SS (Step 18, Table 6.2.1.3.2-1;\
Step 4, TS 36.579-1 [2] Table 5.3B.1.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.17.1.2-1, condition INVITE-RSP
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
SDP Message As described in Table 6.2.1.3.3-17
Table 6.2.1.3.3-12..16: Void
Table 6.2.1.3.3-17: SDP message in SIP 200 (OK) (Table 6.2.1.3.3-11A)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition SDP_ANSWER
* * *
6.2.2 On-network / Private Call / On-demand / Automatic Commencement Mode /
With Transmission Control / Upgrade to Emergency Call / Cancellation of
Emergency on User request / Client Terminated (CT)
##### 6.2.2.1 Test Purpose (TP) {#test-purpose-tp-26 .H6}
##### (1) {#section-124 .H6}
**with** { UE (MCVideo Client) registered and authorised for MCVideo Service,
including authorised to receive private and private emergency calls with
Automatic Commencement }
ensure that {
**when** { the McVideo User receives a request to establish a MCVideo private
call, On-demand Automatic Commencement Mode, no force of Automatic
Commencement, applying End-to-end communication security with Transmission
Control }
**then** { UE (MCVideo Client) responds by sending a SIP 200 (OK) accepting
the establishment of the MCVideo private call, On-demand Automatic
Commencement Mode applying End-to-end communication security with Transmission
Control, **and** notifies the user of the call establishment }
}
##### (2) {#section-125 .H6}
**with** { UE (MCVideo Client) having an ongoing On-demand Automatic
Commencement Mode private call with Transmission Control }
ensure that {
**when** { the MCVideo User engages in communication with the inviting MCVideo
User }
**then** { UE (MCVideo Client) respects the Reception Control imposed by the
SS (MCVideo Server) (Media Transmission Notification, Receive Media Request,
Receive Media Response, Media Reception End Request, Media Reception End
Response }
}
##### (3) {#section-126 .H6}
**with** { UE (MCVideo Client) having an ongoing On-demand Automatic
Commencement Mode private call with Transmission Control }
ensure that {
**when** { the MCVideo User receives a request for upgrade of the ongoing
MCVideo private call to a MCVideo emergency private call with Transmission
Control }
**then** { UE (MCVideo Client) accepts the request and, upon sending SIP 200
(OK) message, considers the call as being upgraded to emergency private call
(emergency private call state = \"MEPC 3: emergency-pc-granted\") **and**
notifies the MCVideo User of the upgraded call if
pc_MCX_DisplayInfoEmergencyCall }
}
##### (4) {#section-127 .H6}
**with** { UE (MCVideo Client) having an On-demand Automatic Commencement Mode
private call with Transmission Control upgraded to an emergency private call }
ensure that {
**when** { the MCVideo User continues communication with the invited MCVideo
User }
**then** { UE (MCVideo Client) respects the transmission control imposed by
the MCVideo Server including being able to handle override requested by the
inviting MCVideo user and applying Transmission Control confidentiality and
integrity protection }
}
##### (5) {#section-128 .H6}
**with** { UE (MCVideo Client) having an On-demand Automatic Commencement Mode
private call with Transmission Control that was upgraded to an emergency
private call }
ensure that {
**when** { the MCVideo User receives a request to cancel the ongoing MCVideo
emergency condition on a private call }
**then** { UE (MCVideo Client) accepts the request and after sending a SIP 200
(OK) response considers the emergency condition cancelled and the call being
reverted back to MCVideo private call **and** notifies the MCVideo User of the
downgraded call, and respects Reception Control (Transmission }
}
##### (6) {#section-129 .H6}
**with** { UE (MCVideo Client) having an ongoing On-demand Automatic
Commencement Mode private call }
ensure that {
**when** { the MCVideo User requests to end the Private Call, the UE (MCVideo
Client) sends a Transmission End Request message and, upon receiving a
Transmission End Response from the SS (MCVideo Server) }
**then** { the UE (MCVideo Client) sends a SIP BYE request and the SS (MCVideo
Server) responds with a SIP 200 (OK) and leaves the MCVideo session }
}
##### 6.2.2.2 Conformance requirements {#conformance-requirements-26 .H6}
References: The conformance requirements covered in the present TC are
specified in: TS 24.281 clauses 10.2.2.2.1, 10.2.2.2.2, 10.2.2.2.3,
10.2.2.3.1.3, 6.2.3.1.1; in TS 24.581, clause 6.3.5.4.9. The following
represents a copy/paste extraction of the requirements relevant to the test
purpose; any references within the copy/paste text should be understood within
the scope of the core spec they have been copied from. Unless otherwise stated
these are Rel-14 requirements.
[TS 24.281, clause 10.2.2.2.1]
Upon receiving a request from an MCVideo user to establish an MCVideo private
call the MCVideo client shall generate an initial SIP INVITE request by
following the UE originating session procedures specified in 3GPP TS 24.229
[11], with the clarifications given below.
The MCVideo client:
> 1) shall set the Request-URI of the SIP INVITE request to a public service
> identity of the participating MCVideo function serving the MCVideo user;
>
> 2) may include a P-Preferred-Identity header field in the SIP INVITE request
> containing a public user identity as specified in 3GPP TS 24.229 [11];
>
> 3) shall include the g.3gpp.mcvideo media feature tag and the g.3gpp.icsi-
> ref media feature tag with the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" in the Contact header field of the SIP INVITE
> request according to IETF RFC 3840 [22];
>
> 4) shall include an Accept-Contact header field containing the
> g.3gpp.mcvideo media feature tag along with the \"require\" and \"explicit\"
> header field parameters according to IETF RFC 3841 [20];
>
> 5) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
> (coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
> field according to IETF RFC 6050 [14] in the SIP INVITE request;
>
> 6) shall include an Accept-Contact header field with the media feature tag
> g.3gpp.icsi-ref contain with the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" along with parameters \"require\" and
> \"explicit\" according to IETF RFC 3841 [20];
>
> 7) for the establishment of a private call shall insert in the SIP INVITE
> request a MIME resource-lists body with the MCVideo ID of the invited
> MCVideo user, according to rules and procedures of IETF RFC 5366 [37];
>
> 8) if an end-to-end security context needs to be established and if the
> MCVideo user is initiating a private call then:
>
> a) if necessary, shall instruct the key management client to request keying
> material from the key management server as described in 3GPP TS 33.180 [8];
>
> b) shall use the keying material to generate a PCK as described in 3GPP TS
> 33.180 [8];
>
> c) shall use the PCK to generate a PCK-ID with the four most significant
> bits set to \"0001\" to indicate that the purpose of the PCK is to protect
> private call communications and with the remaining twenty-eight bits being
> randomly generated as described in 3GPP TS 33.180 [8];
>
> d) shall encrypt the PCK to a UID associated to the MCVideo client using the
> MCVideo ID and KMS URI of the invited user as determined by the procedures
> of subclause 6.2.8.3.9 and a time related parameter as described in 3GPP TS
> 33.180 [8];
>
> e) shall generate a MIKEY-SAKKE I_MESSAGE using the encapsulated PCK and
> PCK-ID as specified in 3GPP TS 33.180 [8]; and
>
> g) shall add the MCVideo ID of the originating MCVideo to the initiator
> field (IDRi) of the I_MESSAGE as described in 3GPP TS 33.180 [8]; and
>
> f) shall sign the MIKEY-SAKKE I_MESSAGE using the originating MCVideo
> user\'s signing key provided in the keying material together with a time
> related parameter, and add this to the MIKEY-SAKKE payload, as described in
> 3GPP TS 33.180 [8].
>
> 9) shall include an SDP offer according to 3GPP TS 24.229 [11] with the
> clarification given in subclause 6.2.1 and with a media stream of the
> offered media-transmission control entity;
>
> 10) if implicit transmission control is required, shall comply with the
> conditions specified in subclause 6.4;
>
> 11) if the MCVideo user is initiating a private call then:
>
> a) if force of automatic commencement mode at the invited MCVideo client is
> requested by the MCVideo user, shall include in the SIP INVITE request a
> Priv-Answer-Mode header field with the value \"Auto\" according to the rules
> and procedures of IETF RFC 5373 [27];
>
> b) if force of automatic commencement mode at the invited MCVideo client is
> not requested by the MCVideo user and:
>
> i) if automatic commencement mode at the invited MCVideo client is requested
> by the MCVideo user, shall include in the SIP INVITE request an Answer-Mode
> header field with the value \"Auto\" according to the rules and procedures
> of IETF RFC 5373 [27]; and
>
> ii) if manual commencement mode at the invited MCVideo client is requested
> by the MCVideo user, shall include in the SIP INVITE request an Answer-Mode
> header field with the value \"Manual\" according to the rules and procedures
> of IETF RFC 5373 [27]; and
>
> c) shall contain an application/vnd.3gpp.mcvideo-info+xml MIME body with the
> \ element containing the \ element with the
> \ element set to a value of \"private\";
>
> 12) if the MCVideo emergency private call state is set to either \"MVEPC 2:
> emergency-pc-requested\" or \"MVEPC 3: emergency-pc-granted\" or the MCVideo
> emergency private priority state for this private call is set to \"MVEPP 2:
> in-progress\", the MCVideo client shall comply with the procedures in
> subclause 6.2.8.3.3; and
>
> 13) shall send SIP INVITE request towards the MCVideo server according to
> 3GPP TS 24.229 [11].
Upon receiving a SIP 183(Session Progress) response to the SIP INVITE request
the MCVideo client:
> 1) may indicate the progress of the session establishment to the inviting
> MCVideo user.
Upon receiving a SIP 200 (OK) response to the SIP INVITE request the MCVideo
client:
> 1) shall interact with the media plane as specified in 3GPP TS 24.581 [5];
>
> 2) if the MCVideo emergency private call state is set to \"MVEPC 2:
> emergency-pc-requested\" or \"MVEPC 3: emergency-pc-granted\", shall perform
> the actions specified in subclause 6.2.8.3.4; and
>
> 3) shall notify the user that the call has been successfully established.
On receiving a SIP 4xx response, a SIP 5xx response or a SIP 6xx response to
the SIP INVITE request:
> 1) if the MCVideo emergency private call state is set to \"MVEPC 2:
> emergency-pc-requested\"; or
>
> 2) if the MCVideo emergency private call state is set to \"MVEPC 3:
> emergency-pc-granted\";
>
> the MCVideo client shall perform the actions specified in subclause
> 6.2.8.3.5.
On receiving a SIP INFO request where the Request-URI contains an MCVideo
session ID identifying an ongoing session, the MCVideo client shall follow the
actions specified in subclause 6.2.8.3.7.
[TS 24.281, clause 10.2.2.2.2]
Upon receipt of an initial SIP INVITE request, the MCVideo client shall follow
the procedures for termination of multimedia sessions in the IM CN subsystem
as specified in 3GPP TS 24.229 [11] with the clarifications below.
The MCVideo client:
> 1) may reject the SIP INVITE request if any of the following conditions are
> met:
>
> a) MCVideo client is already occupied in another session and the number of
> simultaneous sessions exceeds \, the maximum simultaneous MCVideo
> session for private call, as specified in TS 24.484 [25];
>
> b) MCVideo client does not have enough resources to handle the call; or
>
> c) any other reason outside the scope of this specification;
>
> otherwise, continue with the rest of the steps.
>
> NOTE 1: If the SIP INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element set to a value of
> \"true\", the participating MCVideo function can choose to accept the
> request.
>
> 2) if the SIP INVITE request is rejected in step 1), shall respond toward
> participating MCVideo function either with appropriate reject code as
> specified in 3GPP TS 24.229 [11] and warning texts as specified in subclause
> 4.4.2 or with SIP 480 (Temporarily unavailable) response not including
> warning texts if the user is authorized to restrict the reason for failure
> according to \ as specified in 3GPP TS 24.484
> [25] and skip the rest of the steps of this subclause;
>
> 3) if the SIP INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element containing the \ Params> element with the \ element set to a value of
> \"true\":
>
> a) should display to the MCVideo user an indication that this is a SIP
> INVITE request for an MCVideo emergency private call and:
>
> i) should display the MCVideo ID of the originator of the MCVideo emergency
> private call contained in the \ element of the
> application/vnd.3gpp.mcvideo-info+xml MIME body; and
>
> ii) if the \ element is set to \"true\", should display to the
> MCVideo user an indication of the MCVideo emergency alert and associated
> information; and
>
> b) shall set the MCVideo emergency private priority state to \"MVEPP 2: in-
> progress\" for this private call;
>
> 4) if the SDP offer of the SIP INVITE request contains an \"a=key-mgmt\"
> attribute field with a \"mikey\" attribute value containing a MIKEY-SAKKE
> I_MESSAGE:
>
> a) shall extract the MCVideo ID of the originating MCVideo client from the
> initiator field (IDRi) of the I_MESSAGE as described in 3GPP TS 33.180 [8];
>
> b) shall convert the MCVideo ID to a UID as described in 3GPP TS 33.180 [8];
>
> c) shall use the UID to validate the signature of the MIKEY-SAKKE I_MESSAGE
> as described in 3GPP TS 33.180 [8];
>
> d) if authentication verification of the MIKEY-SAKKE I_MESSAGE fails, shall
> reject the SIP INVITE request with a SIP 488 (Not Acceptable Here) response
> as specified in IETF RFC 4567 [34], and include warning text set to \"136
> authentication of the MIKEY-SAKE I_MESSAGE failed\" in a Warning header
> field as specified in subclause 4.4; and
>
> e) if the signature of the MIKEY-SAKKE I_MESSAGE was successfully validated:
>
> i) shall extract and decrypt the encapsulated PCK using the terminating
> user\'s (KMS provisioned) UID key as described in 3GPP TS 33.180 [8]; and
>
> ii) shall extract the PCK-ID, from the payload as specified in 3GPP TS
> 33.180 [8];
>
> NOTE 2: With the PCK successfully shared between the originating MCVideo
> client and the terminating MCVideo client, both clients are able to use
> SRTP/SRTCP to create an end-to-end secure session.
>
> 5) may check if a Resource-Priority header field is included in the incoming
> SIP INVITE request and may perform further actions outside the scope of this
> specification to act upon an included Resource-Priority header field as
> specified in 3GPP TS 24.229 [11];
>
> 6) may display to the MCVideo user the MCVideo ID of the inviting MCVideo
> user;
>
> 7) shall perform the automatic commencement procedures specified in
> subclause 6.2.3.1.1 if one of the following conditions are met:
>
> a) SIP INVITE request contains an Answer-Mode header field with the value
> \"Auto\" and the MCVideo service setting at the invited MCVideo client for
> answering the call is set to automatic commencement mode;
>
> b) SIP INVITE request contains an Answer-Mode header field with the value
> \"Auto\" and the MCVideo service setting at the invited MCVideo client for
> answering the call is set to manual commencement mode, yet the invited
> MCVideo client is willing to answer the call with automatic commencement
> mode; or
>
> c) SIP INVITE request contains a Priv-Answer-Mode header field with the
> value of \"Auto\"; and
>
> 8) shall perform the manual commencement procedures specified in subclause
> 6.2.3.2.1 if either of the following conditions are met:
>
> a) SIP INVITE request contains an Answer-Mode header field with the value
> \"Manual\" and the MCVideo service setting at the invited MCVideo client for
> answering the call is set to manual commencement mode;
>
> b) SIP INVITE request contains an Answer-Mode header field with the value
> \"Manual\" and the MCVideo service setting at the invited MCVideo client for
> answering the call is set to automatic commencement mode, yet the invited
> MCVideo client allows the call to be answered with manual commencement mode;
> or
>
> c) SIP INVITE request contains a Priv-Answer-Mode header field with the
> value of \"Manual\".
Upon receiving the SIP CANCEL request cancelling a SIP INVITE request for
which a dialog exists at the MCVideo client and a SIP 200 (OK) response has
not yet been sent to the SIP INVITE request then the MCVideo client:
> 1) shall send a SIP 200 (OK) response to the SIP CANCEL request according to
> 3GPP TS 24.229 [11]; and
>
> 2) shall send a SIP 487 (Request Terminated) response to the SIP INVITE
> request according to 3GPP TS 24.229 [11].
Upon receiving a SIP BYE request for an established dialog, the MCVideo
client:
> 1) shall follow the procedures in clause 10.2.5.2.
[TS 24.281, clause 10.2.2.2.3]
This subclause covers on-demand session.
Upon receipt of a SIP re-INVITE request for an existing private call session,
the MCVideo client shall:
> 1) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element containing the \ Params> element with the \ element set to a value of
> \"true\":
>
> a) should display to the MCVideo user an indication that this is a SIP re-
> INVITE request to upgrade this call to an MCVideo emergency private call
> and:
>
> i) should display the MCVideo ID of the originator of the MCVideo emergency
> private call contained in the \ element of the
> application/vnd.3gpp.mcvideo-info+xml MIME body; and
>
> ii) if the \ element is set to \"true\", should display to the
> MCVideo user an indication of the MCVideo emergency alert and associated
> information; and
>
> b) shall set the MCVideo emergency private priority state to \"MVEPP 2: in-
> progress\" for this private call;
>
> 2) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element containing the \ Params> element with the \ element set to a value of
> \"false\":
>
> a) should display to the MCVideo user an indication that this is a SIP re-
> INVITE request to downgrade this emergency private call to a normal priority
> private call and:
>
> i) should display the MCVideo ID of the sender of the SIP re-INVITE request
> contained in the \ element of the
> application/vnd.3gpp.mcvideo-info+xml MIME body; and
>
> ii) if the \ element is set to \"false\" should display to the
> MCVideo user an indication that the MCVideo emergency alert is cancelled;
>
> iii) if the SIP re-INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body including an \ element:
>
> A) should display to the MCVideo user the MCVideo ID contained in the
> \ element of the MCVideo user that originated the MCVideo
> emergency alert; and
>
> B) if the MCVideo ID contained in the \ element is the
> MCVideo ID of the receiving MCVideo user, shall set the MCVideo emergency
> alert state to \"MVPEA 1: no-alert\";
>
> b) shall set the MCVideo emergency private priority state to \"MVEPP 1: no-
> emergency\" for this private call; and
>
> c) if the MCVideo emergency private call state of the call is set to \"MVEPC
> 3: emergency-call-granted\", shall set the MCVideo emergency private call
> state of the call to \"MVEPC 1: emergency-pc-capable\";
>
> 3) may check if a Resource-Priority header field is included in the incoming
> SIP INVITE request and may perform further actions outside the scope of this
> specification to act upon an included Resource-Priority header field as
> specified in 3GPP TS 24.229 [11];
>
> 4) may display to the MCVideo user the MCVideo ID of the inviting MCVideo
> user;
>
> NOTE 1: As this is a re-INVITE for an existing MCVideo private call session,
> there is no attempt made to change the answer-mode from its current state.
>
> 5) shall accept the SIP re-INVITE request and generate a SIP 200 (OK)
> response according to rules and procedures of 3GPP TS 24.229 [11];
>
> 6) if the SIP re-INVITE request was received within an on-demand session,
> shall include an SDP answer in the SIP 200 (OK) response to the SDP offer in
> the incoming SIP INVITE request according to 3GPP TS 24.229 [11] with the
> clarifications given in subclause 6.2.2;
>
> 7) shall send the SIP 200 (OK) response towards the MCVideo server according
> to rules and procedures of 3GPP TS 24.229 [11]; and
>
> 8) shall interact with the media plane as specified in 3GPP TS 24.581 [5].
[TS 24.281, clause 10.2.2.3.1.3]
This clause covers both on-demand session and pre-established sessions.
Upon receipt of a SIP re-INVITE request for an existing MCVideo private call
session the participating MCVideo function:
> 1) may reject the SIP re-INVITE request depending on the value of the
> Resource-Priority header field if the Resource-Priority header field is
> included in the received SIP re-INVITE request according to rules and
> procedures specified in IETF RFC 4412 [33] and skip the rest of the steps;
>
> 2) if unable to process the request due to a lack of resources or a risk of
> congestion exists, may reject the \"SIP INVITE request for originating
> participating MCVideo function\" with a SIP 500 (Server Internal Error)
> response. The participating MCVideo function may include a Retry-After
> header field to the SIP 500 (Server Internal Error) response as specified in
> IETF RFC 3261 [15];
>
> NOTE 1: If the SIP re-INVITE request contains an emergency indication, the
> participating MCVideo function can choose to accept the request.
>
> 3) shall determine the MCVideo ID of the calling user from public user
> identity in the P-Asserted-Identity header field of the SIP INVITE request
> and shall authorise the user;
>
> NOTE 2: The MCVideo ID of the calling user is bound to the public user
> identity at the time of service authorisation, as documented in clause 7.3.
>
> 4) shall validate the media parameters and if the MCVideo video media codec
> is not offered in the SIP re-INVITE request shall reject the request with a
> SIP 488 (Not Acceptable Here) response and skip the rest of the steps;
>
> NOTE 3: If the received SIP re-INVITE request is received within a pre-
> established session, associated with an MCVideo private call, the media-
> level section for the offered MCVideo video media stream and the media-level
> section of the offered media-transmission control entity are expected to be
> the same as was negotiated in the existing pre-established session.
>
> 5) shall generate a SIP re-INVITE request as specified in clause 6.3.2.1.9;
>
> 6) shall set the \ element in an
> application/vnd.3gpp.mcvideo-info+xml MIME body of the SIP re-INVITE request
> to the MCVideo ID of the calling user;
>
> 7) shall, if the SIP re-INVITE request was received within an on-demand
> session include in the SIP re-INVITE request an SDP containing the current
> media parameters used by the existing session;
>
> 8) shall, if the SIP re-INVITE request was received within a pre-established
> session, include in the SIP re-INVITE request an SDP offer based upon the
> previously negotiated SDP for the pre-established session as specified in
> clause 6.3.2.1.1.2;
>
> 9) shall include a Resource-Priority header field according to rules and
> procedures of 3GPP TS 24.229 [11] set to the value indicated in the
> Resource-Priority header field if included in the SIP re-INVITE request from
> the MCVideo client; and
>
> 10) shall forward the SIP re-INVITE request, according to 3GPP TS 24.229
> [11].
Upon receiving a SIP 200 (OK) response, the participating MCVideo function:
> 1) shall generate a SIP 200 (OK) response as specified in the clause
> 6.3.2.1.5.2;
>
> 2) if the SIP 200 (OK) response is to be sent within an on-demand session
> shall include in the SIP 200 (OK) response an SDP answer as specified in the
> clause 6.3.2.1.2.1;
>
> 3) if the SIP 200 (OK) response is to be sent within a pre-established
> session shall include in the SIP 200 (OK) response an SDP answer based upon
> the previously negotiated SDP for the pre-established session;
>
> 4) shall include Warning header field(s) received in the incoming SIP 200
> (OK) response;
>
> 5) shall include the P-Asserted-Identity header field received in the
> incoming SIP 200 (OK) response into the outgoing SIP 200 (OK) response;
>
> 6) shall send the SIP 200 (OK) response to the MCVideo client according to
> 3GPP TS 24.229 [11]; and
>
> 7) shall interact with the media plane as specified in 3GPP TS 24.581 [5].
The participating MCVideo function shall forward any other SIP response that
does not contain SDP, including any MIME bodies contained therein, along the
signalling path to the originating network according to 3GPP TS 24.229 [11].
[TS 24.281, clause 6.2.3.1.1]
When performing the automatic commencement mode procedures, the MCVideo
client:
> 1) shall accept the SIP INVITE request and generate a SIP 200 (OK) response
> according to rules and procedures of 3GPP TS 24.229 [11];
>
> 2) shall include the option tag \"timer\" in a Require header field of the
> SIP 200 (OK) response;
>
> 3) shall include the g.3gpp.mcvideo media feature tag in the Contact header
> field of the SIP 200 (OK) response;
>
> 4) shall include the g.3gpp.icsi-ref media feature tag containing the value
> of \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" in the Contact header field
> of the SIP 200 (OK) response;
>
> 5) shall include the Session-Expires header field in the SIP 200 (OK)
> response and start the SIP session timer according to IETF RFC 4028 [23].
> The \"refresher\" parameter in the Session-Expires header field shall be set
> to \"uas\";
>
> 6) shall, if the incoming SIP INVITE request contains a Replaces header
> field, include in the SDP answer in the SIP 200 (OK) response to the SDP
> offer the parameters used for the pre-established session identified by the
> contents of the Replaces header field;
>
> 7) shall, if the incoming SIP INVITE request does not contain a Replaces
> header field, include an SDP answer in the SIP 200 (OK) response to the SDP
> offer in the incoming SIP INVITE request according to 3GPP TS 24.229 [11]
> with the clarifications given in subclause 6.2.2;
>
> NOTE: In the case of a new emergency call where the terminating client is
> using a pre-established session, the SIP INVITE request containing a
> Replaces header is used to replace the pre-established session.
>
> 8) shall send the SIP 200 (OK) response towards the MCVideo server according
> to rules and procedures of 3GPP TS 24.229 [11];
>
> 9) shall, if the incoming SIP INVITE request contains a Replaces header
> field, release the pre-established session identified by the contents of the
> Replaces header field; and
>
> 10) shall interact with the media plane as specified in 3GPP TS 24.581 [5].
When NAT traversal is supported by the MCVideo client and when the MCVideo
client is behind a NAT, generation of SIP responses is done as specified in
this subclause and as specified in IETF RFC 5626 [35].
[TS 24.581, clause 6.3.5.4.9]
When a Transmission Grant message is received from the transmission control
arbitration logic in the MCVideo server, the transmission control interface
towards the MCVideo client in the transmission control server:
> 1\. shall forward the Transmission Grant messages to the associated
> transmission participant;
>
> 2\. may set the first bit in the subtype of the Transmission Grant message
> to \'1\' (Acknowledgment is required) as described in subclause 9.2.2.1;
>
> NOTE: It is an implementation option to handle the receipt of the
> Transmission control Ack message and what action to take if the Transmission
> control Ack message is not received.
>
> 3\. shall enter the state \'U: permitted\' as specified in subclause
> 6.3.5.5.2.
##### 6.2.2.3 Test description {#test-description-26 .H6}
##### 6.2.2.3.1 Pre-test conditions {#pre-test-conditions-26 .H6}
##### System Simulator: {#system-simulator-19 .H6}
\- SS (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
##### IUT: {#iut-18 .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
##### Preamble: {#preamble-19 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- UE States at the end of the preamble
\- The UE is in E-UTRA Registered, Idle Mode state.
\- The MCVideo Client Application has been activated and User has registered-
in as the MCVideo User with the Server as active user at the Client.
##### 6.2.2.3.2 Test procedure sequence {#test-procedure-sequence-26 .H6}
Table 6.2.2.3.2-1: Main Behaviour
+------------+------------+------------+---------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +============+============+============+=========+=========+====+ | | | U - S | Message | | | +------------+------------+------------+---------+---------+----+ | 1 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CT | | | | | | | session | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3.4.3-1 | | | | | | | to | | | | | | | establish | | | | | | | a private | | | | | | | call with | | | | | | | automatic | | | | | | | co | | | | | | | mmencement | | | | | | | mode? | | | | | +------------+------------+------------+---------+---------+----+ | 2-4 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 5 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Tr | | | | | | | ansmission | | | | | | | No | | | | | | | tification | | | | | | | and | | | | | | | Request | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.3.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 6 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 6A | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Reception | | | | | | | End | | | | | | | Request | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5. | | | | | | | 3B.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 7 | Check: | - | - | 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CT | | | | | | | session | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3.4.3-1 | | | | | | | to upgrade | | | | | | | the call | | | | | | | to an | | | | | | | emergency | | | | | | | private | | | | | | | call? | | | | | +------------+------------+------------+---------+---------+----+ | 8-10 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 11 | Check: | - | - | 4 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Tr | | | | | | | ansmission | | | | | | | No | | | | | | | tification | | | | | | | and | | | | | | | Request | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.3.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 12 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | - | EXCEPTION: | - | - | - | - | | | Step 13a1 | | | | | | | describes | | | | | | | behaviour | | | | | | | that | | | | | | | depends on | | | | | | | the UE | | | | | | | imple | | | | | | | mentation; | | | | | | | the | | | | | | | \"lower | | | | | | | case | | | | | | | letter\" | | | | | | | identifies | | | | | | | a step | | | | | | | sequence | | | | | | | that take | | | | | | | place if | | | | | | | the UE | | | | | | | displays | | | | | | | i | | | | | | | nformation | | | | | | | to the | | | | | | | user upon | | | | | | | accepting | | | | | | | est | | | | | | | ablishment | | | | | | | /releasing | | | | | | | of | | | | | | | Emergency | | | | | | | call. | | | | | +------------+------------+------------+---------+---------+----+ | 13a1 | IF | - | - | 3 | P | | | pc\ | | | | | | | _MCX_Disp | | | | | | | layInfoEme | | | | | | | rgencyCall | | | | | | | THEN | | | | | | | Check: | | | | | | | Does the | | | | | | | UE | | | | | | | (McVideo | | | | | | | client) | | | | | | | notify the | | | | | | | user that | | | | | | | the call | | | | | | | has been | | | | | | | upgraded | | | | | | | to an | | | | | | | emergency | | | | | | | private | | | | | | | call? | | | | | | | | | | | | | | (NOTE 1) | | | | | | | | | | | | | | (NOTE 2) | | | | | +------------+------------+------------+---------+---------+----+ | 13A | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Reception | | | | | | | End | | | | | | | Request | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5. | | | | | | | 3B.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 14 | Check: | - | - | 5 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CT | | | | | | | session | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3.4.3-1 | | | | | | | to | | | | | | | downgrade | | | | | | | the call? | | | | | +------------+------------+------------+---------+---------+----+ | 15-17 | Void. | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 18 | Check: | - | - | 4 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Tr | | | | | | | ansmission | | | | | | | No | | | | | | | tification | | | | | | | and | | | | | | | Request | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.3.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 19 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | - | EXCEPTION: | - | - | - | - | | | Step 20a1 | | | | | | | describes | | | | | | | behaviour | | | | | | | that | | | | | | | depends on | | | | | | | the UE | | | | | | | imple | | | | | | | mentation; | | | | | | | the | | | | | | | \"lower | | | | | | | case | | | | | | | letter\" | | | | | | | identifies | | | | | | | a step | | | | | | | sequence | | | | | | | that take | | | | | | | place if | | | | | | | the UE | | | | | | | displays | | | | | | | i | | | | | | | nformation | | | | | | | to the | | | | | | | user upon | | | | | | | accepting | | | | | | | est | | | | | | | ablishment | | | | | | | /releasing | | | | | | | of | | | | | | | Emergency | | | | | | | call. | | | | | +------------+------------+------------+---------+---------+----+ | 20a1 | IF | - | - | 5 | P | | | pc\ | | | | | | | _MCX_Disp | | | | | | | layInfoEme | | | | | | | rgencyCall | | | | | | | THEN | | | | | | | Check: | | | | | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | notify the | | | | | | | user that | | | | | | | the call | | | | | | | has been | | | | | | | d | | | | | | | owngraded? | | | | | | | | | | | | | | (NOTE 1) | | | | | | | | | | | | | | (NOTE 2) | | | | | +------------+------------+------------+---------+---------+----+ | 21 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 22 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | release | | | | | | | the call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 22A | Check: | - | - | 6 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Reception | | | | | | | End | | | | | | | Request | | | | | | | CO\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.8.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 22B | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 23 | Check: | - | - | 6 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CO | | | | | | | call | | | | | | | release\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 24 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | NOTE 1: | | | | | | | This | | | | | | | action is | | | | | | | expected | | | | | | | to be done | | | | | | | via a | | | | | | | suitable | | | | | | | impl | | | | | | | ementation | | | | | | | dependent | | | | | | | MMI. | | | | | | | | | | | | | | NOTE 2: | | | | | | | The | | | | | | | display | | | | | | | i | | | | | | | nformation | | | | | | | may | | | | | | | include\ | | | | | | | - | | | | | | | indication | | | | | | | for | | | | | | | upgrade of | | | | | | | the | | | | | | | private | | | | | | | call to an | | | | | | | emergency | | | | | | | private | | | | | | | call\ | | | | | | | - the | | | | | | | MCVideo ID | | | | | | | of the | | | | | | | sender of | | | | | | | the SIP | | | | | | | re-INVITE | | | | | | | request. | | | | | | +------------+------------+------------+---------+---------+----+
##### 6.2.2.3.3 Specific message contents {#specific-message-contents-26 .H6}
Table 6.2.2.3.3-1: SIP INVITE from the SS (Step 1, Table 6.2.2.3.2-1;\ Step 2,
TS 36.579-1 [2] Table 5.3.4.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.2-1
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP Message**  
MIME part body SDP Message as described in Table 6.2.2.3.3-1A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.2.2.3.3-2
Table 6.2.2.3.3-1A: SDP in SIP INVITE (Table 6.2.2.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition
INITIAL_SDP_OFFER, PRIVATE-CALL
* * *
Table 6.2.2.3.3-2: MCVideo-Info in SIP INVITE (Table 6.2.2.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.2-2, condition PRIVATE-CALL
* * *
Table 6.2.2.3.3-3: SIP 200 (OK) from the UE (Steps 1, 7, 14, Table
6.2.2.3.2-1;\ Step 4, TS 36.579-1 [2] Table 5.3.4.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.17.1.1-1, condition INVITE-RSP
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP Message**  
MIME part body SDP Message as described in Table 6.2.2.3.3-3A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.2.2.3.3-3B
Table 6.2.2.3.3-3A: SDP in SIP 200 (OK) (Table 6.2.2.3.3-AA3)
* * *
Derivation Path: TS 36.579-1 [2], 5.5.3.1.1-2, condition SDP_ANSWER
* * *
Table 6.2.2.3.3-3B: MCVideo-Info in SIP 200 (OK) (Table 6.2.2.3.3-3)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition INVITE-RSP
* * *
Table 6.2.2.3.3-4: SIP INVITE from the SS (Step 7, Table 6.2.2.3.2-1;\ Step 2,
TS 36.579-1 [2] Table 5.3.4.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.2-1, condition re_INVITE
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP Message**  
MIME part body SDP Message as described in Table 6.2.2.3.3-4A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.2.2.3.3-5
Table 6.2.2.3.3-4A: SDP in SIP INVITE (Table 6.2.2.3.3-4, Table 6.2.2.3.3-7)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition SDP_OFFER,
PRIVATE-CALL
* * *
Table 6.2.2.3.3-5: MCVideo-INFO in SIP INVITE (Table 6.2.2.3.3-5)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.2-2, condition EMERGENCY-CALL,
PRIVATE-CALL
* * *
Table 6.2.2.3.3-6..6A: Void
Table 6.2.2.3.3-6B: Media Transmission Notification from the SS (Step 11,
Table 6.2.2.3.2-1;\ Step 1, TS 36.579-1 [2] Table 5.3B.3.3-1)
+----------------------------------------------------------------------+ | Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.7-1, condition | | EMERGENCY-CALL | | | | NOTE: Condition EMERGENCY-CALL causes Reception Mode to be set to 0 | | (automatic reception mode) | +----------------------------------------------------------------------+
Table 6.2.2.3.3-6C: Media Reception End Request from the SS (Step 13A, Table
6.2.2.3.2-1;\ Step 1, TS 36.579-1 [2] Table 5.3B.10.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.3.3-1, condition EMERGENCY-
CALL, DOWNLINK
* * *
Table 6.2.2.3.3-6D: Transmission Idle from the SS (Step 13A, Table
6.2.2.3.2-1;\ Step 4, TS 36.579-1 [2] Table 5.3B.10.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.16-1, condition EMERGENCY-
CALL
* * *
Table 6.2.2.3.3-7: SIP INVITE from the SS (Step 14, Table 6.2.2.3.2-1;\ Step
2, TS 36.579-1 [2] Table 5.3.4.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.2-1, condition re_INVITE,
PRIVATE-CALL
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP Message**  
MIME part body SDP Message as described in Table 6.2.2.3.3-4A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.2.2.3.3-8
Table 6.2.2.3.3-8: MCVideo-Info in SIP INVITE (Table 6.2.2.3.3-7)
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.2-2, condition PRIVATE-CALL
* * *
Information Element Value/remark Comment Reference Condition mcvideoinfo  
mcvideo-Params  
emergency-ind Encrypted \ with mcvideoBoolean set to false
Encryption according to NOTE 1 in TS 36.579-1 [2] Table 5.5.3.2.2-2  
alert-ind Encrypted \ with mcvideoBoolean set to false Encryption
according to NOTE 1 in TS 36.579-1 [2] Table 5.5.3.2.2-2
Table 6.2.2.3.3-9: Void
Table 6.2.2.3.3-10: SIP BYE from the UE (Step 23, Table 6.2.2.3.2-1;\ Step 1,
TS 36.579-1 [2] Table 5.3.10.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.2.2.1-1, condition MT_CALL
* * *
Table 6.2.2.3.3-11: Void
6.2.3 On-network / Private Call / On-demand / Automatic Commencement Mode /
Without Transmission Control / Client Originated (CO)
##### 6.2.3.1 Test Purpose (TP) {#test-purpose-tp-27 .H6}
##### (1) {#section-130 .H6}
**with** { UE (MCVideo Client) registered and authorised for MCVideo Service,
including authorised to initiate/cancel private calls with Automatic
Commencement }
ensure that {
**when** { the MCVideo User requests the establishment of a MCVideo private
call, On-demand Automatic Commencement Mode, no force of Automatic
Commencement, without Transmission Control }
**then** { UE (MCVideo Client) sends a SIP INVITE message requesting On-demand
Automatic Commencement Mode and not offering a media-level section for a
media-transmission control entity, **and** , after indication from the MCVideo
Server that the call was established, notifies the MCVideo User **and** , does
not apply Transmission Control }
}
##### (2) {#section-131 .H6}
**with** { UE (MCVideo Client) having an ongoing On-demand Automatic
Commencement Mode private call without Transmission Control }
ensure that {
**when** { the MCVideo User requests to terminate the ongoing MCVideo private
call }
**then** { UE (MCVideo Client) sends a SIP BYE request and, after receiving a
SIP 200 (OK), leaves the MCVideo session }
}
##### 6.2.3.2 Conformance requirements {#conformance-requirements-27 .H6}
References: The conformance requirements covered in the present TC are
specified in: TS 24.281, clauses 10.2.1, 10.2.2.2.1, 10.2.4.1.1.1,
10.2.4.1.1.2, 10.2.4.2.1.1, 10.2.4.2.2.1, 10.2.4.3.1, 6.2.5.1, and 6.3.3.2.4.
The following represents a copy/paste extraction of the requirements relevant
to the test purpose; any references within the copy/paste text should be
understood within the scope of the core spec they have been copied from.
Unless otherwise stated these are Rel-14 requirements.
[TS 24.281, clause 10.2.1]
For on-network, the procedures for private call with transmission control are
specified in subclause 10.2.2.
For on-network, the procedures for private call without transmission control
are specified in subclause 10.2.3.
For on-network, the procedures for ending the private call initiated by
MCVideo client are specified in subclause 10.2.4.
For on-network, the procedures for ending the private call initiated by
MCVideo server are specified in subclause 10.2.5.
[TS 24.281, clause 10.2.2.2.1]
Upon receiving a request from an MCVideo user to establish an MCVideo private
call the MCVideo client shall generate an initial SIP INVITE request by
following the UE originating session procedures specified in 3GPP TS 24.229
[11], with the clarifications given below.
The MCVideo client:
> 1) shall set the Request-URI of the SIP INVITE request to a public service
> identity of the participating MCVideo function serving the MCVideo user;
>
> 2) may include a P-Preferred-Identity header field in the SIP INVITE request
> containing a public user identity as specified in 3GPP TS 24.229 [11];
>
> 3) shall include the g.3gpp.mcvideo media feature tag and the g.3gpp.icsi-
> ref media feature tag with the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" in the Contact header field of the SIP INVITE
> request according to IETF RFC 3840 [22];
>
> 4) shall include an Accept-Contact header field containing the
> g.3gpp.mcvideo media feature tag along with the \"require\" and \"explicit\"
> header field parameters according to IETF RFC 3841 [20];
>
> 5) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
> (coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
> field according to IETF RFC 6050 [14] in the SIP INVITE request;
>
> 6) shall include an Accept-Contact header field with the media feature tag
> g.3gpp.icsi-ref contain with the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" along with parameters \"require\" and
> \"explicit\" according to IETF RFC 3841 [20];
>
> 7) for the establishment of a private call shall insert in the SIP INVITE
> request a MIME resource-lists body with the MCVideo ID of the invited
> MCVideo user, according to rules and procedures of IETF RFC 5366 [37];
>
> 8) if an end-to-end security context needs to be established and if the
> MCVideo user is initiating a private call then:
>
> a) if necessary, shall instruct the key management client to request keying
> material from the key management server as described in 3GPP TS 33.180 [8];
>
> b) shall use the keying material to generate a PCK as described in 3GPP TS
> 33.180 [8];
>
> c) shall use the PCK to generate a PCK-ID with the four most significant
> bits set to \"0001\" to indicate that the purpose of the PCK is to protect
> private call communications and with the remaining twenty eight bits being
> randomly generated as described in 3GPP TS 33.180 [8];
>
> d) shall encrypt the PCK to a UID associated to the MCVideo client using the
> MCVideo ID and KMS URI of the invited user as determined by the procedures
> of subclause 6.2.8.3.9 and a time related parameter as described in 3GPP TS
> 33.180 [8];
>
> e) shall generate a MIKEY-SAKKE I_MESSAGE using the encapsulated PCK and
> PCK-ID as specified in 3GPP TS 33.180 [8]; and
>
> g) shall add the MCVideo ID of the originating MCVideo to the initiator
> field (IDRi) of the I_MESSAGE as described in 3GPP TS 33.180 [8]; and
>
> f) shall sign the MIKEY-SAKKE I_MESSAGE using the originating MCVideo
> user\'s signing key provided in the keying material together with a time
> related parameter, and add this to the MIKEY-SAKKE payload, as described in
> 3GPP TS 33.180 [8].
>
> 9) shall include an SDP offer according to 3GPP TS 24.229 [11] with the
> clarification given in subclause 6.2.1 and with a media stream of the
> offered media-transmission control entity;
>
> 10) if implicit transmission control is required, shall comply with the
> conditions specified in subclause 6.4;
>
> 11) if the MCVideo user is initiating a private call then:
>
> a) if force of automatic commencement mode at the invited MCVideo client is
> requested by the MCVideo user, shall include in the SIP INVITE request a
> Priv-Answer-Mode header field with the value \"Auto\" according to the rules
> and procedures of IETF RFC 5373 [27];
>
> b) if force of automatic commencement mode at the invited MCVideo client is
> not requested by the MCVideo user and:
>
> i) if automatic commencement mode at the invited MCVideo client is requested
> by the MCVideo user, shall include in the SIP INVITE request an Answer-Mode
> header field with the value \"Auto\" according to the rules and procedures
> of IETF RFC 5373 [27]; and
>
> ii) if manual commencement mode at the invited MCVideo client is requested
> by the MCVideo user, shall include in the SIP INVITE request an Answer-Mode
> header field with the value \"Manual\" according to the rules and procedures
> of IETF RFC 5373 [27]; and
>
> c) shall contain an application/vnd.3gpp.mcvideo-info+xml MIME body with the
> \ element containing the \ element with the
> \ element set to a value of \"private\";
>
> 12) if the MCVideo emergency private call state is set to either \"MVEPC 2:
> emergency-pc-requested\" or \"MVEPC 3: emergency-pc-granted\" or the MCVideo
> emergency private priority state for this private call is set to \"MVEPP 2:
> in-progress\", the MCVideo client shall comply with the procedures in
> subclause 6.2.8.3.3; and
>
> 13) shall send SIP INVITE request towards the MCVideo server according to
> 3GPP TS 24.229 [11].
Upon receiving a SIP 183(Session Progress) response to the SIP INVITE request
the MCVideo client:
> 1)may indicate the progress of the session establishment to the inviting
> MCVideo user.
Upon receiving a SIP 200 (OK) response to the SIP INVITE request the MCVideo
client:
> 1) shall interact with the media plane as specified in 3GPP TS 24.581 [5];
>
> 2) if the MCVideo emergency private call state is set to \"MVEPC 2:
> emergency-pc-requested\" or \"MVEPC 3: emergency-pc-granted\", shall perform
> the actions specified in subclause 6.2.8.3.4; and
>
> 3) shall notify the user that the call has been successfully established.
On receiving a SIP 4xx response, a SIP 5xx response or a SIP 6xx response to
the SIP INVITE request:
> 1) if the MCVideo emergency private call state is set to \"MVEPC 2:
> emergency-pc-requested\"; or
>
> 2) if the MCVideo emergency private call state is set to \"MVEPC 3:
> emergency-pc-granted\";
>
> the MCVideo client shall perform the actions specified in subclause
> 6.2.8.3.5.
On receiving a SIP INFO request where the Request-URI contains an MCVideo
session ID identifying an ongoing session, the MCVideo client shall follow the
actions specified in subclause 6.2.8.3.7.
[TS 24.281, clause 10.2.4.1.1.1]
Upon receiving a request from an MCVideo user to release an MCVideo private
call session established using on-demand session signalling, the MCVideo
client shall follow the procedures as specified in clause 6.2.5.1.
[TS 24.281, clause 10.2.4.1.1.2]
Upon receiving a SIP BYE request for private call session, the MCVideo client
shall follow the procedures as specified [TS 24.281, clause 10.2.4.1.1.1]
[TS 24.281, clause 10.2.4.2.1.1]
Upon receiving from the MCVideo client a SIP BYE request the participating
MCVideo function shall follow the procedures as specified in clause 6.3.2.1.6.
[TS 24.281, clause 10.2.4.2.2.1]
Upon receiving a SIP BYE request from the controlling MCVideo function, the
participating MCVideo function shall follow the procedures as specified in
clause 6.3.2.2.8.1.
[TS 24.281, clause 10.2.4.3.1]
Upon receiving a SIP BYE request the controlling MCVideo function shall follow
the procedures as specified in clause 6.3.3.2.4.
[TS 24.281, clause 6.2.5.1]
When the MCVideo client wants to release an MCVideo session established using
on-demand session signalling, the MCVideo client:
> 1) shall interact with the media plane as specified in 3GPP TS 24.581 [5];
>
> 2) shall generate a SIP BYE request according to 3GPP TS 24.229 [11];
>
> 3) shall set the Request-URI to the MCVideo session identity to release; and
>
> 4) shall send a SIP BYE request towards MCVideo server according to 3GPP TS
> 24.229 [11].
Upon receiving a SIP 200 (OK) response to the SIP BYE request, the MCVideo
client shall interact with the media plane as specified in 3GPP TS 24.581 [5].
[TS 24.281, clause 6.3.3.2.4]
Upon receiving a SIP BYE request the controlling MCVideo function:
> 1) shall interact with the media plane as specified in subclause 6.3 in 3GPP
> TS 24.581 [5] for releasing the media plane resource associated with the SIP
> session towards the MCVideo client;
>
> NOTE: The non-controlling MCVideo function is also regarded as a MCVideo
> client in a temporary MCVideo group session.
>
> 2) shall generate a SIP 200 (OK) response and send the SIP response towards
> the MCVideo client according to 3GPP TS 24.229 [11];
>
> 3) shall check the MCVideo session release policy as specified in subclause
> 6.3.8.1 and subclause 6.3.8.2 whether the MCVideo session needs to be
> released for each participant of the MCVideo session;
>
> 4) if release of the MCVideo session is required:
>
> a) shall perform the procedures as specified in the subclause 6.3.3.1.4 with
> the clarification that if the received SIP BYE request contains an
> application/vnd.3gpp.mcvideo-info+xml MIME body, copy the
> application/vnd.3gpp.mcvideo-info+xml MIME body into the outgoing SIP BYE
> request; and
>
> 5) if a release of the MCVideo session is not required, shall send a SIP
> NOTIFY request to all remaining MCVideo clients in the MCVideo session with
> a subscription to the conference event package as specified in subclause
> 9.2.3.4.2.
Upon receiving a SIP 200 (OK) response to the SIP BYE request the controlling
MCVideo function shall interact with the media plane as specified in subclause
6.3 in 3GPP TS 24.581 [5] for releasing media plane resources associated with
the SIP session with the MCVideo participant.
##### 6.4.3.3 Test description {#test-description-27 .H6}
##### 6.4.3.3.1 Pre-test conditions {#pre-test-conditions-27 .H6}
##### System Simulator: {#system-simulator-20 .H6}
\- SS (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
##### IUT: {#iut-19 .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
##### Preamble: {#preamble-20 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- UE States at the end of the preamble
\- The UE is in E-UTRA Registered, Idle Mode state.
\- The MCVideo Client Application has been activated and User has registered-
in as the MCVideo User with the Server as active user at the Client.
##### 6.2.3.3.2 Test procedure sequence {#test-procedure-sequence-27 .H6}
Table 6.2.3.3.2-1: Main Behaviour
+------------+------------+------------+---------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +============+============+============+=========+=========+====+ | | | U - S | Message | | | +------------+------------+------------+---------+---------+----+ | 1 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | the | | | | | | | est | | | | | | | ablishment | | | | | | | of a | | | | | | | private | | | | | | | call to | | | | | | | user B | | | | | | | with | | | | | | | automatic | | | | | | | co | | | | | | | mmencement | | | | | | | mode and | | | | | | | without | | | | | | | tr | | | | | | | ansmission | | | | | | | control. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 2 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | CO session | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3B.1.3-1 | | | | | | | to | | | | | | | establish | | | | | | | a private | | | | | | | call with | | | | | | | automatic | | | | | | | co | | | | | | | mmencement | | | | | | | mode and | | | | | | | without | | | | | | | tr | | | | | | | ansmission | | | | | | | control | | | | | | | according | | | | | | | to option | | | | | | | c of NOTE | | | | | | | 1 in TS | | | | | | | 36.579.1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.1.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 3-5 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 6 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | notify the | | | | | | | user that | | | | | | | the call | | | | | | | has been | | | | | | | es | | | | | | | tablished? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 7 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | release | | | | | | | the call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 8 | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CO | | | | | | | call | | | | | | | release\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 9-10 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | NOTE 1: | | | | | | | This | | | | | | | action is | | | | | | | expected | | | | | | | to be done | | | | | | | via a | | | | | | | suitable | | | | | | | impl | | | | | | | ementation | | | | | | | dependent | | | | | | | MMI. | | | | | | +------------+------------+------------+---------+---------+----+
##### 6.2.3.3.3 Specific message contents {#specific-message-contents-27 .H6}
Table 6.2.3.3.3-1: SIP INVITE from the UE (Step 2, Table 6.2.3.3.2-1;\ Step 2,
TS 36.579-1 [2] Table 5.3B.1.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.1-1, condition PRIVATE-CALL
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP message**  
MIME-part-body SDP Message as described in Table 6.2.3.3.3-1A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.2.1.3.3-2
Table 6.2.3.3.3-1A: SDP message in SIP INVITE (Table 6.2.3.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.1-2, condition
INITIAL_SDP_OFFER, PRIVATE-CALL, WITHOUT_TRANSMISSIONCONTROL
* * *
Table 6.2.3.3.3-2: MCVideo-Info in SIP INVITE (Table 6.2.3.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition INVITE_REFER,
PRIVATE-CALL
* * *
Table 6.2.3.3.3-3: SIP 200 (OK) from the SS (Step 4, Table 6.2.3.3.2-1;\ Step
4, TS 36.579-1 [2] Table 5.3B.1.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.17.1.2-1, condition INVITE-RSP
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
SDP Message As described in Table 6.2.3.3.3-3A
Table 6.2.3.3.3-3A: SDP Message in SIP 200 (OK) (Table 6.2.3.3.3-3)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition SDP_ANSWER,
WITHOUT_TRANSMISSIONCONTROL
* * *
Table 6.2.3.3.3-4..5: Void
6.2.4 On-network / Private Call / On-demand / Automatic Commencement Mode /
Without Transmission Control / Client Terminated (CT)
##### 6.2.4.1 Test Purpose (TP) {#test-purpose-tp-28 .H6}
##### (1) {#section-132 .H6}
**with** { UE (MCVideo Client) registered and authorised for MCVideo Service,
including authorised to receive private and private emergency calls with
Automatic Commencement }
ensure that {
**when** { the UE (MCVideo Client) receives a request for establishment of a
MCVideo private call, On-demand Automatic Commencement Mode, no force of
Automatic Commencement, without Transmission Control }
**then** { UE (MCVideo Client) sends a SIP 200 (OK) accepting the
establishment of an MCVideo private call, On-demand Automatic Commencement
Mode and not offering a media-level section for a media-transmission control
entity and not applying transmission control }
}
##### (2) {#section-133 .H6}
**with** { UE (MCVideo Client) having an ongoing On-demand Pre-arranged
Private Call with Automatic Commencement Mode }
ensure that {
**when** { the UE (MCVideo Client) requests to terminate the ongoing MCVideo
Private Call }
**then** { the UE (MCVideo Client) sends a SIP BYE request and the SS (MCVideo
Server) responds with a SIP 200 (OK) and leaves the MCVideo session }
}
##### 6.2.4.2 Conformance requirements {#conformance-requirements-28 .H6}
References: The conformance requirements covered in the present TC are
specified in: TS 24.281 clause 10.2.2.2.2. The following represents a
copy/paste extraction of the requirements relevant to the test purpose; any
references within the copy/paste text should be understood within the scope of
the core spec they have been copied from. Unless otherwise stated these are
Rel-14 requirements.
[TS 24.281, clause 10.2.2.2.2]
Upon receipt of an initial SIP INVITE request, the MCVideo client shall follow
the procedures for termination of multimedia sessions in the IM CN subsystem
as specified in 3GPP TS 24.229 [11] with the clarifications below.
The MCVideo client:
> 1) may reject the SIP INVITE request if any of the following conditions are
> met:
>
> a) MCVideo client is already occupied in another session and the number of
> simultaneous sessions exceeds \, the maximum simultaneous MCVideo
> session for private call, as specified in TS 24.484 [25];
>
> b) MCVideo client does not have enough resources to handle the call; or
>
> c) any other reason outside the scope of this specification;
>
> otherwise, continue with the rest of the steps.
>
> NOTE 1: If the SIP INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element set to a value of
> \"true\", the participating MCVideo function can choose to accept the
> request.
>
> 2) if the SIP INVITE request is rejected in step 1), shall respond toward
> participating MCVideo function either with appropriate reject code as
> specified in 3GPP TS 24.229 [11] and warning texts as specified in subclause
> 4.4.2 or with SIP 480 (Temporarily unavailable) response not including
> warning texts if the user is authorised to restrict the reason for failure
> according to \ as specified in 3GPP TS 24.484
> [25] and skip the rest of the steps of this subclause;
>
> 3) if the SIP INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element containing the \ Params> element with the \ element set to a value of
> \"true\":
>
> a) should display to the MCVideo user an indication that this is a SIP
> INVITE request for an MCVideo emergency private call and:
>
> i) should display the MCVideo ID of the originator of the MCVideo emergency
> private call contained in the \ element of the
> application/vnd.3gpp.mcvideo-info+xml MIME body; and
>
> ii) if the \ element is set to \"true\", should display to the
> MCVideo user an indication of the MCVideo emergency alert and associated
> information; and
>
> b) shall set the MCVideo emergency private priority state to \"MVEPP 2: in-
> progress\" for this private call;
>
> 4) if the SDP offer of the SIP INVITE request contains an \"a=key-mgmt\"
> attribute field with a \"mikey\" attribute value containing a MIKEY-SAKKE
> I_MESSAGE:
>
> a) shall extract the MCVideo ID of the originating MCVideo client from the
> initiator field (IDRi) of the I_MESSAGE as described in 3GPP TS 33.180 [8];
>
> b) shall convert the MCVideo ID to a UID as described in 3GPP TS 33.180 [8];
>
> c) shall use the UID to validate the signature of the MIKEY-SAKKE I_MESSAGE
> as described in 3GPP TS 33.180 [8];
>
> d) if authentication verification of the MIKEY-SAKKE I_MESSAGE fails, shall
> reject the SIP INVITE request with a SIP 488 (Not Acceptable Here) response
> as specified in IETF RFC 4567 [34], and include warning text set to \"136
> authentication of the MIKEY-SAKE I_MESSAGE failed\" in a Warning header
> field as specified in subclause 4.4; and
>
> e) if the signature of the MIKEY-SAKKE I_MESSAGE was successfully validated:
>
> i) shall extract and decrypt the encapsulated PCK using the terminating
> user\'s (KMS provisioned) UID key as described in 3GPP TS 33.180 [8]; and
>
> ii) shall extract the PCK-ID, from the payload as specified in 3GPP TS
> 33.180 [8];
>
> NOTE 2: With the PCK successfully shared between the originating MCVideo
> client and the terminating MCVideo client, both clients are able to use
> SRTP/SRTCP to create an end-to-end secure session.
>
> 5) may check if a Resource-Priority header field is included in the incoming
> SIP INVITE request and may perform further actions outside the scope of this
> specification to act upon an included Resource-Priority header field as
> specified in 3GPP TS 24.229 [11];
>
> 6) may display to the MCVideo user the MCVideo ID of the inviting MCVideo
> user;
>
> 7) shall perform the automatic commencement procedures specified in
> subclause 6.2.3.1.1 if one of the following conditions are met:
>
> a) SIP INVITE request contains an Answer-Mode header field with the value
> \"Auto\" and the MCVideo service setting at the invited MCVideo client for
> answering the call is set to automatic commencement mode;
>
> b) SIP INVITE request contains an Answer-Mode header field with the value
> \"Auto\" and the MCVideo service setting at the invited MCVideo client for
> answering the call is set to manual commencement mode, yet the invited
> MCVideo client is willing to answer the call with automatic commencement
> mode; or
>
> c) SIP INVITE request contains a Priv-Answer-Mode header field with the
> value of \"Auto\"; and
>
> 8) shall perform the manual commencement procedures specified in subclause
> 6.2.3.2.1 if either of the following conditions are met:
>
> a) SIP INVITE request contains an Answer-Mode header field with the value
> \"Manual\" and the MCVideo service setting at the invited MCVideo client for
> answering the call is set to manual commencement mode;
>
> b) SIP INVITE request contains an Answer-Mode header field with the value
> \"Manual\" and the MCVideo service setting at the invited MCVideo client for
> answering the call is set to automatic commencement mode, yet the invited
> MCVideo client allows the call to be answered with manual commencement mode;
> or
>
> c) SIP INVITE request contains a Priv-Answer-Mode header field with the
> value of \"Manual\".
Upon receiving the SIP CANCEL request cancelling a SIP INVITE request for
which a dialog exists at the MCVideo client and a SIP 200 (OK) response has
not yet been sent to the SIP INVITE request then the MCVideo client:
> 1) shall send a SIP 200 (OK) response to the SIP CANCEL request according to
> 3GPP TS 24.229 [11]; and
>
> 2) shall send a SIP 487 (Request Terminated) response to the SIP INVITE
> request according to 3GPP TS 24.229 [11].
Upon receiving a SIP BYE request for an established dialog, the MCVideo
client:
> 1) shall follow the procedures in subclause 10.2.5.2.
##### 6.2.4.3 Test description {#test-description-28 .H6}
##### 6.2.4.3.1 Pre-test conditions {#pre-test-conditions-28 .H6}
##### System Simulator: {#system-simulator-21 .H6}
\- SS (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
##### IUT: {#iut-20 .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
##### Preamble: {#preamble-21 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- UE States at the end of the preamble
\- The UE is in E-UTRA Registered, Idle Mode state.
\- The MCVideo Client Application has been activated and User has registered-
in as the MCVideo User with the Server as active user at the Client.
##### 6.2.4.3.2 Test procedure sequence {#test-procedure-sequence-28 .H6}
Table 6.2.4.3.2-1: Main Behaviour
+------------+------------+------------+---------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +============+============+============+=========+=========+====+ | | | U - S | Message | | | +------------+------------+------------+---------+---------+----+ | 1 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CT | | | | | | | session | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3.4.3-1 | | | | | | | to | | | | | | | establish | | | | | | | a private | | | | | | | call with | | | | | | | automatic | | | | | | | co | | | | | | | mmencement | | | | | | | mode and | | | | | | | without | | | | | | | tr | | | | | | | ansmission | | | | | | | control? | | | | | +------------+------------+------------+---------+---------+----+ | 2-4 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 5 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | release | | | | | | | the call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 6 | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CO | | | | | | | call | | | | | | | release\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 7-8 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | NOTE 1: | | | | | | | This | | | | | | | action is | | | | | | | expected | | | | | | | to be done | | | | | | | via a | | | | | | | suitable | | | | | | | impl | | | | | | | ementation | | | | | | | dependent | | | | | | | MMI. | | | | | | +------------+------------+------------+---------+---------+----+
##### 6.2.4.3.3 Specific message contents {#specific-message-contents-28 .H6}
Table 6.2.4.3.3-1: SIP INVITE from the SS (Step 1, Table 6.2.4.3.2-1;\ Step 2,
TS 36.579-1 [2] Table 5.3.4.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.2-1, condition PRIVATE-CALL
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP Message**  
MIME-part-body SDP Message as described in Table 6.2.4.3.3-1A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.2.4.3.3-2
Table 6.2.4.3.3-1A: SDP Message in SIP INVITE (Table 6.2.4.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition PRIVATE-CALL,
INITIAL_SDP_OFFER, WITHOUT_TRANSMISSIONCONTROL
* * *
Table 6.2.4.3.3-2: MCVideo-INFO in SIP INVITE (Table 6.2.4.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.2-2, condition PRIVATE-CALL
* * *
Table 6.2.4.3.3-3: SIP 200 (OK) from the UE (Step 1, Table 6.2.4.3.2-1;\ Step
4, TS 36.579-1 [2] Table 5.3.4.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.17.1.1-1, condition INVITE-RSP
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP Message**  
MIME-part-body SDP Message as described in Table 6.2.4.3.3-3A  
MIME body part **MCVideo-Info**  
MIME part body MCVideo-Info as described in Table 6.2.4.3.3-3B
Table 6.2.4.3.3-3A: SDP Message in SIP 200 (OK) (Table 6.2.4.3.3-3)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.1-2, condition PRIVATE-CALL,
SDP_ANSWER, WITHOUT_TRANSMISSIONCONTROL
* * *
Table 6.2.4.3.3-3B: MCVideo-Info in SIP 200 (OK) (Table 6.2.4.3.3-3)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition INVITE-RSP
* * *
Table 6.2.4.3.3-4: SIP BYE from the UE (Step 6, Table 6.2.4.3.2-1;\ Step 1, TS
36.579-1 [2] Table 5.3.10.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.2.2.1-1, condition MT_CALL
* * *
Table 6.2.4.3.3-5: Void
6.2.5 On-network / Private Call / Emergency Private Call / On-demand /
Automatic Commencement Mode / Force of Automatic Commencement Mode / Without
Transmission Control / Client Originated (CO)
##### 6.2.5.1 Test Purpose (TP) {#test-purpose-tp-29 .H6}
##### (1) {#section-134 .H6}
**with** { UE (MCVideo Client) registered and authorised for MCVideo Service
including authorisation to initiate and cancel emergency calls }
ensure that {
**when** { the MCVideo User requests the establishment of an MCVideo private
emergency call, On-demand, Automatic Commencement Mode, force of Automatic
Commencement Mode without Transmission Control }
**then** { UE (MCVideo Client) requests private emergency call establishment
without Transmission Control by sending a SIP INVITE message including a Priv-
Answer-Mode header field with the value \"Auto\" not offering a media-level
section for a media-transmission control entity **and, after indication from
the MCVideo Server that the call was established notifies the user and,** does
not apply Transmission Control }
}
##### (2) {#section-135 .H6}
**with** { UE (MCVideo Client) having established an emergency private call }
ensure that {
**when** { the UE (MCVideo User) requests to terminate the ongoing MCVideo
emergency private call }
**then** { UE (MCVideo Client) sends a SIP BYE request and after receiving a
SIP 200 (OK) leaves the MCVideo session }
}
##### 6.2.5.2 Conformance requirements {#conformance-requirements-29 .H6}
References: The conformance requirements covered in the present TC are
specified in: TS 24.281 clauses 10.2.2.2.1 and 4.6.2. The following represents
a copy/paste extraction of the requirements relevant to the test purpose; any
references within the copy/paste text should be understood within the scope of
the core spec they have been copied from. Unless otherwise stated these are
Rel-14 requirements.
[TS 24.281, clause 10.2.2.2.1]
Upon receiving a request from an MCVideo user to establish an MCVideo private
call the MCVideo client shall generate an initial SIP INVITE request by
following the UE originating session procedures specified in 3GPP TS 24.229
[11], with the clarifications given below.
The MCVideo client:
> 1) shall set the Request-URI of the SIP INVITE request to a public service
> identity of the participating MCVideo function serving the MCVideo user;
>
> 2) may include a P-Preferred-Identity header field in the SIP INVITE request
> containing a public user identity as specified in 3GPP TS 24.229 [11];
>
> 3) shall include the g.3gpp.mcvideo media feature tag and the g.3gpp.icsi-
> ref media feature tag with the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" in the Contact header field of the SIP INVITE
> request according to IETF RFC 3840 [22];
>
> 4) shall include an Accept-Contact header field containing the
> g.3gpp.mcvideo media feature tag along with the \"require\" and \"explicit\"
> header field parameters according to IETF RFC 3841 [20];
>
> 5) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
> (coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
> field according to IETF RFC 6050 [14] in the SIP INVITE request;
>
> 6) shall include an Accept-Contact header field with the media feature tag
> g.3gpp.icsi-ref contain with the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" along with parameters \"require\" and
> \"explicit\" according to IETF RFC 3841 [20];
>
> 7) for the establishment of a private call shall insert in the SIP INVITE
> request a MIME resource-lists body with the MCVideo ID of the invited
> MCVideo user, according to rules and procedures of IETF RFC 5366 [37];
>
> 8) if an end-to-end security context needs to be established and if the
> MCVideo user is initiating a private call then:
>
> a) if necessary, shall instruct the key management client to request keying
> material from the key management server as described in 3GPP TS 33.180 [8];
>
> b) shall use the keying material to generate a PCK as described in 3GPP TS
> 33.180 [8];
>
> c) shall use the PCK to generate a PCK-ID with the four most significant
> bits set to \"0001\" to indicate that the purpose of the PCK is to protect
> private call communications and with the remaining twenty eight bits being
> randomly generated as described in 3GPP TS 33.180 [8];
>
> d) shall encrypt the PCK to a UID associated to the MCVideo client using the
> MCVideo ID and KMS URI of the invited user as determined by the procedures
> of subclause 6.2.8.3.9 and a time related parameter as described in 3GPP TS
> 33.180 [8];
>
> e) shall generate a MIKEY-SAKKE I_MESSAGE using the encapsulated PCK and
> PCK-ID as specified in 3GPP TS 33.180 [8]; and
>
> g) shall add the MCVideo ID of the originating MCVideo to the initiator
> field (IDRi) of the I_MESSAGE as described in 3GPP TS 33.180 [8]; and
>
> f) shall sign the MIKEY-SAKKE I_MESSAGE using the originating MCVideo
> user\'s signing key provided in the keying material together with a time
> related parameter, and add this to the MIKEY-SAKKE payload, as described in
> 3GPP TS 33.180 [8].
>
> 9) shall include an SDP offer according to 3GPP TS 24.229 [11] with the
> clarification given in subclause 6.2.1 and with a media stream of the
> offered media-transmission control entity;
>
> 10) if implicit transmission control is required, shall comply with the
> conditions specified in subclause 6.4;
>
> 11) if the MCVideo user is initiating a private call then:
>
> a) if force of automatic commencement mode at the invited MCVideo client is
> requested by the MCVideo user, shall include in the SIP INVITE request a
> Priv-Answer-Mode header field with the value \"Auto\" according to the rules
> and procedures of IETF RFC 5373 [27];
>
> b) if force of automatic commencement mode at the invited MCVideo client is
> not requested by the MCVideo user and:
>
> i) if automatic commencement mode at the invited MCVideo client is requested
> by the MCVideo user, shall include in the SIP INVITE request an Answer-Mode
> header field with the value \"Auto\" according to the rules and procedures
> of IETF RFC 5373 [27]; and
>
> ii) if manual commencement mode at the invited MCVideo client is requested
> by the MCVideo user, shall include in the SIP INVITE request an Answer-Mode
> header field with the value \"Manual\" according to the rules and procedures
> of IETF RFC 5373 [27]; and
>
> c) shall contain an application/vnd.3gpp.mcvideo-info+xml MIME body with the
> \ element containing the \ element with the
> \ element set to a value of \"private\";
>
> 12) if the MCVideo emergency private call state is set to either \"MVEPC 2:
> emergency-pc-requested\" or \"MVEPC 3: emergency-pc-granted\" or the MCVideo
> emergency private priority state for this private call is set to \"MVEPP 2:
> in-progress\", the MCVideo client shall comply with the procedures in
> subclause 6.2.8.3.3; and
>
> 13) shall send SIP INVITE request towards the MCVideo server according to
> 3GPP TS 24.229 [11].
Upon receiving a SIP 183(Session Progress) response to the SIP INVITE request
the MCVideo client:
> 1) may indicate the progress of the session establishment to the inviting
> MCVideo user.
Upon receiving a SIP 200 (OK) response to the SIP INVITE request the MCVideo
client:
> 1) shall interact with the media plane as specified in 3GPP TS 24.581 [5];
>
> 2) if the MCVideo emergency private call state is set to \"MVEPC 2:
> emergency-pc-requested\" or \"MVEPC 3: emergency-pc-granted\", shall perform
> the actions specified in subclause 6.2.8.3.4; and
>
> 3) shall notify the user that the call has been successfully established.
On receiving a SIP 4xx response, a SIP 5xx response or a SIP 6xx response to
the SIP INVITE request:
> 1) if the MCVideo emergency private call state is set to \"MVEPC 2:
> emergency-pc-requested\"; or
>
> 2) if the MCVideo emergency private call state is set to \"MVEPC 3:
> emergency-pc-granted\";
>
> the MCVideo client shall perform the actions specified in subclause
> 6.2.8.3.5.
On receiving a SIP INFO request where the Request-URI contains an MCVideo
session ID identifying an ongoing session, the MCVideo client shall follow the
actions specified in subclause 6.2.8.3.7.
[TS24.281, clause 4.6.2]
MCVideo emergency private calls as defined by 3GPP TS 23.281 [26] are
supported by the procedures in this specification. The following MCVideo
emergency private call functionalities are specified in the present document:
> \- MCVideo emergency private call origination with optional MCVideo
> emergency alert initiation;
>
> \- upgrade of an MCVideo private call to an MCVideo emergency private; and
>
> \- cancellation of the MCVideo emergency private call priority.
Key aspects of MCVideo emergency private calls include:
> \- adjusted EPS bearer priority for both participants whether or not they
> are both in an emergency condition (i.e. both have their MCVideo emergency
> state set). This is achieved by using the Resource-Priority header field as
> specified in IETF RFC 4412 [33] with namespaces defined for use by MCVideo
> specified in IETF RFC 8101 [43];
>
> \- the initiator of the MCVideo emergency private call can override the
> other MCVideo user in the MCVideo emergency private call unless that user
> also has their MCVideo emergency state set;
>
> \- restoration of normal EPS bearer priority to the call according to system
> policy (e.g., configured time limit for the emergency priority of an MCVideo
> emergency private call or cancellation of the emergency condition of the
> private call);
>
> \- restoration of normal transmission control priority participants when the
> emergency elevated priority is cancelled;
>
> \- requires the MCVideo user to be authorised to either originate or cancel
> an MCVideo emergency private call;
>
> \- requires the targeted MCVideo user to be authorised to receive an MCVideo
> emergency private call;
>
> \- requests to originate MCVideo emergency private calls may also include an
> indication of an MCVideo emergency alert; and
>
> \- the originator of the MCVideo emergency private call can request that the
> call use either manual or automatic commencement mode.
There are a number of states that are key in managing these aspects of MCVideo
emergency private calls, which include:
> \- **MCVideo emergency state (MVES):** as defined in 3GPP TS 22.281 [36] and
> 3GPP TS 23.281 [26], indicates that the MCVideo user is in a life-
> threatening situation. Managed by the MCVideo user of the device or an
> authorised MCVideo user. While the MCVideo emergency state is set on the
> client, all MCVideo group and private calls originated by the client will be
> MCVideo emergency calls, assuming the MCVideo user is authorised for MCVideo
> emergency calls on them.
>
> \- **MCVideo private emergency alert (MVPEA) state** : this is an internal
> state of the MCVideo client which in conjunction with the MCVideo emergency
> private call state aids in managing the MCVideo emergency state and related
> actions.
>
> \- **MCVideo emergency private call (MVEPC) state** : this is an internal
> state managed by the MCVideo client which in conjunction with the MCVideo
> emergency alert state aids in managing the MCVideo emergency state and
> related actions.
>
> \- **In-progress emergency private call (IPEPC) state:** indicates whether
> or not there is an MCVideo emergency private call in-progress for the two
> participants. This state is managed by the controlling MCVideo function. All
> private calls originated between these two participants when in an in-
> progress emergency private call state are MCVideo emergency private calls
> until this state is cancelled, whether or not the originator is in an
> MCVideo emergency state.
>
> \- **MCVideo emergency private priority (MVEPP) state:** this is an internal
> state managed by the MCVideo client which tracks the in-progress emergency
> private call state of the private call managed by the controlling MCVideo
> function. Ideally, the MCVideo client would not need to track the in-
> progress emergency private priority state, but doing so enables the MCVideo
> client to request MCVideo emergency-level priority earlier than otherwise
> possible. For example, if the MCVideo user wishes to join an MCVideo
> emergency private call and is not in the MCVideo emergency state, the
> MCVideo client should have emergency level priority. If it has knowledge of
> the in-progress emergency private priority state of the private call (i.e.,
> the two participants), it can request priority by including a Resource-
> Priority header field set to the MCVideo namespace specified in IETF RFC
> 8101 [38], and appropriate priority level in the SIP INVITE request (or SIP
> re-INVITE request).
>
> NOTE: The above states and their transitions are described in Annex G.
##### 6.2.5.3 Test description {#test-description-29 .H6}
##### 6.2.5.3.1 Pre-test conditions {#pre-test-conditions-29 .H6}
##### System Simulator: {#system-simulator-22 .H6}
\- SS (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
##### IUT: {#iut-21 .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
##### Preamble: {#preamble-22 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- UE States at the end of the preamble
\- The UE is in E-UTRA Registered, Idle Mode state.
\- The MCVideo Client Application has been activated and User has registered-
in as the MCVideo User with the Server as active user at the Client.
##### 6.2.5.3.2 Test procedure sequence {#test-procedure-sequence-29 .H6}
Table 6.2.5.3.2-1: Main Behaviour
+------------+------------+------------+---------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +============+============+============+=========+=========+====+ | | | U - S | Message | | | +------------+------------+------------+---------+---------+----+ | 1 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | the | | | | | | | est | | | | | | | ablishment | | | | | | | of a | | | | | | | private | | | | | | | emergency | | | | | | | call to | | | | | | | user B | | | | | | | with force | | | | | | | of | | | | | | | automatic | | | | | | | co | | | | | | | mmencement | | | | | | | mode and | | | | | | | without | | | | | | | tr | | | | | | | ansmission | | | | | | | control. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 2 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | CO session | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3B.1.3-1 | | | | | | | to | | | | | | | establish | | | | | | | a private | | | | | | | call with | | | | | | | automatic | | | | | | | co | | | | | | | mmencement | | | | | | | mode and | | | | | | | without | | | | | | | tr | | | | | | | ansmission | | | | | | | control | | | | | | | according | | | | | | | to option | | | | | | | c of NOTE | | | | | | | 1 in TS | | | | | | | 36.579.1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.1.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 3-5 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 6 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | notify the | | | | | | | user that | | | | | | | the call | | | | | | | has been | | | | | | | es | | | | | | | tablished? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 7 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | release | | | | | | | the call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 8 | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CO | | | | | | | call | | | | | | | release\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 9-10 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | NOTE 1: | | | | | | | This | | | | | | | action is | | | | | | | expected | | | | | | | to be done | | | | | | | via a | | | | | | | suitable | | | | | | | impl | | | | | | | ementation | | | | | | | dependent | | | | | | | MMI. | | | | | | +------------+------------+------------+---------+---------+----+
##### 6.2.5.3.3 Specific message contents {#specific-message-contents-29 .H6}
Table 6.2.5.3.3-1: SIP INVITE from the UE (Step 2, Table 6.2.5.3.2-1;\ Step 2,
TS 36.579-1 [2] Table 5.3B.1.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.1-1, condition PRIVATE-CALL,
EMERGENCY-CALL
* * *
Information Element Value/remark Comment Reference Condition **Answer-Mode**
Not present  
**Priv-Answer-Mode**  
answer-mode-value \"Auto\"  
answer-mode-param _"_ require"  
**Message-body**  
MIME body part **SDP message**  
MIME-part-body SDP message as described in Table 6.2.5.3.3-1A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.2.5.3.3-2
Table 6.2.5.3.3-1A: SDP Message in SIP INVITE (Table 6.2.5.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.1-2, condition PRIVATE-CALL,
INITIAL_SDP_OFFER, WITHOUT_TRANSMISSIONCONTROL
* * *
Table 6.2.5.3.3-2: MCVideo-Info in SIP INVITE (Table 6.2.5.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition PRIVATE-CALL,
INVITE_REFER, EMERGENCY-CALL
* * *
Table 6.2.5.3.3-3: SIP 200 (OK) from the SS (Step 4, Table 6.2.5.3.2-1;\ Step
4, TS 36.579-1 [2] Table 5.3B.1.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.17.1.2-1, condition INVITE-RSP
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
SDP Message As described in Table 6.2.5.3.3-3A
Table 6.2.5.3.3-3A: SDP Message in SIP 200 (OK) (Table 6.2.5.3.3-4)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition SDP_ANSWER,
WITHOUT_TRANSMISSIONCONTROL
* * *
Table 6.2.5.3.3-4..5: Void
6.2.6 On-network / Private Call / Emergency Private Call / On-demand / Manual
Commencement Mode / Force of automatic commencement mode / Without
Transmission Control / Client Terminated (CT)
##### 6.2.6.1 Test Purpose (TP) {#test-purpose-tp-30 .H6}
##### (1) {#section-136 .H6}
**with** { UE (MCVideo Client) registered and authorised for MCVideo Service
including authorisation to receive an MCVideo private call, the MCVideo
Service setting for answering the call is set to Manual Commencement Mode }
ensure that {
**when** { the UE (MCVideo Client) receives a request for establishment of an
MCVideo emergency private call, On-demand Manual Commencement Mode, force of
Automatic Commencement Mode without Transmission Control }
**then** { UE (MCVideo Client) accepts the call (automatic commencement) by
sending a SIP 200 (OK) message accepting the private emergency call, On-demand
Automatic Commencement Mode, not offering a media-level section for a media-
transmission control entity, **and** , notifies the user if
pc_MCX_DisplayInfoEmergencyCall, }
}
##### (2) {#section-137 .H6}
**with** { UE (MCVideo Client) having an ongoing On-demand Pre-arranged
Private Call }
ensure that {
**when** { the UE (MCVideo Client) requests to terminate the ongoing MCVideo
Private Call }
**then** { the UE (MCVideo Client) sends a SIP BYE request and upon receiving
a SIP 200 (OK)from the SS(MCVideo Server) leaves the MCVideo session }
}
##### 6.2.6.2 Conformance requirements {#conformance-requirements-30 .H6}
References: The conformance requirements covered in the present TC are
specified in: TS 24.281 clauses 6.2.3.1.1 and 4.6.2. The following represents
a copy/paste extraction of the requirements relevant to the test purpose; any
references within the copy/paste text should be understood within the scope of
the core spec they have been copied from. Unless otherwise stated these are
Rel-14 requirements.
[TS 24.281, clause 6.2.3.1.1]
When performing the automatic commencement mode procedures, the MCVideo
client:
> 1) shall accept the SIP INVITE request and generate a SIP 200 (OK) response
> according to rules and procedures of 3GPP TS 24.229 [11];
>
> 2) shall include the option tag \"timer\" in a Require header field of the
> SIP 200 (OK) response;
>
> 3) shall include the g.3gpp.mcvideo media feature tag in the Contact header
> field of the SIP 200 (OK) response;
>
> 4) shall include the g.3gpp.icsi-ref media feature tag containing the value
> of \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" in the Contact header field
> of the SIP 200 (OK) response;
>
> 5) shall include the Session-Expires header field in the SIP 200 (OK)
> response and start the SIP session timer according to IETF RFC 4028 [23].
> The \"refresher\" parameter in the Session-Expires header field shall be set
> to \"uas\";
>
> 6) shall, if the incoming SIP INVITE request contains a Replaces header
> field, include in the SDP answer in the SIP 200 (OK) response to the SDP
> offer the parameters used for the pre-established session identified by the
> contents of the Replaces header field;
>
> 7) shall, if the incoming SIP INVITE request does not contain a Replaces
> header field, include an SDP answer in the SIP 200 (OK) response to the SDP
> offer in the incoming SIP INVITE request according to 3GPP TS 24.229 [11]
> with the clarifications given in subclause 6.2.2;
>
> NOTE: In the case of a new emergency call where the terminating client is
> using a pre-established session, the SIP INVITE request containing a
> Replaces header is used to replace the pre-established session.
>
> 8) shall send the SIP 200 (OK) response towards the MCVideo server according
> to rules and procedures of 3GPP TS 24.229 [11];
>
> 9) shall, if the incoming SIP INVITE request contains a Replaces header
> field, release the pre-established session identified by the contents of the
> Replaces header field; and
>
> 10) shall interact with the media plane as specified in 3GPP TS 24.581 [5].
When NAT traversal is supported by the MCVideo client and when the MCVideo
client is behind a NAT, generation of SIP responses is done as specified in
this subclause and as specified in IETF RFC 5626 [35].
[TS24.281, clause 4.6.2]
MCVideo emergency private calls as defined by 3GPP TS 23.281 [26] are
supported by the procedures in this specification. The following MCVideo
emergency private call functionalities are specified in the present document:
> \- MCVideo emergency private call origination with optional MCVideo
> emergency alert initiation;
>
> \- upgrade of an MCVideo private call to an MCVideo emergency private; and
>
> \- cancellation of the MCVideo emergency private call priority.
Key aspects of MCVideo emergency private calls include:
> \- adjusted EPS bearer priority for both participants whether or not they
> are both in an emergency condition (i.e. both have their MCVideo emergency
> state set). This is achieved by using the Resource-Priority header field as
> specified in IETF RFC 4412 [33] with namespaces defined for use by MCVideo
> specified in IETF RFC 8101 [43];
>
> \- the initiator of the MCVideo emergency private call can override the
> other MCVideo user in the MCVideo emergency private call unless that user
> also has their MCVideo emergency state set;
>
> \- restoration of normal EPS bearer priority to the call according to system
> policy (e.g., configured time limit for the emergency priority of an MCVideo
> emergency private call or cancellation of the emergency condition of the
> private call);
>
> \- restoration of normal transmission control priority participants when the
> emergency elevated priority is cancelled;
>
> \- requires the MCVideo user to be authorised to either originate or cancel
> an MCVideo emergency private call;
>
> \- requires the targeted MCVideo user to be authorised to receive an MCVideo
> emergency private call;
>
> \- requests to originate MCVideo emergency private calls may also include an
> indication of an MCVideo emergency alert; and
>
> \- the originator of the MCVideo emergency private call can request that the
> call use either manual or automatic commencement mode.
There are a number of states that are key in managing these aspects of MCVideo
emergency private calls, which include:
> \- **MCVideo emergency state (MVES):** as defined in 3GPP TS 22.281 [36] and
> 3GPP TS 23.281 [26], indicates that the MCVideo user is in a life-
> threatening situation. Managed by the MCVideo user of the device or an
> authorised MCVideo user. While the MCVideo emergency state is set on the
> client, all MCVideo group and private calls originated by the client will be
> MCVideo emergency calls, assuming the MCVideo user is authorised for MCVideo
> emergency calls on them.
>
> \- **MCVideo private emergency alert (MVPEA) state** : this is an internal
> state of the MCVideo client which in conjunction with the MCVideo emergency
> private call state aids in managing the MCVideo emergency state and related
> actions.
>
> \- **MCVideo emergency private call (MVEPC) state** : this is an internal
> state managed by the MCVideo client which in conjunction with the MCVideo
> emergency alert state aids in managing the MCVideo emergency state and
> related actions.
>
> \- **In-progress emergency private call (IPEPC) state:** indicates whether
> or not there is an MCVideo emergency private call in-progress for the two
> participants. This state is managed by the controlling MCVideo function. All
> private calls originated between these two participants when in an in-
> progress emergency private call state are MCVideo emergency private calls
> until this state is cancelled, whether or not the originator is in an
> MCVideo emergency state.
>
> \- **MCVideo emergency private priority (MVEPP) state:** this is an internal
> state managed by the MCVideo client which tracks the in-progress emergency
> private call state of the private call managed by the controlling MCVideo
> function. Ideally, the MCVideo client would not need to track the in-
> progress emergency private priority state, but doing so enables the MCVideo
> client to request MCVideo emergency-level priority earlier than otherwise
> possible. For example, if the MCVideo user wishes to join an MCVideo
> emergency private call and is not in the MCVideo emergency state, the
> MCVideo client should have emergency level priority. If it has knowledge of
> the in-progress emergency private priority state of the private call (i.e.,
> the two participants), it can request priority by including a Resource-
> Priority header field set to the MCVideo namespace specified in IETF RFC
> 8101 [38], and appropriate priority level in the SIP INVITE request (or SIP
> re-INVITE request).
>
> NOTE: The above states and their transitions are described in Annex G.
##### 6.2.6.3 Test description {#test-description-30 .H6}
##### 6.2.6.3.1 Pre-test conditions {#pre-test-conditions-30 .H6}
##### System Simulator: {#system-simulator-23 .H6}
\- SS (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
##### IUT: {#iut-22 .H6}
\- UE (MCVideo client)
\- UE (MCVideo client) is set for manual commencement mode answering
\- receive emergency calls; MCVideo service setting for answering the call is
set to manual commencement mode (3GPP TS 24.483 [12],
/\/\/Common/PrivateCall/AutoCommence=\"false\",
/\/\/Common/PrivateCall/ManualCommence=\"true\")
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
##### Preamble: {#preamble-23 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- UE States at the end of the preamble
\- The UE is in E-UTRA Registered, Idle Mode state.
\- The MCVideo Client Application has been activated and User has registered
as the MCVideo User, with the Server as an active user at the Client.
##### 6.2.6.3.2 Test procedure sequence {#test-procedure-sequence-30 .H6}
Table 6.2.6.3.2-1: Main Behaviour
+------------+------------+------------+---------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +============+============+============+=========+=========+====+ | | | U - S | Message | | | +------------+------------+------------+---------+---------+----+ | 1 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CT | | | | | | | session | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3.4.3-1 | | | | | | | to | | | | | | | establish | | | | | | | a private | | | | | | | emergency | | | | | | | call with | | | | | | | force of | | | | | | | automatic | | | | | | | co | | | | | | | mmencement | | | | | | | mode and | | | | | | | without | | | | | | | tr | | | | | | | ansmission | | | | | | | control? | | | | | +------------+------------+------------+---------+---------+----+ | 2-4 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | - | EXCEPTION: | - | - | - | - | | | Step 5a1 | | | | | | | describes | | | | | | | behaviour | | | | | | | that | | | | | | | depends on | | | | | | | the UE | | | | | | | imple | | | | | | | mentation; | | | | | | | the | | | | | | | \"lower | | | | | | | case | | | | | | | letter\" | | | | | | | identifies | | | | | | | a step | | | | | | | sequence | | | | | | | that take | | | | | | | place if | | | | | | | the UE | | | | | | | displays | | | | | | | i | | | | | | | nformation | | | | | | | to the | | | | | | | user upon | | | | | | | accepting | | | | | | | est | | | | | | | ablishment | | | | | | | /releasing | | | | | | | of | | | | | | | Emergency | | | | | | | call. | | | | | +------------+------------+------------+---------+---------+----+ | 5a1 | IF | - | - | 1 | P | | | pc\ | | | | | | | _MCX_Disp | | | | | | | layInfoEme | | | | | | | rgencyCall | | | | | | | THEN | | | | | | | Check: | | | | | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | notify the | | | | | | | user that | | | | | | | the call | | | | | | | has been | | | | | | | es | | | | | | | tablished? | | | | | | | | | | | | | | (NOTE 1) | | | | | | | | | | | | | | (NOTE 2) | | | | | +------------+------------+------------+---------+---------+----+ | 6 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 7 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | release | | | | | | | the call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 8 | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CO | | | | | | | call | | | | | | | release\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 9-10 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | NOTE 1: | | | | | | | This | | | | | | | action is | | | | | | | expected | | | | | | | to be done | | | | | | | via a | | | | | | | suitable | | | | | | | impl | | | | | | | ementation | | | | | | | dependent | | | | | | | MMI. | | | | | | | | | | | | | | NOTE 2: | | | | | | | The | | | | | | | display | | | | | | | i | | | | | | | nformation | | | | | | | may | | | | | | | include\ | | | | | | | - | | | | | | | indication | | | | | | | for a | | | | | | | request | | | | | | | for an | | | | | | | MCVideo | | | | | | | private | | | | | | | call\ | | | | | | | - the | | | | | | | MCVideo ID | | | | | | | of the | | | | | | | originator | | | | | | | of the | | | | | | | MCVideo | | | | | | | private | | | | | | | call. | | | | | | +------------+------------+------------+---------+---------+----+
##### 6.2.6.3.3 Specific message contents {#specific-message-contents-30 .H6}
Table 6.2.6.3.3-0: MCVideo User Profile (Preamble, USIM)
Derivation Path: TS 36.579-1 [2], table 5.5.8.7-1.
* * *
Information Element Value/remark Comment Reference Condition mcvideo-user-
profile  
cp:ruleset  
cp:rule  
cp:actions  
allow-automatic-commencement false
Table 6.2.6.3.3-1: SIP INVITE from the SS (Step 1, Table 6.2.6.3.2-1;\ Step 2,
TS 36.579-1 [2] Table 5.3.4.3-1))
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.2-1, condition PRIVATE-CALL,
EMERGENCY-CALL MANUAL
* * *
Information Element Value/remark Comment Reference Condition **Answer-Mode**
Not present  
**Priv-Answer-Mode**  
answer-mode-value \"Auto\"  
answer-mode-param _"_ require"  
**Message-body**  
MIME body part **SDP Message**  
MIME-part-body SDP Message as described in Table 6.2.6.3.3-1A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.2.6.3.3-2
Table 6.2.6.3.3-1A: SDP Message in SIP INVITE (Table 6.2.6.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition PRIVATE-CALL,
INITIAL_SDP_OFFER, WITHOUT_TRANSMISSIONCONTROL
* * *
Table 6.2.6.3.3-2: MCVideo-INFO in SIP INVITE (Table 6.2.6.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.2-2, condition PRIVATE-CALL,
EMERGENCY-CALL
* * *
Table 6.2.6.3.3-3: SIP 200 (OK) from the UE (Step 3, Table 6.2.6.3.2-1;\ Step
4, TS 36.579-1 [2] Table 5.3.4.3-1))
Derivation Path: TS 36.579-1 [2], Table 5.5.2.17.1.1-1, condition PRIVATE-CALL
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP Message**  
MIME-part-body SDP Message as described in Table 6.2.6.3.3-3A  
MIME body part **MCVideo-Info**  
MIME part body MCVideo-Info as described in Table 6.2.6.3.3-3B
Table 6.2.6.3.3-3A: SDP Message in SIP 200 (OK) (Table 6.2.6.3.3-3)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.1-2, condition SDP_ANSWER,
WITHOUT_TRANSMISSIONCONTROLL
* * *
Table 6.2.6.3.3-3B: MCVideo-Info in SIP 200 (OK) (Table 6.2.6.3.3-3)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition INVITE-RSP
* * *
Table 6.2.6.3.3-4: Void
Table 6.2.6.3.3-5: SIP BYE from the UE (Step 8, Table 6.2.6.3.2-1;\ Step 1, TS
36.579-1 [2] Table 5.3.10.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.2.2-1, condition MT_CALL
* * *
Table 6.2.6.3.3-6: Void
6.2.7 On-network / Private Call / On-demand / Manual Commencement Mode /
Without Transmission Control / Client Originated (CO)
##### 6.2.7.1 Test Purpose (TP) {#test-purpose-tp-31 .H6}
##### (1) {#section-138 .H6}
**with** { UE (MCVideo Client) registered and authorised for MCVideo Service
and authorised to initiate private calls with manual commencement }
ensure that {
**when** { the MCVideo User requests the establishment of an MCVideo On-demand
Manual Commencement private call without Transmission Control }
**then** { UE (MCVideo Client) requests On-demand Manual Commencement Mode
private call establishment without Transmission Control by sending a SIP
INVITE message not offering a media-level section for a media-transmission
control entity **and** , after indication from the MCVideo Server that the
call was established the UE notifies the user **and** , does not apply
Transmission Control }
}
##### (2) {#section-139 .H6}
**with** { UE (MCVideo Client) having established an MCVideo on-demand Manual
Commencement private call without Transmission Control }
ensure that {
**when** { the UE( MCVideo User) requests to cancel the ongoing MCVideo on-
demand Manual Commencement private call }
**then** { UE (MCVideo Client) sends a SIP BYE request and after receiving a
SIP 200 (OK) response leaves the MCVideo session }
}
##### 6.2.7.2 Conformance requirements {#conformance-requirements-31 .H6}
References: The conformance requirements covered in the present TC are
specified in: TS 24.281 clauses 10.2.2.2.1, 4.6.2. The following represents a
copy/paste extraction of the requirements relevant to the test purpose; any
references within the copy/paste text should be understood within the scope of
the core spec they have been copied from. Unless otherwise stated these are
Rel-14 requirements.
[TS 24.281, clause 10.2.2.2.1]
Upon receiving a request from an MCVideo user to establish an MCVideo private
call the MCVideo client shall generate an initial SIP INVITE request by
following the UE originating session procedures specified in 3GPP TS 24.229
[11], with the clarifications given below.
The MCVideo client:
> 1) shall set the Request-URI of the SIP INVITE request to a public service
> identity of the participating MCVideo function serving the MCVideo user;
>
> 2) may include a P-Preferred-Identity header field in the SIP INVITE request
> containing a public user identity as specified in 3GPP TS 24.229 [11];
>
> 3) shall include the g.3gpp.mcvideo media feature tag and the g.3gpp.icsi-
> ref media feature tag with the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" in the Contact header field of the SIP INVITE
> request according to IETF RFC 3840 [22];
>
> 4) shall include an Accept-Contact header field containing the
> g.3gpp.mcvideo media feature tag along with the \"require\" and \"explicit\"
> header field parameters according to IETF RFC 3841 [20];
>
> 5) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
> (coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
> field according to IETF RFC 6050 [14] in the SIP INVITE request;
>
> 6) shall include an Accept-Contact header field with the media feature tag
> g.3gpp.icsi-ref contain with the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" along with parameters \"require\" and
> \"explicit\" according to IETF RFC 3841 [20];
>
> 7) for the establishment of a private call shall insert in the SIP INVITE
> request a MIME resource-lists body with the MCVideo ID of the invited
> MCVideo user, according to rules and procedures of IETF RFC 5366 [37];
>
> 8) if an end-to-end security context needs to be established and if the
> MCVideo user is initiating a private call then:
>
> a) if necessary, shall instruct the key management client to request keying
> material from the key management server as described in 3GPP TS 33.180 [8];
>
> b) shall use the keying material to generate a PCK as described in 3GPP TS
> 33.180 [8];
>
> c) shall use the PCK to generate a PCK-ID with the four most significant
> bits set to \"0001\" to indicate that the purpose of the PCK is to protect
> private call communications and with the remaining twenty-eight bits being
> randomly generated as described in 3GPP TS 33.180 [8];
>
> d) shall encrypt the PCK to a UID associated to the MCVideo client using the
> MCVideo ID and KMS URI of the invited user as determined by the procedures
> of subclause 6.2.8.3.9 and a time related parameter as described in 3GPP TS
> 33.180 [8];
>
> e) shall generate a MIKEY-SAKKE I_MESSAGE using the encapsulated PCK and
> PCK-ID as specified in 3GPP TS 33.180 [8]; and
>
> g) shall add the MCVideo ID of the originating MCVideo to the initiator
> field (IDRi) of the I_MESSAGE as described in 3GPP TS 33.180 [8]; and
>
> f) shall sign the MIKEY-SAKKE I_MESSAGE using the originating MCVideo
> user\'s signing key provided in the keying material together with a time
> related parameter, and add this to the MIKEY-SAKKE payload, as described in
> 3GPP TS 33.180 [8].
>
> 9) shall include an SDP offer according to 3GPP TS 24.229 [11] with the
> clarification given in subclause 6.2.1 and with a media stream of the
> offered media-transmission control entity;
>
> 10) if implicit transmission control is required, shall comply with the
> conditions specified in subclause 6.4;
>
> 11) if the MCVideo user is initiating a private call then:
>
> a) if force of automatic commencement mode at the invited MCVideo client is
> requested by the MCVideo user, shall include in the SIP INVITE request a
> Priv-Answer-Mode header field with the value \"Auto\" according to the rules
> and procedures of IETF RFC 5373 [27];
>
> b) if force of automatic commencement mode at the invited MCVideo client is
> not requested by the MCVideo user and:
>
> i) if automatic commencement mode at the invited MCVideo client is requested
> by the MCVideo user, shall include in the SIP INVITE request an Answer-Mode
> header field with the value \"Auto\" according to the rules and procedures
> of IETF RFC 5373 [27]; and
>
> ii) if manual commencement mode at the invited MCVideo client is requested
> by the MCVideo user, shall include in the SIP INVITE request an Answer-Mode
> header field with the value \"Manual\" according to the rules and procedures
> of IETF RFC 5373 [27]; and
>
> c) shall contain an application/vnd.3gpp.mcvideo-info+xml MIME body with the
> \ element containing the \ element with the
> \ element set to a value of \"private\";
>
> 12) if the MCVideo emergency private call state is set to either \"MVEPC 2:
> emergency-pc-requested\" or \"MVEPC 3: emergency-pc-granted\" or the MCVideo
> emergency private priority state for this private call is set to \"MVEPP 2:
> in-progress\", the MCVideo client shall comply with the procedures in
> subclause 6.2.8.3.3; and
>
> 13) shall send SIP INVITE request towards the MCVideo server according to
> 3GPP TS 24.229 [11].
Upon receiving a SIP 183(Session Progress) response to the SIP INVITE request
the MCVideo client:
> 1) may indicate the progress of the session establishment to the inviting
> MCVideo user.
Upon receiving a SIP 200 (OK) response to the SIP INVITE request the MCVideo
client:
> 1) shall interact with the media plane as specified in 3GPP TS 24.581 [5];
>
> 2) if the MCVideo emergency private call state is set to \"MVEPC 2:
> emergency-pc-requested\" or \"MVEPC 3: emergency-pc-granted\", shall perform
> the actions specified in subclause 6.2.8.3.4; and
>
> 3) shall notify the user that the call has been successfully established.
On receiving a SIP 4xx response, a SIP 5xx response or a SIP 6xx response to
the SIP INVITE request:
> 1) if the MCVideo emergency private call state is set to \"MVEPC 2:
> emergency-pc-requested\"; or
>
> 2) if the MCVideo emergency private call state is set to \"MVEPC 3:
> emergency-pc-granted\";
>
> the MCVideo client shall perform the actions specified in subclause
> 6.2.8.3.5.
On receiving a SIP INFO request where the Request-URI contains an MCVideo
session ID identifying an ongoing session, the MCVideo client shall follow the
actions specified in subclause 6.2.8.3.7.
[TS 24.281, clause 4.6.2]
MCVideo emergency private calls as defined by 3GPP TS 23.281 [26] are
supported by the procedures in this specification. The following MCVideo
emergency private call functionalities are specified in the present document:
> \- MCVideo emergency private call origination with optional MCVideo
> emergency alert initiation;
>
> \- upgrade of an MCVideo private call to an MCVideo emergency private; and
>
> \- cancellation of the MCVideo emergency private call priority.
Key aspects of MCVideo emergency private calls include:
> \- adjusted EPS bearer priority for both participants whether or not they
> are both in an emergency condition (i.e. both have their MCVideo emergency
> state set). This is achieved by using the Resource-Priority header field as
> specified in IETF RFC 4412 [33] with namespaces defined for use by MCVideo
> specified in IETF RFC 8101 [43];
>
> \- the initiator of the MCVideo emergency private call can override the
> other MCVideo user in the MCVideo emergency private call unless that user
> also has their MCVideo emergency state set;
>
> \- restoration of normal EPS bearer priority to the call according to system
> policy (e.g., configured time limit for the emergency priority of an MCVideo
> emergency private call or cancellation of the emergency condition of the
> private call);
>
> \- restoration of normal transmission control priority participants when the
> emergency elevated priority is cancelled;
>
> \- requires the MCVideo user to be authorized to either originate or cancel
> an MCVideo emergency private call;
>
> \- requires the targeted MCVideo user to be authorized to receive an MCVideo
> emergency private call;
>
> \- requests to originate MCVideo emergency private calls may also include an
> indication of an MCVideo emergency alert; and
>
> \- the originator of the MCVideo emergency private call can request that the
> call use either manual or automatic commencement mode.
There are a number of states that are key in managing these aspects of MCVideo
emergency private calls, which include:
> \- **MCVideo emergency state (MVES):** as defined in 3GPP TS 22.281 [36] and
> 3GPP TS 23.281 [26], indicates that the MCVideo user is in a life-
> threatening situation. Managed by the MCVideo user of the device or an
> authorized MCVideo user. While the MCVideo emergency state is set on the
> client, all MCVideo group and private calls originated by the client will be
> MCVideo emergency calls, assuming the MCVideo user is authorized for MCVideo
> emergency calls on them.
>
> \- **MCVideo private emergency alert (MVPEA) state** : this is an internal
> state of the MCVideo client which in conjunction with the MCVideo emergency
> private call state aids in managing the MCVideo emergency state and related
> actions.
>
> \- **MCVideo emergency private call (MVEPC) state** : this is an internal
> state managed by the MCVideo client which in conjunction with the MCVideo
> emergency alert state aids in managing the MCVideo emergency state and
> related actions.
>
> \- **In-progress emergency private call (IPEPC) state:** indicates whether
> or not there is an MCVideo emergency private call in-progress for the two
> participants. This state is managed by the controlling MCVideo function. All
> private calls originated between these two participants when in an in-
> progress emergency private call state are MCVideo emergency private calls
> until this state is cancelled, whether or not the originator is in an
> MCVideo emergency state.
>
> \- **MCVideo emergency private priority (MVEPP) state:** this is an internal
> state managed by the MCVideo client which tracks the in-progress emergency
> private call state of the private call managed by the controlling MCVideo
> function. Ideally, the MCVideo client would not need to track the in-
> progress emergency private priority state, but doing so enables the MCVideo
> client to request MCVideo emergency-level priority earlier than otherwise
> possible. For example, if the MCVideo user wishes to join an MCVideo
> emergency private call and is not in the MCVideo emergency state, the
> MCVideo client should have emergency level priority. If it has knowledge of
> the in-progress emergency private priority state of the private call (i.e.,
> the two participants), it can request priority by including a Resource-
> Priority header field set to the MCVideo namespace specified in IETF RFC
> 8101 [38], and appropriate priority level in the SIP INVITE request (or SIP
> re-INVITE request).
>
> NOTE: The above states and their transitions are described in Annex G.
##### 6.2.7.3 Test description {#test-description-31 .H6}
##### 6.2.7.3.1 Pre-test conditions {#pre-test-conditions-31 .H6}
##### System Simulator: {#system-simulator-24 .H6}
\- SS (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
##### IUT: {#iut-23 .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
##### Preamble: {#preamble-24 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- UE States at the end of the preamble
\- The UE is in E-UTRA Registered, Idle Mode state.
\- The MCVideo Client Application has been activated and User has registered-
in as the MCVideo User with the Server as active user at the Client.
##### 6.2.7.3.2 Test procedure sequence {#test-procedure-sequence-31 .H6}
Table 6.2.7.3.2-1: Main Behaviour
+------------+------------+------------+---------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +============+============+============+=========+=========+====+ | | | U - S | Message | | | +------------+------------+------------+---------+---------+----+ | 1 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | the | | | | | | | est | | | | | | | ablishment | | | | | | | of a | | | | | | | private | | | | | | | call to | | | | | | | user B | | | | | | | with | | | | | | | manual | | | | | | | co | | | | | | | mmencement | | | | | | | mode and | | | | | | | without | | | | | | | tr | | | | | | | ansmission | | | | | | | control. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 2 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CO | | | | | | | private | | | | | | | call | | | | | | | est | | | | | | | ablishment | | | | | | | with | | | | | | | manual | | | | | | | comm | | | | | | | encement\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579.1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3.35.3-1 | | | | | | | to | | | | | | | establish | | | | | | | a private | | | | | | | call | | | | | | | without | | | | | | | tr | | | | | | | ansmission | | | | | | | control? | | | | | +------------+------------+------------+---------+---------+----+ | 3-5 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 6 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | notify the | | | | | | | user that | | | | | | | the call | | | | | | | has been | | | | | | | es | | | | | | | tablished? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 7 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | release | | | | | | | the call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 8 | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CO | | | | | | | call | | | | | | | release\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 9-10 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | NOTE 1: | | | | | | | This | | | | | | | action is | | | | | | | expected | | | | | | | to be done | | | | | | | via a | | | | | | | suitable | | | | | | | impl | | | | | | | ementation | | | | | | | dependent | | | | | | | MMI. | | | | | | +------------+------------+------------+---------+---------+----+
##### 6.2.7.3.3 Specific message contents {#specific-message-contents-31 .H6}
Table 6.2.7.3.3-1: SIP INVITE from the UE (Step 2, Table 6.2.7.3.2-1;\ Step 2,
TS 36.579-1 [2] Table 5.3B.1.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.1-1, condition PRIVATE-CALL,
MANUAL
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP message**  
MIME-part-body SDP message as described in Table 6.2.7.3.3-1A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.2.7.3.3-2
Table 6.2.7.3.3-1A: SDP Message in SIP INVITE (Table 6.2.7.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.1-2, condition PRIVATE-CALL,
INITIAL_SDP_OFFER, WITHOUT_TRANSMISSIONCONTROL
* * *
Table 6.2.7.3.3-2: MCVideo-Info in SIP INVITE (Table 6.2.7.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition PRIVATE-CALL,
INVITE_REFER
* * *
Table 6.2.7.3.3-3: SIP 200 (OK) from the SS (Step 4, Table 6.2.7.3.2-1;\ Step
4, TS 36.579-1 [2] Table 5.3B.1.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.17.1.2-1, condition INVITE-RSP
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
SDP Message As described in Table 6.2.7.3.3-3A
Table 6.2.7.3.3-3A: SDP Message in SIP 200 (OK) (Table 6.2.7.3.3-3)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition SDP_ANSWER,
WITHOUT_TRANSMISSIONCONTROL
* * *
Table 6.2.7.3.3-4..5: Void
6.2.8 On-network / Private Call / On-demand / Manual Commencement Mode /
Without Transmission Control / Client Terminated (CT)
##### 6.2.8.1 Test Purpose (TP) {#test-purpose-tp-32 .H6}
##### (1) {#section-140 .H6}
**with** { UE (MCVideo Client) registered and authorised for MCVideo Service
including authorisation to receive a MCVideo private call }
ensure that {
**when** { the UE (MCVideo Client) receives a request for establishment of an
MCVideo private call, On-demand Manual Commencement Mode without Transmission
Control }
**then** { UE (MCVideo Client) notifies the User for the incoming call
responding to the Server with a SIP 180 (Ringing) message, **and** , after the
User accepts the call sends to the Server a SIP 200 (OK) message **and** does
not apply Transmission Control }
}
##### (2) {#section-141 .H6}
**with** { UE (MCVideo Client) having an ongoing On-demand Pre-arranged
Private Call with Manual Commencement Mode }
ensure that {
**when** { the MCVideo User needs to terminate the ongoing MCVideo Private
Call }
**then** { the UE (MCVideo Client) sends a SIP BYE request and the SS (MCVideo
Server) responds with a SIP 200 (OK) and ends the MCVideo session }
}
##### 6.2.8.2 Conformance requirements {#conformance-requirements-32 .H6}
References: The conformance requirements covered in the present TC are
specified in: TS 24.281, clauses 10.2.2.2.2, 10.2.2.3.1.1, 6.2.3.2.1, and
4.6.2. The following represents a copy/paste extraction of the requirements
relevant to the test purpose; any references within the copy/paste text should
be understood within the scope of the core spec they have been copied from.
Unless otherwise stated these are Rel-14 requirements.
[TS 24.281, clause 10.2.2.2.2]
Upon receipt of an initial SIP INVITE request, the MCVideo client shall follow
the procedures for termination of multimedia sessions in the IM CN subsystem
as specified in 3GPP TS 24.229 [11] with the clarifications below.
The MCVideo client:
> 1) may reject the SIP INVITE request if any of the following conditions are
> met:
>
> a) MCVideo client is already occupied in another session and the number of
> simultaneous sessions exceeds \, the maximum simultaneous MCVideo
> session for private call, as specified in TS 24.484 [25];
>
> b) MCVideo client does not have enough resources to handle the call; or
>
> c) any other reason outside the scope of this specification;
>
> otherwise, continue with the rest of the steps.
>
> NOTE 1: If the SIP INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element set to a value of
> \"true\", the participating MCVideo function can choose to accept the
> request.
>
> 2) if the SIP INVITE request is rejected in step 1), shall respond toward
> participating MCVideo function either with appropriate reject code as
> specified in 3GPP TS 24.229 [11] and warning texts as specified in subclause
> 4.4.2 or with SIP 480 (Temporarily unavailable) response not including
> warning texts if the user is authorized to restrict the reason for failure
> according to \ as specified in 3GPP TS 24.484
> [25] and skip the rest of the steps of this subclause;
>
> 3) if the SIP INVITE request contains an application/vnd.3gpp.mcvideo-
> info+xml MIME body with the \ element containing the \ Params> element with the \ element set to a value of
> \"true\":
>
> a) should display to the MCVideo user an indication that this is a SIP
> INVITE request for an MCVideo emergency private call and:
>
> i) should display the MCVideo ID of the originator of the MCVideo emergency
> private call contained in the \ element of the
> application/vnd.3gpp.mcvideo-info+xml MIME body; and
>
> ii) if the \ element is set to \"true\", should display to the
> MCVideo user an indication of the MCVideo emergency alert and associated
> information; and
>
> b) shall set the MCVideo emergency private priority state to \"MVEPP 2: in-
> progress\" for this private call;
>
> 4) if the SDP offer of the SIP INVITE request contains an \"a=key-mgmt\"
> attribute field with a \"mikey\" attribute value containing a MIKEY-SAKKE
> I_MESSAGE:
>
> a) shall extract the MCVideo ID of the originating MCVideo client from the
> initiator field (IDRi) of the I_MESSAGE as described in 3GPP TS 33.180 [8];
>
> b) shall convert the MCVideo ID to a UID as described in 3GPP TS 33.180 [8];
>
> c) shall use the UID to validate the signature of the MIKEY-SAKKE I_MESSAGE
> as described in 3GPP TS 33.180 [8];
>
> d) if authentication verification of the MIKEY-SAKKE I_MESSAGE fails, shall
> reject the SIP INVITE request with a SIP 488 (Not Acceptable Here) response
> as specified in IETF RFC 4567 [34], and include warning text set to \"136
> authentication of the MIKEY-SAKE I_MESSAGE failed\" in a Warning header
> field as specified in subclause 4.4; and
>
> e) if the signature of the MIKEY-SAKKE I_MESSAGE was successfully validated:
>
> i) shall extract and decrypt the encapsulated PCK using the terminating
> user\'s (KMS provisioned) UID key as described in 3GPP TS 33.180 [8]; and
>
> ii) shall extract the PCK-ID, from the payload as specified in 3GPP TS
> 33.180 [8];
>
> NOTE 2: With the PCK successfully shared between the originating MCVideo
> client and the terminating MCVideo client, both clients are able to use
> SRTP/SRTCP to create an end-to-end secure session.
>
> 5) may check if a Resource-Priority header field is included in the incoming
> SIP INVITE request and may perform further actions outside the scope of this
> specification to act upon an included Resource-Priority header field as
> specified in 3GPP TS 24.229 [11];
>
> 6) may display to the MCVideo user the MCVideo ID of the inviting MCVideo
> user;
>
> 7) shall perform the automatic commencement procedures specified in
> subclause 6.2.3.1.1 if one of the following conditions are met:
>
> a) SIP INVITE request contains an Answer-Mode header field with the value
> \"Auto\" and the MCVideo service setting at the invited MCVideo client for
> answering the call is set to automatic commencement mode;
>
> b) SIP INVITE request contains an Answer-Mode header field with the value
> \"Auto\" and the MCVideo service setting at the invited MCVideo client for
> answering the call is set to manual commencement mode, yet the invited
> MCVideo client is willing to answer the call with automatic commencement
> mode; or
>
> c) SIP INVITE request contains a Priv-Answer-Mode header field with the
> value of \"Auto\"; and
>
> 8) shall perform the manual commencement procedures specified in subclause
> 6.2.3.2.1 if either of the following conditions are met:
>
> a) SIP INVITE request contains an Answer-Mode header field with the value
> \"Manual\" and the MCVideo service setting at the invited MCVideo client for
> answering the call is set to manual commencement mode;
>
> b) SIP INVITE request contains an Answer-Mode header field with the value
> \"Manual\" and the MCVideo service setting at the invited MCVideo client for
> answering the call is set to automatic commencement mode, yet the invited
> MCVideo client allows the call to be answered with manual commencement mode;
> or
>
> c) SIP INVITE request contains a Priv-Answer-Mode header field with the
> value of \"Manual\".
Upon receiving the SIP CANCEL request cancelling a SIP INVITE request for
which a dialog exists at the MCVideo client and a SIP 200 (OK) response has
not yet been sent to the SIP INVITE request then the MCVideo client:
> 1) shall send a SIP 200 (OK) response to the SIP CANCEL request according to
> 3GPP TS 24.229 [11]; and
>
> 2) shall send a SIP 487 (Request Terminated) response to the SIP INVITE
> request according to 3GPP TS 24.229 [11].
Upon receiving a SIP BYE request for an established dialog, the MCVideo
client:
> 1) shall follow the procedures in subclause 10.2.5.2.
[TS 24.281, clause 10.2.2.3.1.1]
Upon receipt of a \"SIP INVITE request for originating participating MCVideo
function\" containing an application/vnd.3gpp.mcvideo-info+xml MIME body with
the \ element set to a value of \"private\", the participating
MCVideo function:
> 1) may reject the SIP INVITE request depending on the value of the Resource-
> Priority header field if the Resource-Priority header field is included in
> the received SIP INVITE request according to rules and procedures specified
> in IETF RFC 4412 [33] and shall not continue with the rest of the steps;
>
> 2) if unable to process the request due to a lack of resources or a risk of
> congestion exists, may reject the \"SIP INVITE request for originating
> participating MCVideo function\" with a SIP 500 (Server Internal Error)
> response. The participating MCVideo function may include a Retry-After
> header field to the SIP 500 (Server Internal Error) response as specified in
> IETF RFC 3261 [15] and shall not continue with the rest of the steps;
>
> NOTE 1: If the received SIP INVITE request contains an emergency indication
> set to a value of \"true\", the participating MCVideo function can choose to
> accept the request.
>
> NOTE 2: If the received SIP INVITE request contains an emergency indication
> set to a value of \"true\", the participating MCVideo function can choose to
> allow an exception to the limit on the number of private calls and accept
> the request.
>
> 3) shall determine the MCVideo ID of the calling user from public user
> identity in the P-Asserted-Identity header field of the SIP INVITE request
> and shall authorise the user;
>
> NOTE 3: The MCVideo ID of the calling user is bound to the public user
> identity at the time of service authorisation, as documented in subclause
> 7.3.
>
> 4) if the participating MCVideo function cannot find a binding between the
> public user identity and an MCVideo ID or if the validity period of an
> existing binding has expired, then the participating MCVideo function shall
> reject the SIP INVITE request with a SIP 404 (Not Found) response with the
> warning text set to \"141 user unknown to the participating function\" in a
> Warning header field as specified in subclause 4.4, and shall not continue
> with any of the remaining steps;
>
> 5) shall:
>
> a) if the \ is set to \"private\", determine that the call is
> a private call;
>
> 6) if the call is a:
>
> a) private call, determine the public service identity of the controlling
> MCVideo function for the private call service associated with the
> originating user\'s MCVideo ID identity;
>
> 7) if the participating MCVideo function is unable to identify the
> controlling MCVideo function for the private call service, it shall reject
> the SIP INVITE request with a SIP 404 (Not Found) response with the warning
> text \"142 unable to determine the controlling function\" in a Warning
> header field as specified in subclause 4.4, and shall not continue with any
> of the remaining steps;
>
> 8) if the incoming SIP INVITE request does not contain an
> application/resource-lists MIME body, shall reject the \"SIP INVITE request
> for originating participating MCVideo function\" with a SIP 403 (Forbidden)
> response including warning text set to \"145 unable to determine called
> party\" in a Warning header field as specified in subclause 4.4, and shall
> not continue with the rest of the steps;
>
> 9) if the call is a private call and the incoming SIP INVITE request
> contains an application/resource-lists MIME body with more than one \
> element, shall reject the \"SIP INVITE request for originating participating
> MCVideo function\" with a SIP 403 (Forbidden) response including warning
> text set to \"145 unable to determine called party\" in a Warning header
> field as specified in subclause 4.4, and shall not continue with the rest of
> the steps;
>
> 10) if the \ element of the \ element is not
> present in the MCVideo user profile document on the participating MCVideo
> function or is present with the value \"false\" (see the MCVideo user
> profile document in 3GPP TS 24.484 [25]), indicating that the user
> identified by the MCVideo ID is not authorized to initiate private calls,
> shall reject the \"SIP INVITE request for originating participating MCVideo
> function\" with a SIP 403 (Forbidden) response, with warning text set to
> \"107 user not authorized to make private calls\" in a Warning header field
> as specified in subclause 4.4, and shall not continue with the rest of the
> steps;
>
> 11) if the call is a private call and:
>
> a) if the received SIP INVITE request includes an Answer-Mode header field
> as specified in IETF RFC 5373 [27] with the value \"Auto\" and the \ automatic-commencement> element of the \ element is not present in
> the MCVideo user profile document on the participating MCVideo function or
> is present with the value \"false\" (see the MCVideo user profile document
> in 3GPP TS 24.484 [25]) indicating that the user identified by the MCVideo
> ID is not authorized to initiate private call with automatic commencement,
> shall reject the \"SIP INVITE request for originating participating MCVideo
> function\" with a SIP 403 (Forbidden) response including warning text set to
> \"125 user not authorized to make private call with automatic commencement\"
> in a Warning header field as specified in subclause 4.4, and shall not
> continue with the rest of the steps;
>
> b) if the received SIP INVITE request includes an Answer-Mode header field
> as specified in IETF RFC 5373 [27] with the value \"Manual\" and the
> \ element of the \ element is not
> present in the MCVideo user profile document on the participating MCVideo
> function or is present with the value \"false\" (see the MCVideo user
> profile document in 3GPP TS 24.484 [25]), indicating that the user
> identified by the MCVideo ID is not authorized to initiate private call with
> manual commencement, shall reject the \"SIP INVITE request for originating
> participating MCVideo function\" with a SIP 403 (Forbidden) response
> including warning text set to \"126 user not authorized to make private call
> with manual commencement\" in a Warning header field as specified in
> subclause 4.4, and shall not continue with the rest of the steps;
>
> c) if the \ element exists in the MCVideo user profile document
> with one more \ elements (see the MCVideo user profile document in
> 3GPP TS 24.484 [25]) and:
>
> i) if the \"uri\" attribute of the \ element of the
> application/resource-lists MIME body does not match with one of the \
> elements of the \ element of the MCVideo user profile document
> (see the MCVideo user profile document in 3GPP TS 24.484 [25]); and
>
> ii) if configuration is not set in the MCVideo user profile document (see
> the MCVideo user profile document in 3GPP TS 24.484 [25]) that allows the
> MCVideo user to make a private call to users not contained within the
> \ elements of the \ element;
>
> then:
>
> i) shall reject the \"SIP INVITE request for originating participating
> MCVideo function\" with a SIP 403 (Forbidden) response including warning
> text set to \"144 user not authorized to call this particular user\" in a
> Warning header field as specified in subclause 4.4 and shall not continue
> with the rest of the steps;
>
> 12) shall validate the media parameters and if the MCVideo video media codec
> is not offered in the \"SIP INVITE request for originating participating
> MCVideo function\" shall reject the request with a SIP 488 (Not Acceptable
> Here) response. Otherwise, continue with the rest of the steps;
>
> 13) shall generate a SIP INVITE request as specified in subclause 6.3.2.1.3
> with the following clarifications:
>
> a) if the conditions in step 12) above were executed and the participating
> MCVideo function determined that the \"uri\" attribute of only one of the
> \ elements of the application/resource-lists MIME body matched with
> an \ element of the \ element of the MCVideo user
> profile document (see the MCVideo user profile document in 3GPP TS 24.484
> [25]) then the \ in the application/vnd.3gpp.mcvideo-info+xml
> MIME body of the SIP INVITE request generated in subclause 6.3.2.1.3 is set
> to \"private\"; and
>
> b) if the conditions in step 12) above were executed, then only the \
> element(s) of the application/resource-lists MIME body that have a \"uri\"
> attribute that matched with an \ elements of the \
> element of the MCVideo user profile document (see the MCVideo user profile
> document in 3GPP TS 24.484 [25]) are included in the application/resource-
> lists MIME body in the SIP INVITE request generated in subclause 6.3.2.1.3;
>
> 14) shall set the Request-URI to the public service identity of the
> controlling MCVideo function hosting the private call service as determined
> by step 6);
>
> 15) shall set the \ element in an
> application/vnd.3gpp.mcvideo-info+xml MIME body of the SIP INVITE request to
> the MCVideo ID of the calling user;
>
> 16) if the call is a private call and:
>
> a) if a Priv-Answer-Mode header field specified in IETF RFC 5373 [27] was
> received in the incoming SIP INVITE request with a value of \"Manual\",
> shall not include a Priv-Answer-Mode header field in the outgoing SIP INVITE
> request;
>
> b) if the \ element of the \ element is
> not present in the MCVideo user profile document on the participating
> MCVideo function or is present with the value \"false\" (see the MCVideo
> user profile document in 3GPP TS 24.484 [25]), and the Priv-Answer-Mode
> header field specified in IETF RFC 5373 [27] was received in the incoming
> SIP INVITE request with a value of \"Auto\", shall reject the \"SIP INVITE
> request for originating participating MCVideo function\" with a SIP 403
> (Forbidden) response including warning text set to \"143 not authorized to
> force auto answer\" in a Warning header field as specified in subclause 4.4,
> and shall not continue with the rest of the steps;
>
> c) if the \ element of the \ element is
> present in the MCVideo user profile document with the value \"true\" (see
> the MCVideo user profile document in 3GPP TS 24.484 [25]) on the
> participating MCVideo function, and the Priv-Answer-Mode header field
> specified in IETF RFC 5373 [27] was received in the incoming SIP INVITE
> request with a value of \"Auto\", shall include the Priv-Answer-Mode header
> field set to a value of \"Auto\" in the outgoing SIP INVITE request;
>
> d) if a Priv-Answer-Mode header field containing the value of \"Auto\" has
> not been included in the outgoing SIP INVITE request as specified in step
> 17) above and the incoming \"SIP INVITE request for originating
> participating MCVideo function\" contained an Answer-Mode header field as
> specified in IETF RFC 5373 [27], then shall populate the Answer-Mode header
> field of the outgoing SIP INVITE request with the contents of the Answer-
> Mode header field from the incoming \"SIP INVITE request for originating
> participating MCVideo function\";
>
> 17) shall include in the SIP INVITE request an SDP offer based on the SDP
> offer in the received \"SIP INVITE request for originating participating
> MCVideo function\", as specified in subclause 6.3.2.1.1.1;
>
> 18) shall include a Resource-Priority header field according to rules and
> procedures of 3GPP TS 24.229 [11] set to the value indicated in the
> Resource-Priority header field if included in the SIP INVITE request from
> the MCVideo client; and
>
> 19) shall forward the SIP INVITE request, according to 3GPP TS 24.229 [11].
Upon receiving a SIP 180 (Ringing) response, the participating MCVideo
function:
> 1) shall generate a SIP 180 (Ringing) response to the SIP INVITE request as
> specified in the subclause 6.3.2.1.5.1;
>
> 2) shall include the P-Asserted-Identity header field as received in the
> incoming SIP 180 (Ringing) response;
>
> 3) shall include Warning header field(s) received in the incoming SIP 180
> (Ringing) response; and
>
> 4) shall forward the SIP 180 (Ringing) response to the MCVideo client
> according to 3GPP TS 24.229 [11].
Upon receiving a SIP 200 (OK) response, the participating MCVideo function:
> 1) shall generate a SIP 200 (OK) response as specified in the subclause
> 6.3.2.1.5.2;
>
> 2) shall include in the SIP 200 (OK) response an SDP answer as specified in
> the subclause 6.3.2.1.2.1;
>
> 3) shall include Warning header field(s) received in the incoming SIP 200
> (OK) response;
>
> 4) shall include the P-Asserted-Identity header field received in the
> incoming SIP 200 (OK) response into the outgoing SIP 200 (OK) response;
>
> 5) shall include an MCVideo session identity mapped to the MCVideo session
> identity provided in the Contact header field of the received SIP 200 (OK)
> response;
>
> 6) shall send the SIP 200 (OK) response to the MCVideo client according to
> 3GPP TS 24.229 [11];
>
> 7) shall interact with the media plane as specified in 3GPP TS 24.581 [5];
> and
>
> 8) shall start the SIP session timer according to rules and procedures of
> IETF RFC 4028 [23].
The participating MCVideo function shall forward any other SIP response that
does not contain SDP, including any MIME bodies contained therein, along the
signalling path to the originating network according to 3GPP TS 24.229 [11].
[TS 24.281, clause 6.2.3.2.1]
When performing the manual commencement mode procedures:
> 1) if the MCVideo user declines the MCVideo session invitation the MCVideo
> client shall send a SIP 480 (Temporarily Unavailable) response towards the
> MCVideo server with the warning text set to: \"110 user declined the call
> invitation\" in a Warning header field as specified in subclause 4.4, and
> not continue with the rest of the steps in this subclause.
The MCVideo client:
> 1) shall accept the SIP INVITE request and generate a SIP 180 (Ringing)
> response according to rules and procedures of 3GPP TS 24.229 [11];
>
> 2) shall include the option tag \"timer\" in a Require header field of the
> SIP 180 (Ringing) response;
>
> 3) shall include the g.3gpp.mcvideo media feature tag in the Contact header
> field of the SIP 180 (Ringing) response;
>
> 4) shall include the g.3gpp.icsi-ref media feature tag containing the value
> of \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\" in the Contact header field
> of the SIP 180 (Ringing) response; and
>
> 5) shall send the SIP 180 (Ringing) response to the MCVideo server.
When sending the SIP 200 (OK) response to the incoming SIP INVITE request, the
MCVideo client shall follow the procedures in subclause 6.2.3.1.1.
When NAT traversal is supported by the MCVideo client and when the MCVideo
client is behind a NAT, generation of SIP responses is done as specified in
this subclause and as specified in IETF RFC 5626 [35].
[TS 24.281, clause 4.6.2]
MCVideo emergency private calls as defined by 3GPP TS 23.281 [26] are
supported by the procedures in this specification. The following MCVideo
emergency private call functionalities are specified in the present document:
> \- MCVideo emergency private call origination with optional MCVideo
> emergency alert initiation;
>
> \- upgrade of an MCVideo private call to an MCVideo emergency private; and
>
> \- cancellation of the MCVideo emergency private call priority.
Key aspects of MCVideo emergency private calls include:
> \- adjusted EPS bearer priority for both participants whether or not they
> are both in an emergency condition (i.e. both have their MCVideo emergency
> state set). This is achieved by using the Resource-Priority header field as
> specified in IETF RFC 4412 [33] with namespaces defined for use by MCVideo
> specified in IETF RFC 8101 [43];
>
> \- the initiator of the MCVideo emergency private call can override the
> other MCVideo user in the MCVideo emergency private call unless that user
> also has their MCVideo emergency state set;
>
> \- restoration of normal EPS bearer priority to the call according to system
> policy (e.g., configured time limit for the emergency priority of an MCVideo
> emergency private call or cancellation of the emergency condition of the
> private call);
>
> \- restoration of normal transmission control priority participants when the
> emergency elevated priority is cancelled;
>
> \- requires the MCVideo user to be authorized to either originate or cancel
> an MCVideo emergency private call;
>
> \- requires the targeted MCVideo user to be authorized to receive an MCVideo
> emergency private call;
>
> \- requests to originate MCVideo emergency private calls may also include an
> indication of an MCVideo emergency alert; and
>
> \- the originator of the MCVideo emergency private call can request that the
> call use either manual or automatic commencement mode.
There are a number of states that are key in managing these aspects of MCVideo
emergency private calls, which include:
> \- **MCVideo emergency state (MVES):** as defined in 3GPP TS 22.281 [36] and
> 3GPP TS 23.281 [26], indicates that the MCVideo user is in a life-
> threatening situation. Managed by the MCVideo user of the device or an
> authorized MCVideo user. While the MCVideo emergency state is set on the
> client, all MCVideo group and private calls originated by the client will be
> MCVideo emergency calls, assuming the MCVideo user is authorized for MCVideo
> emergency calls on them.
>
> \- **MCVideo private emergency alert (MVPEA) state** : this is an internal
> state of the MCVideo client which in conjunction with the MCVideo emergency
> private call state aids in managing the MCVideo emergency state and related
> actions.
>
> \- **MCVideo emergency private call (MVEPC) state** : this is an internal
> state managed by the MCVideo client which in conjunction with the MCVideo
> emergency alert state aids in managing the MCVideo emergency state and
> related actions.
>
> \- **In-progress emergency private call (IPEPC) state:** indicates whether
> or not there is an MCVideo emergency private call in-progress for the two
> participants. This state is managed by the controlling MCVideo function. All
> private calls originated between these two participants when in an in-
> progress emergency private call state are MCVideo emergency private calls
> until this state is cancelled, whether or not the originator is in an
> MCVideo emergency state.
>
> \- **MCVideo emergency private priority (MVEPP) state:** this is an internal
> state managed by the MCVideo client which tracks the in-progress emergency
> private call state of the private call managed by the controlling MCVideo
> function. Ideally, the MCVideo client would not need to track the in-
> progress emergency private priority state, but doing so enables the MCVideo
> client to request MCVideo emergency-level priority earlier than otherwise
> possible. For example, if the MCVideo user wishes to join an MCVideo
> emergency private call and is not in the MCVideo emergency state, the
> MCVideo client should have emergency level priority. If it has knowledge of
> the in-progress emergency private priority state of the private call (i.e.,
> the two participants), it can request priority by including a Resource-
> Priority header field set to the MCVideo namespace specified in IETF RFC
> 8101 [38], and appropriate priority level in the SIP INVITE request (or SIP
> re-INVITE request).
>
> NOTE: The above states and their transitions are described in Annex G.
##### 6.2.8.3 Test description {#test-description-32 .H6}
##### 6.2.8.3.1 Pre-test conditions {#pre-test-conditions-32 .H6}
##### System Simulator: {#system-simulator-25 .H6}
\- SS (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
##### IUT: {#iut-24 .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
##### Preamble: {#preamble-25 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- UE States at the end of the preamble
\- The UE is in E-UTRA Registered, Idle Mode state.
\- The MCVideo Client Application has been activated and User has registered-
in as the MCVideo User with the Server as active user at the Client.
##### 6.2.8.3.2 Test procedure sequence {#test-procedure-sequence-32 .H6}
Table 6.2.8.3.2-1: Main Behaviour
+------------+------------+------------+---------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +============+============+============+=========+=========+====+ | | | U - S | Message | | | +------------+------------+------------+---------+---------+----+ | 1 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CT | | | | | | | private | | | | | | | call | | | | | | | est | | | | | | | ablishment | | | | | | | with | | | | | | | manual | | | | | | | comm | | | | | | | encement\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3.6.3-1 | | | | | | | to | | | | | | | establish | | | | | | | a private | | | | | | | call | | | | | | | without | | | | | | | tr | | | | | | | ansmission | | | | | | | control? | | | | | +------------+------------+------------+---------+---------+----+ | 2-6 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 7 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | release | | | | | | | the call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 8 | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CO | | | | | | | call | | | | | | | release\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 9-10 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | NOTE 1: | | | | | | | This is | | | | | | | expected | | | | | | | to be done | | | | | | | via a | | | | | | | suitable | | | | | | | impl | | | | | | | ementation | | | | | | | dependent | | | | | | | MMI. | | | | | | +------------+------------+------------+---------+---------+----+
##### 6.2.8.3.3 Specific message contents {#specific-message-contents-32 .H6}
Table 6.2.8.3.3-1: SIP INVITE from the SS (Step 1, Table 6.2.8.3.2-1;\ Step 2,
TS 36.579-1 [2] Table 5.3.6.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.2-1, condition MANUAL
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP message**  
MIME-part-body SDP message as described in Table 6.2.8.3.3-1A  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.2.8.3.3-2
Table 6.2.8.3.3-1A: SDP Message in SIP INVITE (Table 6.2.8.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition PRIVATE-CALL,
INITIAL_SDP_OFFER, WITHOUT_TRANSMISSIONCONTROL
* * *
Table 6.2.8.3.3-2: MCVideo-Info in SIP INVITE (Table 6.2.8.3.3-1)Void
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.2-2, condition PRIVATE-CALL
* * *
Table 6.2.8.3.3-3..3B: Void
**Table 6.2.8.3.3-4: SIP 200 (OK) from the UE (Step 5, Table 6.2.8.3.2-1;\
Step 6, TS 36.579-1 [2] Table 5.3.6.3-1)**
Derivation Path: TS 36.579-1 [2], Table 5.5.2.17.1.1-1, condition INVITE-RSP
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
SDP Message As described in Table 6.2.8.3.3-4A
Table 6.2.8.3.3-4A: SDP Message in SIP 200 (OK) (Table 6.2.8.3.3-4)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.1-2, condition PRIVATE-CALL,
SDP_ANSWER, WITHOUT_TRANSMISSIONCONTROL
* * *
Table 6.2.8.3.3-5: SIP BYE from the UE (Step 8, Table 6.2.8.3.2-1;\ Step 1, TS
36.579-1 [2] Table 5.3.10.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.2.2.1-1, condition MT_CALL
* * *
Table 6.2.8.3.3-5A..6: Void
## 6.3 Emergency Alert
### 6.3.1 On-network / Emergency alert / Cancel emergency alert / Client
Originated (CO)
##### 6.3.1.1 Test Purpose (TP) {#test-purpose-tp-33 .H6}
##### (1) {#section-142 .H6}
**with** { UE (MCVideo Client) registered and authorized for MCVideo Service,
including authorized to initiate an emergency alert }
**ensure that** {\ **when** { the MCVideo User requests to send an emergency
alert with the location of emergency }
**then** { UE (MCVideo Client) sends a SIP MESSAGE initiating an emergency
alert **and** reporting location information }
}
##### (2) {#section-143 .H6}
**with** { UE (MCVideo Client) in the "MVEA 3: emergency-alert-initiated"
state}
**ensure that** {
**when** { the MCVideo User requests to cancel the emergency alert}
**then** { UE (MCVideo Client) sends a SIP MESSAGE requesting the cancelation
of the emergency alert}
}
##### 6.3.1.2 Conformance requirements {#conformance-requirements-33 .H6}
References: The conformance requirements covered in the current TC are
specified in: TS 24.281, clauses 11.2.1.1, 11.2.1.2. The following represents
a copy/paste extraction of the requirements relevant to the test purpose; any
references within the copy/paste text should be understood within the scope of
the core spec they have been copied from. Unless otherwise stated, these are
Rel-15 requirements.
[TS 24.281 clause 11.2.1.1]
Upon receiving a request from the MCVideo user to send an MCVideo emergency
alert to the indicated MCVideo group and this is an authorised request for an
MCVideo emergency alert as determined by clause 6.2.8.1.6, the MCVideo client
shall generate a SIP MESSAGE request in accordance with 3GPP TS 24.229 [11]
and IETF RFC 3428 [33] with the clarifications given below.
NOTE 1: this SIP MESSAGE request is assumed to be sent out-of-dialog.
The MCVideo client:
1) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
(coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
field according to IETF RFC 6050 [9] in the SIP MESSAGE request;
2) shall include an Accept-Contact header field with the g.3gpp.icsi-ref media
feature tag containing the value of \"urn:urn-7:3gpp-
service.ims.icsi.mcvideo\" along with the \"require\" and \"explicit\" header
field parameters according to IETF RFC 3841 [6];
3) may include a P-Preferred-Identity header field in the SIP MESSAGE request
containing a public user identity as specified in 3GPP TS 24.229 [11];
4) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body as
specified in clause F.1 with the \ element containing the
\ element with:
a) the \ element set to the group identity;
b) the \ element set to a value of \"true\"; and
c) the \ element set to the MCVideo client ID of the
originating MCVideo client;
5) shall include an application/vnd.3gpp.mcvideo-location-info+xml MIME body
as specified in Annex F.3 with a \ element included in the \ root element;
6) shall include in the \ element the specific location information
configured for the MCVideo emergency alert location trigger;
7) shall set the MCVideo emergency state if not already set;
8) shall set the MCVideo emergency alert state to \"MVEA 2: emergency-alert-
confirm-pending\";
9) shall set the Request-URI to the public service identity identifying the
participating MCVideo function serving the group identity; and
10) shall send the SIP MESSAGE request according to rules and procedures of
3GPP TS 24.229 [11].
On receiving a SIP 2xx response to the SIP MESSAGE request, the MCVideo client
shall set the MCVideo emergency alert state to \"MVEA 3: emergency-alert-
initiated\".
On receiving a SIP 4xx response a SIP 5xx response or a SIP 6xx response to
the SIP MESSAGE request, the MCVideo client shall set the MCVideo emergency
alert state to \"MVEA 1: no-alert\".
NOTE 2: the MCVideo emergency state is left set in this case as the MCVideo
user presumably is in the best position to determine whether or not they are
in a life-threatening condition. The assumption is that the MCVideo user can
clear the MCVideo emergency state manually if need be.
[TS 24.281 clause 11.2.1.2]
Upon receiving a request from the MCVideo user to send an MCVideo emergency
alert cancellation to the indicated MCVideo group and this is an authorised
request for an MCVideo emergency alert cancellation as determined by clause
6.2.8.1.6, the MCVideo client shall generate a SIP MESSAGE request in
accordance with 3GPP TS 24.229 [11] and IETF RFC 3428 [33] with the
clarifications given below.
NOTE 1: This SIP MESSAGE request is assumed to be sent out-of-dialog.
The MCVideo client:
1) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
(coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
field according to IETF RFC 6050 [9] in the SIP MESSAGE request;
2) shall include an Accept-Contact header field with the g.3gpp.icsi-ref media
feature tag containing the value of \"urn:urn-7:3gpp-
service.ims.icsi.mcvideo\" along with the \"require\" and \"explicit\" header
field parameters according to IETF RFC 3841 [6];
3) may include a P-Preferred-Identity header field in the SIP MESSAGE request
containing the public user identity of the originator as specified in 3GPP TS
24.229 [11];
4) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body as
specified in clause F.1 with the \ element containing the
\ element with:
a) the \ element set to the MCVideo group identity;
b) the \ element set to a value of \"false\"; and
c) if the MCVideo user is cancelling an MCVideo emergency alert originated by
another MCVideo user, include the \ element set to the MCVideo
ID of the MCVideo user who originated the MCVideo emergency alert;
5) if the MCVideo user has additionally requested the cancellation of the in-
progress emergency state of the MCVideo group and this is an authorised
request for an in-progress emergency group state cancellation as determined by
clause 6.2.8.1.7, shall include an \ element set to a value of
\"false\" in the \ element containing the \
element;
6) shall set the Request-URI to the public service identity identifying the
participating MCVideo function serving the group identity;
7) if the generated SIP MESSAGE request does not contain an \
element in the application/vnd.3gpp.mcvideo-info+xml MIME body, shall set the
MCVideo emergency alert state to \"MVEA 4: Emergency-alert-cancel-pending\";
and
8) shall send the SIP MESSAGE request according to rules and procedures of
3GPP TS 24.229 [11].
On receipt of a SIP MESSAGE request containing an
application/vnd.3gpp.mcvideo-info+xml MIME body with an \
element set to true and an \ matching the MCVideo client ID
included in the sent SIP MESSAGE request:
1) if the \ element is set to a value of \"false\" in the
application/vnd.3gpp.mcvideo-info+xml MIME body of the received SIP MESSAGE
request and the sent SIP MESSAGE request did not contain an \
element in the application/vnd.3gpp.mcvideo-info+xml MIME body, shall:
a) set the MCVideo emergency alert state to \"MVEA 1: no-alert\"; and
b) clear the MCVideo emergency state if not already cleared;
2) if the \ element in the application/vnd.3gpp.mcvideo-info+xml
MIME body of the received SIP MESSAGE request is set to a value of \"true\"
and if the MCVideo emergency alert state is set to \"MVEA 4: Emergency-alert-
cancel-pending\" and the sent SIP MESSAGE request did not contain an
\ element in the application/vnd.3gpp.mcvideo-info+xml MIME
body, shall set the MCVideo emergency alert state to \"MVEA 3: emergency-
alert-initiated\"; and
NOTE 2: It would appear to be an unusual situation for the initiator of an
MCVideo emergency alert to not be able to clear their own alert. Nevertheless,
an MCVideo user can be configured to be authorised to initiate MCVideo
emergency alerts but not have the authority to clear them. Hence, the case is
covered here.
3) if an \ element is present in the
application/vnd.3gpp.mcvideo-info+xml MIME body of received SIP MESSAGE
request and is set to a value of \"false\":
a) shall set the MCVideo emergency group call state of the group to \"MVEGC 1:
emergency-gc-capable\"; and
b) shall set the MCVideo emergency group state of the group to \"MVEG 1: no-
emergency\".
NOTE 3: The case where an \ element is set to true is possible
but not handled specifically above as it results in no state changes.
On receiving a SIP 4xx response, SIP 5xx response or SIP 6xx response to the
sent SIP MESSAGE request:
1) if the received SIP 4xx response, SIP 5xx response or SIP 6xx response
contains an application/vnd.3gpp.mcvideo-info+xml MIME body as specified in
clause F.1 with the \ element containing the \
element with the \ element set to a value of \"true\", the sent SIP
MESSAGE request did not contain an \ element in the
application/vnd.3gpp.mcvideo-info+xml MIME body and the MCVideo emergency
alert state is set to \"MVEA 4: Emergency-alert-cancel-pending\", shall set
the MCVideo emergency alert state to \"MVEA 3: emergency-alert-initiated\";
and
NOTE 4: In this case, an \ element would either not be present
or would be set to true. In either case, no change in state would result.
Hence, this case is not specified above.
2) if the received SIP 4xx response, SIP 5xx response or a SIP 6xx response to
the SIP MESSAGE request does not contain an application/vnd.3gpp.mcvideo-
info+xml MIME body with an \ element, the sent SIP MESSAGE request
does not contain an \ element in the
application/vnd.3gpp.mcvideo-info+xml MIME body and the MCVideo emergency
alert state is set to \"MVEA 4: Emergency-alert-cancel-pending\", shall set
the MCVideo emergency alert state to \"MVEA 3: emergency-alert-initiated\".
##### 6.3.1.3 Test description {#test-description-33 .H6}
##### 6.3.1.3.1 Pre-test conditions {#pre-test-conditions-33 .H6}
##### System Simulator: {#system-simulator-26 .H6}
\- SS (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
##### IUT: {#iut-25 .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
##### Preamble: {#preamble-26 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- UE States at the end of the preamble
\- The UE is in E-UTRA Registered, Idle Mode state.
\- The MCVideo Client Application has been activated and User has registered-
in as the MCVideo User with the Server as active user at the Client.
##### 6.3.1.3.2 Test procedure sequence {#test-procedure-sequence-33 .H6}
Table 6.3.1.3.2-1: Main Behaviour
+------------+------------+------------+---------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +============+============+============+=========+=========+====+ | | | U - S | Message | | | +------------+------------+------------+---------+---------+----+ | 1 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | send an | | | | | | | emergency | | | | | | | alert. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 2 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX SIP | | | | | | | MESSAGE | | | | | | | Request - | | | | | | | Accept | | | | | | | CO\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3.30.3-1 | | | | | | | to request | | | | | | | an | | | | | | | emergency | | | | | | | alert | | | | | | | providing | | | | | | | location | | | | | | | in | | | | | | | formation? | | | | | +------------+------------+------------+---------+---------+----+ | 3 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | cancel the | | | | | | | emergency | | | | | | | alert. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 4 | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX SIP | | | | | | | MESSAGE | | | | | | | Request - | | | | | | | Accept | | | | | | | CO\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3.30.3-1 | | | | | | | to cancel | | | | | | | the | | | | | | | emergency | | | | | | | alert? | | | | | +------------+------------+------------+---------+---------+----+ | NOTE 1: | | | | | | | This is | | | | | | | expected | | | | | | | to be done | | | | | | | via a | | | | | | | suitable | | | | | | | impl | | | | | | | ementation | | | | | | | dependent | | | | | | | MMI. | | | | | | +------------+------------+------------+---------+---------+----+
##### 6.3.1.3.3 Specific message contents {#specific-message-contents-33 .H6}
Table 6.3.1.3.3-1: SIP MESSAGE from the UE(step 2, Table 6.3.1.3.2-1;\ step 2,
TS 36.579-1 [2] Table 5.3.30.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.7.1-1, condition LOCATION_REPORT
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.3.1.3.3-2  
MIME body part **Location-info**  
MIME-part-body Location-info as described in Table 6.3.1.3.3-2A
Table 6.3.1.3.3-2: MCVideo-Info in SIP MESSAGE (Table 6.3.1.3.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition GROUP-CALL
* * *
Information Element Value/remark Comment Reference Condition mcvideoinfo  
mcvideo-Params  
alert-ind Encrypted \ with mcvideoBoolean set to true Encryption
according to NOTE 2 in TS 36.579-1 [2] Table 5.5.3.2.1-2
Table 6.3.1.3.3-2A: Location-Info in SIP MESSAGE (Table 6.3.1.3.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.3.4.1-2
* * *
**Information Element** **Value/remark** **Comment** **Reference**
**Condition** location-info  
Report  
CurrentLocation  
CurrentCoordinate  
longitude Encrypted \ with any content Encryption according to NOTE
1 in TS 36.579-1 [2] Table 5.5.3.4.1-2  
latitude Encrypted \ with any content Encryption according to NOTE 1
in TS 36.579-1 [2] Table 5.5.3.4.1-2
Table 6.3.1.3.3-3: SIP MESSAGE from the SS (step 2, Table 6.3.1.3.2-1;\ step
4, TS 36.579-1 [2] Table 5.3.30.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.7.2-1, condition ACCEPT-CONTACT-
WITH-MEDIA-FEATURE-TAG
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.3.1.3.3-4
Table 6.3.1.3.3-4: MCVideo-Info in SIP MESSAGE (Table 6.3.1.3.3-4)
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.2-2
* * *
Information Element Value/remark Comment Reference Condition mcvideoinfo  
mcvideo-Params  
mcvideo-calling-user-id not present  
alert-ind Encrypted \ with mcvideoBoolean set to true Encryption
according to NOTE 1 in TS 36.579-1 [2] Table 5.5.3.2.2-2  
mcvideo-client-id Encrypted \ with mcvideoString set to the
client-id as received from the UE Encryption according to NOTE 1 in TS
36.579-1 [2] Table 5.5.3.2.2-2  
alert-ind-rcvd true
Table 6.3.1.3.3-5: SIP MESSAGE from the UE (step 4, Table 6.3.1.3.2-1;\ step
2, TS 36.579-1 [2] Table 5.3.30.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.7.1-1
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.3.1.3.3-6
Table 6.3.1.3.3-6: MCVideo-Info in SIP MESSAGE (Table 6.3.1.3.3-5)
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition GROUP-CALL
* * *
Information Element Value/remark Comment Reference Condition mcvideoinfo  
mcvideo-Params  
alert-ind Encrypted \ with mcvideoBoolean set to false Encryption
according to NOTE 2 in TS 36.579-1 [2] Table 5.5.3.2.1-2
Table 6.3.1.3.3-7: SIP MESSAGE from the SS (step 4, Table 6.3.1.3.2-1;\ step
4, TS 36.579-1 [2] Table 5.3.30.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.7.2-1, condition ACCEPT-CONTACT-
WITH-MEDIA-FEATURE-TAG
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.3.1.3.3-8
Table 6.3.1.3.3-8: MCVideo-Info in SIP MESSAGE (Table 6.3.1.3.3-7)
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.2-2
* * *
Information Element Value/remark Comment Reference Condition mcvideoinfo  
mcvideo-Params  
mcvideo-calling-user-id not present  
alert-ind Encrypted \ with mcvideoBoolean set to false Encryption
according to NOTE 1 in TS 36.579-1 [2] Table 5.5.3.2.2-2  
mcvideo-client-id Encrypted \ with mcvideoString set to the
client-id as received from the UE Encryption according to NOTE 1 in TS
36.579-1 [2] Table 5.5.3.2.2-2  
alert-ind-rcvd true
### 6.3.2 On-network / Emergency Alert / Emergency alert origination /
Emergency alert cancellation / Client Terminated (CT)
##### 6.3.2.1 Test Purpose (TP) {#test-purpose-tp-34 .H6}
##### (1) {#section-144 .H6}
**with** { UE (MCVideo Client) registered and authorized for MCVideo Service,
including authorized to initiate an emergency alert }
**ensure that** {\ **when** { UE (MCVideo Client) receives an emergency alert
via s SIP MESSAGE message with the \ element in the
application/vnd.3gpp.mcvideo-info+xml MIME body set to a value of either
\"true\" or \"false\" }
**then** { UE (MCVideo Client) responds by sending a SIP 200 (OK) message }
}
##### 6.3.2.2 Conformance requirements {#conformance-requirements-34 .H6}
References: The conformance requirements covered in the current TC are
specified in: TS 24.281, clauses 11.2.1.1, 11.2.1.3. The following represents
a copy/paste extraction of the requirements relevant to the test purpose; any
references within the copy/paste text should be understood within the scope of
the core spec they have been copied from. Unless otherwise stated, these are
Rel-15 requirements.
[TS 24.281 clause 11.2.1.3]
Upon receipt of a \"SIP MESSAGE request for emergency notification\", the
MCVideo client:
1) if the received SIP MESSAGE request contains an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \ element
set to a value of \"true\", should display to the MCVideo user an indication
of the MCVideo emergency alert and associated information, including:
a) the MCVideo group identity contained in \ element
application/vnd.3gpp.mcvideo-info+xml MIME body;
b) the originator of the MCVideo emergency alert contained in the \ element of the application/vnd.3gpp.mcvideo-info+xml MIME
body; and
c) the mission critical organization of the MCVideo emergency alert originator
contained in the \ element of the application/vnd.3gpp.mcvideo-
info+xml MIME body;
NOTE 1: This is the case of the MCVideo client receiving the notification of
another MCVideo user\'s emergency alert.
2) if the received SIP MESSAGE request contains an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \ element
set to a value of \"false\":
a) should display to the MCVideo user an indication of the MCVideo emergency
alert cancellation and associated information, including:
i) the MCVideo group identity contained in the \
element application/vnd.3gpp.mcvideo-info+xml MIME body;
ii) the originator of the MCVideo emergency alert contained in:
A) if present, the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body; or
B) the \ element of the application/vnd.3gpp.mcvideo-
info+xml MIME body; and
b) if the MCVideo ID contained in the \ element is the MCVideo
ID of the receiving MCVideo user, shall set the MCVideo emergency alert state
to \"MVEA 1: no-alert\"; and
c) if the received SIP MESSAGE request contains an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \
element is set to a value of \"false\":
i) shall set the MCVideo emergency group state to \"MVEG 1: no-emergency\";
and
ii) shall set the MCVideo emergency group call state to \"MVEGC 1: emergency-
gc-capable\";
NOTE 2: This is the case of the MCVideo client receiving the notification of
the cancellation by a third party of an MCVideo emergency alert. This can be
the MCVideo emergency alert of another MCVideo user or the MCVideo emergency
alert of the recipient, as determined by the contents of the \
element. Optionally, notification of the cancellation of the in-progress
emergency state of the MCVideo group can be included.
3) if the received SIP MESSAGE request contains an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \
element set to a value of \"true\":
a) should display to the MCVideo user an indication of the additional
emergency MCVideo user participating in the MCVideo emergency group call
including the following if not already displayed as part of step 1):
i) the MCVideo group identity contained in the \
element application/vnd.3gpp.mcvideo-info+xml MIME body; and
ii) the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body;
b) shall set the MCVideo emergency group state to \"MVEG 2: in-progress\" if
not already set to that value;
NOTE 3: This is the case of the MCVideo client receiving notification of an
additional MCVideo user in an MCVideo emergency state (i.e., not the MCVideo
user that originally triggered the in-progress emergency state of the group)
joining the in-progress emergency group call. An emergency alert indication,
if included, is handled in step 1).
4) if the received SIP MESSAGE request contains an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \
element set to a value of \"false\":
a) should display to the MCVideo user an indication of the cancellation of the
in-progress emergency state of the MCVideo group call including the following
if not already displayed as part of step 2):
i) the MCVideo group identity contained in the \
element application/vnd.3gpp.mcvideo-info+xml MIME body; and
ii) the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body;
b) shall set the MCVideo emergency group state to \"MVEG 1: no-emergency\";
and
c) shall set the MCVideo emergency group call state to \"MVEGC 1: emergency-
gc-capable\";
NOTE 4: This is the case of the MCVideo client receiving the notification of
the cancellation of the in-progress emergency state of the MCVideo group. In
this case, the receiving MCVideo client is affiliated with the MCVideo group
but not participating in the session. An emergency alert cancellation, if
included, is handled in step 2).
5) if the received SIP MESSAGE request contains an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \
element set to a value of \"true\":
a) should display to the MCVideo user an indication of the MCVideo user
participating in the MCVideo imminent peril group call including the following
if not already displayed as part of step 1):
i) the MCVideo group identity contained in the \
element application/vnd.3gpp.mcvideo-info+xml MIME body; and
ii) the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body; and
b) shall set the MCVideo imminent peril group state to \"MVIG 2: in-progress\"
if not already set to that value;
NOTE 5: This is the case of the MCVideo client receiving notification of an
additional MCVideo user initiating an imminent peril group call when there is
already an in-progress imminent peril state in effect on the group.
6) if the received SIP MESSAGE request contains an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \
element set to a value of \"false\":
a) should display to the MCVideo user an indication of the cancellation of the
in-progress imminent peril state of the MCVideo group including the following
if not already displayed as part of step 2):
i) the MCVideo group identity contained in the \
element application/vnd.3gpp.mcvideo-info+xml MIME body; and
ii) the \ element of the
application/vnd.3gpp.mcvideo-info+xml MIME body;
b) shall set the MCVideo imminent peril group state to \"MVIG 1: no-imminent-
peril\"; and
c) shall set the MCVideo imminent peril group call state to \"MVIGC 1:
imminent-peril-gc-capable\";
NOTE 6: This is the case of the MCVideo client receiving notification of the
cancellation of the in-progress imminent peril state of the group.
7) shall generate a SIP 200 (OK) response according to rules and procedures of
3GPP TS 24.229 [11]; and
8) shall send the SIP 200 (OK) response towards the MCVideo server according
to rules and procedures of 3GPP TS 24.229 [11].
##### 6.3.2.3 Test description {#test-description-34 .H6}
##### 6.3.2.3.1 Pre-test conditions {#pre-test-conditions-34 .H6}
##### System Simulator: {#system-simulator-27 .H6}
\- SS (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
##### IUT: {#iut-26 .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
##### Preamble: {#preamble-27 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- UE States at the end of the preamble
\- The UE is in E-UTRA Registered, Idle Mode state.
\- The MCVideo Client Application has been activated and User has registered-
in as the MCVideo User with the Server as active user at the Client.
##### 6.3.2.3.2 Test procedure sequence {#test-procedure-sequence-34 .H6}
Table 6.3.2.3.2-1: Main Behaviour
+------------+------------+------------+---------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +============+============+============+=========+=========+====+ | | | U - S | Message | | | +------------+------------+------------+---------+---------+----+ | 1 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX SIP | | | | | | | MESSAGE | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3.33.3-1 | | | | | | | to receive | | | | | | | an | | | | | | | emergency | | | | | | | alert? | | | | | +------------+------------+------------+---------+---------+----+ | - | EXCEPTION: | - | - | - | - | | | Step 1Aa1 | | | | | | | describes | | | | | | | behaviour | | | | | | | that | | | | | | | depends on | | | | | | | the UE | | | | | | | imple | | | | | | | mentation; | | | | | | | the | | | | | | | \"lower | | | | | | | case | | | | | | | letter\" | | | | | | | identifies | | | | | | | a step | | | | | | | sequence | | | | | | | that take | | | | | | | place if | | | | | | | the UE | | | | | | | displays | | | | | | | an | | | | | | | indication | | | | | | | and | | | | | | | associated | | | | | | | i | | | | | | | nformation | | | | | | | incase of | | | | | | | an | | | | | | | emergency | | | | | | | alert. | | | | | +------------+------------+------------+---------+---------+----+ | 1Aa1 | IF | - | - | 1 | P | | | pc_ | | | | | | | MCX_Displ | | | | | | | ayInfoEmer | | | | | | | gencyAlert | | | | | | | THEN | | | | | | | Check: | | | | | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | notify the | | | | | | | user of | | | | | | | the | | | | | | | emergency | | | | | | | alert? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 2 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX SIP | | | | | | | MESSAGE | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3.33.3-1 | | | | | | | to receive | | | | | | | an | | | | | | | emergency | | | | | | | alert | | | | | | | can | | | | | | | cellation? | | | | | +------------+------------+------------+---------+---------+----+ | - | EXCEPTION: | - | - | - | - | | | Step 3a1 | | | | | | | describes | | | | | | | behaviour | | | | | | | that | | | | | | | depends on | | | | | | | the UE | | | | | | | imple | | | | | | | mentation; | | | | | | | the | | | | | | | \"lower | | | | | | | case | | | | | | | letter\" | | | | | | | identifies | | | | | | | a step | | | | | | | sequence | | | | | | | that take | | | | | | | place if | | | | | | | the UE | | | | | | | displays | | | | | | | an | | | | | | | indication | | | | | | | and | | | | | | | associated | | | | | | | i | | | | | | | nformation | | | | | | | incase of | | | | | | | an | | | | | | | emergency | | | | | | | alert. | | | | | +------------+------------+------------+---------+---------+----+ | 3a1 | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | notify the | | | | | | | user of | | | | | | | the | | | | | | | emergency | | | | | | | alert | | | | | | | can | | | | | | | cellation? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | NOTE 1: | | | | | | | This is | | | | | | | expected | | | | | | | to be done | | | | | | | via a | | | | | | | suitable | | | | | | | impl | | | | | | | ementation | | | | | | | dependent | | | | | | | MMI. | | | | | | +------------+------------+------------+---------+---------+----+
##### 6.3.2.3.3 Specific message contents {#specific-message-contents-34 .H6}
Table 6.3.2.3.3-1: SIP MESSAGE from the SS (step 1, Table 6.3.2.3.2-1;\ step
2, TS 36.579-1 [2] Table 5.3.33.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.7.2-1, condition LOCATION-INFO
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.3.2.3.3-2  
MIME body part **Location-info**  
MIME-part-body Location-info as described in Table 6.3.2.3.3-2A
Table 6.3.2.3.3-2: MCVideo-Info in SIP MESSAGE (Table 6.3.2.3.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.2-2, condition GROUP-CALL
* * *
Information Element Value/remark Comment Reference Condition mcvideoinfo  
mcvideo-Params  
alert-ind Encrypted \ with mcvideoBoolean set to true Encryption
according to NOTE 1 in TS 36.579-1 [2] Table 5.5.3.2.2-2
Table 6.3.2.3.3-2A: Location-Info in SIP MESSAGE (Table 6.3.2.3.3-1)
+-------------+-------------+-------------+-------------+-------------+ | Derivation | | | | | | Path: TS | | | | | | 36.579-1 | | | | | | [2], | | | | | | Table | | | | | | 5.5.3.4.4-2 | | | | | +=============+=============+=============+=============+=============+ | ** | **Val |** Comment**| ** | ** | | Information | ue/remark** | | Reference**| Condition** | | Element** | | | | | +-------------+-------------+-------------+-------------+-------------+ | lo | | | | | | cation-info | | | | | +-------------+-------------+-------------+-------------+-------------+ | Report | | | | | +-------------+-------------+-------------+-------------+-------------+ | Curr | | | | | | entLocation | | | | | +-------------+-------------+-------------+-------------+-------------+ | Curren | | | | | | tCoordinate | | | | | +-------------+-------------+-------------+-------------+-------------+ | longitude | px_MC | | | | | | X_Coordina | | | | | | teLongitude | | | | | | _Client_B | | | | | | (NOTE 1, 2) | | | | +-------------+-------------+-------------+-------------+-------------+ | latitude | px_M | | | | | | CX_Coordin | | | | | | ateLatitude | | | | | | _Client_B | | | | | | (NOTE 1, 3) | | | | +-------------+-------------+-------------+-------------+-------------+ | NOTE 1: | | | | | | Shall be | | | | | | encrypted | | | | | | as | | | | | | described | | | | | | in TS | | | | | | 36 | | | | | | .579-1[2] | | | | | | Table | | | | | | 5. | | | | | | 5.3.4.4-2A. | | | | | | | | | | | | NOTE 2: | | | | | | Longitude | | | | | | of | | | | | | px_MC | | | | | | X_Coordina | | | | | | teLongitude | | | | | | _Client_B | | | | | | degrees | | | | | | encoded | | | | | | according | | | | | | to TS | | | | | | 23.032 | | | | | | [36] | | | | | | clause 6.1. | | | | | | | | | | | | NOTE 3: | | | | | | Latitude of | | | | | | px_M | | | | | | CX_Coordin | | | | | | ateLatitude | | | | | | _Client_B | | | | | | degrees | | | | | | encoded | | | | | | according | | | | | | to TS | | | | | | 23.032 | | | | | | [36] | | | | | | clause 6.1. | | | | | +-------------+-------------+-------------+-------------+-------------+
Table 6.3.2.3.3-3: SIP MESSAGE from the SS (step 2, Table 6.3.2.3.2-1;\ step
2, TS 36.579-1 [2] Table 5.3.33.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.7.2-1
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.3.2.3.3-4
Table 6.3.2.3.3-4: MCVideo-Info in SIP MESSAGE (Table 6.3.2.3.3-3)
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.2-2, condition GROUP-CALL
* * *
Information Element Value/remark Comment Reference Condition mcvideoinfo  
mcvideo-Params  
alert-ind Encrypted \ with mcvideoBoolean set to false Encryption
according to NOTE 1 in TS 36.579-1 [2] Table 5.5.3.2.2-2
## 6.4 Video Pull
### 6.4.1 On-network / Video pull call / One-to-one video pull call / Client
Originated (CO)
##### 6.4.1.1 Test Purpose (TP) {#test-purpose-tp-35 .H6}
##### (1) {#section-145 .H6}
**with** { the UE (MCVideo Client) registered and authorised for MCVideo
Service }
**ensure that** {
**when** { the MCVideo User requests the establishment of an MCVideo Video
Pull call to pull a video from another MCVideo client }
**then** { the UE (MCVideo Client) requests a video pull call by sending a SIP
INVITE message **and** , responds to a SIP 200 (OK) message with a SIP ACK
message }
}
##### (2) {#section-146 .H6}
**with** { the UE (MCVideo Client) having established a MCVideo Video Pull
call }
**ensure that** {
**when** { the MCVideo User engages in communication with the invited MCVideo
User }
**then** { the UE (MCVideo Client) respects the Transmission Control imposed
by the SS (MCVideo Server) (Transmission Granted, Transmission Control ACK,
Transmission Revoked, Transmission end request, Transmission end response,
Media transmission notification, Receive Media Request, Receive media
response, Media reception end request, Media reception end response,
Transmission Idle) **and** provides appropriate notifications and information
to the MCVideo User }
}
##### (3) {#section-147 .H6}
**with** { the UE (MCVideo Client) having an ongoing MCVideo Video Pull call }
**ensure that** {
**when** { the MCVideo User requests to terminate the ongoing MCVideo Video
Pull call }
**then** { the UE (MCVideo Client) sends a SIP BYE message, **and** leaves the
MCVideo Session }
}
##### 6.4.1.2 Conformance requirements {#conformance-requirements-35 .H6}
References: The conformance requirements covered in the current TC are
specified in TS 24.281, clauses 12.2.2.1, 12.2.2.3; and TS 24.581, clauses
6.2.5.3.2, 6.2.5.3.3, 6.2.5.4.5, 6.2.5.5.5. The following represents a
copy/paste extraction of the requirements relevant to the test purpose; any
references within the copy/paste text should be understood within the scope of
the core spec they have been copied from. Unless otherwise stated, these are
Rel-15 requirements.
[TS 24.281, clause 12.2.2.1]
In order to pull a video from another MCVideo client, the MCVideo client shall
perform the procedures of the clause 10.2.2.2.1, with the following
clarifications:
1) shall contain an application/vnd.3gpp.mcvideo-info+xml MIME body with the
\ element containing the \ element with the
\ element set to a value of \"one-to-one video pull\".
[TS 24.281, clause 12.2.2.3]
When the MCVideo client is in an ongoing one-to-one video pull call, upon an
indication from MCVideo user to release the call, the MCVideo client shall
perform the procedures of the clause 10.2.4.1.
[TS 24.581, clause 6.2.5.3.2]
Upon receiving the media transmission notification from the transmission
control server, the transmission participant:
1\. if the first bit in the subtype of the media transmission notification
message is set to \'1\' (Acknowledgment is required) as described in subclause
9.2.2.1, shall send a Transmission control Ack message. The Transmission
control Ack message:
a. shall include the Message Type field set to \'6\' (Media transmission
notification); and
b. shall include the Source field set to \'0\' (the transmission participant
is the source);
2\. shall provide media transmission notification to the user;
3\. shall store the User ID and the SSRC of the user transmitting the media;
4\. if the Reception Mode field is set to \'0\' indicating automatic reception
mode:
a. shall create an instance of the \'Transmission participant state transition
diagram for basic reception control operation\';
b. shall map the stored User ID and the SSRC of the user transmitting the
media with the instance of \'Transmission participant state transition diagram
for basic reception control operation\' created in step a); and
c. shall enter the \'U: has permission to receive\' state;
5\. may display the details of the incoming media to the user; and
6\. shall remain in the \'U: reception controller\' state.
[TS 24.581, clause 6.2.5.3.3]
Upon receiving an indication from the user to request permission to receive
media, the transmission participant:
1\. shall send the Receive Media Request message toward the transmission
control server; The Receive Media Request message:
a. if a different priority than the normal priority is required, shall include
the Reception Priority field with the priority not higher than negotiated with
the transmission control server as specified in subclause 14.3.3; and
b. if the receive media request is a broadcast group call, system call,
emergency call or an imminent peril call, shall include a Transmission
Indicator field indicating the relevant call types;
2\. shall create an instance of the \'Transmission participant state
transition diagram for basic reception control operation\';
3\. shall map the stored User ID and the SSRC of the user transmitting the
media with instance of \'Transmission participant state transition diagram for
basic reception control operation\' created in step 2; and
4\. shall remain in the \'U: reception controller\' state.
[TS 24.581, clause 6.2.5.4.5]
Upon receiving a granted response for Receive media request message, the
transmission participant:
1\. if the first bit in the subtype of the Receive media response message is
set to \'1\' (Acknowledgment is required) as described in subclause 9.2.2.1,
shall send a Transmission control Ack message. The Transmission control Ack
message:
a. shall include the Message Type field set to \'7\' (Receive media response);
and
b. shall include the Source field set to \'0\' (the transmission participant
is the source);
2\. shall provide receive media success notification to the user;
3\. if the Receive Media Indicator field is included and the B-bit is set to
\'1\' (Broadcast group call), shall provide a notification to the user
indicating the type of call;
4\. shall stop timer T103 (Receive Media Request); and
5\. shall enter the \'U: has permission to receive\' state.
[TS 24.581, clause 6.2.5.5.5]
Upon receiving a Media reception end request message, the transmission
participant:
1\. if the first bit in the subtype of the Media reception end request message
set to \"1\" (Acknowledgment is required) as described in subclause 8.3.2,
shall send a Reception control Ack message. The Reception control Ack message:
a. shall include the Message Type field set to \'2\' (Media reception end
request);
b. shall include the Source field set to \'0\' (the transmission participant
is the source); and
c. shall include the Message Name field set to MCV2.
2\. shall inform the user that the receiving RTP media is being ended;
3\. may give information to the user about the reason for ending the received
RTP media;
4\. shall request the MCVideo client to discard any remaining buffered RTP
media packets and stop displaying to user;
5\. shall send a Media reception end response message towards the transmission
control server;
6\. may provide a Media reception end notification to the MCVideo user;
7\. if the Receive Media Indicator field is included and the B-bit set to
\'1\' (Broadcast group call), shall provide a notification to the user
indicating the type of call; and
8\. shall enter the \'terminated\' state.
##### 6.4.1.3 Test description {#test-description-35 .H6}
##### 6.4.1.3.1 Pre-test conditions {#pre-test-conditions-35 .H6}
##### System Simulator: {#system-simulator-28 .H6}
\- SS (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
##### IUT: {#iut-27 .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
##### Preamble: {#preamble-28 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- UE States at the end of the preamble
\- The UE is in E-UTRA Registered, Idle Mode state.
\- The MCVideo Client Application has been activated and User has registered-
in as the MCVideo User with the Server as active user at the Client.
##### 6.4.1.3.2 Test procedure sequence {#test-procedure-sequence-35 .H6}
Table 6.4.1.3.2-1: Main Behaviour
+------------+------------+------------+---------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +============+============+============+=========+=========+====+ | | | U - S | Message | | | +------------+------------+------------+---------+---------+----+ | 1 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | the | | | | | | | est | | | | | | | ablishment | | | | | | | of a video | | | | | | | pull call | | | | | | | to pull a | | | | | | | video from | | | | | | | another | | | | | | | MCVideo | | | | | | | client. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 2-6 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | steps | | | | | | | 1a1-5 of | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | CO session | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3B.1.3-1 | | | | | | | to pull a | | | | | | | video from | | | | | | | another | | | | | | | MCVideo | | | | | | | client | | | | | | | without | | | | | | | implicit | | | | | | | tr | | | | | | | ansmission | | | | | | | request | | | | | | | according | | | | | | | to option | | | | | | | a of NOTE | | | | | | | 1 in TS | | | | | | | 36.579.1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.1.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 7 | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Tr | | | | | | | ansmission | | | | | | | No | | | | | | | tification | | | | | | | and | | | | | | | Request | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.3.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 8 | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Reception | | | | | | | End | | | | | | | Request | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5. | | | | | | | 3B.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 9 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | release | | | | | | | the call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 10 | Check: | - | - | 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CO | | | | | | | call | | | | | | | release\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | NOTE 1: | | | | | | | This | | | | | | | action is | | | | | | | expected | | | | | | | to be done | | | | | | | via a | | | | | | | suitable | | | | | | | impl | | | | | | | ementation | | | | | | | dependent | | | | | | | MMI. | | | | | | +------------+------------+------------+---------+---------+----+
##### 6.4.1.3.3 Specific message contents {#specific-message-contents-35 .H6}
Table 6.4.1.3.3-1: SIP INVITE from the UE (Step 3, Table 6.4.1.3.2-1;\ Step 2,
TS 36.579-1 [2] Table 5.3B.1.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.1-1, condition PRIVATE-CALL
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP message**  
MIME-part-body SDP Message as described in Table 6.4.1.3.3-2  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.4.1.3.3-3
Table 6.4.1.3.3-2: SDP in SIP INVITE (Table 6.4.1.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.1-2, condition PRIVATE-CALL,
SDP_OFFER
* * *
Table 6.4.1.3.3-3: MCVideo-Info in SIP INVITE (Table 6.4.1.3.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition PRIVATE-CALL,
INVITE_REFER
* * *
Information Element Value/remark Comment Reference Condition mcvideoinfo  
mcvideo-Params  
session-type \"one-to-one video pull\" TS 24.281 [26] clause 12.2.2.1
Table 6.4.1.3.3-4: Void
Table 6.4.1.3.3-5: SIP 200 (OK) from the SS (Step 5, Table 6.4.1.3.2-1;\ Step
4, TS 36.579-1 [2] Table 5.3B.1.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.17.1.2-1, condition INVITE-RSP
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
SDP message As described in Table 6.4.1.3.3-6
Table 6.4.1.3.3-6: SDP in SIP 200 (OK) (Table 6.4.1.3.3-5)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition SDP_ANSWER
* * *
Table 6.4.1.3.3-7: Void
### 6.4.2 On-network / Video pull call / One-to-one video pull call / Client
Terminated (CT)
##### 6.4.2.1 Test Purpose (TP) {#test-purpose-tp-36 .H6}
##### (1) {#section-148 .H6}
**with** { the UE (MCVideo Client) registered and authorised for MCVideo
Service }
**ensure that** {
**when** { the UE (MCVideo Client) receives a SIP INVITE from the SS (MCVideo
Server)to initiate an One-to-one video pull call }
**then** { the UE (MCVideo Client) responds by sending a SIP 200 (OK) }
}
##### (2) {#section-149 .H6}
**with** { the UE (MCVideo Client) having established a MCVideo Video Pull
call }
**ensure that** {
**when** { the MCVideo User engages in communication with the initiating
MCVideo User }
**then** { the UE (MCVideo Client) respects the Transmission Control imposed
by the SS (MCVideo Server) (Transmission Granted, Transmission Control ACK,
Transmission End Request, Transmission End Response, Transmission Idle)
**and** provides appropriate notifications and information to the MCVideo User
}
}
##### (3) {#section-150 .H6}
**with** { the UE (MCVideo Client) having an ongoing MCVideo Video Pull call }
**ensure that** {
**when** { the MCVideo User requests to terminate the ongoing MCVideo Video
Pull call }
**then** { the UE (MCVideo Client) sends a SIP BYE message, **and** leaves the
MCVideo Session }
}
##### 6.4.2.2 Conformance requirements {#conformance-requirements-36 .H6}
References: The conformance requirements covered in the current TC are
specified in TS 24.281, clauses 12.2.2.2, 12.2.2.3; and TS 24.581, clauses
6.2.4.2.3, 6.2.4.4.6, 6.2.4.5.3, 6.2.4.6.4. The following represents a
copy/paste extraction of the requirements relevant to the test purpose; any
references within the copy/paste text should be understood within the scope of
the core spec they have been copied from. Unless otherwise stated, these are
Rel-16 requirements.
[TS 24.281, clause 12.2.2.2]
Upon receipt of an initial SIP INVITE request for the one-to-one video pull
call, the MCVideo client shall perform the procedures of the clause
10.2.2.2.2, with the following clarifications:
1) shall initiate the implicit transmit media request as specified in 3GPP TS
24.581 [5].
[TS 24.281, clause 12.2.2.3]
When the MCVideo client is in an ongoing one-to-one video pull call, upon an
indication from MCVideo user to release the call, the MCVideo client shall
perform the procedures of the clause 10.2.4.1.
[TS 24.581, clause 6.2.4.2.3]
When an MCVideo call is established, the terminating transmission participant:
1\. shall create an instance of a \'Transmission participant state transition
diagram for basic transmission control operation\'; and
2\. shall enter the \'U: has no permission to transmit\' state.
NOTE: From a transmission participant perspective the MCVideo call is
established when the application and signalling plane sends the SIP 200 (OK)
response.
[TS 24.581, clause 6.2.4.4.6]
Upon receiving a Transmission Granted message from the transmission control
server, the transmission participant:
1\. if the first bit in the subtype of the Transmission Granted message is set
to \'1\' (Acknowledgment is required) as described in clause 9.2.2.1, shall
send a Transmission control Ack message. The Transmission control Ack message:
a. shall include the Message Type field set to \'0\' (Transmission Granted);
and
b. shall include the Source field set to \'0\' (the transmission participant
is the source);
2\. shall store the SSRC of granted transmission participant received in the
Transmission Granted message and use it in the RTP media packets until the
transmission is relased;
3\. shall provide Transmission granted notification to the user, if not
already done;
4\. shall stop timer T100 (Transmission Request); and
5\. shall enter the \'U: has permission to transmit\' state.
[TS 24.581, clause 6.2.4.5.3]
Upon receiving an indication from the user to end the permission to send RTP
media, the transmission participant:
1\. shall send a Transmission end request message towards the transmission
control server. The Transmission end request message, if the session is a
broadcast call and if the session was established as a normal call, shall
include the Transmission Indicator with the A-bit set to \'1\' (Normal call);
2\. shall start timer T101 (Transmission End Request) and initialize counter
C101 (Transmission End Request) to 1; and
3\. shall enter the \'U: pending end of transmission\' state.
[TS 24.581, clause 6.2.4.6.4]
Upon receiving a Transmission end response message, the transmission
participant:
1\. if the first bit in the subtype of the Transmission end response message
to \'1\' (Acknowledgment is required) as described in clause 9.2.2.1, shall
send a Transmission control Ack message. The Transmission control Ack message:
a. shall include the Message Type field set to \'1\' (Transmission end
response); and
b. shall include the Source field set to \'0\' (the transmission participant
is the source);
2\. may provide a Transmission end notification to the MCVideo user;
3\. if the Transmission Indicator field is included and the B-bit set to \'1\'
(Broadcast group call), shall provide a notification to the user indicating
the type of call;
4\. shall stop timer T101 (Transmission End Request);
5\. if the session is not a broadcast group call or if the A-bit in the
Transmission Indicator field is set to \'1\' (Normal call), shall enter the
\'U: has no permission to transmit\' state; and
6\. if the session was initiated as a broadcast group call:
a. shall indicate to the MCVideo client the media transmission is completed;
and
b shall enter the \'Call releasing\' state.
##### 6.4.2.3 Test description {#test-description-36 .H6}
##### 6.4.2.3.1 Pre-test conditions {#pre-test-conditions-36 .H6}
##### System Simulator: {#system-simulator-29 .H6}
\- SS (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
##### IUT: {#iut-28 .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
##### Preamble: {#preamble-29 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- UE States at the end of the preamble
\- The UE is in E-UTRA Registered, Idle Mode state.
\- The MCVideo Client Application has been activated and User has registered-
in as the MCVideo User with the Server as active user at the Client.
##### 6.4.2.3.2 Test procedure sequence {#test-procedure-sequence-36 .H6}
Table 6.4.2.3.2-1: Main Behaviour
+------------+------------+------------+---------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +============+============+============+=========+=========+====+ | | | U - S | Message | | | +------------+------------+------------+---------+---------+----+ | 1 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CT | | | | | | | session | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3.4.3-1 | | | | | | | to | | | | | | | establish | | | | | | | one-to-one | | | | | | | video pull | | | | | | | call with | | | | | | | automatic | | | | | | | co | | | | | | | mmencement | | | | | | | mode? | | | | | +------------+------------+------------+---------+---------+----+ | 2-4 | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | steps 2-4 | | | | | | | of | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Tr | | | | | | | ansmission | | | | | | | request -- | | | | | | | Tr | | | | | | | ansmission | | | | | | | Granted\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3B.2.3-1 | | | | | | | to pull a | | | | | | | video from | | | | | | | another | | | | | | | MCVideo | | | | | | | client? | | | | | | | | | | | | | | (NOTE 2) | | | | | +------------+------------+------------+---------+---------+----+ | 5 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | end of | | | | | | | tra | | | | | | | nsmission. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 6 | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | tr | | | | | | | ansmission | | | | | | | End | | | | | | | Request | | | | | | | CO\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.7.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 7 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | release | | | | | | | the call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 8 | Check: | - | - | 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CO | | | | | | | call | | | | | | | release\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | NOTE 1: | | | | | | | This | | | | | | | action is | | | | | | | expected | | | | | | | to be done | | | | | | | via a | | | | | | | suitable | | | | | | | impl | | | | | | | ementation | | | | | | | -dependent | | | | | | | MMI. | | | | | | | | | | | | | | NOTE 2: It | | | | | | | is assumed | | | | | | | that the | | | | | | | client | | | | | | | considers | | | | | | | the | | | | | | | est | | | | | | | ablishment | | | | | | | of the | | | | | | | video pull | | | | | | | call as | | | | | | | implicit | | | | | | | tr | | | | | | | ansmission | | | | | | | request, | | | | | | | i.e. that | | | | | | | it | | | | | | | aut | | | | | | | omatically | | | | | | | enters the | | | | | | | \'U: | | | | | | | pending | | | | | | | request to | | | | | | | transmit\' | | | | | | | state (TS | | | | | | | 24.581 | | | | | | | [27] | | | | | | | clause | | | | | | | 6.2.4.4). | | | | | | | | | | | | | | Editor\'s | | | | | | | note: It | | | | | | | is not | | | | | | | clear in | | | | | | | TS 24.581 | | | | | | | what | | | | | | | exactly is | | | | | | | meant with | | | | | | | \"implicit | | | | | | | transmit | | | | | | | media | | | | | | | request\" | | | | | | | in context | | | | | | | of CT call | | | | | | | est | | | | | | | ablishment | | | | | | | (as stated | | | | | | | in TS | | | | | | | 24.281) | | | | | | | and how it | | | | | | | shall be | | | | | | | handled. | | | | | | +------------+------------+------------+---------+---------+----+
##### 6.4.2.3.3 Specific message contents {#specific-message-contents-36 .H6}
Table 6.4.2.3.3-1: SIP INVITE from the SS (Step 1, Table 6.4.2.3.2-1;\ Step 2,
TS 36.579-1 [2] Table 5.3.4.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.2-1
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP message**  
MIME-part-body SDP Message as described in Table 6.4.2.3.3-2  
MIME body part **MCVideo Info**  
MIME-part-body MCVideo-Info as described in Table 6.4.2.3.3-3
Table 6.4.2.3.3-2: SDP in SIP INVITE (Table 6.4.2.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition
INITIAL_SDP_OFFER, PRIVATE-CALL
* * *
Table 6.4.2.3.3-3: MCVideo-Info in SIP INVITE (Table 6.4.2.3.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.2-2
* * *
Information Element Value/remark Comment Reference Condition mcvideoinfo  
mcvideo-Params  
session-type \"one-to-one video pull\" TS 24.281 [26] clause 12.2.2.1
Table 6.4.2.3.3-4: SIP 200 (OK) from the UE (Step 5, Table 6.4.2.3.2-1;\ Step
4, TS 36.579-1 [2] Table 5.3.4.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.17.1.1-1, condition INVITE-RSP
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
SDP message SDP message as described in Table 6.4.2.3.3-5
Table 6.4.2.3.3-5: SDP in SIP 200 (OK) (Table 6.4.2.3.3-4)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.1-2, condition SDP_ANSWER
* * *
Table 6.4.2.3.3-6: SIP BYE from the UE (Step 8, Table 6.4.2.3.2-1;\ Step 1, TS
36.579-1 [2] Table 5.3.10.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.2.2-1, condition MT_CALL
* * *
## 6.5 Video Push
### 6.5.1 On-network / Video push call / One-to-one video push call / Client
Originated (CO)
##### 6.5.1.1 Test Purpose (TP) {#test-purpose-tp-37 .H6}
##### (1) {#section-151 .H6}
**with** { the UE (MCVideo Client) registered and authorised for MCVideo
Service }
**ensure that** {
**when** { the MCVideo User requests the establishment of an MCVideo video
push call to push a video to another MCVideo client }
**then** { the UE (MCVideo Client) requests a video push call by sending a SIP
INVITE message **and** , responds to a SIP 200 (OK) message with a SIP ACK
message }
}
##### (2) {#section-152 .H6}
**with** { the UE (MCVideo Client) having established a MCVideo Video push
call }
**ensure that** {
**when** { the MCVideo User engages in communication with the invited MCVideo
User }
**then** { the UE (MCVideo Client) respects the Transmission Control imposed
by the SS (MCVideo Server) (Transmission Granted, Transmission End Request,
Transmission End Response) **and** provides transmission granted notification
to the MCVideo User }
}
##### (3) {#section-153 .H6}
**with** { the UE (MCVideo Client) having an ongoing MCVideo video push call }
**ensure that** {
**when** { the MCVideo User requests to terminate the ongoing MCVideo video
push call }
**then** { the UE (MCVideo Client) sends a SIP BYE message, **and** leaves the
MCVideo Session }
}
##### 6.5.1.2 Conformance requirements {#conformance-requirements-37 .H6}
References: The conformance requirements covered in the current TC are
specified in TS 24.281, clauses 13.2.2.1, 13.2.2.3; and TS 24.581, clauses
6.2.4.2.2, 6.2.4.4.6, 6.2.4.5.3, 6.2.4.6.4. The following represents a
copy/paste extraction of the requirements relevant to the test purpose; any
references within the copy/paste text should be understood within the scope of
the core spec they have been copied from. Unless otherwise stated, these are
Rel-15 requirements.
[TS 24.281, clause 13.2.2.1]
In order to push a video to another MCVideo client, the MCVideo client shall
perform the procedures of clause 10.2.2.2.1, with the following
clarifications:
1) shall contain an application/vnd.3gpp.mcvideo-info+xml MIME body with the
\ element containing the \ element with the
\ element set to a value of \"one-to-one video push\"; and
2) shall interact with the media plane as specified in 3GPP TS 24.581 [5]
clause 6.2.
[TS 24.281, clause 13.2.2.3]
When the MCVideo client is in an ongoing one-to-one video push call, upon an
indication from MCVideo user to release the call, the MCVideo client shall
perform the procedures of clause 10.2.4.1.
[TS 24.581, clause 6.2.4.2.2]
When a call is initiated as described in 3GPP TS 24.281 [2], the transmission
participant:
1\. shall create an instance of the \'Transmission participant state
transition diagram for basic transmission control operation\';
2\. if the originating transmission participant receives a transmission
control message before it receives the SIP 200 (OK) response, shall store the
transmission control message;
NOTE: The originating transmission participant might receive a transmission
control message before the SIP 200 (OK) response when initiating, joining or
rejoining a call because of processing delays of the SIP 200 (OK) response in
the SIP core.
3\. if the established MCVideo call is a chat group call and the SIP INVITE
request is not an implicit Transmission request, shall enter the \'U: has no
permission to transmit\' state;
4\. if for the established MCVideo call the SIP INVITE request is an implicit
Transmission request:
a. shall start timer T100 (Transmission Request) and initialise counter C100
(Transmission Request) to 1;
b. shall enter the \'U: pending request to transmit\' state; and
c. if the transmission participant has received and stored a transmission
control message before the reception of the SIP 200 (OK) response, shall act
as if the transmission control message was received in the \'U: pending
request to transmit\' state after entering the \'U: pending request to
transmit\' state; and
5\. if the established MCVideo call is a broadcast group call, shall enter the
\'U: has permission to transmit\' state.
When the transmission participant is rejoining an ongoing MCVideo call as
described in 3GPP TS 24.281 [2] the transmission participant shall enter the
\'U: has no permission to transmit\' state.
[TS 24.581, clause 6.2.4.4.6]
Upon receiving a Transmission Granted message from the transmission control
server, the transmission participant:
1\. if the first bit in the subtype of the Transmission Granted message is set
to \'1\' (Acknowledgment is required) as described in subclause 9.2.2.1, shall
send a Transmission control Ack message. The Transmission control Ack message:
a. shall include the Message Type field set to \'0\' (Transmission Granted);
and
b. shall include the Source field set to \'0\' (the transmission participant
is the source);
2\. shall store the SSRC of granted transmission participant received in the
Transmission Granted message and use it in the RTP media packets until the
transmission is released;
3\. shall provide Transmission granted notification to the user, if not
already done;
4\. shall stop timer T100 (Transmission Request); and
5\. shall enter the \'U: has permission to transmit\' state.
[TS 24.581, clause 6.2.4.5.3]
Upon receiving an indication from the user to end the permission to send RTP
media, the transmission participant:
1\. shall send a Transmission end request message towards the transmission
control server. The Transmission end request message, if the session is a
broadcast call and if the session was established as a normal call, shall
include the Transmission Indicator with the A-bit set to \'1\' (Normal call);
2\. shall start timer T101 (Transmission End Request) and initialize counter
C101 (Transmission End Request) to 1; and
3\. shall enter the \'U: pending end of transmission\' state.
[TS 24.581, clause 6.2.4.6.4]
Upon receiving a Transmission end response message, the transmission
participant:
1\. if the first bit in the subtype of the Transmission end response message
to \'1\' (Acknowledgment is required) as described in subclause 9.2.2.1, shall
send a Transmission control Ack message. The Transmission control Ack message:
a. shall include the Message Type field set to \'1\' (Transmission end
response); and
b. shall include the Source field set to \'0\' (the transmission participant
is the source);
2\. may provide a Transmission end notification to the MCVideo user;
3\. if the Transmission Indicator field is included and the B-bit set to \'1\'
(Broadcast group call), shall provide a notification to the user indicating
the type of call;
4\. shall stop timer T101 (Transmission End Request);
5\. if the session is not a broadcast group call or if the A-bit in the
Transmission Indicator field is set to \'1\' (Normal call), shall enter the
\'U: has no permission to transmit\' state; and
6\. if the session was initiated as a broadcast group call:
a. shall indicate to the MCVideo client the media transmission is completed;
and
b shall enter the \'Call releasing\' state.
##### 6.5.1.3 Test description {#test-description-37 .H6}
##### 6.5.1.3.1 Pre-test conditions {#pre-test-conditions-37 .H6}
##### System Simulator: {#system-simulator-30 .H6}
\- SS (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
##### IUT: {#iut-29 .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
\- UE (MCVideo client) has a pre-recorded video that is available to push to
another client.
##### Preamble: {#preamble-30 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- UE States at the end of the preamble
\- The UE is in E-UTRA Registered, Idle Mode state.
\- The MCVideo Client Application has been activated and User has registered-
in as the MCVideo User with the Server as active user at the Client.
##### 6.5.1.3.2 Test procedure sequence {#test-procedure-sequence-37 .H6}
Table 6.5.1.3.2-1: Main Behaviour
+------------+------------+------------+---------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +============+============+============+=========+=========+====+ | | | U - S | Message | | | +------------+------------+------------+---------+---------+----+ | 1 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | the | | | | | | | est | | | | | | | ablishment | | | | | | | of a video | | | | | | | push call | | | | | | | to push a | | | | | | | video to | | | | | | | another | | | | | | | MCVideo | | | | | | | client. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 2 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | CO session | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3B.1.3-1 | | | | | | | to push a | | | | | | | video to | | | | | | | another | | | | | | | MCVideo | | | | | | | client | | | | | | | with | | | | | | | implicit | | | | | | | tr | | | | | | | ansmission | | | | | | | control | | | | | | | according | | | | | | | to option | | | | | | | b.i of | | | | | | | NOTE 1 in | | | | | | | TS | | | | | | | 36.579.1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.1.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 3 | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | provide | | | | | | | tr | | | | | | | ansmission | | | | | | | granted | | | | | | | no | | | | | | | tification | | | | | | | to the | | | | | | | user? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 4 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | end of | | | | | | | tra | | | | | | | nsmission. | | | | | | | | | | | | | | (NOTE1) | | | | | +------------+------------+------------+---------+---------+----+ | 5 | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | tr | | | | | | | ansmission | | | | | | | End | | | | | | | Request | | | | | | | CO\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.7.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 6 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | release | | | | | | | the call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 7 | Check: | - | - | 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CO | | | | | | | call | | | | | | | release\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | NOTE 1: | | | | | | | This | | | | | | | action is | | | | | | | expected | | | | | | | to be done | | | | | | | via a | | | | | | | suitable | | | | | | | impl | | | | | | | ementation | | | | | | | dependent | | | | | | | MMI. | | | | | | +------------+------------+------------+---------+---------+----+
##### 6.5.1.3.3 Specific message contents {#specific-message-contents-37 .H6}
Table 6.5.1.3.3-1: SIP INVITE from the UE (Step 2, Table 6.5.1.3.2-1;\ Step 2,
TS 36.579-1 [2] Table 5.3B.1.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.1-1, condition PRIVATE-CALL
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP message**  
MIME-part-body SDP Message as described in Table 6.5.1.3.3-2  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.5.1.3.3-3
Table 6.5.1.3.3-2: SDP in SIP INVITE (Table 6.5.1.3.3-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.1-2, condition PRIVATE-CALL,
SDP_OFFER, IMPLICIT_GRANT_REQUESTED
* * *
Table 6.5.1.3.3-3: MCVideo-Info in SIP INVITE (Table 6.5.1.3.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition PRIVATE-CALL,
INVITE_REFER
* * *
Information Element Value/remark Comment Reference Condition mcvideoinfo  
mcvideo-Params  
session-type \"one-to-one video push\" TS 24.281 [26] clause 13.2.2.1
Table 6.5.1.3.3-4: Void
Table 6.5.1.3.3-5: SIP 200 (OK) from the SS (Step 2, Table 6.5.1.3.2-1;\ Step
4, TS 36.579-1 [2] Table 5.3B.1.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.17.1.2-1, condition INVITE-RSP
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
SDP message As described in Table 6.5.1.3.3-6
Table 6.5.1.3.3-6: SDP in SIP 200 (OK) (Table 6.5.1.3.3-5)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition SDP_ANSWER,
IMPLICIT_GRANT_REQUESTED, IMPLICIT_FLOOR_GRANTED
* * *
Table 6.5.1.3.3-7: Void
## 6.6 Capability information sharing
This feature is not specified in the present version of the document.
## 6.7 Ambient viewing call
### 6.7.1 On-network / On-demand ambient viewing call / Remote initiated
ambient viewing call / Client Originated (CO)
##### 6.7.1.1 Test Purpose (TP) {#test-purpose-tp-38 .H6}
##### (1) {#section-154 .H6}
**with** { the UE (MCVideo Client) registered and authorised for MCVideo
Service, including authorised to initiate a MCVideo remote initiated ambient
viewing call }
**ensure that** {
**when** { the MCVideo User requests the establishment of a MCVideo remote
initiated ambient viewing call }
**then** { UE (MCVideo Client) sends a SIP INVITE message requesting MCVideo
remote initiated ambient viewing call **and** responds to a SIP 200 (OK)
message with a SIP ACK message **and** notifies the MCVideo User that the call
has been successfully established }
}
##### (2) {#section-155 .H6}
**with** { UE (MCVideo Client) having established a MCVideo remote initiated
ambient viewing call }
**ensure that** {
**when** { the MCVideo User engages in communication with the invited MCVideo
User }
**then** { UE (MCVideo Client) respects the Transmission Control imposed by
the MCVideo Server }
}
##### (3) {#section-156 .H6}
**with** { UE (MCVideo Client) having an ongoing MCVideo remote initiated
ambient viewing call }
**ensure that** {
**when** { the MCVideo User requests to terminate the ongoing MCVideo remote
initiated ambient viewing call }
**then** { UE (MCVideo Client) sends a SIP BYE request and after receiving a
SIP 200 (OK) and leaves the MCVideo session }
}
##### 6.7.1.2 Conformance requirements {#conformance-requirements-38 .H6}
References: The conformance requirements covered in the present TC are
specified in: TS 24.281, clauses 15.2.1.1, 15.2.1.3, and in TS 24.581, clauses
6.2.5.2.3, 6.2.5.3.2, 6.2.5.3.3, 6.2.5.4.5. The following represents a
copy/paste extraction of the requirements relevant to the test purpose; any
references within the copy/paste text should be understood within the scope of
the core spec they have been copied from. Unless otherwise stated these are
Rel-15 requirements.
[TS 24.281, clause 15.2.1.1]
Upon receiving a request from the MCVideo user to originate a remote initiated
ambient viewing call, if the \
element of the \ element is not present in the MCVideo user profile
document (see the MCVideo user profile document in 3GPP TS 24.484 [25]) or is
set to a value of \"false\", the MCVideo client shall inform the MCVideo user
and shall exit this procedure.
Upon receiving a request from the MCVideo user to originate a locally
initiated ambient viewing call, if the \ element of the \ element is not present in the
MCVideo user profile document (see the MCVideo user profile document in 3GPP
TS 24.484 [25]) or is set to a value of \"false\", the MCVideo client shall
inform the MCVideo user and shall exit this procedure.
Upon receiving a request from an MCVideo user to establish an MCVideo ambient
viewing call that has been authorised successfully by the requesting MCVideo
client, the MCVideo client shall generate an initial SIP INVITE request by
following the UE originating session procedures specified in 3GPP TS 24.229
[11], with the clarifications given below.
The MCVideo client:
1) shall set the Request-URI of the SIP INVITE request to a public service
identity of identifying the participating MCVideo function serving the MCVideo
user;
2) may include a P-Preferred-Identity header field in the SIP INVITE request
containing a public user identity as specified in 3GPP TS 24.229 [11];
3) shall include the g.3gpp.mcvideo media feature tag and the g.3gpp.icsi-ref
media feature tag with the value of \"urn:urn-7:3gpp-
service.ims.icsi.mcvideo\" in the Contact header field of the SIP INVITE
request according to IETF RFC 3840 [22];
4) shall include an Accept-Contact header field containing the g.3gpp.mcvideo
media feature tag along with the \"require\" and \"explicit\" header field
parameters according to IETF RFC 3841 [20];
5) shall include the ICSI value \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\"
(coded as specified in 3GPP TS 24.229 [11]), in a P-Preferred-Service header
field according to IETF RFC 6050 [14] in the SIP INVITE request;
6) shall include an Accept-Contact header field with the media feature tag
g.3gpp.icsi-ref contain with the value of \"urn:urn-7:3gpp-
service.ims.icsi.mcvideo\" along with parameters \"require\" and \"explicit\"
according to IETF RFC 3841 [20];
7) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body with the
\ element set to a value of \"ambient-viewing\";
8) shall include in the application/vnd.3gpp.mcvideo-info+xml MIME body an
\ element set to a value of:
a) \"local-init\", if the MCVideo user has requested a locally initiated
ambient viewing call; or
b) \"remote-init\", if the MCVideo user has requested a remotely initiated
ambient viewing call;
9) shall insert in the SIP INVITE request a MIME resource-lists body with the
MCVideo ID of the targeted MCVideo user, according to rules and procedures of
IETF RFC 5366 [37];
NOTE 1: the targeted MCVideo user is the viewed-to MCVideo user in the case of
a remotely initiated ambient viewing call or the viewing MCVideo user in the
case of a locally initiated viewing call.
10) if an end-to-end security context needs to be established then:
a) if necessary, shall instruct the key management client to request keying
material from the key management server as described in 3GPP TS 33.180 [8];
b) shall use the keying material to generate a PCK as described in 3GPP TS
33.180 [8];
c) shall use the PCK to generate a PCK-ID with the four most significant bits
set to \"0001\" to indicate that the purpose of the PCK is to protect private
call communications and with the remaining twenty eight bits being randomly
generated as described in 3GPP TS 33.180 [8];
d) shall encrypt the PCK to a UID associated to the MCVideo client using the
MCVideo ID and KMS URI of the invited user and a time related parameter as
described in 3GPP TS 33.180 [8];
e) shall generate a MIKEY-SAKKE I_MESSAGE using the encapsulated PCK and PCK-
ID as specified in 3GPP TS 33.180 [8];
f) shall add the MCVideo ID of the originating MCVideo to the initiator field
(IDRi) of the I_MESSAGE as described in 3GPP TS 33.180 [8]; and
g) shall sign the MIKEY-SAKKE I_MESSAGE using the originating MCVideo user\'s
signing key provided in the keying material together with a time related
parameter, and add this to the MIKEY-SAKKE payload, as described in 3GPP TS
33.180 [8];
11) shall include an SDP offer according to 3GPP TS 24.229 [11] with the
clarification given in clause 6.7.1;
12) if this is a locally initiated ambient viewing call, shall comply with the
conditions for implicit transmit media request control as specified in clause
6.4;
13) if this is a remotely initiated ambient viewing call, shall comply with
the conditions for an implicit transmit media request control to the
terminating MCVideo client as specified in clause 6.4;
14) shall include in the SIP INVITE request a Priv-Answer-Mode header field
with the value \"Auto\" according to the rules and procedures of IETF RFC 5373
[27]; and
15) shall send the SIP INVITE request towards the participating MCVideo
function according to 3GPP TS 24.229 [11].
Upon receiving a SIP 183(Session Progress) response to the SIP INVITE request
the MCVideo client:
1) if the SIP 183(Session Progress) response includes an alert-info header
field as specified in IETF RFC 3261 [15] and as updated by IETF RFC 7462 [66]
set to a value of \"\\" shall not give any
indication of the progress of the call setup to the MCVideo user; and
NOTE 2: The alert-info header field having the value of
\"\\" is intended to result in having a \"null\"
alert, i.e. an alert with no content or physical manifestation of any kind.
2) if this is a remotely initiated ambient viewing call, may indicate the
progress of the session establishment to the inviting MCVideo user.
Upon receiving a SIP 200 (OK) response to the SIP INVITE request the MCVideo
client:
1) shall interact with the media plane as specified in 3GPP TS 24.581 [5];
2) if this is a remotely initiated ambient viewing call, shall notify the user
that the call has been successfully established;
3) if this is a locally initiated ambient viewing call, shall not provide any
indication to the user that the call has been successfully established;
4) if the \ element contained in the
application/vnd.3gpp.mcvideo-info+xml MIME body in the sent SIP INVITE request
was set to a value of \"local-init\":
a) shall cache the value of \"viewed-to MCVideo user\" as the ambient viewing
client role for this call; or
b) if the \ element contained in the
application/vnd.3gpp.mcvideo-info+xml MIME body was set to a value of
\"remote-init\" shall cache the value of \"viewing MCVideo user\" as the
ambient viewing client role for this call; and
5) shall cache the value contained in the \ element of
the application/vnd.3gpp.mcvideo-info+xml MIME body set in step 8) as the
ambient viewing type of this call.
[TS 24.281, clause 15.2.1.3]
Upon receiving a request from an MCVideo user to release an MCVideo ambient
viewing call:
The MCVideo client:
1) if the MCVideo client has not received a g.3gpp.mcvideo.ambient-viewing-
call-release feature-capability indicator as described in clause D.3 in the
Feature-Caps header field according to IETF RFC 6809 [63] in;
a) a received SIP INVITE request for the ambient viewing call; or
b) a received SIP 200 (OK) response to a sent SIP INVITE request for the
ambient viewing call;
> then shall skip the rest of the steps;
2) shall interact with the media plane as specified in 3GPP TS 24.581 [5];
3) shall generate a SIP BYE request according to rules and procedures of 3GPP
TS 24.229 [11] and IETF RFC 6086 [21]; and
4) shall send the SIP BYE request within the dialog of the MCVideo ambient
call session as specified in 3GPP TS 24.229 [11].
Upon receipt of the SIP 200 (OK) response to the SIP BYE request the MCVideo
client:
1) shall interact with the media plane as specified in 3GPP TS 24.581 [5];
2) if the cached ambient viewing client role is equal to \"viewed-to MCVideo
user\", shall provide no indication that an ambient viewing call has been
terminated;
3) if the cached ambient viewing client role is equal to \"viewing MCVideo
user\", may provide an indication to the MCVideo user that the ambient viewing
call has been terminated; and
4) shall clear the cache of the data stored as:
a) ambient viewing client role; and
b) ambient viewing type.
[TS 24.581, clause 6.2.5.2.3]
When an MCVideo call is established, the originating transmission participant:
1\. shall create an instance of a \'Transmission participant state transition
diagram for general reception control operation\'; and
2\. shall enter the \'U: reception controller\' state.
NOTE: From a transmission participant perspective the MCVideo call is
established when the application and signalling plane receives the SIP 200
(OK) response.
[TS 24.581, clause 6.2.5.3.2]
Upon receiving the media transmission notification from the transmission
control server, the transmission participant:
1\. if the first bit in the subtype of the media transmission notification
message is set to \'1\' (Acknowledgment is required) as described in subclause
9.2.2.1, shall send a Transmission control Ack message. The Transmission
control Ack message:
a. shall include the Message Type field set to \'6\' (Media transmission
notification); and
b. shall include the Source field set to \'0\' (the transmission participant
is the source);
2\. shall provide media transmission notification to the user;
3\. shall store the User ID and the SSRC of the user transmitting the media;
4\. if the Reception Mode field is set to \'0\' indicating automatic reception
mode:
a. shall create an instance of the \'Transmission participant state transition
diagram for basic reception control operation\';
b. shall map the stored User ID and the SSRC of the user transmitting the
media with the instance of \'Transmission participant state transition diagram
for basic reception control operation\' created in step a); and
c. shall enter the \'U: has permission to receive\' state;
5\. may display the details of the incoming media to the user; and
6\. shall remain in the \'U: reception controller\' state.
[TS 24.581, clause 6.2.5.3.3]
Upon receiving an indication from the user to request permission to receive
media, the transmission participant:
1\. shall send the Receive Media Request message toward the transmission
control server; The Receive Media Request message:
a. if a different priority than the normal priority is required, shall include
the Reception Priority field with the priority not higher than negotiated with
the transmission control server as specified in subclause 14.3.3; and
b. if the receive media request is a broadcast group call, system call,
emergency call or an imminent peril call, shall include a Transmission
Indicator field indicating the relevant call types;
2\. shall create an instance of the \'Transmission participant state
transition diagram for basic reception control operation\';
3\. shall map the stored User ID and the SSRC of the user transmitting the
media with instance of \'Transmission participant state transition diagram for
basic reception control operation\' created in step 2; and
4\. shall remain in the \'U: reception controller\' state.
[TS 24.581, clause 6.2.5.4.5]
Upon receiving a granted response for Receive media request message, the
transmission participant:
1\. if the first bit in the subtype of the Receive media response message is
set to \'1\' (Acknowledgment is required) as described in subclause 9.2.2.1,
shall send a Transmission control Ack message. The Transmission control Ack
message:
a. shall include the Message Type field set to \'7\' (Receive media response);
and
b. shall include the Source field set to \'0\' (the transmission participant
is the source);
2\. shall provide receive media success notification to the user;
3\. if the Receive Media Indicator field is included and the B-bit is set to
\'1\' (Broadcast group call), shall provide a notification to the user
indicating the type of call;
4\. shall stop timer T103 (Receive Media Request); and
5\. shall enter the \'U: has permission to receive\' state.
##### 6.7.1.3 Test description {#test-description-38 .H6}
##### 6.7.1.3.1 Pre-test conditions {#pre-test-conditions-38 .H6}
##### System Simulator: {#system-simulator-31 .H6}
\- SS (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
##### IUT: {#iut-30 .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
##### Preamble: {#preamble-31 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- The MCVideo user is authorized to initiate remotely initiated ambient
viewing: the \ element of the
\ element is present in the MCVideo user profile document and is set
to \"true\"
\- UE States at the end of the preamble
\- The UE is in E-UTRA Registered, Idle Mode state.
\- The MCVideo Client Application has been activated and User has registered-
in as the MCVideo User with the Server as active user at the Client
##### 6.7.1.3.2 Test procedure sequence {#test-procedure-sequence-38 .H6}
Table 6.7.1.3.2-1: Main Behaviour
+------------+------------+------------+---------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +============+============+============+=========+=========+====+ | | | U - S | Message | | | +------------+------------+------------+---------+---------+----+ | 1 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | the | | | | | | | est | | | | | | | ablishment | | | | | | | of a | | | | | | | remotely | | | | | | | initiated | | | | | | | ambient | | | | | | | viewing | | | | | | | call to | | | | | | | user B. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 2 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | the | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | CO | | | | | | | establ | | | | | | | ishment/mo | | | | | | | dification | | | | | | | without | | | | | | | p | | | | | | | rovisional | | | | | | | responses | | | | | | | other than | | | | | | | 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3B.1.3-1 | | | | | | | to | | | | | | | establish | | | | | | | a group | | | | | | | call with | | | | | | | automatic | | | | | | | co | | | | | | | mmencement | | | | | | | mode and | | | | | | | without | | | | | | | implicit | | | | | | | tr | | | | | | | ansmission | | | | | | | control | | | | | | | according | | | | | | | to option | | | | | | | a of NOTE | | | | | | | 1 in TS | | | | | | | 36.579.1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3A.1.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 3-6 | Void | - | - | - | - | +------------+------------+------------+---------+---------+----+ | 7 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | notify the | | | | | | | user that | | | | | | | the call | | | | | | | has been | | | | | | | es | | | | | | | tablished? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 8 | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | Media | | | | | | | Tr | | | | | | | ansmission | | | | | | | No | | | | | | | tification | | | | | | | and | | | | | | | Request | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.3.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | 9 | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | provide | | | | | | | receive | | | | | | | media | | | | | | | success | | | | | | | no | | | | | | | tification | | | | | | | to the | | | | | | | user? | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 10 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | release | | | | | | | the call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +------------+------------+------------+---------+---------+----+ | 11 | Check: | - | - | 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CO | | | | | | | call | | | | | | | release\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3.10.3-1? | | | | | +------------+------------+------------+---------+---------+----+ | NOTE 1: | | | | | | | This | | | | | | | action is | | | | | | | expected | | | | | | | to be done | | | | | | | via a | | | | | | | suitable | | | | | | | impl | | | | | | | ementation | | | | | | | dependent | | | | | | | MMI. | | | | | | +------------+------------+------------+---------+---------+----+
##### 6.7.1.3.3 Specific message contents {#specific-message-contents-38 .H6}
Table 6.7.1.3.3-1: SIP INVITE from the UE (Step 2, Table 6.7.1.3.2-1;\ Step 2,
TS 36.579-1 [2] Table 5.3B.1.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.5.1-1, condition PRIVATE-CALL
* * *
Information Element Value/remark Comment Reference Condition **Priv-Answer-
Mode**  
**answer-mode-value** _\"Auto\"_  
**answer-mode-param** _"_**require"**  
**Message-body**  
MIME body part **SDP message**  
MIME-part-body SDP as described in Table 6.7.1.3.3-2  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.7.1.3.3-3
Table 6.7.1.3.3-2: SDP in SIP INVITE (Table 6.7.1.3.3-1)
+--------------+--------------+--------------+-----------+-----------+ | Derivation | | | | | | Path: TS | | | | | | 36.579-1 | | | | | | [2], Table | | | | | | 5.5.3.1.1-2, | | | | | | condition | | | | | | P | | | | | | RIVATE-CALL, | | | | | | INITIAL | | | | | | _SDP_OFFER | | | | | +==============+==============+==============+===========+===========+ | Information | Value/remark | Comment | Reference | Condition | | Element | | | | | +--------------+--------------+--------------+-----------+-----------+ | **Media | |** Media | | | | descri | | description | | | | ption[2]**| | for video** | | | +--------------+--------------+--------------+-----------+-----------+ | **media | | a=line | | | | attribute** | | | | | | | | attrib | | | | | | ute=recvonly | | | +--------------+--------------+--------------+-----------+-----------+ | recvonly | | | | | +--------------+--------------+--------------+-----------+-----------+
Table 6.7.1.3.3-3: MCVideo-Info in SIP INVITE (Table 6.7.1.3.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2
* * *
Information Element Value/remark Comment Reference Condition mcvideoinfo  
mcvideo-Params  
session-type \"ambient-viewing\"  
anyExt  
ambient-viewing-type \"remote-init\"
Table 6.7.1.3.3-4: Void
Table 6.7.1.3.3-5: SIP 200 (OK) from the SS (Step 5, Table 6.7.1.3.2-1;\ Step
4, TS 36.579-1 [2] Table 5.3B.1.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.17.1.2-1, condition INVITE-RSP
* * *
Information Element Value/remark Comment Reference Condition **Feature-Caps**  
fc-value \"+g.3gpp.mcvideo.ambient-viewing-call-release\" TS 24.281 [26]
clause 15.4.2  
**Message-body**  
SDP Message As described in Table 6.7.1.3.3-6
Table 6.7.1.3.3-6: SDP in SIP 200 (OK) (Table 6.7.1.3.3-6)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.2-2, condition SDP_ANSWER
* * *
Table 6.7.1.3.3-7..8: Void
### 6.7.2 On-network / On-demand ambient viewing call / Remote initiated
ambient viewing call / Client Terminated (CT)
##### 6.7.2.1 Test Purpose (TP) {#test-purpose-tp-39 .H6}
##### (1) {#section-157 .H6}
**with** { the UE (MCVideo Client) registered and authorised for MCVideo
Service }
**ensure that** {
**when** { the UE (MCVideo Client) receives a SIP INVITE message to establish
a MCVideo remote initiated ambient viewing call }
**then** { UE (MCVideo Client) sends a SIP 200 (OK) message }
}
##### (2) {#section-158 .H6}
**with** { UE (MCVideo Client) having an ongoing MCVideo remote initiated
ambient viewing call }
**ensure that** {
**when** { UE (MCVideo Client) engages in communication with the calling
MCVideo client }
**then** { UE (MCVideo Client) respects the Transmission Control imposed by
the MCVideo Server }
}
##### (3) {#section-159 .H6}
**with** { UE (MCVideo Client) having an ongoing MCVideo remote initiated
ambient viewing call }
**ensure that** {
**when** { UE (MCVideo Client) receives a SIP BYE message to terminate the
ongoing MCVideo remote initiated ambient viewing call }
**then** { UE (MCVideo Client) sends a SIP 200 (OK) message and leaves the
MCVideo session }
}
##### 6.7.2.2 Conformance requirements {#conformance-requirements-39 .H6}
References: The conformance requirements covered in the present TC are
specified in: TS 24.281, clauses 15.2.1.2, 15.2.1.4, and in TS 24.581, clauses
6.2.4.2.3, 6.2.4.4.6, 6.2.4.5.7. The following represents a copy/paste
extraction of the requirements relevant to the test purpose; any references
within the copy/paste text should be understood within the scope of the core
spec they have been copied from. Unless otherwise stated these are Rel-15
requirements.
[TS 24.281, clause 15.2.1.2]
Upon receipt of an initial SIP INVITE request, the MCVideo client shall follow
the procedures for termination of multimedia sessions in the IM CN subsystem
as specified in 3GPP TS 24.229 [11] with the clarifications below.
The MCVideo client:
1) may reject the SIP INVITE request if either of the conditions in step a) or
b) are met:
a) MCVideo client is already occupied in another session and the number of
simultaneous sessions exceeds \, the maximum simultaneous MCVideo
session for private call, as specified in TS 24.484 [25]; or
b) MCVideo client does not have enough resources to handle the call;
c) if neither condition a) nor b) are met, continue with the rest of the
steps;
2) if the SIP INVITE request is rejected in step 1):
a) shall respond towards the participating MCVideo function either with:
i) an appropriate reject code as specified in 3GPP TS 24.229 [11] and warning
texts as specified in clause 4.4.2; or
ii) with a SIP 480 (Temporarily unavailable) response not including warning
texts if the user is authorised to restrict the reason for failure according
to \ as specified in 3GPP TS 24.484 [25]; and
b) skip the rest of the steps of this clause;
3) if the SDP offer of the SIP INVITE request contains an \"a=key-mgmt\"
attribute field with a \"mikey\" attribute value containing a MIKEY-SAKKE
I_MESSAGE:
a) shall extract the MCVideo ID of the originating MCVideo from the initiator
field (IDRi) of the I_MESSAGE as described in 3GPP TS 33.180 [8];
b) shall convert the MCVideo ID to a UID as described in 3GPP TS 33.180 [8];
c) shall use the UID to validate the signature of the MIKEY-SAKKE I_MESSAGE as
described in 3GPP TS 33.180 [8];
d) if authentication verification of the MIKEY-SAKKE I_MESSAGE fails, shall
reject the SIP INVITE request with a SIP 488 (Not Acceptable Here) response as
specified in IETF RFC 4567 [6], and include warning text set to \"136
authentication of the MIKEY-SAKKE I_MESSAGE failed\" in a Warning header field
as specified in clause 4.4; and
e) if the signature of the MIKEY-SAKKE I_MESSAGE was successfully validated:
i) shall extract and decrypt the encapsulated PCK using the terminating
user\'s (KMS provisioned) UID key as described in 3GPP TS 33.180 [8]; and
ii) shall extract the PCK-ID, from the payload as specified in 3GPP TS 33.180
[8];
NOTE 1: With the PCK successfully shared between the originating MCVideo
client and the terminating MCVideo client, both clients are able to use
SRTP/SRTCP to create an end-to-end secure session.
4) may check if a Resource-Priority header field is included in the incoming
SIP INVITE request and may perform further actions outside the scope of this
specification to act upon an included Resource-Priority header field as
specified in 3GPP TS 24.229 [11];
5) if the received SIP INVITE request contains an
application/vnd.3gpp.mcvideo-info+xml MIME body with the \
element containing the \ element with the \ element set to a value of \"local-init\", may display to the MCVideo
user the MCVideo ID of the inviting MCVideo user;
6) shall perform the automatic commencement procedures specified in clause
6.2.3.1.1;
NOTE 2: Auto-answer is the commencement mode for both participants in locally
initiated and remotely initiated ambient viewing calls.
7) if the \ element contained in the
application/vnd.3gpp.mcvideo-info+xml MIME body in the received SIP INVITE
request was set to a value of \"remote-init\":
a) shall cache the value of \"viewed-to MCVideo user\" as the ambient viewing
client role for this call; or;
b) if the \ element contained in the
application/vnd.3gpp.mcvideo-info+xml MIME body was set to a value of \"local-
init\" \" shall cache the value of \"viewing MCVideo user\" as the ambient
viewing client role for this call;
8) if the received SIP INVITE request includes an alert-info header field as
specified in IETF RFC 3261 [15] and as updated by IETF RFC 7462 [66] set to a
value of \"\\" shall not give any indication of the progress
of the call to the MCVideo user;
NOTE 3: The alert-info header field having the value of
\"\\" is intended to result in having a \"null\" alert, i.e.
an alert with no content or physical manifestation of any kind.
9) if the \ element contained in the
application/vnd.3gpp.mcvideo-info+xml MIME body is set to a value of \"local-
init\", should provide an indication to the MCVideo user that the ambient
viewing call is in progress; and
NOTE 4: The terminating user in a remotely initiated ambient viewing is the
viewed-to MCVideo user and is intended to be totally unaware that their camera
is activated and a call is in progress.
10) shall cache as the ambient viewing type for the call the value contained
in the \ element of the application/vnd.3gpp.mcvideo-
info+xml MIME body contained in the received SIP INVITE request.
[TS 24.281, clause 15.2.1.4]
This clause is referenced from other procedures.
Upon receipt of a SIP BYE request in the dialog of an ambient viewing session,
the MCVideo client:
1) shall comply with the procedures of clause 6.2.6;
2) if the cached ambient viewing client role is equal to \"viewed-to MCVideo
user\", shall provide no indication that an ambient viewing call has been
terminated;
3) if the cached ambient viewing client role is equal to \"viewing MCVideo
user\", may provide an indication to the MCVideo user that the ambient viewing
call has been terminated; and
4) shall clear the cache of the data stored as:
a) ambient viewing client role; and
b) ambient viewing type.
[TS 24.581, clause 6.2.4.2.3]
When an MCVideo call is established, the terminating transmission participant:
1\. shall create an instance of a \'Transmission participant state transition
diagram for basic transmission control operation\'; and
2\. shall enter the \'U: has no permission to transmit\' state.
NOTE: From a transmission participant perspective the MCVideo call is
established when the application and signalling plane sends the SIP 200 (OK)
response.
[TS 24.581, clause 6.2.4.4.6]
Upon receiving a Transmission Granted message from the transmission control
server, the transmission participant:
1\. if the first bit in the subtype of the Transmission Granted message is set
to \'1\' (Acknowledgment is required) as described in clause 9.2.2.1, shall
send a Transmission control Ack message. The Transmission control Ack message:
a. shall include the Message Type field set to \'0\' (Transmission Granted);
and
b. shall include the Source field set to \'0\' (the transmission participant
is the source);
2\. shall store the SSRC of granted transmission participant received in the
Transmission Granted message and use it in the RTP media packets until the
transmission is relased;
3\. shall provide Transmission granted notification to the user, if not
already done;
4\. shall stop timer T100 (Transmission Request); and
5\. shall enter the \'U: has permission to transmit\' state.
[TS 24.581, clause 6.2.4.5.7]
Upon receiving a Transmission End Request message from transmission control
server, the transmission participant:
1\. shall inform the user that the permission to send RTP media is being
revoked;
2\. may give information to the user about the reason for terminating the
permission to send media;
3\. shall request the media in the MCVideo client to discard any remaining
buffered RTP media packets and to stop forwarding of encoded video to the
MCVideo server; and
4\. shall send Transmission End Response message to the transmission control
server.
5\. if the session is not a broadcast group call or if the A-bit in the
Transmission Indicator field is set to \'1\' (Normal call), shall enter the
\'U: has no permission to transmit\' state; and
6\. if the session was initiated as a broadcast group call:
a. shall indicate to the MCVideo client the media transmission is completed;
and
b shall enter the \'Call releasing\' state.
##### 6.7.2.3 Test description {#test-description-39 .H6}
##### 6.7.2.3.1 Pre-test conditions {#pre-test-conditions-39 .H6}
##### System Simulator: {#system-simulator-32 .H6}
\- SS (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
##### IUT: {#iut-31 .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
##### Preamble: {#preamble-32 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- UE States at the end of the preamble
\- The UE is in E-UTRA Registered, Idle Mode state.
\- The MCVideo Client Application has been activated and User has registered-
in as the MCVideo User with the Server as active user at the Client
##### 6.7.2.3.2 Test procedure sequence {#test-procedure-sequence-39 .H6}
Table 6.7.2.3.2-1: Main Behaviour
+-----------+-----------+-----------+-----------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +===========+===========+===========+===========+=========+====+ | | | U - S | Message | | | +-----------+-----------+-----------+-----------+---------+----+ | 1 | Check: | - | - | 1 | - | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCX CT | | | | | | | session | | | | | | | establis | | | | | | | hment/mod | | | | | | | ification | | | | | | | without | | | | | | | pr | | | | | | | ovisional | | | | | | | responses | | | | | | | other | | | | | | | than 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5.3.4.3-1 | | | | | | | to | | | | | | | establish | | | | | | | a remote | | | | | | | initiated | | | | | | | ambient | | | | | | | viewing | | | | | | | call? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 2 | The SS | \\"  
**Message-body**  
MIME body part **SDP message**  
MIME-part-body SDP as described in Table 6.7.2.3.3-2  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.7.2.3.3-3
Table 6.7.2.3.3-2: SDP in SIP INVITE (Table 6.7.2.3.3-1)
+--------------+--------------+--------------+-----------+-----------+ | Derivation | | | | | | Path: TS | | | | | | 36.579-1 | | | | | | [2], Table | | | | | | 5.5.3.1.2-2, | | | | | | condition | | | | | | P | | | | | | RIVATE-CALL, | | | | | | INITIAL | | | | | | _SDP_OFFER | | | | | +==============+==============+==============+===========+===========+ | Information | Value/remark | Comment | Reference | Condition | | Element | | | | | +--------------+--------------+--------------+-----------+-----------+ | **Media | |** Media | | | | descri | | description | | | | ption[2]**| | for video** | | | +--------------+--------------+--------------+-----------+-----------+ | **media | | a=line | | | | attribute** | | | | | | | | attrib | | | | | | ute=recvonly | | | +--------------+--------------+--------------+-----------+-----------+ | recvonly | | | | | +--------------+--------------+--------------+-----------+-----------+
Table 6.7.2.3.3-3: MCVideo-Info in SIP INVITE (Table 6.7.2.3.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.2-2
* * *
Information Element Value/remark Comment Reference Condition mcvideoinfo  
mcvideo-Params  
session-type \"ambient-viewing\"  
anyExt  
ambient-viewing-type \"remote-init\"
Table 6.7.2.3.3-4: SIP 200 (OK) from the UE (Step 1, Table 6.7.2.3.2-1;\ Step
4, TS 36.579-1 [2], Table 5.3.4.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.17.1.1-1, condition INVITE-RSP
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **SDP message**  
MIME-part-body SDP as described in Table 6.7.2.3.3-5  
MIME body part **MCVideo-Info**  
MIME-part-body MCVideo-Info as described in Table 6.7.2.3.3-6
Table 6.7.2.3.3-5: SDP in SIP 200 (OK) (Table 6.7.2.3.3-4)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.1.1-2, condition SDP_ANSWER
* * *
Table 6.7.2.3.3-6: MCVideo-Info in SIP 200 (OK) (Table 6.7.2.3.3-4)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.3.2.1-2, condition INVITE-RSP
* * *
Table 6.7.2.3.3-7: Void
## 6.8 Use of MBMS transmission
6.8.1 On-network / MBMS / MBMS Bearer Announcement / MBMS Bearer Listening
Status / Transition to MBMS from Unicast / MBMS Transmission Control /
Transition to Unicast from MBMS
##### 6.8.1.1 Test Purpose (TP) {#test-purpose-tp-40 .H6}
##### (1) {#section-160 .H6}
**with** { UE (MCVideo Client) registered and authorised for MCVideo Service }
ensure that {
**when** { the MCVideo User requests the establishment of an MCVideo On-demand
Pre-arranged Group Call }
**then** { UE (MCVideo Client) requests On-demand Pre-arranged Group Call by
sending a SIP INVITE message, **and** , after indication from the MCVideo
Server that the call was established and receiving a Transmission Granted
message, notifies the user }
}
##### (2) {#section-161 .H6}
**with** { the UE (MCVideo Client) having established a MCVideo On-demand Pre-
arranged Group Call with Automatic Commencement Mode }
ensure that {
**when** { the MCVideo User engages in communication with the invited MCVideo
User(s) }
**then** { the UE (MCVideo Client) respects the Transmission Control imposed
by the SS (MCVideo Server) }
}
##### (3) {#section-162 .H6}
**with** { UE (MCVideo Client) having established an MCVideo On-demand Pre-
arranged Group Call }
ensure that {
**when** { the UE (MCVideo Client) receives MBMS bearer announcements via SIP
MESSAGE messages }
**then** { UE (MCVideo Client) responds by sending a SIP 200 (OK) to the SIP
MESSAGE message **and** the UE (MCVideo Client) sends an MBMS listening status
message via SIP MESSAGE }
}
##### (4) {#section-163 .H6}
**with** { UE (MCVideo Client) having established an MCVideo On-demand Pre-
arranged Group Call with Automatic Commencement Mode }
ensure that {
**when** { the UE (MCVideo Client) receives MBMS subchannel control messages }
**then** { UE (MCVideo Client) responds by sending an MBMS listening status
message via SIP MESSAGE }
}
##### (5) {#section-164 .H6}
**with** { UE (MCVideo Client) listening to the MBMS subchannel during an
ongoing MCVideo On-demand Pre-arranged Group Call }
ensure that {
**when** { the MCVideo User (MCVideo Client) engages in communication with the
invited MCVideo User(s) }
**then** { UE (MCVideo Client) respects the transmission control imposed by
the MCVideo Server on the MBMS subchannel **and** continues to respect
transmission control imposed by the MCVideo Server via unicast }
}
##### (6) {#section-165 .H6}
**with** { UE (MCVideo Client) no longer listening to the MBMS subchannel
during an ongoing MCVideo On-demand Pre-arranged Group Call }
ensure that {
**when** { the MCVideo User (MCVideo Client) engages in communication with the
invited MCVideo User(s) }
**then** { UE (MCVideo Client) respects transmission control imposed by the
MCVideo Server via unicast }
}
##### (7) {#section-166 .H6}
**with** { UE (MCVideo Client) having established an MCVideo On-demand Pre-
arranged Group Call with Automatic Commencement Mode }
ensure that {
**when** { the UE (MCVideo Client) receives an explicit MuSiK download message
}
**then** { UE (MCVideo Client) sends a 200 OK response to accept the key and
associates the key with the group}
}
##### (8) {#section-167 .H6}
**with** { UE (MCVideo Client) having an ongoing On-demand Pre-arranged Group
Call
**when** { the MCVideo User) requests to end the On-demand Pre-arranged Group
Call }
**then** { UE (MCVideo Client) sends a SIP BYE message and leaves the call }
}
##### 6.8.1.2 Conformance Requirements {#conformance-requirements-40 .H6}
References: The conformance requirements covered in the present TC are
specified in: TS 24.281 clauses 16.2.2, 16.2.3.2, 16.2.4; and TS 24.581
clauses 6.2.4.2.2, 6.2.4.4.6, 6.2.4.5.3, 6.2.4.6.4, 6.2.4.3.2. Unless
otherwise stated these are Rel-15 requirements.
[TS 24.281, clause 16.2.2]
The MCVideo client associates each received application/sdp MIME body and each
received security key with a general purpose MBMS subchannel announced in the
same MBMS Bearer Announcement message. When receiving a MapGroupToBearer
message, the MCVideo client interprets its content (e.g. the m= line number)
in the context of the application/sdp MIME body associated with the general
purpose MBMS subchannel on which the MapGroupToBearer was received.
When the MCVideo client receives a SIP MESSAGE request containing:
> 1) a P-Asserted-Service header field containing the \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\"; and
>
> 2) an application/vnd.3gpp.mcvideo-mbms-usage-info+xml MIME body containing
> one or more \ element(s);
then the MCVideo client for each \ element in the
application/vnd.3gpp.mcvideo-mbms-usage-info+xml MIME body:
> 1) if the \ element is present:
>
> a) if an \ element with the same value of the \ element
> is already stored:
>
> i) shall replace the old \ element with the \
> element received in the application/vnd.3gpp.mcvideo-mbms-usage-info+xml
> MIME body;
>
> b) if there is no \ element with the same value of the \
> element stored:
>
> i) shall store the received \ element;
>
> c) shall associate the received announcement with the received
> application/sdp MIME body;
>
> d) shall associate the received announcement with the received \
> element;
>
> e) shall store the MBMS public service identity of the participating MCVideo
> function received in the P-Asserted-Identity header field and associate the
> MBMS public service identity with the new \ element;
>
> f) if a \"a=key-mgmt\" media-level attribute with the \"mikey\" key
> management and protocol identifier and a MIKEY-SAKKE I_MESSAGE is included
> for the general purpose MBMS subchannel defined in the \"m=application\"
> media line in the application/sdp MIME body in the received SIP MESSAGE
> request,
>
> i) shall extract the initiator URI from the initiator field (IDRi) of the
> I_MESSAGE as described in 3GPP TS 33.180 [8]. If the initiator URI deviates
> from the public service identity of the participating MCVideo function
> serving the MCVideo user, shall reject the SIP MESSAGE request with a SIP
> 488 (Not Acceptable Here) response as specified in IETF RFC 4567 [6], and
> include warning text set to \"136 authentication of the MIKEY-SAKE I_MESSAGE
> failed\" in a Warning header field as specified in clause 4.4 and shall not
> continue with the rest of the steps;
>
> ii) shall convert the initiator URI to a UID as described in 3GPP TS 33.180
> [8];
>
> iii) shall use the UID to validate the signature of the MIKEY-SAKKE
> I_MESSAGE as described in 3GPP TS 33.180 [8];
>
> iv) if authentication verification of the MIKEY-SAKKE I_MESSAGE fails, shall
> reject the SIP MESSAGE request with a SIP 488 (Not Acceptable Here) response
> as specified in IETF RFC 4567 [6], and include warning text set to \"136
> authentication of the MIKEY-SAKE I_MESSAGE failed\" in a Warning header
> field as specified in clause 4.4 and shall not continue with the rest of the
> steps;
>
> v) shall extract and decrypt the encapsulated MSCCK using the participating
> MCVideo function\'s (KMS provisioned) UID key as described in 3GPP TS 33.180
> [8]; and
>
> vi) shall extract the MSCCK-ID, from the payload as specified in 3GPP TS
> 33.180 [8];
>
> NOTE: With the MSCCK successfully shared between the participating MCVideo
> function and the served UEs, the participating MCVideo function is able to
> securely send MBMS subchannel control messages to the MCVideo clients.
>
> g) shall listen to the general purpose MBMS subchannel defined in the
> \"m=application\" media line in the application/sdp MIME body in the
> received SIP MESSAGE request when entering an MBMS service area where the
> announced MBMS bearer is available; and
>
> h) shall check the condition for sending a listening status report as
> specified in the clause 16.2.3; and
>
> 2) if no \ element is present:
>
> a) shall discard a previously stored \ element identified by
> the value of the \;
>
> b) shall remove the association with the stored application/sdp MIME body
> and stop listening to the general purpose MBMS subchannel;
>
> c) if no more \ elements associated with the stored
> application/sdp MIME body are stored in the MCVideo client, shall remove the
> stored application/sdp MIME body; and
>
> d) check the condition for sending a listening status report as specified in
> the clause 16.2.3.
[TS 24.281, clause 16.2.3.2]
When the MCVideo client wants to report the MBMS bearer listening status, the
MCVideo client:
> NOTE 1: The application/vnd.3gpp.mcvideo-mbms-usage-info+xml can contain
> both the listening status \"listening\" and \"not listening\" at the same
> time.
>
> 1) shall generate a SIP MESSAGE request in accordance with 3GPP TS 24.229
> [11] and IETF RFC 3428 [17]; and
>
> a) shall include in the Request-URI the MBMS public service identity of the
> participating MCVideo function received in the P-Asserted-Identity header
> field of the announcement message;
>
> b) shall include an Accept-Contact header field with the g.3gpp.icsi-ref
> media-feature tag with the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" along with parameters \"require\" and
> \"explicit\" according to IETF RFC 3841 [20];
>
> c) should include a public user identity in the P-Preferred-Identity header
> field as specified in 3GPP TS 24.229 [11];
>
> d) shall include a P-Preferred-Service header field with the value
> \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\";
>
> e) shall include an application/vnd.3gpp.mcvideo-mbms-usage-info+xml MIME
> body with the \ element set to \"1\";
>
> f) if the MCVideo client is listening to the MBMS bearer, the
> application/vnd.3gpp.mcvideo-mbms-usage-info+xml MIME body:
>
> i) shall include an \ element set to \"listening\";
>
> ii) if the intention is to report that the MCVideo client is listening to
> the MBMS subchannel for an ongoing transmission in a session (e.g. as the
> response to the Map Group To Bearer message), shall include the MCVideo
> session identity of the ongoing transmission in a \ element;
>
> iii) shall include one or more \ elements for which the listening
> status applies; and
>
> iv) if the intention is to report that the MCVideo client is listening to
> the general purpose MBMS subchannel, shall include the \
> element set to \"true\";
>
> g) if the MCVideo client is not listening, the application/vnd.3gpp.mcvideo-
> mbms-usage-info+xml MIME body:
>
> i) shall include an \ element set to \"not-
> listening\";
>
> iii) shall include one or more \ elements for which the listening
> status applies;
>
> iii) if the intention is to report that the MCVideo client is no longer
> listening to the MBMS subchannel in an ongoing session (e.g. as the response
> to Unmap Group to Bearer message), shall include the MCVideo session
> identity in a \ element; and
>
> iv) if the intention is to report that the MCVideo client is no longer
> listening to general purpose MBMS subchannel, shall include the \ purpose> element set to \"false\"; and
>
> NOTE 2: If the MCVideo client reports that the MCVideo client is no longer
> listening to the general purpose MBMS subchannel, it is implicitly
> understood that the MCVideo client no longer listens to any MBMS subchannel
> in ongoing transmissions that the MCVideo client previously reported status
> \"listening\".
>
> h) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body with the
> \ set to the MCVideo ID of the user; and
>
> 2) shall send the SIP MESSAGE request according to 3GPP TS 24.229 [11].
When the MCVideo client meets all the conditions specified in clause 16.2.3.1
for reporting a change in an MBMS bearer suspension status, the MCVideo
client:
> 1) shall generate a SIP MESSAGE request in accordance with 3GPP TS 24.229
> [11] and IETF RFC 3428 [17]; and
>
> a) shall include in the Request-URI the MBMS public service identity of the
> participating MCVideo function received in the P-Asserted-Identity header
> field of the announcement message;
>
> b) shall include an Accept-Contact header field with the g.3gpp.icsi-ref
> media-feature tag with the value of \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\" along with parameters \"require\" and
> \"explicit\" according to IETF RFC 3841 [20];
>
> c) should include a public user identity in the P-Preferred-Identity header
> field as specified in 3GPP TS 24.229 [11];
>
> d) shall include a P-Preferred-Service header field with the value
> \"urn:urn-7:3gpp-service.ims.icsi.mcvideo\";
>
> e) shall include an application/vnd.3gpp.mcvideo-mbms-usage-info+xml MIME
> body with the \ element set to \"1\";
>
> f) if at least one MBMS bearer is about to be suspended, the
> application/vnd.3gpp.mcvideo-mbms-usage-info+xml MIME body:
>
> i) shall include an \ element set to \"suspending\";
>
> ii) shall set the \ element to the total number
> of the included \ elements and \ elements;
>
> iii) shall include \ element(s) set to the TMGI value for
> each of the MTCHs on the same MCH corresponding to the MBMS bearers about to
> be suspended; and
>
> iv) may include \ elements, if available, corresponding to the
> TMGI values for other MTCHs on the same MCH as the MBMS bearers to be
> suspended
>
> NOTE 3: To report the suspension of MTCHs on different MCHs, the MCVideo
> client sends a separate message for each of the involved MCHs.
>
> g) if the MBMS bearer is no longer about to be suspended, the
> application/vnd.3gpp.mcvideo-mbms-usage-info+xml MIME body:
>
> i) shall include an \ element set to \"not-
> suspending\";
>
> ii) shall set the \ element to the number of
> included \ elements; and
>
> iii) shall include a \ element set to the corresponding TMGI
> value for each of the MTCHs of the MBMS bearers that are no longer about to
> be suspended; and
>
> h) shall include an application/vnd.3gpp.mcvideo-info+xml MIME body with the
> \ set to the MCVideo ID of the user; and
>
> 2) shall send the SIP MESSAGE request according to 3GPP TS 24.229 [11].
>
> NOTE 4: The MCVideo client reports in separate messages the MBMS bearers
> that are about to be suspended and the MBMS bearers that are no longer about
> to be suspended.
[TS 24.281, clause 16.2.4]
When the MCVideo client receives a SIP MESSAGE request containing:
> 1) a P-Asserted-Service header field containing the \"urn:urn-7:3gpp-
> service.ims.icsi.mcvideo\"; and
>
> 2) with one of the following:
>
> a) an application/vnd.3gpp.mcvideo-mbms-usage-info+xml MIME body containing
> an \ element with at least one \ sub
> element; or
>
> b) an application/vnd.3gpp.mcvideo-mbms-usage-info+xml MIME body containing
> an \ element with zero or more \ sub
> elements;
the MCVideo client shall:
> 1) if the received message contains an \
> element, set the impacted groups to be those groups identified by the
> \ sub elements;
>
> 2) if the received message contains an \ element
> without \ sub elements, set the impacted groups to be all groups not
> associated with currently valid explicit MuSiK downloads; and
>
> 3) if the received message contains an \ element
> with \ sub elements, first dissociate those groups identified by the
> \ sub elements from currently valid associations with explicit MuSiK
> downloads and then set the impacted groups to be all groups not associated
> with currently valid explicit MuSiK downloads.
If the key identifier within the CSB-ID of the MIKEY payload is a MuSiK-ID (4
most-significant bits have the value \'6\'), the MCVideo client:
> 1) shall process the MIKEY payload according to 3GPP TS 33.180 [8], as
> follows:
>
> a) if the initiator field (IDRi) has type \'URI\' (identity hiding is not
> used), the client:
>
> i) shall extract the initiator URI from the initiator field (IDRi) of the
> I_MESSAGE as described in 3GPP TS 33.180 [8]. If the initiator URI deviates
> from the public service identity of the participating MCVideo function
> serving the MCVideo client, shall reject the SIP MESSAGE request by sending
> a SIP 488 (Not Acceptable Here) response as specified in IETF RFC 4567 [47],
> and including warning text set to \"136 authentication of the MIKEY-SAKKE
> I_MESSAGE failed\" in a Warning header field as specified in clause 4.4 and
> shall not continue with the rest of the steps; and
>
> ii) shall convert the initiator URI to a UID as described in 3GPP TS 33.180
> [8];
>
> b) otherwise, if the initiator field (IDRi) has type \'UID\' (identity
> hiding in use), the client:
>
> i) shall convert the public service identity of participating MCVideo
> function serving the MCVideo user to a UID as described in 3GPP TS 33.180
> [8]; and
>
> ii) shall compare the generated UID with the UID in the initiator field
> (IDRi) of the I_MESSAGE as described in 3GPP TS 33.180 [8]. If the two
> initiator UIDs deviate from each other, shall reject the SIP MESSAGE request
> by sending a SIP 488 (Not Acceptable Here) response as specified in IETF RFC
> 4567 [47], and including warning text set to \"136 authentication of the
> MIKEY-SAKKE I_MESSAGE failed\" in a Warning header field as specified in
> clause 4.4 and shall not continue with the rest of the steps;
>
> c) otherwise, shall reject the SIP MESSAGE request by sending a SIP 488 (Not
> Acceptable Here) response as specified in IETF RFC 4567 [47], and including
> warning text set to \"136 authentication of the MIKEY-SAKKE I_MESSAGE
> failed\" in a Warning header field as specified in clause 4.4 and shall not
> continue with the rest of the steps;
>
> d) shall use the UID to validate the signature of the I_MESSAGE as described
> in 3GPP TS 33.180 [8];
>
> e) if authentication verification of the I_MESSAGE fails or the I_MESSAGE
> does not contain a Status attribute, shall reject the SIP MESSAGE request by
> sending SIP 488 (Not Acceptable Here) response as specified in IETF RFC 4567
> [47], and including warning text set to \"136 authentication of the MIKEY-
> SAKKE I_MESSAGE failed\" in a Warning header field as specified in clause
> 4.4 and shall not continue with the rest of the steps; and
>
> f) shall examine the Status attribute and shall either mark the associated
> security functions as \"not in use\" or shall extract and store the
> encapsulated MuSiK and the corresponding MuSiK-ID from the payload as
> specified in 3GPP TS 33.180 [8]; and
>
> 2) for each of the impacted groups, shall either associate the status
> \'security not in use\' or shall add/replace in the storage associated with
> the group the MuSiKâ€‘ID and the MuSiK, for use (decrypted) as security key
> for floor control.
>
> NOTE: It is expected that the MCVideo client is capable of storing a
> different MuSiK for each MCVideo group of interest.
The MCVideo client shall respond with SIP 200 (OK) only if it finds the
message syntactically correct and recognizes it as a valid and error-free
MuSiK download (default or explicit) message.
[TS 24.581, clause 6.2.4.2.2]
When a call is initiated as described in 3GPP TS 24.281 [2], the transmission
participant:
> 1\. shall create an instance of the \'Transmission participant state
> transition diagram for basic transmission control operation\';
>
> 2\. if the originating transmission participant receives a transmission
> control message before it receives the SIP 200 (OK) response, shall store
> the transmission control message;
>
> NOTE: The originating transmission participant might receive a transmission
> control message before the SIP 200 (OK) response when initiating, joining or
> rejoining a call because of processing delays of the SIP 200 (OK) response
> in the SIP core.
>
> 3\. if the established MCVideo call is a chat group call and the SIP INVITE
> request is not an implicit Transmission request, shall enter the \'U: has no
> permission to transmit\' state;
>
> 4\. if for the established MCVideo call the SIP INVITE request is an
> implicit Transmission request:
>
> a. shall start timer T100 (Transmission Request) and initialise counter C100
> (Transmission Request) to 1;
>
> b. shall enter the \'U: pending request to transmit\' state; and
>
> c. if the transmission participant has received and stored a transmission
> control message before the reception of the SIP 200 (OK) response, shall act
> as if the transmission control message was received in the \'U: pending
> request to transmit\' state after entering the \'U: pending request to
> transmit\' state; and
>
> 5\. if the established MCVideo call is a broadcast group call, shall enter
> the \'U: has permission to transmit\' state.
When the transmission participant is rejoining an ongoing MCVideo call as
described in 3GPP TS 24.281 [2] the transmission participant shall enter the
\'U: has no permission to transmit\' state.
[TS 24.581, clause 6.2.4.4.6]
Upon receiving a Transmission Granted message from the transmission control
server, the transmission participant:
> 1\. if the first bit in the subtype of the Transmission Granted message is
> set to \'1\' (Acknowledgment is required) as described in subclause 9.2.2.1,
> shall send a Transmission control Ack message. The Transmission control Ack
> message:
>
> a. shall include the Message Type field set to \'0\' (Transmission Granted);
> and
>
> b. shall include the Source field set to \'0\' (the transmission participant
> is the source);
>
> 2\. shall store the SSRC of granted transmission participant received in the
> Transmission Granted message and use it in the RTP media packets until the
> transmission is released;
>
> 3\. shall provide Transmission granted notification to the user, if not
> already done;
>
> 4\. shall stop timer T100 (Transmission Request); and
>
> 5\. shall enter the \'U: has permission to transmit\' state.
[TS 24.581, clause 6.2.4.5.3]
Upon receiving an indication from the user to end the permission to send RTP
media, the transmission participant:
> 1\. shall send a Transmission end request message towards the transmission
> control server. The Transmission end request message, if the session is a
> broadcast call and if the session was established as a normal call, shall
> include the Transmission Indicator with the A-bit set to \'1\' (Normal
> call);
>
> 2\. shall start timer T101 (Transmission End Request) and initialize counter
> C101 (Transmission End Request) to 1; and
>
> 3\. shall enter the \'U: pending end of transmission\' state.
[TS 24.581, clause 6.2.4.6.4]
Upon receiving a Transmission end response message, the transmission
participant:
> 1\. if the first bit in the subtype of the Transmission end response message
> to \'1\' (Acknowledgment is required) as described in subclause 9.2.2.1,
> shall send a Transmission control Ack message. The Transmission control Ack
> message:
>
> a. shall include the Message Type field set to \'1\' (Transmission end
> response); and
>
> b. shall include the Source field set to \'0\' (the transmission participant
> is the source);
>
> 2\. may provide a Transmission end notification to the MCVideo user;
>
> 3\. if the Transmission Indicator field is included and the B-bit set to
> \'1\' (Broadcast group call), shall provide a notification to the user
> indicating the type of call;
>
> 4\. shall stop timer T101 (Transmission End Request);
>
> 5\. if the session is not a broadcast group call or if the A-bit in the
> Transmission Indicator field is set to \'1\' (Normal call), shall enter the
> \'U: has no permission to transmit\' state; and
>
> 6\. if the session was initiated as a broadcast group call:
>
> a. shall indicate to the MCVideo client the media transmission is completed;
> and
>
> b shall enter the \'Call releasing\' state.
[TS 24.581, clause 6.2.4.3.2]
Upon receiving an indication from the user to request permission to send
media, the transmission participant:
> 1\. void
>
> 2\. shall send the Transmission Request message toward the transmission
> control server; The Transmission Request message:
>
> a. if a different priority than the normal priority is required, shall
> include the Transmission Priority field with the priority not higher than
> negotiated with the transmission control server as specified in subclause
> 14.3.3; and
>
> b. if the Transmission request is a broadcast group call, system call,
> emergency call or an imminent peril call, shall include a Transmission
> Indicator field indicating the relevant call types;
>
> 3\. shall start timer T100 (Transmission Request) and initialise counter
> C100 (Transmission Request) to 1; and
>
> 4\. shall enter the \'U: pending request to transmit\' state.
##### 6.8.1.3 Test description {#test-description-40 .H6}
##### 6.8.1.3.1 Pre-test conditions {#pre-test-conditions-40 .H6}
##### System Simulator: {#system-simulator-33 .H6}
\- SS (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
##### IUT: {#iut-32 .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
##### Preamble: {#preamble-33 .H6}
\- A pre-activated MBMS bearer exists
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- UE States at the end of the preamble
\- The UE is in E-UTRA Registered, Idle Mode state.
\- The MCVideo Client Application has been activated and User has registered-
in as the MCVideo User with the Server as active user at the Client
##### 6.8.1.3.2 Test procedure sequence {#test-procedure-sequence-40 .H6}
Table 6.8.1.3.2-1: Main Behaviour
+-----------+-----------+-----------+-----------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +===========+===========+===========+===========+=========+====+ | | | U - S | Message | | | +-----------+-----------+-----------+-----------+---------+----+ | 1 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | the | | | | | | | esta | | | | | | | blishment | | | | | | | of a | | | | | | | group | | | | | | | call with | | | | | | | automatic | | | | | | | com | | | | | | | mencement | | | | | | | mode and | | | | | | | implicit | | | | | | | tra | | | | | | | nsmission | | | | | | | request. | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 2 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | CO | | | | | | | session | | | | | | | establis | | | | | | | hment/mod | | | | | | | ification | | | | | | | without | | | | | | | pr | | | | | | | ovisional | | | | | | | responses | | | | | | | other | | | | | | | than 100 | | | | | | | Trying\' | | | | | | | as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3B.1.3-1 | | | | | | | to | | | | | | | establish | | | | | | | a group | | | | | | | call with | | | | | | | automatic | | | | | | | com | | | | | | | mencement | | | | | | | mode | | | | | | | an | | | | | | | dimplicit | | | | | | | tra | | | | | | | nsmission | | | | | | | control | | | | | | | according | | | | | | | to option | | | | | | | b,ii of | | | | | | | NOTE 1 in | | | | | | | TS | | | | | | | 36.579.1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5. | | | | | | | 3B.1.3-1? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 3 | Check: | - | - | 1 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | provide | | | | | | | tra | | | | | | | nsmission | | | | | | | granted | | | | | | | not | | | | | | | ification | | | | | | | to the | | | | | | | user? | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 4 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | end of | | | | | | | tran | | | | | | | smission. | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 5 | Check: | - | - | 2 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | tra | | | | | | | nsmission | | | | | | | End | | | | | | | Request | | | | | | | CO\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5. | | | | | | | 3B.7.3-1? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 6 | Check: | - | - | 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | \'MCX SIP | | | | | | | MESSAGE | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3.33.3-1 | | | | | | | to | | | | | | | receive | | | | | | | an MBMS | | | | | | | bearer | | | | | | | ann | | | | | | | ouncement | | | | | | | about the | | | | | | | ava | | | | | | | ilability | | | | | | | of an | | | | | | | MBMS | | | | | | | bearer? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 7 | Check: | - | - | 3 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | \'MCX SIP | | | | | | | MESSAGE | | | | | | | CO\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3.32.3-1 | | | | | | | to send | | | | | | | an MBMS | | | | | | | Bearer | | | | | | | listening | | | | | | | status? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 8 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | tran | | | | | | | smission. | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 9 | Check: | --> | Tra | 2 | P | | | Does the | | nsmission | | | | | UE | | Request | | | | | (MCVideo | | | | | | | client) | | | | | | | send a | | | | | | | Tra | | | | | | | nsmission | | | | | | | Request | | | | | | | message? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 10 | The SS | \ | Tra | 5 | P | | | Does the | | nsmission | | | | | UE | | Control | | | | | (MCVideo | | Ack | | | | | client) | | | | | | | respond | | | | | | | with a | | | | | | | Tra | | | | | | | nsmission | | | | | | | Control | | | | | | | Ack | | | | | | | message? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 14 | Check: | - | - | 5 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | provide | | | | | | | tra | | | | | | | nsmission | | | | | | | granted | | | | | | | not | | | | | | | ification | | | | | | | to the | | | | | | | user? | | | | | | | | | | | | | | (NOTE1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 15 | Check: | - | - | 7 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | \'MCX SIP | | | | | | | MESSAGE | | | | | | | CT\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .3.33.3-1 | | | | | | | to | | | | | | | receive a | | | | | | | MuSiK | | | | | | | download | | | | | | | message | | | | | | | to set | | | | | | | the | | | | | | | explicit | | | | | | | MuSiK key | | | | | | | to be | | | | | | | used for | | | | | | | the floor | | | | | | | control | | | | | | | e | | | | | | | ncryption | | | | | | | over the | | | | | | | MBMS | | | | | | | su | | | | | | | bchannel? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 16 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | request | | | | | | | end of | | | | | | | tran | | | | | | | smission. | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 17 | Check: | - | - | 5 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | correctly | | | | | | | perform | | | | | | | procedure | | | | | | | \'MCVideo | | | | | | | tra | | | | | | | nsmission | | | | | | | End | | | | | | | Request | | | | | | | CO\' as | | | | | | | described | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5. | | | | | | | 3B.7.3-1? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 18 | The SS | \ | Tra | 6 | P | | | Does the | | nsmission | | | | | UE | | Control | | | | | (MCVideo | | Ack | | | | | client) | | | | | | | respond | | | | | | | with a | | | | | | | Tra | | | | | | | nsmission | | | | | | | Control | | | | | | | Ack | | | | | | | message? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 24 | Check: | - | - | 6 | P | | | Does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | client) | | | | | | | provide | | | | | | | media | | | | | | | tra | | | | | | | nsmission | | | | | | | not | | | | | | | ification | | | | | | | to the | | | | | | | user? | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 25 | The SS | \ | | | | | value is | | | | | greater than | | | | | \'0\'. If the | | | | | \ value | | | | | is equal to | | | | | \'0\', the | | | | | \ | | | | | value is not | | | | | included in the | | | | | MBMS Subchannel | | | | | field | | +-----------------+-----------------+-----------------+-----------+ | Video Media | \"9\" | | | | Port Number | | | | +-----------------+-----------------+-----------------+-----------+ | Audio Media | \"9\" | | | | Port Number | | | | +-----------------+-----------------+-----------------+-----------+ | FEC Port Number | not present | | | +-----------------+-----------------+-----------------+-----------+ | IP Address | \"0.0.0.0\" | | | +-----------------+-----------------+-----------------+-----------+
Table 6.8.1.3.3-13: SIP MESSAGE from the UE (Step 11, Table 6.8.1.3.2-1;\ Step
2, TS 36.579-1 [2] Table 5.3.32.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.7.1-1
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **MCVideo MBMS Usage Info**  
MIME-part-headers  
Content-Type \"application/vnd.3gpp.mcvideo-mbms-usage-info+xml\"  
MIME-part-body MCVideo MBMS Usage Info as described in Table 6.8.1.3.3-14
Table 6.8.1.3.3-14: MCVideo MBMS Usage Info in SIP MESSAGE (Table
6.8.1.3.3-13)
Derivation Path: TS 24.281 [26], clause F.2
* * *
Information Element Value/remark Comment Reference Condition mcvideo-mbms-
usage-info  
mbms-listening-status  
mbms-listening-status \"listening\"  
session-id px_sesson_A_ID  
general-purpose \"true\"  
TMGI same value as the announcement in the SIP MESSAGE  
mbms-suspension-status not present  
announcement not present  
version \"1\"
Table 6.8.1.3.3-15: Transmission Granted from the SS (Step 12, Table
6.8.1.3.2-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.1-1, condition ACK
* * *
Table 6.8.1.3.3-15A: Transmission Ack from the UE (Step 13, Table 6.8.1.3.2-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.3.5-1, condition UPLINK
* * *
Table 6.8.1.3.3-16: SIP MESSAGE from the SS (Step 15, Table 6.8.1.3.2-1;\ Step
2, TS 36.579-1 [2] Table 5.3.33.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.7.2-1, condition MIKEY
* * *
Information Element Value/remark Comment Reference Condition **P-Asserted-
Identity**  
name-addr tsc_MCVideo_PublicServiceId_A  
**Message-body**  
MIME body part **MCVideo MBMS Usage Info**  
MIME-part-headers  
Content-Type \"application/vnd.3gpp.mcvideo-mbms-usage-info+xml\"  
MIME-part-body MCVideo MBMS Usage Info as described in Table 6.8.1.3.3-17
Table 6.8.1.3.3-17: MCVideo MBMS Usage Info in SIP MESSAGE (Table
6.8.1.3.3-16)
Derivation Path: TS 24.281 [26], clause F.2
* * *
Information Element Value/remark Comment Reference Condition mcvideo-mbms-
usage-info  
mbms-listening-status not present  
mbms-suspension-status not present  
announcement not present  
version \"1\"  
anyExt  
mbms-explicitMuSiK-download  
group px_MCVideo_Group_A_ID
Table 6.8.1.3.3-18: Unmap Group To Bearer from the SS (Step 18, Table
6.8.1.3.2-1)
+-----------------+-----------------+-----------------+-----------+ | Derivation | | | | | Path: TS 24.581 | | | | | [27], Table | | | | | 9.3.5-1. | | | | +=================+=================+=================+===========+ | Information | Value/remark | Comment | Condition | | Element | | | | +-----------------+-----------------+-----------------+-----------+ | RTCP header | | | | +-----------------+-----------------+-----------------+-----------+ | Subtype | \"00001\" | Map Group To | | | | | Bearer | | +-----------------+-----------------+-----------------+-----------+ | SSRC | The SSRC of the | The SSRC of the | | | | message sender | floor control | | | | | server for | | | | | on-network and | | | | | floor | | | | | arbitrator for | | | | | off-network. | | | | | | | | | | Notation in | | | | | accordance with | | | | | clause 5.5.6.1. | | | | | Coded as | | | | | specified in | | | | | IETF RFC | | | | | 3550 [76]. | | +-----------------+-----------------+-----------------+-----------+ | name | MCV3 | | | +-----------------+-----------------+-----------------+-----------+ | MCVideo Group | px_MCVide | The group ID of | | | ID | o_Group_A_ID | the call | | +-----------------+-----------------+-----------------+-----------+
Table 6.8.1.3.3-19: SIP MESSAGE from the UE (Step 19, Table 6.8.1.3.2-1;\ Step
2, TS 36.579-1 [2] Table 5.3.32.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.7.1-1
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **MCVideo MBMS Usage Info**  
MIME-part-headers  
Content-Type \"application/vnd.3gpp.mcvideo-mbms-usage-info+xml\"  
MIME-part-body MCVideo MBMS Usage Info as described in Table 6.8.1.3.3-20
Table 6.8.1.3.3-20: MCVideo MBMS Usage Info in SIP MESSAGE (Table
6.8.1.3.3-19)
Derivation Path: TS 24.281 [26], clause F.2
* * *
Information Element Value/remark Comment Reference Condition mcvideo-mbms-
usage-info  
mbms-listening-status  
mbms-listening-status \"not-listening\"  
session-id px_sesson_A_ID  
general-purpose not present  
TMGI same value as the announcement in the SIP MESSAGE  
mbms-suspension-status not present  
announcement not present  
version \"1\"
Table 6.8.1.3.3-21: SIP MESSAGE from the SS (Step 20, Table 6.8.1.3.2-1;\ Step
2, TS 36.579-1 [2] Table 5.3.33.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.7.2-1
* * *
Information Element Value/remark Comment Reference Condition **P-Asserted-
Identity**  
name-addr tsc_MCVideo_PublicServiceId_A  
**Message-body**  
MIME body part **MCVideo MBMS Usage Info**  
MIME-part-headers  
Content-Type \"application/vnd.3gpp.mcvideo-mbms-usage-info+xml\"  
MIME-part-body MCVideo MBMS Usage Info as described in Table 6.8.1.3.3-21
Table 6.8.1.3.3-22: MCVideo MBMS Usage Info in SIP MESSAGE (Table
6.8.1.3.3-21)
+--------------+--------------+--------------+-----------+-----------+ | Derivation | | | | | | Path: TS | | | | | | 24.281 | | | | | | [26], | | | | | | clause F.2 | | | | | +==============+==============+==============+===========+===========+ | Information | Value/remark | Comment | Reference | Condition | | Element | | | | | +--------------+--------------+--------------+-----------+-----------+ | mcvideo-mbm | | | | | | s-usage-info | | | | | +--------------+--------------+--------------+-----------+-----------+ | mbms-list | not present | | | | | ening-status | | | | | +--------------+--------------+--------------+-----------+-----------+ | mbms-suspe | not present | | | | | nsion-status | | | | | +--------------+--------------+--------------+-----------+-----------+ | announcement | | | | | +--------------+--------------+--------------+-----------+-----------+ | TMGI | | | | | +--------------+--------------+--------------+-----------+-----------+ | MBMS Service | \"0F0F0F\" | The selected | | | | ID | | value is | | | | | | randomly | | | | | | chosen - a 6 | | | | | | digit | | | | | | hexadecimal | | | | | | number | | | | | | between | | | | | | 000000 and | | | | | | | | | | | | FFFFFF (see | | | | | | TS 23.003 | | | | | | [X] clause | | | | | | 15.2. | | | | | | | | | | | | The coding | | | | | | of the MBMS | | | | | | Service ID | | | | | | is the | | | | | | re | | | | | | sponsibility | | | | | | of each | | | | | | ad | | | | | | ministration | | | +--------------+--------------+--------------+-----------+-----------+ | MCC | The same | Mobile | | | | | value as for | Country Code | | | | | PLMN1 | | | | | | specified in | | | | | | Table | | | | | | 5.5.8.1-1 | | | | +--------------+--------------+--------------+-----------+-----------+ | MNC | The same | Mobile | | | | | value as for | Network Code | | | | | PLMN1 | | | | | | specified in | | | | | | Table | | | | | | 5.5.8.1-1 | | | | +--------------+--------------+--------------+-----------+-----------+ | QCI | \"67\" | | | | +--------------+--------------+--------------+-----------+-----------+ | mbms-s | not present | | | | | ervice-areas | | | | | +--------------+--------------+--------------+-----------+-----------+ | GPMS | not present | | | | +--------------+--------------+--------------+-----------+-----------+ | version | \"1\" | | | | +--------------+--------------+--------------+-----------+-----------+
Table 6.8.1.3.3-23: SIP MESSAGE from the UE (Step 21, Table 6.8.1.3.2-1;\ Step
2, TS 36.579-1 [2] Table 5.3.32.3-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.2.7.1-1
* * *
Information Element Value/remark Comment Reference Condition **Message-body**  
MIME body part **MCVideo MBMS Usage Info**  
MIME-part-headers  
Content-Type \"application/vnd.3gpp.mcvideo-mbms-usage-info+xml\"  
MIME-part-body MCVideo MBMS Usage Info as described in Table 6.8.1.3.3-24
Table 6.8.1.3.3-24: MCVideo MBMS Usage Info in SIP MESSAGE (Table
6.8.1.3.3-23)
Derivation Path: TS 24.281 [26], clause F.2
* * *
Information Element Value/remark Comment Reference Condition mcvideo-mbms-
usage-info  
mbms-listening-status  
mbms-listening-status \"not-listening\"  
session-id not present  
general-purpose \"false\"  
TMGI same value as the announcement in the SIP MESSAGE  
mbms-suspension-status not present  
announcement not present  
version \"1\"
Table 6.8.1.3.3-25: Media Transmission Notification from the SS (Step 22,
Table 6.8.1.3.2-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.7-1, condition ACK
* * *
Information Element Value/remark Comment Reference Condition User ID  
User ID px_MCVideo_ID_User_B
Table 6.8.1.3.3-25A: Transmission Ack from the UE (Step 23, Table 6.8.1.3.2-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.3.5-1, condition UPLINK
* * *
Table 6.8.1.3.3-26: Transmission End Notify from the SS (Step 25, Table
6.8.1.3.2-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.15-1
* * *
Information Element Value/remark Comment Reference Condition User ID  
User ID px_MCVideo_ID_User_B
Table 6.8.1.3.3-27: Void
# 7 Off-Network Test Scenarios
## 7.1 Group Calls
### 7.1.1 Basic Group Calls
#### 7.1.1.1 Off-network / Group Call / Basic Group Call / Transmission
Control / Upgrade to Emergency Call / Downgrade from Emergency Call / Upgrade
to Imminent Peril Call / Downgrade from Imminent Peril Call / Release call /
Client Originated (CO)
##### 7.1.1.1.1 Test Purpose (TP) {#test-purpose-tp-41 .H6}
##### (1) {#section-168 .H6}
**with** { UE (MCVideo Client) registered and authorised for MCVideo Service,
including authorised to initiate/cancel group calls in off-network
environment, and the UE (MCVideo Client) is in an off-network environment }
**ensure that** {
**when** { the MCVideo User requests the establishment of an MCVideo group
call }
**then** { UE (MCVideo Client) requests a group call by sending a GROUP CALL
PROBE message **and,** upon not receiving a response to the GROUP CALL PROBE,
sends a GROUP CALL ANNOUNCEMENT message }
}
##### (2) {#section-169 .H6}
**with** { UE (MCVideo Client) having established an off-network MCVideo Pre-
arranged Group Call }
**ensure that** {
**when** { the MCVideo User engages in communication with the invited MCVideo
User(s) }
**then** { UE (MCVideo Client) respects the transmission control imposed by
the transmission control entity/arbitrator (Transmission Granted, Transmission
Arbitration Release, Transmission Request }
}
##### (3) {#section-170 .H6}
**with** { UE (MCVideo Client) having established an off-network group call
and the MCVideo User being authorised for initiating an MCVideo emergency
group call }
**ensure that** {
**when** { the MCVideo User requests to upgrade the ongoing off-network
MCVideo group call to an MCVideo emergency group call }
**then** { UE (MCVideo Client) sends a GROUP CALL ANNOUNCEMENT message }
}
##### (4) {#section-171 .H6}
**with** { UE (MCVideo Client) having upgraded to an off-network emergency
group call }
**ensure that** {
**when** { the MCVideo User continues communication with the invited MCVideo
User(s) }
**then** { UE (MCVideo Client) respects the transmission control imposed by
the transmission control entity/arbitrator }
}
##### (5) {#section-172 .H6}
**with** { UE (MCVideo Client) having upgraded to an off-network emergency
group call and the MCVideo User being authorised for cancelling an MCVideo
emergency state }
**ensure that** {
**when** { the MCVideo User requests to cancel the ongoing MCVideo Emergency
state }
**then** { UE (MCVideo Client) sends a GROUP CALL EMERGENCY END message }
}
##### (6) {#section-173 .H6}
**with** { UE (MCVideo Client) having established an off-network group call
and the MCVideo User being authorised for initiating an MCVideo imminent peril
group call }
**ensure that** {
**when** { the MCVideo User requests to upgrade the ongoing off-network
MCVideo group call to an MCVideo imminent peril group call }
**then** { UE (MCVideo Client) sends a GROUP CALL ANNOUNCEMENT message }
}
##### (7) {#section-174 .H6}
**with** { UE (MCVideo Client) having upgraded to an off-network imminent
peril group call }
**ensure that** {
**when** { the MCVideo User continues communication with the invited MCVideo
User(s) }
**then** { UE (MCVideo Client) respects the transmission control imposed by
the transmission control entity/arbitrator }
}
##### (8) {#section-175 .H6}
**with** { UE (MCVideo Client) having upgraded to an off-network imminent
peril group call and the MCVideo User being authorised for cancelling an
MCVideo imminent peril state }
**ensure that** {
**when** { the MCVideo User requests to cancel the ongoing MCVideo imminent
peril state }
**then** { UE (MCVideo Client) sends a GROUP CALL IMMINENT PERIL END message }
}
##### 7.1.1.1.2 Conformance requirements {#conformance-requirements-41 .H6}
References: The conformance requirements covered in the current TC are
specified in:
TS 24.281 clauses 9.3.2.4.2.1, 9.3.2.4.2.2, 9.3.2.4.3.1, 9.3.2.4.3.6,
9.3.3.4.7.1, 9.3.3.4.8.1, 9.3.3.4.8.4, TS 24.581 clauses 7.2.3.2.2, 7.2.3.5.2,
7.2.3.5.5, 7.2.3.3.2, 7.2.3.7.7. Unless otherwise stated these are Rel-15
requirements.
[TS 24.281, clause 9.3.2.4.2.1]
When in the \"S1: start-stop\" state, upon an indication from an MCVideo user
to initiate a group call for an MCVideo group ID, the MCVideo client:
1) shall store the MCVideo group ID as the MCVideo group ID of the call;
2) shall create a call type control state machine as described in clause
9.3.3.2;
3) shall generate a GROUP CALL PROBE message as specified in clause 17.1.2. In
the GROUP CALL PROBE message, the MCVideo client:
a) shall set the MCVideo group ID IE to the stored MCVideo group ID of the
call;
4) shall send the GROUP CALL PROBE message as specified in clause 9.3.1.1.1;
5) shall start timer TFG3 (call probe retransmission);
6) shall start timer TFG1 (wait for call announcement); and
7) shall enter the \"S2: waiting for call announcement\" state.
[TS 24.281, clause 9.3.2.4.2.2]
When in the \"S2: waiting for call announcement\" state, upon expiration of
TFG3 (call probe retransmission), the MCVideo client:
1) shall generate a GROUP CALL PROBE message as specified in clause 17.1.2. In
the GROUP CALL PROBE message, the MCVideo client:
a) shall set the MCVideo group ID IE to the stored MCVideo group ID of the
call;
2) shall send the GROUP CALL PROBE message as specified in clause 9.3.1.1.1;
3) shall start timer TFG3 (call probe retransmission); and
4) shall remain in the \"S2: waiting for call announcement\" state.
[TS 24.281, clause 9.3.2.4.3.1]
When in the \"S2: waiting for call announcement\" state, upon expiry of timer
TFG1 (wait for call announcement), the MCVideo client:
1) shall stop timer TFG3 (call probe retransmission), if running;
2) shall generate an SDP body as specified in clause 9.3.1.1.2 and store it as
the SDP body of the call;
3) shall generate a random number with uniform distribution between 0 and
65535 and store it as the call identifier of the call;
4) shall select refresh interval value and store it as the refresh interval of
the call;
5) shall store own MCVideo user ID as the originating MCVideo user ID of the
call;
6) shall store the current UTC time as the call start time of the call;
7) shall generate a GROUP CALL ANNOUNCEMENT message as specified in clause
17.1.3. In the GROUP CALL ANNOUNCEMENT message, the MCVideo client:
a) shall set the Call identifier IE to the stored call identifier of the call;
b) shall set the Call type IE to the stored current call type associated with
the call type control state machine;
c) shall set the Refresh interval IE to the stored refresh interval of the
call;
d) shall set the SDP IE to the stored SDP body of the call;
e) shall set the Originating MCVideo user ID IE to the stored originating
MCVideo user ID of the call;
f) shall set the MCVideo group ID IE to the stored MCVideo group ID of the
call;
g) shall set the Call start time IE to the stored call start time of the call;
h) shall set the Last call type change time IE to the stored last call type
change time of the call associated with call type control state machine;
i) shall set the Last user to change call type IE to last user to change call
type associated with call type control state machine; and
j) may include the Confirm mode indication IE;
8) shall send the GROUP CALL ANNOUNCEMENT message as specified in clause
9.3.1.1.1;
9) shall establish a media session based on the stored SDP body of the call;
10) shall start transmission control as originating transmission participant
as specified in clause a.b in 3GPP TS 24.581 [5];
11) shall start timer TFG6 (max duration) with value as specified in clause
9.3.2.4.1.2;
12) shall start timer TFG2 (call announcement) with value as specified in
clause 9.3.2.4.1.1.1; and
13) shall enter the \"S3: part of ongoing call\" state.
Note: In this release of the specification, the refresh interval of the call
is fixed to 10 seconds.
[TS 24.281, clause 9.3.2.4.3.6]
When in the \"S3: part of ongoing call\" state, upon receiving a GROUP CALL
ACCEPT message with the MCVideo group ID IE matching the stored MCVideo group
ID of the call, the MCVideo client:
1) can inform the MCVideo user about the call acceptance; and
2) shall remain in the \"S3: part of ongoing call\" state.
[TS 24.281, clause 9.3.3.4.7.1]
When in the \"T2: in-progress basic group call\" state, upon receiving an
indication from the user to upgrade the call to \"IMMINENT PERIL GROUP CALL\"
or \"EMERGENCY GROUP CALL\" or when in the \"T3: in-progress imminent peril
group call\" state, upon receiving an indication from the user to upgrade the
call to \"EMERGENCY GROUP CALL\", the MCVideo client:
1) if the user request is to upgrade the call to \"EMERGENCY GROUP CALL\" and
the value of \"/_\ _/_\ _/OffNetwork/EmergencyCallChange\" leaf node
present in the user profile as specified in 3GPP TS 24.483 [4] is set to
\"true\":
a) shall set the stored current call type to \"EMERGENCY GROUP CALL\";
b) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network emergency group call as described in 3GPP
TS 24.483 [4];
c) shall start timer TFG13 (implicit downgrade emergency) with value as
specified in clause 9.3.3.4.1.1;
d) shall stop timer TFG14 (implicit downgrade imminent peril), if running; and
e) shall enter \"T1: in-progress emergency group call\" state;
2) if the user request is to upgrade the call to \"IMMINENT PERIL GROUP CALL\"
and the value of \"/_\ _/_\ _/OffNetwork/ ImminentPerilCallChange\" leaf
node present in the user profile as specified in 3GPP TS 24.483 [4] set to
\"true\":
a) shall set the stored current call type to \"IMMINENT PERIL GROUP CALL\";
b) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network imminent peril group call as described in
3GPP TS 24.483 [4];
c) shall start timer TFG14 (implicit downgrade imminent peril) with value as
specified in clause 9.3.3.4.1.2 and
d) shall enter \"T3: in-progress imminent peril group call\" state;
3) shall store the current UTC time as last call type change time of the call;
4) shall store own MCVideo user ID as last user to change call type of the
call;
5) shall generate a GROUP CALL ANNOUNCEMENT message as specified in clause
17.1.3. In the GROUP CALL ANNOUNCEMENT message, the MCVideo client:
a) shall set the Call identifier IE to the stored call identifier of the call
associated with the basic call control state machine;
b) shall set the Call type IE to the stored current call type;
c) shall set the Refresh interval IE to the stored refresh interval of the
call associated with the basic call control state machine;
d) shall set the SDP IE to the stored SDP body of the call associated with the
basic call control state machine;
e) shall set the Originating MCVideo user ID IE to the stored originating
MCVideo user ID of the call associated with the basic call control state
machine;
f) shall set the MCVideo group ID IE to the stored MCVideo group ID of the
call associated with the basic call control state machine;
g) shall set the call start time IE to the stored call start time of the call;
h) shall set the Last call type change time IE to the stored last call type
change time of the call; and
i) shall set the Last user to change call type IE to the stored last user to
change call type of the call; and
6) shall send the GROUP CALL ANNOUNCEMENT message as specified in clause
9.3.1.1.1;
[TS 24.281, clause 9.3.3.4.8.1]
When in the \"T1: in-progress emergency group call\" state, upon receiving an
indication from:
1) the MCVideo user who upgraded the MCVideo group call; or
2) an authorized MCVideo user with the value of \"/_\ _/_\
_/Common/MCVideoGroupCall/EmergencyCall/CancelMCVideoGroup\" leaf node
present in the user profile as specified in 3GPP TS 24.483 [4] is set to
\"true\",
to downgrade \"EMERGENCY GROUP CALL\", the MCVideo client:
1) shall set the stored current call type to \"BASIC GROUP CALL\";
2) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network basic group call as described in 3GPP TS
24.483 [4];
3) shall set current UTC time as last call type change time of the call;
4) shall store own MCVideo user ID as last user to change call type of the
call;
5) shall generate a GROUP CALL EMERGENCY END message as specified in clause
17.1.1.13. In the GROUP CALL EMERGENCY END message, the MCVideo client:
a) shall set the Call identifier IE to the stored call identifier of the call
associated with the basic call control state machine;
b) shall set the Originating MCVideo user ID IE to the stored originating
MCVideo user ID of the call associated with the basic call control state
machine;
c) shall set the MCVideo group ID IE to the stored MCVideo group ID of the
call associated with the basic call control state machine;
d) shall set the Last call type change time IE to the stored last call type
change time of the call; and
e) shall set the Last user to change call type IE to the stored last user to
change call type of the call;
6) shall send the GROUP CALL EMERGENCY END message as specified in clause
9.3.1.1.1;
7) shall stop timer TFG13 (implicit downgrade emergency);
8) shall initialize the counter CFG11 (emergency end retransmission) with
value set to 1;
9) shall start timer TFG11 (emergency end retransmission); and
10) shall enter the \"T2: in-progress basic group call\" state.
[TS 24.281, clause 9.3.3.4.8.4]
When in the \"T3: in-progress imminent peril group call\" state, upon
receiving an indication from:
1) the MCVideo user who upgraded the call; or
2) an authorized user with the value of \"/_\ _/_\
_/Common/MCVideoGroupCall/ImminentPerilCall/Cancel\" leaf node present in
the user profile as specified in 3GPP TS 24.483 [4] is set to \"true\",
to downgrade \"IMMINENT PERIL GROUP CALL\", the MCVideo client:
1) shall set the stored current call type to \"BASIC GROUP CALL\";
2) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network basic group call as described in 3GPP TS
24.483 [4];
3) shall set current UTC time as last call type change time of the call;
4) shall store own MCVideo user ID as last user to change call type of the
call;
5) shall generate a GROUP CALL IMMINENT PERIL END message as specified in
clause 17.1.1.12. In the GROUP CALL IMMINENT PERIL END message, the MCVideo
client:
a) shall set the Call identifier IE to the stored call identifier of the call
associated with the basic call control state machine;
b) shall set the Originating MCVideo user ID IE to the stored originating
MCVideo user ID of the call associated with the basic call control state
machine;
c) shall set the MCVideo group ID IE to the stored MCVideo group ID of the
call associated with the basic call control state machine;
d) shall set the Last call type change time IE to the stored last call type
change time of the call; and
e) shall set the Last user to change call type IE to the stored last user to
change call type of the call;
6) shall send the GROUP CALL IMMINENT PERIL END message as specified in clause
9.3.1.1.1;
7) shall stop timer TFG14 (implicit downgrade imminent peril);
8) shall initialize the counter CFG12 (imminent peril end retransmission) with
value set to 1;
9) shall start timer TFG12 (imminent peril end retransmission); and
10) shall enter the \"T2: in-progress basic group call\" state.
[TS 24.581, clause 7.2.3.2.2]
When an MCVideo call is established with session announcement including an
explicit transmission request, the originating transmission participant:
1\. shall create an instance of a transmission participant state transition
diagram for basic operation state machine;
2\. shall send Transmission Granted message towards other transmission
participants. The Transmission Granted message:
a. shall include the granted priority in the Transmission priority field;
b. shall include the MCVideo user\'s own MCVideo ID in the User ID field; and
c. if the transmission request is a broadcast group call, system call,
emergency call or an imminent peril call, shall include a Transmission
Indicator field indicating the relevant call types; and
3\. shall enter \'O: transmission arbitration\' state.
[TS 24.581, clause 7.2.3.5.2]
Upon receiving encoded media from the user or if encoded media is already
buffered the transmission participant:
1\. shall start timer T206 (Stop talking warning);
2\. shall request the MCVideo client to start sending RTP media packets
towards other MCVideo clients; and
3\. shall remain in \'O: transmission arbitration\' state.
[TS 24.581, clause 7.2.3.5.5]
Upon receiving an indication from the MCVideo user to release permission to
send RTP media and there is no transmitter in transmitter list, the
transmission participant:
1\. shall stop timer T206 (Stop talking warning), if running;
2\. shall stop timer T207 (Stop talking), if running;
3\. shall send a Transmission Arbitration Release message towards other
transmission participants. The Transmission Arbitration Release message:
a. shall include the MCVideo ID of the MCVideo user in the User ID field; and
b. if the session is not initiated as a broadcast group call with the B-bit
set to \'1\' (Broadcast group call), shall include a Transmission Indicator
field set to \'0\' (normal call);
4\. shall start timer T230 (Inactivity); and
5\. shall enter \'O: silence\' state.
[TS 24.581, clause 7.2.3.5.5]
If the transmission participant receives an indication from the MCVideo user
to send media, the transmission participant:
1\. shall send the Transmission Request message to other transmission
participants. The Transmission Request message:
a. if a priority different than the default transmission priority is required,
shall include the Transmission Priority field with the requested priority in
the \ element;
b. shall include the MCVideo ID of the MCVideo user in the \ value of
the User ID field; and
c. if the transmission request is a broadcast group call, system call,
emergency call or an imminent peril call, shall include a Transmission
Indicator field indicating the relevant call types;
2\. shall initialise the counter C201 (Transmission request) with value set to
1;
3\. shall stop timer T230 (Inactivity);
4\. shall start timer T201 (Transmission Request); and
5\. shall enter \'O: pending request\' state.
[TS 24.581, clause 7.2.3.7.7]
Upon receiving Transmission Granted message and if the \ value in the
User ID field matches its own MCVideo ID and User ID of transmission
participant sending the Transmission Granted message matches the stored User
ID of current transmission arbitrator, the transmission participant:
1\. shall stop timer T201 (Transmission Request);
2\. may provide a transmission granted notification to the MCVideo user; and
3\. shall enter \'O: has permission\' state.
Otherwise, if the \ value in the User ID field matches its own
MCVideo ID and there is no stored User ID of the current transmission
arbitrator, the transmission participant:
1\. shall set the stored User ID of the current transmission arbitrator to
User ID of transmission participant sending the Transmission Granted message;
2\. shall stop timer T201 (Transmission Request);
3\. may provide a transmission granted notification to the MCVideo user; and
4\. shall enter \'O: has permission\' state.
##### 7.1.1.1.3 Test description {#test-description-41 .H6}
##### 7.1.1.1.3.1 Pre-test conditions {#pre-test-conditions-41 .H6}
##### System Simulator: {#system-simulator-34 .H6}
\- SS-UE1 (MCVideo client)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate, the SS is behaving as SS-UE1 as defined in TS 36.508 [24],
configured for and operating as ProSe Direct Communication transmitting and
receiving device.
\- GNSS simulator to simulate a location and provide a timing reference for
the assistance of E-UTRAN off-network testing.
NOTE 1: For operation in off-network environment, it needs be ensured that
after the UE is powered up it considers the Geographical area #1 that is
simulated by the GNSS simulator as being one of the geographical areas set in
the USIM for operation when UE is \"not served by E-UTRAN\".
\- SS-NW (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
NOTE 2: The SS operation as NW (MCVideo server) is needed only for the
preamble if the UE has to perform procedure \'MCX Authorization/Configuration
and Key Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
##### IUT: {#iut-33 .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate, the UE is behaving as a ProSe enabled UE as defined in TS 36.508
[24], configured for and operating as ProSe Direct Communication transmitting
and receiving device.
##### Preamble: {#preamble-34 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- The GNSS simulator is configured to simulate a location in the centre of
Geographical area #1 and provide a timing reference, as defined in TS 36.508
[24] Table 4.11.2-2 scenario #1.
\- The UE is switched-off.
\- UE States at the end of the preamble
\- The UE is in state \'switched-off\'.
##### 7.1.1.1.3.2 Test procedure sequence {#test-procedure-sequence-41 .H6}
Table 7.1.1.1.3.2-1: Main behaviour
+-----------+-----------+-----------+-----------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +===========+===========+===========+===========+=========+====+ | | | U - S | Message | | | +-----------+-----------+-----------+-----------+---------+----+ | 1 | Power up | - | - | - | - | | | the UE | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 2 | Trigger | - | - | - | - | | | the UE to | | | | | | | reset UTC | | | | | | | time and | | | | | | | location. | | | | | | | | | | | | | | NOTE: The | | | | | | | UTC time | | | | | | | and | | | | | | | location | | | | | | | reset may | | | | | | | be | | | | | | | performed | | | | | | | by MMI or | | | | | | | AT | | | | | | | command | | | | | | | (+CUTCR). | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 3 | Activate | - | - | - | - | | | the | | | | | | | MCVideo | | | | | | | Client | | | | | | | Ap | | | | | | | plication | | | | | | | and | | | | | | | register | | | | | | | User A as | | | | | | | the | | | | | | | MCVideo | | | | | | | User (TS | | | | | | | 36.579-5 | | | | | | | [5], | | | | | | | px_MCX_ | | | | | | | User_A_ | | | | | | | username, | | | | | | | p | | | | | | | x_MCX_U | | | | | | | ser_A_p | | | | | | | assword). | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 4 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | Client) | | | | | | | initiate | | | | | | | an | | | | | | | of | | | | | | | f-network | | | | | | | group | | | | | | | call with | | | | | | | an | | | | | | | explicit | | | | | | | tra | | | | | | | nsmission | | | | | | | request. | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | - | E | - | - | - | - | | | XCEPTION: | | | | | | | The | | | | | | | E | | | | | | | -UTRA/EPC | | | | | | | actions | | | | | | | which are | | | | | | | related | | | | | | | to the | | | | | | | MCVideo | | | | | | | of | | | | | | | f-network | | | | | | | call | | | | | | | esta | | | | | | | blishment | | | | | | | are | | | | | | | described | | | | | | | in | | | | | | | TS 36.57 | | | | | | | 9-1 [2] | | | | | | | clause | | | | | | | 5.4.11 | | | | | | | \'MCX CO | | | | | | | comm | | | | | | | unication | | | | | | | over | | | | | | | ProSe | | | | | | | direct | | | | | | | on | | | | | | | e-to-many | | | | | | | comm | | | | | | | unication | | | | | | | out of | | | | | | | E-UTRA | | | | | | | coverage | | | | | | | / | | | | | | | Mon | | | | | | | itoring/D | | | | | | | iscoverer | | | | | | | procedure | | | | | | | for group | | | | | | | member | | | | | | | discovery | | | | | | | / | | | | | | | On | | | | | | | e-to-many | | | | | | | communi | | | | | | | cation\'. | | | | | | | The test | | | | | | | sequence | | | | | | | below | | | | | | | shows | | | | | | | only the | | | | | | | MCVideo | | | | | | | relevant | | | | | | | messages | | | | | | | e | | | | | | | xchanged. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 5 | Check: | --> | GROUP | 1 | P | | | Does the | | CALL | | | | | UE | | PROBE | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | GROUP | | | | | | | CALL | | | | | | | PROBE | | | | | | | message | | | | | | | to | | | | | | | determine | | | | | | | the | | | | | | | current | | | | | | | call | | | | | | | status of | | | | | | | the | | | | | | | group? | | | | | | | | | | | | | | (NOTE 2) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | - | E | - | - | - | - | | | XCEPTION: | | | | | | | Step 6 is | | | | | | | executed | | | | | | | a total | | | | | | | of 3 | | | | | | | times | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 6 | Check: At | --> | GROUP | 1 | P | | | the | | CALL | | | | | e | | PROBE | | | | | xpiration | | | | | | | of timer | | | | | | | TFG3 | | | | | | | (call | | | | | | | probe | | | | | | | retrans | | | | | | | mission), | | | | | | | does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | retra | | | | | | | nsmission | | | | | | | of the | | | | | | | GROUP | | | | | | | CALL | | | | | | | PROBE | | | | | | | sent in | | | | | | | step 5? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 7 | Check: At | --> | GROUP | 1 | P | | | the | | CALL | | | | | e | | ANN | | | | | xpiration | | OUNCEMENT | | | | | of timer | | | | | | | TFG1 | | | | | | | (wait for | | | | | | | call | | | | | | | annou | | | | | | | ncement), | | | | | | | and after | | | | | | | receiving | | | | | | | no | | | | | | | response | | | | | | | to the | | | | | | | GROUP | | | | | | | CALL | | | | | | | PROBE, | | | | | | | does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | GROUP | | | | | | | CALL | | | | | | | ANN | | | | | | | OUNCEMENT | | | | | | | message | | | | | | | to | | | | | | | initiate | | | | | | | an | | | | | | | of | | | | | | | f-network | | | | | | | group | | | | | | | call? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 8 | The | \ | Tra | 2 | P | | | Does the | | nsmission | | | | | UE | | Granted | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | Tra | | | | | | | nsmission | | | | | | | Granted | | | | | | | message | | | | | | | towards | | | | | | | the other | | | | | | | tra | | | | | | | nsmission | | | | | | | part | | | | | | | icipants? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 10 | Make the | - | - | - | - | | | MCVideo | | | | | | | User | | | | | | | release | | | | | | | tra | | | | | | | nsmission | | | | | | | control. | | | | | | | | | | | | | | (NOTE 1), | | | | | | | (NOTE 3) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 11 | Check: | --> | Tra | 2 | P | | | Does the | | nsmission | | | | | UE | | Ar | | | | | (MCVideo | | bitration | | | | | Client) | | Release | | | | | send a | | | | | | | Tra | | | | | | | nsmission | | | | | | | Ar | | | | | | | bitration | | | | | | | Release | | | | | | | message | | | | | | | to the | | | | | | | other | | | | | | | tra | | | | | | | nsmission | | | | | | | part | | | | | | | icipants? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 12 | Make the | - | - | - | - | | | MCVideo | | | | | | | User | | | | | | | request | | | | | | | to send | | | | | | | media. | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 13 | Check: | --> | Tra | 2 | P | | | Does the | | nsmission | | | | | UE | | Request | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | Tra | | | | | | | nsmission | | | | | | | Request | | | | | | | message | | | | | | | to the | | | | | | | tra | | | | | | | nsmission | | | | | | | part | | | | | | | icipants? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 14 | The | \ | GROUP | 3 | P | | | Does the | | CALL | | | | | UE | | ANN | | | | | (MCVideo | | OUNCEMENT | | | | | Client) | | | | | | | send a | | | | | | | GROUP | | | | | | | CALL | | | | | | | ANN | | | | | | | OUNCEMENT | | | | | | | to | | | | | | | upgrade | | | | | | | the call | | | | | | | to an | | | | | | | emergency | | | | | | | call? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 17 | Check: | --> | Tra | 4 | P | | | Does the | | nsmission | | | | | UE | | Granted | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | Tra | | | | | | | nsmission | | | | | | | Granted | | | | | | | message | | | | | | | towards | | | | | | | the other | | | | | | | tra | | | | | | | nsmission | | | | | | | part | | | | | | | icipants? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 18 | Make the | - | - | - | - | | | MCVideo | | | | | | | User | | | | | | | release | | | | | | | tra | | | | | | | nsmission | | | | | | | control. | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 19 | Check: | --> | Tra | 4 | P | | | Does the | | nsmission | | | | | UE | | Ar | | | | | (MCVideo | | bitration | | | | | Client) | | Release | | | | | send a | | | | | | | Tra | | | | | | | nsmission | | | | | | | Ar | | | | | | | bitration | | | | | | | Release | | | | | | | message | | | | | | | to the | | | | | | | other | | | | | | | tra | | | | | | | nsmission | | | | | | | part | | | | | | | icipants? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 20 | Check: | --> | GROUP | 5 | P | | | Does the | | CALL | | | | | UE | | EMERGENCY | | | | | (MCVideo | | END | | | | | Client) | | | | | | | send a | | | | | | | GROUP | | | | | | | CALL | | | | | | | EMERGENCY | | | | | | | END to | | | | | | | downgrade | | | | | | | the | | | | | | | emergency | | | | | | | call? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 21 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | Client) | | | | | | | upgrade | | | | | | | the | | | | | | | of | | | | | | | f-network | | | | | | | group | | | | | | | call to | | | | | | | an | | | | | | | imminent | | | | | | | peril | | | | | | | call | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 22 | Check: | --> | GROUP | 6 | P | | | Does the | | CALL | | | | | UE | | ANN | | | | | (MCVideo | | OUNCEMENT | | | | | Client) | | | | | | | send a | | | | | | | GROUP CLL | | | | | | | ANN | | | | | | | OUNCEMENT | | | | | | | to | | | | | | | upgrade | | | | | | | the call | | | | | | | to an | | | | | | | imminent | | | | | | | peril | | | | | | | call? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 23 | Check: | --> | Tra | 7 | P | | | Does the | | nsmission | | | | | UE | | Granted | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | Tra | | | | | | | nsmission | | | | | | | Granted | | | | | | | message | | | | | | | towards | | | | | | | the other | | | | | | | tra | | | | | | | nsmission | | | | | | | part | | | | | | | icipants? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 24 | Make the | - | - | - | - | | | MCVideo | | | | | | | User | | | | | | | release | | | | | | | tra | | | | | | | nsmission | | | | | | | control. | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 25 | Check: | --> | Tra | 7 | P | | | Does the | | nsmission | | | | | UE | | Ar | | | | | (MCVideo | | bitration | | | | | Client) | | Release | | | | | send a | | | | | | | Tra | | | | | | | nsmission | | | | | | | Release | | | | | | | message | | | | | | | to the | | | | | | | other | | | | | | | tra | | | | | | | nsmission | | | | | | | part | | | | | | | icipants? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 26 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | Client) | | | | | | | downgrade | | | | | | | the | | | | | | | of | | | | | | | f-network | | | | | | | group | | | | | | | call from | | | | | | | an | | | | | | | imminent | | | | | | | peril | | | | | | | call | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 27 | Check: | --> | GROUP | 8 | P | | | Does the | | CALL | | | | | UE | | IMMINENT | | | | | (MCVideo | | PERIL END | | | | | Client) | | | | | | | send a | | | | | | | GROUP | | | | | | | CALL | | | | | | | IMMINENT | | | | | | | PERIL END | | | | | | | to | | | | | | | downgrade | | | | | | | the | | | | | | | imminent | | | | | | | peril | | | | | | | call? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 28 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | Client) | | | | | | | release | | | | | | | the group | | | | | | | call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | - | E | - | - | - | - | | | XCEPTION: | | | | | | | UE | | | | | | | releases | | | | | | | the | | | | | | | E-UTRA | | | | | | | co | | | | | | | nnection. | | | | | | | The | | | | | | | E | | | | | | | -UTRA/EPC | | | | | | | actions | | | | | | | which are | | | | | | | related | | | | | | | to the | | | | | | | MCVideo | | | | | | | call | | | | | | | release | | | | | | | are | | | | | | | described | | | | | | | in | | | | | | | TS 36.57 | | | | | | | 9-1 [2] | | | | | | | clause | | | | | | | 5.4.8 | | | | | | | \'MCX | | | | | | | comm | | | | | | | unication | | | | | | | over | | | | | | | ProSe | | | | | | | direct | | | | | | | o | | | | | | | ne-to-one | | | | | | | comm | | | | | | | unication | | | | | | | out of | | | | | | | E-UTRA | | | | | | | coverage | | | | | | | - release | | | | | | | by the | | | | | | | UE\'. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | NOTE 1: | | | | | | | This is | | | | | | | expected | | | | | | | to be | | | | | | | done via | | | | | | | a | | | | | | | suitable | | | | | | | imple | | | | | | | mentation | | | | | | | dependent | | | | | | | MMI. | | | | | | | | | | | | | | NOTE 2: | | | | | | | Timer | | | | | | | TFG3 | | | | | | | (call | | | | | | | probe | | | | | | | re | | | | | | | transmiss | | | | | | | ion)=40ms | | | | | | | as | | | | | | | defined | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2], | | | | | | | Table | | | | | | | 5.5.8.1-1 | | | | | | | and TFG1 | | | | | | | (wait for | | | | | | | call | | | | | | | a | | | | | | | nnounceme | | | | | | | nt)=150ms | | | | | | | as | | | | | | | defined | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2], | | | | | | | Table | | | | | | | 5.5.8.1-1 | | | | | | | are | | | | | | | started | | | | | | | upon the | | | | | | | sending | | | | | | | of the | | | | | | | GROUP | | | | | | | CALL | | | | | | | PROBE | | | | | | | message | | | | | | | | | | | | | | NOTE 3: | | | | | | | If the | | | | | | | MCVideo | | | | | | | User does | | | | | | | not | | | | | | | release | | | | | | | tra | | | | | | | nsmission | | | | | | | control | | | | | | | before | | | | | | | timer | | | | | | | T207 | | | | | | | (Stop | | | | | | | talking) | | | | | | | expires, | | | | | | | then the | | | | | | | MCVideo | | | | | | | Client | | | | | | | will | | | | | | | enter the | | | | | | | \'O: | | | | | | | silence\' | | | | | | | state per | | | | | | | TS 24.581 | | | | | | | [27] | | | | | | | and the | | | | | | | remaining | | | | | | | steps | | | | | | | will not | | | | | | | be valid. | | | | | | | Timer | | | | | | | T206 | | | | | | | (Stop | | | | | | | talking | | | | | | | warning) | | | | | | | is | | | | | | | started | | | | | | | upon the | | | | | | | sending | | | | | | | of the | | | | | | | Tra | | | | | | | nsmission | | | | | | | Granted | | | | | | | message. | | | | | | | Timer | | | | | | | T207 | | | | | | | (Stop | | | | | | | talking) | | | | | | | starts | | | | | | | upon the | | | | | | | e | | | | | | | xpiration | | | | | | | of Timer | | | | | | | T206 | | | | | | | (Stop | | | | | | | talking | | | | | | | warning). | | | | | | | Default | | | | | | | value of | | | | | | | Timer | | | | | | | T206 | | | | | | | (Stop | | | | | | | talking | | | | | | | war | | | | | | | ning)=27s | | | | | | | according | | | | | | | to TS | | | | | | | 24.581 | | | | | | | [27]. | | | | | | | Default | | | | | | | value of | | | | | | | T207 | | | | | | | (Stop | | | | | | | talking) | | | | | | | is 3s | | | | | | | according | | | | | | | to TS | | | | | | | 24.581 | | | | | | | [27]. | | | | | | +-----------+-----------+-----------+-----------+---------+----+
##### 7.1.1.1.3.3 Specific message contents {#specific-message-contents-41
.H6}
Table 7.1.1.1.3.3-1: GROUP CALL ACCEPT (step 8, Table 7.1.1.1.3.2-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.14.3-1
* * *
Information Element Value/remark Comment Condition Sending MCVideo user ID
px_MCVideo_ID_User_B
Table 7.1.1.1.3.3-2: Transmission Granted (steps 9, 14, Table 7.1.1.1.3.2-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.1-1, condition OFF-NETWORK
* * *
Table 7.1.1.1.3.3-3: Transmission Arbitration Release (step 11, Table
7.1.1.1.3.2-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.4-1, condition OFF-NETWORK
* * *
Table 7.1.1.1.3.3-4: Transmission Request (step 13, Table 7.1.1.1.3.2-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.1.1-1, condition OFF-NETWORK
* * *
Table 7.1.1.1.3.3-5: GROUP CALL ANNOUNCEMENT (step 16, Table 7.1.1.1.3.2-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.14.2-1, condition EMERGENCY-CALL
* * *
Table 7.1.1.1.3.3-6: Transmission Granted (step 17, Table 7.1.1.1.3.2-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.1-1, condition OFF-NETWORK,
EMERGENCY-CALL
* * *
Table 7.1.1.1.3.3-7: Transmission Arbitration Release (step 19, Table
7.1.1.1.3.2-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.4-1, condition OFF-NETWORK,
EMERGENCY-CALL
* * *
Table 7.1.1.1.3.3-8: GROUP CALL ANNOUNCEMENT (step 22, Table 7.1.1.1.3.2-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.14.2-1, condition IMMPERIL-CALL
* * *
Table 7.1.1.1.3.3-9: Transmission Granted (step 23, Table 7.1.1.1.3.2-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.1-1, condition OFF-NETWORK,
IMMPERIL-CALL
* * *
Table 7.1.1.1.3.3-10: Transmission Arbitration Release (step 25, Table
7.1.1.1.3.2-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.4-1, condition OFF-NETWORK,
IMMPERIL-CALL
* * *
#### 7.1.1.2 Off-network / Group Call / Transmission Control / Upgrade to
Emergency Call / Downgrade from Emergency Call / Upgrade to Imminent Peril
Call / Downgrade from Imminent Peril Call / Release call / Client Terminated
(CT)
##### 7.1.1.2.1 Test Purpose (TP) {#test-purpose-tp-42 .H6}
##### (1) {#section-176 .H6}
**with** { UE (MCVideo Client) registered and authorised for MCVideo Service,
including authorised to receive group calls in off-network environment, and
the UE (MCVideo Client) is in an off-network environment }
**ensure that** {
**when** { UE (MCVideo Client) receives a GROUP CALL ANNOUNCEMENT message with
Confirm mode indication present }
**then** { UE (MCVideo Client) sends a GROUP CALL ACCEPT message}
}
##### (2) {#section-177 .H6}
**with** { UE (MCVideo Client) being in an off-network MCVideo Pre-arranged
Group Call }
**ensure that** {
**when** { the MCVideo User (MCVideo Client) engages in communication with the
MCVideo User(s) }
**then** { UE (MCVideo Client) respects the transmission control imposed by
the transmission control entity/arbitrator }
}
##### (3) {#section-178 .H6}
**with** { UE (MCVideo Client) being in an upgraded off-network emergency
group call }
**ensure that** {
**when** { the MCVideo User continues communication with the MCVideo User(s) }
**then** { UE (MCVideo Client) respects the transmission control imposed by
the transmission control entity/arbitrator }
}
##### (4) {#section-179 .H6}
**with** { UE (MCVideo Client) being in an upgraded off-network imminent peril
group call }
**ensure that** {
**when** { the MCVideo User continues communication with the MCVideo User(s) }
**then** { UE (MCVideo Client) respects the transmission control imposed by
the transmission control entity/arbitrator }
}
##### 7.1.1.2.2 Conformance requirements {#conformance-requirements-42 .H6}
References: The conformance requirements covered in the current TC are
specified in: TS 24.281 clauses 9.3.2.4.3.3, 9.3.3.4.7.2, 9.3.3.4.8.3,
9.3.3.4.8.6, TS 24.581 clauses 7.2.3.2.3, 7.2.3.3.4, 7.2.3.4.2, 7.2.3.7.3.
Unless otherwise stated these are Rel-15 requirements.
[TS 24.281, clause 9.3.2.4.3.3]
When in the \"S1: start-stop\" state, upon receiving a GROUP CALL ANNOUNCEMENT
message with the MCVideo group ID IE not matching MCVideo group ID of the call
stored for other state machines, the MCVideo client:
1) shall store the value of the SDP IE of the GROUP CALL ANNOUNCEMENT message
as the SDP body of the call;
2) shall store the value of the Call identifier IE of the GROUP CALL
ANNOUNCEMENT message as the call identifier of the call;
3) shall store the value of the Originating MCVideo user ID IE of the GROUP
CALL ANNOUNCEMENT message as the originating MCVideo user ID of the call;
4) shall store the value of the Refresh interval IE of the GROUP CALL
ANNOUNCEMENT message as the refresh interval of the call;
5) shall store the value of the MCVideo group ID IE of the GROUP CALL
ANNOUNCEMENT message as the MCVideo group ID of the call;
6) shall store the value of the Call start time IE of the GROUP CALL
ANNOUNCEMENT message as the call start time of the call;
7) shall create a call type control state machine as described in clause
9.3.3.2;
8) if the terminating UE is configured that the terminating MCVideo user
acknowledgement is required upon a terminating call request reception:
a) shall start timer TFG4 (waiting for the user);
b) if the GROUP CALL ANNOUNCEMENT message contains the Confirm mode indication
IE, shall enter the \"S5: pending user action with confirm indication\" state;
and
c) if the GROUP CALL ANNOUNCEMENT message does not contains the Confirm mode
indication IE, shall enter the \"S4: pending user action without confirm
indication\" state; and
9) if the terminating UE is configured that the terminating MCVideo user
acknowledgement is not required upon a terminating call request reception:
a) shall establish a media session based on the stored SDP body of the call;
b) shall start transmission control as terminating transmission participant as
specified in clause a.b in 3GPP TS 24.581 [5];
c) if the GROUP CALL ANNOUNCEMENT message contains the Confirm mode indication
IE:
i) shall generate a GROUP CALL ACCEPT message as specified in clause 17.1.4.
In the GROUP CALL ACCEPT message, the MCVideo client:
A) shall set the Call identifier IE to the stored call identifier of the call;
B) shall set the Sending MCVideo user ID IE to own MCVideo user id;
C) shall set the Call type IE to the stored current call type associated with
the call type control state machine; and
D) shall set the MCVideo group ID IE to the stored MCVideo group ID of the
call; and
ii) shall send the GROUP CALL ACCEPT message as specified in clause 9.3.1.1.1;
d) shall start timer TFG6 (max duration) with value as specified in clause
9.3.2.4.1.2;
e) shall start timer TFG2 (call announcement) with value as specified in
clause 9.3.2.4.1.1.1; and
f) shall enter the \"S3: part of ongoing call\" state.
[TS 24.281, clause 9.3.3.4.7.2]
When in the \"T1: in-progress emergency group call\" state or \"T2: in-
progress basic group call\" state or \"T3: in-progress imminent peril group
call\" state, upon receiving a GROUP CALL ANNOUNCEMENT message with the
MCVideo group ID IE matching with MCVideo group ID of the ongoing call and the
Call Identifier IE being the same as the stored call identifier of the call,
the MCVideo client:
1) if the stored last user to change call type of the call is same as the Last
user to change call type IE of the GROUP CALL ANNOUNCEMENT message and the
stored last call type change time is smaller than Last call type change time
IE of the GROUP CALL ANNOUNCEMENT message:
a) shall set the stored last call type change time of the call to Last call
type change time IE of the GROUP CALL ANNOUNCEMENT message;
b) if the Call type IE of the received GROUP CALL ANNOUNCEMENT message is set
to \"EMERGENCY GROUP CALL\" and the stored call type is other than \"EMERGENCY
GROUP CALL\":
i) shall set the stored current call type to \"EMERGENCY GROUP CALL\";
ii) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network emergency group call as described in 3GPP
TS 24.483 [4];
iii) shall stop timer TFG14 (implicit downgrade imminent peril), if running;
iv) shall start timer TFG13 (implicit downgrade emergency) with value as
specified in clause 9.3.3.4.1.1; and
v) shall enter \"T1: in-progress emergency group call\" state;
c) if the Call type IE of the received GROUP CALL ANNOUNCEMENT message is set
to \"IMMINENT PERIL GROUP CALL\" and the stored call type is other than
\"IMMINENT PERIL GROUP CALL\":
i) shall set the stored current call type to \"IMMINENT PERIL GROUP CALL\";
ii) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network imminent peril group call as described in
3GPP TS 24.483 [4];
iii) shall start timer TFG14 (implicit downgrade imminent peril) with value as
specified in clause 9.3.3.4.1.2; and
iv) shall enter \"T3: in-progress imminent peril group call\" state; and
d) if the Call type IE of the received GROUP CALL ANNOUNCEMENT message is set
to \"BASIC GROUP CALL\" and the stored call type is other than \"BASIC GROUP
CALL\":
i) shall set the stored current call type to \"BASIC GROUP CALL\";
ii) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network basic group call as described in 3GPP TS
24.483 [4];
iii) shall stop timer TFG13 (implicit downgrade), if running; and
iv) shall enter \"T2: in-progress basic group call\" state; and
2) if the stored last user to change call type of the call is different from
the Last user to change call type IE of the GROUP CALL ANNOUNCEMENT message
and:
a) if the stored call type is same as Call type IE in the received GROUP CALL
ANNOUNCEMENT message and the stored last call type change time is smaller than
Last call type change time IE of the GROUP CALL ANNOUNCEMENT message:
i) shall set the stored last call type change time of the call to Last call
type change time IE of the GROUP CALL ANNOUNCEMENT message; and
ii) shall set the stored last user to change call type of the call to Last
user to change call type IE of the GROUP CALL ANNOUNCEMENT message;
b) if the Call type IE of the received GROUP CALL ANNOUNCEMENT message is set
to \"EMERGENCY GROUP CALL\" and the stored call type is other than \"EMERGENCY
GROUP CALL\":
i) shall set the stored last call type change time of the call to Last call
type change time IE of the GROUP CALL ANNOUNCEMENT message;
ii) shall set the stored last user to change call type of the call to Last
user to change call type IE of the GROUP CALL ANNOUNCEMENT message;
iii) shall set the stored current call type to \"EMERGENCY GROUP CALL\";
iv) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network emergency group call as described in 3GPP
TS 24.483 [4];
v) shall stop timer TFG14 (implicit downgrade imminent peril), if running;
vi) shall start timer TFG13 (implicit downgrade emergency) with value as
specified in clause 9.3.3.4.1.1; and
vii) shall enter \"T1: in-progress emergency group call\" state; and
c) if the Call type IE of the received GROUP CALL ANNOUNCEMENT message is set
to \"IMMINENT PERIL GROUP CALL\" and the stored call type is \"BASIC GROUP
CALL\":
i) shall set the stored last call type change time of the call to Last call
type change time IE of the GROUP CALL ANNOUNCEMENT message;
ii) shall set the stored last user to change call type of the call to Last
user to change call type IE of the GROUP CALL ANNOUNCEMENT message;
iii) shall set the stored current call type to \"IMMINENT PERIL GROUP CALL \";
iv) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network imminent peril group call as described in
3GPP TS 24.483 [4];
v) shall start timer TFG14 (implicit downgrade imminent peril) with value as
specified in clause 9.3.3.4.1.2; and
vi) shall enter \"T3: in-progress imminent peril group call\" state.
[TS 24.281, clause 9.3.3.4.8.3]
When in the \"T1: in-progress emergency group call\" state, upon receiving
GROUP CALL EMERGENCY END message, the MCVideo client:
1) shall set the stored last call type change time to the Last call type
change time IE of the received GROUP CALL EMERGENCY END message;
2) shall set the stored last user to change call type to the Last user to
change call type IE of the received GROUP CALL EMERGENCY END message;
3) shall set the stored current call type to \"BASIC GROUP CALL\";
4) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network basic group call as described in 3GPP TS
24.483 [4];
5) shall stop timer TFG13 (implicit downgrade emergency); and
6) shall enter the \"T2: in-progress basic group call\" state.
[TS 24.281, clause 9.3.3.4.8.6]
When in the \"T3: in-progress imminent peril group call\" state, upon
receiving GROUP CALL IMMINENT PERIL END message, the MCVideo client:
1) shall set the stored last call type change time to the Last call type
change time IE of the received GROUP CALL IMMINENT PERIL END message;
2) shall set the stored last user to change call type to the Last user to
change call type IE of the received GROUP CALL IMMINENT PERIL END message;
3) shall set the stored current call type to \"BASIC GROUP CALL\";
4) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network basic group call as described in 3GPP TS
24.483 [4];
5) shall stop timer TFG14 (implicit downgrade imminent peril); and
6) shall enter the \"T2: in-progress basic group call\" state.
[TS 24.581, clause 7.2.3.2.3]
When an MCVideo call is established the terminating transmission participant:
1\. shall create an instance of a transmission participant state transition
diagram for basic operation state machine;
2\. shall start timer T230 (Inactivity); and
3\. shall enter \'O: silence\' state.
[TS 24.581, clause 7.2.3.3.4]
When a Transmission Granted message is received and if the User ID in the
Transmission Granted message does not match its own User ID, the transmission
participant:
1\. may provide a transmission taken notification to the MCVideo user;
2\. if the Transmission Indicator field is included and the B-bit is set to
\'1\' (Broadcast group call), shall provide a notification to the user
indicating that this is a broadcast group call;
3\. shall stop timer T230 (Inactivity);
4\. shall start timer T203 (End of RTP media) and store the identity of the
user, to whom the transmission was granted in the Transmission Granted
message, in transmitter list; and
5\. shall enter \'O: has no permission\' state.
[TS 24.581, clause 7.2.3.4.2]
If the transmission participant receives an indication from the MCVideo user
that the MCVideo user wants to send media, the transmission participant:
1\. shall send the Transmission Request message to other clients. The
Transmission Request message:
a. if a priority different than the default transmission priority is required,
shall include the Transmission Priority field with the requested priority in
the \ element;
b. shall include the MCVideo ID of the MCVideo user in the User ID field; and
c. if the transmission request is a broadcast group call, system call,
emergency call or an imminent peril call, shall include a Transmission
Indicator field indicating the relevant call types;
2\. shall initialise the counter C201 (Transmission request) with value set to
1;
3\. shall start timer T201 (Transmission Request); and
4\. shall enter \'O: pending request\' state.
[TS 24.581, clause 7.2.3.7.3]
Upon receiving Transmission Rejected message, if the \ value in the
User ID field matches its own MCVideo ID and User ID of transmission
participant sending the Transmission Rejected message matches the stored User
ID of current transmission arbitrator, the transmission participant:
Editor\'s Note: How a new participant obtains the identity of the transmission
arbitrator is FFS.
1\. shall stop the timer T201 (Transmission Request);
2\. shall provide transmission deny notification to the user;
3\. may display the transmission deny reason to the user using information in
the Reject Cause field; and
4\. shall enter \'O: has no permission\' state.
Otherwise, if the \ value in the User ID field matches its own
MCVideo ID and there is no stored the current transmission arbitrator, the
transmission participant:
1\. shall stop the timer T201 (Transmission Request);
2\. shall set the stored User ID of the current transmission arbitrator to the
value in the User ID of transmission control server field as received in the
Transmission Rejected message;
3\. shall provide transmission deny notification to the user;
4\. may display the transmission deny reason to the user using information in
the Reject Cause field; and
5\. shall enter \'O: has no permission\' state.
##### 7.1.1.2.3 Test description {#test-description-42 .H6}
##### 7.1.1.2.3.1 Pre-test conditions {#pre-test-conditions-42 .H6}
##### System Simulator: {#system-simulator-35 .H6}
\- SS-UE1 (MCVideo client)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate, the SS is behaving as SS-UE1 as defined in TS 36.508 [24],
configured for and operating as ProSe Direct Communication transmitting and
receiving device.
\- GNSS simulator to simulate a location and provide a timing reference for
the assistance of E-UTRAN off-network testing.
NOTE 1: For operation in off-network environment, it needs be ensured that
after the UE is powered up it considers the Geographical area #1 that is
simulated by the GNSS simulator as being one of the geographical areas set in
the USIM for operation when UE is \"not served by E-UTRAN\".
\- SS-NW (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
NOTE 2: The SS operation as NW (MCVideo server) is needed only for the
preamble if the UE has to perform procedure \'MCX Authorization/Configuration
and Key Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
##### IUT: {#iut-34 .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate, the UE is behaving as a ProSe enabled UE as defined in TS 36.508
[24], configured for and operating as ProSe Direct Communication transmitting
and receiving device.
##### Preamble: {#preamble-35 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- The GNSS simulator is configured to simulate a location in the centre of
Geographical area #1 and provide a timing reference, as defined in TS 36.508
[24] Table 4.11.2-2 scenario #1.
\- The UE is switched-off.
\- UE States at the end of the preamble
\- The UE is in state \'switched-off\'.
##### 7.1.1.2.3.2 Test procedure sequence {#test-procedure-sequence-42 .H6}
Table 7.1.1.2.3.2-1: Main Behaviour
+-----------+-----------+-----------+-----------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +===========+===========+===========+===========+=========+====+ | | | U - S | Message | | | +-----------+-----------+-----------+-----------+---------+----+ | 1 | Power up | - | - | - | - | | | the UE. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 2 | Trigger | - | - | - | - | | | the UE to | | | | | | | reset UTC | | | | | | | time and | | | | | | | location. | | | | | | | | | | | | | | NOTE: The | | | | | | | UTC time | | | | | | | and | | | | | | | location | | | | | | | reset may | | | | | | | be | | | | | | | performed | | | | | | | by MMI or | | | | | | | AT | | | | | | | command | | | | | | | (+CUTCR). | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 3 | Activate | - | - | - | - | | | the | | | | | | | MCVideo | | | | | | | Client | | | | | | | Ap | | | | | | | plication | | | | | | | and | | | | | | | register | | | | | | | User A as | | | | | | | the | | | | | | | MCVideo | | | | | | | User (TS | | | | | | | 36.579-5 | | | | | | | [5], | | | | | | | px_MCX_ | | | | | | | User_A_ | | | | | | | username, | | | | | | | p | | | | | | | x_MCX_U | | | | | | | ser_A_p | | | | | | | assword). | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | - | E | - | - | - | - | | | XCEPTION: | | | | | | | The | | | | | | | E | | | | | | | -UTRA/EPC | | | | | | | actions | | | | | | | which are | | | | | | | related | | | | | | | to the | | | | | | | MCVideo | | | | | | | call | | | | | | | esta | | | | | | | blishment | | | | | | | are | | | | | | | described | | | | | | | in | | | | | | | TS 36.57 | | | | | | | 9-1 [2] | | | | | | | clause | | | | | | | 5.4.10 | | | | | | | \'MCX CT | | | | | | | comm | | | | | | | unication | | | | | | | over | | | | | | | ProSe | | | | | | | direct | | | | | | | on | | | | | | | e-to-many | | | | | | | comm | | | | | | | unication | | | | | | | out of | | | | | | | E-UTRA | | | | | | | coverage | | | | | | | / | | | | | | | Ann | | | | | | | ouncing/D | | | | | | | iscoveree | | | | | | | procedure | | | | | | | for group | | | | | | | member | | | | | | | dis | | | | | | | covery\'. | | | | | | | The test | | | | | | | sequence | | | | | | | below | | | | | | | shows | | | | | | | only the | | | | | | | MCVideo | | | | | | | relevant | | | | | | | messages | | | | | | | e | | | | | | | xchanged. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 4 | SS-UE1 | \ | GROUP | 1 | P | | | Does the | | CALL | | | | | UE | | ACCEPT | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | GROUP | | | | | | | CALL | | | | | | | ACCEPT | | | | | | | message? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 6 | SS-UE1 | \ | Tra | 2 | P | | | Does the | | nsmission | | | | | UE | | Request | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | Tra | | | | | | | nsmission | | | | | | | Request | | | | | | | message? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 9 | SS-UE1 | \ | Tra | 3 | P | | | Does the | | nsmission | | | | | UE | | Request | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | Tra | | | | | | | nsmission | | | | | | | Request | | | | | | | message? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 15 | SS-UE1 | \ | Tra | 4 | P | | | Does the | | nsmission | | | | | UE | | Request | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | Tra | | | | | | | nsmission | | | | | | | Request | | | | | | | message? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 22 | SS-UE1 | \ | GROUP | 1 | P | | | Does the | | CALL | | | | | UE | | PROBE | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | GROUP | | | | | | | CALL | | | | | | | PROBE | | | | | | | message | | | | | | | to | | | | | | | determine | | | | | | | the | | | | | | | current | | | | | | | call | | | | | | | status of | | | | | | | the | | | | | | | group? | | | | | | | | | | | | | | (NOTE 2) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | - | E | - | - | - | - | | | XCEPTION: | | | | | | | Step 6 is | | | | | | | executed | | | | | | | a total | | | | | | | of 3 | | | | | | | times | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 6 | Check: At | --> | GROUP | 1 | P | | | the | | CALL | | | | | e | | PROBE | | | | | xpiration | | | | | | | of timer | | | | | | | TFG3 | | | | | | | (call | | | | | | | probe | | | | | | | retrans | | | | | | | mission), | | | | | | | does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | retra | | | | | | | nsmission | | | | | | | of the | | | | | | | GROUP | | | | | | | CALL | | | | | | | PROBE | | | | | | | sent in | | | | | | | step 5? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 7 | Check: At | --> | GROUP | 1 | P | | | the | | CALL | | | | | e | | ANN | | | | | xpiration | | OUNCEMENT | | | | | of timer | | | | | | | TFG1 | | | | | | | (wait for | | | | | | | call | | | | | | | annou | | | | | | | ncement), | | | | | | | and after | | | | | | | receiving | | | | | | | no | | | | | | | response | | | | | | | to the | | | | | | | GROUP | | | | | | | CALL | | | | | | | PROBE, | | | | | | | does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | GROUP | | | | | | | CALL | | | | | | | ANN | | | | | | | OUNCEMENT | | | | | | | message | | | | | | | to | | | | | | | initiate | | | | | | | an | | | | | | | of | | | | | | | f-network | | | | | | | emergency | | | | | | | group | | | | | | | call? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 8 | The | \ | Tra | 1 | P | | | Does the | | nsmission | | | | | UE | | Granted | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | Tra | | | | | | | nsmission | | | | | | | Granted | | | | | | | message | | | | | | | towards | | | | | | | the other | | | | | | | tra | | | | | | | nsmission | | | | | | | part | | | | | | | icipants? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 10 | Make the | - | - | - | - | | | MCVideo | | | | | | | User | | | | | | | release | | | | | | | tra | | | | | | | nsmission | | | | | | | control. | | | | | | | | | | | | | | (NOTE 1), | | | | | | | (NOTE 3) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 11 | Check: | --> | Tra | 1 | P | | | Does the | | nsmission | | | | | UE | | Ar | | | | | (MCVideo | | bitration | | | | | Client) | | Release | | | | | send a | | | | | | | Tra | | | | | | | nsmission | | | | | | | Ar | | | | | | | bitration | | | | | | | Release | | | | | | | message | | | | | | | to the | | | | | | | other | | | | | | | tra | | | | | | | nsmission | | | | | | | part | | | | | | | icipants? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 12 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | Client) | | | | | | | release | | | | | | | the | | | | | | | emergency | | | | | | | group | | | | | | | call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | - | E | - | - | - | - | | | XCEPTION: | | | | | | | UE | | | | | | | releases | | | | | | | the | | | | | | | E-UTRA | | | | | | | co | | | | | | | nnection. | | | | | | | The | | | | | | | E | | | | | | | -UTRA/EPC | | | | | | | actions | | | | | | | which are | | | | | | | related | | | | | | | to the | | | | | | | MCVideo | | | | | | | call | | | | | | | release | | | | | | | are | | | | | | | described | | | | | | | in | | | | | | | TS 36.57 | | | | | | | 9-1 [2] | | | | | | | clause | | | | | | | 5.4.8 | | | | | | | \'MCX | | | | | | | comm | | | | | | | unication | | | | | | | over | | | | | | | ProSe | | | | | | | direct | | | | | | | o | | | | | | | ne-to-one | | | | | | | comm | | | | | | | unication | | | | | | | out of | | | | | | | E-UTRA | | | | | | | coverage | | | | | | | - release | | | | | | | by the | | | | | | | UE\'. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | NOTE 1: | | | | | | | This is | | | | | | | expected | | | | | | | to be | | | | | | | done via | | | | | | | a | | | | | | | suitable | | | | | | | imple | | | | | | | mentation | | | | | | | dependent | | | | | | | MMI. | | | | | | | | | | | | | | NOTE 2: | | | | | | | Timer | | | | | | | TFG3 | | | | | | | (call | | | | | | | probe | | | | | | | re | | | | | | | transmiss | | | | | | | ion)=40ms | | | | | | | as | | | | | | | defined | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2], | | | | | | | Table | | | | | | | 5.5.8.1-1 | | | | | | | and TFG1 | | | | | | | (wait for | | | | | | | call | | | | | | | a | | | | | | | nnounceme | | | | | | | nt)=150ms | | | | | | | as | | | | | | | defined | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2], | | | | | | | Table | | | | | | | 5.5.8.1-1 | | | | | | | are | | | | | | | started | | | | | | | upon the | | | | | | | sending | | | | | | | of the | | | | | | | GROUP | | | | | | | CALL | | | | | | | PROBE | | | | | | | message | | | | | | | | | | | | | | NOTE 3: | | | | | | | If the | | | | | | | MCVideo | | | | | | | User does | | | | | | | not | | | | | | | release | | | | | | | tra | | | | | | | nsmission | | | | | | | control | | | | | | | before | | | | | | | timer | | | | | | | T207 | | | | | | | (Stop | | | | | | | talking) | | | | | | | expires, | | | | | | | then the | | | | | | | MCVideo | | | | | | | Client | | | | | | | will | | | | | | | enter the | | | | | | | \'O: | | | | | | | silence\' | | | | | | | state per | | | | | | | TS 24.581 | | | | | | | [27] | | | | | | | and the | | | | | | | remaining | | | | | | | steps | | | | | | | will not | | | | | | | be valid. | | | | | | | Timer | | | | | | | T206 | | | | | | | (Stop | | | | | | | talking | | | | | | | warning) | | | | | | | is | | | | | | | started | | | | | | | upon the | | | | | | | sending | | | | | | | of the | | | | | | | Tra | | | | | | | nsmission | | | | | | | Granted | | | | | | | message. | | | | | | | Timer | | | | | | | T207 | | | | | | | (Stop | | | | | | | talking) | | | | | | | starts | | | | | | | upon the | | | | | | | e | | | | | | | xpiration | | | | | | | of Timer | | | | | | | T206 | | | | | | | (Stop | | | | | | | talking | | | | | | | warning). | | | | | | | Default | | | | | | | value of | | | | | | | Timer | | | | | | | T206 | | | | | | | (Stop | | | | | | | talking | | | | | | | war | | | | | | | ning)=27s | | | | | | | according | | | | | | | to TS | | | | | | | 24.581 | | | | | | | [27]. | | | | | | | Default | | | | | | | value of | | | | | | | T207 | | | | | | | (Stop | | | | | | | talking) | | | | | | | is 3s | | | | | | | according | | | | | | | to TS | | | | | | | 24.581 | | | | | | | [27]. | | | | | | +-----------+-----------+-----------+-----------+---------+----+
##### 7.1.1.3.3.3 Specific message contents {#specific-message-contents-43
.H6}
Table 7.1.1.3.3.3-1: GROUP CALL ANNOUNCEMENT (step 7, Table 7.1.1.3.3.2-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.14.2-1, condition EMERGENCY-CALL
* * *
Table 7.1.1.3.3.3-2: GROUP CALL ACCEPT (step 8, Table 7.1.1.3.3.2-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.14.3-1, condition EMERGENCY-CALL
* * *
Information Element Value/remark Comment Condition Sending MCVideo user ID
px_MCVideo_ID_User_B
Table 7.1.1.3.3.3-3: Transmission Granted (step 9, Table 7.1.1.3.3.2-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.1-1, condition OFF-NETWORK,
EMERGENCY-CALL
* * *
Table 7.1.1.3.3.3-4: Transmission Arbitration Release (step 11, Table
7.1.1.3.3.2-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.4-1, condition OFF-NETWORK,
EMERGENCY-CALL
* * *
#### 7.1.1.4 Off-network / Group Call / Emergency Call / Client Terminated
(CT)
##### 7.1.1.4.1 Test Purpose (TP) {#test-purpose-tp-44 .H6}
##### (1) {#section-181 .H6}
**with** { UE (MCVideo Client) registered and authorised for MCVideo Service,
including authorised to receive emergency group calls in off-network
environment, and the UE (MCVideo Client) is in an off-network environment }
**ensure that** {
**when** { UE (MCVideo Client) receives a GROUP CALL ANNOUNCEMENT message for
an emergency group call with Confirm mode indication present }
**then** { UE (MCVideo Client) sends a GROUP CALL ACCEPT message **and**
respects the transmission control imposed by the transmission control
entity/arbitrator }
}
##### 7.1.1.4.2 Conformance requirements {#conformance-requirements-44 .H6}
References: The conformance requirements covered in the current TC are
specified in: TS 24.281 clauses 9.3.2.4.3.3, 9.3.3.4.5, TS 24.581 clauses
7.2.3.2.3, 7.2.3.3.4, 7.2.3.4.2, 7.2.3.7.3. Unless otherwise stated these are
Rel-15 requirements.
[TS 24.281, clause 9.3.2.4.3.3]
When in the \"S1: start-stop\" state, upon receiving a GROUP CALL ANNOUNCEMENT
message with the MCVideo group ID IE not matching MCVideo group ID of the call
stored for other state machines, the MCVideo client:
1) shall store the value of the SDP IE of the GROUP CALL ANNOUNCEMENT message
as the SDP body of the call;
2) shall store the value of the Call identifier IE of the GROUP CALL
ANNOUNCEMENT message as the call identifier of the call;
3) shall store the value of the Originating MCVideo user ID IE of the GROUP
CALL ANNOUNCEMENT message as the originating MCVideo user ID of the call;
4) shall store the value of the Refresh interval IE of the GROUP CALL
ANNOUNCEMENT message as the refresh interval of the call;
5) shall store the value of the MCVideo group ID IE of the GROUP CALL
ANNOUNCEMENT message as the MCVideo group ID of the call;
6) shall store the value of the Call start time IE of the GROUP CALL
ANNOUNCEMENT message as the call start time of the call;
7) shall create a call type control state machine as described in clause
9.3.3.2;
8) if the terminating UE is configured that the terminating MCVideo user
acknowledgement is required upon a terminating call request reception:
a) shall start timer TFG4 (waiting for the user);
b) if the GROUP CALL ANNOUNCEMENT message contains the Confirm mode indication
IE, shall enter the \"S5: pending user action with confirm indication\" state;
and
c) if the GROUP CALL ANNOUNCEMENT message does not contains the Confirm mode
indication IE, shall enter the \"S4: pending user action without confirm
indication\" state; and
9) if the terminating UE is configured that the terminating MCVideo user
acknowledgement is not required upon a terminating call request reception:
a) shall establish a media session based on the stored SDP body of the call;
b) shall start transmission control as terminating transmission participant as
specified in clause a.b in 3GPP TS 24.581 [5];
c) if the GROUP CALL ANNOUNCEMENT message contains the Confirm mode indication
IE:
i) shall generate a GROUP CALL ACCEPT message as specified in clause 17.1.4.
In the GROUP CALL ACCEPT message, the MCVideo client:
A) shall set the Call identifier IE to the stored call identifier of the call;
B) shall set the Sending MCVideo user ID IE to own MCVideo user id;
C) shall set the Call type IE to the stored current call type associated with
the call type control state machine; and
D) shall set the MCVideo group ID IE to the stored MCVideo group ID of the
call; and
ii) shall send the GROUP CALL ACCEPT message as specified in clause 9.3.1.1.1;
d) shall start timer TFG6 (max duration) with value as specified in clause
9.3.2.4.1.2;
e) shall start timer TFG2 (call announcement) with value as specified in
clause 9.3.2.4.1.1.1; and
f) shall enter the \"S3: part of ongoing call\" state.
[TS 24.281, clause 9.3.3.4.5]
When in the \"T0: waiting for the call to establish\" state, upon receipt of a
GROUP CALL ANNOUNCEMENT message by an idle MCVideo client when MCVideo user
acknowledgement is not required, the MCVideo client:
1) shall set the stored last call type change time to the Last call type
change time IE of the GROUP CALL ANNOUNCEMENT message;
2) shall set the last user to change call type to the Last user to change call
type IE of the GROUP CALL ANNOUNCEMENT message;
3) if the Call type IE of the received GROUP CALL ANNOUNCEMENT message is set
to \"EMERGENCY GROUP CALL\":
a) shall set the stored current call type to \"EMERGENCY GROUP CALL\";
b) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network emergency group call as described in 3GPP
TS 24.483 [4];
c) shall start timer TFG13 (implicit downgrade emergency) with value as
specified in clause 9.3.3.4.1.1; and
d) shall enter \"T1: in-progress emergency group call\" state;
4) if the Call type IE of the received GROUP CALL ANNOUNCEMENT message is set
to \"IMMINENT PERIL GROUP CALL\":
a) shall set the stored current call type to \"IMMINENT PERIL GROUP CALL\";
b) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network imminent peril group call as described
in3GPP TS 24.483 [4];
c) shall start timer TFG14 (implicit downgrade imminent peril) with value as
specified in clause 9.3.3.4.1.2; and
d) shall enter \"T3: in-progress imminent peril group call\" state; and
5) if the Call type IE of the received GROUP CALL ANNOUNCEMENT message is set
to \"BASIC GROUP CALL\":
a) shall set the stored current call type to \"BASIC GROUP CALL\";
b) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network basic group call as described in 3GPP TS
24.483 [4]; and
c) shall enter \"T2: in-progress basic group call\" state.
[TS 24.581, clause 7.2.3.2.3]
When an MCVideo call is established the terminating transmission participant:
1\. shall create an instance of a transmission participant state transition
diagram for basic operation state machine;
2\. shall start timer T230 (Inactivity); and
3\. shall enter \'O: silence\' state.
[TS 24.581, clause 7.2.3.3.4]
When a Transmission Granted message is received and if the User ID in the
Transmission Granted message does not match its own User ID, the transmission
participant:
1\. may provide a transmission taken notification to the MCVideo user;
2\. if the Transmission Indicator field is included and the B-bit is set to
\'1\' (Broadcast group call), shall provide a notification to the user
indicating that this is a broadcast group call;
3\. shall stop timer T230 (Inactivity);
4\. shall start timer T203 (End of RTP media) and store the identity of the
user, to whom the transmission was granted in the Transmission Granted
message, in transmitter list; and
5\. shall enter \'O: has no permission\' state.
[TS 24.581, clause 7.2.3.4.2]
If the transmission participant receives an indication from the MCVideo user
that the MCVideo user wants to send media, the transmission participant:
1\. shall send the Transmission Request message to other clients. The
Transmission Request message:
a. if a priority different than the default transmission priority is required,
shall include the Transmission Priority field with the requested priority in
the \ element;
b. shall include the MCVideo ID of the MCVideo user in the User ID field; and
c. if the transmission request is a broadcast group call, system call,
emergency call or an imminent peril call, shall include a Transmission
Indicator field indicating the relevant call types;
2\. shall initialise the counter C201 (Transmission request) with value set to
1;
3\. shall start timer T201 (Transmission Request); and
4\. shall enter \'O: pending request\' state.
[TS 24.581, clause 7.2.3.7.3]
Upon receiving Transmission Rejected message, if the \ value in the
User ID field matches its own MCVideo ID and User ID of transmission
participant sending the Transmission Rejected message matches the stored User
ID of current transmission arbitrator, the transmission participant:
Editor\'s Note: How a new participant obtains the identity of the transmission
arbitrator is FFS.
1\. shall stop the timer T201 (Transmission Request);
2\. shall provide transmission deny notification to the user;
3\. may display the transmission deny reason to the user using information in
the Reject Cause field; and
4\. shall enter \'O: has no permission\' state.
Otherwise, if the \ value in the User ID field matches its own
MCVideo ID and there is no stored the current transmission arbitrator, the
transmission participant:
1\. shall stop the timer T201 (Transmission Request);
2\. shall set the stored User ID of the current transmission arbitrator to the
value in the User ID of transmission control server field as received in the
Transmission Rejected message;
3\. shall provide transmission deny notification to the user;
4\. may display the transmission deny reason to the user using information in
the Reject Cause field; and
5\. shall enter \'O: has no permission\' state.
##### 7.1.1.4.3 Test description {#test-description-44 .H6}
##### 7.1.1.4.3.1 Pre-test conditions {#pre-test-conditions-44 .H6}
##### System Simulator: {#system-simulator-37 .H6}
\- SS-UE1 (MCVideo client)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate, the SS is behaving as SS-UE1 as defined in TS 36.508 [24],
configured for and operating as ProSe Direct Communication transmitting and
receiving device.
\- GNSS simulator to simulate a location and provide a timing reference for
the assistance of E-UTRAN off-network testing.
NOTE 1: For operation in off-network environment, it needs be ensured that
after the UE is powered up it considers the Geographical area #1 that is
simulated by the GNSS simulator as being one of the geographical areas set in
the USIM for operation when UE is \"not served by E-UTRAN\".
\- SS-NW (MCVideo server)
\-- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
NOTE 2: The SS operation as NW (MCVideo server) is needed only for the
preamble if the UE has to perform procedure \'MCX Authorization/Configuration
and Key Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
##### IUT: {#iut-36 .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate, the UE is behaving as a ProSe enabled UE as defined in TS 36.508
[24], configured for and operating as ProSe Direct Communication transmitting
and receiving device.
##### Preamble: {#preamble-37 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- The GNSS simulator is configured to simulate a location in the centre of
Geographical area #1 and provide a timing reference, as defined in TS 36.508
[24] Table 4.11.2-2 scenario #1.
\- The UE is switched-off.
\- UE States at the end of the preamble
\- The UE is in state \'switched-off\'.
##### 7.1.1.4.3.2 Test procedure sequence {#test-procedure-sequence-44 .H6}
Table 7.1.1.4.3.2-1: Main Behaviour
+-----------+-----------+-----------+-----------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +===========+===========+===========+===========+=========+====+ | | | U - S | Message | | | +-----------+-----------+-----------+-----------+---------+----+ | 1 | Power up | - | - | - | - | | | the UE. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 2 | Trigger | - | - | - | - | | | the UE to | | | | | | | reset UTC | | | | | | | time and | | | | | | | location. | | | | | | | | | | | | | | NOTE: The | | | | | | | UTC time | | | | | | | and | | | | | | | location | | | | | | | reset may | | | | | | | be | | | | | | | performed | | | | | | | by MMI or | | | | | | | AT | | | | | | | command | | | | | | | (+CUTCR). | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 3 | Activate | - | - | - | - | | | the | | | | | | | MCVideo | | | | | | | Client | | | | | | | Ap | | | | | | | plication | | | | | | | and | | | | | | | register | | | | | | | User A as | | | | | | | the | | | | | | | MCVideo | | | | | | | User (TS | | | | | | | 36.579-5 | | | | | | | [5], | | | | | | | px_MCX_ | | | | | | | User_A_ | | | | | | | username, | | | | | | | p | | | | | | | x_MCX_U | | | | | | | ser_A_p | | | | | | | assword). | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | - | E | - | - | - | - | | | XCEPTION: | | | | | | | The | | | | | | | E | | | | | | | -UTRA/EPC | | | | | | | actions | | | | | | | which are | | | | | | | related | | | | | | | to the | | | | | | | MCVideo | | | | | | | call | | | | | | | esta | | | | | | | blishment | | | | | | | are | | | | | | | described | | | | | | | in | | | | | | | TS 36.57 | | | | | | | 9-1 [2] | | | | | | | clause | | | | | | | 5.4.10 | | | | | | | \'MCX CT | | | | | | | comm | | | | | | | unication | | | | | | | over | | | | | | | ProSe | | | | | | | direct | | | | | | | on | | | | | | | e-to-many | | | | | | | comm | | | | | | | unication | | | | | | | out of | | | | | | | E-UTRA | | | | | | | coverage | | | | | | | / | | | | | | | Ann | | | | | | | ouncing/D | | | | | | | iscoveree | | | | | | | procedure | | | | | | | for group | | | | | | | member | | | | | | | dis | | | | | | | covery\'. | | | | | | | The test | | | | | | | sequence | | | | | | | below | | | | | | | shows | | | | | | | only the | | | | | | | MCVideo | | | | | | | relevant | | | | | | | messages | | | | | | | e | | | | | | | xchanged. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 4 | SS-UE1 | \ | GROUP | 1 | P | | | Does the | | CALL | | | | | UE | | ACCEPT | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | GROUP | | | | | | | CALL | | | | | | | ACCEPT | | | | | | | message? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 6 | SS-UE1 | \ | Tra | 1 | P | | | Does the | | nsmission | | | | | UE | | Request | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | Tra | | | | | | | nsmission | | | | | | | Request | | | | | | | message? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 9 | SS-UE1 | \ | GROUP | 1 | P | | | Does the | | CALL | | | | | UE | | PROBE | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | GROUP | | | | | | | CALL | | | | | | | PROBE | | | | | | | message | | | | | | | to | | | | | | | determine | | | | | | | the | | | | | | | current | | | | | | | call | | | | | | | status of | | | | | | | the | | | | | | | group? | | | | | | | | | | | | | | (NOTE 2) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | - | E | - | - | - | - | | | XCEPTION: | | | | | | | Step 6 is | | | | | | | executed | | | | | | | a total | | | | | | | of 3 | | | | | | | times | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 6 | Check: At | --> | GROUP | 1 | P | | | the | | CALL | | | | | e | | PROBE | | | | | xpiration | | | | | | | of timer | | | | | | | TFG3 | | | | | | | (call | | | | | | | probe | | | | | | | retrans | | | | | | | mission), | | | | | | | does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | retra | | | | | | | nsmission | | | | | | | of the | | | | | | | GROUP | | | | | | | CALL | | | | | | | PROBE | | | | | | | sent in | | | | | | | step 5? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 7 | Check: At | --> | GROUP | 1 | P | | | the | | CALL | | | | | e | | ANN | | | | | xpiration | | OUNCEMENT | | | | | of timer | | | | | | | TFG1 | | | | | | | (wait for | | | | | | | call | | | | | | | annou | | | | | | | ncement), | | | | | | | and after | | | | | | | receiving | | | | | | | no | | | | | | | response | | | | | | | to the | | | | | | | GROUP | | | | | | | CALL | | | | | | | PROBE, | | | | | | | does the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | GROUP | | | | | | | CALL | | | | | | | ANN | | | | | | | OUNCEMENT | | | | | | | message | | | | | | | to | | | | | | | initiate | | | | | | | an | | | | | | | of | | | | | | | f-network | | | | | | | imminent | | | | | | | peril | | | | | | | group | | | | | | | call? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 8 | The | \ | Tra | 1 | P | | | Does the | | nsmission | | | | | UE | | Granted | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | Tra | | | | | | | nsmission | | | | | | | Granted | | | | | | | message | | | | | | | towards | | | | | | | the other | | | | | | | tra | | | | | | | nsmission | | | | | | | part | | | | | | | icipants? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 10 | Make the | - | - | - | - | | | MCVideo | | | | | | | User | | | | | | | release | | | | | | | tra | | | | | | | nsmission | | | | | | | control. | | | | | | | | | | | | | | (NOTE 1), | | | | | | | (NOTE 3) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 11 | Check: | --> | Tra | 1 | P | | | Does the | | nsmission | | | | | UE | | Ar | | | | | (MCVideo | | bitration | | | | | Client) | | Release | | | | | send a | | | | | | | Tra | | | | | | | nsmission | | | | | | | Ar | | | | | | | bitration | | | | | | | Release | | | | | | | message | | | | | | | to the | | | | | | | other | | | | | | | tra | | | | | | | nsmission | | | | | | | part | | | | | | | icipants? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 12 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | Client) | | | | | | | release | | | | | | | the | | | | | | | imminent | | | | | | | peril | | | | | | | group | | | | | | | call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | - | E | - | - | - | - | | | XCEPTION: | | | | | | | UE | | | | | | | releases | | | | | | | the | | | | | | | E-UTRA | | | | | | | co | | | | | | | nnection. | | | | | | | The | | | | | | | E | | | | | | | -UTRA/EPC | | | | | | | actions | | | | | | | which are | | | | | | | related | | | | | | | to the | | | | | | | MCVideo | | | | | | | call | | | | | | | release | | | | | | | are | | | | | | | described | | | | | | | in | | | | | | | TS 36.57 | | | | | | | 9-1 [2] | | | | | | | clause | | | | | | | 5.4.8 | | | | | | | \'MCX | | | | | | | comm | | | | | | | unication | | | | | | | over | | | | | | | ProSe | | | | | | | direct | | | | | | | o | | | | | | | ne-to-one | | | | | | | comm | | | | | | | unication | | | | | | | out of | | | | | | | E-UTRA | | | | | | | coverage | | | | | | | - release | | | | | | | by the | | | | | | | UE\'. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | NOTE 1: | | | | | | | This is | | | | | | | expected | | | | | | | to be | | | | | | | done via | | | | | | | a | | | | | | | suitable | | | | | | | imple | | | | | | | mentation | | | | | | | dependent | | | | | | | MMI. | | | | | | | | | | | | | | NOTE 2: | | | | | | | Timer | | | | | | | TFG3 | | | | | | | (call | | | | | | | probe | | | | | | | re | | | | | | | transmiss | | | | | | | ion)=40ms | | | | | | | as | | | | | | | defined | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2], | | | | | | | Table | | | | | | | 5.5.8.1-1 | | | | | | | and TFG1 | | | | | | | (wait for | | | | | | | call | | | | | | | a | | | | | | | nnounceme | | | | | | | nt)=150ms | | | | | | | as | | | | | | | defined | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2], | | | | | | | Table | | | | | | | 5.5.8.1-1 | | | | | | | are | | | | | | | started | | | | | | | upon the | | | | | | | sending | | | | | | | of the | | | | | | | GROUP | | | | | | | CALL | | | | | | | PROBE | | | | | | | message | | | | | | | | | | | | | | NOTE 3: | | | | | | | If the | | | | | | | MCVideo | | | | | | | User does | | | | | | | not | | | | | | | release | | | | | | | tra | | | | | | | nsmission | | | | | | | control | | | | | | | before | | | | | | | timer | | | | | | | T207 | | | | | | | (Stop | | | | | | | talking) | | | | | | | expires, | | | | | | | then the | | | | | | | MCVideo | | | | | | | Client | | | | | | | will | | | | | | | enter the | | | | | | | \'O: | | | | | | | silence\' | | | | | | | state per | | | | | | | TS 24.581 | | | | | | | [27] | | | | | | | and the | | | | | | | remaining | | | | | | | steps | | | | | | | will not | | | | | | | be valid. | | | | | | | Timer | | | | | | | T206 | | | | | | | (Stop | | | | | | | talking | | | | | | | warning) | | | | | | | is | | | | | | | started | | | | | | | upon the | | | | | | | sending | | | | | | | of the | | | | | | | Tra | | | | | | | nsmission | | | | | | | Granted | | | | | | | message. | | | | | | | Timer | | | | | | | T207 | | | | | | | (Stop | | | | | | | talking) | | | | | | | starts | | | | | | | upon the | | | | | | | e | | | | | | | xpiration | | | | | | | of Timer | | | | | | | T206 | | | | | | | (Stop | | | | | | | talking | | | | | | | warning). | | | | | | | Default | | | | | | | value of | | | | | | | Timer | | | | | | | T206 | | | | | | | (Stop | | | | | | | talking | | | | | | | war | | | | | | | ning)=27s | | | | | | | according | | | | | | | to TS | | | | | | | 24.581 | | | | | | | [27]. | | | | | | | Default | | | | | | | value of | | | | | | | T207 | | | | | | | (Stop | | | | | | | talking) | | | | | | | is 3s | | | | | | | according | | | | | | | to TS | | | | | | | 24.581 | | | | | | | [27]. | | | | | | +-----------+-----------+-----------+-----------+---------+----+
##### 7.1.1.5.3.3 Specific message contents {#specific-message-contents-45
.H6}
Table 7.1.1.5.3.3-1: GROUP CALL ANNOUNCEMENT (step 7, Table 7.1.1.5.3.2-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.14.2-1, condition IMMPERIL-CALL
* * *
Table 7.1.1.5.3.3-2: GROUP CALL ACCEPT (step 8, Table 7.1.1.5.3.2-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.14.3-1, condition IMMPERIL-CALL
* * *
Information Element Value/remark Comment Condition Sending MCVideo user ID
px_MCVideo_ID_User_B
Table 7.1.1.5.3.3-3: Transmission Granted (step 9, Table 7.1.1.5.3.2-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.1-1, condition OFF-NETWORK,
IMMPERIL-CALL
* * *
Table 7.1.1.5.3.3-4: Transmission Arbitration Release (step 11, Table
7.1.1.5.3.2-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.4-1, condition OFF-NETWORK,
IMMPERIL-CALL
* * *
#### 7.1.1.6 Off-network / Group Call / Imminent Peril Call / Client
Terminated (CT)
##### 7.1.1.6.1 Test Purpose (TP) {#test-purpose-tp-46 .H6}
##### (1) {#section-183 .H6}
**with** { UE (MCVideo Client) registered and authorised for MCVideo Service,
including authorised to receive imminent peril group calls in off-network
environment, and the UE (MCVideo Client) is in an off-network environment }
**ensure that** {
**when** { UE (MCVideo Client) receives a GROUP CALL ANNOUNCEMENT message for
an imminent peril group call with Confirm mode indication present }
**then** { UE (MCVideo Client) sends a GROUP CALL ACCEPT message **and**
respects the transmission control imposed by the transmission control
entity/arbitrator }
}
##### 7.1.1.6.2 Conformance requirements {#conformance-requirements-46 .H6}
References: The conformance requirements covered in the current TC are
specified in: TS 24.281 clauses 9.3.2.4.3.3, 9.3.3.4.5, TS 24.581 clauses
7.2.3.2.3, 7.2.3.3.4, 7.2.3.4.2, 7.2.3.7.3. Unless otherwise stated these are
Rel-15 requirements.
[TS 24.281, clause 9.3.2.4.3.3]
When in the \"S1: start-stop\" state, upon receiving a GROUP CALL ANNOUNCEMENT
message with the MCVideo group ID IE not matching MCVideo group ID of the call
stored for other state machines, the MCVideo client:
1) shall store the value of the SDP IE of the GROUP CALL ANNOUNCEMENT message
as the SDP body of the call;
2) shall store the value of the Call identifier IE of the GROUP CALL
ANNOUNCEMENT message as the call identifier of the call;
3) shall store the value of the Originating MCVideo user ID IE of the GROUP
CALL ANNOUNCEMENT message as the originating MCVideo user ID of the call;
4) shall store the value of the Refresh interval IE of the GROUP CALL
ANNOUNCEMENT message as the refresh interval of the call;
5) shall store the value of the MCVideo group ID IE of the GROUP CALL
ANNOUNCEMENT message as the MCVideo group ID of the call;
6) shall store the value of the Call start time IE of the GROUP CALL
ANNOUNCEMENT message as the call start time of the call;
7) shall create a call type control state machine as described in clause
9.3.3.2;
8) if the terminating UE is configured that the terminating MCVideo user
acknowledgement is required upon a terminating call request reception:
a) shall start timer TFG4 (waiting for the user);
b) if the GROUP CALL ANNOUNCEMENT message contains the Confirm mode indication
IE, shall enter the \"S5: pending user action with confirm indication\" state;
and
c) if the GROUP CALL ANNOUNCEMENT message does not contains the Confirm mode
indication IE, shall enter the \"S4: pending user action without confirm
indication\" state; and
9) if the terminating UE is configured that the terminating MCVideo user
acknowledgement is not required upon a terminating call request reception:
a) shall establish a media session based on the stored SDP body of the call;
b) shall start transmission control as terminating transmission participant as
specified in clause a.b in 3GPP TS 24.581 [5];
c) if the GROUP CALL ANNOUNCEMENT message contains the Confirm mode indication
IE:
i) shall generate a GROUP CALL ACCEPT message as specified in clause 17.1.4.
In the GROUP CALL ACCEPT message, the MCVideo client:
A) shall set the Call identifier IE to the stored call identifier of the call;
B) shall set the Sending MCVideo user ID IE to own MCVideo user id;
C) shall set the Call type IE to the stored current call type associated with
the call type control state machine; and
D) shall set the MCVideo group ID IE to the stored MCVideo group ID of the
call; and
ii) shall send the GROUP CALL ACCEPT message as specified in clause 9.3.1.1.1;
d) shall start timer TFG6 (max duration) with value as specified in clause
9.3.2.4.1.2;
e) shall start timer TFG2 (call announcement) with value as specified in
clause 9.3.2.4.1.1.1; and
f) shall enter the \"S3: part of ongoing call\" state.
[TS 24.281, clause 9.3.3.4.5]
When in the \"T0: waiting for the call to establish\" state, upon receipt of a
GROUP CALL ANNOUNCEMENT message by an idle MCVideo client when MCVideo user
acknowledgement is not required, the MCVideo client:
1) shall set the stored last call type change time to the Last call type
change time IE of the GROUP CALL ANNOUNCEMENT message;
2) shall set the last user to change call type to the Last user to change call
type IE of the GROUP CALL ANNOUNCEMENT message;
3) if the Call type IE of the received GROUP CALL ANNOUNCEMENT message is set
to \"EMERGENCY GROUP CALL\":
a) shall set the stored current call type to \"EMERGENCY GROUP CALL\";
b) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network emergency group call as described in 3GPP
TS 24.483 [4];
c) shall start timer TFG13 (implicit downgrade emergency) with value as
specified in clause 9.3.3.4.1.1; and
d) shall enter \"T1: in-progress emergency group call\" state;
4) if the Call type IE of the received GROUP CALL ANNOUNCEMENT message is set
to \"IMMINENT PERIL GROUP CALL\":
a) shall set the stored current call type to \"IMMINENT PERIL GROUP CALL\";
b) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network imminent peril group call as described
in3GPP TS 24.483 [4];
c) shall start timer TFG14 (implicit downgrade imminent peril) with value as
specified in clause 9.3.3.4.1.2; and
d) shall enter \"T3: in-progress imminent peril group call\" state; and
5) if the Call type IE of the received GROUP CALL ANNOUNCEMENT message is set
to \"BASIC GROUP CALL\":
a) shall set the stored current call type to \"BASIC GROUP CALL\";
b) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network basic group call as described in 3GPP TS
24.483 [4]; and
c) shall enter \"T2: in-progress basic group call\" state.
[TS 24.581, clause 7.2.3.2.3]
When an MCVideo call is established the terminating transmission participant:
1\. shall create an instance of a transmission participant state transition
diagram for basic operation state machine;
2\. shall start timer T230 (Inactivity); and
3\. shall enter \'O: silence\' state.
[TS 24.581, clause 7.2.3.3.4]
When a Transmission Granted message is received and if the User ID in the
Transmission Granted message does not match its own User ID, the transmission
participant:
1\. may provide a transmission taken notification to the MCVideo user;
2\. if the Transmission Indicator field is included and the B-bit is set to
\'1\' (Broadcast group call), shall provide a notification to the user
indicating that this is a broadcast group call;
3\. shall stop timer T230 (Inactivity);
4\. shall start timer T203 (End of RTP media) and store the identity of the
user, to whom the transmission was granted in the Transmission Granted
message, in transmitter list; and
5\. shall enter \'O: has no permission\' state.
[TS 24.581, clause 7.2.3.4.2]
If the transmission participant receives an indication from the MCVideo user
that the MCVideo user wants to send media, the transmission participant:
1\. shall send the Transmission Request message to other clients. The
Transmission Request message:
a. if a priority different than the default transmission priority is required,
shall include the Transmission Priority field with the requested priority in
the \ element;
b. shall include the MCVideo ID of the MCVideo user in the User ID field; and
c. if the transmission request is a broadcast group call, system call,
emergency call or an imminent peril call, shall include a Transmission
Indicator field indicating the relevant call types;
2\. shall initialise the counter C201 (Transmission request) with value set to
1;
3\. shall start timer T201 (Transmission Request); and
4\. shall enter \'O: pending request\' state.
[TS 24.581, clause 7.2.3.7.3]
Upon receiving Transmission Rejected message, if the \ value in the
User ID field matches its own MCVideo ID and User ID of transmission
participant sending the Transmission Rejected message matches the stored User
ID of current transmission arbitrator, the transmission participant:
Editor\'s Note: How a new participant obtains the identity of the transmission
arbitrator is FFS.
1\. shall stop the timer T201 (Transmission Request);
2\. shall provide transmission deny notification to the user;
3\. may display the transmission deny reason to the user using information in
the Reject Cause field; and
4\. shall enter \'O: has no permission\' state.
Otherwise, if the \ value in the User ID field matches its own
MCVideo ID and there is no stored the current transmission arbitrator, the
transmission participant:
1\. shall stop the timer T201 (Transmission Request);
2\. shall set the stored User ID of the current transmission arbitrator to the
value in the User ID of transmission control server field as received in the
Transmission Rejected message;
3\. shall provide transmission deny notification to the user;
4\. may display the transmission deny reason to the user using information in
the Reject Cause field; and
5\. shall enter \'O: has no permission\' state.
##### 7.1.1.6.3 Test description {#test-description-46 .H6}
##### 7.1.1.6.3.1 Pre-test conditions {#pre-test-conditions-46 .H6}
##### System Simulator: {#system-simulator-39 .H6}
\- SS-UE1 (MCVideo client)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate, the SS is behaving as SS-UE1 as defined in TS 36.508 [24],
configured for and operating as ProSe Direct Communication transmitting and
receiving device.
\- GNSS simulator to simulate a location and provide a timing reference for
the assistance of E-UTRAN off-network testing.
NOTE 1: For operation in off-network environment, it needs be ensured that
after the UE is powered up it considers the Geographical area #1 that is
simulated by the GNSS simulator as being one of the geographical areas set in
the USIM for operation when UE is \"not served by E-UTRAN\".
\- SS-NW (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
NOTE 2: The SS operation as NW (MCVideo server) is needed only for the
preamble if the UE has to perform procedure \'MCX Authorization/Configuration
and Key Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
##### IUT: {#iut-38 .H6}
\- UE (MCVideo client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate, the UE is behaving as a ProSe enabled UE as defined in TS 36.508
[24], configured for and operating as ProSe Direct Communication transmitting
and receiving device.
##### Preamble: {#preamble-39 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- The GNSS simulator is configured to simulate a location in the centre of
Geographical area #1 and provide a timing reference, as defined in TS 36.508
[24] Table 4.11.2-2 scenario #1.
\- The UE is switched-off.
\- UE States at the end of the preamble
\- The UE is in state \'switched-off\'.
##### 7.1.1.6.3.2 Test procedure sequence {#test-procedure-sequence-46 .H6}
Table 7.1.1.6.3.2-1: Main Behaviour
+-----------+-----------+-----------+-----------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +===========+===========+===========+===========+=========+====+ | | | U - S | Message | | | +-----------+-----------+-----------+-----------+---------+----+ | 1 | Power up | - | - | - | - | | | the UE. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 2 | Trigger | - | - | - | - | | | the UE to | | | | | | | reset UTC | | | | | | | time and | | | | | | | location. | | | | | | | | | | | | | | NOTE: The | | | | | | | UTC time | | | | | | | and | | | | | | | location | | | | | | | reset may | | | | | | | be | | | | | | | performed | | | | | | | by MMI or | | | | | | | AT | | | | | | | command | | | | | | | (+CUTCR). | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 3 | Activate | - | - | - | - | | | the | | | | | | | MCVideo | | | | | | | Client | | | | | | | Ap | | | | | | | plication | | | | | | | and | | | | | | | register | | | | | | | User A as | | | | | | | the | | | | | | | MCVideo | | | | | | | User (TS | | | | | | | 36.579-5 | | | | | | | [5], | | | | | | | px_MCX_ | | | | | | | User_A_ | | | | | | | username, | | | | | | | p | | | | | | | x_MCX_U | | | | | | | ser_A_p | | | | | | | assword). | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | - | E | - | - | - | - | | | XCEPTION: | | | | | | | The | | | | | | | E | | | | | | | -UTRA/EPC | | | | | | | actions | | | | | | | which are | | | | | | | related | | | | | | | to the | | | | | | | MCVideo | | | | | | | call | | | | | | | esta | | | | | | | blishment | | | | | | | are | | | | | | | described | | | | | | | in | | | | | | | TS 36.57 | | | | | | | 9-1 [2] | | | | | | | clause | | | | | | | 5.4.10 | | | | | | | \'MCX CT | | | | | | | comm | | | | | | | unication | | | | | | | over | | | | | | | ProSe | | | | | | | direct | | | | | | | on | | | | | | | e-to-many | | | | | | | comm | | | | | | | unication | | | | | | | out of | | | | | | | E-UTRA | | | | | | | coverage | | | | | | | / | | | | | | | Ann | | | | | | | ouncing/D | | | | | | | iscoveree | | | | | | | procedure | | | | | | | for group | | | | | | | member | | | | | | | dis | | | | | | | covery\'. | | | | | | | The test | | | | | | | sequence | | | | | | | below | | | | | | | shows | | | | | | | only the | | | | | | | MCVideo | | | | | | | relevant | | | | | | | messages | | | | | | | e | | | | | | | xchanged. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 4 | SS-UE1 | \ | GROUP | 1 | P | | | Does the | | CALL | | | | | UE | | ACCEPT | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | GROUP | | | | | | | CALL | | | | | | | ACCEPT | | | | | | | message? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 6 | SS-UE1 | \ | Tra | 1 | P | | | Does the | | nsmission | | | | | UE | | Request | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | Tra | | | | | | | nsmission | | | | | | | Request | | | | | | | message? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 9 | SS-UE1 | \ | GROUP | 1 | P | | | Does the | | CALL | | | | | UE | | BROADCAST | | | | | (MCVideo | | | | | | | client) | | | | | | | send a | | | | | | | GROUP | | | | | | | CALL | | | | | | | BROADCAST | | | | | | | message? | | | | | | | | | | | | | | (NOTE 2) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 6 | SS starts | - | - | - | - | | | Timer=10s | | | | | | | (Timer | | | | | | | TFB2 | | | | | | | ( | | | | | | | broadcast | | | | | | | retrans | | | | | | | mission)) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 7 | Check: | --> | Tra | 1 | P | | | Does the | | nsmission | | | | | UE | | Granted | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | Tra | | | | | | | nsmission | | | | | | | Granted | | | | | | | message | | | | | | | towards | | | | | | | the other | | | | | | | tra | | | | | | | nsmission | | | | | | | part | | | | | | | icipants? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 8 | Timer=10s | - | - | - | - | | | expires | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 9 | Check: | --> | GROUP | 2 | P | | | Does the | | CALL | | | | | UE | | BROADCAST | | | | | (MCVideo | | | | | | | client) | | | | | | | send a | | | | | | | GROUP | | | | | | | CALL | | | | | | | BROADCAST | | | | | | | message | | | | | | | using the | | | | | | | same Call | | | | | | | i | | | | | | | dentifier | | | | | | | IE as | | | | | | | used in | | | | | | | step 4? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 10 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | Client) | | | | | | | cancel | | | | | | | the | | | | | | | broadcast | | | | | | | call | | | | | | | | | | | | | | (NOTE 1), | | | | | | | (NOTE 3) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 11 | Check: | --> | GROUP | 3 | P | | | Does the | | CALL | | | | | UE | | BROADCAST | | | | | (MCVideo | | END | | | | | client) | | | | | | | send a | | | | | | | GROUP | | | | | | | CALL | | | | | | | BROADCAST | | | | | | | END | | | | | | | message | | | | | | | and enter | | | | | | | the \"B1: | | | | | | | sta | | | | | | | rt-stop\" | | | | | | | state? | | | | | | | | | | | | | | (NOTE 4) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | - | E | - | - | - | - | | | XCEPTION: | | | | | | | UE | | | | | | | releases | | | | | | | the | | | | | | | E-UTRA | | | | | | | co | | | | | | | nnection. | | | | | | | The | | | | | | | E | | | | | | | -UTRA/EPC | | | | | | | actions | | | | | | | which are | | | | | | | related | | | | | | | to the | | | | | | | MCVideo | | | | | | | call | | | | | | | release | | | | | | | are | | | | | | | described | | | | | | | in | | | | | | | TS 36.57 | | | | | | | 9-1 [2] | | | | | | | clause | | | | | | | 5.4.8 | | | | | | | \'MCX | | | | | | | comm | | | | | | | unication | | | | | | | over | | | | | | | ProSe | | | | | | | direct | | | | | | | o | | | | | | | ne-to-one | | | | | | | comm | | | | | | | unication | | | | | | | out of | | | | | | | E-UTRA | | | | | | | coverage | | | | | | | - release | | | | | | | by the | | | | | | | UE\'. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | NOTE 1: | | | | | | | This is | | | | | | | expected | | | | | | | to be | | | | | | | done via | | | | | | | a | | | | | | | suitable | | | | | | | imple | | | | | | | mentation | | | | | | | dependent | | | | | | | MMI. | | | | | | | | | | | | | | NOTE 2: | | | | | | | Timer | | | | | | | TFB2 | | | | | | | ( | | | | | | | broadcast | | | | | | | retran | | | | | | | smission) | | | | | | | is | | | | | | | started | | | | | | | by the | | | | | | | MCVideo | | | | | | | Client | | | | | | | upon the | | | | | | | sending | | | | | | | of the | | | | | | | GROUP | | | | | | | CALL | | | | | | | BROADCAST | | | | | | | message. | | | | | | | Timer | | | | | | | TFB2 | | | | | | | ( | | | | | | | broadcast | | | | | | | re | | | | | | | transmiss | | | | | | | ion)=10s, | | | | | | | as | | | | | | | defined | | | | | | | in TS | | | | | | | 36.579-1 | | | | | | | [2], | | | | | | | Table | | | | | | | 5 | | | | | | | .5.8.1-1. | | | | | | | At the | | | | | | | expire of | | | | | | | timer | | | | | | | TFB2 | | | | | | | ( | | | | | | | broadcast | | | | | | | retrans | | | | | | | mission), | | | | | | | the | | | | | | | MCVideo | | | | | | | Client | | | | | | | resends | | | | | | | the GROUP | | | | | | | CALL | | | | | | | BROADCAST | | | | | | | message. | | | | | | | | | | | | | | NOTE 3: | | | | | | | If the | | | | | | | MCVideo | | | | | | | User does | | | | | | | not | | | | | | | cancel | | | | | | | the | | | | | | | broadcast | | | | | | | call | | | | | | | before | | | | | | | timer | | | | | | | TFB2 | | | | | | | ( | | | | | | | broadcast | | | | | | | retran | | | | | | | smission) | | | | | | | expires, | | | | | | | then the | | | | | | | MCVideo | | | | | | | Client | | | | | | | will | | | | | | | resend | | | | | | | the GROUP | | | | | | | CALL | | | | | | | BROADCAST | | | | | | | message | | | | | | | per TS | | | | | | | 24.379 | | | | | | | [9] and | | | | | | | the | | | | | | | remaining | | | | | | | steps | | | | | | | will not | | | | | | | be valid. | | | | | | | If during | | | | | | | test | | | | | | | execution | | | | | | | it is | | | | | | | found | | | | | | | that the | | | | | | | specified | | | | | | | timer | | | | | | | value is | | | | | | | not large | | | | | | | enough, | | | | | | | then a | | | | | | | new value | | | | | | | needs to | | | | | | | be | | | | | | | s | | | | | | | pecified. | | | | | | | | | | | | | | NOTE 4: | | | | | | | Timer | | | | | | | TFB2 | | | | | | | ( | | | | | | | broadcast | | | | | | | retran | | | | | | | smission) | | | | | | | is | | | | | | | stopped | | | | | | | by the | | | | | | | MCVideo | | | | | | | Client | | | | | | | upon the | | | | | | | sending | | | | | | | of the | | | | | | | GROUP | | | | | | | CALL | | | | | | | BROADCAST | | | | | | | END | | | | | | | message. | | | | | | +-----------+-----------+-----------+-----------+---------+----+
##### 7.1.2.1.3.3 Specific message contents {#specific-message-contents-47
.H6}
Table 7.1.2.1.3.3-1: Transmission Granted (step 7, Table 7.1.2.1.3.2-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.1-1, condition OFF-NETWORK
* * *
Information Element Value/remark Comment Condition **Transmission Indicator**  
Transmission Indicator \"0100000000000000\" Broadcast group call
Table 7.1.2.1.3.3-2: GROUP CALL BROADCAST (step 9, Table 7.1.2.1.3.2-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.5.6.1-1
* * *
Information Element Value/remark Comment Condition Call identifier Use the
same Call identifier as used in the GROUP CALL BROADCAST message sent in step
5
Table 7.1.2.1.3.3-3: GROUP CALL BROADCAST END (step 11, Table 7.1.2.1.3.2-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.5.6.1-1
* * *
Information Element Value/remark Comment Condition Call identifier Use the
same Call identifier as used in the GROUP CALL BROADCAST message sent in step
5
#### 7.1.2.2 Off-network / Group Call / Broadcast Group Call / Originator
Releases Call / Client Terminated (CT)
##### 7.1.2.2.1 Test Purpose (TP) {#test-purpose-tp-48 .H6}
##### (1) {#section-187 .H6}
**with** { UE (MCVideo Client) registered and authorised for MCVideo Service,
including authorised to receive broadcast calls in off-network environment,
and the UE (MCVideo Client) is in an off-network environment, and the UE
(MCVideo Client) has received a GROUP CALL BROADCAST message }
**ensure that** {
**when** { UE (MCVideo Client) receives a Transmission Granted message with
the Transmission Indicator field included and with the B-bit set to \'1\'
(Broadcast group call) }
**then** { UE (MCVideo Client) provides a notification to the MCVideo User
indicating that this is a broadcast group call }
}
##### (2) {#section-188 .H6}
**with** { UE (MCVideo Client) in an ongoing off-network broadcast group call
}
**ensure that** {
**when** { MCVideo User requests to send media }
**then** { UE (MCVideo Client) does not send a Transmission Request message }
}
##### 7.1.2.2.2 Conformance requirements {#conformance-requirements-48 .H6}
References: The conformance requirements covered in the current TC are
specified in: TS 24.281 clauses 9.4.2.4.2, 9.4.2.4.3, 9.4.2.4.8, TS 24.581
clauses 7.2.3.2.9, 7.2.3.4.6. Unless otherwise stated these are Rel-15
requirements.
[TS 24.281, clause 9.4.2.4.2]
When in the \"B1: start-stop\" state, upon receiving a GROUP CALL BROADCAST
message with the Call identifier IE not matching any in-progress broadcast
group call, the MCVideo client:
1) shall store the value of the Call identifier IE of the GROUP CALL BROADCAST
message as the call identifier of the call;
2) shall store the value of the Call type IE of the GROUP CALL BROADCAST
message as the received current call type;
3) shall store the value of the SDP IE of the GROUP CALL BROADCAST message as
the SDP body of the call;
4) shall store the value of the Originating MCVideo user ID IE of the GROUP
CALL BROADCAST message as the originating MCVideo user ID of the call;
5) shall store the value of the MCVideo group ID IE of the GROUP CALL
BROADCAST message as the MCVideo group ID of the call;
6) if the terminating UE is configured that the terminating MCVideo user
acknowledgement is required upon a terminating call request reception:
i) shall start timer TFB3 (waiting for the user); and
ii) shall enter the \"B3: pending user action\" state; and
7) if the terminating UE is configured that the terminating MCVideo user
acknowledgement is not required upon a terminating call request reception:
i) shall establish a media session based on the stored SDP body of the call;
ii) shall start transmission control as terminating transmission participant
as specified in clause a.b in 3GPP TS 24.581 [5];
iii) shall start timer TFB1 (max duration); and
iv) shall enter the \"B2: in-progress broadcast group call\" state.
[TS 24.281, clause 9.4.2.4.3]
When in the \"B3: pending user action\" state, upon indication from the
MCVideo user to accept the incoming broadcast group call, the MCVideo client:
1) shall establish a media session based on the stored SDP body of the call;
2) shall start transmission control as terminating transmission participant as
described specified in clause a.b in 3GPP TS 24.581 [5];
3) shall stop timer TFB3 (waiting for the user);
4) shall start timer TFB1 (max duration); and
5) shall enter the \"B2: in-progress broadcast group call\" state.
[TS 24.281, clause 9.4.2.4.8]
When in the \"B2: in-progress broadcast group call\" state or \"B4: ignoring
same call ID\" state, upon receiving GROUP CALL BROADCAST END message with the
same Call identifier IE as the stored call identifier, the MCVideo client:
1) shall release media session;
2) shall stop transmission control, if running; and
3) shall enter the \"B1: start-stop\" state.
[TS 24.581, clause 7.2.3.2.9]
When an MCVideo broadcast call is established the terminating transmission
participant:
1\. shall create an instance of a transmission participant state transition
diagram for basic operation state machine;
2\. shall start timer T203 (End of RTP media); and
3\. shall enter \'O: has no permission\' state.
NOTE: In MCVideo broadcast call, only originating MCVideo user is allowed to
request transmission and transmit media. A Transmission Request message is
locally denied to terminating MCVideo user, if requested.
[TS 24.581, clause 7.2.3.4.6]
When a Transmission Granted message is received and if the \ value in
the User ID field does not match its own MCVideo ID, the transmission
participant:
1\. shall start timer T203 (End of RTP media) for the User ID;
2\. shall store the user to whom the transmission was granted in the
Transmission Granted message in transmitter list;
3\. may provide a transmission taken notification to the MCVideo user;
4\. if the Transmission Indicator field is included with the B-bit set to
\'1\' (Broadcast group call), shall provide a notification to the user
indicating that this is a broadcast group call; and
5\. shall remain in the \'O: has no permission\' state.
##### 7.1.2.2.3 Test description {#test-description-48 .H6}
##### 7.1.2.2.3.1 Pre-test conditions {#pre-test-conditions-48 .H6}
##### System Simulator: {#system-simulator-41 .H6}
\- SS-UE1 (MCVideo Client)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate, the SS is behaving as SS-UE1 as defined in TS 36.508 [24],
configured for and operating as ProSe Direct Communication transmitting and
receiving device.
\- GNSS simulator to simulate a location and provide a timing reference for
the assistance of E-UTRAN off-network testing.
NOTE 1: For operation in off-network environment, it needs be ensured that
after the UE is powered up it considers the Geographical area #1 that is
simulated by the GNSS simulator as being one of the geographical areas set in
the USIM for operation when UE is \"not served by E-UTRAN\".
\- SS-NW (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
NOTE 2: The SS operation as NW (MCVideo server) is needed only for the
preamble if the UE has to perform procedure \'MCX Authorization/Configuration
and Key Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
##### IUT: {#iut-40 .H6}
\- UE (MCVideo Client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate, the UE is behaving as a ProSe enabled UE as defined in TS 36.508
[24], configured for and operating as ProSe Direct Communication transmitting
and receiving device.
##### Preamble: {#preamble-41 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- The GNSS simulator is configured to simulate a location in the centre of
Geographical area #1 and provide a timing reference, as defined in TS 36.508
[24] Table 4.11.2-2 scenario #1.
\- The UE is switched-off.
\- UE States at the end of the preamble
\- The UE is in state \'switched-off\'.
##### 7.1.2.2.3.2 Test procedure sequence {#test-procedure-sequence-48 .H6}
Table 7.1.2.2.3.2-1: Main Behaviour
+-----------+-----------+-----------+-----------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +===========+===========+===========+===========+=========+====+ | | | U - S | Message | | | +-----------+-----------+-----------+-----------+---------+----+ | 1 | Power up | - | - | - | - | | | the UE | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 2 | Trigger | - | - | - | - | | | the UE to | | | | | | | reset UTC | | | | | | | time and | | | | | | | location. | | | | | | | | | | | | | | NOTE: The | | | | | | | UTC time | | | | | | | and | | | | | | | location | | | | | | | reset may | | | | | | | be | | | | | | | performed | | | | | | | by MMI or | | | | | | | AT | | | | | | | command | | | | | | | (+CUTCR). | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 3 | Activate | - | - | - | - | | | the | | | | | | | MCVideo | | | | | | | Client | | | | | | | Ap | | | | | | | plication | | | | | | | and | | | | | | | register | | | | | | | User A as | | | | | | | the | | | | | | | MCVideo | | | | | | | User (TS | | | | | | | 36.579-5 | | | | | | | [5], | | | | | | | px_MCX_ | | | | | | | User_A_ | | | | | | | username, | | | | | | | p | | | | | | | x_MCX_U | | | | | | | ser_A_p | | | | | | | assword). | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | - | E | - | - | - | - | | | XCEPTION: | | | | | | | The | | | | | | | E | | | | | | | -UTRA/EPC | | | | | | | actions | | | | | | | which are | | | | | | | related | | | | | | | to the | | | | | | | MCVideo | | | | | | | call | | | | | | | esta | | | | | | | blishment | | | | | | | are | | | | | | | described | | | | | | | in | | | | | | | TS 36.57 | | | | | | | 9-1 [2] | | | | | | | clause | | | | | | | 5.4.10 | | | | | | | \'MCX CT | | | | | | | comm | | | | | | | unication | | | | | | | over | | | | | | | ProSe | | | | | | | direct | | | | | | | on | | | | | | | e-to-many | | | | | | | comm | | | | | | | unication | | | | | | | out of | | | | | | | E-UTRA | | | | | | | coverage | | | | | | | / | | | | | | | Ann | | | | | | | ouncing/D | | | | | | | iscoveree | | | | | | | procedure | | | | | | | for group | | | | | | | member | | | | | | | dis | | | | | | | covery\'. | | | | | | | The test | | | | | | | sequence | | | | | | | below | | | | | | | shows | | | | | | | only the | | | | | | | MCVideo | | | | | | | relevant | | | | | | | messages | | | | | | | e | | | | | | | xchanged. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 4 | SS-UE1 | \ | Tra | 2 | F | | | Does the | | nsmission | | | | | UE | | Request | | | | | (MCVideo | | | | | | | Client) | | | | | | | send in | | | | | | | the next | | | | | | | 5 seconds | | | | | | | a | | | | | | | Tra | | | | | | | nsmission | | | | | | | Request | | | | | | | message | | | | | | | to the | | | | | | | tra | | | | | | | nsmission | | | | | | | part | | | | | | | icipants? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 10 | Wait 5 | - | - | - | - | | | seconds | | | | | | | for the | | | | | | | Tra | | | | | | | nsmission | | | | | | | Request | | | | | | | message | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 11 | SS-UE1 | \/\/Common/PrivateCall/Authorised\" leaf node present in the user
profile as specified in 3GPP TS 24.483 [4] is set to \"true\", the MCVideo
client:
1) shall generate and store the call identifier as a random number uniformly
distributed between (0, 65536);
2) shall store own MCVideo user ID as caller ID;
3) shall store MCVideo user ID of the callee as callee ID;
4) shall store \"AUTOMATIC COMMENCEMENT MODE\" as commencement mode, if
requested and the value of \"/\/\/Common/PrivateCall/AutoCommence\" leaf
node present in the user profile as specified in 3GPP TS 24.483 [4] is set to
\"true\". Otherwise if the value of
\"/\/\/Common/PrivateCall/ManualCommence\" leaf node present in the user
profile as specified in 3GPP TS 24.483 [4] is set to \"true\", store \"MANUAL
COMMENCEMENT MODE\" as commencement mode;
5) shall store \"PRIVATE CALL\" as the current call type;;
6) if an end-to-end security context needs to be established then:
a) shall use keying material provided by the key management server to generate
a PCK as described in 3GPP TS 33.180 [8];
b) shall use the PCK to generate a PCK-ID with the four most significant bits
set to \"0001\" to indicate that the purpose of the PCK is to protect private
call communications and with the remaining twenty eight bits being randomly
generated as described in 3GPP TS 33.180 [8];
c) shall encrypt the PCK to a UID associated to the MCVideo client using the
MCVideo ID of the invited user and a time related parameter as described in
3GPP TS 33.180 [8];
d) shall generate a MIKEY-SAKKE I_MESSAGE using the encapsulated PCK and PCK-
ID as specified in 3GPP TS 33.180 [8];
e) shall add the MCVideo ID of the originating MCVideo to the initiator field
(IDRi) of the I_MESSAGE as described in 3GPP TS 33.180 [8];
f) shall sign the MIKEY-SAKKE I_MESSAGE using the originating MCVideo user\'s
signing key provided in the keying material together with a time related
parameter, and add this to the MIKEY-SAKKE payload, as described in 3GPP TS
33.180 [8] and;
g) shall store the MIKEY-SAKKE I_MESSAGE for later inclusion in an SDP body;
7) may store current user location as user location;
8) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network private call as described in 3GPP TS
24.483 [4].
9) shall generate and store offer SDP, as defined in clause 10.3.1.1.2;
10) shall generate a PRIVATE CALL SETUP REQUEST message as specified in clause
17.1.5. In the PRIVATE CALL SETUP REQUEST message, the MCVideo client:
a) shall set the Call identifier IE with the stored call identifier;
b) shall set the MCVideo user ID of the caller IE with the stored caller ID;
c) shall set the MCVideo user ID of the callee IE with the stored callee ID;
d) shall set the Commencement mode IE with the stored commencement mode;
e) shall set the Call type IE with the stored current call type;
f) shall set the SDP offer IE with the stored offer SDP; and
g) may set the User location IE with the stored user location.
11) shall send the PRIVATE CALL SETUP REQUEST message towards other MCVideo
client according to rules and procedures as specified in clause 10.3.1.1.1;
12) shall initialize the counter CFP1 (private call request retransmission)
with the value set to 1;
13) shall start timer TFP1 (private call request retransmission); and
14) shall enter the \"P2: waiting for call response\" state.
[TS 24.281, clause 10.3.2.4.2.2]
When in the \"P2: waiting for call response\" state, upon expiry of timer TFP1
(private call request retransmission), the MCVideo client:
1) may update the stored user location with current user location;
2) shall increment the value of counter CFP1 (private call request
retransmission) by 1;
3) shall generate a PRIVATE CALL SETUP REQUEST message as specified in clause
17.1.5. In the PRIVATE CALL SETUP REQUEST message, the MCVideo client:
a) shall set the Call identifier IE with the stored call identifier;
b) shall set the MCVideo user ID of the caller IE with the stored caller ID;
c) shall set the MCVideo user ID of the callee IE with the stored callee ID;
d) shall set the Commencement mode IE with the stored commencement mode;
e) shall set the Call type IE with the stored current call type;
f) shall set the SDP offer IE with the stored offer SDP; and
g) may set the User location IE with stored user location.
4) shall send the PRIVATE CALL SETUP REQUEST message towards other MCVideo
client according to rules and procedures as specified in clause 10.3.1.1.1;
5) shall start timer TFP1 (private call request retransmission); and
6) shall remain in the \"P2: waiting for call response\" state.
[TS 24.281, clause 10.3.2.4.2.4]
In the \"P2: waiting for call response\" state, when timer TFP1 (private call
request retransmission) expires and the value of the counter CFP1 (private
call request retransmission) is equal to the upper limit and the stored
commencement mode is \"AUTOMATIC COMMENCEMENT MODE\", the MCVideo client:
1) shall start timer TFP7 (waiting for any message with same call identifier);
and
2) shall enter the \"P1: ignoring same call id\" state.
[TS 24.281, clause 10.3.2.4.5.7]
When in the \"P1: ignoring same call id\" state, upon expiry of timer TFP7
(waiting for any message with same call identifier) the MCVideo client:
1) shall clear the stored call identifier; and
2) shall enter the \"P0: start-stop\" state.
[TS 24.281, clause 10.3.2.4.2.8]
When in the \"P2: waiting for call response\" state, upon receiving a PRIVATE
CALL ACCEPT message response to PRIVATE CALL SETUP REQUEST message with the
same call identifier, the MCVideo client:
1) shall store the SDP answer IE received in the PRIVATE CALL ACCEPT message
as answer SDP;
2) shall generate a PRIVATE CALL ACCEPT ACK message as specified in clause
17.1.11:
a) shall set the Call identifier IE to the stored call identifier;
b) shall set the MCVideo user ID of the caller IE with the stored caller ID;
and
c) shall set the MCVideo user ID of the callee IE with the stored callee ID.
3) shall send the PRIVATE CALL ACCEPT ACK message in response to the request
message according to rules and procedures as specified in clause 10.3.1.1.1;
4) shall stop timer TFP1 (call setup retransmission), if running;
5) shall stop timer TFP2 (waiting for call response message), if running;
6) shall establish a media session based on the SDP body of the stored answer
SDP;
7) shall start transmission control as terminating transmission participant as
specified in clause a.b in 3GPP TS 24.581 [5];
8) shall start timer TFP5 (max duration); and
9) shall enter the \"P4: part of ongoing call\" state.
[TS 24.281, clause 10.3.2.4.5.1]
When in the \"P4: part of ongoing call\" state, upon an indication from
MCVideo User to release a private call, the MCVideo client:
1) shall generate a PRIVATE CALL RELEASE message as specified in clause
17.1.9. In the PRIVATE CALL RELEASE message, the MCVideo client:
a) shall set the Call identifier IE to the stored call identifier;
b) shall set the MCVideo user ID of the caller IE with stored caller ID; and
c) shall set the MCVideo user ID of the callee IE with stored callee ID.
2) shall send the PRIVATE CALL RELEASE message in response to the request
message according to rules and procedures as specified in clause 10.3.1.1.1;
3) shall initialize the counter CFP3 (private call release retransmission)
with the value set to 1;
4) shall start timer TFP3 (private call release retransmission); and
5) shall enter the \"P3: waiting for release response\" state.
[TS 24.281, clause 10.3.2.4.5.5]
When in the \"P3: waiting for release response\" state, upon receiving a
PRIVATE CALL RELEASE ACK to PRIVATE CALL RELEASE message, the MCVideo client:
1) shall stop timer TFP3 (private call release retransmission), if running;
2) shall terminate the media session;
3) shall start timer TFP7 (waiting for any message with same call identifier);
and
4) shall enter the \"P1: ignoring same call id\" state.
[TS 24.581, clause 7.2.3.2.2]
When an MCVideo call is established with session announcement including an
explicit transmission request, the originating transmission participant:
1\. shall create an instance of a transmission participant state transition
diagram for basic operation state machine;
2\. shall send Transmission Granted message towards other transmission
participants. The Transmission Granted message:
a. shall include the granted priority in the Transmission priority field;
b. shall include the MCVideo user\'s own MCVideo ID in the User ID field; and
c. if the transmission request is a broadcast group call, system call,
emergency call or an imminent peril call, shall include a Transmission
Indicator field indicating the relevant call types; and
3\. shall enter \'O: transmission arbitration\' state.
[TS 24.581, clause 7.2.3.5.5]
Upon receiving an indication from the MCVideo user to release permission to
send RTP media and there is no transmitter in transmitter list, the
transmission participant:
1\. shall stop timer T206 (Stop talking warning), if running;
2\. shall stop timer T207 (Stop talking), if running;
3\. shall send a Transmission Arbitration Release message towards other
transmission participants. The Transmission Arbitration Release message:
a. shall include the MCVideo ID of the MCVideo user in the User ID field; and
b. if the session is not initiated as a broadcast group call with the B-bit
set to \'1\' (Broadcast group call), shall include a Transmission Indicator
field set to \'0\' (normal call);
4\. shall start timer T230 (Inactivity); and
5\. shall enter \'O: silence\' state.
##### 7.2.1.3 Test description {#test-description-49 .H6}
##### 7.2.1.3.1 Pre-test conditions {#pre-test-conditions-49 .H6}
##### System Simulator: {#system-simulator-42 .H6}
\- SS-UE1 (MCVideo Client)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate, the SS is behaving as SS-UE1 as defined in TS 36.508 [24],
configured for and operating as ProSe Direct Communication transmitting and
receiving device.
\- GNSS simulator to simulate a location and provide a timing reference for
the assistance of E-UTRAN off-network testing.
NOTE 1: For operation in off-network environment, it needs be ensured that
after the UE is powered up it considers the Geographical area #1 that is
simulated by the GNSS simulator as being one of the geographical areas set in
the USIM for operation when UE is \"not served by E-UTRAN\".
\- SS-NW (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
NOTE 2: The SS operation as NW (MCVideo server) is needed only for the
preamble if the UE has to perform procedure \'MCX Authorization/Configuration
and Key Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
##### IUT: {#iut-41 .H6}
\- UE (MCVideo Client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate, the UE is behaving as a ProSe enabled UE as defined in TS 36.508
[24], configured for and operating as ProSe Direct Communication transmitting
and receiving device.
##### Preamble: {#preamble-42 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- The GNSS simulator is configured to simulate a location in the centre of
Geographical area #1 and provide a timing reference, as defined in TS 36.508
[24] Table 4.11.2-2 scenario #1.
\- The UE is switched-off.
\- UE States at the end of the preamble
\- The UE is in state \'switched-off\'.
##### 7.2.1.3.2 Test procedure sequence {#test-procedure-sequence-49 .H6}
Table 7.2.1.3.2-1: Main behaviour
+-----------+-----------+-----------+-----------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +===========+===========+===========+===========+=========+====+ | | | U - S | Message | | | +-----------+-----------+-----------+-----------+---------+----+ | 1 | Power up | - | - | - | - | | | the UE. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 2 | Trigger | - | - | - | - | | | the UE to | | | | | | | reset UTC | | | | | | | time and | | | | | | | location. | | | | | | | | | | | | | | NOTE: The | | | | | | | UTC time | | | | | | | and | | | | | | | location | | | | | | | reset may | | | | | | | be | | | | | | | performed | | | | | | | by MMI or | | | | | | | AT | | | | | | | command | | | | | | | (+CUTCR). | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 3 | Activate | - | - | - | - | | | the | | | | | | | MCVideo | | | | | | | Client | | | | | | | Ap | | | | | | | plication | | | | | | | and | | | | | | | register | | | | | | | User A as | | | | | | | the | | | | | | | MCVideo | | | | | | | User (TS | | | | | | | 36.579-5 | | | | | | | [5], | | | | | | | px_MCX_ | | | | | | | User_A_ | | | | | | | username, | | | | | | | p | | | | | | | x_MCX_U | | | | | | | ser_A_p | | | | | | | assword). | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 4 | Make the | - | - | - | - | | | MCVideo | | | | | | | User | | | | | | | request | | | | | | | the | | | | | | | esta | | | | | | | blishment | | | | | | | of an | | | | | | | MCVideo | | | | | | | private | | | | | | | call with | | | | | | | Automatic | | | | | | | Com | | | | | | | mencement | | | | | | | Mode, and | | | | | | | with | | | | | | | Tra | | | | | | | nsmission | | | | | | | Control. | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | - | E | - | - | - | - | | | XCEPTION: | | | | | | | The | | | | | | | E | | | | | | | -UTRA/EPC | | | | | | | actions | | | | | | | which are | | | | | | | related | | | | | | | to the | | | | | | | MCVideo | | | | | | | call | | | | | | | esta | | | | | | | blishment | | | | | | | are | | | | | | | described | | | | | | | in | | | | | | | TS 36.57 | | | | | | | 9-1 [2] | | | | | | | clause | | | | | | | 5.4.5 | | | | | | | \'MCX CO | | | | | | | comm | | | | | | | unication | | | | | | | over | | | | | | | ProSe | | | | | | | direct | | | | | | | o | | | | | | | ne-to-one | | | | | | | comm | | | | | | | unication | | | | | | | out of | | | | | | | E-UTRA | | | | | | | coverag | | | | | | | e-establi | | | | | | | shment\'. | | | | | | | The test | | | | | | | sequence | | | | | | | below | | | | | | | shows | | | | | | | only the | | | | | | | MCVideo | | | | | | | relevant | | | | | | | messages | | | | | | | e | | | | | | | xchanged. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | - | E | - | - | - | - | | | XCEPTION: | | | | | | | Steps 5-7 | | | | | | | are | | | | | | | repeated | | | | | | | CFP1=3 | | | | | | | times | | | | | | | (CFP1 | | | | | | | defined | | | | | | | in | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .5.8.1-1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 5 | Check: | --> | PRIVATE | 1,2 | P | | | Does the | | CALL | | | | | UE | | SETUP | | | | | (MCVideo | | REQUEST | | | | | Client) | | | | | | | send a | | | | | | | PRIVATE | | | | | | | CALL | | | | | | | SETUP | | | | | | | REQUEST | | | | | | | message? | | | | | | | | | | | | | | NOTE: It | | | | | | | is | | | | | | | expected | | | | | | | that the | | | | | | | UE | | | | | | | | | | | | | | - shall | | | | | | | i | | | | | | | nitialize | | | | | | | the | | | | | | | counter | | | | | | | CFP1 | | | | | | | (private | | | | | | | call | | | | | | | request | | | | | | | retran | | | | | | | smission) | | | | | | | with the | | | | | | | value set | | | | | | | to 1 | | | | | | | | | | | | | | on the | | | | | | | first | | | | | | | tran | | | | | | | smission, | | | | | | | and, | | | | | | | increase | | | | | | | it by 1 | | | | | | | with each | | | | | | | re-tran | | | | | | | smission. | | | | | | | | | | | | | | - shall | | | | | | | start | | | | | | | timer | | | | | | | TFP1 | | | | | | | (private | | | | | | | call | | | | | | | request | | | | | | | retran | | | | | | | smission) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 6 | Start | - | - | - | - | | | TFP1 | | | | | | | (private | | | | | | | call | | | | | | | request | | | | | | | retran | | | | | | | smission) | | | | | | | 2000 | | | | | | | mil | | | | | | | liseconds | | | | | | | as | | | | | | | defined | | | | | | | in | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .5.8.1-1. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 7 | TFP1 | - | - | - | - | | | expires. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 8 | Start | - | - | - | - | | | TFP7 | | | | | | | (waiting | | | | | | | for any | | | | | | | message | | | | | | | with same | | | | | | | call | | | | | | | id | | | | | | | entifier) | | | | | | | 6 sec | | | | | | | (value | | | | | | | chosen to | | | | | | | f | | | | | | | acilitate | | | | | | | the test | | | | | | | sequence | | | | | | | in steps | | | | | | | 14-16) | | | | | | | and | | | | | | | defined | | | | | | | in | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .5.8.1-1. | | | | | | | | | | | | | | NOTE: | | | | | | | TFP7 is | | | | | | | expected | | | | | | | to be | | | | | | | started | | | | | | | after | | | | | | | TFP1 | | | | | | | expires | | | | | | | and CFP1 | | | | | | | is equal | | | | | | | to the | | | | | | | upper | | | | | | | limit. | | | | | | | | | | | | | | NOTE: It | | | | | | | is | | | | | | | expected | | | | | | | that the | | | | | | | UE | | | | | | | considers | | | | | | | at this | | | | | | | moment of | | | | | | | time the | | | | | | | Private | | | | | | | call | | | | | | | esta | | | | | | | blishment | | | | | | | attempt | | | | | | | as | | | | | | | failed. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 9 | SS-UE1 | \ | PRIVATE | 2 | F | | | Does the | | CALL | | | | | UE | | ACCEPT | | | | | (MCVideo | | ACK | | | | | Client) | | | | | | | send a | | | | | | | PRIVATE | | | | | | | CALL | | | | | | | ACCEPT | | | | | | | ACK? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 10b1 | Check: | - | - | 2 | P | | | Does the | | | | | | | TFP7 | | | | | | | (waiting | | | | | | | for any | | | | | | | message | | | | | | | with same | | | | | | | call | | | | | | | id | | | | | | | entifier) | | | | | | | expire? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | - | E | - | - | - | - | | | XCEPTION: | | | | | | | UE | | | | | | | releases | | | | | | | the | | | | | | | E-UTRA | | | | | | | co | | | | | | | nnection. | | | | | | | The | | | | | | | E | | | | | | | -UTRA/EPC | | | | | | | actions | | | | | | | which are | | | | | | | related | | | | | | | to the | | | | | | | MCVideo | | | | | | | call | | | | | | | release | | | | | | | are | | | | | | | described | | | | | | | in | | | | | | | TS 36.57 | | | | | | | 9-1 [2] | | | | | | | clause | | | | | | | 5.4.8 | | | | | | | \'MCX | | | | | | | comm | | | | | | | unication | | | | | | | over | | | | | | | ProSe | | | | | | | direct | | | | | | | o | | | | | | | ne-to-one | | | | | | | comm | | | | | | | unication | | | | | | | out of | | | | | | | E-UTRA | | | | | | | coverage | | | | | | | - release | | | | | | | by the | | | | | | | UE\'. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 11 | Make the | - | - | - | - | | | MCVideo | | | | | | | User | | | | | | | request | | | | | | | the | | | | | | | esta | | | | | | | blishment | | | | | | | of an | | | | | | | MCVideo | | | | | | | private | | | | | | | call with | | | | | | | Automatic | | | | | | | Com | | | | | | | mencement | | | | | | | Mode, and | | | | | | | with | | | | | | | Tra | | | | | | | nsmission | | | | | | | Control. | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | - | E | - | - | - | - | | | XCEPTION: | | | | | | | The | | | | | | | E | | | | | | | -UTRA/EPC | | | | | | | actions | | | | | | | which are | | | | | | | related | | | | | | | to the | | | | | | | MCVideo | | | | | | | call | | | | | | | esta | | | | | | | blishment | | | | | | | are | | | | | | | described | | | | | | | in | | | | | | | TS 36.57 | | | | | | | 9-1 [2] | | | | | | | clause | | | | | | | 5.4.5 | | | | | | | \'MCX CO | | | | | | | comm | | | | | | | unication | | | | | | | over | | | | | | | ProSe | | | | | | | direct | | | | | | | o | | | | | | | ne-to-one | | | | | | | comm | | | | | | | unication | | | | | | | out of | | | | | | | E-UTRA | | | | | | | coverag | | | | | | | e-establi | | | | | | | shment\'. | | | | | | | The test | | | | | | | sequence | | | | | | | below | | | | | | | shows | | | | | | | only the | | | | | | | MCVideo | | | | | | | relevant | | | | | | | messages | | | | | | | e | | | | | | | xchanged. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 12 | Check: | --> | PRIVATE | 1 | P | | | Does the | | CALL | | | | | UE | | SETUP | | | | | (MCVideo | | REQUEST | | | | | Client) | | | | | | | send a | | | | | | | PRIVATE | | | | | | | CALL | | | | | | | SETUP | | | | | | | REQUEST | | | | | | | message? | | | | | | | | | | | | | | NOTE: It | | | | | | | is | | | | | | | expected | | | | | | | that the | | | | | | | UE | | | | | | | | | | | | | | - shall | | | | | | | i | | | | | | | nitialize | | | | | | | the | | | | | | | counter | | | | | | | CFP1 | | | | | | | (private | | | | | | | call | | | | | | | request | | | | | | | retran | | | | | | | smission) | | | | | | | with the | | | | | | | value set | | | | | | | to 1 | | | | | | | | | | | | | | on the | | | | | | | first | | | | | | | tran | | | | | | | smission, | | | | | | | and, | | | | | | | increase | | | | | | | it by 1 | | | | | | | with each | | | | | | | re-tran | | | | | | | smission. | | | | | | | | | | | | | | - shall | | | | | | | start | | | | | | | timer | | | | | | | TFP1 | | | | | | | (private | | | | | | | call | | | | | | | request | | | | | | | retran | | | | | | | smission) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 13 | SS-UE1 | \ | PRIVATE | 3 | P | | | Does the | | CALL | | | | | UE | | ACCEPT | | | | | (MCVideo | | ACK | | | | | Client) | | | | | | | send a | | | | | | | PRIVATE | | | | | | | CALL | | | | | | | ACCEPT | | | | | | | ACK | | | | | | | message? | | | | | | | | | | | | | | NOTE: It | | | | | | | is | | | | | | | expected | | | | | | | that the | | | | | | | UE | | | | | | | | | | | | | | - shall | | | | | | | stop | | | | | | | timer | | | | | | | TFP1 | | | | | | | (call | | | | | | | setup | | | | | | | retrans | | | | | | | mission), | | | | | | | if | | | | | | | running | | | | | | | | | | | | | | - shall | | | | | | | stop | | | | | | | timer | | | | | | | TFP2 | | | | | | | (waiting | | | | | | | for call | | | | | | | response | | | | | | | message), | | | | | | | if | | | | | | | running | | | | | | | | | | | | | | - shall | | | | | | | start | | | | | | | timer | | | | | | | TFP5 (max | | | | | | | duration) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 15 | Check: | --> | Tra | 3 | P | | | Does the | | nsmission | | | | | UE | | Granted | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | Tra | | | | | | | nsmission | | | | | | | Granted | | | | | | | message | | | | | | | towards | | | | | | | the other | | | | | | | tra | | | | | | | nsmission | | | | | | | par | | | | | | | ticipant? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 16 | Make the | - | - | - | - | | | MCVideo | | | | | | | User | | | | | | | release | | | | | | | tra | | | | | | | nsmission | | | | | | | control. | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 17 | Check: | --> | Tra | 3 | P | | | Does the | | nsmission | | | | | UE | | Ar | | | | | (MCVideo | | bitration | | | | | Client) | | Release | | | | | send a | | | | | | | Tra | | | | | | | nsmission | | | | | | | Release | | | | | | | message | | | | | | | to the | | | | | | | other | | | | | | | tra | | | | | | | nsmission | | | | | | | part | | | | | | | icipants? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 18 | Make the | - | - | - | - | | | UE | | | | | | | (MCVideo | | | | | | | Client) | | | | | | | release | | | | | | | the | | | | | | | private | | | | | | | call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 19 | Check: | --> | PRIVATE | 4 | P | | | Does the | | CALL | | | | | UE | | RELEASE | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | PRIVATE | | | | | | | CALL | | | | | | | RELEASE | | | | | | | message | | | | | | | towards | | | | | | | the other | | | | | | | tra | | | | | | | nsmission | | | | | | | par | | | | | | | ticipant? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 20 | SS-UE1 | \_/_\
_/Common/PrivateCall/FailRestrict\" leaf node present in the user profile
as specified in 3GPP TS 24.483 [4] is set to \"true\". Otherwise, shall set
the reason IE as \"E2E SECURITY CONTEXT FAILURE\";
v) shall send the PRIVATE CALL REJECT message in response to the request
message according to rules and procedures as specified in clause 10.3.1.1.1;
and
vi) shall remain in the current state;
e) if the validation of the signature was successful:
i) shall extract and decrypt the encapsulated PCK using the terminating
user\'s (KMS provisioned) UID key as described in 3GPP TS 33.180 [8];
ii) shall extract the PCK-ID, from the payload as specified in 3GPP TS 33.180
[8];
iii) shall generate and store answer SDP based on received SDP offer IE in
PRIVATE CALL SETUP REQUEST message, as defined in clause 10.3.1.1.2;
iv) shall generate a PRIVATE CALL ACCEPT message as specified in clause
17.1.7. In the PRIVATE CALL ACCEPT message, the MCVideo client:
A) shall set the Call identifier IE to the stored call identifier; and
B) shall set the MCVideo user ID of the caller IE with stored caller ID.
C) shall set the MCVideo user ID of the callee IE with stored callee ID; and
D) shall set the SDP answer IE with the stored answer SDP;
v) shall send PRIVATE CALL ACCEPT message in response to the request message
according to rules and procedures as specified in clause 10.3.1.1.1;
vi) shall establish a media session based on the SDP body of the stored answer
SDP;
vii) shall initialize the counter CFP4 with value set to 1;
viii) shall start timer TFP4 (private call accept retransmission); and
ix) shall enter the \"P5: pending\" state; and
NOTE: With the PCK successfully shared between the originating MCVideo client
and the terminating MCVideo client, both clients are able to use SRTP/SRTCP to
create an end-to-end secure session.
7) if the SDP offer does not contain an \"a=key-mgmt\" attribute, the MCVideo
client:
a) shall generate and store answer SDP based on received SDP offer IE in
PRIVATE CALL SETUP REQUEST message, as defined in clause 10.3.1.1.2;
b) shall generate a PRIVATE CALL ACCEPT message as specified in clause 17.1.7:
i) shall set the Call identifier IE to the stored call identifier;
ii) shall set the MCVideo user ID of the caller IE with stored caller ID.
iii) shall set the MCVideo user ID of the callee IE with stored callee ID; and
iv) shall set the SDP answer IE with the stored answer SDP;
c) shall send PRIVATE CALL ACCEPT message in response to the request message
according to rules and procedures as specified in clause 10.3.1.1.1;
d) shall establish a media session based on the SDP body of the stored answer
SDP;
e) shall initialize the counter CFP4 with value set to 1;
f) shall start timer TFP4 (private call accept retransmission); and
g) shall enter the \"P5: pending\" state.
[TS 24.281, clause 10.3.2.4.3.4]
When in the \"P5: pending\" state, upon receiving a PRIVATE CALL ACCEPT ACK
message or RTP media from originating user, the MCVideo client:
1) shall stop timer TFP4 (private call accept retransmission);
2) shall start transmission control as terminating MCVideo client as specified
in clause a.b in 3GPP TS 24.581 [5];
3) shall start timer TFP5 (max duration); and
4) shall enter the \"P4: part of ongoing call\" state.
[TS 24.281, clause 10.3.2.4.5.4]
When in the \"P4: part of ongoing call\" state, upon receiving a PRIVATE CALL
RELEASE message, the MCVideo client:
1) shall generate a PRIVATE CALL RELEASE ACK message as specified in clause
17.1.10;
a) shall set the Call identifier IE to the stored call identifier;
b) shall set the MCVideo user ID of the caller IE the stored caller ID; and
c) shall set the MCVideo user ID of the callee IE with the stored callee ID.
2) shall send the PRIVATE CALL RELEASE ACK message in response to the request
message according to rules and procedures as specified in clause 10.3.1.1.1;
3) shall terminate the media session for private call;
4) shall start timer TFP7 (waiting for any message with same call identifier);
and
5) shall enter the \"P1: ignoring same call id\" state.
[TS 24.281, clause 10.3.2.4.5.7]
When in the \"P1: ignoring same call id\" state, upon expiry of timer TFP7
(waiting for any message with same call identifier) the MCVideo client:
1) shall clear the stored call identifier; and
2) shall enter the \"P0: start-stop\" state.
[TS 24.581, clause 7.2.3.2.4]
When an MCVideo private call is established the terminating transmission
participant:
1\. shall create an instance of a transmission participant state transition
diagram for basic operation state machine;
2\. shall start timer T203(End of RTP media); and
3\. shall enter \'O: has no permission\' state.
[TS 24.581, clause 7.2.3.4.2]
If the transmission participant receives an indication from the MCVideo user
that the MCVideo user wants to send media, the transmission participant:
1\. shall send the Transmission Request message to other clients. The
Transmission Request message:
a. if a priority different than the default transmission priority is required,
shall include the Transmission Priority field with the requested priority in
the \ element;
b. shall include the MCVideo ID of the MCVideo user in the User ID field; and
c. if the transmission request is a broadcast group call, system call,
emergency call or an imminent peril call, shall include a Transmission
Indicator field indicating the relevant call types;
2\. shall initialise the counter C201 (Transmission request) with value set to
1;
3\. shall start timer T201 (Transmission Request); and
4\. shall enter \'O: pending request\' state.
[TS 24.581, clause 7.2.3.7.8]
Upon receiving Transmission Granted message and if the \ value in the
User ID field matches its own MCVideo ID and User ID of transmission
participant sending the Transmission Granted message matches the stored User
ID of current transmission arbitrator, the transmission participant:
1\. shall stop timer T201 (Transmission Request);
2\. clear the stored current transmission arbitrator;
3\. shall store the transmitter list of the Transmission Granted message;
4\. may provide a transmission granted notification to the MCVideo user; and
5\. shall enter \'O: has permission\' state.
[TS 24.581, clause 7.2.3.6.4]
Upon receiving an indication from the MCVideo user to release permission to
send RTP media, the transmission participant:
1\. shall stop timer T206 (Stop talking warning), if running;
2\. shall stop timer T207 (Stop talking), if running;
3\. shall send a Transmission Release message towards other transmission
participants. The Transmission Release message:
a. shall include the MCVideo ID of the MCVideo user in the User ID field; and
b. if the session is not initiated as a broadcast group call with the B-bit
set to \'1\' (Broadcast group call), shall include a Transmission Indicator
field set to \'0\' (normal call); and
4\. shall enter \'O: has no permission\' state.
##### 7.2.2.3 Test description {#test-description-50 .H6}
##### 7.2.2.3.1 Pre-test conditions {#pre-test-conditions-50 .H6}
##### System Simulator: {#system-simulator-43 .H6}
\- SS-UE1 (MCVideo Client)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate, the SS is behaving as SS-UE1 as defined in TS 36.508 [24],
configured for and operating as ProSe Direct Communication transmitting and
receiving device.
\- GNSS simulator to simulate a location and provide a timing reference for
the assistance of E-UTRAN off-network testing.
NOTE 1: For operation in off-network environment, it needs be ensured that
after the UE is powered up it considers the Geographical area #1 that is
simulated by the GNSS simulator as being one of the geographical areas set in
the USIM for operation when UE is \"not served by E-UTRAN\".
\- SS-NW (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
NOTE 2: The SS operation as NW (MCVideo server) is needed only for the
preamble if the UE has to perform procedure \'MCX Authorization/Configuration
and Key Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
##### IUT: {#iut-42 .H6}
\- UE (MCVideo Client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate, the UE is behaving as a ProSe enabled UE as defined in TS 36.508
[24], configured for and operating as ProSe Direct Communication transmitting
and receiving device.
##### Preamble: {#preamble-43 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- The GNSS simulator is configured to simulate a location in the centre of
Geographical area #1 and provide a timing reference, as defined in TS 36.508
[24] Table 4.11.2-2 scenario #1.
\- The UE is switched-off.
\- UE States at the end of the preamble
\- The UE is in state \'switched-off\'.
##### 7.2.2.3.2 Test procedure sequence {#test-procedure-sequence-50 .H6}
Table 7.2.2.3.2-1: Main behaviour
+-----------+-----------+-----------+-----------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +===========+===========+===========+===========+=========+====+ | | | U - S | Message | | | +-----------+-----------+-----------+-----------+---------+----+ | 1 | Power up | - | - | - | - | | | the UE. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 2 | Trigger | - | - | - | - | | | the UE to | | | | | | | reset UTC | | | | | | | time and | | | | | | | location. | | | | | | | | | | | | | | NOTE: The | | | | | | | UTC time | | | | | | | and | | | | | | | location | | | | | | | reset may | | | | | | | be | | | | | | | performed | | | | | | | by MMI or | | | | | | | AT | | | | | | | command | | | | | | | (+CUTCR). | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 3 | Activate | - | - | - | - | | | the | | | | | | | MCVideo | | | | | | | Client | | | | | | | Ap | | | | | | | plication | | | | | | | and | | | | | | | register | | | | | | | User A as | | | | | | | the | | | | | | | MCVideo | | | | | | | User (TS | | | | | | | 36.579-5 | | | | | | | [5], | | | | | | | px_MCX_ | | | | | | | User_A_ | | | | | | | username, | | | | | | | p | | | | | | | x_MCX_U | | | | | | | ser_A_p | | | | | | | assword). | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | - | E | - | - | - | - | | | XCEPTION: | | | | | | | The | | | | | | | E | | | | | | | -UTRA/EPC | | | | | | | actions | | | | | | | which are | | | | | | | related | | | | | | | to the | | | | | | | MCVideo | | | | | | | call | | | | | | | esta | | | | | | | blishment | | | | | | | are | | | | | | | described | | | | | | | in | | | | | | | TS 36.57 | | | | | | | 9-1 [2] | | | | | | | clause | | | | | | | 5.4.6 | | | | | | | \'MCX CT | | | | | | | comm | | | | | | | unication | | | | | | | over | | | | | | | ProSe | | | | | | | direct | | | | | | | o | | | | | | | ne-to-one | | | | | | | comm | | | | | | | unication | | | | | | | out of | | | | | | | E-UTRA | | | | | | | coverag | | | | | | | e-establi | | | | | | | shment\'. | | | | | | | The test | | | | | | | sequence | | | | | | | below | | | | | | | shows | | | | | | | only the | | | | | | | MCVideo | | | | | | | relevant | | | | | | | messages | | | | | | | e | | | | | | | xchanged. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 4 | SS-UE1 | \ | PRIVATE | 1 | P | | | Does the | | CALL | | | | | UE | | ACCEPT | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | PRIVATE | | | | | | | CALL | | | | | | | ACCEPT? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 6 | SS-UE1 | \ | Tra | 1 | P | | | Does the | | nsmission | | | | | UE | | Request | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | Tra | | | | | | | nsmission | | | | | | | Request | | | | | | | message? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 10 | SS-UE1 | \ | Tra | 1 | P | | | Does the | | nsmission | | | | | UE | | Release | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | Tra | | | | | | | nsmission | | | | | | | Release | | | | | | | message? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 14 | SS-UE1 | \ | PRIVATE | 2 | P | | | Does the | | CALL | | | | | UE | | RELEASE | | | | | (MCVideo | | ACK | | | | | Client) | | | | | | | send a | | | | | | | PRIVATE | | | | | | | CALL | | | | | | | RELEASE | | | | | | | ACK | | | | | | | message. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | - | E | - | - | - | - | | | XCEPTION: | | | | | | | SS | | | | | | | releases | | | | | | | the | | | | | | | E-UTRA | | | | | | | co | | | | | | | nnection. | | | | | | | The | | | | | | | E | | | | | | | -UTRA/EPC | | | | | | | actions | | | | | | | which are | | | | | | | related | | | | | | | to the | | | | | | | MCVideo | | | | | | | call | | | | | | | release | | | | | | | are | | | | | | | described | | | | | | | in | | | | | | | TS 36.57 | | | | | | | 9-1 [2] | | | | | | | clause | | | | | | | 5.4.7 | | | | | | | \'MCX | | | | | | | comm | | | | | | | unication | | | | | | | over | | | | | | | ProSe | | | | | | | direct | | | | | | | o | | | | | | | ne-to-one | | | | | | | comm | | | | | | | unication | | | | | | | out of | | | | | | | E-UTRA | | | | | | | coverage | | | | | | | - release | | | | | | | by the | | | | | | | SS\'. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | NOTE 1: | | | | | | | This is | | | | | | | expected | | | | | | | to be | | | | | | | done via | | | | | | | a | | | | | | | suitable | | | | | | | imple | | | | | | | mentation | | | | | | | dependent | | | | | | | MMI. | | | | | | +-----------+-----------+-----------+-----------+---------+----+
##### 7.2.2.3.3 Specific message contents {#specific-message-contents-50 .H6}
Table 7.2.2.3.3-1: PRIVATE CALL SETUP REQUEST (step 4, Table 7.2.2.3.2-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.14.8-1
* * *
Information Element Value/remark Comment Condition MCVideo user ID of the
caller px_MCVideo_ID_User_B  
MCVideo user ID of the callee px_MCVideo_ID_User_A  
SDP offer As described in TS 36.579-1 [2], Table 5.5.3.1.4-2 with condition
PRIVATE_CALL
Table 7.2.2.3.3-2: PRIVATE CALL ACCEPT (step 5, Table 7.2.2.3.2-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.14.10-1
* * *
Information Element Value/remark Comment Condition MCVideo user ID of the
caller px_MCVideo_ID_User_B  
MCVideo user ID of the callee px_MCVideo_ID_User_A  
SDP answer As described in TS 36.579-1 [2], Table 5.5.3.1.3-2 with condition
PRIVATE_CALL
Table 7.2.2.3.3-3: PRIVATE CALL ACCEPT ACK (step 6, Table 7.2.2.3.2-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.14.14-1
* * *
Information Element Value/remark Comment Condition MCVideo user ID of the
caller px_MCVideo_ID_User_B  
MCVideo user ID of the callee px_MCVideo_ID_User_A
Table 7.2.2.3.3-4: Transmission Granted (step 7, Table 7.2.2.3.2-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.1-1, condition OFF-NETWORK
* * *
Information Element Value/remark Comment Condition **User ID**  
User ID px_MCVideo_ID_User_B
Table 7.2.2.3.3-5: Transmission Request (step 9, Table 7.2.2.3.2-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.1.1-1, condition OFF-NETWORK
* * *
Table 7.2.2.3.3-6: Transmission Granted (step 10, Table 7.2.2.3.2-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.1-1, condition OFF-NETWORK
* * *
Table 7.2.2.3.3-7: PRIVATE CALL RELEASE (step 4, Table 7.2.2.3.2-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.14.12-1
* * *
Information Element Value/remark Comment Condition MCVideo user ID of the
caller px_MCVideo_ID_User_B  
MCVideo user ID of the callee px_MCVideo_ID_User_A
Table 7.2.2.3.3-8: PRIVATE CALL RELEASE ACK (step 4, Table 7.2.2.3.2-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.14.13-1
* * *
Information Element Value/remark Comment Condition MCVideo user ID of the
caller px_MCVideo_ID_User_B  
MCVideo user ID of the callee px_MCVideo_ID_User_A
### 7.2.3 Off-network / Private Call / Manual Commencement Mode / Call
Released before establishment completion / Call request rejected / Call
establishment successful / Client Originated (CO)
##### 7.2.3.1 Test Purpose (TP) {#test-purpose-tp-51 .H6}
##### (1) {#section-197 .H6}
**with** { UE (MCVideo Client) registered and authorized for MCVideo Service,
including authorized to initiate/cancel private calls with manual
commencement, and, the UE is in an off-network environment }
**ensure that** {
**when** { the MCVideo User requests the establishment of an MCVideo private
call with Manual Commencement Mode }
**then** { UE (MCVideo Client) sends a PRIVATE CALL SETUP REQUEST message
requesting the establishment of an MCVideo private call with Manual
Commencement Mode }
}
##### (2) {#section-198 .H6}
**with** { UE (MCVideo Client) registered and authorized for MCVideo Service,
including authorized to initiate/cancel private calls with manual
commencement, and, the UE is in an off-network environment, and, UE (MCVideo
Client) having sent a PRIVATE CALL SETUP REQUEST message requesting
establishment of an MCVideo private call with Manual Commencement Mode }
**ensure that** {
**when** { the User requests termination of the call after a PRIVATE CALL
RINGING message has been received but before the completion of the call
establishment }
**then** { UE (MCVideo Client) sends a PRIVATE CALL RELEASE message and
terminates the call establishment }
}
##### (3) {#section-199 .H6}
**with** { UE (MCVideo Client) registered and authorized for MCVideo Service,
including authorized to initiate/cancel private calls with manual
commencement, and, the UE is in an off-network environment, and, UE (MCVideo
Client) having sent a PRIVATE CALL SETUP REQUEST message requesting
establishment of an MCVideo private call with Manual Commencement Mode }
**ensure that** {
**when** { the UE (MCVideo Client) receives a PRIVATE CALL REJECT message
after a PRIVATE CALL RINGING message has been received but before the
completion of the call establishment }
**then** { UE (MCVideo Client) terminates the call establishment }
}
##### (4) {#section-200 .H6}
**with** { UE (MCVideo Client) registered and authorized for MCVideo Service,
including authorized to initiate/cancel private calls with manual
commencement, and, the UE is in an off-network environment, and, UE (MCVideo
Client) having sent a PRIVATE CALL SETUP REQUEST message requesting
establishment of an MCVideo private call with Manual Commencement Mode }
**ensure that** {
**when** { the UE (MCVideo Client) receives a PRIVATE CALL RINGING message
followed by a PRIVATE CALL ACCEPT message }
**then** { UE (MCVideo Client) transmits a PRIVATE CALL ACCEPT ACK message
**and** considers the call as being established }
}
##### 7.2.3.2 Conformance requirements {#conformance-requirements-51 .H6}
References: The conformance requirements covered in the present TC are
specified in: TS 24.281 clauses 10.3.2.4.2.1, 10.3.2.4.2.3, 10.3.2.4.2.9,
10.3.2.4.5.5, 10.3.2.4.2.7, 10.3.2.4.2.8, 10.3.2.4.5.1, TS 24.581 clauses
7.2.3.2.2, 7.2.3.5.5. Unless otherwise stated these are Rel-15 requirements.
[TS 24.281, clause 10.3.2.4.2.1]
When in the \"P0: start-stop\" state or \"P1: ignoring same call id\", upon an
indication from MCVideo User to initiate a private call and the value of
\"/\/\/Common/PrivateCall/Authorised\" leaf node present in the user
profile as specified in 3GPP TS 24.483 [4] is set to \"true\", the MCVideo
client:
1) shall generate and store the call identifier as a random number uniformly
distributed between (0, 65536);
2) shall store own MCVideo user ID as caller ID;
3) shall store MCVideo user ID of the callee as callee ID;
4) shall store \"AUTOMATIC COMMENCEMENT MODE\" as commencement mode, if
requested and the value of \"/\/\/Common/PrivateCall/AutoCommence\" leaf
node present in the user profile as specified in 3GPP TS 24.483 [4] is set to
\"true\". Otherwise if the value of
\"/\/\/Common/PrivateCall/ManualCommence\" leaf node present in the user
profile as specified in 3GPP TS 24.483 [4] is set to \"true\", store \"MANUAL
COMMENCEMENT MODE\" as commencement mode;
5) shall store \"PRIVATE CALL\" as the current call type;;
6) if an end-to-end security context needs to be established then:
a) shall use keying material provided by the key management server to generate
a PCK as described in 3GPP TS 33.180 [8];
b) shall use the PCK to generate a PCK-ID with the four most significant bits
set to \"0001\" to indicate that the purpose of the PCK is to protect private
call communications and with the remaining twenty eight bits being randomly
generated as described in 3GPP TS 33.180 [8];
c) shall encrypt the PCK to a UID associated to the MCVideo client using the
MCVideo ID of the invited user and a time related parameter as described in
3GPP TS 33.180 [8];
d) shall generate a MIKEY-SAKKE I_MESSAGE using the encapsulated PCK and PCK-
ID as specified in 3GPP TS 33.180 [8];
e) shall add the MCVideo ID of the originating MCVideo to the initiator field
(IDRi) of the I_MESSAGE as described in 3GPP TS 33.180 [8];
f) shall sign the MIKEY-SAKKE I_MESSAGE using the originating MCVideo user\'s
signing key provided in the keying material together with a time related
parameter, and add this to the MIKEY-SAKKE payload, as described in 3GPP TS
33.180 [8] and;
g) shall store the MIKEY-SAKKE I_MESSAGE for later inclusion in an SDP body;
7) may store current user location as user location;
8) shall set the stored current ProSe per-packet priority to value
corresponding to MCVideo off-network private call as described in 3GPP TS
24.483 [4].
9) shall generate and store offer SDP, as defined in clause 10.3.1.1.2;
10) shall generate a PRIVATE CALL SETUP REQUEST message as specified in clause
17.1.5. In the PRIVATE CALL SETUP REQUEST message, the MCVideo client:
a) shall set the Call identifier IE with the stored call identifier;
b) shall set the MCVideo user ID of the caller IE with the stored caller ID;
c) shall set the MCVideo user ID of the callee IE with the stored callee ID;
d) shall set the Commencement mode IE with the stored commencement mode;
e) shall set the Call type IE with the stored current call type;
f) shall set the SDP offer IE with the stored offer SDP; and
g) may set the User location IE with the stored user location.
11) shall send the PRIVATE CALL SETUP REQUEST message towards other MCVideo
client according to rules and procedures as specified in clause 10.3.1.1.1;
12) shall initialize the counter CFP1 (private call request retransmission)
with the value set to 1;
13) shall start timer TFP1 (private call request retransmission); and
14) shall enter the \"P2: waiting for call response\" state.
[TS 24.281, clause 10.3.2.4.2.3]
When in the \"P2: waiting for call response\" state, upon receiving a PRIVATE
CALL RINGING message, the MCVideo client:
1) shall remain in the \"P2: waiting for call response\" state.
[TS 24.281, clause 10.3.2.4.2.9]
When in the \"P2: waiting for call response\" state, upon an indication from
MCVideo User to cancel the private call request, the MCVideo client:
1) shall generate a PRIVATE CALL RELEASE message as specified in clause
17.1.9;
a) shall set the Call identifier IE to the stored call identifier;
b) shall set the MCVideo user ID of the caller IE with the stored caller ID;
and
c) shall set the MCVideo user ID of the callee IE with the stored callee ID;
2) shall send the PRIVATE CALL RELEASE message in response to the request
message according to rules and procedures as specified in clause 10.3.1.1.1;
3) shall start timer TFP3 (private call release retransmission); and
4) shall enter the \"P3: waiting for release response\" state.
[TS 24.281, clause 10.3.2.4.5.5]
When in the \"P3: waiting for release response\" state, upon receiving a
PRIVATE CALL RELEASE ACK to PRIVATE CALL RELEASE message, the MCVideo client:
1) shall stop timer TFP3 (private call release retransmission), if running;
2) shall terminate the media session;
3) shall start timer TFP7 (waiting for any message with same call identifier);
and
4) shall enter the \"P1: ignoring same call id\" state.
[TS 24.281, clause 10.3.2.4.2.7]
When in the \"P2: waiting for call response\" state, upon receiving a PRIVATE
CALL REJECT message in response to PRIVATE CALL SETUP REQUEST message with
Call identifier IE same as the stored call identifier, the MCVideo client:
1) shall stop timer TFP1 (call setup retransmission), if running;
2) shall stop timer TFP2 (waiting for call response message), if running;
3) shall start timer TFP7 (waiting for any message with same call identifier);
4) shall release the call control state machine; and
5) shall enter the \"P1: ignoring same call id\" state.
[TS 24.281, clause 10.3.2.4.2.8]
When in the \"P2: waiting for call response\" state, upon receiving a PRIVATE
CALL ACCEPT message response to PRIVATE CALL SETUP REQUEST message with the
same call identifier, the MCVideo client:
1) shall store the SDP answer IE received in the PRIVATE CALL ACCEPT message
as answer SDP;
2) shall generate a PRIVATE CALL ACCEPT ACK message as specified in clause
17.1.11:
a) shall set the Call identifier IE to the stored call identifier;
b) shall set the MCVideo user ID of the caller IE with the stored caller ID;
and
c) shall set the MCVideo user ID of the callee IE with the stored callee ID.
3) shall send the PRIVATE CALL ACCEPT ACK message in response to the request
message according to rules and procedures as specified in clause 10.3.1.1.1;
4) shall stop timer TFP1 (call setup retransmission), if running;
5) shall stop timer TFP2 (waiting for call response message), if running;
6) shall establish a media session based on the SDP body of the stored answer
SDP;
7) shall start transmission control as terminating transmission participant as
specified in clause a.b in 3GPP TS 24.581 [5];
8) shall start timer TFP5 (max duration); and
9) shall enter the \"P4: part of ongoing call\" state.
[TS 24.281, clause 10.3.2.4.5.1]
When in the \"P4: part of ongoing call\" state, upon an indication from
MCVideo User to release a private call, the MCVideo client:
1) shall generate a PRIVATE CALL RELEASE message as specified in clause
17.1.9. In the PRIVATE CALL RELEASE message, the MCVideo client:
a) shall set the Call identifier IE to the stored call identifier;
b) shall set the MCVideo user ID of the caller IE with stored caller ID; and
c) shall set the MCVideo user ID of the callee IE with stored callee ID.
2) shall send the PRIVATE CALL RELEASE message in response to the request
message according to rules and procedures as specified in clause 10.3.1.1.1;
3) shall initialize the counter CFP3 (private call release retransmission)
with the value set to 1;
4) shall start timer TFP3 (private call release retransmission); and
5) shall enter the \"P3: waiting for release response\" state.
[TS 24.581, clause 7.2.3.2.2]
When an MCVideo call is established with session announcement including an
explicit transmission request, the originating transmission participant:
1\. shall create an instance of a transmission participant state transition
diagram for basic operation state machine;
2\. shall send Transmission Granted message towards other transmission
participants. The Transmission Granted message:
a. shall include the granted priority in the Transmission priority field;
b. shall include the MCVideo user\'s own MCVideo ID in the User ID field; and
c. if the transmission request is a broadcast group call, system call,
emergency call or an imminent peril call, shall include a Transmission
Indicator field indicating the relevant call types; and
3\. shall enter \'O: transmission arbitration\' state.
[TS 24.581, clause 7.2.3.5.5]
Upon receiving an indication from the MCVideo user to release permission to
send RTP media and there is no transmitter in transmitter list, the
transmission participant:
1\. shall stop timer T206 (Stop talking warning), if running;
2\. shall stop timer T207 (Stop talking), if running;
3\. shall send a Transmission Arbitration Release message towards other
transmission participants. The Transmission Arbitration Release message:
a. shall include the MCVideo ID of the MCVideo user in the User ID field; and
b. if the session is not initiated as a broadcast group call with the B-bit
set to \'1\' (Broadcast group call), shall include a Transmission Indicator
field set to \'0\' (normal call);
4\. shall start timer T230 (Inactivity); and
5\. shall enter \'O: silence\' state.
##### 7.2.3.3 Test description {#test-description-51 .H6}
##### 7.2.3.3.1 Pre-test conditions {#pre-test-conditions-51 .H6}
##### System Simulator: {#system-simulator-44 .H6}
\- SS-UE1 (MCVideo client)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate, the SS is behaving as SS-UE1 as defined in TS 36.508 [24],
configured for and operating as ProSe Direct Communication transmitting and
receiving device.
\- GNSS simulator to simulate a location and provide a timing reference for
the assistance of E-UTRAN off-network testing.
NOTE 1: For operation in off-network environment, it needs be ensured that
after the UE is powered up it considers the Geographical area #1 that is
simulated by the GNSS simulator as being one of the geographical areas set in
the USIM for operation when UE is \"not served by E-UTRAN\".
\- SS-NW (MCVideo server) in the Preamble
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
NOTE 2: The SS operation as NW (MCVideo server) is needed only for the
preamble if the UE has to perform procedure \'MCX Authorization/Configuration
and Key Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
##### IUT: {#iut-43 .H6}
\- UE (MCVideo Client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate, the UE is behaving as a ProSe enabled UE as defined in TS 36.508
[24], configured for and operating as ProSe Direct Communication transmitting
and receiving device.
##### Preamble: {#preamble-44 .H6}
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- The GNSS simulator is configured to simulate a location in the centre of
Geographical area #1 and provide a timing reference, as defined in TS 36.508
[24] Table 4.11.2-2 scenario #1.
\- The UE is Switched OFF (state 1) according to TS 36.508 [24].
##### 7.2.3.3.2 Test procedure sequence {#test-procedure-sequence-51 .H6}
Table 7.2.3.3.2-1: Main behaviour
+-----------+-----------+-----------+-----------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +===========+===========+===========+===========+=========+====+ | | | U - S | Message | | | +-----------+-----------+-----------+-----------+---------+----+ | 1 | Power up | - | - | - | - | | | the UE. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 1A | Trigger | - | - | - | - | | | the UE to | | | | | | | reset UTC | | | | | | | time and | | | | | | | location. | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 2 | Activate | - | - | - | - | | | the | | | | | | | MCVideo | | | | | | | Client | | | | | | | Ap | | | | | | | plication | | | | | | | and | | | | | | | register | | | | | | | User A as | | | | | | | the | | | | | | | MCVideo | | | | | | | User (TS | | | | | | | 36.579-5 | | | | | | | [5], | | | | | | | px_MCX_ | | | | | | | User_A_ | | | | | | | username, | | | | | | | p | | | | | | | x_MCX_U | | | | | | | ser_A_p | | | | | | | assword). | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 3 | Make the | - | - | - | - | | | MCVideo | | | | | | | User | | | | | | | request | | | | | | | the | | | | | | | esta | | | | | | | blishment | | | | | | | of an | | | | | | | MCVideo | | | | | | | private | | | | | | | call with | | | | | | | Manual | | | | | | | Com | | | | | | | mencement | | | | | | | Mode, | | | | | | | with | | | | | | | Tra | | | | | | | nsmission | | | | | | | Control. | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | - | E | - | - | - | - | | | XCEPTION: | | | | | | | The | | | | | | | E | | | | | | | -UTRA/EPC | | | | | | | actions | | | | | | | which are | | | | | | | related | | | | | | | to the | | | | | | | MCVideo | | | | | | | call | | | | | | | esta | | | | | | | blishment | | | | | | | are | | | | | | | described | | | | | | | in | | | | | | | TS 36.57 | | | | | | | 9-1 [2] | | | | | | | clause | | | | | | | 5.4.5 | | | | | | | \'MCX CO | | | | | | | comm | | | | | | | unication | | | | | | | over | | | | | | | ProSe | | | | | | | direct | | | | | | | o | | | | | | | ne-to-one | | | | | | | comm | | | | | | | unication | | | | | | | out of | | | | | | | E-UTRA | | | | | | | coverag | | | | | | | e-establi | | | | | | | shment\'. | | | | | | | The test | | | | | | | sequence | | | | | | | below | | | | | | | shows | | | | | | | only the | | | | | | | MCVideo | | | | | | | relevant | | | | | | | messages | | | | | | | e | | | | | | | xchanged. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 4 | Check: | --> | PRIVATE | 1 | P | | | Does the | | CALL | | | | | UE | | SETUP | | | | | (MCVideo | | REQUEST | | | | | Client) | | | | | | | send a | | | | | | | PRIVATE | | | | | | | CALL | | | | | | | SETUP | | | | | | | REQUEST, | | | | | | | Com | | | | | | | mencement | | | | | | | mode set | | | | | | | to MANUAL | | | | | | | COM | | | | | | | MENCEMENT | | | | | | | MODE? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 5 | SS-UE1 | \ | PRIVATE | 2 | P | | | Does the | | CALL | | | | | UE | | RELEASE | | | | | (MCVideo | | | | | | | Client) | | | | | | | send | | | | | | | PRIVATE | | | | | | | CALL | | | | | | | RELEASE | | | | | | | message? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 8 | SS-UE1 | \ | PRIVATE | 1 | P | | | Does the | | CALL | | | | | UE | | SETUP | | | | | (MCVideo | | REQUEST | | | | | Client) | | | | | | | send a | | | | | | | PRIVATE | | | | | | | CALL | | | | | | | SETUP | | | | | | | REQUEST, | | | | | | | Com | | | | | | | mencement | | | | | | | mode set | | | | | | | to MANUAL | | | | | | | COM | | | | | | | MENCEMENT | | | | | | | MODE? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 12 | SS-UE1 | \ | PRIVATE | 3 | F | | | Does the | | CALL | | | | | UE | | ACCEPT | | | | | (MCVideo | | ACK | | | | | Client) | | | | | | | send a | | | | | | | PRIVATE | | | | | | | CALL | | | | | | | ACCEPT | | | | | | | ACK in | | | | | | | the next | | | | | | | 1 sec? | | | | | | | | | | | | | | NOTE: It | | | | | | | is | | | | | | | expected | | | | | | | that upon | | | | | | | receipt | | | | | | | of the | | | | | | | message | | | | | | | sent in | | | | | | | step 13 | | | | | | | the UE | | | | | | | has | | | | | | | entered | | | | | | | the \"P1: | | | | | | | ignoring | | | | | | | same call | | | | | | | id\" | | | | | | | state and | | | | | | | therefore | | | | | | | it shall | | | | | | | ignore | | | | | | | the | | | | | | | message | | | | | | | sent in | | | | | | | step 14. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | - | E | - | - | - | - | | | XCEPTION: | | | | | | | UE | | | | | | | releases | | | | | | | the | | | | | | | E-UTRA | | | | | | | co | | | | | | | nnection. | | | | | | | The | | | | | | | E | | | | | | | -UTRA/EPC | | | | | | | actions | | | | | | | which are | | | | | | | related | | | | | | | to the | | | | | | | MCVideo | | | | | | | call | | | | | | | release | | | | | | | are | | | | | | | described | | | | | | | in | | | | | | | TS 36.57 | | | | | | | 9-1 [2] | | | | | | | clause | | | | | | | 5.4.8 | | | | | | | \'MCX CO | | | | | | | comm | | | | | | | unication | | | | | | | over | | | | | | | ProSe | | | | | | | direct | | | | | | | o | | | | | | | ne-to-one | | | | | | | comm | | | | | | | unication | | | | | | | out of | | | | | | | E-UTRA | | | | | | | coverag | | | | | | | e-release | | | | | | | by the | | | | | | | UE\'. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 16 | Wait for | - | - | - | - | | | 5 sec to | | | | | | | ensure | | | | | | | the UE is | | | | | | | in stable | | | | | | | state - | | | | | | | scanning | | | | | | | for | | | | | | | incoming | | | | | | | ProSe | | | | | | | messages. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 17 | Make the | - | - | - | - | | | MCVideo | | | | | | | User | | | | | | | request | | | | | | | the | | | | | | | esta | | | | | | | blishment | | | | | | | of an | | | | | | | MCVideo | | | | | | | private | | | | | | | call with | | | | | | | Manual | | | | | | | Com | | | | | | | mencement | | | | | | | Mode, | | | | | | | with | | | | | | | Tra | | | | | | | nsmission | | | | | | | Control. | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | - | E | - | - | - | - | | | XCEPTION: | | | | | | | The | | | | | | | E | | | | | | | -UTRA/EPC | | | | | | | actions | | | | | | | which are | | | | | | | related | | | | | | | to the | | | | | | | MCVideo | | | | | | | call | | | | | | | esta | | | | | | | blishment | | | | | | | are | | | | | | | described | | | | | | | in | | | | | | | TS 36.57 | | | | | | | 9-1 [2] | | | | | | | clause | | | | | | | 5.4.5 | | | | | | | \'MCX CO | | | | | | | comm | | | | | | | unication | | | | | | | over | | | | | | | ProSe | | | | | | | direct | | | | | | | o | | | | | | | ne-to-one | | | | | | | comm | | | | | | | unication | | | | | | | out of | | | | | | | E-UTRA | | | | | | | coverag | | | | | | | e-establi | | | | | | | shment\'. | | | | | | | The test | | | | | | | sequence | | | | | | | below | | | | | | | shows | | | | | | | only the | | | | | | | MCVideo | | | | | | | relevant | | | | | | | messages | | | | | | | e | | | | | | | xchanged. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 18 | Check: | --> | PRIVATE | 1 | P | | | Does the | | CALL | | | | | UE | | SETUP | | | | | (MCVideo | | REQUEST | | | | | Client) | | | | | | | send a | | | | | | | PRIVATE | | | | | | | CALL | | | | | | | SETUP | | | | | | | REQUEST, | | | | | | | Com | | | | | | | mencement | | | | | | | mode set | | | | | | | to MANUAL | | | | | | | COM | | | | | | | MENCEMENT | | | | | | | MODE? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 19 | SS-UE1 | \ | PRIVATE | 4 | P | | | Does the | | CALL | | | | | UE | | ACCEPT | | | | | (MCVideo | | ACK | | | | | Client) | | | | | | | send a | | | | | | | PRIVATE | | | | | | | CALL | | | | | | | ACCEPT | | | | | | | ACK? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 22 | Make the | - | - | - | - | | | MCVideo | | | | | | | User | | | | | | | press the | | | | | | | PTT | | | | | | | button | | | | | | | r | | | | | | | equesting | | | | | | | p | | | | | | | ermission | | | | | | | to talk. | | | | | | | | | | | | | | NOTE 1: | | | | | | | Depending | | | | | | | on UE | | | | | | | imple | | | | | | | mentation | | | | | | | the PTT | | | | | | | button | | | | | | | may | | | | | | | already | | | | | | | been | | | | | | | pressed | | | | | | | in step | | | | | | | 17. | | | | | | | | | | | | | | NOTE 2: | | | | | | | The | | | | | | | MCVideo | | | | | | | User | | | | | | | shall | | | | | | | keep the | | | | | | | button | | | | | | | pressed | | | | | | | until | | | | | | | otherwise | | | | | | | written. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 23 | Does the | --> | Tra | 4 | P | | | UE | | nsmission | | | | | (MCVideo | | Granted | | | | | Client) | | | | | | | send a | | | | | | | Tra | | | | | | | nsmission | | | | | | | Granted | | | | | | | message? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 24 | Make the | - | - | - | - | | | MCVideo | | | | | | | User | | | | | | | release | | | | | | | the | | | | | | | tra | | | | | | | nsmission | | | | | | | control. | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 25 | Check: | --> | Tra | 4 | P | | | Does the | | nsmission | | | | | UE | | Ar | | | | | (MCVideo | | bitration | | | | | Client) | | Release | | | | | sends a | | | | | | | Tra | | | | | | | nsmission | | | | | | | Ar | | | | | | | bitration | | | | | | | Release | | | | | | | message? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 26 | Make the | - | - | - | - | | | MCVideo | | | | | | | User | | | | | | | request | | | | | | | te | | | | | | | rmination | | | | | | | of the | | | | | | | MCVideo | | | | | | | private | | | | | | | call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 27 | The UE | --> | PRIVATE | - | - | | | (MCVideo | | CALL | | | | | Client) | | RELEASE | | | | | send | | | | | | | PRIVATE | | | | | | | CALL | | | | | | | RELEASE | | | | | | | message. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 28 | SS-UE1 | \_/_\
_/Common/PrivateCall/FailRestrict\" leaf node present in the user profile
as specified in 3GPP TS 24.483 [4] is set to \"true\". Otherwise, shall set
the Reason IE as \"REJECT\";
2) shall send the PRIVATE CALL REJECT message in response to the request
message according to rules and procedures as specified in clause 10.3.1.1.1;
3) shall start timer TFP7 (waiting for any message with same call identifier);
and
4) shall enter the \"P1: ignoring same call id\" state.
[TS 24.281, clause 10.3.2.4.5.7]
When in the \"P1: ignoring same call id\" state, upon expiry of timer TFP7
(waiting for any message with same call identifier) the MCVideo client:
1) shall clear the stored call identifier; and
2) shall enter the \"P0: start-stop\" state.
[TS 24.281, clause 10.3.2.4.4.3]
When in the \"P5: pending\" state, upon an indication from MCVideo User to
accept the incoming private call, the MCVideo client:
1) if the SDP offer contains an \"a=key-mgmt\" attribute field with a
\"mikey\" attribute value containing a MIKEY-SAKKE I_MESSAGE:
a) shall extract the MCVideo ID of the originating MCVideo user from the
initiator field (IDRi) of the I_MESSAGE as described in 3GPP TS 33.180 [8];
b) shall convert the MCVideo ID to a UID as described in 3GPP TS 33.180 [8];
c) shall use the UID to validate the signature of the MIKEY-SAKKE I_MESSAGE as
described in 3GPP TS 33.180 [8];
d) if the validation of the signature failed, shall generate a PRIVATE CALL
REJECT message as specified in clause 17.1.8. In the PRIVATE CALL REJECT
message, the MCVideo client:
i) shall set the call identifier IE to the stored call identifier;
ii) shall set the MCVideo user ID of the caller IE with the stored caller ID;
iii) shall set the MCVideo user ID of the callee IE with the stored callee ID;
iv) shall set the Reason IE as \"FAILED\", if requested to restrict
notification of call failure and the value of \"/_\ _/_\
_/Common/PrivateCall/FailRestrict\" leaf node present in the user profile
as specified in 3GPP TS 24.483 [4] is set to \"true\". Otherwise, shall set
the reason IE as \"E2E SECURITY CONTEXT FAILURE\";
v) shall send the PRIVATE CALL REJECT message in response to the request
message according to rules and procedures as specified in clause 10.3.1.1.1;
and
vi) shall enter the \"P1: ignoring same call id\" state;
e) if the validation of the signature was successful:
i) shall extract and decrypt the encapsulated PCK using the terminating
user\'s (KMS provisioned) UID key as described in 3GPP TS 33.180 [8];
ii) shall extract the PCK-ID, from the payload as specified in 3GPP TS 33.180
[8];
iii) shall generate and store answer SDP based on received SDP offer IE in
PRIVATE CALL SETUP REQUEST message, as defined in clause 10.3.1.1.2;
iv) shall generate a PRIVATE CALL ACCEPT message as specified in clause
17.1.7. In the PRIVATE CALL ACCEPT message, the MCVideo client:
A) shall set the Call identifier IE to the stored call identifier;
B) shall set the MCVideo user ID of the caller IE with the stored caller ID;
C) shall set the MCVideo user ID of the callee IE with the stored callee ID;
and
D) shall set the SDP answer IE with the stored answer SDP;
v) shall send the PRIVATE CALL ACCEPT message in response to the request
message according to rules and procedures as specified in clause 10.3.1.1.1;
vi) shall establish a media session based on the SDP body of the private call;
vii) shall stop timer TFP2 (waiting for call response message);
viii) shall initialize the counter CFP4 with value set to 1;
ix) shall start timer TFP4 (private call accept retransmission); and
x) shall remain in the \"P5: pending\" state; and
NOTE: With the PCK successfully shared between the originating MCVideo client
and the terminating MCVideo client, both clients are able to use SRTP/SRTCP to
create an end-to-end secure session.
2) if the SDP offer does not contain an \"a=key-mgmt\" attribute, the MCVideo
client:
a) shall generate and store answer SDP based on received SDP offer IE in
PRIVATE CALL SETUP REQUEST message, as defined in clause 10.3.1.1.2;
b) shall generate a PRIVATE CALL ACCEPT message as specified in clause 17.1.7.
In the PRIVATE CALL ACCEPT message, the MCVideo client:
i) shall set the Call identifier IE to the stored call identifier;
ii) shall set the MCVideo user ID of the caller IE with the stored caller ID;
iii) shall set the MCVideo user ID of the callee IE with the stored callee ID;
and
iv) shall set the SDP answer IE with the stored answer SDP;
c) shall send the PRIVATE CALL ACCEPT message in response to the request
message according to rules and procedures as specified in clause 10.3.1.1.1;
d) shall establish a media session based on the SDP body of the private call;
e) shall stop timer TFP2 (waiting for call response message);
f) shall initialize the counter CFP4 with value set to 1;
g) shall start timer TFP4 (private call accept retransmission); and
h) shall remain in the \"P5: pending\" state.
[TS 24.281, clause 10.3.2.4.4.5]
When in the \"P5: pending\" state, upon receiving a PRIVATE CALL ACCEPT ACK
message or RTP media from originating user, the MCVideo client:
1) shall stop timer TFP4 (private call accept retransmission);
2) shall start transmission control as terminating MCVideo client as specified
in clause a.b in 3GPP TS 24.581 [5];
3) shall start timer TFP5 (max duration); and
4) shall enter the \"P4: part of ongoing call\" state.
[TS 24.281, clause 10.3.2.4.5.4]
When in the \"P4: part of ongoing call\" state, upon receiving a PRIVATE CALL
RELEASE message, the MCVideo client:
1) shall generate a PRIVATE CALL RELEASE ACK message as specified in clause
17.1.10;
a) shall set the Call identifier IE to the stored call identifier;
b) shall set the MCVideo user ID of the caller IE the stored caller ID; and
c) shall set the MCVideo user ID of the callee IE with the stored callee ID.
2) shall send the PRIVATE CALL RELEASE ACK message in response to the request
message according to rules and procedures as specified in clause 10.3.1.1.1;
3) shall terminate the media session for private call;
4) shall start timer TFP7 (waiting for any message with same call identifier);
and
5) shall enter the \"P1: ignoring same call id\" state.
[TS 24.581, clause 7.2.3.2.4]
When an MCVideo private call is established the terminating transmission
participant:
1\. shall create an instance of a transmission participant state transition
diagram for basic operation state machine;
2\. shall start timer T203(End of RTP media); and
3\. shall enter \'O: has no permission\' state.
[TS 24.581, clause 7.2.3.4.2]
If the transmission participant receives an indication from the MCVideo user
that the MCVideo user wants to send media, the transmission participant:
1\. shall send the Transmission Request message to other clients. The
Transmission Request message:
a. if a priority different than the default transmission priority is required,
shall include the Transmission Priority field with the requested priority in
the \ element;
b. shall include the MCVideo ID of the MCVideo user in the User ID field; and
c. if the transmission request is a broadcast group call, system call,
emergency call or an imminent peril call, shall include a Transmission
Indicator field indicating the relevant call types;
2\. shall initialise the counter C201 (Transmission request) with value set to
1;
3\. shall start timer T201 (Transmission Request); and
4\. shall enter \'O: pending request\' state.
[TS 24.581, clause 7.2.3.7.8]
Upon receiving Transmission Granted message and if the \ value in the
User ID field matches its own MCVideo ID and User ID of transmission
participant sending the Transmission Granted message matches the stored User
ID of current transmission arbitrator, the transmission participant:
1\. shall stop timer T201 (Transmission Request);
2\. clear the stored current transmission arbitrator;
3\. shall store the transmitter list of the Transmission Granted message;
4\. may provide a transmission granted notification to the MCVideo user; and
5\. shall enter \'O: has permission\' state.
[TS 24.581, clause 7.2.3.6.4]
Upon receiving an indication from the MCVideo user to release permission to
send RTP media, the transmission participant:
1\. shall stop timer T206 (Stop talking warning), if running;
2\. shall stop timer T207 (Stop talking), if running;
3\. shall send a Transmission Release message towards other transmission
participants. The Transmission Release message:
a. shall include the MCVideo ID of the MCVideo user in the User ID field; and
b. if the session is not initiated as a broadcast group call with the B-bit
set to \'1\' (Broadcast group call), shall include a Transmission Indicator
field set to \'0\' (normal call); and
4\. shall enter \'O: has no permission\' state.
##### 7.2.4.3 Test description {#test-description-52 .H6}
##### 7.2.4.3.1 Pre-test conditions {#pre-test-conditions-52 .H6}
##### System Simulator: {#system-simulator-45 .H6}
\- SS-UE1 (MCVideo Client)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate, the SS is behaving as SS-UE1 as defined in TS 36.508 [24],
configured for and operating as ProSe Direct Communication transmitting and
receiving device.
\- GNSS simulator to simulate a location and provide a timing reference for
the assistance of E-UTRAN off-network testing.
NOTE 1: For operation in off-network environment, it needs be ensured that
after the UE is powered up it considers the Geographical area #1 that is
simulated by the GNSS simulator as being one of the geographical areas set in
the USIM for operation when UE is \"not served by E-UTRAN\".
\- SS-NW (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
NOTE 2: The SS operation as NW (MCVideo server) is needed only for the
preamble if the UE has to perform procedure \'MCX Authorization/Configuration
and Key Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
##### IUT: {#iut-44 .H6}
\- UE (MCVideo Client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate, the UE is behaving as a ProSe enabled UE as defined in TS 36.508
[24], configured for and operating as ProSe Direct Communication transmitting
and receiving device.
##### Preamble: {#preamble-45 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- The GNSS simulator is configured to simulate a location in the centre of
Geographical area #1 and provide a timing reference, as defined in TS 36.508
[24] Table 4.11.2-2 scenario #1.
\- The UE is switched-off.
\- UE States at the end of the preamble
\- The UE is in state \'switched-off\'.
##### 7.2.4.3.2 Test procedure sequence {#test-procedure-sequence-52 .H6}
Table 7.2.4.3.2-1: Main behaviour
+-----------+-----------+-----------+-----------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +===========+===========+===========+===========+=========+====+ | | | U - S | Message | | | +-----------+-----------+-----------+-----------+---------+----+ | 1 | Power up | - | - | - | - | | | the UE. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 2 | Trigger | - | - | - | - | | | the UE to | | | | | | | reset UTC | | | | | | | time and | | | | | | | location. | | | | | | | | | | | | | | NOTE: The | | | | | | | UTC time | | | | | | | and | | | | | | | location | | | | | | | reset may | | | | | | | be | | | | | | | performed | | | | | | | by MMI or | | | | | | | AT | | | | | | | command | | | | | | | (+CUTCR). | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 3 | Activate | - | - | - | - | | | the | | | | | | | MCVideo | | | | | | | Client | | | | | | | Ap | | | | | | | plication | | | | | | | and | | | | | | | register | | | | | | | User A as | | | | | | | the | | | | | | | MCVideo | | | | | | | User (TS | | | | | | | 36.579-5 | | | | | | | [5], | | | | | | | px_MCX_ | | | | | | | User_A_ | | | | | | | username, | | | | | | | p | | | | | | | x_MCX_U | | | | | | | ser_A_p | | | | | | | assword). | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | - | E | - | - | - | - | | | XCEPTION: | | | | | | | The | | | | | | | E | | | | | | | -UTRA/EPC | | | | | | | actions | | | | | | | which are | | | | | | | related | | | | | | | to the | | | | | | | MCVideo | | | | | | | call | | | | | | | esta | | | | | | | blishment | | | | | | | are | | | | | | | described | | | | | | | in | | | | | | | TS 36.57 | | | | | | | 9-1 [2] | | | | | | | clause | | | | | | | 5.4.6 | | | | | | | \'MCX CT | | | | | | | comm | | | | | | | unication | | | | | | | over | | | | | | | ProSe | | | | | | | direct | | | | | | | o | | | | | | | ne-to-one | | | | | | | comm | | | | | | | unication | | | | | | | out of | | | | | | | E-UTRA | | | | | | | coverag | | | | | | | e-establi | | | | | | | shment\'. | | | | | | | The test | | | | | | | sequence | | | | | | | below | | | | | | | shows | | | | | | | only the | | | | | | | MCVideo | | | | | | | relevant | | | | | | | messages | | | | | | | e | | | | | | | xchanged. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 4 | SS-UE1 | \ | PRIVATE | 1 | P | | | Does the | | CALL | | | | | UE | | RINGING | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | PRIVATE | | | | | | | CALL | | | | | | | RINGING | | | | | | | message? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 6 | Make the | - | - | - | - | | | MCVideo | | | | | | | User | | | | | | | reject | | | | | | | the | | | | | | | incoming | | | | | | | private | | | | | | | call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 7 | Check: | --> | PRIVATE | 2 | P | | | Does the | | CALL | | | | | UE | | REJECT | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | PRIVATE | | | | | | | CALL | | | | | | | REJECT | | | | | | | message? | | | | | | | | | | | | | | NOTE: It | | | | | | | is | | | | | | | expected | | | | | | | that the | | | | | | | UE shall | | | | | | | start | | | | | | | TFP7 | | | | | | | (waiting | | | | | | | for any | | | | | | | message | | | | | | | with same | | | | | | | call | | | | | | | id | | | | | | | entifier) | | | | | | | upon | | | | | | | sending | | | | | | | of the | | | | | | | PRIVATE | | | | | | | CALL | | | | | | | REJECT | | | | | | | message. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 8 | Check: | - | - | 2 | P | | | Does the | | | | | | | TFP7 | | | | | | | (waiting | | | | | | | for any | | | | | | | message | | | | | | | with same | | | | | | | call | | | | | | | id | | | | | | | entifier) | | | | | | | expire? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | - | E | - | - | - | - | | | XCEPTION: | | | | | | | UE | | | | | | | releases | | | | | | | the | | | | | | | E-UTRA | | | | | | | co | | | | | | | nnection. | | | | | | | The | | | | | | | E | | | | | | | -UTRA/EPC | | | | | | | actions | | | | | | | which are | | | | | | | related | | | | | | | to the | | | | | | | MCVideo | | | | | | | call | | | | | | | release | | | | | | | are | | | | | | | described | | | | | | | in | | | | | | | TS 36.57 | | | | | | | 9-1 [2] | | | | | | | clause | | | | | | | 5.4.8 | | | | | | | \'MCX | | | | | | | comm | | | | | | | unication | | | | | | | over | | | | | | | ProSe | | | | | | | direct | | | | | | | o | | | | | | | ne-to-one | | | | | | | comm | | | | | | | unication | | | | | | | out of | | | | | | | E-UTRA | | | | | | | coverage | | | | | | | - release | | | | | | | by the | | | | | | | UE\'. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | - | E | - | - | - | - | | | XCEPTION: | | | | | | | The | | | | | | | E | | | | | | | -UTRA/EPC | | | | | | | actions | | | | | | | which are | | | | | | | related | | | | | | | to the | | | | | | | MCVideo | | | | | | | call | | | | | | | esta | | | | | | | blishment | | | | | | | are | | | | | | | described | | | | | | | in | | | | | | | TS 36.57 | | | | | | | 9-1 [2] | | | | | | | clause | | | | | | | 5.4.6 | | | | | | | \'MCX CT | | | | | | | comm | | | | | | | unication | | | | | | | over | | | | | | | ProSe | | | | | | | direct | | | | | | | o | | | | | | | ne-to-one | | | | | | | comm | | | | | | | unication | | | | | | | out of | | | | | | | E-UTRA | | | | | | | coverag | | | | | | | e-establi | | | | | | | shment\'. | | | | | | | The test | | | | | | | sequence | | | | | | | below | | | | | | | shows | | | | | | | only the | | | | | | | MCVideo | | | | | | | relevant | | | | | | | messages | | | | | | | e | | | | | | | xchanged. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 9 | SS-UE1 | \ | PRIVATE | 1 | P | | | Does the | | CALL | | | | | UE | | RINGING | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | PRIVATE | | | | | | | CALL | | | | | | | RINGING | | | | | | | message? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 11 | Make the | - | - | - | - | | | MCVideo | | | | | | | User | | | | | | | accept | | | | | | | the | | | | | | | incoming | | | | | | | private | | | | | | | call. | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 12 | Check: | --> | PRIVATE | 3 | P | | | Does the | | CALL | | | | | UE | | ACCEPT | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | PRIVATE | | | | | | | CALL | | | | | | | ACCEPT? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 13 | SS-UE1 | \ | Tra | 3 | P | | | Does the | | nsmission | | | | | UE | | Request | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | Tra | | | | | | | nsmission | | | | | | | Request | | | | | | | message? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 17 | SS-UE1 | \ | Tra | 3 | P | | | Does the | | nsmission | | | | | UE | | Release | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | Tra | | | | | | | nsmission | | | | | | | Release | | | | | | | message? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 20 | SS-UE1 | \ | PRIVATE | 4 | P | | | Does the | | CALL | | | | | UE | | RELEASE | | | | | (MCVideo | | ACK | | | | | Client) | | | | | | | send a | | | | | | | PRIVATE | | | | | | | CALL | | | | | | | RELEASE | | | | | | | ACK | | | | | | | message. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | - | E | - | - | - | - | | | XCEPTION: | | | | | | | SS | | | | | | | releases | | | | | | | the | | | | | | | E-UTRA | | | | | | | co | | | | | | | nnection. | | | | | | | The | | | | | | | E | | | | | | | -UTRA/EPC | | | | | | | actions | | | | | | | which are | | | | | | | related | | | | | | | to the | | | | | | | MCVideo | | | | | | | call | | | | | | | release | | | | | | | are | | | | | | | described | | | | | | | in | | | | | | | TS 36.57 | | | | | | | 9-1 [2] | | | | | | | clause | | | | | | | 5.4.7 | | | | | | | \'MCX | | | | | | | comm | | | | | | | unication | | | | | | | over | | | | | | | ProSe | | | | | | | direct | | | | | | | o | | | | | | | ne-to-one | | | | | | | comm | | | | | | | unication | | | | | | | out of | | | | | | | E-UTRA | | | | | | | coverage | | | | | | | - release | | | | | | | by the | | | | | | | SS\'. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | NOTE 1: | | | | | | | This is | | | | | | | expected | | | | | | | to be | | | | | | | done via | | | | | | | a | | | | | | | suitable | | | | | | | imple | | | | | | | mentation | | | | | | | dependent | | | | | | | MMI. | | | | | | +-----------+-----------+-----------+-----------+---------+----+
##### 7.2.4.3.3 Specific message contents {#specific-message-contents-52 .H6}
Table 7.2.4.3.3-1: PRIVATE CALL SETUP REQUEST (steps 4, 9, Table 7.2.4.3.2-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.14.8-1
* * *
Information Element Value/remark Comment Condition Commencement mode
\"00000001\" **Manual Commencement Mode**  
MCVideo user ID of the caller px_MCVideo_ID_User_B  
MCVideo user ID of the callee px_MCVideo_ID_User_A  
SDP offer As described in TS 36.579-1 [2], Table 5.5.3.1.4-2 with condition
PRIVATE_CALL
Table 7.2.4.3.3-2: PRIVATE CALL RINGING (steps 5, 10, Table 7.2.4.3.2-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.14.9-1
* * *
Information Element Value/remark Comment Condition MCVideo user ID of the
caller px_MCVideo_ID_User_B  
MCVideo user ID of the callee px_MCVideo_ID_User_A
Table 7.2.4.3.3-3: PRIVATE CALL REJECT (step 7, Table 7.2.4.3.2-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.5.11.1-1
* * *
Information Element Value/remark Comment Condition MCVideo user ID of the
caller px_MCVideo_ID_User_B  
MCVideo user ID of the callee px_MCVideo_ID_User_A
Table 7.2.4.3.3-4: PRIVATE CALL ACCEPT (step 12, Table 7.2.4.3.2-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.14.10-1
* * *
Information Element Value/remark Comment Condition MCVideo user ID of the
caller px_MCVideo_ID_User_B  
MCVideo user ID of the callee px_MCVideo_ID_User_A
Table 7.2.4.3.3-5: PRIVATE CALL ACCEPT ACK (step 13, Table 7.2.4.3.2-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.14.14-1
* * *
Information Element Value/remark Comment Condition MCVideo user ID of the
caller px_MCVideo_ID_User_B  
MCVideo user ID of the callee px_MCVideo_ID_User_A
Table 7.2.4.3.3-6: Transmission Granted (step 14, Table 7.2.4.3.2-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.1-1, condition OFF-NETWORK
* * *
Information Element Value/remark Comment Condition **User ID**  
User ID px_MCVideo_ID_User_B
Table 7.2.4.3.3-7: Transmission Request (step 16, Table 7.2.4.3.2-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.1.1-1, condition OFF-NETWORK
* * *
Table 7.2.4.3.3-8: Transmission Granted (step 17, Table 7.2.4.3.2-1)
* * *
Derivation Path: TS 36.579-1 [2], Table 5.5.11.2.1-1, condition OFF-NETWORK
* * *
Table 7.2.4.3.3-9: PRIVATE CALL RELEASE (step 4, Table 7.2.4.3.2-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.14.12-1
* * *
Information Element Value/remark Comment Condition MCVideo user ID of the
caller px_MCVideo_ID_User_B  
MCVideo user ID of the callee px_MCVideo_ID_User_A
Table 7.2.4.3.3-10: PRIVATE CALL RELEASE ACK (step 4, Table 7.2.4.3.2-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.14.13-1
* * *
Information Element Value/remark Comment Condition MCVideo user ID of the
caller px_MCVideo_ID_User_B  
MCVideo user ID of the callee px_MCVideo_ID_User_A
## 7.3 Emergency Alert
### 7.3.1 Off-network / Emergency Alert / Client Originated (CO)
##### 7.3.1.1 Test Purpose (TP) {#test-purpose-tp-53 .H6}
##### (1) {#section-205 .H6}
**with** { UE (MCVideo Client) registered and authorized for MCVideo Service,
including authorized to initiate/cancel private calls with automatic
commencement in off-network environment, and, the UE is in an off-network
environment }
**ensure that** {
**when** { the MCVideo User requests to transmit an emergency alert for an
MCVideo group ID }
**then** { UE (MCVideo Client) sends a GROUP EMERGENCY ALERT message, **and,**
starts timer TFE2 (emergency alert retransmission) }
}
##### (2) {#section-206 .H6}
**with** { UE (MCVideo Client) having sent a GROUP EMERGENCY ALERT message }
**ensure that** {
**when** { TFE2 (emergency alert retransmission) timer expires }
**then** { UE (MCVideo Client) sends a GROUP EMERGENCY ALERT message, **and,**
starts timer TFE2 (emergency alert retransmission) }
}
##### (3) {#section-207 .H6}
**with** { UE (MCVideo Client) having sent a GROUP EMERGENCY ALERT message }
**ensure that** {
**when** { MCVideo User cancels the Emergency Alert }
**then** { UE (MCVideo Client) sends a GROUP EMERGENCY ALERT CANCEL message,
**and,** stops timer TFE2 (emergency alert retransmission) }
}
##### 7.3.1.2 Conformance requirements {#conformance-requirements-53 .H6}
References: The conformance requirements covered in the current TC are
specified in: TS 24.281 clauses 11.3.3.1, 11.3.3.2, 11.3.3.5. Unless otherwise
stated these are Rel-15 requirements.
[TS 24.281, clause 11.3.3.1]
When in state \"E1: Not in emergency state\", upon receiving an indication
from the MCVideo user to transmit an emergency alert for an MCVideo group ID
and the value of \"/_\ _/_\ _/Common/AllowedActivateAlert\" leaf node
present in the user profile as specified in 3GPP TS 24.483 [4] is set to
\"true\", the MCVideo client:
1) shall set the stored emergency state as \"true\";
2) shall set the stored MCVideo group ID to the indicated MCVideo group ID;
3) shall generate a GROUP EMERGENCY ALERT message as specified in clause
17.1.14. In the GROUP EMERGENCY ALERT message, the MCVideo client:
a) shall set the MCVideo group ID IE to the stored MCVideo group ID;
b) shall set the Originating MCVideo user ID IE to own MCVideo user ID;
c) shall set the Organization name IE to own organization name; and
d) may set the User location IE with client\'s current location, if requested;
4) shall send the GROUP EMERGENCY ALERT message as specified in clause
9.3.1.1.1;
5) shall start timer TFE2 (emergency alert retransmission); and
6) shall enter \"E2: Emergency state\" state.
[TS 24.281, clause 11.3.3.2]
When in state \"E2: Emergency state\", upon expiry of timer TFE2 (emergency
alert retransmission), the MCVideo client:
1) shall generate a GROUP EMERGENCY ALERT message as specified in clause
17.1.14. In the GROUP EMERGENCY ALERT message, the MCVideo client:
a) shall set the MCVideo group ID IE to the stored MCVideo group ID;
b) shall set the originating MCVideo user ID IE to own MCVideo user ID;
c) shall set the Organization name IE to own organization name; and
d) may set the Location IE with client\'s current location, if requested; and
2) shall send the GROUP EMERGENCY ALERT message as specified in clause
9.3.1.1.1;
3) shall start the timer TFE2 (emergency alert retransmission); and
4) shall remain in the current state.
[TS 24.281, clause 11.3.3.5]
When in \"E2: Emergency state\", upon receiving an indication from the MCVideo
user to cancel an emergency alert and the value of \"/_\ _/_\
_/Common/AllowedCancelAlert\" leaf node present in the user profile as
specified in 3GPP TS 24.483 [4] is set to \"true\", the MCVideo client:
1) shall set the stored emergency state as \"false\";
2) shall generate a GROUP EMERGENCY ALERT CANCEL message as specified in
clause 17.1.16. In the GROUP EMERGENCY ALERT CANCEL message, the MCVideo
client:
a) shall set the MCVideo group ID IE to the stored MCVideo group ID; and
b) shall set the Originating MCVideo user ID IE to own MCVideo user ID; and
3) shall send the GROUP EMERGENCY ALERT CANCEL message as specified in clause
9.3.1.1.1;
4) shall stop timer TFE2 (emergency alert retransmission); and
5) shall enter \"E1: Not in emergency state\" state.
##### 7.3.1.3 Test description {#test-description-53 .H6}
##### 7.3.1.3.1 Pre-test conditions {#pre-test-conditions-53 .H6}
##### System Simulator: {#system-simulator-46 .H6}
\- SS-UE1 (MCVideo Client)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate, the SS is behaving as SS-UE1 as defined in TS 36.508 [24],
configured for and operating as ProSe Direct Communication transmitting and
receiving device.
\- GNSS simulator to simulate a location and provide a timing reference for
the assistance of E-UTRAN off-network testing.
NOTE 1: For operation in off-network environment, it needs be ensured that
after the UE is powered up it considers the Geographical area #1 that is
simulated by the GNSS simulator as being one of the geographical areas set in
the USIM for operation when UE is \"not served by E-UTRAN\".
\- SS-NW (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
NOTE 2: The SS operation as NW (MCVideo server) is needed only for the
preamble if the UE has to perform procedure \'MCX Authorization/Configuration
and Key Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
##### IUT: {#iut-45 .H6}
\- UE (MCVideo Client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate, the UE is behaving as a ProSe enabled UE as defined in TS 36.508
[24], configured for and operating as ProSe Direct Communication transmitting
and receiving device.
##### Preamble: {#preamble-46 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- The GNSS simulator is configured to simulate a location in the centre of
Geographical area #1 and provide a timing reference, as defined in TS 36.508
[24] Table 4.11.2-2 scenario #1.
\- The UE is switched-off.
\- UE States at the end of the preamble
\- The UE is in state \'switched-off\'.
##### 7.3.1.3.2 Test procedure sequence {#test-procedure-sequence-53 .H6}
Table 7.3.1.3.2-1: Main behaviour
+-----------+-----------+-----------+-----------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +===========+===========+===========+===========+=========+====+ | | | U - S | Message | | | +-----------+-----------+-----------+-----------+---------+----+ | 1 | Power up | - | - | - | - | | | the UE. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 2 | Trigger | - | - | - | - | | | the UE to | | | | | | | reset UTC | | | | | | | time and | | | | | | | location. | | | | | | | | | | | | | | NOTE: The | | | | | | | UTC time | | | | | | | and | | | | | | | location | | | | | | | reset may | | | | | | | be | | | | | | | performed | | | | | | | by MMI or | | | | | | | AT | | | | | | | command | | | | | | | (+CUTCR). | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 3 | Activate | - | - | - | - | | | the | | | | | | | MCVideo | | | | | | | Client | | | | | | | Ap | | | | | | | plication | | | | | | | and | | | | | | | register | | | | | | | User A as | | | | | | | the | | | | | | | MCVideo | | | | | | | User (TS | | | | | | | 36.579-5 | | | | | | | [5], | | | | | | | px_MCX_ | | | | | | | User_A_ | | | | | | | username, | | | | | | | p | | | | | | | x_MCX_U | | | | | | | ser_A_p | | | | | | | assword). | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 4 | Make the | - | - | - | - | | | MCVideo | | | | | | | User | | | | | | | request | | | | | | | to | | | | | | | transmit | | | | | | | an | | | | | | | emergency | | | | | | | alert for | | | | | | | Group A. | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | - | E | - | - | - | - | | | XCEPTION: | | | | | | | The | | | | | | | E | | | | | | | -UTRA/EPC | | | | | | | actions | | | | | | | which are | | | | | | | related | | | | | | | to the | | | | | | | MCVideo | | | | | | | call | | | | | | | esta | | | | | | | blishment | | | | | | | are | | | | | | | described | | | | | | | in | | | | | | | TS 36.57 | | | | | | | 9-1 [2] | | | | | | | clause | | | | | | | 5.4.11 | | | | | | | \'MCX CO | | | | | | | comm | | | | | | | unication | | | | | | | over | | | | | | | ProSe | | | | | | | direct | | | | | | | on | | | | | | | e-to-many | | | | | | | comm | | | | | | | unication | | | | | | | out of | | | | | | | E-UTRA | | | | | | | coverage | | | | | | | / | | | | | | | Mon | | | | | | | itoring/D | | | | | | | iscoverer | | | | | | | procedure | | | | | | | for group | | | | | | | member | | | | | | | discovery | | | | | | | / | | | | | | | On | | | | | | | e-to-many | | | | | | | communi | | | | | | | cation\'. | | | | | | | The test | | | | | | | sequence | | | | | | | below | | | | | | | shows | | | | | | | only the | | | | | | | MCVideo | | | | | | | relevant | | | | | | | messages | | | | | | | e | | | | | | | xchanged. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | - | E | - | - | - | - | | | XCEPTION: | | | | | | | Steps | | | | | | | 5a1-5b1 | | | | | | | describe | | | | | | | behaviour | | | | | | | that | | | | | | | depends | | | | | | | on UE | | | | | | | implem | | | | | | | entation; | | | | | | | the | | | | | | | \"lower | | | | | | | case | | | | | | | letter\" | | | | | | | i | | | | | | | dentifies | | | | | | | a step | | | | | | | sequence | | | | | | | that | | | | | | | takes | | | | | | | place | | | | | | | when the | | | | | | | UE | | | | | | | (MCVideo | | | | | | | Client) | | | | | | | includes | | | | | | | user | | | | | | | location | | | | | | | in | | | | | | | formation | | | | | | | in the | | | | | | | GROUP | | | | | | | EMRGENCY | | | | | | | ALERT | | | | | | | message | | | | | | | or not. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 5a1 | Check: | --> | GROUP | 1 | P | | | Does the | | EMERGENCY | | | | | UE | | ALERT | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | GROUP | | | | | | | EMERGENCY | | | | | | | ALERT | | | | | | | message | | | | | | | without | | | | | | | user | | | | | | | location? | | | | | | | | | | | | | | NOTE: It | | | | | | | is | | | | | | | expected | | | | | | | that the | | | | | | | UE shall | | | | | | | start | | | | | | | timer | | | | | | | TFE2 | | | | | | | ( | | | | | | | emergency | | | | | | | alert | | | | | | | retrans | | | | | | | mission). | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 5b1 | Check: | --> | GROUP | 1 | P | | | Does the | | EMERGENCY | | | | | UE | | ALERT | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | GROUP | | | | | | | EMERGENCY | | | | | | | ALERT | | | | | | | message | | | | | | | with user | | | | | | | location? | | | | | | | | | | | | | | NOTE: It | | | | | | | is | | | | | | | expected | | | | | | | that the | | | | | | | UE shall | | | | | | | start | | | | | | | timer | | | | | | | TFE2 | | | | | | | ( | | | | | | | emergency | | | | | | | alert | | | | | | | retrans | | | | | | | mission). | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 6 | Start | - | - | - | - | | | TFE2 | | | | | | | ( | | | | | | | emergency | | | | | | | alert | | | | | | | retran | | | | | | | smission) | | | | | | | 10 | | | | | | | seconds | | | | | | | as | | | | | | | defined | | | | | | | in | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .5.8.1-1. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 7 | SS-UE1 | \ | GROUP | 2 | P | | | Does the | | EMERGENCY | | | | | UE | | ALERT | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | GROUP | | | | | | | EMERGENCY | | | | | | | ALERT | | | | | | | message | | | | | | | without | | | | | | | user | | | | | | | location? | | | | | | | | | | | | | | NOTE: It | | | | | | | is | | | | | | | expected | | | | | | | that the | | | | | | | UE shall | | | | | | | start | | | | | | | timer | | | | | | | TFE2 | | | | | | | ( | | | | | | | emergency | | | | | | | alert | | | | | | | retrans | | | | | | | mission). | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 9b1 | Check: | --> | GROUP | 2 | P | | | Does the | | EMERGENCY | | | | | UE | | ALERT | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | GROUP | | | | | | | EMERGENCY | | | | | | | ALERT | | | | | | | message | | | | | | | with user | | | | | | | location? | | | | | | | | | | | | | | NOTE: It | | | | | | | is | | | | | | | expected | | | | | | | that the | | | | | | | UE shall | | | | | | | start | | | | | | | timer | | | | | | | TFE2 | | | | | | | ( | | | | | | | emergency | | | | | | | alert | | | | | | | retrans | | | | | | | mission). | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 10 | Before | - | - | - | - | | | timer | | | | | | | TFE2 | | | | | | | expires, | | | | | | | make the | | | | | | | MCVideo | | | | | | | User | | | | | | | request | | | | | | | to cancel | | | | | | | the | | | | | | | emergency | | | | | | | alert for | | | | | | | Group A. | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 11 | Check: | --> | GROUP | 3 | P | | | Does the | | EMERGENCY | | | | | UE | | ALERT | | | | | (MCVideo | | CANCEL | | | | | Client) | | | | | | | send a | | | | | | | GROUP | | | | | | | EMERGENCY | | | | | | | ALERT | | | | | | | CANCEL | | | | | | | message? | | | | | | | | | | | | | | NOTE: It | | | | | | | is | | | | | | | expected | | | | | | | that the | | | | | | | UE shall | | | | | | | stop | | | | | | | timer | | | | | | | TFE2 | | | | | | | ( | | | | | | | emergency | | | | | | | alert | | | | | | | retrans | | | | | | | mission). | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 12 | SS-UE1 | \ 1) shall store the Originating MCVideo user ID IE and location IE in the
> list of users in emergency;
2) shall generate a GROUP EMERGENCY ALERT ACK message as specified in clause
17.1.15. In the GROUP EMERGENCY ALERT ACK message, the MCVideo client:
a) shall set the MCVideo group ID IE to the MCVideo group ID IE of the
received GROUP EMERGENCY ALERT message;
b) shall set the Sending MCVideo user ID IE to own MCVideo user ID; and
c) shall set the Originating MCVideo user ID IE to the Originating MCVideo
user ID IE of the received GROUP EMERGENCY ALERT message; and
3) shall send the GROUP EMERGENCY ALERT ACK message as specified in clause
9.3.1.1.1;
> 4) shall start timer TFE1 (Emergency Alert); and
>
> 5) shall remain in the current state.
NOTE: Each instance of timer TFE1 is per MCVideo user ID.
[TS 24.281, clause 11.3.3.4]
When in state \"E1: Not in emergency state\" or in \"E2: Emergency state\",
upon receiving a GROUP EMERGENCY ALERT message with the Originating MCVideo
user ID IE stored in the list of users in emergency and Location IE different
than the stored location of the user, the MCVideo client:
> 1) may update the stored location of the user with the received Location IE;
>
> 2) shall restart the associated timer TFE1 (Emergency Alert); and
>
> 3) shall remain in the current state.
[TS 24.281, clause 11.3.3.6]
When in state \"E1: Not in emergency state\" or in \"E2: Emergency state\",
upon receiving a GROUP EMERGENCY ALERT CANCEL message with the Originating
MCVideo user ID IE stored in the list of users in emergency, the MCVideo
client:
1) shall remove the MCVideo user ID and associated location information from
the stored list of users in emergency;
2) shall generate a GROUP EMERGENCY ALERT CANCEL ACK message as specified in
clause 17.1.17. In the GROUP EMERGENCY ALERT CANCEL ACK message, the MCVideo
client:
a) shall set the MCVideo group ID IE to the MCVideo group ID IE of the
received GROUP EMERGENCY ALERT CANCEL message; and
> b) shall set the Sending MCVideo user ID IE to own MCVideo user ID; and
c) shall set the Originating MCVideo user ID IE to the Originating MCVideo
user ID IE of the received GROUP EMERGENCY ALERT message;
3) shall send the GROUP EMERGENCY ALERT CANCEL ACK message as specified in
clause 9.3.1.1.1;
4) shall stop the associated timer TFE1 (Emergency Alert); and
5) shall remain in the current state.
##### 7.3.2.3 Test description {#test-description-54 .H6}
##### 7.3.2.3.1 Pre-test conditions {#pre-test-conditions-54 .H6}
##### System Simulator: {#system-simulator-47 .H6}
\- SS-UE1 (MCVideo Client)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate, the SS is behaving as SS-UE1 as defined in TS 36.508 [24],
configured for and operating as ProSe Direct Communication transmitting and
receiving device.
\- GNSS simulator to simulate a location and provide a timing reference for
the assistance of E-UTRAN off-network testing.
NOTE 1: For operation in off-network environment, it needs be ensured that
after the UE is powered up it considers the Geographical area #1 that is
simulated by the GNSS simulator as being one of the geographical areas set in
the USIM for operation when UE is \"not served by E-UTRAN\".
\- SS-NW (MCVideo server)
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate Parameters are set to the default parameters for the basic E-UTRA
Single cell network scenarios, as defined in TS 36.508 [24] clause 4.4. The
simulated Cell 1 shall belong to PLMN1 (the PLMN specified for MCVideo
operation in the MCVideo configuration document).
NOTE 2: The SS operation as NW (MCVideo server) is needed only for the
preamble if the UE has to perform procedure \'MCX Authorization/Configuration
and Key Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
##### IUT: {#iut-46 .H6}
\- UE (MCVideo Client)
\- The test USIM set as defined in TS 36.579-1 [2] clause 5.5.10 is inserted.
\- For the underlying \"transport bearer\" over which the SS and the UE will
communicate, the UE is behaving as a ProSe enabled UE as defined in TS 36.508
[24], configured for and operating as ProSe Direct Communication transmitting
and receiving device.
##### Preamble: {#preamble-47 .H6}
\- The UE has performed procedure \'MCVideo UE registration\' as specified in
TS 36.579-1 [2] clause 5.4.2A.
\- The UE has performed procedure \'MCX Authorization/Configuration and Key
Generation\' as specified in TS 36.579-1 [2] clause 5.3.2.
\- The GNSS simulator is configured to simulate a location in the centre of
Geographical area #1 and provide a timing reference, as defined in TS 36.508
[24] Table 4.11.2-2 scenario #1.
\- The UE is switched-off.
\- UE States at the end of the preamble
\- The UE is in state \'switched-off\'.
##### 7.3.2.3.2 Test procedure sequence {#test-procedure-sequence-54 .H6}
Table 7.3.2.3.2-1: Main behaviour
+-----------+-----------+-----------+-----------+---------+----+ | St | Procedure | Message | TP | Verdict | | | | | Sequence | | | | +===========+===========+===========+===========+=========+====+ | | | U - S | Message | | | +-----------+-----------+-----------+-----------+---------+----+ | 1 | Power up | - | - | - | - | | | the UE. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 2 | Trigger | - | - | - | - | | | the UE to | | | | | | | reset UTC | | | | | | | time and | | | | | | | location. | | | | | | | | | | | | | | NOTE: The | | | | | | | UTC time | | | | | | | and | | | | | | | location | | | | | | | reset may | | | | | | | be | | | | | | | performed | | | | | | | by MMI or | | | | | | | AT | | | | | | | command | | | | | | | (+CUTCR). | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 3 | Activate | - | - | - | - | | | the | | | | | | | MCVideo | | | | | | | Client | | | | | | | Ap | | | | | | | plication | | | | | | | and | | | | | | | register | | | | | | | User A as | | | | | | | the | | | | | | | MCVideo | | | | | | | User (TS | | | | | | | 36.579-5 | | | | | | | [5], | | | | | | | px_MCX_ | | | | | | | User_A_ | | | | | | | username, | | | | | | | p | | | | | | | x_MCX_U | | | | | | | ser_A_p | | | | | | | assword). | | | | | | | | | | | | | | (NOTE 1) | | | | | +-----------+-----------+-----------+-----------+---------+----+ | - | E | - | - | - | - | | | XCEPTION: | | | | | | | The | | | | | | | E | | | | | | | -UTRA/EPC | | | | | | | actions | | | | | | | which are | | | | | | | related | | | | | | | to the | | | | | | | MCVideo | | | | | | | call | | | | | | | esta | | | | | | | blishment | | | | | | | are | | | | | | | described | | | | | | | in | | | | | | | TS 36.57 | | | | | | | 9-1 [2] | | | | | | | clause | | | | | | | 5.4.10 | | | | | | | \'MCX CT | | | | | | | comm | | | | | | | unication | | | | | | | over | | | | | | | ProSe | | | | | | | direct | | | | | | | on | | | | | | | e-to-many | | | | | | | comm | | | | | | | unication | | | | | | | out of | | | | | | | E-UTRA | | | | | | | coverage | | | | | | | / | | | | | | | Ann | | | | | | | ouncing/D | | | | | | | iscoveree | | | | | | | procedure | | | | | | | for group | | | | | | | member | | | | | | | dis | | | | | | | covery\'. | | | | | | | The test | | | | | | | sequence | | | | | | | below | | | | | | | shows | | | | | | | only the | | | | | | | MCVideo | | | | | | | relevant | | | | | | | messages | | | | | | | e | | | | | | | xchanged. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 4 | SS-UE1 | \ | GROUP | 1 | P | | | Does the | | EMERGENCY | | | | | UE | | ALERT ACK | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | GROUP | | | | | | | EMERGENCY | | | | | | | ALERT ACK | | | | | | | message? | | | | | | | | | | | | | | NOTE: It | | | | | | | is | | | | | | | expected | | | | | | | that the | | | | | | | UE shall | | | | | | | start | | | | | | | timer | | | | | | | TFE1 | | | | | | | ( | | | | | | | Emergency | | | | | | | Alert). | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 6 | Start | - | - | - | - | | | TFE1 | | | | | | | ( | | | | | | | Emergency | | | | | | | Alert) 30 | | | | | | | seconds | | | | | | | as | | | | | | | defined | | | | | | | in | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5 | | | | | | | .5.8.1-1. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 7 | Wait for | - | - | - | - | | | 10 | | | | | | | seconds | | | | | | | (value of | | | | | | | TFE2 | | | | | | | ( | | | | | | | emergency | | | | | | | alert | | | | | | | retran | | | | | | | smission) | | | | | | | as | | | | | | | defined | | | | | | | in | | | | | | | 36.579-1 | | | | | | | [2] | | | | | | | Table | | | | | | | 5. | | | | | | | 5.8.1-1). | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 8 | SS-UE1 | \ | GROUP | 2 | F | | | Does the | | EMERGENCY | | | | | UE | | ALERT ACK | | | | | (MCVideo | | | | | | | Client) | | | | | | | send a | | | | | | | GROUP | | | | | | | EMERGENCY | | | | | | | ALERT ACK | | | | | | | message? | | | | | +-----------+-----------+-----------+-----------+---------+----+ | 10 | SS-UE1 | \ | GROUP | 3 | P | | | Does the | | EMERGENCY | | | | | UE | | ALERT | | | | | (MCVideo | | CANCEL | | | | | Client) | | ACK | | | | | send a | | | | | | | GROUP | | | | | | | EMERGENCY | | | | | | | ALERT | | | | | | | CANCEL | | | | | | | message? | | | | | | | | | | | | | | NOTE: It | | | | | | | is | | | | | | | expected | | | | | | | that the | | | | | | | UE shall | | | | | | | stop | | | | | | | timer | | | | | | | TFE1 | | | | | | | ( | | | | | | | Emergency | | | | | | | Alert). | | | | | +-----------+-----------+-----------+-----------+---------+----+ | - | E | - | - | - | - | | | XCEPTION: | | | | | | | SS | | | | | | | releases | | | | | | | the | | | | | | | E-UTRA | | | | | | | co | | | | | | | nnection. | | | | | | | The | | | | | | | E | | | | | | | -UTRA/EPC | | | | | | | actions | | | | | | | which are | | | | | | | related | | | | | | | to the | | | | | | | MCVideo | | | | | | | call | | | | | | | release | | | | | | | are | | | | | | | described | | | | | | | in | | | | | | | TS 36.57 | | | | | | | 9-1 [2] | | | | | | | clause | | | | | | | 5.4.7 | | | | | | | \'MCX | | | | | | | comm | | | | | | | unication | | | | | | | over | | | | | | | ProSe | | | | | | | direct | | | | | | | o | | | | | | | ne-to-one | | | | | | | comm | | | | | | | unication | | | | | | | out of | | | | | | | E-UTRA | | | | | | | coverage | | | | | | | - release | | | | | | | by the | | | | | | | SS\'. | | | | | +-----------+-----------+-----------+-----------+---------+----+ | NOTE 1: | | | | | | | This is | | | | | | | expected | | | | | | | to be | | | | | | | done via | | | | | | | a | | | | | | | suitable | | | | | | | imple | | | | | | | mentation | | | | | | | dependent | | | | | | | MMI. | | | | | | +-----------+-----------+-----------+-----------+---------+----+
##### 7.3.2.3.3 Specific message contents {#specific-message-contents-54 .H6}
Table 7.3.2.3.3-1: GROUP EMERGENCY ALERT (steps 4, 8, Table 7.3.2.3.2-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.14.15.1-1
* * *
Information Element Value/remark Comment Condition Originating MCVideo user ID
px_MCVideo_ID_User_B
Table 7.3.2.3.3-2: GROUP EMERGENCY ALERT ACK (steps 5, 9, Table 7.3.2.3.2-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.14.16.1-1
* * *
Information Element Value/remark Comment Condition Originating MCVideo user ID
px_MCVideo_ID_User_B
Table 7.3.2.3.3-3: GROUP EMERGENCY ALERT CANCEL (step 10, Table 7.3.2.3.2-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.14.17.1-1
* * *
Information Element Value/remark Comment Condition Originating MCVideo user ID
px_MCVideo_ID_User_B  
Sending MCVideo user ID px_MCVideo_ID_User_B
Table 7.3.2.3.3-4: GROUP EMERGENCY ALERT CANCEL ACK (step 11, Table
7.3.2.3.2-1)
Derivation Path: TS 36.579-1 [2], Table 5.5.14.18.1-1
* * *
Information Element Value/remark Comment Condition Originating MCVideo user ID
px_MCVideo_ID_User_B  
Sending MCVideo user ID px_MCVideo_ID_User_A
#