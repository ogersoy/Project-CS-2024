# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document specifies the stage 2 of the UE Positioning function of
E-UTRAN, which provides the mechanisms to support or assist the calculation of
the geographical position of a UE. UE position knowledge can be used, for
example, in support of Radio Resource Management functions, as well as
location-based services for operators, subscribers, and third-party service
providers. The purpose of this stage 2 specification is to define the E-UTRAN
UE Positioning architecture, functional entities and operations to support
positioning methods. This description is confined to the E-UTRAN Access
Stratum. It does not define or describe how the results of the UE position
calculation can be utilised in the Core Network (e.g., LCS) or in E-UTRAN
(e.g., RRM).
UE Positioning may be considered as a network-provided enabling technology
consisting of standardised service capabilities that enable the provision of
location applications. The application(s) may be service provider specific.
The description of the numerous and varied possible location applications
which are enabled by this technology is outside the scope of the present
document. However, clarifying examples of how the functionality being
described may be used to provide specific location services may be included.
This stage 2 specification covers the E-UTRAN positioning methods, state
descriptions, and message flows to support UE Positioning.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or non-specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document._
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.271: \"Functional stage 2 description of Location Services
(LCS)\"
[3] 3GPP TS 22.071: \"Location Services (LCS); Service description, Stage 1\".
[4] 3GPP TS 23.032: \"Universal Geographical Area Description (GAD)\".
[5] 3GPP TS 36.306: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
\"User Equipment (UE) radio access capabilities\".
[6] IS-GPS-200, Revision D, Navstar GPS Space Segment/Navigation User
Interfaces, March 7^th^, 2006.
[7] IS-GPS-705, Navstar GPS Space Segment/User Segment L5 Interfaces,
September 22, 2005.
[8] IS-GPS-800, Navstar GPS Space Segment/User Segment L1C Interfaces,
September 4, 2008.
[9] Galileo OS Signal in Space ICD (OS SIS ICD), Draft 0, Galileo Joint
Undertaking, May 23^rd^, 2006.
[10] Global Navigation Satellite System GLONASS Interface Control Document,
Version 5, 2002.
[11] IS-QZSS, Quasi Zenith Satellite System Navigation Service Interface
Specifications for QZSS, Ver.1.0, June 17, 2008.
[12] Specification for the Wide Area Augmentation System (WAAS), US Department
of Transportation, Federal Aviation Administration, DTFA01-96-C-00025, 2001.
[13] RTCM 10402.3, RTCM Recommended Standards for Differential GNSS Service
(v.2.3), August 20, 2001.
[14] 3GPP TS 36.331: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
\"Radio Resource Control (RRC); Protocol specification\".
[15] 3GPP TS 25.331: \" Radio Resource Control (RRC); Protocol
Specification\".
[16] 3GPP TS 44.031: \"Location Services (LCS); Mobile Station (MS) - Serving
Mobile Location Centre (SMLC) Radio Resource LCS Protocol (RRLP)\".
[17] OMA-AD-SUPL-V2_0: \"Secure User Plane Location Architecture Approved
Version 2.0\".
[18] OMA-TS-ULP-V2_0_6: \"UserPlane Location Protocol Approved Version
2.0.6\".
[19] 3GPP TS 23.401: \"General Packet Radio Service (GPRS) enhancements for
Evolved Universal Terrestrial Radio Access Network (E-UTRAN) access\".
[20] 3GPP TS 36.214: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
\"Physical layer -- Measurements\".
[21] 3GPP TS 36.302: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
\"Services provided by the physical layer \".
[22] 3GPP TS 25.305: \"Stage 2 functional specification of User Equipment (UE)
positioning in UTRAN\".
[23] 3GPP TS 43.059: \"Functional stage 2 description of Location Services in
GERAN\".
[24] 3GPP TR 23.891: \"Evaluation of LCS Control Plane Solutions for EPS\".
[25] 3GPP TS 36.355: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
LTE Positioning Protocol (LPP)\".
[26] 3GPP TS 24.171: \"Control Plane Location Services (LCS) procedures in the
Evolved Packet System (EPS)\".
[27] 3GPP TS 29.171: \"Location Services (LCS); LCS Application Protocol (LCS-
AP) between the Mobile Management Entity (MME) and Evolved Serving Mobile
Location Centre (E-SMLC); SLs interface\".
[28] BDS-SIS-ICD-B1I-3.0: \"BeiDou Navigation Satellite System Signal In Space
Interface Control Document Open Service Signal B1I (Version 3.0)\", February,
2019.
[29] IEEE 802.11: \"Wireless LAN Medium Access Control (MAC) and Physical
Layer (PHY) Specifications\".
[30] Bluetooth Special Interest Group: \"Bluetooth Core Specification v4.2\",
December 2014.
[31] ATIS-0500027: \"Recommendations for Establishing Wide Scale Indoor
Location Performance\", May 2015.
[32] 3GPP TS 36.211: \"Evolved Universal Terrestrial Radio Access (E-UTRA);
Physical channels and modulation\".
[33] RTCM 10403.3, RTCM Recommended Standards for Differential GNSS Services
(v.3.3), October 7, 2016.
[34] BDS-SIS-ICD-B1C-1.0: \"BeiDou Navigation Satellite System Signal In Space
Interface Control Document Open Service Signal B1C (Version 1.0)\", December,
2017.
[35] IRNSS Signal-In-Space (SPS) Interface Control Document (ICD) for standard
positioning service version 1.1, August 2017.
[36] IS-QZSS-L6-001, Quasi-Zenith Satellite System Interface Specification --
Centimetre Level Augmentation Service, Cabinet Office, November 5, 2018.
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] apply.
As used in this document, the suffixes \"-based\" and \"-assisted\" refer
respectively to the node that is responsible for making the positioning
calculation (and which may also provide measurements) and a node that provides
measurements (but which does not make the positioning calculation). Thus, an
operation in which measurements are provided by the UE to the E-SMLC to be
used in the computation of a position estimate is described as \"UE-assisted\"
(and could also be called \"E-SMLC-based\"), while one in which the UE
computes its own position is described as \"UE-based\".
Both standalone LMU and LMU integrated into an eNB are supported. As used in
this document, LMU refers to both cases of a standalone LMU and an LMU
integrated into an eNodeB unless explicitly mentioned otherwise.
**State Space Representation (SSR)** : The state space representation provides
information on the status of individual GNSS error sources. State parameter
values are transmitted to UE. The user corrects his own observations of a
single GNSS receiver with SSR corrections computed from these state parameters
for his individual position, and performs RTK positioning with corrected
observations. This contrasts with Observation Space Representation (OSR) which
uses a lump-sum of distance-dependent GNSS errors instead of individual GNSS
error sources. For OSR the representation of RTK network corrections in the
observation space always uses GNSS observation of an actual reference station,
which are then applied by the user to the conventional RTK algorithm.
**Transmission Point (TP)** : A **set of geographically co-located transmit
antennas for one cell, part of one cell or one PRS-only TP.** Transmission
Points can include base station (eNode B) antennas, remote radio heads, a
remote antenna of a base station, an antenna of a PRS-only TP, etc. One cell
can be formed by one or multiple transmission points. For a homogeneous
deployment, each transmission point may correspond to one cell.
**PRS-only TP** : A TP which only transmits PRS signals for PRS-based TBS
positioning and is not associated with a cell.
## 3.2 Abbreviations
For the purposes of the present document, the following abbreviations apply.
ADR Accumulated Delta Range
AoA Angle of Arrival
AP Access Point
ARP Antenna Reference Point
BDS BeiDou Navigation Satellite System
BSSID Basic Service Set Identifier
CID Cell-ID (positioning method)
CIoT Cellular IoT
CLAS Centimeter Level Augmentation Service
E-SMLC Enhanced Serving Mobile Location Centre
E-CID Enhanced Cell-ID (positioning method)
ECEF Earth-Centered, Earth-Fixed
ECI Earth-Centered-Inertial
EGNOS European Geostationary Navigation Overlay Service
E-UTRAN Evolved Universal Terrestrial Radio Access Network
FDMA Frequency Division Multiple Access
FKP Flächenkorrekturparameter (Engl: Area Correction Parameters)
GAGAN GPS Aided Geo Augmented Navigation
GLONASS GLObal\'naya NAvigatsionnaya Sputnikovaya Sistema (Engl.: Global
Navigation Satellite System)
GMLC Gateway Mobile Location Center
GNSS Global Navigation Satellite System
GPS Global Positioning System
GRS80 Geodetic Reference System 1980
HESSID Homogeneous Extended Service Set Identifier
IoT Internet of Things
LCS LoCation Services
LCS-AP LCS Application Protocol
LMU Location Measurement Unit
LPP LTE Positioning Protocol
LPPa LTE Positioning Protocol Annex
MAC Master Auxiliary Concept
MBS Metropolitan Beacon System
MO-LR Mobile Originated Location Request
MT-LR Mobile Terminated Location Request
NavIC NAVigation with Indian Constellation
NB-IoT NarrowBand Internet of Things
NI-LR Network Induced Location Request
N-RTK Network -- Real-Time Kinematic
OTDOA Observed Time Difference Of Arrival
PDU Protocol Data Unit
posSIB Positioning SIB
PPP Precise Point Positioning
PPP-RTK Precise Point Positioning -- Real-Time Kinematic
PRS Positioning Reference Signal
QZSS Quasi-Zenith Satellite System
RRM Radio Resource Management
RSSI Received Signal Strength Indicator
RTK Real-Time Kinematic
SBAS Space Based Augmentation System
SET SUPL Enabled Terminal
SIB System Information Block
SLP SUPL Location Platform
SSID Service Set Identifier
SSR State Space Representation
STEC Slant TEC
SUPL Secure User Plane Location
T~ADV~ Timing Advance
TBS Terrestrial Beacon System
TEC Total Electron Content
TP Transmission Point
UE User Equipment
URA User Range Accuracy
UTDOA Uplink Time Difference of Arrival
WAAS Wide Area Augmentation System
WGS-84 World Geodetic System 1984
WLAN Wireless Local Area Network
# 4 Main concepts and requirements
## 4.1 Assumptions and Generalities
The stage 1 description of LCS at the service level is provided in TS 22.071
[3]; the stage 2 LCS functional description, including the LCS system
architecture and message flows, is provided in TS 23.271 [2].
Positioning functionality provides a means to determine the geographic
position and/or velocity of the UE based on measuring radio signals. The
position information may be requested by and reported to a client (e.g., an
application) associated with the UE, or by a client within or attached to the
core network. The position information shall be reported in standard formats,
such as those for cell-based or geographical co-ordinates, together with the
estimated errors (uncertainty) of the position and velocity of the UE and, if
available, the positioning method (or the list of the methods) used to obtain
the position estimate.
Restrictions on the geographic shape encoded within the \'position
information\' parameter may exist for certain LCS client types. The EPS,
including E-UTRAN, shall comply with any shape restrictions defined in LTE
and, in a particular country, with any shape restrictions defined for a
specific LCS client type in relevant national standards. For example, in the
US, national standard J-STD-036-B restricts the geographic shape for an
emergency services LCS client to minimally either an \"ellipsoid point\" or an
\"ellipsoid point with uncertainty circle and confidence\" as defined in TS
23.032 [4].
It shall be possible for the majority of the UEs (active or inactive) within a
network to use the LCS feature without compromising the radio transmission or
signalling capabilities of the E-UTRAN.
The uncertainty of the position measurement shall be network-implementation-
dependent, at the choice of the network operator. The uncertainty may vary
between networks as well as from one area within a network to another. The
uncertainty may be hundreds of metres in some areas and only a few metres in
others. In the event that a particular position measurement is provided
through a UE-assisted process, the uncertainty may also depend on the
capabilities of the UE. In some jurisdictions, there is a regulatory
requirement for location service accuracy that is part of an emergency
service. Further details of the accuracy requirements can be found in TS
22.071 [3].
The uncertainty of the position information is dependent on the method used,
the position of the UE within the coverage area and the activity of the UE.
Several design options of the E-UTRAN system (e.g., size of cell, adaptive
antenna technique, pathloss estimation, timing accuracy, eNode B surveys)
shall allow the network operator to choose a suitable and cost-effective UE
positioning method for their market.
There are many different possible uses for the positioning information. The
positioning functions may be used internally by the EPS, by value-added
network services, by the UE itself or through the network, and by \"third
party\" services. The feature may also be used by an emergency service (which
may be mandated or \"value-added\"), but the location service is not
exclusively for emergencies.
The E-UTRAN is a new radio system design without a pre-existing deployment of
\"legacy\" UEs operating according to the radio interface. This freedom from
legacy equipment enables the location service feature design to make use of
appropriate techniques to provide the most accurate results. The technique
must also be a cost-effective total solution, must allow evolution to meet
evolving service requirements, and must be able to take advantage of advances
in technology over the lifetime of E-UTRAN deployments.
Design of the E-UTRAN positioning capability as documented in this
specification includes position methods, protocols and procedures that are
either adapted from capabilities already supported for UTRAN and GERAN, or
created separately from first principles. The proportion of the latter is
higher than if the UTRAN and GERAN capabilities had been designed to provide
forward compatibility to other access types. In contrast to GERAN and UTRAN,
the E-UTRAN positioning capabilities are intended to be forward compatible to
other access types and other position methods, in an effort to reduce the
amount of additional positioning support needed in the future. This goal also
extends to user plane location solutions such as OMA SUPL ([17], [18]), for
which E-UTRAN positioning capabilities are intended to be compatible where
appropriate.
As a basis for the operation of UE Positioning in E-UTRAN, the following
assumptions apply:
\- both TDD and FDD will be supported;
\- the provision of the UE Positioning function in E-UTRAN and EPC is optional
through support of the specified method(s) in the eNode B and the E-SMLC;
\- UE Positioning is applicable to any target UE, whether or not the UE
supports LCS, but with restrictions on the use of certain positioning methods
depending on UE capability (as defined within the LPP protocol);
\- the positioning information may be used for internal system operations to
improve system performance;
\- the UE Positioning architecture and functions shall include the option to
accommodate several techniques of measurement and processing to ensure
evolution to follow changing service requirements and to take advantage of
advancing technology;
\- LMU aspects are left for implementation and are not standardized in this
release.
## 4.2 Role of UE Positioning Methods
The E-UTRAN may utilise one or more positioning methods in order to determine
the position of an UE.
Positioning the UE involves two main steps:
\- signal measurements; and
\- Position estimate and optional velocity computation based on the
measurements.
The signal measurements may be made by the UE or the eNode B. The basic
signals measured for terrestrial position methods are typically the E-UTRA
radio transmissions; however, other methods may make use of other
transmissions such as general radio navigation signals including those from
Global Navigation Satellites Systems (GNSSs).
The positioning function should not be limited to a single method or
measurement. That is, it should be capable of utilising other standard methods
and measurements, as such methods and measurements are available and
appropriate, to meet the required service needs of the location service
client. This additional information could consist of readily available E-UTRAN
measurements.
The position estimate computation may be made by the UE or by the E-SMLC.
## 4.3 Standard UE Positioning Methods
The standard positioning methods supported for E-UTRAN access are:
\- network-assisted GNSS methods;
\- downlink positioning;
\- enhanced cell ID method;
\- uplink positioning;
\- WLAN method;
\- Bluetooth method;
\- Terrestrial Beacon System method;
\- Sensor based methods:
\- Barometric Pressure Sensor;
\- Motion sensor.
Hybrid positioning using multiple methods from the list of positioning methods
above is also supported.
Standalone mode (e.g. autonomous, without network assistance) using one or
more methods from the list of positioning methods above is also supported.
These positioning methods may be supported in UE-based, UE-assisted/E-SMLC-
based, eNB-assisted, and LMU-assisted/E-SMLC-based versions. Table 4.3-1
indicates which of these versions are supported in this version of the
specification for the standardised positioning methods.
Table 4.3-1: Supported versions of UE positioning methods
+----------+----------+----------+----------+----------+----------+ | Method | UE-based | UE-a | eNB- | LMU-a | SUPL | | | | ssisted, | assisted | ssisted/ | ^ | | | | E-SM | | E-SM | Note\ 3^ | | | | LC-based | | LC-based | | +==========+==========+==========+==========+==========+==========+ | A-GNSS | Yes | Yes | No | No | Yes | | | | | | | | | | | | | | ( | | | | | | | UE-based | | | | | | | and | | | | | | | UE-a | | | | | | | ssisted) | +----------+----------+----------+----------+----------+----------+ | Downlink | No | Yes | No | No | Yes | | ^Note1^ | | | | | (UE-a | | | | | | | ssisted) | +----------+----------+----------+----------+----------+----------+ | E-CID | No | Yes | Yes | No | Yes | | | | | | | (UE-a | | | | | | | ssisted) | +----------+----------+----------+----------+----------+----------+ | Uplink | No | No | No | Yes | No | +----------+----------+----------+----------+----------+----------+ | Sensor | Yes | Yes | No | No | No | +----------+----------+----------+----------+----------+----------+ | WLAN | Yes | Yes | No | No | Yes | +----------+----------+----------+----------+----------+----------+ | B | No | Yes | No | No | No | | luetooth | | | | | | +----------+----------+----------+----------+----------+----------+ | TBS | Yes | Yes | No | No | Yes | | ^ | | | | | (MBS) | | Note\ 2^ | | | | | | +----------+----------+----------+----------+----------+----------+ | NOTE 1: | | | | | | | This | | | | | | | includes | | | | | | | TBS | | | | | | | pos | | | | | | | itioning | | | | | | | based on | | | | | | | PRS | | | | | | | signals. | | | | | | | | | | | | | | NOTE 2: | | | | | | | In this | | | | | | | version | | | | | | | of the | | | | | | | speci | | | | | | | fication | | | | | | | only for | | | | | | | TBS | | | | | | | pos | | | | | | | itioning | | | | | | | based on | | | | | | | MBS | | | | | | | signals. | | | | | | | | | | | | | | NOTE 3: | | | | | | | This | | | | | | | shows | | | | | | | whether | | | | | | | the | | | | | | | pos | | | | | | | itioning | | | | | | | method | | | | | | | is | | | | | | | s | | | | | | | upported | | | | | | | by SUPL | | | | | | | ULP | | | | | | | [18]. | | | | | | +----------+----------+----------+----------+----------+----------+
Sensor, WLAN, Bluetooth, and TBS positioning methods based on MBS signals are
also supported in standalone mode, as described in the corresponding clauses.
### 4.3.1 Network-assisted GNSS Methods
These methods make use of UEs that are equipped with radio receivers capable
of receiving GNSS signals. In 3GPP specifications the term GNSS encompasses
both global and regional/augmentation navigation satellite systems.
Examples of global navigation satellite systems include GPS, Modernized GPS,
Galileo, GLONASS, and BeiDou Navigation Satellite System (BDS). Regional
navigation satellite systems include Quasi Zenith Satellite System (QZSS), and
NAVigation with Indian Constellation (NavIC), while the many augmentation
systems, listed in 8.1.1, are classified under the generic term of Space Based
Augmentation Systems (SBAS) and provide regional augmentation services.
In this concept, different GNSSs (e.g. GPS, Galileo, etc.) can be used
separately or in combination to determine the location of a UE.
The operation of the network-assisted GNSS methods is described in clause 8.1.
### 4.3.2 Downlink positioning
The downlink (OTDOA) positioning method makes use of the measured timing of
downlink signals received from multiple TPs at the UE. The UE measures the
timing of the received signals using assistance data received from the
positioning server, and the resulting measurements are used to locate the UE
in relation to the neighbouring TPs.
The operation of the downlink positioning method is described in clause 8.2.
### 4.3.3 Enhanced Cell ID Methods
In the Cell ID (CID) positioning method, the position of an UE is estimated
with the knowledge of its serving eNode B and cell. The information about the
serving eNode B and cell may be obtained by paging, tracking area update, or
other methods. Enhanced Cell ID (E‑CID) positioning refers to techniques which
use additional UE and/or E‑UTRAN radio resource and other measurements to
improve the UE location estimate.
Although E-CID positioning may utilise some of the same measurements as the
measurement control system in the RRC protocol, the UE generally is not
expected to make additional measurements for the sole purpose of positioning;
i.e., the positioning procedures do not supply a measurement configuration or
measurement control message, and the UE reports the measurements that it has
available rather than being required to take additional measurement actions.
For NB-IoT, when the UE goes to Idle state to perform positioning
measurements, the UE may be required to take additional measurement actions,
as specified in clause 7.1.3.
In cases with a requirement for close time coupling between UE and eNode B
measurements (e.g., TADV type 1 and UE Tx-Rx time difference), the eNode B
configures the appropriate RRC measurements and is responsible for maintaining
the required coupling between the measurements.The operation of the Enhanced
Cell ID method is described in clause 8.3.
### 4.3.4 Uplink positioning
The uplink (e.g., UTDOA) positioning method makes use of the measured timing
at multiple LMUs of uplink signals transmitted from UE. The LMU measures the
timing of the received signals using assistance data received from the
positioning server, and the resulting measurements are used to estimate the
location of the UE.
The operation of the Uplink positioning method is described in clause 8.5.
### 4.3.5 Barometric pressure sensor positioning
The barometric pressure sensor method makes use of barometric sensors to
determine the vertical component of the position of the UE. The UE measures
barometric pressure, optionally aided by assistance data, to calculate the
vertical component of its location or to send measurements to the positioning
server for position calculation.
This method should be combined with other positioning methods to determine the
3D position of the UE.
The operation of the Barometric pressure sensor positioning method is
described in clause 8.6.
### 4.3.6 WLAN positioning
The WLAN positioning method makes use of the WLAN measurements (AP identifiers
and optionally other measurements) and databases to determine the location of
the UE. The UE measures received signals from WLAN [29] access points,
optionally aided by assistance data, to send measurements to the positioning
server for position calculation. Using the measurement results and a
references database, the location of the UE is calculated.
Alternatively, the UE makes use of WLAN measurements and optionally WLAN AP
assistance data provided by the positioning server, to determine its location.
The operation of the WLAN positioning method is described in clause 8.7.
### 4.3.7 Bluetooth positioning
The Bluetooth positioning method makes use of Bluetooth measurements (beacon
identifiers and optionally other measurements) to determine the location of
the UE. The UE measures received signals from Bluetooth [30] beacons. Using
the measurement results and a references database, the location of the UE is
calculated. The Bluetooth methods may be combined with other positioning
methods (e.g. WLAN) to improve positioning accuracy of the UE.
The operation of the Bluetooth positioning method is described in clause 8.8.
### 4.3.8 TBS positioning
A Terrestrial Beacon System (TBS) consists of a network of ground-based
transmitters, broadcasting signals only for positioning purposes. The current
type of TBS positioning signals are the MBS (Metropolitan Beacon System)
signals [31] and Positioning Reference Signals (PRS) (TS 36.211 [32]). The UE
measures received TBS signals, optionally aided by assistance data, to
calculate its location or to send measurements to the positioning server for
position calculation.
The operation of the TBS positioning method based on MBS signals is described
in clause 8.9.
TBS positioning based on PRS signals is part of downlink (OTDOA) positioning
and described in clause 8.2.
### 4.3.9 Motion sensor positioning
The motion sensor method makes use of different sensors such as
accelerometers, gyros, magnetometers, to calculate the displacement of UE. The
UE estimates a relative displacement based upon a reference position and/or
reference time. UE sends a report comprising the determined relative
displacement which can be used to determine the absolute position.
This method should be used with other positioning methods for hybrid
positioning.
The operation of the sensor positioning method is described in clause 8.10.
# 5 E-UTRAN UE Positioning Architecture
Figure 5-1 shows the architecture in EPS applicable to positioning of a UE
with E-UTRAN access.
The MME receives a request for some location service associated with a
particular target UE from another entity (e.g., GMLC or UE) or the MME itself
decides to initiate some location service on behalf of a particular target UE
(e.g., for an IMS emergency call from the UE) as described in TS 23.271 [2].
The MME then sends a location services request to an E-SMLC. The E-SMLC
processes the location services request which may include transferring
assistance data to the target UE to assist with UE-based and/or UE-assisted
positioning and/or may include positioning of the target UE. For the Uplink
method, the E-SMLC processes the location services request which includes
transferring configuration data to the selected LMU(s). The E-SMLC then
returns the result of the location service back to the MME (e.g., a position
estimate for the UE and/or an indication of any assistance data transferred to
the UE). In the case of a location service requested by an entity other than
the MME (e.g., UE or E-SMLC), the MME returns the location service result to
this entity.
The SLP is the SUPL entity responsible for positioning over the user plane.
Further details of the relationship of the user-plane positioning entities to
the E-UTRAN control-plane positioning architecture are described in Annex B.
An eNodeB may control several TPs, such as remote radio heads, or PRS-only TPs
for support of PRS-based TBS.
Figure 5-1: UE Positioning Architecture applicable to E-UTRAN
## 5.1 UE Positioning Operations
To support positioning of a target UE and delivery of location assistance data
to a UE with E-UTRAN access in EPS, location related functions are distributed
as shown in the architecture in Figure 5-1 and as clarified in greater detail
in TS 23.271 [2]. The overall sequence of events applicable to the UE, E-UTRAN
and E-SMLC for any location service is shown in Figure 5.1-1.
Note that when the MME receives Location Service Request in case of the UE is
in ECM-IDLE state, the MME performs a network triggered service request as
defined in TS 23.401 [19] in order to establish a signalling connection with
the UE and assign a specific eNodeB. The UE is assumed to be in connected mode
before the beginning of the flow shown in the Figure 5.1-1; that is, any
signalling that might be required to bring the UE to connected mode prior to
step 1a is not shown. The signaling connection may, however, be later released
(e.g. by the eNode B as a result of signaling and data inactivity) while
positioning is still ongoing.
Figure 5.1-1: Location Service Support by E-UTRAN
1a. Either: the UE requests some location service (e.g. positioning or
delivery of assistance data) to the serving MME at the NAS level.
1b. Or: some entity in the EPC (e.g. GMLC) requests some location service
(e.g. positioning) for a target UE to the serving MME .
1c. Or: the serving MME for a target UE determines the need for some location
service (e.g. to locate the UE for an emergency call).
2\. The MME transfers the location service request to an E-SMLC.
3a. The E-SMLC instigates location procedures with the serving eNode B for the
UE -- e.g. to obtain positioning measurements or assistance data.
3b. In addition to step 3a or instead of step 3a, for downlink positioning the
E-SMLC instigates location procedures with the UE -- e.g. to obtain a location
estimate or positioning measurements or to transfer location assistance data
to the UE.
3c. For uplink positioning (e.g., UTDOA), in addition to performing step 3a,
the E-SMLC instigates location procedures with multiple LMUs for the target UE
-- e.g. to obtain positioning measurements.
4\. The E-SMLC provides a location service response to the MME and includes
any needed results -- e.g. success or failure indication and, if requested and
obtained, a location estimate for the UE.
5a. If step 1a was performed, the MME returns a location service response to
the UE and includes any needed results -- e.g. a location estimate for the UE.
5b. If step 1b was performed, the MME returns a location service response to
the EPC entity in step 1b and includes any needed results -- e.g. a location
estimate for the UE.
5c. If step 1c occurred, the MME uses the location service response received
in step 4 to assist the service that triggered this in step 1c (e.g. may
provide a location estimate associated with an emergency call to a GMLC).
Location procedures applicable to E-UTRAN occur in steps 3a, 3b and 3c in
Figure 5.1-2 and are defined in greater detail in this specification. Steps 1a
and 5a are also applicable to E-UTRAN support because of a capability to
tunnel signalling applicable to steps 3a and 3b. Other steps in Figure 5.1-2
are applicable only to the EPC and are described in greater detail and in TS
23.271 [2].
Steps 3a and 3b can involve the use of different position methods to obtain
location related measurements for a target UE and from these compute a
location estimate and possibly additional information like velocity.
Positioning methods supported in this release are summarized in clause 4.3 and
described in detail in clause 8.
The case that the eNode B functions as an LCS client is not supported in this
version of the specification.
## 5.2 E-UTRAN Positioning Operations
Separately from location service support for particular UEs, an E-SMLC may
interact with elements in the E-UTRAN in order to obtain measurement
information to help assist one or more position methods for all UEs. An E-SMLC
may also interact with elements in E-UTRAN to provide location assistance data
information for broadcasting.
### 5.2.1 Downlink Position Method Support
An E-SMLC can interact with any eNodeB reachable from any of the MMEs with
signaling access to the E-SMLC in order to obtain location related information
to support the downlink position method, including PRS-based TBS. The
information can include timing information for the TP in relation to either
absolute GNSS time or timing of other TPs and information about the supported
cells and TPs including PRS schedule.
Signalling access between the E-SMLC and eNodeB is via any MME with signalling
access to both the E-SMLC and eNodeB.
### 5.2.2 Uplink Position Method Support
An E-SMLC can interact with the Serving eNodeB for the UE in order to retrieve
target UE configuration information to support the uplink positioning method.
The configuration information may include information required by the LMUs in
order to obtain uplink time measurements; see clause 8.5.2. The E-SMLC can
indicate to the serving eNodeB the need to direct the UE to transmit SRS
signals (up to the maximum SRS bandwidth applicable for the carrier frequency)
for uplink positioning. If the requested resources are not available, the eNB
may assign other resources (or no resources e.g. if none are available) and
report the resource allocation to the E-SMLC.
The E-SMLC can also request multiple LMUs to perform uplink time measurements
and report the results.
### 5.2.3 Assistance Information Broadcast Support
An E-SMLC can interact with any eNodeB reachable from any of the MMEs with
signalling access to the E-SMLC in order to provide location assistance data
information for broadcasting. The information can include positioning System
Information Blocks (posSIBs) together with assistance information meta data
and broadcast periodicity.
Signalling access between the E-SMLC and eNodeB is via any MME with signalling
access to both the E-SMLC and eNodeB.
## 5.3 Functional Description of Elements Related to UE Positioning in E-UTRAN
### 5.3.1 User Equipment (UE)
The UE may transmit the needed signals for uplink-based UE Positioning
measurements and may make measurements of downlink signals from E-UTRAN and
other sources such as different GNSS and TBS systems, WLAN access points,
Bluetooth beacons, UE barometric pressure and motion sensors. The measurements
to be made will be determined by the chosen positioning method.
The UE may also contain LCS applications, or access an LCS application either
through communication with a network accessed by the UE or through another
application residing in the UE. This LCS application may include the needed
measurement and calculation functions to determine the UE\'s position with or
without network assistance. This is outside of the scope of this
specification.
The UE may also, for example, contain an independent positioning function
(e.g., GPS) and thus be able to report its position, independent of the
E-UTRAN transmissions. The UE with an independent positioning function may
also make use of assistance information obtained from the network.
### 5.3.2 eNode B
The eNode B is a network element of E-UTRAN that may provide measurement
results for position estimation and makes measurements of radio signals for a
target UE and communicates these measurements to an E-SMLC.
The eNode B makes its measurements in response to requests from the E-SMLC (on
demand or periodically).
The eNode B may configure the target UE to transmit periodic SRS with multiple
transmissions (see 5.2.2) during uplink positioning.
An eNode B may serve several TPs, including for example remote radio heads and
PRS-only TPs for PRS-based TBS positioning.
An eNode B may broadcast location assistance data information, received from
an E-SMLC, in positioning System Information messages.
### 5.3.3 Evolved Serving Mobile Location Centre (E-SMLC)
The E-SMLC manages the support of different location services for target UEs,
including positioning of UEs and delivery of assistance data to UEs. The
E-SMLC may interact with the serving eNode B for a target UE in order to
obtain position measurements for the UE, including uplink measurements made by
the eNode B and downlink measurements made by the UE that were provided to the
eNode B as part of other functions such as for support of handover. The E-SMLC
may also interact with the serving eNode B to indicate to the serving eNode B
the need to direct the UE to transmit SRS (see 5.2.2) signals to enable the
uplink positioning method and to acquire the target UE configuration data
needed by the LMUs to calculate the timing of these signals.
The E-SMLC will select a set of LMUs to be used for the UTDOA positioning. The
E-SMLC interacts with the selected LMUs to request timing measurements.
The E-SMLC may interact with a target UE in order to deliver assistance data
if requested for a particular location service, or to obtain a location
estimate if that was requested.
The E-SMLC may interact with multiple eNode B\'s to provide location
assistance data information for broadcasting. The assistance data information
for broadcast may optionally be segmented and/or ciphered by the E-SMLC. The
E-SMLC may also interact with MMEs to provide ciphering key data information
to the MME as described in greater detail in TS 23.271 [2].
For positioning of a target UE, the E-SMLC decides on the position methods to
be used, based on factors that may include the LCS Client type, the required
QoS, UE positioning capabilities, and eNode B positioning capabilities. The
E-SMLC then invokes these positioning methods in the UE and/or serving eNode
B. The positioning methods may yield a location estimate for UE-based position
methods and/or positioning measurements for UE-assisted and network-based
position methods. The E-SMLC may combine all the received results and
determine a single location estimate for the target UE (hybrid positioning).
Additional information like accuracy of the location estimate and velocity may
also be determined.
### 5.3.4 Location Measurement Unit (LMU)
The Location Measurement Unit (LMU) makes measurements and communicates these
measurements to an E-SMLC. All positioning measurements obtained by an LMU are
supplied to the E-SMLC that made the request.
A UE Positioning request may involve measurements by multiple LMUs.
# 6 Signalling protocols and interfaces
## 6.1 Network interfaces supporting positioning operations
### 6.1.1 General LCS control plane architecture
The general LCS control plane architecture in the EPS applicable to a target
UE with E-UTRAN access is defined in TS 23.271 [2].
### 6.1.2 LTE-Uu interface
The LTE-Uu interface, connecting the UE to the eNode B over the air, is used
as one of several transport links for the LTE Positioning Protocol.
### 6.1.3 S1-MME interface
The S1-MME interface between the eNode B and the MME is transparent to all UE-
positioning-related procedures. It is involved in these procedures only as a
transport link for the LTE Positioning Protocol.
For eNode B related positioning procedures, the S1-MME interface transparently
transports both positioning requests from the E-SMLC to the eNode B and
positioning results from the eNode B to the E-SMLC.
For delivery of broadcast location assistance data information, the S1-MME
interface transparently transports the assistance data information from the
E-SMLC to the eNode B for broadcasting and feedback information from the eNode
B to the E-SMLC. The S1-MME interface is also used by an MME to provide
ciphering keys to UEs for use in deciphering broadcast location assistance
data information which was ciphered by an E-SMLC.
### 6.1.4 SLs interface
The SLs interface, between the E-SMLC and the MME, is transparent to all UE
related and eNode B related positioning procedures. It is then used only as a
transport link for the LTE Positioning Protocols LPP and LPPa.
The SLs interface supports location sessions instigated by the MME as defined
in TS 23.271 [2]. LPP and LPPa transport are then supported as part of any
location session.
### 6.1.5 SLm interface
The SLm interface between the E-SMLC and an LMU is used for uplink
positioning. It is used to transport SLmAP protocol messages over the E-SMLC-
LMU interface.
Network sharing should be supported. (Details FFS).
## 6.2 UE-terminated protocols
### 6.2.1 LTE Positioning Protocol (LPP)
The LTE Positioning Protocol (LPP) is terminated between a target device (the
UE in the control-plane case or SET in the user-plane case) and a positioning
server (the E-SMLC in the control-plane case or SLP in the user-plane case).
It may use either the control- or user-plane protocols as underlying
transport. In this specification, only control plane use of LPP is defined.
User plane support of LPP is defined in [17] and [18].
LPP is a point to point positioning protocol with capabilities similar to
those in UMTS RRC (TS 25.331 [15]) and GERAN RRLP (TS 44.031 [16]). Whereas
RRLP supports positioning of a target MS accessing GERAN and RRC supports
positioning of a target UE accessing UTRAN, LPP supports positioning and
location related services (e.g. transfer of assistance data) for a target UE
accessing E-UTRAN. To avoid creating new positioning protocols for future
access types developed by 3GPP, and to enable positioning measurements for
terrestrial access types other than E‑UTRAN, LPP is in principle forward-
compatible with other access types, even though restricted to E-UTRAN access
in this specification.
LPP further supports the OMA user plane location solution SUPL 2.0, as defined
in the OMA SUPL 2.0 standards ([17], [18]), and is intended to be compatible
with the successor protocols of SUPL 2.0 as well.
LPP messages are carried as transparent PDUs across intermediate network
interfaces using the appropriate protocols (e.g., S1-AP over the S1-MME
interface, NAS/RRC over the Uu interface). The LPP protocol is intended to
enable positioning for LTE using a multiplicity of different position methods,
while isolating the details of any particular positioning method and the
specifics of the underlying transport from one another.
The protocol operates on a transaction basis between a target device and a
server, with each transaction taking place as an independent procedure. More
than one such procedure may be in progress at any given moment. An LPP
procedure may involve a request/response pairing of messages or one or more
\"unsolicited\" messages. Each procedure has a single objective (e.g.,
transfer of assistance data, exchange of LPP related capabilities, or
positioning of a target device according to some QoS and use of one or more
positioning methods). Multiple procedures, in series and/or in parallel, can
be used to achieve more complex objectives (e.g., positioning of a target
device in association with transfer of assistance data and exchange of LPP
related capabilities). Multiple procedures also enable more than one
positioning attempt to be ongoing at the same time (e.g., to obtain a coarse
location estimate with low delay while a more accurate location estimate is
being obtained with higher delay).
An LPP session is defined between a positioning server and the target device,
the details of its relation with transactions are described in clause 4.1.2 of
TS 36.355 [25].
A single LPP transaction may be realised as multiple procedures; e.g., a
single transaction for provision of assistance data might comprise several
Provide Assistance Data messages, with each such message constituting a
separate procedure (since there is no \"multiple unsolicited messages\"
procedure type).
For the 3GPP EPS Control Plane solution defined in TS 23.271 [2], the UE is
the target device and the E-SMLC is the server. For SUPL 2.0 support, the SUPL
Enabled Terminal (SET) is the target device and the SUPL Location Platform
(SLP) is the server. The protocol does not preclude the possibility of future
developments in control plane and user plane solutions (e.g., possible
successors of SUPL 2.0, as well as possible future 3GPP control plane
solutions).
All LPP operations and procedures are defined with respect to the target and
server, and thus the LPP operations and procedures defined here with respect
to a UE and an E-SMLC can also be viewed in this more generic context by
substituting any target for the UE and any server for the E-SMLC.
LPP further supports multiple positioning methods as defined in clause 4.3.
LPP supports hybrid positioning, in which two or more position methods are
used concurrently to provide measurements and/or a location estimate or
estimates to the server. LPP is forward compatible with the later addition of
other position methods in later releases (e.g., position methods associated
with other types of terrestrial access).
LPP also supports RRC broadcast of location assistance data information using
data types defined in relation to LPP which are embedded in positioning SIBs.
This enables an E-SMLC and a UE to support broadcast location assistance data
using the same data structures which are used for point to point location.
The operations controlled through LPP are described further in clause 7.1.
### 6.2.2 Radio Resource Control (RRC)
The RRC protocol is terminated between the eNode B and the UE. In addition to
providing transport for LPP messages over the Uu interface, it supports
transfer of measurements that may be used for positioning purposes through the
existing measurement systems specified in TS 36.331 [14].
The RRC protocol also supports broadcasting of location assistance data via
positioning System Information messages.
## 6.3 eNB-terminated protocols
### 6.3.1 LTE Positioning Protocol Annex (LPPa)
The LTE Positioning Protocol Annex (LPPa) carries information between the
eNode B and the E-SMLC. It is used to support the following positioning
functions:
\- E-CID cases where assistance data or measurements are transferred from the
eNode B to the E-SMLC;
\- data collection from eNodeBs for support of downlink OTDOA positioning;
\- retrieval of UE configuration data from the eNodeBs for support of uplink
(e.g., UTDOA) positioning;
\- exchange of information between E-SMLC and eNodeBs for the purpose of
assistance data broadcasting.
The LPPa protocol is transparent to the MME. The MME routes the LPPa PDUs
transparently based on a short Routing ID corresponding to the involved E-SMLC
node over S1 interface without knowledge of the involved LPPa transaction. It
carries the LPPa PDUs over S1 interface either in UE associated mode or non-UE
associated mode.
### 6.3.2 S1 Application Protocol (S1-AP)
The S1-AP protocol, terminated between the MME and the eNode B, is used as
transport for LPP and LPPa messages over the S1-MME interface. The S1-AP
protocol is also used to instigate and terminate eNode B related positioning
procedures.
## 6.4 Signalling between an E-SMLC and UE
### 6.4.1 Protocol Layering
Figure 6.4.1-1 shows the protocol layering used to support transfer of LPP
messages between an E-SMLC and UE. The LPP PDU is carried in NAS PDU between
the MME and the UE.
Figure 6.4.1-1: Protocol Layering for E-SMLC to UE Signalling
### 6.4.2 LPP PDU Transfer
Figure 6.4.2-1 shows the transfer of an LPP PDU between an E-SMLC and UE, in
the network- and UE-triggered cases. These two cases may occur separately or
as parts of a single more complex operation.
Figure 6.4.2-1: LPP PDU transfer between E-SMLC and UE (network- and UE-
triggered cases)
1\. Steps 1 to 4 may occur before, after, or at the same time as steps 5 to 8.
Steps 1 to 4 and steps 5 to 8 may also be repeated. Steps 1 to 4 are triggered
when the E-SMLC needs to send an LPP message to the UE as part of some LPP
positioning activity. The E-SMLC then sends an LCS-AP PDU to the MME carrying
an LPP PDU comprising the message.
2\. If the UE is in ECM-IDLE state (e.g. if the S1 connection was previously
released due to data and signalling inactivity), the MME performs a network
triggered service request as defined in TS 23.401 [19] in order to establish a
signalling connection with the UE and assign a serving eNode B.
3\. The MME includes a session identifier (a.k.a Routing identifier defined in
TS 24.171 [26]), which is associated with the positioning session between the
MME and E-SMLC, and the LPP PDU in the NAS Transport Message and then forwards
the NAS Transport Message to the serving eNode B in an S1AP Downlink NAS
Transport message. The MME need not retain state information for this
transfer; it can treat any response in step 7 as a separate non-associated
transfer.
4\. The eNode B forwards the NAS Transport Message to the UE in an RRC DL
Information Transfer message.
5\. Steps 5 to 8 are triggered when the UE needs to send an LPP PDU to the
E-SMLC as part of some LPP positioning activity. If the UE is in ECM-IDLE
state, the UE instigates a UE triggered service request as defined in TS
23.401 [19] in order to establish a signalling connection with the MME and
assign a serving eNode B.
6\. The UE includes the session identifier (a.k.a Routing identifier defined
in TS 24.171 [26]), which has been received in step 4, and an LPP PDU to the
serving eNode B in an RRC UL Information Transfer message.
7\. The eNode B forwards the NAS Transport Message to the MME in an S1AP
Uplink NAS Transport message.
8\. The MME forwards the LPP PDU to the E-SMLC in an LCS-AP PDU.
## 6.5 Signalling between an E-SMLC and eNode B
### 6.5.1 Protocol Layering
Figure 6.5.1-1 shows the protocol layering used to support transfer of LPPa
PDUs between an E-SMLC and eNode B.
The LPPa protocol is transparent to the MME. The MME routes the LPPa PDUs
transparently based on a short Routing ID which corresponds to the involved
E-SMLC node over the S1 interface without knowledge of the involved LPPa
transaction. It carries the LPPa PDUs over S1 interface either in UE
associated mode or non-UE associated mode.
Figure 6.5.1-1: Protocol Layering for E-SMLC to eNode B Signalling
### 6.5.2 LPPa PDU Transfer for UE Positioning
Figure 6.5.2-1 shows LPPa PDU transfer between an E-SMLC and eNode B to
support positioning of a particular UE.
Figure 6.5.2-1: LPPa PDU Transfer between an E-SMLC and eNode B for UE
Positioning
1\. Steps 1 to 3 are triggered when the E-SMLC needs to send an LPPa message
to the serving eNode B for a target UE as part of an LPPa positioning
activity. The E-SMLC then sends an LCS-AP PDU (as specified in TS 29.171 [27])
to the MME including the Correlation ID corresponding to the UE and carrying
an LPPa PDU comprising the message.
2\. If the UE is in ECM-IDLE state (e.g. if the S1 connection was previously
released due to data and signalling inactivity), the MME performs a network
triggered service request as defined in TS 23.401 [19] in order to establish a
signalling connection with the UE and assign a serving eNode B.
3\. The MME forwards the LPPa PDU to the serving eNode B in an S1AP Downlink
UE Associated LPPa Transport message over the S1 signalling connection
corresponding to the UE and includes the Routing ID related to the E-SMLC. The
MME need not retain state information for this transfer -- e.g. can treat any
response in step 4 as a separate non-associated transfer.
4\. Steps 4 and 5 are triggered when a serving eNode B needs to send an LPPa
message to the E-SMLC for a target UE as part of an LPPa positioning activity.
The eNode B then sends an LPPa PDU to the MME in an S1AP Uplink UE Associated
LPPa Transport message and includes the Routing ID received in step 3.
5\. The MME forwards the LPPa PDU to the E-SMLC associated with the Routing ID
received in step 4 in an LCS-AP PDU (as specified in TS 29.171 [27]) including
the Correlation ID corresponding to the UE. Steps 1 to 5 may be repeated.
### 6.5.3 LPPa PDU Transfer for Positioning Support
Figure 6.5.3-1 shows LPPa PDU transfer between an E-SMLC and eNodeB when
related to gathering data from the eNodeB for positioning support for all UEs.
Figure 6.5.3-1: LPPa PDU Transfer between an E-SMLC and eNodeB for obtaining
eNodeB Data
0\. An eNodeB may communicate with several TPs (including PRS-only TPs in case
of PRS-based TBS is supported) to configure TPs, obtain TP configuration
information, etc.\ NOTE: eNodeB-TP signalling and configuration is outside the
scope of this specification.
1\. Steps 1 and 2 are triggered when the E-SMLC needs to send an LPPa message
to an eNodeB to obtain data related to the eNodeB, and possibly associated
TPs. The E-SMLC determines an MME with access to the eNodeB and then sends an
LCS-AP PDU (as specified in TS 29.171 [27]) to the MME carrying an LPPa PDU,
the global identity of the eNodeB and the identity of the E-SMLC.
2\. The MME forwards the LPPa PDU to the identified eNode B in an S1AP
Downlink Non UE Associated LPPa Transport message and includes the Routing ID
related to the E-SMLC. The MME need not retain state information for this
transfer -- e.g. can treat any response in step 3 as a separate non-associated
transfer.
3\. Steps 3 and 4 are triggered when an eNode B needs to send an LPPa PDU to
an E-SMLC containing data applicable to the eNodeB, and possibly associated
TPs. The eNodeB determines an MME with access to the E-SMLC and then sends an
LPPa PDU to the MME in an S1AP Uplink Non UE Associated LPPa Transport
message. The eNodeB includes the Routing ID related to the E-SMLC received at
step 2.
4\. The MME forwards the LPPa PDU to the E-SMLC associated to the Routing ID
indicated in step 3 and includes the global identity of the eNodeB and the
identity of the E-SMLC in an LCS-AP PDU (as specified in TS 29.171 [27]).
Steps 1 to 4 may be repeated.
### 6.5.4 LPPa PDU Transfer for Assistance Information Broadcast
Figure 6.5.4-1 shows LPPa PDU transfer between an E-SMLC and eNode B to
support broadcast of assistance data.
Figure 6.5.4-1: LPPa PDU Transfer between an E-SMLC and eNodeB for providing
assistance information for broadcasting.
1\. Step 1 is triggered when the E-SMLC needs to send new or updated
assistance information to an eNodeB for broadcasting in positioning system
information messages. The E-SMLC determines an MME with access to the eNodeB
and then sends an LCS-AP PDU (as specified in TS 29.171 [27]) to the MME
carrying an LPPa PDU, the global identity of the eNodeB and the identity of
the E-SMLC.
2\. The MME forwards the LPPa PDU to the identified eNode B in an S1AP
Downlink Non UE Associated LPPa Transport message and includes the Routing ID
related to the E-SMLC. The MME need not retain state information for this
transfer.
Figure 6.5.4-2 shows LPPa PDU transfer between an eNode B and E-SMLC for
providing feedback to the E-SMLC on assistance data broadcasting.
Figure 6.5.4-2: LPPa PDU Transfer between an eNodeB and E-SMLC for providing
feedback on assistance data broadcasting.
1\. Step 1 is triggered when an eNode B needs to send an LPPa PDU to an E-SMLC
for providing feedback on assistance data broadcasting. Step 1 may only be
triggered if the procedure in Figure 6.5.4-1 has already been performed. The
eNodeB determines an MME with access to the E-SMLC and then sends an LPPa PDU
to the MME in an S1AP Uplink Non UE Associated LPPa Transport message. The
eNodeB includes the previously received Routing ID related to the E-SMLC
(Figure 6.5.4-1).
2\. The MME forwards the LPPa PDU to the E-SMLC associated to the Routing ID
indicated in step 1 and includes the global identity of the eNodeB and the
identity of the E-SMLC in an LCS-AP PDU (as specified in TS 29.171 [27]).
## 6.6 LMU-terminated protocols
### 6.6.1 SLm Application Protocol (SLmAP)
The SLmAP protocol, terminated between the E-SMLC and the LMU is used to
support the following functions:
\- delivery of target UE configuration data from the E-SMLC to the LMU
\- request positioning measurements from the LMU and delivery of positioning
measurements to the E-SMLC.
The SLmAP protocol is directly between the E-SMLC and the LMU.
## 6.7 Signalling between an E-SMLC and LMU
### 6.7.1 Protocol Layering
Figure 6.Y.1-1 shows the protocol layering used to support transfer of SLmAP
messages between an E-SMLC and LMU.
Figure 6.7.1-1: Protocol Layering for direct E-SMLC to LMU Signalling
# 7 General E-UTRAN UE Positioning procedures
## 7.1 General LPP procedures for UE Positioning
### 7.1.1 LPP Procedures
Positioning procedures in the E-UTRAN are modelled as transactions of the LPP
protocol using the procedures defined in this specification. A procedure
consists of a single operation of one of the following types:
\- Exchange of positioning capabilities;
\- Transfer of assistance data;
\- Transfer of location information (positioning measurements and/or position
estimate);
\- Error handling;
\- Abort.
Parallel transactions are permitted (i.e. a new LPP transaction may be
initiated, while another one is outstanding).
As described in clause 6.2.1, the protocol operates between a \"target\" and a
\"server\". In the control-plane context, these entities are the UE and E-SMLC
respectively; in the SUPL context they are the SET and the SLP. The terms
\"target\" and \"server\" are used in the flows in this clause to avoid
redundancy between the two versions of the positioning operations. A procedure
may be initiated by either the target or the server. Both target initiated and
server initiated procedures are supported.
### 7.1.2 Positioning procedures
#### 7.1.2.1 Capability transfer
A UE request for capability from E-SMLC or delivery of the E-SMLC capability
to the UE is not supported in this version of the specification.
Capabilities in an LPP context refer to the ability of a target or server to
support different position methods defined for LPP, different aspects of a
particular position method (e.g. different types of assistance data for
A-GNSS) and common features not specific to only one position method (e.g.
ability to handle multiple LPP transactions). These capabilities are defined
within the LPP protocol and transferred between the target and the server
using LPP transport.
The exchange of capabilities between a target and a server may be initiated by
a request or sent as \"unsolicited\" information. If a request is used, the
server sends an LPP Request Capabilities message to the target device with a
request for capability information. The target sends an LPP Provide
Capabilities message.
Figure 7.1.2.1‑1: LPP Capability Transfer procedure
1\. The server may send a request for the LPP related capabilities of the
target.
2\. The target transfers its LPP-related capabilities to the server. The
capabilities may refer to particular position methods or may be common to
multiple position methods.
LPP Capability Indication procedure is used for unsolicited capability
transfer.
Figure 7.1.2.1-2: LPP Capability Indication procedure
#### 7.1.2.2 Assistance data transfer
Assistance data may be transferred either by request or unsolicited. In this
version of the specification, assistance data delivery is supported only via
unicast transport from server to target.
Figure 7.1.2.2‑1: LPP Assistance Data Transfer procedure
1\. The target may send a request to the server for assistance data and may
indicate the particular assistance data needed.
2\. The server transfers assistance data to the target. The transferred
assistance data should match any assistance data requested in step 1.
3\. Optionally, the server may transfer additional assistance data to the
target in one or more additional LPP messages.
LPP Assistance Data Delivery procedure is used for unilateral assistance data
transfer.
Figure 7.1.2.2-2: LPP Assistance Data Delivery procedure
This procedure is unidirectional; assistance data are always delivered from
the server to the target.
#### 7.1.2.3 Location information transfer
The term \"location information\" applies both to an actual position estimate
and to values used in computing position (e.g., radio measurements or
positioning measurements). It is delivered either in response to a request or
unsolicited.
Figure 7.1.2.3‑1: LPP Location Information Transfer procedure
1\. The server may send a request for location information to the target, and
may indicate the type of location information needed and associated QoS.
2\. In response to step 1, the target transfers location information to the
server. The location information transferred should match the location
information requested in step 1.
3\. Optionally (e.g., if requested in step 1), the target in step 2 may
transfer additional location information to the server in one or more
additional LPP messages.
LPP Location Information Delivery procedure is used for unilateral location
information transfer.
NOTE: the LPP Location Information Delivery procedure can only be piggybacked
in the MO-LR request.
Figure 7.1.2.3‑2: LPP Location Information Delivery procedure
#### 7.1.2.4 Multiple transactions
Multiple LPP transactions may be in progress simultaneously between the same
target and server nodes, to improve flexibility and efficiency. However, no
more than one LPP procedure between a particular pair of target and server
nodes to obtain location information shall be in progress at any time for the
same position method.
In this example, the objective is to request location measurements from the
target, and the server does not provide assistance data in advance, leaving
the target to request any needed assistance data. A message flow is shown in
Figure 7.1.2.4-1.
Figure 7.1.2.4-1: Example of multiple LPP procedures
1\. The server sends a request to the target for positioning measurements.
2\. The target sends a request for particular assistance data.
3\. The server returns the assistance data requested in step 2.
4\. The target obtains and returns the location information (e.g., positioning
method measurements) requested in step 1.
#### 7.1.2.5 Sequence of Procedures
LPP procedures are not required to occur in any fixed order, in order to
provide greater flexibility in positioning. Thus, a UE may request assistance
data at any time in order to comply with a previous request for location
measurements from the E-SMLC; an E-SMLC may instigate more than one request
for location information (e.g., measurements or a location estimate) in case
location results from a previous request were not adequate for the requested
QoS; and the target device may transfer capability information to the server
at any time if not already performed.
Despite the flexibility allowed by LPP, it is expected that procedures will
normally occur in the following order:
1\. Capability Transfer;
2\. Assistance Data Transfer;
3\. Location Information Transfer (measurements and/or location estimate).
Specific examples for each positioning method are shown in clause 8.
#### 7.1.2.6 Error handling
The procedure is used to notify the sending endpoint by the receiving endpoint
that the receiving LPP message is erroneous or unexpected. This procedure is
bidirectional at the LPP level; either the target or the server may take the
role of either endpoint in Figure 7.1.2.6-1.
Figure 7.1.2.6-1: Error handling
1\. The target or server (indicated as \"Target/Server\" in Figure 7.1.2.6-1)
sends a LPP message to the other endpoint (indicated as \"Server/Target\").
2\. If the server or target (\"Server/Target\") detects that the receiving LPP
message is erroneous or unexpected, the server or target transfers error
indication information to the other endpoint (\"Target/Server\").
#### 7.1.2.7 Abort
The procedure is used to notify the other endpoint by one endpoint to abort an
ongoing procedure between the two endpoints. This procedure is bidirectional
at the LPP level; either the target or the server may take the role of either
endpoint in Figure 7.1.2.7-1.
Figure 7.1.2.7-1: Abort
1\. A LPP procedure is ongoing between target and server.
2\. If the server or target (\"Server/Target\") determines that the procedure
must be aborted, and then the server or target sends an LPP Abort message to
the other endpoint (\"Target/Server\") carrying the transaction ID for the
procedure.
### 7.1.3 UE positioning measurements in idle state for NB-IoT
NB-IoT UEs may perform measurements for some positioning methods only when in
idle state.
Figure 7.1.3-1 shows the general positioning procedure where the UE performs
positioning measurements in idle state.
Figure 7.1.3-1: UE positioning measurements in idle state.
1\. The E-SMLC is aware of the UE access type and/or coverage level if
applicable from the Location Service Request message received from the MME.
The E-SMLC may send a LPP Request Capabilities message to the UE to obtain the
UE positioning method capabilities from the UE, as described in clause
7.1.2.1.
2\. The UE sends its positioning method capabilities to the E-SMLC in a LPP
Provide Capabilities message, including an indication of position methods for
which the UE needs to make measurements in idle state.
3\. The E-SMLC may determine the assistance data required for the selected
position method or methods, and sends them in one or more LPP Provide
Assistance data messages to the UE, as described in clause 7.1.2.2. If an LPP
acknowledgement was requested, the UE sends an LPP acknowledgment for each
received LPP Provide Assistance data message to the E-SMLC.
4\. If the UE capabilities from step 2 indicate that idle state is required
for positioning measurements, the E-SMLC may allow additional response time to
the UE to obtain the location measurements, and sends one or more LPP Request
Location Information messages to the UE requesting positioning measurements or
a location estimate, and including the required response time, as described in
clause 7.1.2.3. For E-CID positioning method, when NRSRP/NRSRQ measurements
are requested the UE is requested to provide NRSRP/NRSRQ measurements for
intra-frequency neighbour cells and for inter-frequency neighbour cells. The
UE may use inter-frequency information in system information of the serving
cell specified in TS 36.331 [14] to decide on which inter-frequency cells to
measure.
5\. The UE sends an LPP acknowledgement for each received LPP Request Location
Information message to the E‑SMLC, if an LPP acknowledgement was requested at
step 4 but does not perform the requested measurements.
6\. The UE may finish any other activities in progress (e.g., SMS or data
transfer), and waits until the network releases or suspends the connection
(after a certain period of inactivity). The UE will then receive an RRC
connection release or suspend from the eNodeB due to the expiration of the
inactivity timer.
7\. When the UE has entered idle state, the UE performs the measurements
requested in step 4.
8\. Before the location measurements are to be sent to the E-SMLC, the UE
instigates a UE triggered service request or, when User Plane CIoT EPS
optimization applies, the Connection Resume procedure as defined in TS 23.401
[19], if the UE is not using Control Plane CIoT EPS Optimisation, in order to
establish a signalling connection with the MME. If the UE is using Control
Plane CIoT EPS Optimisation, procedures for Mobile Originated Data Transport
in Control Plane CIoT EPS optimisation as defined in TS 23.401 [19] are
performed by the UE to establish a signalling connection with the MME.
9\. When the LPP response time received in step 4 expires (or when location
measurements are available before expiry), the UE sends one or more LPP
Provide Location Information messages containing the requested location
measurements or location estimate obtained in step 7 to the E-SMLC.
## 7.2 General LPPa Procedures for UE Positioning
### 7.2.1 LPPa Procedures
Positioning and data acquisition transactions between an E-SMLC and eNodeB are
modelled by using procedures of the LPPa protocol. There are two types of LPPa
procedures:
\- UE associated procedure, i.e. transfer of information for a particular UE
(e.g. positioning measurements)
\- Non UE associated procedure, i.e. transfer of information applicable to the
eNodeB and associated TPs (e.g. eNB/TP timing differences)
Parallel transactions between the same E-SMLC and eNodeB are supported; i.e. a
pair of E-SMLC and eNodeB may have more than one instance of an LPPa procedure
in execution at the same time.
For possible extensibility, the protocol is considered to operate between a
generic \"access node\" (e.g. eNodeB) and a \"server\" (e.g. E-SMLC). A
procedure is only initiated by the server.
Figure 7.2.1-1: A single LPPa transaction
Figure 7.2.1.1-1 shows a single LPPa transaction. The transaction is
terminated in step 2 in the case of a non UE associated procedure. For a UE
associated procedure to gather information concerning the access node,
additional responses may be allowed (e.g. sending of updated information
periodically and/or whenever there is some significant change). In this case,
the transaction may be ended after some additional responses. In the LPPa
protocol, the described transaction may be realized by the execution of one
procedure defined as a request and a response, followed by one or several
procedures initiated by the eNB (each procedure defined as a single message)
to realize the additional responses. The Correlation ID provided by the MME in
the LCS-AP PDU encapsulating the LPPa PDU may be used by the E-SMLC to
identify the target UE positioning session.
### 7.2.2 LPPa transaction types
#### 7.2.2.1 Location information transfer
The term \"location information\" applies both to an actual position estimate
and to values used in computing position (e.g., radio measurements or
positioning measurements). It is delivered in response to a request.
Figure 7.2.2‑1: Location information transfer
1\. The server sends a request for location related information to the eNodeB,
and indicates the type of location information needed and associated QoS. The
request may refer to a particular UE.
2\. In response to step 1, the eNodeB transfers location related information
to the server. The location related information transferred should match the
location related information requested in step 1.
3\. If requested in step 1, the eNodeB may transfer additional location
related information to the server in one or more additional LPPa messages when
the positioning method is E-CID.
## 7.3 Service Layer Support using combined LPP and LPPa Procedures
As described in TS 23.271 [2], UE-positioning-related services can be
instigated from the EPC in the case of an NI-LR or MT-LR location service, or
from the UE in the case of an MO-LR location service. The complete sequence of
operations in the EPC is defined in TS 23.271 [2]. This clause defines the
overall sequences of operations that occur in the E-SMLC, E-UTRAN and UE as a
result of the EPC operations.
Some flows in this scenario apply only in particular situations (e.g., only
when the UE is in connected mode). The lower-layer details of such cases are
not shown in the diagrams; for instance, the process of paging a UE to bring
it to connected mode from idle is not explicitly indicated in these diagrams.
### 7.3.1 NI-LR and MT-LR Service Support
Figure 7.3.1-1 shows the sequence of operations for an NI-LR or MT-LR location
service, starting at the point where the MME initiates the service in the
E-SMLC.
Figure 7.3.1-1: UE Positioning Operations to support an MT-LR or NI-LR
1\. The MME sends a location request to the E-SMLC for a target UE and may
include associated QoS.
2\. The E-SMLC may obtain location related information from the UE and/or from
the serving eNode B. In the former case, the E-SMLC instigates one or more LPP
procedures to transfer UE positioning capabilities, provide assistance data to
the UE and/or obtain location information from the UE. The UE may also
instigate one or more LPP procedures after the first LPP message is received
from the E-SMLC (e.g., to request assistance data from the E-SMLC).
3\. If the E-SMLC needs location related information for the UE from the eNode
B, the E-SMLC instigates one or more LPPa procedures. Step 3 is not
necessarily serialised with step 2; if the E-SMLC and eNode B have the
information to determine what procedures need to take place for the location
service, step 3 could precede or overlap with step 2.
4\. The E-SMLC returns a location response to the MME with any location
estimate obtained as a result of steps 2 and 3.
### 7.3.2 MO-LR Service Support
Figure 7.3.2-1 shows the sequence of operations for an MO-LR service, starting
at the point where an LCS Client in the UE or the user has requested some
location service (e.g., retrieval of the UE\'s location or transfer of the
UE\'s location to a third party).
Figure 7.3.2-1: UE Positioning Operations to support an MO-LR
1\. The UE sends a NAS level MO-LR location service request message to the
MME. The MO-LR location service request message may carry an LPP PDU to
instigate one or more LPP procedures to transfer capabilities, request
assistance data and/or transfer location information (e.g. location
measurements).
2\. The MME sends a location request to the E-SMLC and includes any LPP PDU
received in step 1.
3\. The E-SMLC may obtain location related information from the UE and/or from
the serving eNode B. In the former case or if an immediate response is needed
to any LPP procedure instigated by the UE in step 1 (e.g., a request for
assistance data), the E-SMLC instigates one or more LPP procedures to transfer
UE positioning capabilities, provide assistance data to the UE and/or obtain
location information from the UE. The UE may also instigate further LPP
procedures after the first LPP message is received from the E-SMLC (e.g., to
request assistance data or to request further assistance data).
4\. If the E-SMLC needs location related information for the UE from the eNode
B, the E-SMLC instigates one or more LPPa procedures. Step 4 may also precede
step 3 or occur in parallel with it.
5\. The E-SMLC returns a location response to the MME with any location
estimate obtained as a result of steps 3 and 4.
6\. If the UE requested location transfer to a third party the MME transfers
the location received from the E-SMLC in step 5 to the third party as defined
in TS 23.271 [2].
7\. The MME sends a NAS level MO-LR location service response message to the
UE.
## 7.4 General SLmAP Procedures for UE Positioning
### 7.4.1 SLmAP Procedures
SLmAP includes positioning procedures, such as:
\- Measurement request
\- Measurement Update
\- Measurement Abort
#### 7.4.1.1 Measurement request
The measurement request procedure is used by the E-SMLC to obtain timing
measurement for a particular target UE from an LMU.
Figure 7.4.1-1: Measurement request
1\. The E-SMLC sends a measurement request to the LMU. The measurement request
identifies the UE to be positioned and contains the data (including SRS
transmission configuration) needed to obtain the measurements.
2\. In response to step 1, the LMU transfers UL RTOA measurements to the
E-SMLC.
#### 7.4.1.2 Measurement Update
The Measurement Update procedure is used by the E-SMLC to inform the LMU of a
change in the UE SRS transmission configuration during an ongoing SLmAP
measurement reporting transaction.
Figure 7.4.1.2-1: Measurement update
1\. An SLmAP Measurement reporting transaction is ongoing between the E-SMLC
and LMU.
2\. The E-SMLC determines that the SRS transmission configuration data
previously sent to the LMU is no longer valid. The E-SMLC sends a Measurement
Update to the LMU containing the new SRS transmission configuration data. The
E-SMLC shall not send a Measurement Update after receiving a Measurement
Response from the LMU.
3\. The LMU continues UL RTOA measurements using the updated SRS
configuration.
#### 7.4.1.3 Measurement Abort
The measurement abort procedure is used by the E-SMLC to abort an ongoing
SLmAP measurement reporting transaction.
Figure 7.4.1.3-1: Measurement abort
1\. An SLmAP Measurement reporting transaction is ongoing between the E-SMLC
and LMU.
2\. The E-SMLC determines that the transaction should be aborted (e.g. due to
UE detach or inter-MME handover). The E-SMLC sends a measurement abort to the
LMU and the ongoing SLmAP Measurement reporting transaction is abandoned. The
E-SMLC shall not send a Measurement Abort after receiving a Measurement
response from the LMU.
## 7.5 Service Layer Support using combined SLmAP and LPPa Procedures
### 7.5.1 NI-LR and MT-LR Service Support
Figure 7.5.1-1 shows the sequence of operations for an NI-LR and MT-LR,
starting at the point where the MME initiates the service in the E-SMLC.
Figure 7.5.1-1: UE Positioning Operations to support NI-LR or MT-LR
1\. The MME sends a location request to the E-SMLC for a target UE and may
include associated QoS.
2\. The E-SMLC obtains target UE configuration information from the serving
eNode B.
3\. If the E-SMLC needs measurement results for the UE from multiple LMUs, the
E-SMLC instigates SLmAP procedures to each LMU.
4\. The E-SMLC returns a location response to the MME with any location
estimate obtained as a result of steps 2 and 3.
### 7.5.2 MO-LR Service Support
Figure 7.5.2-1 shows the sequence of operations for an MO-LR service, starting
at the point where an LCS Client in the UE or the user has requested some
location service (e.g., retrieval of the UE\'s location or transfer of the
UE\'s location to a third party).
Figure 7.5.2-1: UE Positioning Operations to support an MO-LR
1\. The UE sends a NAS level MO-LR request to the MME.
2\. The MME sends a location request to the E-SMLC.
3\. The E-SMLC obtains target UE configuration information from the serving
eNode B.
4\. If the E-SMLC needs measurement results for the UE from multiple LMUs, the
E-SMLC instigates SLmAP procedures to each LMU.
5\. The E-SMLC returns a location response to the MME with any location
estimate obtained as a result of steps 2 and 3.
6\. If the UE requested location transfer to a third party LCS Client, the MME
transfers the location received from the E-SMLC in step 5 to the third party
as defined in TS 23.271 [2].
7\. The MME sends a NAS level MO-LR response to the UE carrying any location
estimate.
## 7.6 Procedures for Broadcast of Assistance Data
### 7.6.1 General
Positioning assistance data can be included in positioning System Information
Blocks (posSIBs) as described in TS 36.331 [14] and TS 36.355 [25]. The
posSIBs are carried in RRC System Information (SI) messages. The mapping of
posSIBs (assistance data) to SI messages is flexibly configurable and provided
to the UE in SIB1 (TS 36.331 [14]).
For each assistance data element, a separate posSIB-type is defined in TS
36.355 [25]. Each posSIB may be ciphered by the E‑SMLC using the 128-bit
Advanced Encryption Standard (AES) algorithm (with counter mode) as described
in TS 36.355 [25], either with the same or different ciphering key. The
posSIBs which exceed the maximum size limit defined in TS 36.331 [14] shall be
segmented by the E‑SMLC.
### 7.6.2 Broadcast Procedures
The general procedures for broadcast of positioning assistance data and
delivery of ciphering keys to UEs is described in TS 23.271 [2]. This clause
defines the overall sequences of operations that occur in the E-SMLC, E-UTRAN
and UE.
Figure 7.6.2-1: Procedures to support broadcast of assistance data.
1\. The E-SMLC sends an LPPa Assistance Data Information Control message to
the eNB with an indication to start broadcasting assistance information. The
message includes one or more System Information groups, where each group
contains the broadcast periodicity and one or more posSIB types together with
meta data. Each posSIB type may be ciphered and/or segmented at the E-SMLC.
The meta data may include an indication whether the posSIB type in the System
Information group is ciphered or not, as well as an indication of an
applicable GNSS type.
2\. The eNB includes the received System Information groups in RRC System
Information Messages and corresponding scheduling information in SIB1 as
described in [12]. The UE applies the system information acquisition procedure
according to [12] for acquiring the assistance data information that is
broadcasted.
3\. If the posSIB types were ciphered by the E-SMLC, the E-SMLC provides the
used ciphering keys, together with a validity time and validity area for each
key, to the MME using an LCS-AP Ciphering Key Data message described in TS
29.171 [27]. The MME returns a LCS-AP Ciphering Key Data Result message back
to the E-SMLC indicating whether the MME was able to successfully store the
ciphering data sets. The MME may then distribute successfully stored ciphering
keys and their validity times and validity areas to suitably subscribed UEs
using a mobility management message as described in TS 23.271 [2]. The E‑SMLC
repeats this procedure whenever a ciphering key changes.
4\. At any time after Step 1, the eNB may send a LPPa Assistance Information
Feedback message to the E-SMLC providing feedback on assistance information
broadcasting. The message may include an assistance information failure list
indicating that certain posSIB types could not be configured for broadcasting
by the eNB.
5\. If the assistance information in a System Information group changes, the
E-SMLC provides updated information in a LPPa Assistance Information Control
message.
6\. The eNB replaces the previously stored System Information groups with the
new information received at Step 5 and includes the new System Information
groups in RRC System Information Messages.
7\. If the E-SMLC wants to abort the broadcast of a System Information Group,
it sends a LPPa Assistance Information Control message to the eNB including an
indication to stop broadcasting the assistance information.
# 8 Positioning methods and Supporting Procedures
## 8.1 GNSS positioning methods
### 8.1.1 General
A navigation satellite system provides autonomous geo-spatial positioning with
either global or regional coverage. Augmentation systems, such as SBAS, are
navigation satellite systems that provide regional coverage to augment the
navigation systems with global coverage.
By definition, GNSS refers to satellite constellations that achieve global
coverage, however, in 3GPP specifications the term GNSS is used to encompass
global, regional, and augmentation satellite systems. The following GNSSs are
supported in this version of the specification:
\- GPS and its modernization [6], [7], [8]; (global coverage)
\- Galileo [9]; (global coverage)
\- GLONASS [10]; (global coverage)
\- Satellite Based Augmentation Systems (SBAS), including WAAS, EGNOS, MSAS,
and GAGAN [12]; (regional coverage)
\- Quasi-Zenith Satellite System (QZSS) [11]; (regional coverage)
\- BeiDou Navigation Satellite System (BDS) [28], [34]; (global coverage)
\- NAVigation with Indian Constellation (NavIC) [35]. (regional coverage)
Each global GNSS can be used individually or in combination with others,
including regional navigation systems and augmentation systems. When used in
combination, the effective number of navigation satellite signals would be
increased:
\- extra satellites can improve **availability** (of satellites at a
particular location) and results in an improved ability to work in areas where
satellite signals can be obscured, such as in urban canyons;
\- extra satellites and signals can improve **reliability** , i.e., with extra
measurements the data redundancy is increased, which helps identify any
measurement outlier problems;
\- extra satellites and signals can improve **accuracy** due to improved
measurement geometry and improved ranging signals from modernized satellites.
When GNSS is designed to inter-work with the E-UTRAN, the network assists the
UE GNSS receiver to improve the performance in several respects. These
performance improvements will:
\- reduce the UE GNSS start-up and acquisition times; the search window can be
limited and the measurements speed up significantly;
\- increase the UE GNSS sensitivity; positioning assistance messages are
obtained via E-UTRAN so the UE GNSS receiver can operate also in low SNR
situations when it is unable to demodulate GNSS satellite signals;
\- allow the UE to consume less handset power than with stand-alone GNSS; this
is due to rapid start-up times as the GNSS receiver can be in idle mode when
it is not needed;
\- allow the UE to compute its position with a better accuracy; RTK
corrections (for N-RTK) and GNSS physical models (for SSR/PPP) are obtained
via E-UTRAN so the UE can use these assistance data, together with its own
measurements, i.e., code and carrier phase measurements, to enable computation
of a position with a high accuracy.
The network-assisted GNSS methods rely on signalling between UE GNSS receivers
(possibly with reduced complexity) and a continuously operating GNSS reference
receiver network, which has clear sky visibility of the same GNSS
constellation as the assisted UEs. Two assisted modes are supported:
_\- UE-Assisted_ : The UE performs GNSS measurements (pseudo-ranges, pseudo
Doppler, carrier phase ranges, etc.) and sends these measurements to the
E-SMLC where the position calculation takes place, possibly using additional
measurements from other (non GNSS) sources;
_\- UE-Based_ : The UE performs GNSS measurements and calculates its own
position location, possibly using additional measurements from other (non
GNSS) sources and assistance data from the E-SMLC.
The assistance data content may vary depending on whether the UE operates in
UE-Assisted or UE-Based mode.
The assistance data signalled to the UE can be broadly classified into:
\- _data assisting the measurements_ : e.g. reference time, visible satellite
list, satellite signal Doppler, code phase, Doppler and code phase search
windows;
\- _data providing means for position calculation_ : e.g. reference time,
reference position, satellite ephemeris, code and carrier phase measurements
from a GNSS reference receiver or network of receivers;
\- _data increasing the position accuracy_ : e.g. satellite code biases,
satellite orbit corrections, satellite clock corrections, atmospheric models.
RTK residuals, gradients.
A UE with GNSS measurement capability may also operate in an autonomous
(standalone) mode. In autonomous mode the UE determines its position based on
signals received from GNSS without assistance from the network.
### 8.1.2 Information to be transferred between E-UTRAN Elements
This clause defines the information (e.g., assistance data, measurement data)
that may be transferred between E-UTRAN elements.
#### 8.1.2.1 Information that may be transferred from the E-SMLC to UE
Table 8.1.2.1-1 lists assistance data for both UE-assisted and UE-based modes
that may be sent from the E-SMLC to the UE.
NOTE: The provision of these assistance data elements and the usage of these
elements by the UE depend on the E‑UTRAN and UE capabilities, respectively.
Table 8.1.2.1-1: Information that may be transferred from the E-SMLC to UE
* * *
Assistance Data Reference Time Reference Location Ionospheric Models Earth
Orientation Parameters GNSS-GNSS Time Offsets Differential GNSS Corrections
Ephemeris and Clock Models Real-Time Integrity Data Bit Assistance Acquisition
Assistance Almanac UTC Models RTK Reference Station Information RTK Auxiliary
Station Data RTK Observations RTK Common Observation Information GLONASS RTK
Bias Information RTK MAC Correction Differences RTK Residuals RTK FKP
Gradients SSR Orbit Corrections SSR Clock Corrections SSR Code Bias SSR Phase
Bias SSR STEC Corrections SSR Gridded Correction SSR URA SSR Correction Points
* * *
##### 8.1.2.1.1 Reference Time
Reference Time assistance provides the GNSS receiver with coarse or fine GNSS
time information. The specific GNSS system times (e.g., GPS, Galileo, GLONASS,
BDS system time) shall be indicated with a GNSS ID.
In case of coarse time assistance only, the Reference Time provides an
estimate of the current GNSS system time (where the specific GNSS is indicated
by a GNSS ID). The E-SMLC should achieve an accuracy of +/- 3 seconds for this
time including allowing for the transmission delay between E-SMLC and UE.
In case of fine time assistance, the Reference Time provides the relation
between GNSS system time (where the specific GNSS is indicated by a GNSS ID)
and E-UTRAN air-interface timing.
##### 8.1.2.1.2 Reference Location
Reference Location assistance provides the GNSS receiver with an a priori
estimate of its location (e.g., obtained via Cell-ID, downlink positioning,
etc.) together with its uncertainty.
The geodetic reference frame shall be WGS-84, as specified in TS 23.032 [4].
##### 8.1.2.1.3 Ionospheric Models
Ionospheric Model assistance provides the GNSS receiver with parameters to
model the propagation delay of the GNSS signals through the ionosphere.
Ionospheric Model parameters as specified by GPS [6], Galileo [9], QZSS [11],
BDS [28], [34], and NavIC [35] may be provided.
##### 8.1.2.1.4 Earth Orientation Parameters
Earth Orientation Parameters (EOP) assistance provides the GNSS receiver with
parameters needed to construct the ECEF-to-ECI coordinate transformation as
specified by GPS [6].
##### 8.1.2.1.5 GNSS-GNSS Time Offsets
GNSS-GNSS Time Offsets assistance provides the GNSS receiver with parameters
to correlate GNSS time (where the specific GNSS is indicated by a GNSS-1 ID)
of one GNSS with other GNSS time (where the specific GNSS is indicated by a
GNSS-2 ID). GNSS-GNSS Time Offsets parameters as specified by GPS [6], Galileo
[9], GLONASS [10], QZSS [11], BDS [28], [34], and NavIC [35] may be provided.
##### 8.1.2.1.6 Differential GNSS Corrections
Differential GNSS Corrections assistance provides the GNSS receiver with
pseudo-range and pseudo-range-rate corrections to reduce biases in GNSS
receiver measurements as specified in [13]. The specific GNSS for which the
corrections are valid is indicated by a GNSS-ID.
##### 8.1.2.1.7 Ephemeris and Clock Models
Ephemeris and Clock Models assistance provides the GNSS receiver with
parameters to calculate the GNSS satellite position and clock offsets. The
various GNSSs use different model parameters and formats, and all parameter
formats as defined by the individual GNSSs are supported by the signalling.
##### 8.1.2.1.8 Real-Time Integrity
Real-Time Integrity assistance provides the GNSS receiver with information
about the health status of a GNSS constellation (where the specific GNSS is
indicated by a GNSS ID).
##### 8.1.2.1.9 Data Bit Assistance
Data Bit Assistance provides the GNSS receiver with information about data
bits or symbols transmitted by a GNSS satellite at a certain time (where the
specific GNSS is indicated by a GNSS ID). This information may be used by the
UE for sensitivity assistance (data wipe-off) and time recovery.
##### 8.1.2.1.10 Acquisition Assistance
Acquisition Assistance provides the GNSS receiver with information about
visible satellites, reference time, expected code-phase, expected Doppler,
search windows (i.e., code and Doppler uncertainty) and other information of
the GNSS signals (where the specific GNSS is indicated by a GNSS ID) to enable
a fast acquisition of the GNSS signals.
##### 8.1.2.1.11 Almanac
Almanac assistance provides the GNSS receiver with parameters to calculate the
coarse (long-term) GNSS satellite position and clock offsets. The various
GNSSs use different model parameters and formats, and all parameter formats as
defined by the individual GNSSs are supported by the signalling.
##### 8.1.2.1.12 UTC Models
UTC Models assistance provides the GNSS receiver with parameters needed to
relate GNSS system time (where the specific GNSS is indicated by a GNSS ID) to
Universal Coordinated Time. The various GNSSs use different model parameters
and formats, and all parameter formats as defined by the individual GNSSs are
supported by the signalling.
##### 8.1.2.1.13 RTK Reference Station Information
RTK Reference Station Information provides the GNSS receiver with the Earth-
Centered, Earth-Fixed (ECEF) coordinates of the Reference Station´s installed
antenna´s ARP, and the height of the ARP above the survey monument.
Additionally, this assistance data provides information about the antenna type
installed at the reference site.
NOTE: With the MAC N-RTK technique this assistance data is used to provide
information regarding the Master Reference Station (see clause 8.1.2.1a).
##### 8.1.2.1.14 RTK Auxiliary Station Data
RTK Auxiliary Station Data provides the GNSS receiver with the location for
all Auxiliary Reference Stations (see clause 8.1.2.1a) within the assistance
data. These values are expressed as relative geodetic coordinates (latitude,
longitude, and height) with respect to a Master Reference Station (see
subcaluse 8.1.2.1a) and based on the GRS80 ellipsoid. This type of assistance
data is relevant only with the MAC N-RTK technique [33].
##### 8.1.2.1.15 RTK Observations
RTK Observations provides the GNSS receiver with all primary observables
(pseudo-range, phase-range, phase-range rate (Doppler), and carrier-to-noise
ratio) generated at the Reference Station for each GNSS signal. The signal
generation from the reference station is in compliance with [33]: as an
example, the phase measurements of different signals in the same band must be
phased aligned. More examples can be found in [33].
The pseudo-range is the distance between the satellite and GNSS receiver
antennas, expressed in metres, equivalent to the difference of the time of
reception (expressed in the time frame of the GNSS receiver) and the time of
transmission (expressed in the time frame of the satellite) of a distinct
satellite signal.
The phase-range measurement is a measurement of the range between a satellite
and receiver expressed in units of cycles of the carrier frequency. This
measurement is more precise than the pseudo-range (of the order of
millimetres), but it is ambiguous by an unknown integer number of wavelengths.
The phase-range rate is the rate at which the phase-range between a satellite
and a GNSS receiver changes over a particular period of time.
The carrier-to-noise ratio is the ratio of the received modulated carrier
signal power to the noise power after the GNSS receiver filters.
NOTE: With the MAC N-RTK technique this assistance data is used to provide raw
observables recorded at the Master Reference Station (see clause 8.1.2.1a).
##### 8.1.2.1.16 RTK Common Observation Information
RTK Common Observation Information provides the GNSS receiver with common
information applicable to any GNSS, e.g. clock steering indicator. This
assistance data is always used together GNSS RTK Observations (see clause
8.1.2.1.15).
##### 8.1.2.1.17 GLONASS RTK Bias Information
RTK Bias Information provides the GNSS receiver with information which is
intended to compensate for the first-order inter-frequency phase-range biases
introduced by the reference receiver code-phase biases. This information is
applicable only for GLONASS FDMA signals. In the case that the MAC Network RTK
method is used, GLONASS RTK Bias Information defines the code-phase biases
related to the Master Reference Station [33].
##### 8.1.2.1.18 RTK MAC Correction Differences
RTK MAC Correction Differences provides the GNSS receiver with information
about ionospheric (dispersive) and geometric (non-dispersive) corrections
generated between a Master Reference Station and its Auxiliary Reference
Stations [33].
##### 8.1.2.1.19 RTK Residuals
RTK Residuals provides the GNSS receiver with network error models generated
for the interpolated corrections disseminated in Network RTK techniques. With
sufficient redundancy in the RTK network, the location server process can
provide an estimate for residual interpolation errors. Such quality estimates
may be used by the target UE to optimize the performance of RTK solutions. The
values may be considered by the target UE as a priori estimates only, with
sufficient tracking data available the target UE might be able to judge
residual geometric and ionospheric errors itself. According to [33], RTK
Residual error information should be transmitted every 10-60 seconds.
##### 8.1.2.1.20 RTK FKP Gradients
RTK FKP Gradients provides the GNSS receiver with horizontal gradients for the
geometric (troposphere and satellite orbits) and ionospheric signal components
in the observation space. According to [33], RTK FKP gradient information
should be typically transmitted every 10-60 seconds.
##### 8.1.2.1.21 SSR Orbit Corrections
SSR Orbit Corrections provides the GNSS receiver with parameters for orbit
corrections in radial, along -- track and cross -- track components. These
orbit corrections are used to compute a satellite position correction, to be
combined with satellite position ^­^calculated from broadcast ephemeris (see
clause 8.1.2.1.7).
NOTE 1: The orbit corrections define an offset between the broadcast ephemeris
orbit and a satellite antenna reference point (ARP) to which the other
corrections refer. The exact definition of the reference point along the
satellite antenna is implementation-defined by the Network and use of all
corrections together shall yield a consistent solution.
NOTE 2: The UE should not apply any additional corrections for the Satellite
Antenna Phase Center (APC) such as Phase Center Offset (PCO) or Phase Center
Variation (PCV) corrections. The Network may form the SSR corrections to
minimise the impact of Satellite APC effects on the UE.
##### 8.1.2.1.22 SSR Clock Corrections
SSR Clock Corrections provides the GNSS receiver with parameters to compute
the GNSS satellite clock correction applied to the broadcast satellite clock
(see clause 8.1.2.1.7). A polynomial of order 2 describes the clock
differences for a certain time period: clock offset, drift, and drift rate.
##### 8.1.2.1.23 SSR Code Bias
SSR Code Bias provides the GNSS receiver with the Code Biases that must be
added to the pseudo range measurements of the corresponding code signal to get
corrected pseudo ranges. SSR Code Bias contains absolute values, but also
enables the alternative use of Differential Code Biases by setting one of the
biases to zero. A UE can consistently use signals for which a code bias is
transmitted. It is not reliable for a UE to use a signal without retrieving a
corresponding code bias from the assistance data message.
##### 8.1.2.1.24 SSR Phase Bias
SSR Phase Bias provides the GNSS receiver with the GNSS signal phase bias that
are added to the carrier phase measurements of the corresponding signal to get
corrected phase ranges. An indicator used to count events when phase bias is
discontinuous is provided. An optional indicator is also provided to indicate
whether fixed, widelane fixed or float PPP-RTK positioning modes are supported
on a per signal basis.
NOTE 1: On the UE side, phase bias corrections of appropriate type are needed
to restore the integer nature of the phase ambiguities in PPP-RTK. Their
absence will affect the quality of the positioning solution and prevent a fast
convergence time.
NOTE 2: PPP-RTK Fixed position mode corresponds to the UE fixing the carrier
phase ambiguity to an integer value. The PPP-RTK Widelane Fixed positioning
mode corresponds to forming the widelane combination of carrier phase
measurements and fixing the resulting ambiguity as an integer value. In PPP-
RTK Float positioning mode the carrier phase ambiguity is not treated as an
integer value.
NOTE 3: The SSR Phase Bias values must be consistent with a satellite yaw
angle of zero as per [36].
##### 8.1.2.1.25 SSR STEC Corrections
SSR STEC Corrections provides the GNSS receiver with the parameters to compute
the ionosphere slant delay correction based on a variable order polynomial on
a per satellite basis and applied to the code and phase measurements.
##### 8.1.2.1.26 SSR Gridded Correction
SSR Gridded Corrections provides the GNSS receiver with STEC residuals and
Troposphere delays at a series of correction points and expressed as
hydrostatic and wet vertical delays.
NOTE: The final ionosphere slant delay (STEC) consists of the polynomial part
provided in SSR STEC Correction and the residual part provided in SSR Gridded
Corrections.
##### 8.1.2.1.27 SSR URA
SSR URA provides the receiver with information about the estimated accuracy of
the corrections for each satellite.
##### 8.1.2.1.28 SSR Correction Points
The SSR Correction Points provides a list of correction point coordinates or
an array of correction points (\"grid\") for which the SSR Gridded Corrections
are valid.
#### 8.1.2.1a Recommendations for grouping of assistance data to support
different RTK service levels
This clause provides recommendations for the different high-accuracy GNSS
service levels: RTK, N-RTK, PPP and PPP-RTK.
The high-accuracy GNSS methods can be classified as:
_\- Single base RTK service:_ RTK is a technique that uses carrier-based
ranging measurements i.e., phase-range to improve the positioning accuracy in
a differential approach. The basic concept is to reduce and remove errors
common to a Reference Station, with known position, and UE pair. When only
pseudo ranges (code-based measurements) are used to compute the UE location,
this method is known as DGNSS (Differential GNSS).
Table 8.1.2.1a-1: Single base RTK service: Specific information that may be
transferred from the E-SMLC to the UE
* * *
Assistance Data RTK Reference Station Information RTK Observations RTK Common
Observation Information GLONASS RTK Bias Information (if GLONASS data is
transmitted) Ephemeris and Clock (if UE did not acquire the navigation
message)
* * *
_\- Non-Physical Reference Station Network RTK service_ : In this approach the
target UE receives synthetic observations from a fictitious Reference Station.
The Network RTK software at the location server is performing the error
estimation and creates a virtual Reference Station close to the initial
location of the target device (provided a priori to the location server). The
target UE interprets and uses the data just as if it had come from a single,
real Reference Station. Additionally, the target UE can also receive network
information such as RTK Network Residuals (see clause 8.1.2.1.19) or even FKP
gradients (see clause 8.1.2.1.20).
Table 8.1.2.1a-2: Non-Physical Reference Station Network RTK service: Specific
information that may be transferred from the E-SMLC to the UE
* * *
Assistance Data RTK Reference Station Information RTK Observations RTK Common
Observation Information GLONASS RTK Bias Information (if GLONASS data is
transmitted) RTK Residuals RTK FKP Gradients Ephemeris and Clock (if UE did
not acquire the navigation message)
* * *
_\- MAC Network RTK service:_ In MAC network RTK, a group of Reference
Stations are used and one of them is chosen as a Master station. The other
stations are then called Auxiliary stations. In this service, the location
server sends full raw observations and coordinate information for a single
Reference Station, the Master Station. For all Auxiliary stations in the
network (or a suitable subset of stations) the information is provided to the
UE in a highly compact form: their reduced ambiguity-levelled observations,
coordinate differences (to the Master Station observations and coordinates),
and network residuals. Two Reference Stations are said to be on a common
ambiguity level if the integer ambiguities for each phase range (satellite-
receiver pair) have been removed (or adjusted) so that the integer ambiguities
cancel when double-differences (involving two receivers and two satellites)
are formed during processing. The maintenance of a common ambiguity level at a
specific set of stations rather than across the whole GNSS network will lead
to a grouping in network clusters or subnetworks of all ambiguity-levelled
Reference Stations. If one network has only one subnetwork, this indicates
that an ambiguity level throughout the whole network is established. When
subnetworks are predefined, the assistance data can be broadcast to all UEs
located in the assigned sub-network. More details on the usage of subnetworks
can be found in [33].
Table 8.1.2.1a-3: MAC Network RTK service: Specific Information that may be
transferred from the E-SMLC to the UE
* * *
Assistance Data RTK Reference Station Information RTK Auxiliary Station Data
RTK Observations RTK Common Observation Information GLONASS RTK Bias
Information (if GLONASS data is transmitted) RTK MAC Correction Differences
RTK Residuals Ephemeris and Clock (if UE did not acquire the navigation
message)
* * *
_\- FKP Network RTK service:_ With the concept of FKP, horizontal gradients of
distance-dependent errors like ionosphere, troposphere and orbits are derived
from a network of GNSS Reference Stations and transmitted to a target device
together with raw or correction data of a corresponding Reference Station
(physical or non-physical). The target UE may use the gradients to compute the
effect of the distance-dependent errors for its own position.
Table 8.1.2.1a-4: FKP Network RTK service: Information that may be transferred
from the E-SMLC to the UE
* * *
Assistance Data RTK Reference Station Information RTK Observations RTK Common
Observation Information GLONASS RTK Bias Information (if GLONASS data is
transmitted) RTK Residuals RTK FKP Gradients Ephemeris and Clock (if UE did
not acquire the navigation message)
* * *
_\- PPP service_ : This concept uses precise satellite orbit and clock
parameters derived from global networks of Reference Stations as well as
atmospheric models to perform single station positioning [33]. Compared to RTK
and Network RTK, PPP is not a differential technique as there is no baseline
limitation. When the orbits and clocks assistance data elements are provided
in real-time, with no latency, the method is called Real-Time PPP.
Table 8.1.2.1a-5: SSR PPP service: Information that may be transferred from
the E-SMLC to the UE
* * *
Assistance Data SSR Orbit Corrections SSR Clock corrections SSR Code Bias
Ephemeris and Clock (if UE did not acquire the navigation message)
* * *
\- _PPP-RTK service_ : This concept uses precise satellite orbits and clock
parameters, the satellite signal biases derived from global networks of
Reference Stations as well as ionosphere and troposphere corrections to
perform single station positioning [36]. Therefore, PPP-RTK services
compensate the global and local corrections for a more accurate location
information. Compared to PPP, PPP-RTK requires the UE to be located within the
region covered by the ionosphere and troposphere corrections.
Table 8.1.2.1a-6: SSR PPP-RTK service: Information that may be transferred
from the E-SMLC to the UE
* * *
Assistance Data SSR Orbit Corrections SSR Clock corrections SSR Code Bias
Ephemeris and Clock (if UE did not acquire the navigation message) SSR Phase
Bias SSR STEC Corrections SSR Gridded Correction SSR URA SSR Correction Points
* * *
#### 8.1.2.2 Information that may be transferred from the UE to the E-SMLC
The information that may be signalled from the UE to the E-SMLC is listed in
table 8.1.2.2-1.
Table 8.1.2.2-1: Information that may be transferred from the UE to the E-SMLC
* * *
Information UE‑assisted UE‑based/standalone Latitude/Longitude/Altitude,
together with uncertainty shape No Yes Velocity, together with uncertainty
shape No Yes Reference Time, possibly together with GNSS-E-UTRAN time
association and uncertainty Yes Yes Indication of used positioning methods in
the fix No Yes Code phase measurements, also called pseudorange Yes No Doppler
measurements Yes No Carrier phase measurements, also called Accumulated Delta
Range (ADR) Yes No Carrier-to-noise ratio of the received signal Yes No
Measurement quality parameters for each measurement Yes No Additional, non-
GNSS related measurement information Yes No
* * *
##### 8.1.2.2.1 GNSS Measurement Information
The GNSS measurement information reported from the UE to the E-SMLC depends on
the GNSS mode (i.e., UE-based, autonomous (standalone), or UE-assisted).
###### 8.1.2.2.1.1 UE-based mode
In UE-based or standalone mode, the GNSS receiver reports the latitude,
longitude and possibly altitude, together with an estimate of the location
uncertainty, if available.
If requested by the E-SMLC and supported by the UE, the GNSS receiver may
report its velocity, possibly together with an estimate of the uncertainty, if
available.
If requested by the E-SMLC and supported by the UE, the GNSS receiver may
report the relation between GNSS system time (where the specific GNSS is
indicated by a GNSS ID; the specific GNSS system time may be selected by the
UE) and E-UTRAN air-interface timing. This information may be used by the
E-SMLC to assist other UEs in the network.
The UE should also report an indication of which GNSSs and possibly other
location methods have been used to calculate a fix.
###### 8.1.2.2.1.2 UE-assisted mode
In UE-assisted mode, the GNSS receiver reports the Code Phase and Doppler
measurements together with associated quality estimates. These measurements
enable the E-SMLC to calculate the location of the UE, possibly using other
measurements and data.
If requested by the E-SMLC and supported by the UE, the GNSS receiver may
report Carrier Phase measurements (also called Accumulated Delta Range),
together with associated quality measurements, if available.
If requested by the E-SMLC and supported by the UE, the GNSS receiver may
report the relation between GNSS system time (where the specific GNSS is
indicated by a GNSS ID; the specific GNSS system time may be selected by the
UE) and E-UTRAN air-interface timing. This information may be used by the
E-SMLC to assist other UEs in the network.
##### 8.1.2.2.2 Additional Non-GNSS Related Information
Additional non-GNSS measurements performed by E‑UTRAN or UE may be used by the
E-SMLC or UE to calculate or verify a location estimate. This information may
include downlink positioning measurements, path loss and signal strength
related measurements, etc.
### 8.1.3 Assisted-GNSS Positioning Procedures
#### 8.1.3.1 Capability Transfer Procedure
The Capability Transfer procedure for Assisted-GNSS positioning is described
in clause 7.1.2.1.
##### 8.1.3.1.1 Void
#### 8.1.3.2 Assistance Data Transfer Procedure
The purpose of this procedure is to enable the E-SMLC to provide assistance
data to the UE (e.g., as part of a positioning procedure) and the UE to
request assistance data from the E-SMLC (e.g., as part of a positioning
procedure or for autonomous self location (i.e., UE determines its own
location)). In the case of high-accuracy GNSS positioning techniques (e.g.,
RTK), the E-SMLC can provide unsolicited periodic assistance data to the UE
and the UE can request periodic assistance data from the E-SMLC.
##### 8.1.3.2.1 E-SMLC initiated Assistance Data Delivery
Figure 8.1.3.2.1-1 shows the Assistance Data Delivery operations for the
network-assisted GNSS method when the procedure is initiated by the E-SMLC.
Figure 8.1.3.2.1-1: E‑SMLC-initiated Assistance Data Delivery Procedure
(1) The E-SMLC determines that assistance data needs to be provided to the UE
(e.g., as part of a positioning procedure) and sends an LPP Provide Assistance
Data message to the UE. This message may include any of the GNSS assistance
data defined in clause 8.1.2.1.
##### 8.1.3.2.1a E-SMLC initiated Periodic Assistance Data Delivery
The Periodic Assistance Data Delivery procedure allows the server to provide
unsolicited periodic assistance data to the target and is shown in Figure
8.1.3.2.1a-1.
NOTE: In this version of the specification, periodic assistance data delivery
is supported for HA GNSS (e.g., RTK) positioning only.
Figure 8.1.3.2.1a-1: LPP Periodic Assistance data delivery procedure
(1) The E-SMLC determines that assistance data needs to be provided to the UE
and sends an LPP Provide Assistance Data message to the UE. This message
includes information to identify the type of periodic assistance data and a
duration for ending the assistance data delivery.
(2) When the first periodic message is available, the E-SMLC sends an
unsolicited LPP Provide Assistance Data message to the UE containing the
periodic assistance data announced in step (1).
(3) The server may continue to send further LPP Provide Assistance Data
messages to the target containing the periodic assistance data announced in
step (1) when each additional periodicity condition occurs. When the duration
for ending the periodic assistance data transfer occurs, the last LPP Provide
Assistance Data message transferred indicates the end of transaction.
Additionally, the session can be ended on request by the UE or by the E-SMLC
with the help of an Abort message.
##### 8.1.3.2.2 UE initiated Assistance Data Transfer
Figure 8.1.3.2.2-1 shows the Assistance Data Transfer operations for the
network-assisted GNSS method when the procedure is initiated by the UE.
Figure 8.1.3.2.2-1: UE-initiated Assistance Data Transfer Procedure
(1) The UE determines that certain A-GNSS assistance data are desired (e.g.,
in case the UE requires its own location with autonomous self location or as
part of a positioning procedure when the E-SMLC provided assistance data are
not sufficient for the UE to fulfill the request) and sends a LPP Request
Assistance Data message to the E-SMLC. This request includes an indication of
which specific A-GNSS assistance data are requested for each GNSS, possibly
together with additional information (e.g., for which GNSS signal types, or
satellites, or times the assistance is requested, etc.). Additional
information concerning the UE\'s approximate location and serving and
neighbour cells may also be provided in the Request Assistance Data message
and/or in an accompanying Provide Location Information message to help the
E-SMLC provide appropriate assistance data. This additional data may include
the UE\'s last known location if available, the cell IDs of the UE serving
eNodeB and possibly neighbour eNodeBs, as well as E-CID measurements.
(2) The E-SMLC provides the requested assistance data in a LPP Provide
Assistance Data message, if available at the E-SMLC. The entire set of
assistance data may be delivered in one or several LPP messages, e.g., one
message per GNSS. In this case, this step may be repeated by the E-SMLC
several times. If any of the UE requested assistance data in step (1) are not
provided in step 2, the UE shall assume that the requested assistance data are
not supported, or currently not available at the E-SMLC. If none of the UE
requested assistance data in step (1) can be provided by the E-SMLC, return
any information that can be provided in an LPP message of type Provide
Assistance Data which includes a cause indication for the not provided
assistance data.
##### 8.1.3.2.2a UE initiated Periodic Assistance Data Transfer
Figure 8.1.3.2.2a-1 shows the Periodic Assistance Data Transfer operations for
the high-accuracy GNSS methods (e.g., RTK) when the procedure is initiated by
the UE.
NOTE: In this version of the specification, periodic assistance data transfer
is supported for HA GNSS (e.g., RTK) positioning only.
Figure 8.1.3.2.2a-1: UE-initiated Periodic Assistance Data Transfer Procedure
(1) The UE determines that certain periodic A-GNSS assistance data, specific
to one or more RTK-service levels, are desired and sends a LPP Request
Assistance Data message to the E-SMLC. This request includes an indication of
which specific A-GNSS assistance data are requested for each GNSS. Additional
information like desired periodicity for sending the assistance data and a
duration for ending the periodic session shall also be provided in the LPP
Request Assistance Data message.
(2) The E-SMLC responds with a LPP Provide Assistance Data message to the UE.
If the UE request can be supported, the message contains information which may
confirm or redefine the type of assistance data or periodicity parameters
requested at step (1). This response indicates the end of the control
transaction.
(3) When available, the E-SMLC provides unsolicited the requested assistance
data in a LPP Provide Assistance Data message to the UE. If any of the
requested assistance data in step (1) or redefined in step (2) are not
provided in step (3), the UE shall assume that the requested assistance data
are not supported, or currently not available at the E-SMLC.
(4) The E-SMLC may transmit one or more additional LPP Provide Assistance Data
messages to the UE containing further periodic assistance data confirmed or
redefined in step (2). When the duration for ending the periodic assistance
data transfer occur, the last LPP Provide Assistance Data message transferred
indicates the end of the transaction. Additionally, the session can be ended
on request by the UE or by the E-SMLC with the help of an Abort message.
#### 8.1.3.3 Location Information Transfer Procedure
The purpose of this procedure is to enable the E-SMLC to request position
measurements or location estimate from the UE, or to enable the UE to provide
location measurements to the E-SMLC for position calculation (e.g., in case of
basic self location where the UE requests its own location).
##### 8.1.3.3.1 E-SMLC initiated Location Information Transfer Procedure
Figure 8.1.3.3.1-1 shows the Location Information Transfer operations for the
network-assisted GNSS method when the procedure is initiated by the E-SMLC.
Figure 8.1.3.3.1-1: E-SMLC-initiated Location Information Transfer Procedure
(1)The E-SMLC sends a LPP Request Location Information message to the UE for
invocation of A-GNSS positioning. This request includes positioning
instructions such as the GNSS mode (UE-assisted, UE-based, UE-based preferred
but UE-assisted allowed, UE-assisted preferred, but UE-based allowed,
standalone), positioning methods (GPS, Galileo, GLONASS, BDS, NavIC, etc. and
possibly non-GNSS methods, such as downlink positioning or E-CID), specific UE
measurements requested if any, such as fine time assistance measurements,
velocity, carrier phase, multi-frequency measurements, and quality of service
parameters (accuracy, response time).
(2) The UE performs the requested measurements and possibly calculates its own
location. The UE sends an LPP Provide Location Information message to the
E-SMLC before the Response Time provided in step (1) elapsed. If the UE is
unable to perform the requested measurements, or if the Response Time provided
in step 1 elapsed before any of the requested measurements have been obtained,
the UE returns any information that can be provided in an LPP message of type
Provide Location Information which includes a cause indication for the not
provided location information.
##### 8.1.3.3.2 UE-initiated Location Information Delivery Procedure
Figure 8.1.3.3.2-1 shows the Location Information delivery operations for the
UE-assisted GNSS method when the procedure is initiated by the UE.
Figure 8.1.3.3.2-1: UE-initiated Location Information Delivery Procedure
(1) The UE sends an LPP Provide Location Information message to the E-SMLC.
The Provide Location Information message may include any UE measurements (GNSS
pseudo-ranges, carrier phase-ranges, and other measurements) already available
at the UE.
## 8.2 Downlink positioning method
### 8.2.1 General
In the downlink positioning method, the UE position is estimated based on
measurements taken at the UE of downlink radio signals from multiple TPs
(possibly including PRS-only TPs from a PRS-based TBS), along with knowledge
of the geographical coordinates of the measured TPs and their relative
downlink timing.
The specific positioning techniques used to estimate the UE\'s location from
this information are beyond the scope of this specification.
### 8.2.2 Transferred information
This clause defines the information that may be transferred between E-SMLC and
UE/eNodeB.
#### 8.2.2.1 Assistance Data that may be transferred from the E-SMLC to UE
The following assistance data may be transferred from the E-SMLC to the UE:
\- Physical cell IDs (PCIs), global cell IDs (GCIs),and TP IDs of candidate
TPs for measurement;
\- Timing relative to the serving (reference) TP of candidate TPs;
\- PRS configuration of candidate TPs.
#### 8.2.2.2 Assistance Data that may be transferred from the eNodeB to E-SMLC
The following assistance data may be transferred from the eNodeB to the
E-SMLC:
\- PCI, GCI, and TP IDs of the TPs served by the eNodeB;
\- Timing information of TPs served by the eNodeB;
\- PRS configuration of the TPs served by the eNodeB;
\- Geographical coordinates of the TPs served by the eNodeB.
An eNodeB may provide assistance data relating only to itself and served TPs
via LPPa signalling, although assistance data from several eNodeBs and served
TPs may be acquired through other mechanisms, see NOTE below.
NOTE: The assistance data described in this clause are not necessarily
transferred only from the eNodeB, and in some deployment options may not be
delivered from the eNodeB at all; they may also be delivered to the E-SMLC
through OA&M or other mechanisms external to the E-UTRAN. In addition, in
cases where assistance data are delivered from the eNodeB, how the eNodeB
acquires the data is outside the scope of this specification.
#### 8.2.2.3 Location Information that may be transferred from the UE to
E-SMLC
The information that may be signalled from UE to the E-SMLC is listed in Table
8.2.2.3-1. The individual UE measurements are defined in TS 36.214 [20].
Table 8.2.2.3-1: Information that may be transferred from UE to the E-SMLC
* * *
Information Measurements Downlink Measurement Results List for EUTRA Physical
cell IDs Global cell IDs TP IDs Downlink timing measurements Information used
to compute a reference time corresponding to the downlink timing measurements
to allow correlation of downlink timing measurements with motion information
independently obtained from motion sensors Delta SFN for each neighbour cell
* * *
### 8.2.3 Downlink Positioning Procedures
The procedures described in this clause support downlink positioning
measurements obtained by the UE and provided to the E-SMLC using LPP, or
obtained by the eNode B and provided to the E-SMLC using LPPa.
In this version of the specification only the UE-assisted downlink positioning
is supported.
#### 8.2.3.1 Capability Transfer Procedure
The Capability Transfer procedure for Downlink positioning is described in
clause 7.1.2.1.
##### 8.2.3.1.1 Void
#### 8.2.3.2 Assistance Data Transfer Procedure
##### 8.2.3.2.1 Assistance Data Transfer between E-SMLC and UE
The purpose of this procedure is to enable the E-SMLC to provide assistance
data to the UE (e.g., as part of a positioning procedure) and the UE to
request assistance data from the E-SMLC (e.g., as part of a positioning
procedure or for autonomous self location (i.e., UE determines its own
location)).
##### 8.2.3.2.1.1 E-SMLC-initiated assistance data delivery
Figure 8.2.3.2.1.1-1 shows the Assistance Data Delivery operations for the
downlink positioning method when the procedure is initiated by the E-SMLC.
Figure 8.2.3.2.1.1-1: E‑SMLC-initiated Assistance Data Delivery Procedure
(1) The E-SMLC determines that assistance data needs to be provided to the UE
(e.g., as part of a positioning procedure) and sends an LPP Provide Assistance
Data message to the UE. This message may include any of the downlink
positioning assistance data defined in clause 8.2.2.1.
##### 8.2.3.2.1.2 UE-initiated assistance data transfer
Figure 8.2.3.2.1.2-1 shows the Assistance Data Transfer operations for the
downlink positioning method when the procedure is initiated by the UE.
Figure 8.2.3.2.1.2-1: UE-initiated Assistance Data Transfer Procedure
(1) The UE determines that certain downlink positioning assistance data are
desired (e.g., in case the UE requires its own location with autonomous self
location, or as part of a positioning procedure when the E-SMLC-provided
assistance data are not sufficient for the UE to fulfill the request) and
sends an LPP Request Assistance Data message to the E-SMLC. This request
includes an indication of which specific downlink assistance data are
requested. Additional information concerning the UE\'s approximate location
and serving and neighbour cells may also be provided in the Request Assistance
Data message and/or in an accompanying Provide Location Information message to
help the E-SMLC provide appropriate assistance data. This additional data may
include the UE\'s last known location if available, the cell IDs of the UE
serving eNodeB and possibly neighbour eNodeBs, as well as E-CID measurements.
(2) The E-SMLC provides the requested assistance in an LPP Provide Assistance
Data message, if available at the E-SMLC. If any of the UE requested
assistance data in step (1) are not provided in step 2, the UE shall assume
that the requested assistance data are not supported, or currently not
available at the E-SMLC. If none of the UE requested assistance data in step
(1) can be provided by the E-SMLC, return any information that can be provided
in an LPP message of type Provide Assistance Data which includes a cause
indication for the not provided assistance data.
##### 8.2.3.2.2 Assistance Data Delivery between E-SMLC and eNodeB
The purpose of this procedure is to enable the eNodeB to provide assistance
data to the E-SMLC, for subsequent delivery to the UE using the procedures of
clause 8.2.3.2.1 or for use in the calculation of positioning estimates at the
E-SMLC.
##### 8.2.3.2.2.1 Void
##### 8.2.3.2.2.2 E-SMLC-initiated assistance data delivery to the E-SMLC
Figure 8.2.3.2.2.2-1 shows the Assistance Data Delivery operation from the
eNodeB to the E-SMLC for the downlink positioning method, in the case that the
procedure is initiated by the E-SMLC.
Figure 8.2.3.2.2.2-1: E-SMLC-initiated Assistance Data Delivery Procedure
(1) The E-SMLC determines that certain downlink positioning assistance data
are desired (e.g., as part of a periodic update or as triggered by OAM) and
sends an LPPa OTDOA INFORMATION REQUEST message to the eNode B. This request
includes an indication of which specific downlink assistance data are
requested.
(2) The eNode B provides the requested assistance in an LPPa OTDOA INFORMATION
RESPONSE message, if available at the eNode B. If the eNode B is not able to
provide any information, it returns an OTDOA INFORMATION FAILURE message
indicating the cause of the failure.
#### 8.2.3.3 Location Information Transfer Procedure
The purpose of this procedure is to enable the E-SMLC to request position
measurements from the UE, or to enable the UE to provide location measurements
to the E-SMLC for position calculation (e.g., in case of basic self location
where the UE requests its own location).
##### 8.2.3.3.1 E-SMLC-initiated Location Information Transfer
Figure 8.2.3.3.1-1 shows the Location Information Transfer operations for the
downlink positioning method when the procedure is initiated by the E-SMLC.
Figure 8.2.3.3.1-1: E-SMLC-initiated Location Information Transfer Procedure
(1) The E-SMLC sends an LPP Request Location Information message to the UE.
This request includes indication of downlink measurements requested, including
any needed measurement configuration information, and required response time.
(2) The UE obtains downlink measurements as requested in step 1. The UE then
sends an LPP Provide Location Information message to the E-SMLC, before the
Response Time provided in step (1) elapsed, and includes the obtained downlink
measurements. If the UE is unable to perform the requested measurements, or
the Response Time elapsed before any of the requested measurements were
obtained, the UE returns any information that can be provided in an LPP
message of type Provide Location Information which includes a cause indication
for the not provided location information.
##### 8.2.3.3.2 UE-initiated Location Information Delivery procedure
Figure 8.2.3.3.2-1 shows the Location Information Delivery procedure
operations for the downlink positioning method when the procedure is initiated
by the UE.
Figure 8.2.3.3.2-1: UE-initiated Location Information Delivery Procedure.
(1) The UE sends an LPP Provide Location Information message to the E-SMLC.
The Provide Location Information message may include any UE downlink
measurements already available at the UE.
## 8.3 Enhanced cell ID positioning methods
### 8.3.1 General
In the Cell ID (CID)-based method, the UE position is estimated with the
knowledge of the geographical coordinates of its serving eNodeB. Enhanced Cell
ID (E-CID) positioning refers to techniques which use additional UE and/or
E‑UTRAN radio resource related measurements to improve the UE location
estimate. For E-UTRAN access, these measurements may include [20, 21]:
UE measurements (TS 36.214 [20], TS 36.302 [21]):
\- Reference signal received power (RSRP);
\- Reference Signal Received Quality (RSRQ);
\- UE Rx -- Tx time difference;
\- GERAN RSSI;
\- UTRAN CPICH RSCP;
\- UTRAN CPICH Ec/Io;
\- WLAN RSSI.
E-UTRAN measurements (TS 36.214 [20], TS 36.302 [21]):
\- eNB Rx -- Tx time difference
\- Timing Advance (T~ADV~):
\- Type1: T~ADV~ = (eNB Rx -- Tx time difference) + (UE Rx -- Tx time
difference)
\- Type2: T~ADV~ = eNB Rx -- Tx time difference;
\- Angle of Arrival (AoA).
Various techniques exist to use these measurements to estimate the location of
the UE. The specific techniques are beyond the scope of this specification.
### 8.3.2 Information to be transferred between E-UTRAN Elements
This clause defines the information (e.g., measurement data) that may be
transferred between E-UTRAN elements.
#### 8.3.2.1 Information that may be transferred from the E-SMLC to UE
UE-assisted Enhanced Cell-ID location does not require any assistance data to
be transferred from the E-SMLC to the UE.
UE-Based Enhanced Cell-ID location is not supported in this version of the
specification.
#### 8.3.2.2 Information that may be transferred from the UE to E-SMLC
The information that may be signalled from UE to the E-SMLC is listed in table
8.3.2.2-1.
Table 8.3.2.2-1: Information that may be transferred from UE to the E-SMLC
* * *
Information UE‑assisted Evolved Cell Global Identifier (ECGI)/Physical Cell ID
Yes Reference signal received power (RSRP) Yes Reference Signal Received
Quality (RSRQ) Yes UE Rx -- Tx time difference Yes
* * *
#### 8.3.2.3 Information that may be transferred from the eNodeB to E-SMLC
The information that may be signalled from eNodeB to the E-SMLC is listed in
table 8.3.2.3-1.
Table 8.3.2.3-1: Information that may be transferred from eNB to the E-SMLC
* * *
Information  
Timing Advance (T~ADV~)  
Angle of Arrival (AoA)  
E-UTRA Measurement Results List:  
\- Evolved Cell Global Identifier (ECGI)/Physical Cell ID \- Reference signal
received power (RSRP) \- Reference Signal Received Quality (RSRQ) GERAN
Measurement Results List:  
\- Base Station Identity Code (BSIC) \- ARFCN of Base Station Control Channel
(BCCH) \- Received Signal Strength Indicator (RSSI) UTRA Measurement Results
List:  
\- UTRAN Physical ID \- Common Pilot Channel Received Signal Code Power (RSCP)
\- Common Pilot Channel Ec/Io WLAN Measurement Results List:  
\- WLAN Received Signal Strength Indicator (RSSI) \- SSID \- BSSID \- HESSID
\- Operating Class \- Country Code \- WLAN Channel(s) \- WLAN Band
* * *
### 8.3.3 Downlink E-CID Positioning Procedures
The procedures described in this clause support E-CID related measurements
obtained by the UE and provided to the E-SMLC using LPP. The term \"downlink\"
is intended to indicate that from the E-SMLC perspective the involved
measurements are provided by the UE; this set of procedures might also be
considered as \"UE-assisted, E-SMLC-based E-CID\".
#### 8.3.3.1 Capability Transfer Procedure
The Capability Transfer procedure for E-CID positioning is described in clause
7.1.2.1.
##### 8.3.3.1.1 Void
#### 8.3.3.2 Assistance Data Delivery Procedure
Assistance data delivery is not required for UE- or eNB-assisted forms of
E-CID positioning.
#### 8.3.3.3 Location Information Transfer Procedure
The purpose of this procedure is to enable the E-SMLC to request position
measurements from the UE, or to enable the UE to provide location measurements
to the E-SMLC for position calculation (e.g., in case of basic self location
where the UE requests its own location).
##### 8.3.3.3.1 E-SMLC-initiated Location Information Transfer
Figure 8.3.3.3.1-1 shows the Location Information Transfer operations for the
E-CID method when the procedure is initiated by the E-SMLC.
Figure 8.3.3.3.1-1: E-SMLC-initiated Location Information Transfer Procedure.
(1) The E-SMLC sends a LPP Request Location Information message to the UE for
invocation of E-CID positioning. This request includes the E-CID measurements
requested by the E-SMLC and supported by the UE as listed in Table 8.3.2.2-1
together with a required response time.
(2) The UE sends an LPP Provide Location Information message to the E-SMLC and
reports the requested measurements that are available in the UE before the
Response Time provided in step (1) elapsed. If the requested measurements are
not available, or if the Response Time provided in step 1 elapsed before any
of the requested measurements have been obtained, the UE returns any
information that can be provided in an LPP message of type Provide Location
Information which includes a cause indication for the not provided location
information.
##### 8.3.3.3.2 UE-initiated Location Information Delivery procedure
Figure 8.3.3.3.2-1 shows the Location Information Delivery procedure
operations for the E-CID method when the procedure is initiated by the UE.
Figure 8.3.3.3.2-1: UE-initiated Location Information Delivery Procedure.
(1) The UE sends an LPP Provide Location Information message to the E-SMLC.
The Provide Location Information message may include any UE measurements
already available at the UE.
### 8.3.4 Uplink E-CID Positioning Procedures
The procedures described in this clause support E-CID related measurements
obtained by the eNodeB and provided to the E-SMLC using LPPa. The term
\"uplink\" is intended to indicate that from the E-SMLC point of view, the
involved measurements are provided by the eNodeB; this set of procedures might
also be considered as \"eNB-assisted E-CID\". An example of this uplink E-CID
positioning method is AoA+T~ADV~.
NOTE: Uplink E-CID positioning not using T~ADV~ type 1 does not require LCS
support in the UE and therefore, works also with legacy UEs (assuming that any
involved measurements delivered in RRC are supported by the legacy UEs).
#### 8.3.4.1 Position Capability Transfer Procedure
The position capability transfer procedure is not applicable to uplink E-CID
positioning not using T~ADV~ type 1. For uplink E-CID positioning using T~ADV~
type 1, the Capability Transfer procedure for E-CID positioning is described
in clause 7.1.2.1.
#### 8.3.4.2 Assistance Data Delivery Procedure
The assistance data delivery procedure is not applicable to uplink E-CID
positioning.
#### 8.3.4.3 Position Measurement Procedure
The purpose of this procedure is to enable the E-SMLC to request position
measurements from the eNodeB.
##### 8.3.4.3.1 E-SMLC-initiated Position Measurement
Figure 8.3.4.3.1-1 shows the Position Measurement operations for the uplink
E-CID method when the procedure is initiated by the E-SMLC.
Figure 8.3.4.3.1-1: E-SMLC-initiated Position Measurement Procedure
(1) The E-SMLC sends an LPPa E-CID MEASUREMENT INITIATION REQUEST message to
the eNodeB. This request includes indication of E-CID measurements requested
and whether the result is expected only once or periodically.
(2) If the E-SMLC in step (1) requested UE measurements (i.e., RSRP, RSRQ
measurements), or if the eNodeB requires UE measurements associated with the
measurements requested by the E-SMLC (e.g., T~ADV~ type 1, which requires a UE
Tx-Rx time difference measurement to be delivered from the UE to the eNodeB),
the eNodeB may configure the UE to report the measurement information
requested as specified in TS 36.331 [14].
(3) If the result is expected only once and the eNodeB initiates at least one
of the E-CID measurements as requested, the eNodeB sends an LPPa E-CID
MEASUREMENT INITIATION RESPONSE to the E-SMLC, which includes the obtained
E-CID measurements. If the result is expected periodically and the eNodeB is
able to initiate at least one of the E-CID measurements as requested, the
eNodeB sends an LPPa E-CID MEASUREMENT INITIATION RESPONSE to the E-SMLC,
which does not include any result. The eNodeB reports then the obtained
measurements by initiating the E-CID Measurement Report procedure, with the
requested periodicity. If the eNodeB is unable to initiate any of the
requested measurements as requested from the E-SMLC, or is unable to instigate
any of the required RRC procedures to obtain the requested measurements from
the UE, the eNodeB sends an LPPa E-CID MEASUREMENT INITIATION FAILURE message
providing the error reason. If the failure occurs during a periodic reporting,
the eNodeB sends an LPPa E-CID MEASUREMENT FAILURE INDICATION message.
## 8.4 Downlink Supporting Procedures
### 8.4.1 General
An E-SMLC is enabled to request downlink location related information from the
E-UTRAN in order to support downlink positioning. LPPa is employed for this
between the E-SMLC and each eNodeB reachable from the E-SMLC via any of the
MMEs with signalling access to the E-SMLC.
### 8.4.2 Location Related Information
The information that may be transferred from an eNodeB to the E-SMLC to
support downlink positioning is listed in table 8.4.2-1.
Table 8.4.2-1: Information that may be transferred from an eNodeB to the
E-SMLC for the Downlink Position Method Support
* * *
Information UE‑assisted Global cell IDs (ECGIs) of eNodeB Yes Physical cell
IDs (PCIs) of eNodeB Yes TP IDs Yes PRS Scheduling Yes If synchronized: SFN
initialization time of TP relative to time reference Yes
* * *
### 8.4.3 Location Related Information Acquisition Procedure
The purpose of this procedure is to enable an E-SMLC to request downlink
location related information from an eNodeB.
##### 8.4.3.1 On Demand Procedure
Figure 8.4.3.1-1 shows the location information acquisition operation for the
downlink positioning method when information is needed on demand in real time.
Figure 8.4.3.1-1: E-SMLC-initiated On Demand Procedure for Location
Information Applicable to Downlink
(1) The E-SMLC sends an LPPa message of type Request Location Information to
the eNodeB. This request includes an indication of the downlink related
information requested.
(2) The eNodeB obtains the information requested in step 1 using previously
configured or stored information and/or real time measurements in the case of
a request for timing information where recent timing information is not
already available. The eNodeB then sends an LPPa message of type Provide
Location Information to the E-SMLC. If the eNodeB is unable to obtain any of
the requested information, the eNodeB sends an LPPa failure message, providing
the error reason.
##### 8.4.3.2 Triggered Procedure
Figure 8.4.3.2-1 shows the location information acquisition operation for the
downlink positioning method when information is needed on a triggered basis.
Figure 8.4.3.2-1: E-SMLC-initiated Triggered Procedure for Location
Information Applicable to Downlink
(1) The E-SMLC sends an LPPa message of type Request Location Information to
the eNodeB. This request includes an indication of the downlink related
information requested, triggering criteria for responses (e.g. periodic time
interval).
(2) In response to step 1, the eNodeB obtains the information requested using
already available information and/or real time measurements. The eNodeB then
sends an LPPa message of type Provide Location Information to the E-SMLC
carrying this information. If the eNodeB is unable to obtain the requested
information partly or completely, the eNodeB sends an LPPa failure message.
(3) When the trigger criteria provided in step 1 indicate the need for a new
report the eNodeB obtains the latest information. The eNodeB then sends a
further LPPa message of type Provide Location Information to the E-SMLC
containing this information If the eNodeB is unable to obtain the requested
information, partly or completely, the eNodeB sends an LPPa failure message.
## 8.5 Uplink positioning method
### 8.5.1 General
In the uplink positioning method, the UE position is estimated based on timing
measurements of uplink radio signals taken at different LMUs , along with
knowledge of the geographical coordinates of the LMUs. The time required for a
signal transmitted by a UE to reach a LMU is proportional to the length of the
transmission path between the UE and the LMU. A set of LMUs is tasked to
sample the UE signal at the same time.
The specific of any uplink positioning methods or techniques used to estimate
the UE\'s location from these measurements are beyond the scope of this
specification.
In order to obtain uplink measurements, the LMUs need to know the
characteristics of the SRS signal transmitted by the UE for the time period
required to calculate uplink measurement. These characteristics should be
static over the periodic transmission of SRS during the uplink measurements.
Hence, the E-SMLC will indicate to the serving eNodeB the need to direct the
UE to transmit SRS (see 5.2.2) signals for uplink positioning. It is up to the
eNodeB to make the final decision on resources to be assigned and to
communicate this configuration information back to the E-SMLC so that E-SMLC
can configure the LMUs. The eNB may decide (e.g., in case no resources are
available) to configure no resources for the UE and report the empty resource
configuration to the E-SMLC.
### 8.5.2 Transferred information
This clause defines the information that may be transferred between E-SMLC and
eNodeB/LMU.
UTDOA measurements are performed on Sounding Reference Signals (SRS),
configured as periodic SRS involving multiple SRS transmissions.
NOTE: The tables in clauses 8.5.2.1, 8.5.2.2, and 8.5.2.3 will be updated if
needed.
#### 8.5.2.1 Configuration Data that may be transferred from the eNodeB to the
E-SMLC
The following configuration data may be transferred from the eNodeB to the
E-SMLC:
+----------------------------------+----------------------------------+ | Parameter Category | Parameters | +==================================+==================================+ | General | PCI of PCell ^Note\ 1^ | | | | | | UL-EARFCN of PCell | | | | | | _Timing advance measurement for | | | the UE in PCell [36.214] | | | ^Note\ 3^_ | +----------------------------------+----------------------------------+ | SRS | For each serving cell in which | | | SRS is configured ^Note2^: | | | | | | - PCI | | | | | | - UL-EARFCN | | | | | | - UL cyclic prefix | | | | | | - UL system bandwidth of the | | | cell | | | | | | - Cell-specific SRS bandwidth | | | configuration | | | _srs-BandwidthConfig_ [36.211] | | | | | | - UE-specific SRS bandwidth | | | configuration _srs-Bandwidth_ | | | [36.211] | | | | | | - number of antenna ports for | | | SRS transmission | | | _srs-AntennaPort_ [36.211] | | | | | | - frequency domain position | | | [36.211] | | | | | | - SRS frequency hopping | | | bandwidth configuration | | | [36.211] | | | | | | - SRS-Cyclic shift [36.211] | | | | | | - Transmission comb [36.211] | | | | | | - SRS configuration index | | | [36.213] | | | | | | - _MaxUpPt_ , used for TDD only | | | [36.211] | | | | | | - _Group-hopping-enabled_ | | | [36.211] | | | | | | _\- | | | deltaSS_ , | | | parameter [36.211, 5.5.1.3], | | | included when SRS sequence | | | hopping is used [36.211, | | | 5.5.1.4] and not included | | | otherwise | +----------------------------------+----------------------------------+ | Note 1: Indicating PCell should | | | not imply configuring SRS on the | | | PCell | | | | | | Note 2: Multiple serving cells | | | are possible for a UE configured | | | with CA | | | | | | Note 3: Used for search window | | | calculation | | +----------------------------------+----------------------------------+
#### 8.5.2.2 Configuration Data that may be transferred from the E-SMLC to LMU
The following configuration data may be transferred from the E-SMLC to LMU:
+----------------------------------+----------------------------------+ | Parameter Category | Parameters | +==================================+==================================+ | General | Search window | | | parameters ^Note\ 2^: | | | | | | - expected propagation delay, | | | T, corresponding to distance | | | between LMU and PCell, | | | | | | - delay uncertainty ∆ | +----------------------------------+----------------------------------+ | SRS | For each serving cell in which | | | SRS is configured and to be | | | measured by LMU ^Note1^: | | | | | | - PCI | | | | | | - UL-EARFCN | | | | | | - UL cyclic prefix | | | | | | - UL system bandwidth of the | | | cell | | | | | | - Cell-specific SRS bandwidth | | | configuration | | | _srs-BandwidthConfig_ [36.211] | | | | | | - UE-specific SRS bandwidth | | | configuration _srs-Bandwidth_ | | | [36.211] | | | | | | - number of antenna ports for | | | SRS transmission | | | _srs-AntennaPort_ [36.211] | | | | | | - frequency domain position | | | [36.211] | | | | | | - SRS frequency hopping | | | bandwidth configuration | | | [36.211] | | | | | | - SRS-Cyclic shift [36.211] | | | | | | - Transmission comb [36.211] | | | | | | - SRS configuration index | | | [36.213] | | | | | | - _MaxUpPt_ , used for TDD only | | | [36.211] | | | | | | - _Group-hopping-enabled_ | | | [36.211] | | | | | | _\- | | | deltaSS_ , | | | parameter [36.211, 5.5.1.3], | | | included when SRS sequence | | | hopping is used [36.211, | | | 5.5.1.4] and not included | | | otherwise | +----------------------------------+----------------------------------+ | Note 1: Multiple serving cells | | | are possible for a UE configured | | | with CA; SRS may be transmitted | | | on the PCell and/or SCell(s). | | | | | | Note 2: Search window is | | | calculated by the LMU as | | | [T-∆,T+∆], where ∆ may be e.g. | | | the timing advance measurement | | | provided by eNodeB. | | +----------------------------------+----------------------------------+
#### 8.5.2.3 Location Information that may be transferred from the LMU to
E-SMLC
The information that may be transferred from LMU to the E-SMLC is listed in
Table 8.5.2.3-1. The individual measurements will be defined in TS 36.214
[20].
Table 8.5.2.3-1: Information that may be transferred from LMU to the E-SMLC
* * *
Information Measurements Uplink Measurement Results List for EUTRA UL Relative
Time of Arrival Physical cell IDs
* * *
### 8.5.3 Uplink Positioning Procedures
The procedures described in this clause support the uplink positioning method.
#### 8.5.3.1 Uplink Information Request and Delivery Procedure
The Information Request procedure for Uplink positioning is used by the E-SMLC
to obtain measurement results from the LMU which it uses to calculate a
position for the UE. To do this, it needs to first indicate to the serving eNB
the need to configure the UE to transmit SRS (see 5.2.2) signals and retrieve
target UE configuration data from the eNodeB.
Figure 8.5.3.1-1 shows the messaging between the E-SMLC, the LMU and the
serving eNodeB to perform this procedure.
Figure 8.5.3.1-1: Uplink information request procedure
1\. The E-SMLC sends an Information Request message indicating to the eNodeB
the need to invoke periodic SRS (see 5.2.2) for target UE. The E-SMLC may
provide the eNB with a number of SRS transmissions. The final decision of SRS
transmissions to be performed and whether to take into account this
information is entirely up to the eNB implementation.
2\. The eNodeB determines the resources to be allocated for the UE and sends
an Information Response to the E-SMLC that includes the allocated resources
and the associated parameters. The eNB may decide (e.g., in case no resources
are available) to configure no resources for the UE and report the empty
resource configuration to the E-SMLC.
3\. If in step 2 the eNodeB determines that resources will be allocated, the
eNodeB then allocates the resources to the target UE.
4\. The E-SMLC selects a set of LMUs to be used for the UTDOA positioning and
sends a measurement request with the SRS configuration to each one of them
(via SLm).
5\. LMUs report back to E-SMLC the uplink measurement reports.
#### 8.5.3.2 Uplink Positioning Information Update Procedure
This procedure is used to notify the E-SMLC of a change to the UE SRS
transmission configuration for one or more cells with respect to a previously
sent UTDOA INFORMATION RESPONSE message. If the configured SRS transmission
for the target UE has been modified, or if a handover of the target UE has
been triggered, the eNB uses the Uplink Positioning Information Update
procedure to inform the E-SMLC.
Figure 8.5.3.2-1: Uplink Positioning Information Update Procedure
1\. If the SRS configuration changes or if a handover of the target UE has
been triggered prior to the expected completion time of the previously
communicated SRS configuration, the eNB initiates the Uplink Positioning
Information Update Procedure. In the case of handover, the source eNB sends
the update message after deciding to perform handover execution for the UE.
2\. If the UE SRS transmission configuration has changed for one or more
cells, the eNB sends an Uplink Positioning Information Update message to the
E-SMLC carrying the UE SRS transmission configuration information for all
cells with SRS configured.
## 8.6 Barometric pressure sensor positioning methods
### 8.6.1 General
In the barometric pressure sensor positioning method, the UE vertical
component of the position is estimated by combining the measured atmospheric
pressure and a reference atmospheric pressure. This is accomplished through
barometric sensors measuring atmospheric pressure at the UE, and applying a
height determination algorithm using the reference atmospheric pressure.
Three positioning modes are supported:
\- _UE-Assisted_ : The UE performs barometric pressure sensor measurements
with or without assistance from the network and sends these measurements to
the E-SMLC where the vertical component of the position calculation may take
place, possibly using additional measurements from other sources;
\- _UE-Based_ : The UE performs barometric pressure sensor measurements and
calculates its own vertical component of the position, possibly using
additional measurements from other sources.
\- _Standalone_ : The UE performs barometric pressure sensor measurements and
calculates its own vertical component of the position, possibly using
additional measurements from other sources, without network assistance.
### 8.6.2 Information to be transferred between E-UTRAN Elements
This clause defines the information (e.g., assistance data, vertical position
and/or measurement data) that may be transferred between E-UTRAN elements.
#### 8.6.2.1 Information that may be transferred from the UE to E-SMLC
The information transferred from the UE to the E-SMLC consists of capability
information and location measurements or UE position. The information that may
be signalled from the UE to the E-SMLC is summarized in Table 8.6.2.1-1.
Table 8.6.2.1-1: Information that may be transferred from UE to the E-SMLC
+---------------------------------------------------+-------------+------------+ | Information | UE‑assisted | UE-based/ | | | | | | | | Standalone | +---------------------------------------------------+-------------+------------+ | UE position estimate with uncertainty shape | No | Yes | +---------------------------------------------------+-------------+------------+ | Indication of used positioning methods in the fix | No | Yes | +---------------------------------------------------+-------------+------------+ | Timestamp | Yes | Yes | +---------------------------------------------------+-------------+------------+ | Barometric pressure sensor measurements | Yes | No | +---------------------------------------------------+-------------+------------+
##### 8.6.2.1.1 Standalone mode
In Standalone mode, the UE reports the vertical component of the position,
together with an estimate of the location uncertainty, if available.
The UE should also report an indication of which positioning method(s) have
been used to calculate a fix.
##### 8.6.2.1.2 UE-assisted mode
In UE-assisted mode, the UE reports the barometric pressure sensor
measurements together with associated quality estimates. These measurements
enable the E-SMLC to calculate the vertical component of the location of the
UE, possibly using other measurements and data.
If requested by the E-SMLC and supported by the UE, the UE may report
barometric pressure sensor measurements together with associated quality
measurements, if available.
##### 8.6.2.1.3 UE-based mode
In UE-based mode, the UE reports the vertical component of the position,
together with an estimate of the location uncertainty, if available.
The UE should also report an indication of which positioning method(s) have
been used to calculate a fix.
#### 8.6.2.2 Information that may be transferred from the E-SMLC to UE
Table 8.6.2.2-1 lists assistance data for both UE-assisted and UE-based modes
that may be sent from the E-SMLC to the UE.
NOTE: The provision of these assistance data elements and the usage of these
elements by the UE depend on the E‑UTRAN and UE capabilities, respectively.
Table 8.6.2.2-1: Information that may be transferred from the E-SMLC to UE
* * *
Assistance Data Reference pressure Additional reference data
* * *
##### 8.6.2.2.1 Barometric pressure sensor assistance data
The barometric pressure sensor assistance data may include reference pressure,
along with other reference data, such as the reference point where the
reference barometric pressure is valid and reference temperature at the
reference point.
### 8.6.3 Barometric Pressure Sensor Location Information Transfer Procedures
The purpose of this procedure is to enable the E-SMLC to request barometric
pressure sensor measurements or position estimate from the UE, or to enable
the UE to provide barometric pressure sensor measurements to the E-SMLC for
position calculation (e.g., in case of basic self-location where the UE
requests its own location).
#### 8.6.3.1 E-SMLC initiated Location Information Transfer Procedure
Figure 8.6.3.1-1 shows the Location Information Transfer operations when the
procedure is initiated by the E-SMLC.
Figure 8.6.3.1-1: E-SMLC-initiated Location Information Transfer Procedure
(1) The E-SMLC sends a LPP Request Location Information message to the UE for
invocation of barometric pressure sensor positioning. This request includes
positioning instructions such as the positioning mode (UE-assisted, UE-based,
standalone), specific requested UE measurements if any, and quality of service
parameters (accuracy, response time).
(2) The UE performs the requested measurements and possibly calculates its own
position. The UE sends an LPP Provide Location Information message to the
E-SMLC before the Response Time provided in step (1) elapsed. If the UE is
unable to perform the requested measurements, or if the Response Time provided
in step 1 elapsed before any of the requested measurements have been obtained,
the UE returns any information that can be provided in an LPP message of type
Provide Location Information which includes a cause indication for the not
provided location information.
#### 8.6.3.2 UE-initiated Location Information Delivery Procedure
Figure 8.6.3.2-1 shows the Location Information delivery operations for the
barometric pressure sensor method when the procedure is initiated by the UE.
Figure 8.6.3.2-1: UE-initiated Location Information Delivery Procedure
(1) The UE sends an LPP Provide Location Information message to the E-SMLC.
The Provide Location Information message may include UE barometric pressure
sensor measurements or location estimate already available at the UE.
#### 8.6.3.3 Assistance Data Transfer Procedure
The purpose of this procedure is to enable the E-SMLC to provide assistance
data to the UE (e.g., as part of a positioning procedure) and the UE to
request assistance data from the E-SMLC (e.g., as part of a positioning
procedure or for autonomous self location (i.e., UE determines its own
location)).
##### 8.6.3.3.1 E-SMLC initiated Assistance Data Delivery
Figure 8.6.3.3.1-1 shows the Assistance Data Delivery operations for the
network-assisted barometric pressure sensor method when the procedure is
initiated by the E-SMLC.
Figure 8.6.3.3.1-1: E‑SMLC-initiated Assistance Data Delivery Procedure
(1) The E-SMLC determines that assistance data needs to be provided to the UE
(e.g., as part of a positioning procedure) and sends an LPP Provide Assistance
Data message to the UE. This message may include any of the barometric
pressure sensor assistance data defined in clause 8.6.2.2.
##### 8.6.3.3.2 UE initiated Assistance Data Transfer
Figure 8.6.3.3.2-1 shows the Assistance Data Transfer operations for the
network-assisted Barometric pressure sensor method when the procedure is
initiated by the UE.
Figure 8.6.3.3.2-1: UE-initiated Assistance Data Transfer Procedure
(1) The UE determines that certain barometric pressure sensor assistance data
is desired (e.g., in case the UE requires its own location with autonomous
self location or as part of a positioning procedure when the E-SMLC provided
assistance data are not sufficient for the UE to fulfil the request) and sends
a LPP Request Assistance Data message to the E-SMLC. This request includes an
indication of which specific barometric pressure sensor assistance data is
requested.
(2) The E-SMLC provides the requested assistance data in a LPP Provide
Assistance Data message, if available at the E-SMLC. The entire set of
assistance data may be delivered in one or several LPP messages. In this case,
this step may be repeated by the E-SMLC several times. If any of the UE
requested assistance data in step (1) are not provided in step 2, the UE shall
assume that the requested assistance data are not supported, or currently not
available at the E-SMLC. If none of the UE requested assistance data in step
(1) can be provided by the E-SMLC, return any information that can be provided
in an LPP message of type Provide Assistance Data which includes a cause
indication for the not provided assistance data.
## 8.7 WLAN positioning methods
### 8.7.1 General
In the WLAN positioning method, the UE position is estimated with the
knowledge of geographical coordinate of reference WLAN access points. This is
accomplished by collecting a certain amount of measurements from UE\'s WLAN
receivers, and applying a location determination algorithm using databases of
the estimated position\'s references points.
The UE WLAN measurements may include:
\- WLAN Received Signal Strength (RSSI)
\- Round Trip Time (RTT) between WLAN Access Point and the UE
Three positioning modes are supported:
\- _Standalone_ :\ The UE performs WLAN position measurements and location
computation, without network assistance.
\- _UE-assisted_ :\ The UE provides WLAN position measurements with or without
assistance from the network to the E-SMLC for computation of a location
estimate by the network.
\- _UE-based_ :\ The UE performs WLAN position measurements and computation of
a location estimate with network assistance.
### 8.7.2 Information to be transferred between E-UTRAN Elements
This clause defines the information (e.g., assistance data, position,
measurement data) that may be transferred between E-UTRAN elements.
#### 8.7.2.1 Information that may be transferred from the UE to E-SMLC
The information transferred from the UE to the E-SMLC consists of capability
information and location measurements or UE position. The information that may
be signalled from the UE to the E-SMLC is summarized in Table 8.7.2.1-1.
Table 8.7.2.1-1: Information that may be transferred from the UE to the E-SMLC
+-----------------------------------------+-------------+------------+ | Information | UE‑Assisted | UE-based/ | | | | | | | | Standalone | +-----------------------------------------+-------------+------------+ | **WLAN Location Information** | | | +-----------------------------------------+-------------+------------+ | > BSSID | Yes | No | +-----------------------------------------+-------------+------------+ | > SSID | Yes | No | +-----------------------------------------+-------------+------------+ | > Received Signal Strength (RSSI) | Yes | No | +-----------------------------------------+-------------+------------+ | > Round Trip Time (RTT) | Yes | No | +-----------------------------------------+-------------+------------+ | > Time Stamp | Yes | No | +-----------------------------------------+-------------+------------+ | > Measurement characteristics | Yes | No | +-----------------------------------------+-------------+------------+ | **UE Location Information** | | | +-----------------------------------------+-------------+------------+ | > UE position estimate with uncertainty | No | Yes | | > shape | | | +-----------------------------------------+-------------+------------+ | > Position Time Stamp | No | Yes | +-----------------------------------------+-------------+------------+ | > Location Source (method(s) used to | No | Yes | | > compute location) | | | +-----------------------------------------+-------------+------------+
##### 8.7.2.1.1 Standalone mode
In Standalone mode, the UE reports the latitude, longitude and possibly
altitude, together with an estimate of the location uncertainty, if available.
The UE should also report an indication of WLAN method and possibly other
positioning methods used to calculate a fix.
##### 8.7.2.1.2 UE-assisted mode
In UE-assisted mode, the UE should report:
\- The BSSID/SSID of the measured WLAN access points, and associated RSSI or
RTT.
##### 8.7.2.1.3 UE-based mode
In UE-based mode, the UE reports the latitude, longitude, and possibly
altitude, together with an estimate of the location uncertainty, if available.
The UE should also report an indication that WLAN method is used and possibly
other positioning methods used to calculate the fix.
#### 8.7.2.2 Information that may be transferred from the E-SMLC to UE
Table 8.7.2.2-1 lists assistance data for both UE-assisted and UE-based modes
that may be sent from the E-SMLC to the UE.
NOTE: The provision of these assistance data elements and the usage of these
elements by the UE depend on the E‑UTRAN and UE capabilities, respectively.
Table 8.7.2.2-1: Information that may be transferred from the E-SMLC to UE
+----------------------------------------------------------------------+ | **Assistance Data** | +----------------------------------------------------------------------+ | WLAN AP List | +----------------------------------------------------------------------+ | > \- BSSID | +----------------------------------------------------------------------+ | > \- SSID | +----------------------------------------------------------------------+ | > \- AP Type Data^(1)^ | +----------------------------------------------------------------------+ | > \- AP Location | +----------------------------------------------------------------------+ | NOTE 1: WLAN AP Type Data may include WLAN Type (e.g., | | 802.11a/b/g/n/ac/ad, etc.), transmit power, antenna gain, coverage | | area, etc. | +----------------------------------------------------------------------+
##### 8.7.2.2.1 WLAN AP BSSID
This assistance data provides the BSSID of the WLAN access point [29].
##### 8.7.2.2.2 WLAN AP SSID
This assistance data provides the SSID of the WLAN access point [29].
##### 8.7.2.2.3 WLAN AP Type Data
This assistance data provides additional information about the access point
and may include WLAN Type (e.g., 802.11a/b/g/n/ac/ad, etc.), transmit power,
antenna gain, coverage area, etc. [29]
##### 8.7.2.2.4 WLAN AP Location
This assistance data provides the location (possibly including altitude
information) of the access point [29].
### 8.7.3 WLAN Positioning Procedures
#### 8.7.3.1 Location Information Transfer Procedure
The purpose of this procedure is to enable the E-SMLC to request position
measurements or location estimate from the UE, or to enable the UE to provide
location measurements to the E-SMLC for position calculation (e.g., in case of
basic self-location where the UE requests its own location).
##### 8.7.3.1.1 E-SMLC initiated Location Information Transfer Procedure
Figure 8.7.3.1.1-1 shows the Location Information Transfer operations for the
WLAN method when the procedure is initiated by the E-SMLC.
Figure 8.7.3.1.1-1: E-SMLC-initiated Location Information Transfer Procedure
(1) The E-SMLC sends a LPP Request Location Information message to the UE for
invocation of WLAN positioning. This request includes positioning instructions
such as the positioning mode (UE-assisted, UE-based, Standalone), specific
requested UE measurements if any, and quality of service parameters (accuracy,
response time).
(2) The UE performs the requested measurements and possibly calculates its own
location. The UE sends an LPP Provide Location Information message to the
E-SMLC before the Response Time provided in step (1) elapsed. If the UE is
unable to perform the requested measurements, or if the Response Time provided
in step 1 elapsed before any of the requested measurements have been obtained,
the UE returns any information that can be provided in an LPP message of type
Provide Location Information which includes a cause indication for the not
provided location information.
##### 8.7.3.1.2 UE-initiated Location Information Delivery Procedure
Figure 8.7.3.1.2-1 shows the Location Information delivery operations for the
WLAN method when the procedure is initiated by the UE.
Figure 8.7.3.1.2-1: UE-initiated Location Information Delivery Procedure
(1) The UE sends an LPP Provide Location Information message to the E-SMLC.
The Provide Location Information message may include UE WLAN information or
location estimate already available at the UE.
#### 8.7.3.2 Assistance Data Transfer Procedure
The purpose of this procedure is to enable the UE to request assistance data
from the E-SMLC (e.g., as part of a positioning procedure or for autonomous
self location (i.e., UE determines its own location)) and the E-SMLC to
provide assistance data to the UE (e.g., as part of a positioning procedure).
##### 8.7.3.2.1 UE initiated Assistance Data Transfer
Figure 8.7.3.2.1-1 shows the Assistance Data Transfer operations for the
network-assisted WLAN method when the procedure is initiated by the UE.
Figure 8.7.3.2.1-1: UE-initiated Assistance Data Transfer Procedure
(1) The UE determines that certain WLAN assistance data is desired (e.g., in
case the UE requires its own location with autonomous self location or as part
of a positioning procedure when the E-SMLC provided assistance data are not
sufficient for the UE to fulfil the request) and sends a LPP Request
Assistance Data message to the E-SMLC. This request includes an indication of
which specific WLAN assistance data is requested.
(2) The E-SMLC provides the requested assistance data in a LPP Provide
Assistance Data message, if available at the E-SMLC. The entire set of
assistance data may be delivered in one or several LPP messages. In this case,
this step may be repeated by the E-SMLC several times. If any of the UE
requested assistance data in step (1) are not provided in step 2, the UE shall
assume that the requested assistance data are not supported, or currently not
available at the E-SMLC. If none of the UE requested assistance data in step
(1) can be provided by the E-SMLC, return any information that can be provided
in an LPP message of type Provide Assistance Data which includes a cause
indication for the not provided assistance data.
## 8.8 Bluetooth positioning methods
### 8.8.1 General
In the Bluetooth positioning method, the UE position is estimated with the
knowledge of geographical coordinate of reference Bluetooth beacons. This is
accomplished by collecting a certain amount of measurements from UE\'s
Bluetooth receiver, and applying a location determination algorithm using
databases of the estimated position\'s references points.
The UE Bluetooth measurements may include:
\- Bluetooth beacon\'s Received Signal Strength (RSSI)
Two positioning modes are supported:
\- _Standalone_ :\ The UE performs Bluetooth position measurements and
location computation.
\- _UE-assisted_ :\ The UE provides Bluetooth position measurements without
assistance from the network to the E-SMLC for computation of a location
estimate by the network.
### 8.8.2 Information to be transferred between E-UTRAN Elements
This clause defines the information (e.g., position, measurement data) that
may be transferred between E-UTRAN elements.
#### 8.8.2.1 Information that may be transferred from the UE to E-SMLC
The information transferred from the UE to the E-SMLC consists of capability
information and location measurements or UE position. The information that may
be signalled from the UE to the SMLC is summarized in Table 8.8.2.1-1.
Table 8.8.2.1-1: Information that may be transferred from the UE to the E-SMLC
+-----------------------------------------+-------------+------------+ | Information | UE‑Assisted | Standalone | +-----------------------------------------+-------------+------------+ | **Bluetooth Location Information** | | | +-----------------------------------------+-------------+------------+ | > MAC Address | Yes | No | +-----------------------------------------+-------------+------------+ | > Received Signal Strength (RSSI) | Yes | No | +-----------------------------------------+-------------+------------+ | > Time Stamp | Yes | No | +-----------------------------------------+-------------+------------+ | > Measurement characteristics | Yes | No | +-----------------------------------------+-------------+------------+ | **UE Location Information** | | | +-----------------------------------------+-------------+------------+ | > UE position estimate with uncertainty | No | Yes | | > shape | | | +-----------------------------------------+-------------+------------+ | > Position Time Stamp | No | Yes | +-----------------------------------------+-------------+------------+ | > Location Source (method(s) used to | No | Yes | | > compute location) | | | +-----------------------------------------+-------------+------------+
##### 8.8.2.1.1 Standalone mode
In Standalone mode, the UE reports the latitude, longitude and possibly
altitude, together with an estimate of the location uncertainty, if available.
The UE should also report an indication of Bluetooth method and possibly other
location methods have been used to calculate a fix.
##### 8.8.2.1.2 UE-assisted mode
In UE-assisted mode, the UE should report:
\- The MAC addresses of the measured Bluetooth beacons and associated RSSI.
### 8.8.3 Bluetooth Positioning Procedures
#### 8.8.3.1 Location Information Transfer Procedure
The purpose of this procedure is to enable the E-SMLC to request position
measurements or location estimate from the UE, or to enable the UE to provide
location measurements to the E-SMLC for position calculation (e.g., in case of
basic self-location where the UE requests its own location).
##### 8.8.3.1.1 E-SMLC initiated Location Information Transfer Procedure
Figure 8.8.3.1.1-1 shows the Location Information Transfer operations for the
Bluetooth method when the procedure is initiated by the E-SMLC.
Figure 8.8.3.1.1-1: E-SMLC-initiated Location Information Transfer Procedure
(1) The E-SMLC sends a LPP Request Location Information message to the UE for
invocation of Bluetooth positioning. This request includes positioning
instructions such as the positioning mode (UE-assisted, Standalone), specific
requested UE measurements if any, and quality of service parameters (accuracy,
response time).
(2) The UE performs the requested measurements and possibly calculates its own
location. The UE sends an LPP Provide Location Information message to the
E-SMLC before the Response Time provided in step (1) elapsed. If the UE is
unable to perform the requested measurements, or if the Response Time provided
in step 1 elapsed before any of the requested measurements have been obtained,
the UE returns any information that can be provided in an LPP message of type
Provide Location Information which includes a cause indication for the not
provided location information.
##### 8.8.3.1.2 UE-initiated Location Information Delivery Procedure
Figure 8.8.3.1.2-1 shows the Location Information delivery operations for the
Bluetooth method when the procedure is initiated by the UE.
Figure 8.8.3.1.2-1: UE-initiated Location Information Delivery Procedure
(1) The UE sends an LPP Provide Location Information message to the E-SMLC.
The Provide Location Information message may include UE Bluetooth information
or location estimate already available at the UE.
## 8.9 TBS positioning methods
### 8.9.1 General
Terrestrial Beacon Systems (TBS) is the standard generic term for a network of
ground-based transmitters broadcasting signals for geo-spatial positioning
with wide-area or regional coverage. The following TBSs are supported in this
version of the specification:
\- Metropolitan Beacon Systems (MBS).
NOTE: PRS-based TBS is part of downlink (OTDOA) positioning and described in
clause 8.2.
Three positioning modes are supported:
\- _UE-Assisted_ : The UE performs TBS measurements with or without assistance
from the network, and sends these measurements to the E-SMLC where the
position calculation takes place, possibly using additional measurements from
other (non-TBS) sources;
\- _UE-Based_ : The UE performs TBS measurements and calculates its own
location, possibly using additional measurements from other (non-TBS) sources.
\- _Standalone_ : The UE performs TBS measurements and calculates its own
location, possibly using additional measurements from other (non-TBS) sources,
without network assistance.
### 8.9.2 Information to be transferred between E-UTRAN Elements
This clause defines the information (e.g., assistance data, position,
measurement data) that may be transferred between E-UTRAN elements.
#### 8.9.2.1 Information that may be transferred from the UE to E-SMLC
The information transferred from the UE to the E-SMLC consists of capability
information and location measurements or UE position. The information that may
be signalled from the UE to the E-SMLC is summarized in Table 8.9.2.1-1.
Table 8.9.2.1-1: Information that may be transferred from UE to the E-SMLC
+---------------------------------+-----------------+----------------+ | **Information** | **UE‑assisted** | **UE-based/** | | | | | | | | **Standalone** | +---------------------------------+-----------------+----------------+ | UE position estimate with | No | Yes | | uncertainty shape | | | +---------------------------------+-----------------+----------------+ | Timestamp | Yes | Yes | +---------------------------------+-----------------+----------------+ | Indication of used positioning | No | Yes | | methods in the fix | | | +---------------------------------+-----------------+----------------+ | TBS measurements (code phase | Yes | No | | (MBS)) | | | +---------------------------------+-----------------+----------------+ | Measurement quality parameters | Yes | No | | for each measurement | | | +---------------------------------+-----------------+----------------+
##### 8.9.2.1.1 Standalone mode
In Standalone mode, the UE reports the latitude, longitude and possibly
altitude, together with an estimate of the location uncertainty, if available.
The UE should also report an indication that TBS method is used and possibly
other positioning methods used to calculate the fix.
##### 8.9.2.1.2 UE-assisted mode
In UE-assisted mode, the UE reports the TBS associated measurements, together
with associated quality estimates. These measurements enable the E-SMLC to
calculate the location of the UE, possibly using other measurements and data.
##### 8.9.2.1.3 UE-based mode
In UE-based mode, the UE reports the latitude and longitude, together with an
estimate of the location uncertainty, if available.
The UE should also report an indication that TBS method is used and possibly
other positioning methods used to calculate the fix.
#### 8.9.2.2 Information that may be transferred from the E-SMLC to UE
Table 8.9.2.2-1 lists assistance data for both UE-assisted and UE-based modes
that may be sent from the E-SMLC to the UE.
NOTE: The provision of these assistance data elements and the usage of these
elements by the UE depend on the E‑UTRAN and UE capabilities, respectively.
Table 8.9.2.2-1: Information that may be transferred from the E-SMLC to UE
* * *
Assistance Data Acquisition assistance Almanac
* * *
##### 8.9.2.2.1 Acquisition Assistance
Acquisition assistance provides the MBS receiver with information about
visible beacons, PN Codes, and other information of the MBS signals to enable
a fast acquisition of the MBS signals.
##### 8.9.2.2.2 Almanac
Almanac assistance provides the MBS receiver with MBS beacon parameters that
can be used to determine the UE position.
### 8.9.3 TBS Positioning Procedures
#### 8.9.3.1 Location Information Transfer Procedure
The purpose of this procedure is to enable the E-SMLC to request position
measurements or location estimate from the UE, or to enable the UE to provide
location measurements to the E-SMLC for position calculation (e.g., in case of
basic self-location where the UE requests its own location).
##### 8.9.3.1.1 E-SMLC initiated Location Information Transfer Procedure
Figure 8.9.3.1.1-1 shows the Location Information Transfer operations for the
TBS method when the procedure is initiated by the E-SMLC.
Figure 8.9.3.1.1-1: E-SMLC-initiated Location Information Transfer Procedure
(1) The E-SMLC sends a LPP Request Location Information message to the UE for
invocation of TBS positioning. This request includes positioning instructions
such as the positioning mode (UE-assisted, UE-based, Standalone), specific
requested UE measurements if any, and quality of service parameters (accuracy,
response time).
(2) The UE performs the requested measurements and possibly calculates its own
location. The UE sends an LPP Provide Location Information message to the
E-SMLC before the Response Time provided in step (1) elapsed. If the UE is
unable to perform the requested measurements, or if the Response Time provided
in step 1 elapsed before any of the requested measurements have been obtained,
the UE returns any information that can be provided in an LPP message of type
Provide Location Information which includes a cause indication for the not
provided location information.
##### 8.9.3.1.2 UE-initiated Location Information Delivery Procedure
Figure 8.9.3.1.2-1 shows the Location Information delivery operations for the
TBS method when the procedure is initiated by the UE.
Figure 8.9.3.1.2-1: UE-initiated Location Information Delivery Procedure
(1) The UE sends an LPP Provide Location Information message to the E-SMLC.
The Provide Location Information message may include UE TBS measurements or
location estimate already available at the UE.
#### 8.9.3.2 Assistance Data Transfer Procedure
The purpose of this procedure is to enable the E-SMLC to provide assistance
data to the UE (e.g., as part of a positioning procedure) and the UE to
request assistance data from the E-SMLC (e.g., as part of a positioning
procedure or for autonomous self location (i.e., UE determines its own
location)).
##### 8.9.3.2.1 E-SMLC initiated Assistance Data Delivery
Figure 8.9.3.2.1-1 shows the Assistance Data Delivery operations for the
network-assisted TBS method when the procedure is initiated by the E-SMLC.
Figure 8.9.3.2.1-1: E‑SMLC-initiated Assistance Data Delivery Procedure
(1) The E-SMLC determines that assistance data needs to be provided to the UE
(e.g., as part of a positioning procedure) and sends an LPP Provide Assistance
Data message to the UE. This message may include any of the TBS assistance
data defined in clause 8.9.2.2.
##### 8.9.3.2.2 UE initiated Assistance Data Transfer
Figure 8.9.3.2.2-1 shows the Assistance Data Transfer operations for the
network-assisted TBS method when the procedure is initiated by the UE.
Figure 8.9.3.2.2-1: UE-initiated Assistance Data Transfer Procedure
(1) The UE determines that certain TBS assistance data is desired (e.g., in
case the UE requires its own location with autonomous self location or as part
of a positioning procedure when the E-SMLC provided assistance data are not
sufficient for the UE to fulfil the request) and sends a LPP Request
Assistance Data message to the E-SMLC. This request includes an indication of
which specific TBS assistance data is requested.
(2) The E-SMLC provides the requested assistance data in a LPP Provide
Assistance Data message, if available at the E-SMLC. The entire set of
assistance data may be delivered in one or several LPP messages. In this case,
this step may be repeated by the E-SMLC several times. If any of the UE
requested assistance data in step (1) are not provided in step 2, the UE shall
assume that the requested assistance data are not supported, or currently not
available at the E-SMLC. If none of the UE requested assistance data in step
(1) can be provided by the E-SMLC, return any information that can be provided
in an LPP message of type Provide Assistance Data which includes a cause
indication for the not provided assistance data.
## 8.10 Motion sensor positioning method
### 8.10.1 General
Motion sensors can be used to estimate the location of the UE. With the
combination of other positioning methods (hybrid) a more accurate position of
the UE can be computed. UE using one or more motion sensors provides the
movement information. The movement information comprises displacement results
estimated at an ordered series of points.
The positioning modes supported are UE-Assisted, UE-Based, and Standalone _._
### 8.10.2 Information to be transferred between E-UTRAN Elements
This clause defines the information (e.g., assistance data, position and/or
measurement data) that may be transferred between E-UTRAN elements.
#### 8.10.2.1 Information that may be transferred from the UE to E-SMLC
The information transferred from the UE to the E-SMLC consists of capability
information and location measurements or UE position. The supported
information elements are given in Table 8.10.2.1-1.
Table 8.10.2.1-1: Sensor Measurement Information that may be transferred from
UE to the E-SMLC
+--------------------------+-------------+------------+ | Information | UE‑assisted | UE-based/ | | | | | | | | Standalone | +==========================+=============+============+ | Displacement Timestamp | Yes | Yes | +--------------------------+-------------+------------+ | Displacement Information | Yes | Yes | +--------------------------+-------------+------------+ | Reference Position | Yes | Yes | +--------------------------+-------------+------------+ | Reference Time | Yes | Yes | +--------------------------+-------------+------------+
##### 8.10.2.1.1 UE-assisted, UE-based, Standalone mode
In the _UE-assisted_ , UE-Based, and Standalone mode, the UE reports,
displacement information, displacement timestamp, reference position and
reference time stamp.
##### 8.10.2.1.2 UE Displacement and Movement Information
The UE may report movement and displacement information which comprises an
ordered series of direction and distance travelled by the target device and
the time intervals when these measurements are taken.
#### 8.10.2.2 Information that may be transferred from the E-SMLC to the UE
In this release, no information, e.g. assistance data is transferred to the
UE.
### 8.10.3 Motion Sensors Location Information Transfer Procedure
The purpose of this procedure is to enable the E-SMLC to request additional
sensor measurements or to enable the UE to provide sensor measurements to the
E-SMLC for position calculation.
#### 8.10.3.1 E-SMLC initiated Location Information Transfer Procedure
Figure 8.10.3.1-1 shows the Location Information Transfer operations when the
procedure is initiated by the E-SMLC.
Figure 8.10.3.1-1: E-SMLC-initiated Location Information Transfer Procedure
(1) The E-SMLC sends a LPP Request Location Information message to the UE for
invocation of motion sensor positioning. This request includes positioning
instructions such as the positioning mode, specific requested UE measurements
if any, and quality of service parameters (accuracy, response time).
(2) The UE performs the requested measurements. The UE sends an LPP Provide
Location Information message to the E-SMLC before the Response Time provided
in step (1) elapsed. If the UE is unable to perform the requested
measurements, or if the Response Time provided in step 1 elapsed before any of
the requested measurements have been obtained, the UE returns any information
that can be provided in an LPP message of type Provide Location Information
which includes a cause indication for the not provided location information.
#### 8.10.3.2 UE-initiated Location Information Delivery Procedure
Figure 8.10.3.2-1 shows the Location Information delivery operations for
motion sensor method when the procedure is initiated by the UE.
Figure 8.10.3.2-1: UE-initiated Location Information Delivery Procedure
(1) The UE sends an LPP Provide Location Information message to the E-SMLC.
The Provide Location Information message may include UE sensor measurements or
location estimate already available at the UE.
###### ## Annex A (informative): Definitions and Terms
No further definitions and terms are currently described beyond those defined
in clause 3.
###### ## Annex B (informative): Use of LPP with SUPL
The design goal of LPP is to enable it to be used in user plane location
solutions such as OMA SUPL ([17], [18]) and this informative annex shows how
LPP can be used in SUPL 2.0.
# B.1 SUPL 2.0 Positioning Methods and Positioning Protocols
The following table shows how the 3GPP positioning protocols are supported in
SUPL 2.0.
Table B.1-1: SUPL support of positioning methods
+-----------------------+-------------------+-----------+-------+ | Positioning Protocol: | RRLP | RRC | LPP | | | | | | | | (GSM/GPRS/WCDMA/\ | (WCDMA) | (LTE) | | | LTE/WLAN/WiMAX) | | | +=======================+===================+===========+=======+ | Positioning Method: | | | | +-----------------------+-------------------+-----------+-------+ | A-GPS (A-GANSS) SET | | | | | Assisted | | | | +-----------------------+-------------------+-----------+-------+ | A-GPS (A-GANSS) SET | | | | | Based | | | | +-----------------------+-------------------+-----------+-------+ | Autonomous GPS/GANSS | | | | +-----------------------+-------------------+-----------+-------+ | Enhanced Cell ID | | | | +-----------------------+-------------------+-----------+-------+ | Enhanced Observed | (GSM only) | NA | NA | | Time Difference | | | | | (E-OTD) | | | | +-----------------------+-------------------+-----------+-------+ | Observed Time | NA | | | | Difference of Arrival | | | | | (OTDOA) ^NOTE\ 1^ | | | | +-----------------------+-------------------+-----------+-------+ | Sensor | NA | ^NOTE\ 3^ | | +-----------------------+-------------------+-----------+-------+ | WLAN | NA | | | +-----------------------+-------------------+-----------+-------+ | Bluetooth | NA | | | +-----------------------+-------------------+-----------+-------+ | TBS ^NOTE\ 2^ | NA | | | +-----------------------+-------------------+-----------+-------+ | NOTE 1: This includes | | | | | TBS positioning based | | | | | on PRS signals, which | | | | | is only supported in | | | | | LPP (LTE). | | | | | | | | | | NOTE 2: TBS | | | | | positioning based on | | | | | MBS signals. | | | | | | | | | | NOTE 3: Only | | | | | barometric pressure | | | | | sensor is supported. | | | | +-----------------------+-------------------+-----------+-------+
Note: What is referred to in the SUPL specifications as \"Enhanced Cell ID is
a UE-Assisted positioning mode where the neighbouring cell measurements are
carried at the SUPL layer (in the SUPL_POS_INIT for example). For LTE, the
ASN.1 container for this mode is defined as follows:
LteCellInformation ::= SEQUENCE {
cellGlobalIdEUTRA CellGlobalIdEUTRA,
physCellId PhysCellId,
trackingAreaCode TrackingAreaCode,
rsrpResult RSRP-Range OPTIONAL,
rsrqResult RSRQ-Range OPTIONAL,
ta INTEGER(0..1282) OPTIONAL, -- Currently used Timing Advance value (N_TA/16
as per [3GPP 36.213])
measResultListEUTRA MeasResultListEUTRA OPTIONAL, --Neighbour measurements
...,
earfcn INTEGER(0..65535) OPTIONAL, -- see Table 37
earfcn-ext INTEGER (65536..262143) OPTIONAL, -- see Table 37
rsrpResult-ext RSRP-Range-Ext OPTIONAL,
rsrqResult-ext RSRQ-Range-Ext OPTIONAL,
rs-sinrResult RS-SINR-Range OPTIONAL,
servingInformation5G ServingInformation5G OPTIONAL
}
MeasResultListEUTRA ::= SEQUENCE (SIZE (1..maxCellReport)) OF MeasResultEUTRA
MeasResultEUTRA ::= SEQUENCE {
physCellId PhysCellId,
cgi-Info SEQUENCE {
cellGlobalId CellGlobalIdEUTRA,
trackingAreaCode TrackingAreaCode
} OPTIONAL,
measResult SEQUENCE {
rsrpResult RSRP-Range OPTIONAL, -- Mapping to measured values
rsrqResult RSRQ-Range OPTIONAL, -- in 3GPP TS 36.133
...,
earfcn INTEGER(0..65535) OPTIONAL, -- see Table 37
earfcn-ext INTEGER (65536..262143) OPTIONAL, -- see Table 37
rsrpResult-ext RSRP-Range-Ext OPTIONAL,
rsrqResult-ext RSRQ-Range-Ext OPTIONAL,
rs-sinrResult RS-SINR-Range OPTIONAL,
neighbourInformation5G NeighbourInformation5G OPTIONAL
}
}
It should be noted that in addition to the container provided by SUPL itself,
any E-CID positioning methods defined within LPP proper can be supported in
SUPL, via tunneling LPP as shown in this annex (in the same manner that A-GNSS
and OTDOA are supported).
# B.2 SUPL 2.0 and LTE Architecture
This clause describes interworking between the control-plane LCS architecture,
as defined in the main body of this specification, and SUPL 2.0. The E-SMLC
either includes or has an interface to an SPC function as defined in OMA SUPL
V2.0 ([17], [18]). It can thus provide a consistent set of positioning methods
for deployments utilizing both control-plane and user-plane.
The interworking does not enable use of user-plane signalling for part of a
control-plane positioning session. The user plane in the interworking here is
not intended as an alternative path for control-plane signalling that would be
needed between UE and eNodeB for mechanisms such as A-GPS in a standalone
C-plane solution.
This interworking does enable the SPC to retrieve measurements (e.g., GNSS-to-
RAN time relations) from eNodeB.
The underlying architecture is shown in Figure B.2-1. Note that, for
interworking between user-plane and control-plane positioning, no new
interfaces need to be defined as compared to those in the figure, assuming the
SPC is either integrated in the E-SMLC or attached to it with a proprietary
interface.
Figure B.2-1: System architecture underlying positioning
The Lup and Llp interfaces shown in this architecture are part of the user-
plane solution only and are not required for control-plane positioning. The
SLs interface is required for both control-plane and user-plane positioning,
and needs to be capable of querying eNode Bs for information not related to a
UE connection.
SUPL, including the use of LPP over SUPL, takes place as part of the general
user-plane protocol stack shown in Figure B.2-2. SUPL occupies the application
layer in the stack, with LPP (or another positioning protocol) transported as
another layer above SUPL.
Figure B.2-2: User-plane protocol stack
# B.3 LPP session procedures using SUPL
This clause indicates how an LPP session relates to the SUPL structure. Figure
B.3-1 shows how SUPL and LPP can be combined within a SUPL positioning
session. Step 4 here is repeated to exchange multiple LPP messages between the
SLP and SET.
Figure B.3-1: LPP session over SUPL
For positioning operations which take place entirely within an LPP session
(step 4 in Figure B.3-1), the flow of LPP messages can be the same as in the
control-plane version of LPP; the role of the (LPP) target is taken by the
target SET, and that of the (LPP) server by the SLP. An example LPP flow,
including exchange of capabilities, request and delivery of assistance data,
and request and delivery of positioning information, is shown in Figure B.3-2.
Figure B.3-2: LPP session over SUPL
# B.4 Procedures combining C-plane and U-plane operations
Since SUPL is by definition carried over the user plane, it is not really
applicable to operations terminating at the eNode B. Thus, in some cases where
information from the eNode B and UE needs to be merged for a positioning
operation, SUPL operations must take place in combination with control-plane
procedures over LPPa.
This situation could arise in the case of UE-assisted OTDOA, for example, in
which the SLP needs to provide the UE (in a SUPL session) with assistance data
supplied by various eNode Bs. This clause uses a UE-assisted OTDOA positioning
operation as a running example.
Although the positioning server in this operation is of course the SLP, the
existence of the Llp interface means that the SLP can communicate freely with
the E-SMLC via the SPC. In particular, this means that assistance data that
were delivered to the E-SMLC via LPPa can be transferred over to the SLP for
delivery to the UE via LPP over SUPL.
Several ways to realise this general behaviour are possible. In the simplest
case, the E-SMLC could be supplied with the necessary assistance data in
advance, so that they can be supplied to the SLP without any actual LPPa
procedures taking place in real time (and possibly even before the positioning
transaction begins).
Figure B.4-1: Transfer of OTDOA assistance data to UE via SUPL
In the event that the E-SMLC does not have the required assistance data
available, however, it would need to retrieve them from appropriate eNode Bs
once it was made aware that they were needed.
Figure B.4-2: Transfer to the UE via SUPL of OTDOA assistance data not already
available at the E-SMLC
In both cases, it should be noted that the retrieval of the assistance data is
transparent to the UE and to the actual SUPL session. This model is parallel
to the approach used with A-GNSS, in which assistance data such as satellite
ephemerides are retrieved from sources entirely external to the cellular
network. For purposes of LPP over SUPL, the delivery of assistance data _to
the SLP_ can be looked on as an independent external process.
The delivery of assistance data to the UE, however, takes place through the
same mechanisms as control-plane LPP, transported through SUPL.
#