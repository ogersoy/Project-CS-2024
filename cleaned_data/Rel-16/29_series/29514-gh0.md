# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present specification provides the stage 3 definition of the Policy
Authorization Service of the 5G System.
The 5G System Architecture is defined in 3GPP TS 23.501 [2]. The stage 2
definition and related procedures for the Npcf Policy Authorization Service
are specified in 3GPP TS 23.502 [3] and 3GPP TS 23.503 [4].
The 5G System stage 3 call flows are provided in 3GPP TS 29.513 [7].
The Technical Realization of the Service Based Architecture and the Principles
and Guidelines for Services Definition are specified in 3GPP TS 29.500 [5] and
3GPP TS 29.501 [6].
The Policy Authorization Service is provided by the Policy Control Function
(PCF). This service creates policies as requested by the authorised AF for the
PDU Session to which the AF session is bound.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".
[3] 3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".
[4] 3GPP TS 23.503: \"Policy and Charging Control Framework for the 5G System;
Stage 2\".
[5] 3GPP TS 29.500: \"5G System; Technical Realization of Service Based
Architecture; Stage 3\".
[6] 3GPP TS 29.501: \"5G System; Principles and Guidelines for Services
Definition; Stage 3\".
[7] 3GPP TS 29.513: \"5G System; Policy and Charging Control signalling flows
and QoS parameter mapping; Stage 3\".
[8] 3GPP TS 29.512: \"5G System; Session Management Policy Control Service;
Stage 3\".
[9] IETF RFC 7540: \"Hypertext Transfer Protocol Version 2 (HTTP/2)\".
[10] IETF RFC 8259: \"The JavaScript Object Notation (JSON) Data Interchange
Format\".
[11] OpenAPI: \"OpenAPI 3.0.0 Specification\", https://github.com/OAI/OpenAPI-
Specification/blob/master/versions/3.0.0.md.
[12] 3GPP TS 29.571: \"5G System; Common Data Types for Service Based
Interfaces; Stage 3\".
[13] 3GPP TS 29.508: \"5G System; Session Management Event Exposure Service;
Stage 3\".
[14] 3GPP TS 29.554: \"5G System; Background Data Transfer Policy Control
Service; Stage 3\".
[15] 3GPP TS 29.122: \"T8 reference point for Northbound APIs\".
[16] IEEE 802.3-2015: \"IEEE Standard for Ethernet\".
[17] IEEE 802.1Q-2014: \"Bridges and Bridged Networks\".
[18] IETF RFC 7042: \"IANA Considerations and IETF Protocol and Documentation
Usage for IEEE 802 Parameters\".
[19] IETF RFC 3986: \"Uniform Resource Identifier (URI): Generic Syntax\".
[20] 3GPP TS 29.214: \"Policy and Charging Control over Rx reference point\".
[21] IETF RFC 7396: \"JSON Merge Patch\".
[22] 3GPP TS 32.291: \"5G System; Charging service; Stage 3\".
[23] 3GPP TS 22.153: \"5G System; \"Multimedia Priority Service\".
[24] IETF RFC 7807: \"Problem Details for HTTP APIs\".
[25] 3GPP TS 33.501: \"Security architecture and procedures for 5G system\".
[26] IETF RFC 6749: \"The OAuth 2.0 Authorization Framework\".
[27] 3GPP TS 29.510: \"5G System; Network Function Repository Services; Stage
3\".
[28] 3GPP TR 21.900: \"Technical Specification Group working methods\".
[29] 3GPP TS 24.292: \"IP Multimedia (IM) Core Network (CN) subsystem
Centralized Services (ICS); Stage 3\".
[30] 3GPP TS 26.114: \"IP Multimedia Subsystem (IMS); Multimedia telephony;
Media handling and interaction\".
[31] IETF RFC 5761: \"Multiplexing RTP Data and Control Packets on a Single
Port\".
[32] 3GPP TS 24.229: \"IP Multimedia Call Control Protocol based on SIP and
SDP; Stage 3\".
[33] 3GPP TS 23.228: \"IP Multimedia Subsystem (IMS); Stage 2\".
[34] IETF RFC 5031: \"A Uniform Resource Name (URN) for Emergency and Other
Well-Known Services\".
[35] IETF RFC 5009: \"Private Header (P-Header) Extension to the Session
Initiation Protocol (SIP) for Authorization of Early Media\".
[36] 3GPP TS 24.008: \"Mobile radio interface Layer 3 specification; Core
network protocols; Stage 3\".
[37] IETF RFC 3556: \"**Session Description Protocol (SDP) Bandwidth Modifiers
for RTP Control Protocol (RTCP) Bandwidth\".**
[38] IETF RFC 3959 (December 2004): \"The Early Session Disposition Type for
the Session Initiation Protocol (SIP)\".
[39] 3GPP TS 23.380: \"IMS Restoration Procedures\".
[40] 3GPP TS 23.167: \"IP Multimedia Subsystem (IMS) emergency sessions\".
[41] 3GPP TS 24.379: \"Mission Critical Push To Talk (MCPTT) call control;
Protocol specification\".
[42] IETF RFC 8101: \"IANA Registration of New Session Initiation Protocol
(SIP), Resource-Priority Namespace for Mission Critical Push To Talk
Service\".
[43] 3GPP TS 24.281: \"Mission Critical Video (MCVideo) signalling control;
Protocol specification\".
[44] 3GPP TS 23.316: \"Wireless and wireline convergence access support for
the 5G System (5GS)\".
[45] 3GPP TS 22.179: \"Mission Critical Push to Talk (MCPTT) over LTE; Stage
1\".
[46] 3GPP TS 22.280: \"Mission Critical (MC) services common requirements\".
[47] 3GPP TS 22.281: \"Mission Critical (MC) video over LTE\".
[48] 3GPP TS 22.282: \"Mission Critical (MC) data over LTE\".
[49] 3GPP TS 24.501: \"Non-Access-Stratum (NAS) protocol for 5G System (5GS);
Stage 3\".
[50] IETF RFC 4574: \"The Session Description Protocol (SDP) Label
Attribute\".
[51] 3GPP TS 26.238: \"Uplink Streaming\".
[52] IETF RFC 6733: \"Diameter Base Protocol\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in
3GPP TR 21.905 [1].
**Application Function (AF)** : Element offering application(s) that use PDU
session resources.
**AF application session context:** Application level session context
established by an application level signalling protocol offered by the AF that
requires a session context set-up with explicit session context description
before the use of the service.
**MCS session:** A session for which priority treatment is applied for
allocating and maintaining radio and network resources to support the Mission
Critical Service (MCS). MCS is defined in 3GPP TS 22.179 [45], 3GPP TS 22.280
[46], 3GPP TS 22.281 [47], and 3GPP TS 22.282 [48].
**MPS session:** A session for which priority treatment is applied for
allocating and maintaining radio and network resources to support the
Multimedia Priority Service (MPS). MPS is defined in 3GPP TS 22.153 [23].
**PCC rule:** Set of information enabling the detection of a service data flow
and providing parameters for policy control and/or charging control.
**Service information: Set of information conveyed from the AF/NEF to the PCF
by the Npcf_PolicyAuthorization service to** be used as a basis for PCC
decisions **at the PCF, including information about the AF/NEF application
session context (e.g. application identifier, type of media, bandwidth, IP
address and port number).**
**Service data flow:** An aggregate set of packet flows.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
5G-RG 5G Residential Gateway
AF Application Function
ARP Allocation and Retention Priority
ATSSS Access Traffic Steering, Switching and Splitting
BBF Broadband Forum
BMIC Bridge Management Information Container
BSSID Basic Service Set IDentifier
CHEM Coverage and Handoff Enhancements using Multimedia error robustness
feature
CHF Charging Function
DEI Drop Eligible Indicator
DNAI DN Access Identifier
DNN Data Network Name
DS-TT Device-side TSN translator
DSL Digital Subscriber Line
E-UTRA Evolved Universal Terrestrial Radio Access
FLUS Framework for Live Uplink Streaming
FN-RG Fixed Network Residential Gateway
GPSI Generic Public Subscription Identifier
HFC Hybrid Fiber-Coaxial
H-PCF PCF in the HPLMN
IMS IP-Multimedia Subsystem
JSON JavaScript Object Notation
MA Multi-Access
MCPTT Mission Critical Push to Talk Service
MCVideo Mission Critical Video
MPS Multimedia Priority Service
NEF Network Exposure Function
NID Network Identifier
NR New Radio
NRF Network Repository Function
NWDAF Network Data Analytics Function
NW-TT Network-side TSN translator
PCC Policy and Charging Control
PCF Policy Control Function
PCP Priority Code Point
P-CSCF Proxy Call Session Control Function
PEI Permanent Equipment Identifier
PMIC Port Management Information Container
PON Passive Optical Network
PRA Presence Reporting Area
QoS Quality of Service
RFSP RAT Frequency Selection Priority
RTCP Real Time Control Protocol
RTP Real Time Protocol
SDF Service Data Flow
SDP Session Description Protocol
SIP Session Initiation Protocol
SMF Session Management Function
S-NSSAI Single Network Slice Selection Assistance Information
SNPN Stand-alone Non-Public Network
SSID Service Set IDentifier
SUPI Subscription Permanent Identifier
TNAP Trusted Non-3GPP Access Point
TSC Time Sensitive Communication
TSCAI Time Sensitive Communication Assistance Information
TSN Time Sensitive Networking
UDR Unified Data Repository
UPF User Plane Function
URSP UE Route Selection Policy
VID VLAN Identifier
VLAN Virtual Local Area Network
V-PCF PCF in the VPLMN
W-5GAN Wireline 5G Access Network
W-5GBAN Wireline 5G BBF Access Network
W-5GCAN Wireline 5G Cable Access Network
W-AGF Wireline Access Gateway Function
# 4 Npcf_PolicyAuthorization Service
## 4.1 Service Description
### 4.1.1 Overview
The Npcf_PolicyAuthorization Service, as defined in 3GPP TS 23.502 [3] and in
3GPP TS 23.503 [4], is provided by the Policy Control Function (PCF).
The Npcf_PolicyAuthorization service authorises an AF request and creates
policies as requested by the authorised NF service consumer for the PDU
session to which the AF session is bound to. This service also allows the NF
service consumer to subscribe/unsubscribe to notifications on events (e.g.
access type change, PLMN change, usage report, access network information
report).
### 4.1.2 Service Architecture
The 5G System Architecture is defined in 3GPP TS 23.501 [2]. The Policy and
Charging control related 5G architecture is also described in 3GPP TS 23.503
[4] and 3GPP TS 29.513 [7].
The only known NF service consumers of the Npcf_PolicyAuthorization service
are the Application Function (AF) and the Network Exposure Function (NEF).
The Npcf_PolicyAuthorization service is provided by the PCF and consumed by
the AF and the NEF, as shown in figure 4.1.2-1 for the SBI representation
model and in figure 4.1.2-2 for the reference point representation model.
Figure 4.1.2-1: Npcf_PolicyAuthorization service Architecture, SBI
representation
Figure 4.1.2-2: Npcf_PolicyAuthorization service Architecture, reference point
representation
The NEF can act as an AF using N5 reference point.
### 4.1.3 Network Functions
#### 4.1.3.1 Policy Control Function (PCF)
The PCF (Policy Control Function) is a functional element that encompasses:
\- policy control decision and flow based charging control functionalities;
\- access and mobility policy decisions for the control of e.g. the UE Service
Area Restrictions and RAT/RFSP control; and
\- UE Policy for the Access network discovery and selection policy and UE
Route Selection Policy (URSP).
The policy control decision and flow based charging control functionalities
enable the PCF to provide network control regarding the service data flow
detection, gating, QoS and flow based charging (except credit management)
towards the SMF/UPF.
The PCF receives session and media related information from the
Npcf_PolicyAuthorization service consumers and notifies them of subscribed
traffic plane events.
The PCF may receive from the NF service consumers the request to monitor the
requested service and media information and notifies them of the UL/DL/round-
trip delay of the requested flows.
The PCF may receive service routing requirements and the indication of
receiving notifications about user plane path changes from the
Npcf_PolicyAuthorization service consumers.
The PCF may receive from the NF service consumers the specific required QoS
and a prioritized list of alternative QoS profiles and notifies them about the
QoS target the access network guarantees.
The PCF checks that the service information provided by the NF service
consumer is consistent with the operator defined policy rules before storing
the service information.
The PCF uses the received service information and the subscription information
when it applies as basis for the policy and charging control decisions.
The PCF derives PCC rules and provisions them to the SMF via the
Npcf_SMPolicyControl service and subscribes to traffic plane events via policy
control request triggers as described in 3GPP TS 29.512 [8].
In 5GS interworking with TSN networks, the PCF:
\- notifies the TSN AF service consumer about the TSN bridge and DS-TT port
information corresponding to a PDU session;
\- enables the TSN AF configures the TSN bridge and TSN ports by forwarding
TSN bridge management containers and TSN port management containers to the SMF
as described in 3GPP TS 29.512 [8];
\- notifies the TSN AF about updated TSN bridge configuration and TSN port
configuration by forwarding TSN bridge management containers and TSN port
management containers received from the SMF; and
\- uses the received QoS and TSC assistance information to derive the policy
information delivered in the PCC rule to the SMF as described in 3GPP TS
29.512 [8].
#### 4.1.3.2 NF Service Consumers
The known NF service consumers are the AF and the NEF, as defined in 3GPP TS
23.502 [3].
The AF is an element offering control to applications that require the policy
and charging control of traffic plane resources; specific user plane paths for
the requested traffic, the monitoring of the required service QoS, and/or
specific QoS and alternative QoS profiles. The AF uses the
Npcf_PolicyAuthorization service to provide service information to the PCF.
In 5GS interworking with TSN networks, the TSN AF is an element offering to
TSN control functions an interface to 5GS to forward TSN bridge and TSN port
management configuration, and to set the QoS policy required to forward the
TSN traffic making use of the 5GS traffic plane resources.
The AFs can be deployed by the same operator offering the access services or
can be provided by external third-party service provider. If the AF is not
allowed by the operator to access directly the PCF, the AF uses the external
exposure framework via NEF to interact with the PCF, as described in subclause
5.20 of 3GPP TS 23.501 [2].
The Network Exposure Function (NEF) supports external exposure of capabilities
of network functions.
## 4.2 Service Operations
### 4.2.1 Introduction
Service operations defined for the Npcf_PolicyAuthorization Service are shown
in table 4.2.1-1.
_Table 4.2.1-1: Npcf_PolicyAuthorization Service Operations_
* * *
Service Operation Name Description Initiated by
Npcf_PolicyAuthorization_Create Determines and installs the policy according
to the service information provided by an authorized NF service consumer. AF,
NEF Npcf_PolicyAuthorization_Update Determines and updates the policy
according to the modified service information provided by an authorized NF
service consumer. AF, NEF Npcf_PolicyAuthorization_Delete Provides means to
delete the application session context of the NF service consumer. AF, NEF
Npcf_PolicyAuthorization_Notify Notifies NF service consumers of the
subscribed events. PCF Npcf_PolicyAuthorization_Subscribe Allows NF service
consumers to subscribe to the notifications of events. AF, NEF
Npcf_PolicyAuthorization_Unsubscribe Allows NF service consumers to
unsubscribe from the notifications of events. AF, NEF
* * *
NOTE 1: The NEF and the AF use the Npcf_PolicyAuthorization service in the
same way. To improve the readability of the service procedures, only the AF is
mentioned in the following subclauses.
NOTE 2: The NWDAF can be a consumer in the
Npcf_PolicyAuthorization_Notify/Subscribe/Unsubscribe operations to perform
data collection for UEs. While there is no data collected from the PCF by the
NWDAF defined in this Release of the specification.
### 4.2.2 Npcf_PolicyAuthorization_Create service operation
#### 4.2.2.1 General
The Npcf_PolicyAuthorization_Create service operation authorizes the request
from the NF service consumer, and optionally communicates with
Npcf_SMPolicyControl service to determine and install the policy according to
the information provided by the NF service consumer.
The Npcf_PolicyAuthorization_Create service operation creates an application
session context in the PCF.
The following procedures using the Npcf_PolicyAuthorization_Create service
operation are supported:
\- Initial provisioning of service information.
\- Gate control.
\- Initial Background Data Transfer policy indication.
\- Initial provisioning of sponsored connectivity information.
\- Subscription to Service Data Flow QoS notification control.
\- Subscription to Service Data Flow Deactivation.
\- Initial provisioning of traffic routing information.
\- Subscription to resources allocation outcome.
\- Invocation of Multimedia Priority Services.
\- Support of content versioning.
\- Request of access network information.
\- Initial provisioning of service information status.
\- Provisioning of signalling flow information.
\- Support of resource sharing.
\- Indication of Emergency traffic.
\- Invocation of MCPTT.
\- Invocation of MCVideo.
\- Priority sharing indication.
\- Subscription to out of credit notification.
\- Subscription to Service Data Flow QoS Monitoring information.
\- Provisioning of TSCAI input information and TSC QoS related data.
\- Provisioning of bridge management information and port management
information.
\- P-CSCF restoration enhancements.
\- Support of CHEM feature.
\- Support of FLUS feature.
\- Subscription to EPS Fallback report.
\- Subscription to TSN related events.
\- Initial provisioning of required QoS information.
\- Support of QoSHint feature.
\- Subscription to reallocation of credit notification.
#### 4.2.2.2 Initial provisioning of service information
This procedure is used to set up an AF application session context for the
service as defined in 3GPP TS 23.501 [2], 3GPP TS 23.502 [3] and 3GPP TS
23.503 [4].
Figure 4.2.2.2-1 illustrates the initial provisioning of service information.
Figure 4.2.2.2-1: Initial provisioning of service information
When a new AF application session context is being established and media
information for this application session context is available at the AF and
the related media requires PCC control, the AF shall invoke the
Npcf_PolicyAuthorization_Create service operation by sending the HTTP POST
request to the resource URI representing the \"Application Sessions\"
collection resource of the PCF, as shown in figure 4.2.2.2-1, step 1.
The AF shall include in the \"AppSessionContext\" data type in the payload
body of the HTTP POST request a partial representation of the \"Individual
Application Session Context\" resource by providing the
\"AppSessionContextReqData\" data type. The \"Individual Application Session
Context\" resource and the \"Events Subscription\" sub-resource are created as
described below.
The AF shall provide in the body of the HTTP POST request:
\- for IP type PDU sessions, the IP address (IPv4 or IPv6) of the UE in the
\"ueIpv4\" or \"ueIpv6\" attribute; and
\- for Ethernet type PDU sessions, the MAC address of the UE in the \"ueMac\"
attribute.
\- if the \"TimeSensitiveNetworking\" feature is supported, the \"ueMac\"
attribute containing the MAC address of the DS-TT port as received from the
PCF during the reporting of bridge information as defined in subclause
4.2.5.16.
NOTE: The determination of the DS-TT MAC address is specified in subclause
5.28.2 of 3GPP TS 23.501 [2].
The AF shall provide the corresponding service information in the
\"medComponents\" attribute if available. The AF shall indicate to the PCF as
part of the \"medComponents\" attribute whether the service data flow(s) (IP
or Ethernet) should be enabled or disabled with the \"fStatus\" attribute.
If the \"AuthorizationWithRequiredQoS\" feature as defined in subclause 5.8 is
supported, the AF may provide within the MediaComponent data structure
required QoS information as specified in subclause 4.2.2.32.
The AF may include the AF application identifier in the \"afAppId\" attribute
into the body of the HTTP POST request in order to indicate the particular
service that the AF session belongs to.
The AF application identifier may be provided at both
\"AppSessionContextReqData\" data type level, and \"MediaComponent\" data type
level. When provided at both levels, the AF application identifier provided at
\"MediaComponent\" data type level shall have precedence.
The AF application identifier at the \"AppSessionContextReqData\" data type
level may be used to trigger the PCF to indicate to the SMF/UPF to perform the
application detection based on the operator\'s policy as defined in 3GPP TS
29.512 [8].
If the \"IMS_SBI\" feature is supported, the AF may include the AF charging
identifier in the \"afChargId\" attribute for charging correlation purposes.
If the \"TimeSensitiveNetworking\" feature is supported the AF may provide TSN
information as specified in subclauses 4.2.2.24 and 4.2.2.25.
The AF may also include the \"evSubsc\" attribute of \"EventsSubscReqData\"
data type to request the notification of certain user plane events. The AF
shall include the events to subscribe to in the \"events\" attribute, and the
notification URI where to address the Npcf_PolicyAuthorization_Notify service
operation in the \"notifUri\" attribute. The events subscription is
provisioned in the \"Events Subscription\" sub-resource.
The AF shall also include the \"notifUri\" attribute in the
\"AppSessionContextReqData\" data type to indicate the URI where the PCF can
request to the AF the deletion of the \"Individual Application Session
Context\" resource.
If the PCF cannot successfully fulfil the received HTTP POST request due to
the internal PCF error or due to the error in the HTTP POST request, the PCF
shall send the HTTP error response as specified in subclause 5.7.
Otherwise, when the PCF receives the HTTP POST request from the AF, the PCF
shall apply session binding as described in 3GPP TS 29.513 [7]. To allow the
PCF to identify the PDU session for which the HTTP POST request applies, the
AF shall provide in the body of the HTTP POST request:
\- for IP type PDU session, either the \"ueIpv4\" attribute or \"ueIpv6\"
attribute containing the IPv4 or the IPv6 address applicable to an IP flow or
IP flows towards the UE; and
\- for Ethernet type PDU session, the \"ueMac\" attribute containing the UE
MAC address applicable to an Ethernet flow or Ethernet flows towards the UE.
The AF may provide DNN in the \"dnn\" attribute, SUPI in the \"supi\"
attribute, GPSI in the \"gpsi\" attribute, the S-NSSAI in the \"sliceInfo\"
attribute if available for session binding. The AF may also provide the domain
identity in the \"ipDomain\" attribute.
NOTE 1: The \"ipDomain\" attribute is helpful in the following scenario:
Within a network slice instance, there are several separate IP address
domains, with SMF/UPF(s) that allocate Ipv4 IP addresses out of the same
private address range to UE PDU Sessions. The same IP address can thus be
allocated to UE PDU sessions served by SMF/UPF(s) in different address
domains. If one PCF controls several SMF/UPF(s) in different IP address
domains, the UE IP address is thus not sufficient for the session binding. An
AF can serve UEs in different IP address domains, either by having direct IP
interfaces to those domains, or by having interconnections via NATs in the
user plane between the UPF and the AF. If a NAT is used, the AF obtains the IP
address allocated to the UE PDU session via application level signalling and
supplies it for the session binding to the PCF in the \"ueIpv4\" attribute.
The AF supplies an \"ipDomain\" attribute denoting the IP address domain
behind the NAT in addition. The AF can derive the appropriate value from the
source address (allocated by the NAT) of incoming user plane packets. The
value provided in the \"ipDomain\" attribute is operator configurable.
NOTE 2: The \"sliceInfo\" attribute is helpful in the scenario where multiple
network slice instances are deployed in the same DNN, and the same IPv4
address may be allocated to UE PDU sessions in different network slice
instances. If one PCF controls several network slices, the UE IP address is
not sufficient for the session binding. The AF supplies \"sliceInfo\"
attribute denoting the network slice instance that allocated the IPv4 address
of the UE PDU session. How the AF derives S-NSSAI is out of the scope of this
specification.
NOTE 3: When the scenario described in NOTE 1 applies and the AF is a P-CSCF
it is assumed that the P-CSCF has direct IP interfaces to the different IP
address domains and that no NAT is located between the UPF and P-CSCF. How a
non-IMS AF obtains the UE private IP address to be provided to the PCF is out
of scope of the present release; it is unspecified how to support applications
that use a protocol that does not retain the original UE's private IP address.
If the PCF fails in executing session binding, the PCF shall reject the
Npcf_PolicyAuthorization_Create service operation with an HTTP \"500 Internal
Server Error\" response including the \"cause\" attribute set to
\"PDU_SESSION_NOT_AVAILABLE\".
If the request contains the \"medComponents\" attribute the PCF shall store
the received service information. The PCF shall process the received service
information according to the operator policy and may decide whether the
request is accepted or not. The PCF may take the priority information within
the \"resPrio\" attribute into account when making this decision.
If the service information provided in the body of the HTTP POST request is
rejected (e.g. the subscribed guaranteed bandwidth for a particular user is
exceeded), the PCF shall indicate in an HTTP \"403 Forbidden\" response
message the cause for the rejection including the \"cause\" attribute set to
\"REQUESTED_SERVICE_NOT_AUTHORIZED\".
If the service information provided in the HTTP POST request is rejected due
to a temporary condition in the network (e.g. the NWDAF reported the network
slice selected for the PDU session is congested), the PCF may include in the
\"403 Forbidden\" response the \"cause\" attribute set to
\"REQUESTED_SERVICE_TEMPORARILY_NOT_AUTHORIZED\". The PCF may also provide a
retry interval within the \"Retry-After\" HTTP header field. When the AF
receives the retry interval within the \"Retry-After\" HTTP header field, the
AF shall not send the same service information to the PCF again (for the same
application session context) until the retry interval has elapsed. The
\"Retry-After\" HTTP header is described in 3GPP TS 29.500 [5] subclause
5.2.2.2.
The PCF may additionally provide the acceptable bandwidth within the attribute
\"acceptableServInfo\" included in the \"ExtendedProblemDetails\" data
structure returned in the rejection response message.
To allow the PCF and SMF/UPF to perform PCC rule authorization and QoS flow
binding for the described service data flows, the AF shall supply:
\- for IP type PDU session, both source and destination IP addresses and port
numbers in the \"fDescs\" attribute within the \"medSubComps\" attribute, if
such information is available; and
\- for Ethernet type PDU session, the Ethernet Packet filters in the
\"ethfDescs\" attribute within the \"medSubComps\" attribute, if such
information is available.
The AF may specify the ToS traffic class within the \"tosTrCl\" attribute for
the described service data flows together with the \"fDescs\" attribute.
The AF may include the \"resPrio\" attribute at the
\"AppSessionContextReqData\" data type level to assign a priority to the AF
Session as well as include the \"resPrio\" attribute at the \"MediaComponent\"
data type level to assign a priority to the service data flow. The presence of
the \"resPrio\" attribute in both levels does not constitute a conflict as
they each represent different types of priority. The reservation priority at
the \"AppSessionContextReqData\" data type level provides the relative
priority for an AF session while the reservation priority at the
\"MediaComponent\" data type level provides the relative priority for a
service data flow within a session. If the \"resPrio\" attribute is not
specified, the requested priority is PRIO_1.
The PCF shall check whether the received service information requires PCC
rules to be created and provisioned as specified in 3GPP TS 29.513 [7].
Provisioning of PCC rules to the SMF shall be carried out as specified at 3GPP
TS 29.512 [8].
Based on the received subscription information from the AF, the PCF may create
a subscription to event notifications for a related PDU session from the SMF,
as described in 3GPP TS 29.512 [8].
If the PCF created an \"Individual Application Session Context\" resource, the
PCF shall send to the AF a \"201 Created\" response to the HTTP POST request,
as shown in figure 4.2.2.2-1, step 2. The PCF shall include in the \"201
Created\" response:
\- a Location header field; and
\- an \"AppSessionContext\" data type in the payload body.
The Location header field shall contain the URI of the created individual
application session context resource i.e. \"{apiRoot}/npcf-
policyauthorization/v1/app-sessions/{appSessionId}\".
When \"Events Subscription\" sub-resource is created in this procedure, the AF
shall build the sub-resource URI by adding the path segment \"/events-
subscription\" at the end of the URI path received in the Location header
field.
The \"AppSessionContext\" data type payload body shall contain the
representation of the created \"Individual Application Session Context\"
resource and may include the \"Events Subscription\" sub-resource.
The PCF shall include in the \"evsNotif\" attribute:
\- if the AF subscribed to the event \"PLMN_CHG\" in the HTTP POST request,
the \"event\" attribute set to \"PLMN_CHG\" and the \"plmnId\" attribute
including the PLMN identifier and, if available, the NID if the PCF has
previously requested to be updated with this information in the SMF;
\- if the AF subscribed to the event \"ACCESS_TYPE_CHANGE\" in the HTTP POST
request, the \"event\" attribute set to \"ACCESS_TYPE_CHANGE\" and:
> i. the \"accessType\" attribute including the access type, and the
> \"ratType\" attribute including the RAT type when applicable for the
> notified access type; and
>
> ii. if the \"ATSSS\" feature is supported, the \"addAccessInfo\" attribute
> with the additional access type information if available, where the access
> type is encoded in the \"accessType\" attribute, and the RAT type is encoded
> in the \"ratType\" attribute when applicable for the notified access type;
> and
NOTE 4: For a MA PDU session, if the \"ATSSS\" feature is not supported by the
AF the PCF includes the \"accessType\" attribute and the \"ratType\" attribute
with a currently active combination of access type and RAT type (if applicable
for the notifed access type). When both 3GPP and non-3GPP accesses are
available, the PCF includes the information corresponding to the 3GPP access.
> iii. the \"anGwAddr\" attribute including access network gateway address
> when available,
if the PCF has previously requested to be updated with this information in the
SMF; and
\- if the \"IMS_SBI\" feature is supported and if the AF subscribed to the
\"CHARGING_CORRELATION\" event in the HTTP POST request, the \"event\"
attribute set to \"CHARGING_CORRELATION\" and may include the \"anChargIds\"
attribute containing the access network charging identifier(s) and the
\"anChargAddr\" attribute containing the access network charging address.
The AF subscription to other specific events using the
Npcf_PolicyAuthorization_Create request is described in the related
subclauses. Notification of events when the applicable information is not
available in the PCF when receiving the Npcf_PolicyAuthorization_Create
request is described in subclause 4.2.5.
The acknowledgement towards the AF should take place before or in parallel
with any required PCC rule provisioning towards the SMF.
NOTE 5: The behaviour when the AF does not receive the HTTP response message,
or when it arrives after the internal timer waiting for it has expired, or
when it arrives with an indication different than a success indication, are
outside the scope of this specification and based on operator policy.
#### 4.2.2.3 Gate control
This procedure is used by an AF to instruct the PCF about when the service
data flow(s) are to be enabled or disabled for a PDU session.
The AF shall include in the HTTP POST request message described in subclause
4.2.2.2 the \"fStatus\" attribute for the flows to be enabled or disabled
within the \"medComponents\" or \"medSubComps\" attributes.
If a \"medSubComps\" attribute contains a \"flowUsage\" attribute with the
value \"RTCP\", then the IP Flows described by that media subcomponent shall
be enabled in both directions irrespective of the value of the \"fStatus\"
attribute of the corresponding media component.
As result of this action, the PCF shall set the appropriate gate status for
the corresponding active PCC rule(s).
The PCF shall reply to the AF as described in subclause 4.2.2.2.
#### 4.2.2.4 Initial Background Data Transfer policy indication
This procedure is used by an AF to indicate a transfer policy negotiated for
background data transfer using the Npcf_BDTPolicyControl service as described
in 3GPP TS 29.554 [14].
The AF may include in the HTTP POST request message described in subclause
4.2.2.2 a reference identifier related to a transfer policy negotiated for
background data transfer in the \"bdtRefId\" attribute.
NOTE 1: The PCF will retrieve the corresponding transfer policy from the UDR
based on the reference identifier within the \"bdtRefId\" attribute. In case
only one PCF is deployed in the network, transfer policies can be locally
stored in the PCF and the interaction with the UDR is not required.
If the PCF cannot retrieve the transfer policy, the PCF shall set to
TP_NOT_KNOWN the \"servAuthInfo\" attribute in the HTTP response message to
the AF to indicate that the transfer policy is unknown.
If the time window of the received transfer policy has expired, the PCF shall
set to TP_EXPIRED the \"servAuthInfo\" attribute in the HTTP response message
to indicate to the AF that the transfer policy has expired. Otherwise, if the
time window of the received transfer policy has not yet occurred, the PCF
shall set to TP_NOT_YET_OCCURRED the \"servAuthInfo\" attribute in the HTTP
response message to the AF to indicate that the time window of the transfer
policy has not yet occurred.
NOTE 2: In the case that the PCF cannot retrieve the transfer policy, the
transfer policy time window has not yet occurred or the transfer policy
expired, the PCF makes the decision without considering the transfer policy.
The PCF shall reply to the AF as described in subclause 4.2.2.2.
#### 4.2.2.5 Initial provisioning of sponsored connectivity information
This procedure is used by an AF to indicate sponsored data connectivity when
\"SponsoredConnectivity\" feature is supported.
The AF shall provide in the \"AppSessionContext\" data type of the HTTP POST
request message described in subclause 4.2.2.2 an application service provider
identity and a sponsor identity within the \"aspId\" attribute and \"sponId\"
attribute within the \"ascReqData\" attribute. Additionally, the AF may
provide an indication to the PCF of sponsored data connectivity not enabled by
including the \"sponStatus\" attribute set to \"SPONSOR_DISABLED\".
To support the usage monitoring of sponsored data connectivity, the AF may
subscribe with the PCF to the notification of usage threshold reached. The AF
shall include:
\- an entry of the \"AfEventSubscription\" data type in the \"events\"
attribute with the \"event\" attribute set to \"USAGE_REPORT\"; and
\- the \"usgThres\" attribute of \"UsageThreshold\" data type in the
\"EventsSubscReqData\" data type with:
a) the total volume in the \"totalVolume\" attribute; or
b) the uplink volume only in the \"uplinkVolume\" attribute; or
c) the downlink volume only in the \"downlinkVolume\"; and/or
d) the time in the \"duration\" attribute.
NOTE 1: If the AF is in the user plane, the AF can handle the usage monitoring
and therefore it is not required to provide a usage threshold to the PCF as
part of the sponsored connectivity functionality.
When the AF indicated to enable sponsored data connectivity, and the UE is
roaming in a VPLMN, the following procedures apply:
\- If the AF is located in the HPLMN, for home routed roaming case and when
the operator policies do not allow accessing the sponsored data connectivity
with this roaming case, the H-PCF shall reject the service request and shall
include in the HTTP \"403 Forbidden\" response message the \"cause\" attribute
set to \"UNAUTHORIZED_SPONSORED_DATA_CONNECTIVITY\".
\- If the AF is located in the VPLMN, the V-PCF shall reject the service
request and shall include in the HTTP \"403 Forbidden\" response message the
\"cause\" attribute set to \"UNAUTHORIZED_SPONSORED_DATA_CONNECTIVITY\".
When the AF indicated to enable sponsored data connectivity, and the UE is
non-roaming or roaming with the home routed case and the operator policies
allow accessing the sponsored data connectivity with this roaming case, the
following procedures apply:
\- If the SMF does not support sponsored connectivity and the required
reporting level for that service indicates a sponsored connectivity level
according to 3GPP TS 29.512 [8], then the PCF shall reject the request and
shall include in the HTTP \"403 Forbidden\" response message the \"cause\"
attribute set to \"REQUESTED_SERVICE_NOT_AUTHORIZED\".
\- If the SMF supports sponsored data connectivity feature or the required
reporting level is different from sponsored connectivity level as described in
3GPP TS 29.512 [8], then the PCF, based on operator policies, shall check
whether it is required to validate the sponsored connectivity data. If it is
required, it shall perform the authorizations based on sponsored data
connectivity profiles. If the authorization fails, the PCF shall include in
the HTTP \"403 Forbidden\" response message the \"cause\" attribute set to
\"UNAUTHORIZED_SPONSORED_DATA_CONNECTIVITY\".
NOTE 2: The PCF is not required to verify that a trust relationship exists
between the operator and the sponsors.
The PCF shall reply to the AF as described in subclause 4.2.2.2.
#### 4.2.2.6 Subscriptions to Service Data Flow QoS notification control
The subscription to Service Data Flow QoS notification control is used by an
AF to subscribe to receive a notification when the GBR QoS targets for one or
more service data flows can no longer (or can again) be guaranteed.
NOTE: It may happen that the GBR QoS targets for one or more PCC rules (i.e.
Service Data Flows) cannot be guaranteed, either permanently or temporarily in
the radio access network.
The AF shall use the \"EventsSubscReqData\" data type as described in
subclause 4.2.2.2 and shall include in the HTTP POST request message an event
within the \"events\" attribute with the \"event\" attribute set to
\"QOS_NOTIF\".
The PCF shall reply to the AF as described in subclause 4.2.2.2.
As result of this action, the PCF shall set the appropriate subscription to
QoS notification control for the corresponding PCC rule(s) as described in in
3GPP TS 29.512 [8].
#### 4.2.2.7 Subscription to Service Data Flow Deactivation
This procedure is used by an AF to subscribe to the notification of
deactivation of one or more Service Data Flows within the AF application
session context.
NOTE: It may happen that one or more PCC rules (i.e. Service Data Flows) are
deactivated at the SMF at certain time, either permanently or temporarily, due
to e.g. release of resources or out of credit condition.
The AF shall use the \"EventsSubscReqData\" data type as described in
subclause 4.2.2.2 and shall include in the HTTP POST request message an event
within the \"events\" attribute with the \"event\" attribute set to
\"FAILED_RESOURCES_ALLOCATION\".
The PCF shall reply to the AF as described in subclause 4.2.2.2.
As result of this action, the PCF shall set the appropriate subscription to
service data flow deactivation for the corresponding PCC rule(s) as described
in in 3GPP TS 29.512 [8].
#### 4.2.2.8 Initial provisioning of traffic routing information
This procedure is used by an AF to:
\- influence SMF traffic routing decisions to a local access to a Data Network
identified by a DNAI; and/or
\- request subscriptions to notifications about UP path management events
related to the PDU session,
when \"InfluenceOnTrafficRouting\" feature is supported.
NOTE 1: The AF uses the Npcf_PolicyAuthorization service for requests
targeting specific on-going PDU sessions of individual UE(s). The AF requests
that target existing or future PDU Sessions of multiple UE(s) or any UE are
sent via the NEF and may target multiple PCF(s), as described in 3GPP TS
29.513 [7].
The AF shall include in the HTTP POST request message described in subclause
4.2.2.2 the \"afRoutReq\" attribute of \"AfRoutingRequirement\" data type with
specific routing requirements for the application traffic flows either within
\"AppSessionContextReqData\" data type for the service indicated in the
\"afAppId\" attribute, or within the \"medComponents\" attribute. When
provided at both levels, the \"afRoutReq\" attribute value in the
\"medComponents\" attribute shall have precedence over the \"afRoutReq\"
attribute included in the \"AppSessionContextReqData\" data type.
The AF may include traffic routing requirements together with service
information.
The AF may request to influence SMF traffic routing decisions to a DNAI. The
AF shall include in the \"afRoutReq\" attribute:
a) A list of routes to locations of applications in the \"routeToLocs\"
attribute. Each element of the list shall contain:
\- a DNAI in the \"dnai\" attribute to indicate the location of the
application towards which the traffic routing is applied; and
\- either a routing profile identifier in the \"routeProfId\" attribute, or
the explicit routing information in the \"routeInfo\" attribute.
The AF may include in the \"afRoutReq\" attribute:
a) Indication of application relocation possibility in the \"appReloc\"
attribute.
b) Temporal validity during which the AF request is valid shall be indicated
with the \"startTime\" and \"stopTime\" attributes.
c) Spatial validity during which the AF request is valid shall be indicated in
terms of validity areas encoded in the \"spVal\" attribute of
\"SpatialValidity\" data type. The \"SpatialValidity\" data type consists of a
list of presence areas included in the \"presenceInfoList\" attribute, where
each element shall include the presence reporting area identifier in the
\"praId\" attribute and may include the elements composing a presence area
encoded in the attributes: \"trackingAreaList\", \"ecgList\", \"ncgList\",
\"globalRanNodeIdList\".
d) Indication of UE IP address preservation in the \"addrPreserInd\" attribute
if the URLLC feature is supported.
The AF may also subscribe to notifications about UP path management events.
The AF shall include in the \"upPathChgSub\" attribute:
\- notifications of early and/or late DNAI change, using the attribute
\"dnaiChgType\" indicating whether the subscription is for \"EARLY\", \"LATE\"
or \"EARLY_LATE\";
\- the notification URI where the AF is receiving the
Nsmf_EventExposure_Notify service operation in the \"notificationUri\"
attribute; and
\- the notification correlation identifier assigned by the AF in the
\"notifCorreId\" attribute.
If the URLLC feature is supported, the AF may include an indication of AF
acknowledgement to be expected as an \"afAckInd\" attribute within the
\"upPathChgSub\" attribute.
The PCF shall reply to the AF as described in subclause 4.2.2.2.
The PCF shall store the routing requirements included in the \"afRoutReq\"
attribute.
The PCF shall check whether the received routing requirements requires PCC
rules to be created or provisioned to include or modify traffic steering
policies, the AF transaction identifier and the application relocation
possibility as specified in 3GPP TS 29.513 [7]. Provisioning of PCC rules to
the SMF shall be carried out as specified in 3GPP TS 29.512 [8].
NOTE 2: The AF receives the notification about UP path management events by
the Nsmf_EventExposure_Notify service operation as defined in subclause
4.2.2.2 of 3GPP TS 29.508 [13].
#### 4.2.2.9 Void
#### 4.2.2.10 Subscription to resources allocation outcome
This procedure is used by an AF to subscribe to notifications when the
resources associated to the corresponding service information have been
allocated and/or cannot be allocated.
The AF shall use the \"EventsSubscReqData\" data type as described in
subclause 4.2.2.2 and shall include in the HTTP POST request message:
\- if the AF requests the PCF to provide a notification when the resources
associated to the service information have been allocated, an event entry
within the \"events\" attribute with the \"event\" attribute set to
\"SUCCESSFUL_RESOURCES_ALLOCATION\"; and/or
\- if the AF requests the PCF to provide a notification when the resources
associated to the service information cannot be allocated, an event entry
within the \"events\" attribute with the \"event\" attribute set to
\"FAILED_RESOURCES_ALLOCATION\".
The PCF shall reply to the AF as described in subclause 4.2.2.2.
As a result of this action, the PCF shall set the appropriate subscription to
notification of resources allocation outcome for the corresponding PCC Rule(s)
as described in 3GPP TS 29.512 [8].
#### 4.2.2.11 Void
#### 4.2.2.12 Invocation of Multimedia Priority Services
This procedure allows an AF, as per 3GPP TS 22.153 [23], to request
prioritized access to system resources in situations such as during
congestion.
The AF may include the \"mpsId\" attribute to indicate that the new AF session
relates to an MPS session.
The \"mpsId\" attribute shall contain the national variant for the MPS service
name indicating an MPS session. The \"resPrio\" attribute shall include the
priority value of the related priority service.
If the AF supports the SBI Message Priority mechanism for an MPS session, it
shall include the \"3gpp-Sbi-Message-Priority\" custom HTTP header towards the
PCF as described in subclause 6.8.2 of 3GPP TS 29.500 [5].
NOTE: If the AF supports the SBI Message Priority mechanism for an MPS
session, the AF will include the \"3gpp-Sbi-Message-Priority\" custom HTTP
header with a priority value equivalent to the value of the \"resPrio\"
attribute. Highest user priority value is mapped in the corresponding lowest
value of the \"3gpp-Sbi-Message-Priority\" custom HTTP header.
When the PCF receives the \"mpsId\" attribute indicating an MPS session, the
PCF shall take specific actions on the corresponding PDU session to ensure
that the MPS session is prioritized as specified in 3GPP TS 29.512 [8].
#### 4.2.2.13 Support of content versioning
The support of the media component versioning is optional. When the
\"MediaComponentVersioning\" feature is supported, the AF and the PCF shall
comply with the procedures specified in this subclause.
If required by operator policies, the AF shall assign a content version to the
media component related to certain service and shall provide assigned content
version to the PCF in the \"contVer\" attribute included in the corresponding
media component entry of the \"medComponents\" attribute.
If the PCF receives the \"contVer\" attribute for a certain media component,
the PCF shall follow the procedures described in 3GPP TS 29.512 [8], subclause
4.2.6.2.14.
#### 4.2.2.14 Request of access network information
This procedure is used by an AF to request the PCF to report the access
network information (i.e. user location and/or user timezone information) at
the creation of the \"Individual Application Session Context\" resource, when
the \"NetLoc\" feature is supported.
The AF shall include in the HTTP POST request message described in subclause
4.2.2.2:
\- an entry of the \"AfEventSubscription\" data type in the \"events\"
attribute with:
a) the \"event\" attribute set to the value \"ANI_REPORT\"; and
b) the \"notifMethod\" attribute set to the value \"ONE_TIME\"; and
\- the \"reqAnis\" attribute, with the required access network information,
i.e. user location and/or user time zone information).
When the PCF determines that the access network does not support the access
network information reporting because the SMF does not support the NetLoc
feature, the PCF shall respond to the AF including in the
\"EventsNotification\" data type the \"noNetLocSupp\" attribute set to
\"ANR_NOT_SUPPORTED\" value. Otherwise, the PCF shall immediately configure
the SMF to provide such access information, as specified in 3GPP TS 29.512
[8].
The PCF shall reply to the AF with an HTTP response message as described in
subclause 4.2.2.2.
#### 4.2.2.15 Initial provisioning of service information status
When the \"IMS_SBI\" feature is supported, the AF may provide the status of
the service information.
If the AF provides service information that has been fully negotiated (e.g.
based on the SDP answer), the AF may include the \"servInfStatus\" attribute
set to \"FINAL\". In this case the PCF shall authorize the session and
provision the corresponding PCC rules to the SMF.
The AF may additionally provide preliminary service information not fully
negotiated yet (e.g. based on the SDP offer) at an earlier stage. To do so,
the AF shall include the \"servInfStatus\" attribute set to \"PRELIMINARY\".
Upon receipt of such preliminary service information, the PCF shall perform an
early authorization check of the service information. If the AF requests the
PCF to report the access network information together with preliminary service
information, the PCF shall immediately configure the SMF to provide the access
network information.
#### 4.2.2.16 Provisioning of signalling flow information
This subclause is applicable when IMS restoration is supported according to
the supported feature \"ProvAFsignalFlow\" as described in subclause 5.8.
This procedure allows an AF to provision information about the AF signalling
IP flows between the UE and the AF.
The AF shall provide:
\- the IP address (IPv4 or IPv6) of the UE in the \"ueIPv4\" or \"ueIPv6\"
attribute; and
\- a media component within the \"medComponents\" attribute including:
\- the \"medCompN\" attribute set to \"0\"; and
\- one or more media subcomponents within the \"medSubComps\" attribute
representing the AF signalling IP flows, where each media subcomponent shall
contain:
\- the \"flowUsage\" attribute set to the value \"AF_SIGNALLING\";
\- the \"fNum\" attribute set according to the rules described in Annex C;
\- the \"fDesc\" attribute containing the IP flows of the AF signalling flow;
\- the \"fStatus\" set to the value \"ENABLED\"; and
\- the \"afSigProtocol\" set to the value corresponding to the signalling
protocol used between the UE and the AF.
The PCF shall perform session binding and shall reply to the AF as described
in subclause 4.2.2.2.
PCC rules related to the AF signalling IP flows could have been provisioned to
SMF using the corresponding procedures specified in 3GPP TS 29.512 [8] at an
earlier stage (e.g. typically at the establishment of the QoS flow for AF
Signalling IP Flows). The PCF shall install the corresponding dynamic PCC rule
for the AF signalling IP flows.
The AF may de-provision the information about the AF signalling IP flows at
any time. To do that, if the \"Individual Application Session Context\"
resource is only used to provide information about the AF Signalling IP flows,
the AF shall remove the resource by sending an Npcf_PolicyAuthorization_Delete
service operation as service operation towards the PCF as defined in subclause
4.2.4.2. Otherwise, the AF shall remove the IP flows within the media
component invoking the Npcf_PolicyAuthorization_Update service operation as
defined in subclause 4.2.3.17.
#### 4.2.2.17 Support of resource sharing
This procedure is used by an AF to indicate that a media component of an
Individual Application Session Context resource may share resources with other
media components in the related direction in other Individual Application
Session Context resources when the \"ResourceSharing\" feature is supported.
The AF may include the \"sharingKeyUl\" attribute and/or \"sharingKeyDl\"
attribute within a media component of the \"medComponents\" attribute to
indicate that the related media of the created new Individual Application
Session Context resource may share resources with other media components in
the related direction that include the same value for the \"sharingKeyUl\"
attribute and/or \"sharingKeyDl\" attribute.
The PCF shall reply to the AF with an HTTP response message as described in
subclause 4.2.2.2.
If the \"sharingKeyUl\" attribute and/or \"sharingKeyDl\" attribute are
provided within a media component of the \"medComponents\" attribute, the PCF
may apply the mechanisms for resource sharing as described in 3GPP TS 29.512
[8], subclause 4.2.6.2.8.
#### 4.2.2.18 Indication of Emergency traffic
When the \"IMS_SBI\" feature is supported, this procedure allows an AF to
indicate that the new AF session context relates to emergency traffic.
The AF may include the \"servUrn\" attribute to indicate that the new AF
session context relates to emergency traffic. Additionally, the AF may include
the \"afReqData\" attribute to indicate the additional information requested
for the AF session context.
When the PCF receives the \"servUrn\" attribute indicating an emergency
session, the PCF may apply special policies, for instance prioritising service
flows relating to the new AF session context or allowing these service flows
free of charge.
If the \"servUrn\" attribute indicates that the new AF session context relates
to emergency traffic and the \"afReqData\" attribute is received, the PCF
shall reply to the AF as described in subclause 4.2.2.2 and shall provide the
requested available user information in the \"ueIds\" attribute included
within the \"ascRespData\" attribute in the HTTP \"201 Created\" response.
If the AF supports the SBI Message Priority mechanism for an emergency
session, it shall include the \"3gppâ€‘Sbiâ€‘Messageâ€‘Priority\" custom HTTP header
towards the PCF as described in subclause 6.8.2 of 3GPP TS 29.500 [5].
NOTE: If the AF supports the SBI Message Priority mechanism for an emergency
session, the AF includes the \"3gpp-Sbi-Message-Priority\" custom HTTP header
based on AF policies in relation to valid values of the \"servUrn\" attribute.
The highest user priority value is mapped to the corresponding lowest value of
the \"3gpp-Sbi-Message-Priority\" custom HTTP header.
When the new AF session context does not indicate emergency traffic and the
session binding function detects that the binding is to a PDU session
established to the Emergency DNN, the PCF shall reject the HTTP POST request
and shall indicate in an HTTP \"403 Forbidden\" response message the cause for
the rejection including the \"cause\" attribute set to
\"UNAUTHORIZED_NON_EMERGENCY_SESSION\".
#### 4.2.2.19 Invocation of MCPTT
When the feature \"MCPTT\" is supported by the AF and the PCF, this procedure
allows an AF to request prioritized access to system resources in situations
such as an MCPTT session with priority call.
The AF may include the \"mcpttId\" attribute to indicate that the new
\"Individual Application Session Context\" resource relates to an MCPTT
session with priority call.
When the PCF receives the \"mcpttId\" attribute indicating an MCPTT session
and the \"resPrio\" attribute, the PCF shall take specific actions on the
corresponding PDU session to ensure that the MCPTT session is prioritized as
specified in 3GPP TS 29.512 [8].
Additionally, when the \"PrioritySharing\" feature is supported, the PCF may
receive the \"prioSharingInd\" attribute within the media component received
in the \"medComponents\" attribute as described in subclause 4.2.2.21. In this
case, and if \"MCPTT-Preemption\" feature is supported, the PCF may receive
pre-emption information as also described in subclause 4.2.2.21.
For the handling of MCPTT session with priority call, see Annex B.13
#### 4.2.2.20 Invocation of MCVideo
When the feature \"MCVideo\" is supported by the AF and the PCF, this
procedure allows an AF to request prioritized access to system resources in
situations such as an MCVideo session with priority call.
The AF may include the \"mcVideoId\" attribute to indicate that the new
\"Individual Application Session Context\" resource relates to an MCVideo
session with priority call.
When the PCF receives the \"mcVideoId\" attribute indicating an MCVideo
session and the \"resPrio\" attribute, the PCF shall take specific actions on
the corresponding PDU session to ensure that the MCVideo session is
prioritized as specified in 3GPP TS 29.512 [8].
For the handling of MCVideo session with priority call, see Annex B.15
#### 4.2.2.21 Priority sharing indication
When the \"PrioritySharing\" feature is supported, the AF may indicate to the
PCF that the related media flow is allowed to use the same Allocation and
Retention Priority (ARP) as media flows belonging to other \"Individual
Application Session Context\" resources.
The AF may include the \"prioSharingInd\" attribute set to \"ENABLED\" within
a media component of the \"medComponents\" attribute to indicate to the PCF
that the related media flow is allowed to use the same Allocation and
Retention Priority as media flows which:
\- are assigned the same 5QI in the PCF; and
\- belong to other \"Individual Application Session Context\" resources bound
to the same PDU session that also contain the \"prioSharingInd\" attribute set
to \"ENABLED\".
If the \"MCPTT-Preemption\" feature is supported, the AF may also include:
\- within a media component of the \"medComponents\" attribute, the
\"preemptCap\" attribute containing the suggested pre-emption capability value
and the \"preemptVuln\" attribute containing the suggested pre-emption
vulnerability value, for the PCF to determine ARP values;
\- within the \"ascReqData\" attribute in the request body, the
\"preemptControlInfo\" attribute containing the pre-emption control
information for the PCF to perform pre-emption control as described in 3GPP TS
29.512 [8], subclause 4.2.6.2.9; and
\- within the \"evSubsc\" attribute, the \"event\" attribute set to
\"FAILED_RESOURCES_ALLOCATION\" to request the notification for resource
allocation failure.
Upon reception of this information, the PCF shall behave as described in 3GPP
TS 29.512 [8], subclause 4.2.6.2.9. For the handling of MCPTT sessions, see
Annex B.10.
NOTE 1: Service data flow deactivation procedures will apply according to
subclauses 4.2.2.7, 4.2.3.7, 4.2.5.5.
NOTE 2: This enhancement avoids the risk that a QoS flow establishment request
is rejected if the maximum number of active QoS flows is exceeded.
The PCF shall reply to the AF with an HTTP response message as described in
subclause 4.2.2.2.
#### 4.2.2.22 Subscription to Out of Credit notification
This procedure is used by the AF if the \"IMS_SBI\" feature is supported to
subscribe to notifications of credit not available for the Service Data Flows
within the AF application session context.
NOTE: It can happen that there are one or more PCC rules (i.e. Service Data
Flows) with credit not available, each one with their corresponding
termination action (terminate, redirect, access restricted).
The AF shall use the \"EventsSubscReqData\" data type as described in
subclause 4.2.2.2 and shall include in the HTTP POST request message an event
within the \"evSubsc\" attribute with the \"event\" attribute set to the value
\"OUT_OF_CREDIT\".
As result of this action, the PCF shall set the appropriate subscription to
out of credit notification for the corresponding PCC rule(s) as described in
3GPP TS 29.512 [8].
The PCF shall reply to the AF with an HTTP response message as described in
subclause 4.2.2.2.
#### 4.2.2.23 Subscriptions to Service Data Flow QoS Monitoring Information
The subscription to Service Data Flow QoS monitoring information is used by an
AF to receive a notification about the packet delay between UPF and UE, when
the \"QoSMonitoring\" feature is supported.
The AF shall use the \"EventsSubscReqData\" data type as described in
subclause 4.2.2.2 and shall include:
\- the requested QoS monitoring parameter(s) to be measured (i.e. DL, UL
and/or round trip packet delay) within the \"reqQosMonParams\" attribute;
\- an entry of the \"AfEventSubscription\" data type in the \"events\"
attribute with:
a) the \"event\" attribute set to the value \"QOS_MONITORING\"; and
b) the \"notifMethod\" attribute set to the value \"EVENT_DETECTION\" or
\"PERIODIC\"; and
c) when the \"notifMethod\" attribute is set to the value \"PERIODIC\", the
reporting period within the \"repPeriod\" attribute; and
d) when the \"notifMethod\" attribute set to the value \"EVENT_DETECTION\",
the minimum waiting time between subsequent reports within the \"waitTime\"
attribute.
\- when the \"notifMethod\" attribute set to the value \"EVENT_DETECTION\",
the \"qosMon\" attribute, with the required Qos Monitoring information, i.e.:
\- the delay threshold for downlink with the \"repThreshDl\" attribute;
\- the delay threshold for uplink with the \"repThreshUl\" attribute; and/or
\- the delay threshold for round trip with the \"repThreshRp\" attribute.
The AF may include in \"EventsSubscReqData\" data type the notification
correlation identifier assigned by the AF within the \"notifCorreId\"
attribute.
The AF shall include more than one \"AfEventSubscription\" data type within
the \"EventsSubscReqData\" data type if more than one notify method is
required.
The PCF shall reply to the AF as described in subclause 4.2.2.2.
As result of this action, the PCF shall set the appropriate subscription to
QoS Monitoring information for the corresponding PCC rule(s) as described in
3GPP TS 29.512 [8].
#### 4.2.2.24 Provisioning of TSCAI input Information and QoS related data
If the \"TimeSensitiveNetworking\" feature is supported the TSN AF may provide
TSCAI input information and QoS related data to the PCF by the
Npcf_PolicyAuthorization_Create service operation to describe the TSC traffic
pattern and QoS characteristics for use in the 5G System.
The TSN AF shall derive the TSCAI input information and the QoS related data
for a given TSN stream or flow of aggregated TSN streams as defined in
subclauses 5.27.2 and 5.28.4 of 3GPP TS 23.501 [2] respectively.
To indicate the TSCAI input information of a TSN stream or aggregated set of
TSN streams, the TSN AF may include for the uplink flow direction (ingress
interface of the DS-TT/UE) in the \"tscaiInputUl\" attribute and/or for the
downlink flow direction (ingress interface of the NW-TT) the \"tscaiInputDl\"
attribute included in a media component entry of the \"medComponents\"
attribute:
\- the time period between the start of two bursts of a TSN stream or
aggregated TSN streams in reference to the TSN GM encoded in the
\"periodicity\" attribute; and
\- the arrival time of the first data burst of a TSN stream or aggregated TSN
streams in reference to the TSN GM encoded in the \"burstArrivalTime\"
attribute.
The uplink and/or downlink flow of the TSN stream or aggregated set of TSN
streams shall be encoded within the corresponding \"MediaSubComponent\"
entries of the \"medSubComps\" attribute, in the \"ethfDescs\" attribute.
To indicate the TSC QoS related data of a TSN stream or aggregated set of TSN
streams, the TSN AF may include in the \"tsnQos\" attribute included in a
media component entry of the \"medComponents\" attribute;
\- the maximum burst size encoded in the \"maxTscBurstSize\" attribute;
\- the maximum time a packet may be delayed encoded in the \"tscPackDelay\"
attribute;
\- the TSC traffic priority in scheduling resources among other TSN streams
encoded in the \"tscPrioLevel\" attribute.
The TSN AF may also include the max bitrates in uplink and downlink within the
\"marBwUl\" attribute and the \"marBwDl\" attribute of the \"medComponents\"
attribute respectively.
The PCF shall reply to the TSN AF as described in subclause 4.2.2.2.
The PCF shall check whether the received TSCAI input container and TSC QoS
related data require to create PCC rules to provide the SMF with derived QoS
characteristics and the received TSCAI input container. Provisioning of PCC
rule(s) to the SMF shall be carried out as specified in 3GPP TS 29.512 [8].
#### 4.2.2.25 Provisioning of bridge management information and port
management information
If the \"TimeSensitiveNetworking\" feature is supported the AF may provide a
BMIC for the Bridge functionality of UPF/NW-TT and PMIC(s) for the DS-TT port
and/or the NW-TT ports to configure the 5G system as a TSN bridge by invoking
the Npcf_PolicyAuthorization_Create service operation to the PCF.
The AF may include in the \"AppSessionContextReqData\" data type:
\- the DS-TT PMIC encoded in the attribute \"tsnPortManContDstt\" and/or the
one or more NW-TT PMIC(s) encoded in the \"tsnPortManContNwtts\" attribute, if
available, for the DS-TT port and NW-TT ports allocated for a PDU session. The
PMIC(s) are encoded in the \"PortManagementContainer\" data type, which
includes the port management information in the \"portManCont\" attribute and
the related TSN port number in the \"portNum\" attribute; and/or
\- the BMIC encoded in the \"tsnBridgeManCont\", if available, for the Bridge
functionality of the UPF/NW-TT allocated for a PDU session. The BMIC is
encoded in the \"BridgeManagementContainer\" data type.
#### 4.2.2.26 Invocation of Mission Critical Services
This procedure allows an AF, as per 3GPP TS 22.179 [45], to request
prioritized access to system resources in situations such as during
congestion.
The AF may include the \"mcsId\" attribute to indicate that the new AF session
relates to an MCS session.
The \"mcsId\" attribute shall contain the national variant for the MCS service
name indicating an MCS session. The \"resPrio\" attribute shall include the
priority value of the related priority service.
If the AF supports the SBI Message Priority mechanism for an MCS session, it
shall include the \"3gpp-Sbi-Message-Priority\" custom HTTP header towards the
PCF as described in subclause 6.8.2 of 3GPP TS 29.500 [5].
NOTE: If the AF supports the SBI Message Priority mechanism for an MCS
session, the AF will include the \"3gpp-Sbi-Message-Priority\" custom HTTP
header with a priority value equivalent to the value of the \"resPrio\"
attribute. Highest user priority value is mapped in the corresponding lowest
value of the \"3gpp-Sbi-Message-Priority\" custom HTTP header.
When the PCF receives the \"mcsId\" attribute indicating an MCS session, the
PCF shall take specific actions on the corresponding PDU session to ensure
that the MCS session is prioritised as specified in 3GPP TS 29.512 [8].
#### 4.2.2.27 P-CSCF restoration enhancements
The P-CSCF restoration custom operation is applicable when the PCF based
Restoration Enhancement, as defined in 3GPP TS 23.380 [39], represented by the
supported feature \"PCSCF-Restoration-Enhancement\" is supported by both
P-CSCF and PCF.
Figure 4.2.2.27-1 illustrates the P-CSCF restoration enhancements.
Figure 4.2.2.27-1: P-CSCF restoration enhancements
The P-CSCF acting as an AF shall invoke the \"P-CSCF restoration\" custom
operation sending an HTTP POST request to the resource URI representing the
custom operation (POST .../pcscf-restoration) as shown in figure 4.2.2.27-1,
step 1, in case P-CSCF restoration needs to be performed.
The P-CSCF shall include in the \"PcscfRestorationRequestData\" data type in
the payload body of the HTTP POST request:
\- the IP address (IPv4 or IPv6) of the UE in the \"ueIpv4\" or \"ueIpv6\"
attribute, and if the IP address is not unique (e.g. private IPv4 case), the
\"ipDomain\" attribute or the \"sliceInfo\" attribute if available; or
\- if the IP address is not available or if the IP address is not unique and
the \"ipDomain\" attribute and the \"sliceInfo\" attribute are not available,
the SUPI in the \"supi\" attribute and the DNN in the \"dnn\" attribute.
The PCF shall identify the PDU session for which the HTTP POST request
applies. If the PCF fails in identifying the PDU session, the PCF shall reject
the \"P-CSCF restoration\" custom operation with an HTTP \"500 Internal Server
Error\" response including the \"cause\" attribute set to
\"PDU_SESSION_NOT_AVAILABLE\".
Otherwise, the PCF shall acknowledge the request and shall send to the AF a
\"204 No content\" response to the HTTP POST request, as shown in figure
4.2.2.27-1, step 2.
The PCF shall send a request for P-CSCF restoration to the SMF for the
corresponding PDU session as described in 3GPP TS 29.512 [8], subclause
4.2.3.18.
4.2.2.28 Support of CHEM feature
When CHEM feature is supported, the AF may include the value of Maximum Packet
Loss Rate for UL within the \"maxPacketLossRateUl\" attribute and/or the value
of Maximum Packet Loss Rate for DL within the \"maxPacketLossRateDl\"
attribute in \"medComponents\" attribute. For CHEM feature, see Annex B.14.
#### 4.2.2.29 Support of FLUS feature
When \"FLUS\" feature is supported by the AF, the AF may include the
\"flusId\" attribute within a media component of the \"medComponents\"
attribute to indicate that the related media of the created new Individual
Application Session Context resource corresponds to a FLUS media stream.
Additional QoS information for the treatment of FLUS media may be provided
within \"desMaxLatency\" attribute and/or \"desMaxLoss\" attribute.
#### 4.2.2.30 Subscription to EPS Fallback report
When the \"EPSFallbackReport\" feature is supported, the AF subscribes to EPS
Fallback report to be notified of the rejection in 5GS of the requested
resources associated to service information for voice media type and the
subsequent fallback to EPS of the resources associated to the voice media and
other medias requested by this AF.
The AF shall use the \"EventsSubscReqData\" data type as described in
subclause 4.2.2.2 and shall include in the HTTP POST request message an event
within the \"events\" attribute with the \"event\" attribute set to
\"EPS_FALLBACK\". The AF shall request to the PCF to report EPS Fallback in
conjuction with providing the PCF with AF service information for voice media
type as described in subclause 4.2.2.2.
The PCF shall reply to the AF as described in subclause 4.2.2.2.
As result of this action, the PCF shall set the appropriate subscription to
EPS Fallback report for the corresponding PCC rule(s) as described in in 3GPP
TS 29.512 [8].
#### 4.2.2.31 Subscription to TSN related events
This procedure is used by the TSN AF if the \"TimeSensitiveNetworking\"
feature is supported to subscribe to notifications of updated 5GS Bridge
information, e.g., DS-TT PMIC and/or NW-TT PMIC(s) and/or BMIC availability
within the Individual Application Session Context resource created to handle
the TSN Bridge in the context of a PDU session.
The AF shall use the \"EventsSubscReqData\" data type as described in
subclause 4.2.2.2 and shall include in the HTTP POST request message within
the \"evSubsc\" attribute an event within \"events\" attribute with the
\"event\" attribute set to the value \"TSN_BRIDGE_INFO\" to subscribe to the
reception of 5GS Bridge information
The PCF shall reply to the AF with an HTTP response message as described in
subclause 4.2.2.2.
#### 4.2.2.32 Initial provisioning of required QoS information
This procedure is used by an AF to request that a data session to a UE is set
up with a specific QoS (e.g. low latency or jitter) and priority handling when
the \"AuthorizationWithRequiredQoS\" feature is supported.
The AF may provide within one or more entries of the \"medComponents\"
attribute included in the \"ascReqData\" attribute of the HTTP POST request
message described in subclause 4.2.2.2 a reference to pre-defined QoS
information within the \"qosReference\" attribute.
Additionally, if the AF supports adjustment to different QoS parameter
combinations, the AF may provide a prioritized list of one or more QoS
references within the \"altSerReqs\" attribute, where the lower the index of
the array for a given entry, the higher the priority. If the
\"DisableUENotification\" feature is supported, the AF may also indicate to
the PCF that the UE does not need to be informed about changes related to
Alternative QoS Profiles by including the \"disUeNotif\" attribute set to
true.
When the AF provides the \"altSerReqs\" attribute, the AF shall also subscribe
to receive notifications from the PCF when the resources associated to the
corresponding service information have been allocated as described in
subclause 4.2.2.10 and when the GBR QoS targets for one or more service data
flows can no longer (or can again) be guaranteed, as described in subclause
4.2.2.6.
Due to the received QoS information, the PCF may need to provision or modify
the related PCC rules as specified in 3GPP TS 29.513 [7] and provide the
related information towards the SMF following the corresponding procedures
specified in 3GPP TS 29.512 [8].
The PCF shall reply to the AF as described in subclause 4.2.2.2.
#### 4.2.2.33 Support of QoSHint feature
If the QoSHint feature is supported by the AF, the AF may include the
\"desMaxLatency\" attribute and/or \"desMaxLoss\" attribute within a media
component of the \"medComponents\" attribute to indicate that the related
media of the created Individual Application Session Context resource has
specific latency and/or loss demands.
#### 4.2.2.34 Subscription to Reallocation of Credit notification
This procedure is used by the AF if the \"IMS_SBI\" and the
\"ReallocationOfCredit\" features are supported to subscribe to notifications
of reallocation of credit for the Service Data Flows within the AF application
session context.
The AF shall use the \"EventsSubscReqData\" data type as described in
subclause 4.2.2.2 and shall include in the HTTP POST request message an event
within the \"evSubsc\" attribute with the \"event\" attribute set to the value
\"REALLOCATION_OF_CREDIT\".
As result of this action, the PCF shall set the appropriate subscription to
reallocation of credit notification for the corresponding PCC rule(s) as
described in 3GPP TS 29.512 [8].
The PCF shall reply to the AF with an HTTP response message as described in
subclause 4.2.2.2.
### 4.2.3 Npcf_PolicyAuthorization_Update service operation
#### 4.2.3.1 General
The Npcf_PolicyAuthorization_Update service operation provides updated
application level information from the NF service consumer and optionally
communicates with the Npcf_SMPolicyControl service to determine and install
the policy according to the information provided by the NF service consumer.
The Npcf_PolicyAuthorization_Update service operation updates an application
session context in the PCF.
The following procedures using the Npcf_PolicyAuthorization_Update service
operation are supported:
\- Modification of service information.
\- Gate control.
\- Background Data Transfer policy indication at policy authorization update.
\- Modification of sponsored connectivity information.
\- Modification of Subscription to Service Data Flow QoS notification control.
\- Modification of Subscription to Service Data Flow Deactivation.
\- Update of traffic routing information.
\- Modification of subscription to resources allocation outcome.
\- Modification of Multimedia Priority Services.
\- Support of content versioning.
\- Request of access network information.
\- Modification of service information status.
\- Support of SIP forking.
\- Provisioning of signalling flow information.
\- Support of resource sharing.
\- Modification of MCPTT.
\- Modification of MCVideo.
\- Priority sharing indication.
\- Modification of subscription to out of credit notification.
\- Modification of Subscription to Service Data Flow QoS Monitoring
Information.
\- Update of TSCAI Input Information and TSC QoS related data.
\- Provisioning of bridge management information and port management
information.
\- Support of CHEM feature.
\- Support of FLUS feature.
\- Subscription to EPS Fallback report.
\- Modification of required QoS information.
\- Support of QoSHint feature.
\- Modification of subscription to reallocation of credit notification.
#### 4.2.3.2 Modification of service information
This procedure is used to modify an existing application session context as
defined in 3GPP TS 23.501 [2], 3GPP TS 23.502 [3] and 3GPP TS 23.503 [4] when
the feature \"PatchCorrection\" is supported.
Figure 4.2.3.2-1 illustrates the modification of service information using
HTTP PATCH method.
Figure 4.2.3.2-1: Modification of service information using HTTP PATCH
The AF may modify the application session context information at any time
(e.g. due to an AF session modification or internal AF trigger) and invoke the
Npcf_PolicyAuthorization_Update service operation by sending the HTTP PATCH
request message to the resource URI representing the \"Individual Application
Session Context\" resource, as shown in figure 4.2.3.2-1, step 1, with the
modifications to apply.
The JSON body within the PATCH request shall include the
\"AppSessionContextUpdateDataPatch\" data type and shall be encoded according
to \"JSON Merge Patch\", as defined in IETF RFC 7396 [21]. The modifications
to apply are encoded within the attributes of the \"ascReqData\" attribute, as
described below and in subsequent subclauses.
The AF may include the updated service information in the \"medComponents\"
attribute of the \"ascReqData\" attribute.
If the \"AuthorizationWithRequiredQoS\" feature as defined in subclause 5.8 is
supported, the AF may provide within the MediaComponentRm data structure an
update of the required QoS information as specified in subclause 4.2.3.30.
The AF may include in the \"ascReqData\" attribute an AF application
identifier in the \"afAppId\" attribute to trigger the PCF to indicate to the
SMF/UPF to perform the application detection based on the operator\'s policy
as defined in 3GPP TS 29.512 [8].
If the \"TimeSensitiveNetworking\" feature is supported, the AF may provide
TSN information as specified in subclauses 4.2.3.24 and 4.2.3.25.
The AF may also create, modify or remove events subscription information by
sending the HTTP PATCH request message to the resource URI representing the
\"Individual Application Session Context\" resource.
The AF shall create event subscription information by including in the
\"ascReqData\" attribute the \"evSubsc\" attribute of \"EventsSubscReqDataRm\"
data type with the corresponding list of events to subscribe to; and the
\"notifUri\" attribute with the notification URI where the PCF shall send the
notifications.
The AF shall update existing event subscription information by including in
the \"ascReqData\" attribute an updated value of the \"evSubsc\" attribute of
the \"EventsSubscReqDataRm\" data type as follows:
\- The \"events\" attribute shall include the new complete list of subscribed
events.
\- When the AF requests to update the additional information related to an
event (e.g. the AF needs to provide new thresholds to the PCF in the
\"usgThres\" attribute related to the \"USAGE_REPORT\" event) the AF shall
include the additional information, which shall completely replace the
previously provided one.
NOTE 1: Note that when the AF requests to remove an event, this event is not
included in the \"events\" attribute.
NOTE 2: When an event is included in the \"events\" attribute and its related
additional information is set to null, the PCF considers the subscription to
this event is active, but the related procedures stop applying.
NOTE 3: When an event is removed from the \"events\" attribute but its related
information is not set to null, the PCF considers the subscription to this
event is terminated, the related additional information is removed, and the
related procedures stop applying.
The AF shall remove existing event subscription information by setting to null
the \"evSubsc\" attribute included in the \"ascReqData\" attribute.
Events with \"notifMethod\" set to \"ONE_TIME\" shall only apply at the time
the AF requests their subscription. Once the event report is performed, the
subscription to this event is automatically terminated in the PCF and the
related information is removed. The presence of a one-time event, together
with its related additional information when applicable, during an update
procedure shall represent the recreation of the subscription to this event in
the PCF.
NOTE 4: The \"notifUri\" attribute within the EventsSubscReqData data
structure can be modified to request that subsequent notifications are sent to
a new NF service consumer.
If the PCF cannot successfully fulfil the received HTTP PATCH request due to
the internal PCF error or due to the error in the HTTP PATCH request, the PCF
shall send the HTTP error.
If the feature \"ES3XX\" is supported, and the PCF determines the received
HTTP PATCH request needs to be redirected, the PCF shall send an HTTP redirect
response as specified in subclause 6.10.9 of 3GPP TS 29.500 [5].
Otherwise, the PCF shall process the received service information according
the operator policy and may decide whether the HTTP request message is
accepted or not.
If the updated service information is not acceptable (e.g. the subscribed
guaranteed bandwidth for a particular user is exceeded), the PCF shall include
in an HTTP \"403 Forbidden\" response message the \"cause\" attribute set to
\"REQUESTED_SERVICE_NOT_AUTHORIZED\".
If the service information provided in the HTTP PATCH request is rejected due
to a temporary condition in the network (e.g. the NWDAF reported the network
slice selected for the PDU session is congested), the PCF may include in the
\"403 Forbidden\" response the \"cause\" attribute set to
\"REQUESTED_SERVICE_TEMPORARILY_NOT_AUTHORIZED\". The PCF may also provide a
retry interval within the \"Retry-After\" HTTP header field. When the AF
receives the retry interval within the \"Retry-After\" HTTP header field, the
AF shall not send the same service information to the PCF again (for the same
application session context) until the retry interval has elapsed. The
\"Retry-After\" HTTP header is described in 3GPP TS 29.500 [5] subclause
5.2.2.2.
The PCF may additionally provide the acceptable bandwidth within the attribute
\"acceptableServInfo\" included in the \"ExtendedProblemDetails\" data
structure returned in the rejection response message.
If the request is accepted, the PCF shall update the service information with
the new information received. Due to the updated service information, the PCF
may need to create, modify or delete the related PCC rules as specified in
3GPP TS 29.513 [7] and provide the updated information towards the SMF
following the corresponding procedures specified in 3GPP TS 29.512 [8].
Based on the received subscription information from the AF, the PCF may create
a subscription to event notifications or may modify the existing subscription
to event notifications, for a related PDU session from the SMF, as described
in 3GPP TS 29.512 [8].
The PCF shall reply with the HTTP response message to the AF and may include
the \"AppSessionContext\" data type payload body with the representation of
the modified \"Individual Application Session Context\" resource and may
include the \"Events Subscription\" sub-resource.
The PCF shall include in the \"evsNotif\" attribute:
\- if the AF subscribed to the \"PLMN_CHG\" event in the HTTP PATCH request,
the \"event\" attribute set to \"PLMN_CHG\" and the \"plmnId\" attribute
including the PLMN identifier and, if available, the NID if the PCF has
previously requested to be updated with this information in the SMF;
\- if the AF subscribed to the event \"ACCESS_TYPE_CHANGE\" event in the HTTP
PATCH request, the \"event\" attribute set to \"ACCESS_TYPE_CHANGE\" and: the
attributes
> i. the \"accessType\" attribute including the access type, and the
> \"ratType\" attribute including the RAT type when applicable for the
> notified access type; and
>
> ii. if the \"ATSSS\" feature is supported, the \"addAccessInfo\" attribute
> with the additional access type information if available, where the access
> type is encoded in the \"accessType\" attribute, and the RAT type is encoded
> in the \"ratType\" attribute when applicable for the notified access type;
> and
NOTE 5: For a MA PDU session, if the \"ATSSS\" feature is not supported by the
AF the PCF includes the \"accessType\" attribute and the \"ratType\" attribute
with a currently active combination of access type and RAT type (if applicable
for the notifed access type). When both 3GPP and non-3GPP accesses are
available, the PCF includes the information corresponding to the 3GPP access.
> iii. the \"anGwAddr\" attribute including access network gateway address
> when available,
if the PCF has previously requested to be updated with this information in the
SMF; and
\- if the \"IMS_SBI\" feature is supported and if the AF subscribed to the
\"CHARGING_CORRELATION\" event in the HTTP PATCH request, the \"event\"
attribute set to \"CHARGING_CORRELATION\" and may include the \"anChargIds\"
attribute containing the access network charging identifier(s) and the
\"anChargAddr\" attribute containing the access network charging address.
The AF subscription to other specific events using the
Npcf_PolicyAuthorization_Update request is described in the related
subclauses. Notification of events when the applicable information is not
available in the PCF when receiving the Npcf_PolicyAuthorization_Update
request is described in subclause 4.2.5.
The HTTP response message towards the AF should take place before or in
parallel with any required PCC rule provisioning towards the SMF.
If the PCF does not have an existing application session context for the
application session context being modified (such as after a PCF failure), the
PCF shall reject the HTTP request message with the HTTP response message with
the applicable rejection cause.
#### 4.2.3.3 Gate control
This procedure is used by an AF to modify in the PCF the service data flow(s)
that are to be enabled or disabled to pass through the PDU session.
The AF shall use the HTTP PATCH method to modify the gate control information.
The AF shall include in the HTTP PATCH request message described in subclause
4.2.3.2, in the \"ascReqData\" attribute, in the media component(s) included
in the \"medComponents\" attribute at media and/or media subcomponent level,
the \"fStatus\" attribute for the flows to be enabled or disabled with the
appropriate value.
If a \"medSubComps\" attribute contains a \"flowUsage\" attribute with the
value \"RTCP\", then the IP Flows described by that media subcomponent shall
be enabled in both directions irrespective of the value of the \"fStatus\"
attribute of the corresponding media component.
As result of this action, the PCF shall set the appropriate gate status for
the corresponding active PCC rule(s).
The PCF shall reply to the AF as described in subclause 4.2.3.2.
#### 4.2.3.4 Background Data Transfer policy indication at policy
authorization update
This procedure is used by an AF to indicate at policy authorization update a
transfer policy negotiated for background data transfer using the
Npcf_BDTPolicyControl service as described in 3GPP TS 29.554 [14].
The AF may include in the HTTP PATCH request message described in subclause
4.2.3.2, in the \"ascReqData\" attribute, a new reference id in the
\"bdtRefId\" attribute.
NOTE 1: The PCF will retrieve the corresponding transfer policy from the UDR
based on the reference identifier within the \"bdtRefId\" attribute. In case
only one PCF is deployed in the network, transfer policies can be locally
stored in the PCF and the interaction with the UDR is not required.
If the PCF cannot retrieve the transfer policy, the PCF shall set to
TP_NOT_KNOWN the \"servAuthInfo\" attribute in the HTTP response message to
the AF to indicate that the transfer policy is unknown.
If the time window of the received transfer policy has expired, the PCF shall
set to TP_EXPIRED the \"servAuthInfo\" attribute in the HTTP response message
to indicate to the AF that the transfer policy has expired. Otherwise, if the
time window of the received transfer policy has not yet occurred, the PCF
shall set to TP_NOT_YET_OCCURRED the \"servAuthInfo\" attribute in the HTTP
response message to the AF to indicate that the time window of the transfer
policy has not yet occurred.
NOTE 2: In the case that the PCF cannot retrieve the transfer policy, the
transfer policy time window has not yet occurred or the transfer policy
expired, the PCF makes the decision without considering the transfer policy.
The PCF shall reply to the AF as described in subclause 4.2.3.2.
#### 4.2.3.5 Modification of sponsored connectivity information
This procedure is used by an AF to modify sponsored data connectivity when
\"SponsoredConnectivity\" feature is supported.
The AF shall use the HTTP PATCH method to modify the sponsored connectivity
information.
The AF shall include in the HTTP PATCH request message described in subclause
4.2.3.2, in the \"ascReqData\" attribute, an application service provider
identity and a sponsor identity within the \"aspId\" attribute and \"sponId\"
attribute, and optionally an indication of whether to enable or disable
sponsored data connectivity within the \"sponStatus\" attribute set to the
applicable value to provide sponsored connectivity information or to update
existing sponsored connectivity information.
If the AF requests to enable sponsored data connectivity the AF shall change
the \"sponStatus\" attribute value to \"SPONSOR_ENABLED\".
If the AF requests to disable sponsored data connectivity the AF shall provide
an indication to disable sponsored data connectivity to the PCF by setting the
\"sponStatus\" attribute to \"SPONSOR_DISABLED\".
To support the usage monitoring of sponsored data connectivity, the AF may
also include in the HTTP PATCH a new or modified \"evSubsc\" attribute of
\"EventsSubscReqDataRm\" data type with:
\- the usage thresholds to apply in the \"usgThres\" attribute; and
\- the subscription to usage monitoring for sponsored data connectivity in an
entry of the \"events\" attribute of the \"AfEventSubscription\" data type
with the \"event\" attribute set to \"USAGE_REPORT\".
NOTE 1: If the AF is in the user plane, the AF can handle the usage monitoring
and therefore it is not required to provide a usage threshold to the PCF as
part of the sponsored data connectivity information.
When the AF indicated to enable sponsored data connectivity, and the UE is
roaming with the visited access case, the following procedures apply:
\- If the AF is located in the HPLMN, for home routed roaming case and when
operator policies do not allow accessing the sponsored data connectivity with
this roaming case, the H-PCF shall reject the service request and shall
include in the HTTP \"403 Forbidden\" response message the \"cause\" attribute
set to \"UNAUTHORIZED_SPONSORED_DATA_CONNECTIVITY\".
\- If the AF is located in the VPLMN, the V-PCF shall reject the service
request and shall include in the HTTP \"403 Forbidden\" response message the
\"cause\" attribute set to \"UNAUTHORIZED_SPONSORED_DATA_CONNECTIVITY\".
When the AF indicated to enable sponsored data connectivity, and the UE is in
the non-roaming case or roaming with the home routed case and the operator
policies allow accessing the sponsored data connectivity with this roaming
case, the following procedures apply:
\- If the SMF does not support sponsored connectivity and the required
reporting level for that service indicates a sponsored connectivity level
according to 3GPP TS 29.512 [8], then the PCF shall reject the request and
shall include in the HTTP \"403 Forbidden\" response message the \"cause\"
attribute set to \"REQUESTED_SERVICE_NOT_AUTHORIZED\".
\- If the SMF supports sponsored data connectivity feature or the required
reporting level is different from sponsored connectivity level as described in
3GPP TS 29.512 [8], then the PCF, based on operator policies, shall check
whether it is required to validate the sponsored connectivity data. If it is
required, it shall perform the authorizations based on sponsored data
connectivity profiles. If the authorization fails, the PCF shall include in
the HTTP \"403 Forbidden\" response message the \"cause\" attribute set to
\"UNAUTHORIZED_SPONSORED_DATA_CONNECTIVITY\".
NOTE 2: The PCF is not required to verify that a trust relationship exists
between the operator and the sponsors.
The PCF shall reply to the AF as described in subclause 4.2.3.2.
#### 4.2.3.6 Modification of Subscription to Service Data Flow QoS
notification control
This procedure is used in the AF to modify in the PCF the subscription to
notification about whether the GBR QoS targets can no longer (or can again) be
guaranteed.
The AF shall use the HTTP PATCH method to update the \"Events Subscription\"
sub-resource together with the modifications to the \"Individual Application
Session Context\" resource.
The AF shall include in the HTTP PATCH request message described in subclause
4.2.3.2, in the \"ascReqData\" attribute, the updated values of the
\"EventsSubscReqDataRm\" data type, which either shall include in the
\"events\" attribute a new element with the \"event\" attribute set to
\"QOS_NOTIF\" to indicate the subscription to QoS notification control, or
shall not include in the \"events\" attribute an existing element with the
\"event\" attribute set to \"QOS_NOTIF\" to indicate the termination of the
subscription to QoS notification control.
As result of this action, the PCF shall set the appropriate subscription to
QoS notification control for the corresponding active PCC rule(s) as described
in 3GPP TS 29.512 [8].
The PCF shall reply to the AF as described in subclause 4.2.3.2.
#### 4.2.3.7 Modification of Subscription to Service Data Flow Deactivation
This procedure is used by an AF to modify in the PCF the subscription to the
notification of deactivation of one or more Service Data Flows within the AF
application session context.
The AF shall use the HTTP PATCH method to update the \"Events Subscription\"
sub-resource together with the modifications to the \"Individual Application
Session Context\" resource.
The AF shall include in the HTTP PATCH request message described in subclause
4.2.3.2, in the \"ascReqData\" attribute, the updated values of the
\"EventsSubscReqDataRm\" data type, which either shall include in the
\"events\" attribute a new element with the \"event\" attribute set to
\"FAILED_RESOURCES_ALLOCATION\" to indicate the subscription to service data
flow deactivation, or shall not include in the \"events\" attribute an
existing element with the \"event\" attribute set to
\"FAILED_RESOURCES_ALLOCATION\".
The PCF shall reply to the AF as described in subclause 4.2.3.2.
As result of this action, the PCF shall set the appropriate subscription to
service data flow deactivation for the corresponding PCC rule(s) as described
in in 3GPP TS 29.512 [8].
#### 4.2.3.8 Update of traffic routing information
This procedure is used by an AF to modify in the PCF the traffic routing
information to a local access to a DNN, and/or to modify the subscription to
notifications about UP path management when \"InfluenceOnTrafficRouting\"
feature is supported.
The AF shall use the HTTP PATCH method.
To modify traffic routing information, the AF shall include in the HTTP PATCH
request message described in subclause 4.2.3.2, in the \"ascReqData\"
attribute, an updated \"afRoutReq\" attribute(s) with the modified traffic
routing information.
To modify the subscription to notifications about UP path management events
(create, delete or modify), the AF shall include in the HTTP PATCH request
message described in subclause 4.2.3.2, in the \"ascReqData\" attribute, the
updated values of the \"upPathChgSub\" attribute with the modified
subscription to UP path management events.
The PCF shall reply to the AF as described in subclause 4.2.3.2.
The PCF shall store the application routing requirements included in the
\"afRoutReq\" attribute.
The PCF shall check whether the updated application routing requirements
require PCC rules to be created or modified to include updated traffic
steering policies, or the AF transaction identifier, or to update the
application relocation possibility as specified in 3GPP TS 29.513 [7].
Provisioning of PCC rules to the SMF shall be carried out as specified at 3GPP
TS 29.512 [8].
#### 4.2.3.9 Void
#### 4.2.3.10 Modification of subscription to resources allocation outcome
This procedure is used in the AF to modify in the PCF the subscription to
notification about resources allocation outcome.
The AF shall use the HTTP PATCH method to update the \"Events Subscription\"
sub-resource together with the modifications to the \"Individual Application
Session Context\" resource.
The AF shall include in the HTTP PATCH request message described in subclause
4.2.3.2, in the \"ascReqData\" attribute, the updated values of the
\"EventsSubscReqDataRm\" data type, which either include in the \"events\"
attribute a new element with the \"event\" attribute set to
\"SUCCESSFUL_RESOURCES_ALLOCATION\" and/or \"FAILED_RESOURCES_ALLOCATION\" or
remove in the \"events\" attribute an existing element with the \"event\"
attribute set to \"SUCCESSFUL_RESOURCES_ALLOCATION\" and/or
\"FAILED_RESOURCES_ALLOCATION\".
As a result of this action, the PCF shall set the appropriate subscription to
notification of resources allocation outcome in the corresponding PCC Rule(s)
as described in 3GPP TS 29.512 [8].
#### 4.2.3.11 Void
#### 4.2.3.12 Modification of Multimedia Priority Services
The AF may include, in the \"ascReqData\" attribute, the \"mpsId\" attribute
if it was not previously provided in order to indicate that the modified AF
session relates to an MPS session.
If the AF supports the SBI message priority mechanism for an MPS session, the
AF shall include the \"3gpp-Sbi-Message-Priority\" custom HTTP header towards
the PCF as described in subclause 4.2.2.12.
If the PCF receives the \"mpsId\" attribute, the PCF shall take specific
actions on the corresponding PDU session to ensure that the MPS session is
prioritized as defined in 3GPP TS 29.512 [8].
#### 4.2.3.13 Support of content versioning
The support of the media component versioning is optional. When the
\"MediaComponentVersioning\" feature is supported, the AF and the PCF shall
comply with the procedures specified in this subclause.
Upon each media component modification encoded in the \"medComponents\"
attribute included in the \"ascReqData\" attribute, if the content version was
previously assigned to a media component, the AF shall assign a new content
version. All the content related to that media component shall be included and
the content version shall be unique for the lifetime of the media component.
NOTE: The AF will include all the content of the media component in each media
component modification in order to ensure that the media component is
installed with the proper information regardless of the outcome of the QoS
flow procedure related to previous interactions that are not reported to the
PCF yet.
If the PCF receives the \"contVer\" attribute for a certain media component,
the PCF shall follow the procedures described in 3GPP TS 29.512 [8], subclause
4.2.6.2.14.
#### 4.2.3.14 Request of access network information
This procedure is used by an AF to request access network information for an
existing \"Individual Application Session Context\" resource at service
information modification when the \"NetLoc\" feature is supported.
NOTE 1: Subclause 4.2.6.6 describes the AF request of access network
information without providing service information.
The AF shall create event subscription information by including in the
\"AppSessionContextUpdateData\" data type the \"evSubsc\" attribute of
\"EventsSubscReqData\" data type with the corresponding list of events to
subscribe to.
The AF shall include in the HTTP PATCH request message described in subclause
4.2.3.2, in the \"ascReqData\" attribute:
\- an entry of the \"AfEventSubscription\" data type in the \"events\"
attribute with:
a) the \"event\" attribute set to the value \"ANI_REPORT\"; and
b) the \"notifMethod\" attribute set to the value \"ONE_TIME\"; and
\- the \"reqAnis\" attribute, with the required access network information,
i.e. user location and/or user time zone information).
When the PCF determines that the access network does not support the access
network information reporting because the SMF does not support the NetLoc
feature, the PCF shall respond to the AF including in the
\"EventsNotification\" data type the \"noNetLocSupp\" attribute set to
\"ANR_NOT_SUPPORTED\" value. Otherwise, the PCF shall immediately configure
the SMF to provide such access information, as specified in 3GPP TS 29.512
[8].
The PCF shall reply to the AF with an HTTP response message as described in
subclause 4.2.3.2.
NOTE 2: The AF does not invoke the Npcf_PolicyAuthorization_Update service
operation to remove subscription to access network information report since
the \"Access Network Information Notification\" is the one-time reported
event. Once the access network information is reported to the AF the
subscription to the access network information report is automatically
terminated in the PCF and the related information is removed.
#### 4.2.3.15 Modification of service information status
When the \"IMS_SBI\" feature is supported, the AF may update the status of the
service information. If the AF provides service information that has been
fully negotiated (e.g. based on the SDP answer), the AF may include in the
\"ascReqData\" attribute the \"servInfStatus\" attribute set to \"FINAL\". In
this case the PCF shall authorize the session and provision the corresponding
PCC rules to the SMF.
The AF may additionally provide preliminary service information not fully
negotiated yet (e.g. based on the SDP offer) at an earlier stage. To do so,
the AF shall include the \"servInfStatus\" attribute set to \"PRELIMINARY\".
Upon receipt of such preliminary service information, the PCF shall perform an
early authorization check of the service information. If the AF requests the
PCF to report the access network information together with preliminary service
information, the PCF shall immediately configure the SMF to provide the access
network information.
#### 4.2.3.16 Support of SIP forking
When the \"IMS_SBI\" feature is supported, this procedure is used by an AF to
indicate that an existing \"Individual Application Session Context\" resource
comprises service information about several SIP dialogues.
The AF shall use the HTTP PATCH method to modify the service information.
The AF may include in the HTTP PATCH request message described in subclause
4.2.3.2, in the \"ascReqData\" attribute, the \"sipForkInd\" attribute and
include the updated service information.
The PCF shall reply to the AF as described in subclause 4.2.3.2.
When the \"sipForkInd\" attribute gets the value:
\- \"SEVERAL_DIALOGUES\", the PCF shall send additional PCC rules or
individual data flow filters to already provided PCC rules as described in
Annex B.3.1.
\- \"SINGLE_DIALOGUE\", the PCF shall update installed PCC rules and
Authorized-QoS information as described in Annex B.3.2.
#### 4.2.3.17 Provisioning of signalling flow information
This procedure is used by an AF to provision or de-provision information about
the AF signalling IP flows between the UE and the AF.
The AF shall include in the HTTP PATCH request message described in subclause
4.2.3.2, in the \"ascReqData\" attribute:
\- when the procedure is used to provision information about the AF signalling
IP flows, a media component within the \"medComponents\" attribute including
the attributes described in subclause 4.2.2.16;
\- when the procedure is used to de-provision information about the AF
signalling IP flows, for the media subcomponents containing the AF signalling
IP flows, the \"fStatus\" attribute set to the value \"REMOVED\".
The PCF shall reply to the AF as described in subclause 4.2.3.2.
#### 4.2.3.18 Support of resource sharing
When the \"ResourceSharing\" is supported by the AF and the PCF, the AF may
include, in the \"ascReqData\" attribute, the \"sharingKeyUl\" attribute
and/or \"sharingKeyDl\" attribute within a media component of the
\"medComponents\" attribute to indicate to the PCF that the related media of
the modified Individual Application Session Context resource may share
resources with other media components in the related direction that include
the same value in the \"sharingKeyUl\" attribute and/or \"sharingKeyDl\"
attribute.
The AF may modify the conditions for resource sharing by including the media
component within the \"medComponents\" attribute with a new value for the
\"sharingKeyUl\" attribute and/or \"sharingKeyDl\" attribute. The AF may
indicate that the related media of the modified Individual Application Session
resource is not sharing resources with other media components in the related
direction setting the \"sharingKeyUl\" attribute and/or \"sharingKeyDl\"
attribute to \"null\".
The AF shall use the HTTP PATCH method to update the \"Individual Application
Session Context resource\" as described in subclause 4.2.3.2.
If the \"sharingKeyUl\" attribute and/or \"sharingKeyDl\" attribute are
provided within a media component of the \"medComponents\" attribute, the PCF
may apply the mechanisms for resource sharing as described in 3GPP TS 29.512
[8], subclause 4.2.6.2.8.
#### 4.2.3.19 Modification of MCPTT
The AF may include, in the \"ascReqData\" attribute, the \"mcpttId\" attribute
in order to indicate that the modified \"Individual Application Session
Context\" resource relates to the priority adjustment of an MCPTT session.
When the PCF receives the \"mcpttId\" attribute related to that MCPTT session,
the PCF may take specific actions on the corresponding PDU session to ensure
that the MCPTT session is prioritized. For the handling of MCPTT session with
priority call, see Annex B.13.
Additionally, when the \"PrioritySharing\" feature is supported, the PCF may
receive the \"prioSharingInd\" attribute within the media component received
in the \"medComponents\" attribute as described in subclause 4.2.2.21. In this
case, and if \"MCPTT-Preemption\" feature is supported, the PCF may receive
pre-emption information as also described in subclause 4.2.3.21.
#### 4.2.3.20 Modification of MCVideo
The AF may include, in the \"ascReqData\" attribute, the \"mcVideoId\"
attribute in order to indicate that the modified \"Individual Application
Session Context\" resource relates to the priority adjustment of an MCVideo
session. When the PCF receives the \"mcVideoId\" attribute related to that
MCVideo session, the PCF may take specific actions on the corresponding PDU
session to ensure that the MCVideo session is prioritized. For the handling of
MCVideo session with priority call, see Annex B.15.
#### 4.2.3.21 Priority sharing indication
When the \"PrioritySharing\" feature is supported, the AF may include the
\"prioSharingInd\" attribute set to \"ENABLED\" within a media component of
the \"medComponents\" attribute included in the \"ascReqData\" attribute to
indicate to the PCF that the related media flow is allowed to use the same
Allocation and Retention Priority (ARP) as media flows belonging to other
\"Individual Application Session Context\" resources as described in subclause
4.2.2.21. In this case, if the \"MCPTT-Preemption\" feature is supported, the
AF may also include the \"preemptCap\", \"preemptVuln\" and
\"preemptControlInfo\" attributes as described in subclause 4.2.2.21.
When the \"preemptControlInfo\" attribute is modified, the latest provided
value shall be applied to all potential media flow candidates.
If the AF earlier has indicated a media flow priority sharing to the PCF by
setting the \"prioSharingInd\" attribute to \"ENABLED\", the AF may include
the Priority-Sharing-Indicator AVP set to \"DISABLED\" within a media
component of the \"medComponents\" attribute to indicate to the PCF that the
related media flow shall not be part of the mechanism for sharing the
Allocation and Retention Priority with other media flows any longer.
If this media flow was in priority sharing with other media flows the PCF
should readjust the Allocation and Retention Priority for the remaining
services sharing priority as described in 3GPP TS 29.512 [8], subclause
4.2.6.2.9 and handle the media flow excluded from priority sharing according
to normal PCC/QoS rule provisioning procedures described in 3GPP TS 29.512
[8], subclause 4.2.6.2.
If the AF earlier has indicated a media flow priority sharing to the PCF by
setting the \"prioSharingInd\" attribute to \"ENABLED\" for media flows and
the AF indicates to remove one or more of the media flows in priority sharing
with other media flows, the PCF should readjust the Allocation and Retention
Priority for the remaining services sharing priority as described in 3GPP TS
29.512 [8], subclause 4.2.6.2.9 and handle the media flow removed according to
normal PCC/QoS rule provisioning procedures described in 3GPP TS 29.212 [8],
subclause 4.2.6.2.
#### 4.2.3.22 Modification of Subscription to Out of Credit notification
This procedure is used by the AF if the \"IMS_SBI\" feature is supported to
modify in the PCF the subscription to notification about credit unavailability
for the Service Data Flows within the AF application session context.
The AF shall use the HTTP PATCH method to update the \"Events Subscription\"
sub-resource together with the modifications to the \"Individual Application
Session Context\" resource.
The AF shall include in the HTTP PATCH request message described in subclause
4.2.3.2, in the \"ascReqData\" attribute, the updated values of the
\"EventsSubscReqDataRm\" data type, which either include in the \"events\"
attribute a new element with the \"event\" attribute set to the value
\"OUT_OF_CREDIT\" or remove from the \"events\" attribute the existing element
with the \"event\" attribute set to the value \"OUT_OF_CREDIT\".
As a result of this action, the PCF shall set the appropriate subscription to
out of credit notification for the corresponding PCC Rule(s) as described in
3GPP TS 29.512 [8].
The PCF shall reply to the AF with an HTTP response message as described in
subclause 4.2.3.2.
#### 4.2.3.23 Modification of Subscription to Service Data Flow QoS Monitoring
Information
This procedure is used by AF to modify the PCF subscription for notification
about packet delay between UPF and UE, when the \"QoSMonitoring\" feature is
supported.
The AF shall use the HTTP PATCH method to update the \"Events Subscription\"
sub-resource together with the modifications to the \"Individual Application
Session Context\" resource.
The AF shall include in the HTTP PATCH request message described in subclause
4.2.3.2, in the \"ascReqData\" attribute, the updated values of the
\"evSubsc\" attribute of \"EventsSubscReqDataRm\" data type, as follows:
\- to create a subscription to QoS monitoring information:
a) shall include the \"events\" array with an array that contains a new entry
with the \"event\" attribute set to \"QOS_MONITORING\", and notification
related information as described in subclause 4.2.2.23;
b) when the \"notifMethod\" of the new entry is \"EVENT_DETECTION\", shall
include a \"qosMon\" attribute with the QoS monitoring information as
described in subclause 4.2.2.23.
c) shall include the new requested QoS monitoring parameter(s) to be measured
(i.e. DL, UL and/or round trip packet delay) within the \"reqQosMonParams\"
attribute; and
d) may include the notification correlation identifier assigned by the AF
within the \"notifCorreId\" attribute;
\- to remove a subscription to QoS monitoring information:
a) shall include the \"events\" array containing an array that shall omit the
corresponding entry with the \"event\" attribute value \"QOS_MONITORING\"; and
b) when the \"notifMethod\" of the removed entry is \"EVENT_DETECTION\", it
shall contain the \"qosMon\" attribute set to null.
As result of this action, the PCF shall set the appropriate subscription to
QoS monitoring information for the corresponding active PCC rule(s) as
described in 3GPP TS 29.512 [8].
The PCF shall reply to the AF as described in subclause 4.2.3.2.
#### 4.2.3.24 Update of TSCAI Input Information and TSC QoS related data
If the \"TimeSensitiveNetworking\" feature is supported the AF may update the
TSCAI Input container and the TSC QoS related data held in an \"Individual
Application Session Context\" resource using the
Npcf_PolicyAuthorization_Update service operation to modify the TSCAI input
information and QoS characteristics delivered to the SMF for use in the 5G
System.
The AF shall use the HTTP PATCH method as described in subclause 4.2.3.2 to
modify TSCAI input container and the TSC QoS related information.
The AF may indicate TSCAI input information and/or TSC QoS related information
for new TSN streams by adding, in the \"ascReqData\" attribute, one or more
media component entries within the \"medComponents\" attribute including the
\"tsnQos\" attribute and including the \"tscaiInputUl\" attribute and/or the
\"tscaiInputDl\" attribute as described in subclause 4.2.2.24.
The AF may update the TSCAI input information and/or the TSC QoS related
information for existing TSC traffic by including the updated values in the
\"tscaiInputUl\" attribute and/or \"tscaiInputDl\"attribute and/orupdated
values in the \"tsnQos\" attribute included in a media component entry of the
\"medComponents\" attribute included in the \"ascReqData\" attribute.
The AF may delete the TSCAI input information and TSC QoS related information
of removed TSC traffic by removing the corresponding media component entries
within the \"medComponents\" attribute included in the \"ascReqData\"
attribute.
The PCF shall reply to the AF as described in subclause 4.2.3.2.
The PCF shall check whether the received TSCAI input information and TSC QoS
related information require to modify or to remove PCC rules in the SMF.
Provisioning of PCC rule(s) to the SMF shall be carried out as specified in
3GPP TS 29.512 [8].
#### 4.2.3.25 Provisioning of bridge management information and port
management information
If the \"TimeSensitiveNetworking\" feature is supported the AF may provide a
BMIC for the Bridge functionality of the UPF/NW-TT and/or a PMIC for the DS-TT
port and/or PMIC(s) for the NW-TT ports to update the configuration of the 5G
system as a TSN bridge by invoking the Npcf_PolicyAuthorization_Update service
operation to the PCF.
The AF shall use the HTTP PATCH method as described in subclause 4.2.3.2 to
modify the \"Individual Application Session Context\" resource holding the
BMIC and/or the DS-TT PMIC and/or NW-TT PMIC(s).
The AF may include in the \"ascReqData\" attribute:
\- the DS-TT PMIC encoded in the \"tsnPortManContDstt\" and/or the one or more
NW-TT PMIC(s)encoded in the \"tsnPortManContNwtts\", if available; and/or
\- the BMIC encoded in the \"tsnBridgeManCont\", if available.
#### 4.2.3.26 Modification of Mission Critical Services
The AF may include, in the \"ascReqData\" attribute, the \"mcsId\" attribute
if it was not previously provided in order to indicate that the modified AF
session relates to an MCS session.
If the AF supports the SBI message priority mechanism for an MCS session, the
AF shall include the \"3gpp-Sbi-Message-Priority\" custom HTTP header towards
the PCF as described in subclause 4.2.2.12.
If the PCF receives the \"mcsId\" attribute, the PCF shall take specific
actions on the corresponding PDU session to ensure that the MCS session is
prioritised as defined in 3GPP TS 29.512 [8].
4.2.3.27 Support of CHEM feature
When CHEM feature is supported, the AF may include the value of Maximum Packet
Loss Rate for UL within the \"maxPacketLossRateUl\" attribute and/or the value
of Maximum Packet Loss Rate for DL within the \"maxPacketLossRateDl\"
attribute in \"medComponents\" attribute. For CHEM feature, see Annex B.14.
#### 4.2.3.28 Support of FLUS feature
If the \"FLUS\" feature is supported by the AF, the AF may include the
\"flusId\" attribute within a media component of the \"medComponents\"
attribute to indicate that the related media of the modified Individual
Application Session Context resource corresponds to a FLUS media stream.
Additional QoS information for the treatment of FLUS media may be provided
within \"desMaxLatency\" attribute and/or \"desMaxLoss\" attribute.
#### 4.2.3.29 Subscription to EPS Fallback report
When the \"EPSFallbackReport\" feature is supported, this procedure is used in
the AF to subscribe to the notification of EPS Fallback events, if this event
was not previously provisioned.
The AF shall use the HTTP PATCH method to update the \"Events Subscription\"
sub-resource together with the modifications to the \"Individual Application
Session Context\" resource.
The AF shall include in the HTTP PATCH request message described in subclause
4.2.3.2, in the \"ascReqData\" attribute, the updated values of the
\"evSubsc\" attribute of the \"EventsSubscReqDataRm\" data type, which shall
include in the \"events\" attribute a new element with the \"event\" attribute
set to \"EPS_FALLBACK\". The AF shall request to the PCF to report EPS
Fallback in conjunction with providing the PCF with AF service information for
voice media type as described in subclause 4.2.3.2.
As result of this action, the PCF shall set the appropriate subscription to
EPS Fallback for the corresponding active PCC rule(s) as described in 3GPP TS
29.512 [8].
The PCF shall reply to the AF as described in subclause 4.2.3.2.
#### 4.2.3.30 Modification of required QoS information
When the \"AuthorizationWithRequiredQoS\" feature is supported, this procedure
is used by an AF to modify the required QoS by providing a different QoS
reference(s) parameter while the AF session is ongoing.
The AF shall use the HTTP PATCH method to modify the required QoS information.
The AF may include in the HTTP PATCH request message described in subclause
4.2.3.2, in the \"ascReqData\" attribute, within one or more entries of the
\"medComponents\" attribute included in the AppSessionContextUpdateData data
type:
\- a \"qosReference\" attribute, which may contain:
i. a QoS reference, that replaces an existing QoS reference value if the
\"qosReference\" attribute was previously provisioned, or creates a new one if
no \"qosReference\" attribute was previously provisioned;
ii. a \"null\" value, that removes a previously provisioned \"qosReference\"
attribute value; and/or
\- an \"altSerReqs\" attribute, which may contain:
i. a prioritized list of alternative QoS references, that replaces an existing
alternative QoS references list if the \"altSerReqs\" attribute was previously
provisioned, or creates a new one if no \"altSerReqs\" attribute was
previously provisioned;
ii. a \"null\" value, that removes a previously provisioned alternative QoS
references list.
\- if the \"DisableUENotification\" feature is supported, a \"disUeNotif\"
attribute, which may contain:
i. a \"true\" value if it was not provided or it was provided and set to
\"false\";
ii. a \"false\" value if it was provided and set to \"true\".
When the AF provides the \"altSerReqs\" attribute containing a prioritized
list of alternative QoS references, the AF shall subscribe to receive
notifications from the PCF when the resources associated to the corresponding
service information have been allocated as described in subclause 4.2.3.10 and
when the GBR QoS targets for one or more service data flows can no longer (or
can again) be guaranteed, as described in subclause 4.2.3.6, if not previously
subscribed.
Due to the updated required QoS information, the PCF may need to modify the
related PCC rules as specified in 3GPP TS 29.513 [7] and provide the updated
information towards the SMF following the corresponding procedures specified
in 3GPP TS 29.512 [8].
The PCF shall reply to the AF as described in subclause 4.2.3.2.
#### 4.2.3.31 Support of QoSHint feature
If the QoSHint feature is supported by the AF, the AF may include the
\"desMaxLatency\" attribute and/or \"desMaxLoss\" attribute within a media
component of the \"medComponents\" attribute to indicate that the related
media of the modified Individual Application Session Context resource has
specific latency and/or loss demands.
#### 4.2.3.32 Modification of Subscription to Reallocation of Credit
notification
This procedure is used by the AF if the \"IMS_SBI\" and the
\"ReallocationOfCredit\" features are supported to modify in the PCF the
subscription to notification about reallocation of credit for the Service Data
Flows within the AF application session context.
The AF shall use the HTTP PATCH method to update the \"Events Subscription\"
sub-resource together with the modifications to the \"Individual Application
Session Context\" resource.
The AF shall include in the HTTP PATCH request message described in subclause
4.2.3.2, in the \"ascReqData\" attribute, the updated values of the
\"EventsSubscReqDataRm\" data type, which either include in the \"events\"
attribute a new element with the \"event\" attribute set to the value
\"REALLOCATION_OF_CREDIT\" or remove from the \"events\" attribute the
existing element with the \"event\" attribute set to the value
\"REALLOCATION_OF_CREDIT\".
As a result of this action, the PCF shall set the appropriate subscription to
reallocation of credit notification for the corresponding PCC Rule(s) as
described in 3GPP TS 29.512 [8].
The PCF shall reply to the AF with an HTTP response message as described in
subclause 4.2.3.2.
### 4.2.4 Npcf_PolicyAuthorization_Delete service operation
#### 4.2.4.1 General
The Npcf_PolicyAuthorization_Delete service operation provides means for the
NF service consumer to delete the context of application session information.
The following procedures using the Npcf_PolicyAuthorization_Delete service
operation are supported:
\- AF application session context termination.
\- Reporting usage for sponsored data connectivity.
\- Termination of Multimedia Priority Services.
\- Request and report of access network information.
\- Termination of MCPTT.
\- Termination of MCVideo.
\- Priority sharing indication.
\- Report of RAN-NAS release cause.
\- Termination of Mission Critical Services.
#### 4.2.4.2 AF application session context termination
This procedure is used to terminate an AF application session context for the
service as defined in 3GPP TS 23.501 [2], 3GPP TS 23.502 [3] and 3GPP TS
23.503 [4].
Figure 4.2.4.2-1 illustrates the application session context termination.
Figure 4.2.4.2-1: Application session context termination
When an AF session is terminated, and if the AF application session context
was created as described in subclause 4.2.2 or in subclause 4.2.6.3, the AF
shall invoke the Npcf_PolicyAuthorization_Delete service operation to the PCF
using an HTTP POST request, as shown in figure 4.2.4.2-1, step 1.
The AF shall set the request URI to \"{apiRoot}/npcf-
policyauthorization/v1/app-sessions/{appSessionId}/delete\".
The AF may include in the body of the HTTP POST the \"EventsSubscReqData\"
data type with the \"evSubsc\" attribute indicating the corresponding list of
events to subscribe to.
When the PCF receives the HTTP POST request from the AF, indicating the
termination of the AF application session context information, the PCF shall
acknowledge that request by sending an HTTP response message with the
corresponding status code.
If the HTTP POST request from the AF is accepted, the PCF shall send to the
AF:
a) if event information is reported, a \"200 OK\" response to HTTP POST
request, as shown in figure 4.2.4.2-1, step 2a, including in the
\"AppSessionContext\" data type the \"evsNotif\" attribute, which encodes
within \"evNotifs\" attribute the event to report to the AF, if available, as
described in subclause 4.2.5.2. If the event information is not available at
the PCF the PCF shall defer sending the response to the AF and shall
immediately configure the SMF to provide such information, as specified in
3GPP TS 29.512 [8];
b) otherwise, the PCF shall send to the AF a \"204 No Content\".
Afterwards, the PCF shall free the network resources allocated for the Service
Data Flow(s) corresponding to the deleted AF application session context
information. In order to do that, the PCF shall initiate the request for the
removal of any related PCC rules from the SMF, if not previously done,
following the corresponding procedures specified in 3GPP TS 29.512 [8].
If the HTTP POST request from the AF is rejected, the PCF shall indicate in
the response to HTTP POST request the cause for the rejection as specified in
subclause 5.7.
#### 4.2.4.3 Reporting usage for sponsored data connectivity
When \"SponsoredConnectivity\" is supported, and the AF indicated to enable
sponsored data connectivity and the AF provided usage thresholds for such
sponsor to the PCF, the PCF shall report accumulated usage to the AF using the
response of the Npcf_PolicyAuthorization_Delete service operation.
This procedure is initiated when:
\- the \"Individual Application Session Context\" is deleted by the AF; or
\- the PCF requests the deletion of the \"Individual Application Session
Context\" to the AF, as described in subclause 4.2.5.3, due to PDU session
termination, the termination of all the service data flows of the AF session
or the home operator policy disallowing the UE accessing the sponsored data
connectivity in the roaming case.
To report the accumulated usage, the PCF shall immediately configure the SMF
to retrieve the accumulated usage as specified in 3GPP TS 29.512 [8]. When the
PCF receives the usage information from the SMF, the PCF shall notify the AF
by including the \"EventsNotification\" data type in the response of the HTTP
POST request as described in subclause 4.2.4.2.
The PCF shall include:
\- an event of the \"AfEventNotification\" data type in the \"evNotifs\"
attribute with the matched event \"USAGE_REPORT\" in the \"event\" attribute;
and
\- the usage encoded in the \"usgRep\" attribute.
#### 4.2.4.4 Void
#### 4.2.4.5 Termination of Multimedia Priority Services
If the AF session being terminated corresponds to an MPS session, the PCF
shall delete the PCC rules corresponding to the MPS session and the PCF shall
revoke the actions related to the prioritization of the MPS session in the
corresponding PDU Session as defined in 3GPP TS 29.512 [8].
#### 4.2.4.6 Request and report of access network information
This procedure is used by an AF to request the PCF to report the access
network information (i.e. user location and/or user timezone information) at
the deletion of the \"Individual Application Session Context\" resource when
the \"NetLoc\" feature is supported.
This procedure is initiated when:
\- the \"Individual Application Session Context\" is deleted by the AF; or
\- the PCF requests the deletion of the \"Individual Application Session
Context\" from the AF, as described in subclause 4.2.5.3, due to PDU session
termination or the termination of all the service data flows of the AF
session.
The AF shall include in the HTTP POST request message described in subclause
4.2.4.2:
\- an entry of the \"AfEventSubscription\" data type in the \"events\"
attribute with:
a) the \"event\" attribute set to the value \"ANI_REPORT\"; and
b) the \"notifMethod\" attribute set to the value \"ONE_TIME\"; and
\- the \"reqAnis\" attribute, with the required access network information,
i.e. user location and/or user time zone information).
When the PCF determines that the access network does not support the access
network information reporting because the SMF does not support the NetLoc
feature, the PCF shall respond to the AF including in the
\"EventsNotification\" data type the \"noNetLocSupp\" attribute set to
\"ANR_NOT_SUPPORTED\" value. Otherwise, the PCF shall immediately configure
the SMF to provide such access information, as specified in 3GPP TS 29.512
[8].
When the PCF receives the access network information from the SMF, the PCF
shall provide the corresponding access network information to the AF by
including the \"EventsNotification\" data type in the \"200 OK\" response to
the HTTP POST request. The PCF shall include:
\- in case of 3GPP access, the user location information in the
\"eutraLocation\" or in the \"nrLocation\" attribute in the \"ueLoc\"
attribute, if available and required;
\- in case of untrusted non-3GPP access, the user location information in the
\"n3gaLocation\" attribute in the \"ueLoc\" attribute, if required, as
follows:
a) the user local IP address in the \"ueIpv4Addr\" or \"ueIpv6Addr\"
attribute, if available; and
b) the UDP source port or the TCP source port in the \"portNumber\" and
\"protocol\" attributes if available;
NOTE 1: When the UE reaches the ePDG via a NAT, the combination of UE local IP
address and the UE source port is needed for lawful interception purposes. The
UE source port may be either a UDP or a TCP port, and it is indicated in the
\"protocol\" attribute.
\- in case of trusted non-3GPP access, the user location information in the
\"n3gaLocation\" attribute in the \"ueLoc\" attribute, if required, as
follows:
a) the user local IP address in the \"ueIpv4Addr\" or \"ueIpv6Addr\"
attribute, if available; and
b) the UDP source port in the \"portNumber\" attribute if available; and
NOTE 2: The UDP protocol can be used between the UE and the TNGF to enable NAT
traversal.
c) either the TNAP identifier encoded in the \"tnapId\" attribute or the TWAP
identifier encoded in the \"twapId\" attribute. The TNAP identifier and the
TWAP identifier shall consist of:
i. the SSID in the \"ssId\" attribute;
ii. the BSSID the \"bssId\" attribute if available; and
iii. the civic address in the \"civicAddress\" attribute if available;
\- if user location was required, the time when it was last known in the
\"ueLocTime\" attribute if available;
NOTE 3: The PCF derives the value of the \"ueLocTime\" attribute from the
\"userLocationInfoTime\" attribute received from the SMF, as specified in 3GPP
TS 29.512 [8].
\- the serving network identity (PLMN network code and country code and, if
available, the NID) in the \"plmnId\" attribute, if user location information
is required but not available in any access; and/or
\- the UE timezone in the \"ueTimeZone\" attribute if required and available.
When the PCF receives from the SMF that the access network does not support
access network information report, the PCF shall include the \"noNetLocSupp\"
attribute set to \"ANR_NOT_SUPPORTED\", \"TZR_NOT_SUPPORTED\" or
\"LOC_NOT_SUPPORTED\" value received from the SMF in the
\"EventsNotification\" data type in the \"200 OK\" response to the HTTP POST
request.
The PCF shall also include an event of the \"AfEventNotification\" data type
in the \"evNotifs\" attribute with the \"event\" attribute set to the value
\"ANI_REPORT\".
#### 4.2.4.7 Termination of MCPTT
If the \"Individual Application Session Context\" resource being removed
corresponds to an MCPTT session, the PCF shall delete the PCC rules
corresponding to the MCPTT session and the PCF shall revoke the actions
related to the prioritization of the MCPTT session in the corresponding PDU
Session as defined in 3GPP TS 29.512 [8].
#### 4.2.4.8 Termination of MCVideo
If the \"Individual Application Session Context\" resource being removed
corresponds to an MCVideo session, the PCF shall delete the PCC rules
corresponding to the MCVideo session and the PCF shall revoke the actions
related to the prioritization of the MCVideo session in the corresponding PDU
Session as defined in 3GPP TS 29.512 [8].
#### 4.2.4.9 Priority sharing indication
If the \"Individual Application Session Context\" resource being removed
included the \"prioSharingInd\" attribute set to \"ENABLED\" within a media
component of the \"medComponents\" attribute, if the related media flow(s) was
in priority sharing with other media flows the PCF should readjust the
Allocation and Retention Priority for the remaining services sharing
Allocation and Retention Priority as described in 3GPP TS 29.512 [8],
subclause 4.2.6.2.9 and handle the media flow removed according to normal
PCC/QoS rule provisioning procedures described in 3GPP TS 29.512 [8],
subclause 4.2.6.2.
#### 4.2.4.10 Report of RAN-NAS release cause
This procedure is used by a PCF to report about the RAN-NAS release cause
together with access network information (i.e. user location and/or user
timezone information) at the deletion of the \"Individual Application Session
Context\" resource when the \"RAN-NAS-Cause\" feature is supported.
This procedure is initiated when:
\- the \"Individual Application Session Context\" is deleted by the AF; or
\- the PCF requests the deletion of the \"Individual Application Session
Context\" from the AF, as described in subclause 4.2.5.3, due to PDU session
termination or the termination of all the service data flows of the AF
session.
The PCF shall immediately configure the SMF to provide such RAN-NAS release
cause together with access information, as specified in 3GPP TS 29.512 [8].
When the PCF receives the RAN-NAS release cause and access network information
from the SMF, the PCF shall provide the corresponding access network
information and RAN-NAS release cause to the AF by including the
\"EventsNotification\" data type in the \"200 OK\" response to the HTTP POST
request. The PCF shall include:
\- in case of 3GPP access, the user location information in the
\"eutraLocation\" or in the \"nrLocation\" attribute in the \"ueLoc\"
attribute, if available;
\- in case of untrusted non-3GPP access, the user location information in the
\"n3gaLocation\" attribute in the \"ueLoc\" attribute, if available, as
follows:
a) the user local IP address in the \"ueIpv4Addr\" or \"ueIpv6Addr\"
attribute; and
b) the UDP source port or the TCP source port in the \"portNumber\" and
\"protocol\" attributes if available;
NOTE 1: When the UE reaches the ePDG via a NAT, the combination of UE local IP
address and the UE source port is needed for lawful interception purposes. The
UE source port may be either a UDP or a TCP port, and it is indicated in the
\"protocol\" attribute.
\- in case of trusted non-3GPP access, the user location information in the
\"n3gaLocation\" attribute in the \"ueLoc\" attribute, if available, as
follows:
a) the user local IP address in the \"ueIpv4Addr\" or \"ueIpv6Addr\"
attribute, if available; and
b) the UDP source port in the \"portNumber\" attribute if available; and
NOTE 2: The UDP protocol can be used between the UE and the TNGF to enable NAT
traversal.
c) either the TNAP identifier encoded in the \"tnapId\" attribute or the TWAP
identifier encoded in the \"twapId\" attribute. The TNAP identifier and the
TWAP identifier shall consist of:
i. the SSID in the \"ssId\" attribute;
ii. the BSSID the \"bssId\" attribute if available; and
iii. the civic address in the \"civicAddress\" attribute if available;
\- the serving network identity (PLMN network code and country code and, if
available, the NID) in the \"plmnId\" attribute, if user location information
is not available in any access;
\- the UE timezone in the \"ueTimeZone\" attribute if available; and
\- the RAN and/or NAS release cause in the \"ranNasRelCauses\" attribute, if
available.
The PCF shall also include an event of the \"AfEventNotification\" data type
in the \"evNotifs\" attribute with the \"event\" attribute set to the value
\"RAN_NAS_CAUSE\".
#### 4.2.4.11 Termination of Mission Critical Services
If the AF session being terminated corresponds to an MCS session, the PCF
shall delete the PCC rules corresponding to the MCS session and the PCF shall
revoke the actions related to the prioritisation of the MCS session in the
corresponding PDU Session as defined in 3GPP TS 29.512 [8].
#### 4.2.4.12 Void
### 4.2.5 Npcf_PolicyAuthorization_Notify service operation
#### 4.2.5.1 General
The Npcf_PolicyAuthorization_Notify service operation enables notification to
NF service consumers that the previously subscribed event for the existing
application session context occurred or that the application session context
is no longer valid.
The following procedures using the Npcf_PolicyAuthorization_Notify service
operation are supported:
\- Notification about application session context event.
\- Notification about application session context termination.
\- Notification about Service Data Flow QoS notification control.
\- Notification about service data flow deactivation.
\- Reporting usage for sponsored data connectivity.
\- Notification of resources allocation outcome.
\- Reporting access network information.
\- Notification of signalling path status.
\- Notification about out of credit.
\- Notification about bridge management information and/or port management
information, Individual Application Session Context exists.
\- Notification about Service Data Flow QoS Monitoring control.
\- Report of EPS Fallback.
\- Notification about 5GS Bridge Information, no Individual Application
Session Context exists.
\- Notification about reallocation of credit.
#### 4.2.5.2 Notification about application session context event
This procedure is invoked by the PCF to notify the AF when a certain,
previously subscribed, application session context event occurs, as defined in
3GPP TS 23.501 [2], 3GPP TS 23.502 [3] and 3GPP TS 23.503 [4].
Figure 4.2.5.2-1 illustrates the notification about application session
context event.
Figure 4.2.5.2-1: Notification about application session context event
When the PCF determines that the event for the existing AF application session
context, to which the AF has subscribed to, occurred e.g. upon reception of an
event notification for a PDU session from the SMF as described in 3GPP TS
29.512 [8], the PCF shall invoke the Npcf_PolicyAuthorization_Notify service
operation by sending the HTTP POST request (as shown in figure 4.2.5.2-1, step
1) to the AF using the notification URI received in the subscription creation
(or modification), as specified in subclause 4.2.6, and appending the
\"notify\" segment path at the end of the URI. The PCF shall provide in the
body of the HTTP POST request the \"EventsNotification\" data type including:
\- the Events Subscription resource identifier related with the notification
in the \"evSubsUri\" attribute; and
\- the list of the reported events in the \"evNotifs\" attribute. For each
reported event, the \"AfEventNotification\" data type shall include the event
identifier and may include additional event information.
The PCF shall include:
\- if the AF subscribed to the \"PLMN_CHG\" event, the \"event\" attribute set
to \"PLMN_CHG\" and the \"plmnId\" attribute including the PLMN identifier
and, if available, the NID if the PCF has requested to be updated with this
information in the SMF;
\- if the AF subscribed to the event \"ACCESS_TYPE_CHANGE\" in the HTTP POST
request, the \"event\" attribute set to \"ACCESS_TYPE_CHANGE\" and:
> i. the \"accessType\" attribute including the access type, and the
> \"ratType\" attribute including the RAT type when applicable for the
> notified access type; and/or
>
> ii. if the \"ATSSS\" feature is supported and the PDU session is a MA PDU
> session:
a. if it is the first access type report, and both, 3GPP and non-3GPP access
information is available, the \"addAccessInfo\" attribute. The
\"addAccessInfo\" attribute contains the additional access type information,
where the access type is encoded in the \"accessType\" attribute, and the RAT
type is encoded in the \"ratType\" attribute when applicable for the notified
access type;
b. if it is a subsequent access type change report:
\- if a new access type is added to the MA PDU session, the\"addAccessInfo\"
attribute with the added access type encoded in the \"accessType\" attribute,
and the RAT type encoded in the \"ratType\" attribute when applicable for the
notified access type;
\- if an access type is released to the MA PDU session, the \"relAccessInfo\"
attribute with the released access type encoded in the \"accessType\"
attribute, and the RAT type encoded in the \"ratType\" attribute when
applicable for the notified access type; and
NOTE: For a MA PDU session, if the \"ATSSS\" feature is not supported by the
AF the PCF shall include the \"accessType\" attribute and the \"ratType\"
attribute with a currently active combination of access type and RAT type.
When both 3GPP and non-3GPP accesses are available, the PCF includes the
information corresponding to the 3GPP access and only changes on activation
and deactivation of 3GPP access are reported.
> iii. the \"anGwAddr\" attribute including access network gateway address
> when available; and
\- if the \"IMS_SBI\" feature is supported and if the AF subscribed to the
\"CHARGING_CORRELATION\" event, the \"event\" attribute set to
\"CHARGING_CORRELATION\" and may include the \"anChargIds\" attribute
containing the access network charging identifier(s) and the \"anChargAddr\"
attribute containing the access network charging address.
The AF notification of other specific events using the
Npcf_PolicyAuthorization_Notify request is described in the related
subclauses.
Upon the reception of the HTTP POST request from the PCF indicating that the
PDU session and/or service related event occurred, the AF shall acknowledge
that request by sending an HTTP response message with the corresponding status
code.
If the HTTP POST request from the PCF is accepted, the AF shall acknowledge
the receipt of the event notification with a \"204 No Content\" response to
HTTP POST request, as shown in figure 4.2.5.2-1, step 2.
If the HTTP POST request from the PCF is not accepted, the AF shall indicate
in the response to HTTP POST request the cause for the rejection.
If the feature \"ES3XX\" is supported, and the AF determines the received HTTP
POST request needs to be redirected, the AF shall send an HTTP redirect
response as specified in subclause 6.10.9 of 3GPP TS 29.500 [5].
#### 4.2.5.3 Notification about application session context termination
This procedure is invoked by the PCF to notify the AF that the application
session context is no longer valid, as defined in 3GPP TS 23.501 [2], 3GPP TS
23.502 [3] and 3GPP TS 23.503 [4].
Figure 4.2.5.3-1 illustrates the notification about application session
context termination.
Figure 4.2.5.3-1: Notification about application session context termination
When the PCF determines that the AF application session context is no longer
valid, the PCF shall invoke the Npcf_PolicyAuthorization_Notify service
operation by sending the HTTP POST request (as shown in figure 4.2.5.3-1, step
1) using the notification URI received in the \"Individual Application Session
Context\" context creation, as specified in subclause 4.2.2 and subclause
4.2.6.3, and appending the \"terminate\" segment path at the end of the URI,
to trigger the AF to request the application session context termination (see
subclause 4.2.4.2). The PCF shall provide in the body of the HTTP POST request
the \"TerminationInfo\" data type including:
\- the Individual Application Session Context resource identifier related to
the termination notification in the \"resUri\" attribute; and
\- the application session context termination cause in the \"termCause\"
attribute of the \"TerminationCause\" data type, indicating:
i) \"PDU_SESSION_TERMINATION\" when the PCF received from the SMF the
indication of SM Policy Context termination without a specific PDU session
release cause value;
ii) \"ALL_SDF_DEACTIVATION\" when the PCF received from the SMF the indication
that all the SDFs of the Individual Application Session Context resource are
deactivated because other reasons than \"PS_TO_CS_HAN\";
iii) \"PS_TO_CS_HO\" if the \"IMS_SBI\" feature is supported and the PCF
received from the SMF:
a) the PDU session release cause value \"PS_TO_CS_HO\"; or
b) the failure code value \"PS_TO_CS_HAN\" for all the SDFs of the Individual
Application Session Context resource.
Upon the reception of the HTTP POST request from the PCF requesting the
application session context termination, the AF shall acknowledge that request
by sending an HTTP response message with the corresponding status code.
If the HTTP POST request from the PCF is accepted, the AF shall acknowledge
the receipt of the application session context termination request with a
\"204 No Content\" response to HTTP POST request (as shown in figure
4.2.5.3-1, step 2) and shall invoke the Npcf_PolicyAuthorization_Delete
service operation to the PCF as described in subclause 4.2.4.
If the HTTP POST request from the PCF is not accepted, the AF shall indicate
in the response to HTTP POST request the cause for the rejection.
If the feature \"ES3XX\" is supported, and the AF determines the received HTTP
POST request needs to be redirected, the AF shall send an HTTP redirect
response as specified in subclause 6.10.9 of 3GPP TS 29.500 [5].
#### 4.2.5.4 Notification about Service Data Flow QoS notification control
When the PCF gets the knowledge that one or more SDFs:
\- cannot guarantee the GBR QoS targets; or
\- can guarantee again the GBR QoS targets;
the PCF shall inform the AF accordingly if the AF has previously subscribed as
described in subclauses 4.2.2.6 and 4.2.3.6.
The PCF shall notify the AF by including the \"EventsNotification\" data type
in the body of the HTTP POST request as described in subclause 4.2.5.2.
The PCF shall include:
\- within the \"evNotifs\" attribute an event entry of the
\"AfEventNotification\" data type with the matched event \"QOS_NOTIF\" in the
\"event\" attribute; and
\- the \"qncReports\" array with:
a) the \"notifType\" attribute to indicate whether the GBR targets for the
indicated SDFs are \"NOT_GUARANTEED\" or \"GUARANTEED\" again;
b) the identification of the affected service flows (if not all the flows are
affected) encoded in the \"flows\" attribute if applicable; and
c) if the \"AuthorizationWithRequiredQoS\" feature as defined in subclause 5.8
is supported, the reference to the Alternative Service Requirement
corresponding alternative QoS parameter set if received from the SMF within
the \"altSerReq\" attribute. When the \"altSerReq\" attribute is omitted and
the \"notifType\" attribute is NOT_GUARANTEED, it indicates that the lowest
priority alternative QoS profile could not be fulfilled.
If \"MediaComponentVersioning\" feature is supported, and if the content
version was included when the corresponding media component was provisioned,
the \"flows\" attribute shall also contain the \"contVers\" attribute
including the content version(s) of the media components. The PCF shall
include more than one entry in the \"contVers\" attribute for the same media
component if the PCF has received multiple content versions as described in
subclause 4.2.6.2.14 in 3GPP TS 29.512 [8].
When the AF receives the HTTP POST request, it shall acknowledge the request
by sending a \"204 No Content\" response to the PCF. The AF may also update
the AF application session context information by sending an HTTP PATCH
request to the PCF.
Signalling flows for Service Data Flow QoS notification control are presented
in 3GPP TS 29.513 [7].
#### 4.2.5.5 Notification about Service Data Flow Deactivation
When the PCF gets the knowledge that one or more SDFs have been deactivated,
the PCF shall inform the AF accordingly if the AF has previously subscribed as
described in subclauses 4.2.2.7 and 4.2.3.7.
When not all the service data flows within the AF application session context
are affected, the PCF shall notify the AF by including the
\"EventsNotification\" data type in the body of the HTTP POST request as
described in subclause 4.2.5.2.
The PCF shall include within the \"evNotifs\" attribute an event of
\"AfEventNotification\" data type indicating the matched event
\"FAILED_RESOURCES_ALLOCATION\" in the \"event\" attribute and the deactivated
service data flows (if not all the flows are affected) encoded in the
\"flows\" attribute.
If the \"MediaComponentVersioning\" feature is supported, and if the content
version was included when the corresponding media component was provisioned as
described in subclause 4.2.5.8, the PCF shall also include in the \"flows\"
attribute the \"contVers\" attribute with the content version(s) of the media
components.
If the \"RAN-NAS-Cause\" feature is supported and the PCF received the RAN-NAS
release cause and access network information from the SMF, the PCF shall
provide in the \"EventsNotification\" data type of the HTTP POST request:
\- in case of 3GPP access, the user location information in the
\"eutraLocation\" or in the \"nrLocation\" attribute in the \"ueLoc\"
attribute, if available;
\- in case of untrusted non-3GPP access, the user location information in the
\"n3gaLocation\" attribute in the \"ueLoc\" attribute, if available, as
follows:
a) the user local IP address in the \"ueIpv4Addr\" or \"ueIpv6Addr\"
attribute; and
b) the UDP source port or the TCP source port in the \"portNumber\" and
\"protocol\" attributes if available;
NOTE 1: When the UE reaches the ePDG via a NAT, the combination of UE local IP
address and the UE source port is needed for lawful interception purposes. The
UE source port may be either a UDP or a TCP port, and it is indicated in the
\"protocol\" attribute.
\- in case of trusted non-3GPP access, the user location information in the
\"n3gaLocation\" attribute in the \"ueLoc\" attribute, if available, as
follows:
a) the user local IP address in the \"ueIpv4Addr\" or \"ueIpv6Addr\"
attribute, if available; and
b) the UDP source port in the \"portNumber\" attribute if available; and
NOTE 2: The UDP protocol can be used between the UE and the TNGF to enable NAT
traversal.
c) either the TNAP identifier encoded in the \"tnapId\" attribute or the TWAP
identifier encoded in the \"twapId\" attribute. The TNAP identifier and the
TWAP identifier shall consist of:
i. the SSID in the \"ssId\" attribute;
ii. the BSSID the \"bssId\" attribute if available; and
iii. the civic address in the \"civicAddress\" attribute if available;
\- the serving network identity (PLMN network code and country code and, if
available, the NID) in the \"plmnId\" attribute, if user location information
is not available in any access;
\- the UE timezone in the \"ueTimeZone\" attribute if available; and
\- the RAN and/or NAS release cause in the \"ranNasRelCauses\" attribute, if
available.
The PCF shall include in the \"evNotifs\" attribute, together with the event
\"FAILED_RESOURCES_ALLOCATION\", an event of the \"AfEventNotification\" data
type with the \"event\" attribute set to the value \"RAN_NAS_CAUSE\".
The PCF shall include more than one entry in the \"contVers\" attribute for
the same media component if the PCF has received multiple content versions as
described in subclause 4.2.6.2.14 in 3GPP TS 29.512 [8].
When the AF receives the HTTP POST request, it shall acknowledge the request
by sending a \"204 No Content\" response to the PCF. The AF may also update
the AF application session context information by sending an HTTP PATCH
request to the PCF.
When all the service data flows within the AF session are affected, the PCF
shall inform the AF by sending a notification about application session
context termination as defined in subclause 4.2.5.3.
Signalling flows for Service Data Flow Deactivation cases are presented in
3GPP TS 29.513 [7].
#### 4.2.5.6 Reporting usage for sponsored data connectivity
When \"SponsoredConnectivity\" is supported, the AF enabled sponsored data
connectivity and the AF provided usage thresholds for such sponsor to the PCF,
the PCF shall report accumulated usage to the AF using the
Npcf_PolicyAuthorization_Notify service operation when:
\- the PCF detects that the usage threshold provided by the AF has been
reached; or
\- the AF disables the sponsored data connectivity.
The PCF shall notify the AF of the accumulated usage by including the
\"EventsNotification\" data type in the body of the HTTP POST request as
described in subclause 4.2.5.2.
The PCF shall include:
\- an event of the \"AfEventNotification\" data type in the \"evNotifs\"
attribute with the matched event \"USAGE_REPORT\" in the \"event\" attribute;
and
\- the accumulated usage, corresponding to the usage since the last report to
the AF, encoded in the \"usgRep\" attribute.
When the AF receives the HTTP POST request, it shall acknowledge the request
by sending a \"204 No Content\" response to the PCF. The AF may terminate the
AF session sending an HTTP POST as described in subclause 4.2.4.2 or update
the AF application session context information by providing a new usage
threshold sending an HTTP PATCH request to the PCF as described in subclause
4.2.3.5 or an HTTP PUT request to the PCF as described in subclause 4.2.6.4.
NOTE: Once the accumulated usage is reported by the PCF to the AF, the
monitoring will not start until the PCF receives the new threshold from the AF
and provides it to the SMF.
#### 4.2.5.7 Void
#### 4.2.5.8 Notification about resources allocation outcome
When the PCF becomes aware that the resources associated to service
information for one or more SDFs have been allocated, the PCF shall inform the
AF accordingly if the AF has previously subscribed to the
\"SUCCESSFUL_RESOURCES_ALLOCATION\" event as described in subclauses 4.2.2.10
and 4.2.3.10. The PCF shall notify the AF by including the
\"EventsNotification\" data type in the body of the HTTP POST request as
described in subclause 4.2.5.2. The PCF shall include in the \"evNotifs\"
attribute an entry with the \"event\" attribute set to
\"SUCCESSFUL_RESOURCES_ALLOCATION\" and (if not all the flows are affected)
the identification of the related media components in the \"flows\" attribute.
If the \"MediaComponentVersioning\" feature is supported, the PCF shall also
include in the \"flows\" attribute the \"contVers\" attribute with the content
version(s) of the media components if the content version was included when
the corresponding media component was provisioned.
If the \"AuthorizationWithRequiredQoS\" feature as defined in subclause 5.8 is
supported, when the PCF becomes aware that the resources associated to service
information for one or more SDFs have been allocated and additionally receives
the alternative QoS parameter set(s), the PCF shall notify the AF by including
the \"EventsNotification\" data type in the body of the HTTP POST request as
described in subclause 4.2.5.2. The PCF shall include:
\- an entry in the \"evNotifs\" attribute with the \"event\" attribute set to
\"SUCCESSFUL_RESOURCES_ALLOCATION\"; and
\- the \"succResourcAllocReports\" attribute with the reference to the
Alternative Service Requirement corresponding alternative QoS parameter set
within the \"altSerReq\" attribute and the identification of the related media
components in the \"flows\" attribute. If the \"MediaComponentVersioning\"
feature is supported, the PCF shall also include in the \"flows\" attribute
the \"contVers\" attribute with the content version(s) of the media components
if the content version was included when the corresponding media component was
provisioned.
When the PCF becomes aware that the resources associated to service
information for one or more SDFs cannot be allocated, the PCF shall inform the
AF accordingly if the AF has previously subscribed to the
\"FAILED_RESOURCES_ALLOCATION\" event as described in subclauses 4.2.2.10 and
4.2.3.10. The PCF shall notify the AF by including the \"EventsNotification\"
data type in the body of the HTTP POST request as described in subclause
4.2.5.2. The PCF shall include:
\- an entry in the \"evNotifs\" attribute with the \"event\" attribute set to
\"FAILED_RESOURCES_ALLOCATION\"; and
\- the \"failedResourcAllocReports\" attribute with the active/inactive status
of the PCC rules related to certain media components encoded in the
\"mcResourcStatus\" attribute, and (if not all the flows are affected) the
identification of the related media components in the \"flows\" attribute. If
the \"MediaComponentVersioning\" feature is supported, the PCF shall also
include in the \"flows\" attribute the \"contVers\" attribute with the content
version(s) of the media components if the content version was included when
the corresponding media component was provisioned.
The PCF shall include more than one entry in the \"contVers\" attribute for
the same media component if the PCF has received multiple content versions as
described in subclause 4.2.6.2.14 in 3GPP TS 29.512 [8].
NOTE: The AF will use the content version to identify the media component
version that failed or succeeded when multiple provisions of the same media
component occur in a short period of time. How the AF handles such situations
is out of scope of this specification.
When the AF receives the HTTP POST request, it shall acknowledge the request
by sending a \"204 No Content\" response to the PCF.
Signalling flows for resource allocation outcome are presented in 3GPP TS
29.513 [7].
#### 4.2.5.9 Void
#### 4.2.5.10 Notification of signalling path status
When the PCF is notified of the loss or release of resources associated to the
PCC rules corresponding with AF signalling IP flows, the PCF shall inform the
AF about the loss of the signalling transmission path if the AF has previously
subscribed as described in subclause 4.2.6.7.
The PCF shall notify the AF by including the \"EventsNotification\" data type
in the body of the HTTP POST request as described in subclause 4.2.5.2.
The PCF shall include within the \"evNotifs\" attribute an event of
\"AfEventNotification\" data type indicating the matched event
\"FAILED_RESOURCES_ALLOCATION\" in the \"event\" attribute and the deactivated
IP flow encoded in the \"flows\" attribute.
If the \"RAN-NAS-Cause\" feature is supported and the PCF received the RAN-NAS
release cause and/or access network information from the SMF, the PCF shall
provide in the \"EventsNotification\" data type in the \"200 OK\" response to
the HTTP POST request:
\- in case of 3GPP access, the user location information in the
\"eutraLocation\" or in the \"nrLocation\" attribute in the \"ueLoc\"
attribute, if available;
\- in case of untrusted non-3GPP access, the user location information in the
\"n3gaLocation\" attribute in the \"ueLoc\" attribute, if available, as
follows:
a) the user local IP address in the \"ueIpv4Addr\" or \"ueIpv6Addr\"
attribute; and
b) the UDP source port or the TCP source port in the \"portNumber\" and
\"protocol\" attributes if available;
NOTE 1: When the UE reaches the ePDG via a NAT, the combination of UE local IP
address and the UE source port is needed for lawful interception purposes. The
UE source port may be either a UDP or a TCP port, and it is indicated in the
\"protocol\" attribute.
\- in case of trusted non-3GPP access, the user location information in the
\"n3gaLocation\" attribute in the \"ueLoc\" attribute, if available, as
follows:
a) the user local IP address in the \"ueIpv4Addr\" or \"ueIpv6Addr\"
attribute, if available; and
b) the UDP source port in the \"portNumber\" attribute if available; and
NOTE 2: The UDP protocol can be used between the UE and the TNGF to enable NAT
traversal.
c) either the TNAP identifier encoded in the \"tnapId\" attribute or the TWAP
identifier encoded in the \"twapId\" attribute. The TNAP identifier and the
TWAP identifier shall consist of:
i. the SSID in the \"ssId\" attribute;
ii. the BSSID the \"bssId\" attribute if available; and
iii. the civic address in the \"civicAddress\" attribute if available;
\- the serving network identity (PLMN network code and country code and, if
available, the NID) in the \"plmnId\" attribute, if user location information
is not available in any access;
\- the UE timezone in the \"ueTimeZone\" attribute if available; and
\- the RAN and/or NAS release cause in the \"ranNasRelCauses\" attribute, if
available.
The PCF shall include in the \"evNotifs\" attribute, together with the event
\"FAILED_RESOURCES_ALLOCATION\", an event of the \"AfEventNotification\" data
type with the \"event\" attribute set to the value \"RAN_NAS_CAUSE\".
When the AF receives the HTTP POST request, it shall acknowledge the request
by sending a \"204 No Content\" response to the PCF.
#### 4.2.5.11 Reporting access network information
This procedure is used by the PCF to report the access network information
(i.e. user location and/or user timezone information) to the AF when the
\"NetLoc\" feature is supported.
When the PCF receives the access network information from the SMF, the PCF
shall include the \"EventsNotification\" data type in the body of the HTTP
POST request message sent to the AF as described in subclause 4.2.5.2. The PCF
shall include in the \"EventsNotification\" data type:
\- in case of 3GPP access, the user location information in the
\"eutraLocation\" or in the \"nrLocation\" attribute in the \"ueLoc\"
attribute, if available and required;
\- in case of untrusted non-3GPP access, the user location information in the
\"n3gaLocation\" attribute in the \"ueLoc\" attribute, if required, as
follows:
a) the user local IP address in the \"ueIpv4Addr\" or \"ueIpv6Addr\"
attribute, if available; and
b) the UDP source port or the TCP source port in the \"portNumber\" and
\"protocol\" attributes if available;
NOTE 1: When the UE reaches the ePDG via a NAT, the combination of UE local IP
address and the UE source port is needed for lawful interception purposes. The
UE source port may be either a UDP or a TCP port, and it is indicated in the
\"protocol\" attribute.
\- in case of trusted non-3GPP access, the user location information in the
\"n3gaLocation\" attribute in the \"ueLoc\" attribute, if required, as
follows:
a) the user local IP address in the \"ueIpv4Addr\" or \"ueIpv6Addr\"
attribute, if available; and
b) the UDP source port in the \"portNumber\" attribute if available; and
NOTE 2: The UDP protocol can be used between the UE and the TNGF to enable NAT
traversal.
c) either the TNAP identifier encoded in the \"tnapId\" attribute or the TWAP
identifier encoded in the \"twapId\" attribute. The TNAP identifier and the
TWAP identifier shall consist of:
i. the SSID in the \"ssId\" attribute;
ii. the BSSID the \"bssId\" attribute if available; and
iii. the civic address in the \"civicAddress\" attribute if available;
\- if user location was required, the time when it was last known in the
\"ueLocTime\" attribute if available;
NOTE 3: The PCF derives the value of the \"ueLocTime\" attribute from the
\"userLocationInfoTime\" attribute received from the SMF as specified in 3GPP
TS 29.512 [8].
\- the serving network identity (PLMN network code and country code and, if
available, the NID) in the \"plmnId\" attribute, if user location information
is required but not available in any access; and/or
\- the UE timezone in the \"ueTimeZone\" attribute if required and available.
When the PCF receives from the SMF that the access network does not support
access network information report, the PCF shall include the \"noNetLocSupp\"
attribute set to \"ANR_NOT_SUPPORTED\", \"TZR_NOT_SUPPORTED\" or
\"LOC_NOT_SUPPORTED\" value received from the SMF in the
\"EventsNotification\" data type in the \"200 OK\" response to the HTTP POST
request.
The PCF shall also include an event of the \"AfEventNotification\" data type
in the \"evNotifs\" attribute with the \"event\" attribute set to the value
\"ANI_REPORT\".
NOTE 4: The PCF receives the access network information from the SMF if it is
previously requested by the AF or at PDU session termination or at the
termination of all the service data flows of the AF session.
The PCF shall not invoke the Npcf_PolicyAuthorization_Notify service operation
with the \"event\" attribute set to the value \"ANI_REPORT\" to report to the
AF any subsequently received access network information, unless the AF sends a
new request for access network information.
#### 4.2.5.12 Notification about Out of Credit
If the \"IMS_SBI\" feature is supported and if the PCF becomes aware that
there is no credit available in the CHF for one or more SDFs, the PCF shall
inform the AF accordingly if the AF has previously subscribed to the
\"OUT_OF_CREDIT\" event as described in subclauses 4.2.2.22 and 4.2.3.22.
The PCF shall notify the AF by including the \"EventsNotification\" data type
in the body of the HTTP POST request as described in subclause 4.2.5.2.
The PCF shall include:
\- in the \"evNotifs\" attribute an entry with the \"event\" attribute set to
the value \"OUT_OF_CREDIT\"; and
\- the \"outOfCredReports\" attribute containing in each entry of the
\"OutOfCreditInformation\" data type the credit information for one or more
service data flows. The \"OutOfCreditInformation\" data type shall contain the
termination action in the \"finUnitAct\" attribute, and the identification of
the affected service data flows (if not all the flows are affected) encoded in
the \"flows\" attribute.
Upon the reception of the HTTP POST request from the PCF, the AF shall
acknowledge that request by sending an HTTP response message as described in
subclause 4.2.5.2.
#### 4.2.5.13 Notification about bridge management information and/or port
management information detection, Individual Application Session Context
exists
If the \"TimeSensitiveNetworking\" feature is supported and if the PCF becomes
aware that, for an existing Individual Application Session Context resource,
updated 5GS Bridge information is available, e.g., a BMIC and/or a DS-TT PMIC
and/or one or more NW-TT PMIC(s) are available, the PCF shall inform the AF
accordingly, if the AF has previously subscribed as described in subclause
4.2.2.31.
The PCF shall notify the AF by including the \"EventsNotification\" data type
in the body of the HTTP POST request as described in subclause 4.2.5.2.
The PCF shall include in the \"evNotifs\" attribute an entry with the
\"event\" attribute set to the value \"TSN_BRIDGE_INFO\", and the
\"tsnBridgeManCont\" attribute and/or the \"tsnPortManContDstt\" attribute
and/or the \"tsnPortManContNwtts\" attribute as received from the SMF if the
PCF is aware that a BMIC and/or a DS-TT PMIC and/or one or more NW-TT PMIC(s)
are available or updated.
Upon the reception of the HTTP POST request from the PCF, the AF shall
acknowledge that request as specified in subclause 4.2.5.2.
The TSN AF may use the received BMIC and/or the received DS-TT PMIC and/or NW-
TT PMIC(s) and the local configuration to construct the DS-TT port and or NW-
TT port management information required to interwork with the TSN network.
If port management information shall be sent as a response of the received
notification, the AF triggers the Npcf_PolicyAuthorization_Update service
operation to send the port management information to the PCF as specified in
subclause 4.2.3. The TSN AF delivers to the PCF the derived port management
information containers as described in subclause 4.2.3.25.
And/or if bridge management information shall be sent as a response of the
received notification, the AF includes the BMIC in the
Npcf_PolicyAuthorization_Update service operation as described in subclause
4.2.3.25.
#### 4.2.5.14 Notification about Service Data Flow QoS Monitoring control
When the PCF gets the information about any one of the following items for one
or more SDFs from the SMF:
\- uplink packet delay(s); or
\- downlink packet delay(s); or
\- round trip delay(s);
the PCF shall inform the AF accordingly if the AF has previously subscribed as
described in subclauses 4.2.2.23 and 4.2.3.23 and 4.2.6.8.
The PCF shall notify the AF by including the \"EventsNotification\" data type
in the body of the HTTP POST request as described in subclause 4.2.5.2.
The PCF shall include:
\- within the \"evNotifs\" attribute an event entry of the
\"AfEventNotification\" data type with the matched event \"QOS_MONITORING\" in
the \"event\" attribute; and
\- the \"qosMonReports\" array with:
a) the identification of the affected service flows (if not all the flows are
affected) encoded in the \"flows\" attribute if applicable; and
b) one or two uplink packet delays within the \"ulDelays\" attribute; or
c) one or two downlink packet delays within the \"dlDelays\" attribute; or
d) one or two round trip packet delays within the \"rtDelays\" attribute.
#### 4.2.5.15 Report of EPS Fallback
When \"EPSFallbackReport\" feature is supported and the PCF becomes aware of
the EPS Fallback for the resources requested for a particular service
information (voice media type), the PCF shall inform the AF if the AF has
previously subscribed as described in subclauses 4.2.2.30 and 4.2.3.29.
The PCF shall notify the AF by including the \"EventsNotification\" data type
in the body of the HTTP POST request as described in subclause 4.2.5.2.
The PCF shall include within the \"evNotifs\" attribute an event entry of the
\"AfEventNotification\" data type with the matched event \"EPS_FALLBACK\" in
the \"event\" attribute.
When the AF receives the HTTP POST request, it shall acknowledge the request
by sending a \"204 No Content\" response to the PCF.
#### 4.2.5.16 Notification about 5GS Bridge Information, no Individual
Application Session Context exists
If the \"TimeSensitiveNetworking\" feature is supported and if the PCF becomes
aware that 5GS Bridge information for a TSN network is available, but there is
no \"Individual Application Session Context\" resource bound to the SM Policy
Association updated with 5GS Bridge related information, the PCF shall inform
the TSN AF about the detection of a 5GS Bridge Information in the context of a
PDU session by sending a notification request to the request URI locally
configured in the PCF for this TSN network.
NOTE: PCF configuration of TSN AF URI needs to ensure that the notification is
addressed to a TSN AF that belongs to the same TSN network the UPF/NW-TT
connectes to. How it is achieved is implementation specific. It can be based
e.g. on dedicated DNN/S-NSSAI combinations or on the received Bridge
information.
Figure 4.2.5.16-1 illustrates the notification about ethernet port detection
when there is no Individual Application Session Context bound to the SM Policy
Association.
Figure 4.2.5.16-1: Notification about 5GS Bridge Information, no AF session
context exists
When the PCF determines that the AF application session context does not exist
for the SM Policy Association that detected new TSN port information, the PCF
shall invoke the Npcf_PolicyAuthorization_Notify service operation by sending
the HTTP POST request (as shown in figure 4.2.5.16-1, step 1) using the
notification URI locally configured in the PCF for this TSN network, and
appending the \"new-bridge\" segment path at the end of the URI, to trigger
the TSN AF to request the creation of an Invidual Application Session Context
resource to handle the 5GS Bridge detected in the context of a PDU session,
configuring TSN ports and bridge port management information, and providing
the corresponding TSCAI input containers and TSC traffic QoS related data (see
subclauses 4.2.2.2, 4.2.2.24, 4.2.2.25 and 4.2.2.31).
The PCF shall provide in the body of the HTTP POST request the
\"PduSessionTsnBridge\" data type including TSN Bridge information as follows:
\- the \"tsnBridgeInfo\" attribute as received from the SMF;
\- the \"tsnBridgeManCont\" attribute as received from the SMF, if available;
and
\- the \"tsnPortManContDstt\" attribute and/or \"tsnPortManContNwtts\"
attribute as received from the SMF, if available.
Upon the reception of the HTTP POST request from the PCF, the AF shall
acknowledge that request.
With the received information, the TSN AF shall immediately trigger the
creation of an Individual Application Session Context resource to handle in
this association the configuration of the new 5GS Bridge in the context of
this PDU session, as described in subclauses 4.2.2.2, 4.2.2.24, 4.2.2.25 and
4.2.2.31.
The TSN AF may use the received TSN bridge information and/or the received DS-
TT port management information container and/or NW-TT port management
information containers and the local configuration to construct the DS-TT port
and or NW-TT port management information required to interwork with the TSN
network.
#### 4.2.5.17 Notification about Reallocation of Credit
If the \"IMS_SBI\" and the \"ReallocationOfCredit\" features are supported and
if the PCF becomes aware that there is credit reallocated for one or more SDFs
after a former out of credit indication, the PCF shall inform the AF
accordingly if the AF has previously subscribed to the
\"REALLOCATION_OF_CREDIT\" event as described in subclauses 4.2.2.34 and
4.2.3.32.
The PCF shall notify the AF by including the \"EventsNotification\" data type
in the body of the HTTP POST request as described in subclause 4.2.5.2.
The PCF shall include in the \"evNotifs\" attribute an entry with:
\- the \"event\" attribute set to the value \"REALLOCATION_OF_CREDIT\"; and
\- the SDFs that are impacted as consequence of the reallocation of credit
condition encoded in the \"flows\" attribute.
Upon the reception of the HTTP POST request from the PCF, the AF shall
acknowledge that request by sending an HTTP response message as described in
subclause 4.2.5.2.
### 4.2.6 Npcf_PolicyAuthorization_Subscribe service operation
#### 4.2.6.1 General
The Npcf_PolicyAuthorization_Subscribe service operation enables NF service
consumers handling of subscription to events for the existing application
session context. Subscription to events shall be created:
\- within the application session context establishment procedure by invoking
the Npcf_PolicyAuthorization_Create service operation, as described in
subclause 4.2.2; or
\- within the application session context modification procedure by invoking
the Npcf_PolicyAuthorization_Update service operation, as described in
subclause 4.2.3; or
\- by invoking the Npcf_PolicyAuthorization_Subscribe service operation for
the existing application session context, as described in subclause 4.2.6.2.
The following procedures using the Npcf_PolicyAuthorization_Subscribe service
operation is supported:
\- Handling of subscription to events for the existing application session
context.
\- Initial subscription to events without provisioning of service information.
\- Subscription to usage monitoring of sponsored data connectivity.
\- Request of access network information.
\- Subscription to notification of signalling path status.
\- Subscription to Service Data Flow QoS Monitoring Information.
#### 4.2.6.2 Handling of subscription to events for the existing application
session context
This procedure is used to create a subscription to events for the existing AF
application session context bound to the corresponding PDU session or to
modify an existing subscription, as defined in 3GPP TS 23.501 [2], 3GPP TS
23.502 [3] and 3GPP TS 23.503 [4].
Figure 4.2.6.2-1 illustrates the creation of events subscription information
using HTTP PUT method.
Figure 4.2.6.2-1: Creation of events subscription information using HTTP PUT
Figure 4.2.6.2-2 illustrates the modification of events subscription
information using HTTP PUT method.
Figure 4.2.6.2-2: Modification of events subscription information using HTTP
PUT
When the AF decides to create a subscription to one or more events for the
existing application session context or to modify an existing subscription
previously created by itself at the PCF, the AF shall invoke the
Npcf_PolicyAuthorization_Subscribe service operation by sending the HTTP PUT
request to the resource URI representing the \"Events Subscription\" sub-
resource in the PCF, as shown in figure 4.2.6.2-1, step 1 and figure
4.2.6.2-2, step 1. The AF shall provide in the \"EventsSubscReqData\" data
type of the body of the HTTP PUT request:
\- the \"events\" attribute with the list of events to be subscribed; and
\- the \"notifUri\" attribute that includes the Notification URI to indicate
to the PCF where to send the notification of the subscribed events.
NOTE 1: The \"notifUri\" attribute within the EventsSubscReqData data
structure can be modified to request that subsequent notifications are sent to
a new NF service consumer.
Upon the reception of the HTTP PUT request from the AF, the PCF shall decide
whether the received HTTP PUT request is accepted.
If the HTTP PUT request from the AF is rejected, the PCF shall indicate in the
HTTP response the cause for the rejection as specified in subclause 5.7.
If the feature \"ES3XX\" is supported, and the PCF determines the received
HTTP PUT request needs to be redirected, the PCF shall send an HTTP redirect
response as specified in subclause 6.10.9 of 3GPP TS 29.500 [5].
If the PCF accepted the HTTP PUT request to create a subscription to events,
the PCF shall create the \"Events Subscription\" sub-resource and shall send
the HTTP response message to the AF as shown in figure 4.2.6.2-1, step 2. The
PCF shall include in the \"201 Created\" response:
\- a Location header field that shall contain the URI of the created \"Events
Subscription\" sub-resource i.e. \"{apiRoot}/npcf-policyauthorization/v1/app-
sessions/{appSessionId}/events-subscription\"; and
\- a response body with the \"EventsSubscPutData\" data type, that contains
the attributes of the \"EventsSubscReqData\" data type, representing the
created \"Events Subscription\" sub-resource.
If the PCF determines that one or more of the subscribed events are already
met in the PCF, the PCF may also include the attributes of the
\"EventsNotification\" data type within the \"EventsSubscPutData\" data type
to notify about the already met events in the PCF.
If the PCF accepted the HTTP PUT request to modify the events subscription,
the PCF shall modify the \"Events Subscription\" sub-resource and shall send
to the AF:
\- the HTTP \"204 No Content\" response (as shown in figure 4.2.6.2-2, step
2a); or
\- the HTTP \"200 OK\" response (as shown in figure 4.2.6.2-2, step 2b)
including in the \"EventsSubscPutData\" data type the updated representation
of the \"Events Subscription\" sub-resource encoded within the attributes of
the \"EventsSubscReqData\" data type and, if one or more of the updated
subscribed events are already met in the PCF, the notification of these events
by including the attributes of the \"EventsNotification\" data type.
The PCF shall include in the \"evsNotif\" attribute:
\- if the AF subscribed to the \"PLMN_CHG\" event in the HTTP PUT request, the
\"event\" attribute set to \"PLMN_CHG\" and the \"plmnId\" attribute including
the PLMN identifier and, if available, the NID if the PCF has previously
requested to be updated with this information in the SMF; and
\- if the AF subscribed to the \"ACCESS_TYPE_CHANGE\" event in the HTTP PUT
request, the \"event\" attribute set to \"ACCESS_TYPE_CHANGE\" and:
i. the \"accessType\" attribute including the access type, and the \"ratType\"
attribute including the RAT type when applicable for the notified access type;
and
ii. if the \"ATSSS\" feature is supported, the \"addAccessInfo\" attribute
with the additional access type information if available, where the access
type is encoded in the \"accessType\" attribute, and the RAT type is encoded
in the \"ratType\" attribute when applicable for the notified access type; and
NOTE 2: For a MA PDU session, if the \"ATSSS\" feature is not supported by the
AF the PCF includes the \"accessType\" attribute and the \"ratType\" attribute
with a currently active combination of access type and RAT type (when
applicable for the notified access type). When both 3GPP and non-3GPP accesses
are available, the PCF includes the information corresponding to the 3GPP
access.
iii. the \"anGwAddr\" attribute including access network gateway address when
available,
if the PCF has previously requested to be updated with this information in the
SMF.
Based on the received subscription information from the AF, the PCF may create
a subscription to event notifications or may modify the existing subscription
to event notifications, for a related PDU session from the SMF, as described
in 3GPP TS 29.512 [8].
#### 4.2.6.3 Initial subscription to events without provisioning of service
information
The AF may subscribe with the PCF to events notification without providing
service information.
NOTE 1: This service operation is intended to create a resource that enables
to handle subscription to events without provisioning service information. For
the scenarios where it is known the AF, after creating a subscription without
service information, could require an application session context with the PCF
with required service information, the AF needs to create an Individual
Application Session context as described in subclause 4.2.2.2.
Figure 4.2.6.3-1 illustrates the initial subscription to events without
provisioning of service information.
Figure 4.2.6.3-1: Initial Subscription to events without provisioning of
service information
When an AF establishes an application session context with the PCF to
subscribe to events and does not require PCC control for the related media,
the AF shall invoke the Npcf_PolicyAuthorization_Subscribe service operation
by sending the HTTP POST request to the resource URI representing the
\"Application Sessions\" collection resource of the PCF, as shown in figure
4.2.6.3-1, step 1.
The AF shall include in the \"ascReqData\" attribute of the
\"AppSessionContext\" data type in the payload body of the HTTP POST request:
\- either the \"ueMac\" attribute containing the UE MAC address, or the
\"ueIpv4\" attribute or \"ueIpv6\" attribute containing the UE IPv4 or the
IPv6 address;
\- the \"notifUri\" attribute containing the URI where the PCF shall request
to the AF the deletion of the \"Individual Application Session Context\"
resource\"; and
\- the \"evSubsc\" attribute of \"EventsSubscReqData\" data type to request
the notification of certain user plane events. The AF shall include:
a. the events to subscribe to in the \"events\" attribute; and
b. the notification URI where to address the notification of the met events
within the \"notifUri\" attribute.
The AF may provide in the \"AppSessionContext\" data type the DNN in the
\"dnn\" attribute, SUPI in the \"supi\" attribute or other information if
available.
If the PCF cannot successfully fulfil the received HTTP POST request due to
the internal PCF error or due to the error in the HTTP POST request, the PCF
shall send the HTTP error response as specified in subclause 5.7.
Otherwise, when the PCF receives the HTTP POST request from the AF, the PCF
shall apply session binding as described in 3GPP TS 29.513 [7]. The PCF
identifies the PDU session for which the HTTP POST request applies as
described in subclause 4.2.2.2.
The information required for session binding (UE MAC address, or UE Ipv4 or
IPv6 address, DNN, SUPI and other available information, such as S-NSSAI
and/or IPv4 address domain identifier) is provisioned in the \"Individual
Application Session Context\" resource. The events subscription is provisioned
in the \"Events Subscription\" sub-resource.
Based on the received subscription information from the AF, the PCF may create
a subscription to event notifications for a related PDU session from the SMF,
as described in 3GPP TS 29.512 [8].
If the PCF created the \"Events Subscription\" sub-resource within the
\"Individual Application Session Context\" resource, the PCF shall send to the
AF a \"201 Created\" response to the HTTP POST request, as shown in figure
4.2.6.3-1, step 2. The PCF shall include in the \"201 Created\" response:
\- a Location header field; and
\- an \"AppSessionContext\" data type in the payload body.
The Location header field shall contain the URI of the created events
subscription sub-resource i.e. \"{apiRoot}/npcf-policyauthorization/v1/app-
sessions/{appSessionId}/events-subscription\".
The \"AppSessionContext\" data type payload body shall contain the
representation of the created \"Individual Application Session Context\"
resource and \"Events Subscription\" sub-resource.
The PCF shall include in the \"evsNotif\" attribute:
\- if the AF subscribed to the event \"PLMN_CHG\" in the HTTP POST request,
the \"event\" attribute set to \"PLMN_CHG\" and the \"plmnId\" attribute
including the PLMN identifier and, if available, the NID if the PCF has
previously requested to be updated with this information in the SMF;
\- if the AF subscribed to the event \"ACCESS_TYPE_CHANGE\" in the HTTP POST
request, the \"event\" attribute set to \"ACCESS_TYPE_CHANGE\" and:
i. the \"accessType\" attribute including the access type, and the \"ratType\"
attribute including the RAT type when applicable for the notified access type;
and
ii. if the \"ATSSS\" feature is supported, the \"addAccessInfo\" attribute
with the additional access type information if available, where the access
type is encoded in the \"accessType\" attribute, and the RAT type is encoded
in the \"ratType\" attribute when applicable for the notified access type; and
NOTE 2: For a MA PDU session, if the \"ATSSS\" feature is not supported by the
AF the PCF includes the \"accessType\" attribute and the \"ratType\" attribute
with a currently active combination of access type and RAT type (if applicable
for the notified access type). When both 3GPP and non-3GPP accesses are
available, the PCF includes the information corresponding to the 3GPP access.
iii. the \"anGwAddress\" attribute including access network gateway address
when available,
if the PCF has previously requested to be updated with this information in the
SMF; and
\- if the \"IMS_SBI\" feature is supported and if the AF subscribed to the
event \"CHARGING_CORRELATION\" in the HTTP POST request, the \"event\"
attribute set to \"CHARGING_CORRELATION\" and may include the \"anChargIds\"
attribute containing the access network charging identifier(s) and the
\"anChargAddr\" attribute containing the access network charging address.
NOTE 3: Due to the resource structure, as result of the
Npcf_PolicyAuthorization_Subscribe service operation using POST methods, the
PCF creates an Individual Application Session context resource which can only
be deleted via Npcf_PolicyAuthorization_Delete service operation.
#### 4.2.6.4 Subscription to usage monitoring of sponsored data connectivity
This procedure is used by an AF to subscribe with the PCF to usage monitoring
of sponsored data connectivity or to provide updated usage thresholds for the
existing application session context, when the \"Sponsored Connectivity\"
feature is supported.
The AF shall include in the HTTP PUT request message described in subclause
4.2.6.2 the \"EventsSubscReqData\" data type, that shall contain:
\- the \"events\" attribute with a new entry of the \"AfEventSubscription\"
data type with the \"event\" attribute set to \"USAGE_REPORT\"; and
\- the \"usgThres\" attribute with the usage thresholds to apply.
The PCF shall reply to the AF as described in subclause 4.2.6.2.
#### 4.2.6.5 Void
#### 4.2.6.6 Request of access network information
This procedure is used by an AF to request the PCF to report the access
network information (i.e. user location and/or user timezone information)
without providing service information when the \"NetLoc\" feature is
supported.
The AF can request access network information without providing service
information:
\- at initial subscription to events, using the HTTP POST request message as
described in subclause 4.2.6.3; and
\- at modification of the subscription to events, using the HTTP PUT request
message as described in subclause 4.2.6.2.
The AF shall include in the HTTP request message:
\- an entry of the \"AfEventSubscription\" data type in the \"events\"
attribute with:
a) the \"event\" attribute set to the value \"ANI_REPORT\"; and
b) the \"notifMethod\" attribute set to the value \"ONE_TIME\"; and
\- the \"reqAnis\" attribute, with the required access network information,
i.e. user location and/or user time zone information).
When the PCF determines that the access network does not support the access
network information reporting because the SMF does not support the NetLoc
feature, the PCF shall respond to the AF including in the
\"EventsNotification\" data type the \"noNetLocSupp\" attribute set to
\"ANR_NOT_SUPPORTED\" value. Otherwise, the PCF shall immediately configure
the SMF to provide such access information, as specified in 3GPP TS 29.512
[8].
The PCF shall reply to the AF with the HTTP POST response as described in
subclause 4.2.6.3 and with the HTTP PUT response as described in subclause
4.2.6.2.
#### 4.2.6.7 Subscription to notification of signalling path status
When the feature \"IMS_SBI\" is supported, this procedure is used by an AF to
subscribe to notifications of the status of the AF signalling transmission
path.
The AF shall create a new \"Individual Application Session Context\" resource
with the PCF for the AF signalling using the Npcf_PolicyAuthorization_Create
service operation.
The AF shall provide:
\- the IP address (IPv4 or IPv6) of the UE in the \"ueIpv4\" or \"ueIpv6\"
attribute;
\- within the \"evSubsc\" attribute, the \"event\" attribute set to
\"FAILED_RESOURCES_ALLOCATION\"; and
\- a media component within the \"medComponents\" attribute including:
\- the \"medCompN\" attribute set to \"0\"; and
\- a single media subcomponent within the \"medSubComps\" attribute with:
\- the \"flowUsage\" attribute set to the value \"AF_SIGNALLING\"; and
\- if the procedures for AF provisioning of AF signalling flow information do
not apply, the \"fNum\" attribute set to \"0\".
When the \"fNum\" attribute is set to \"0\", the rest of attributes within the
related media component and media subcomponent shall not be used.
The PCF shall perform session binding as described in 3GPP TS 29.513 [7] and
shall reply to the AF as described in subclause 4.2.6.3.
PCC rules related to AF signalling IP flows should be provisioned to SMF using
the corresponding procedures specified at 3GPP TS 29.512 [8] at an earlier
stage (e.g. typically at the establishment of the QoS flow dedicated for AF
signalling IP flows). The PCF may install the corresponding dynamic PCC rules
for the AF signalling IP flows if none has been installed before.
NOTE 1: Well-known ports (e.g. 3GPP TS 24.229 [32] for SIP) or wildcard ports
can be used by PCF to derive the dynamic PCC for the AF signalling IP flows.
If the \"Individual Application Session Context\" resource is only used for
subscription to notification of AF signalling path status, the AF may cancel
the subscription to notifications of the status of the AF signalling
transmission path removing the resource as described in subclause 4.2.4.2.
NOTE 2: The \"Individual Application Session Context\" resource created for
the AF signalling can also be used when the AF requests notifications of
access type change, and/or when the AF provisions AF Signalling Flow
Information.
#### 4.2.6.8 Subscription to Service Data Flow QoS Monitoring Information
This procedure is used by AF to subscribe and/or modify the PCF subscription
for notification about packet delay between UPF and UE, when the
\"QoSMonitoring\" feature is supported.
The AF shall include in the HTTP PUT request message described in subclause
4.2.6.2 the \"EventsSubscReqData\" data type, that shall contain:
\- to create a subscription to QoS monitoring information:
a) shall include the \"events\" array with an array that contains a new entry
with the \"event\" attribute set to \"QOS_MONITORING\", and notification
related information as described in subclause 4.2.2.23;
b) when the \"notifMethod\" of the new entry is \"EVENT_DETECTION\", shall
include a \"qosMon\" attribute with the QoS monitoring information as
described in subclause 4.2.2.23;
c) shall include the new requested QoS monitoring parameter(s) to be measured
(i.e. DL, UL and/or round trip packet delay) within the \"reqQosMonParams\"
attribute; and
d) may include the notification correlation identifier assigned by the AF
within the \"notifCorreId\" attribute.
\- to remove a subscription to QoS monitoring information:
a) shall include the \"events\" array containing an array that shall omit the
corresponding entry with the \"event\" attribute value \"QOS_MONITORING\"; and
b) when the \"notifMethod\" of the removed entry is \"EVENT_DETECTION\", it
shall omit the \"qosMon\".
The AF shall include other events related information that shall remain
unchanged.
As result of this action, the PCF shall set the appropriate subscription to
QoS monitoring information for the corresponding active PCC rule(s) as
described in 3GPP TS 29.512 [8].
The PCF shall reply to the AF as described in subclause 4.2.6.2.
### 4.2.7 Npcf_PolicyAuthorization_Unsubscribe service operation
#### 4.2.7.1 General
The Npcf_PolicyAuthorization_Unsubscribe service operation enables NF service
consumers to remove subscription to all subscribed events for the existing
application session context. Subscription to events shall be removed:
\- by invoking the Npcf_PolicyAuthorization_Unsubscribe service operation for
the existing application session context, as described in subclause 4.2.7.2;
or
\- within the application session context modification procedure by invoking
the Npcf_PolicyAuthorization_Update service operation, as described in
subclause 4.2.3; or
\- within the application session context termination procedure by invoking
the Npcf_PolicyAuthorization_Delete service operation, as described in
subclause 4.2.4.
The following procedure using the Npcf_PolicyAuthorization_Unsubscribe service
operation is supported:
\- Unsubscription to events.
#### 4.2.7.2 Unsubscription to events
This procedure is used to unsubscribe to all subscribed events for the
existing AF application session context, as defined in 3GPP TS 23.501 [2],
3GPP TS 23.502 [3] and 3GPP TS 23.503 [4].
Figure 4.2.7.2-1 illustrates the unsubscription to events using the HTTP
DELETE method.
Figure 4.2.7.2-1: Removal of events subscription information using HTTP DELETE
When the AF decides to unsubscribe to all subscribed events for the existing
application session context, the AF shall invoke the
Npcf_PolicyAuthorization_Unsubscribe service operation by sending the HTTP
DELETE request message to the resource URI representing the \"Events
Subscription\" sub-resource in the PCF, as shown in figure 4.2.7.2-1, step 1.
Upon the reception of the HTTP DELETE request message from the AF, the PCF
shall decide whether the received HTTP request message is accepted.
If the HTTP DELETE request message from the AF is accepted, the PCF shall
delete \"Events Subscription\" sub-resource and shall send to the AF a HTTP
\"204 No Content\" response message. The PCF may delete the existing
subscription to event notifications for the related PDU session from the SMF
as described in 3GPP TS 29.512 [8].
If the HTTP DELETE request message from the AF is rejected, the PCF shall
indicate in the HTTP response message the cause for the rejection as specified
in subclause 5.7.
# 5 Npcf_PolicyAuthorization Service API
## 5.1 Introduction
The Npcf_PolicyAuthorization Service shall use the Npcf_PolicyAuthorization
API.
The API URI of the Npcf_PolicyAuthorization API shall be:
**{apiRoot}/\ /\/**
The request URIs used in each HTTP requests from the NF service consumer
towards the PCF shall have the Resource URI structure defined in subclause
4.4.1 of 3GPP TS 29.501 [6], i.e.:
> **{apiRoot}/\ /\/\**
with the following components:
\- The {apiRoot} shall be set as described in 3GPP TS 29.501 [6].
\- The \ shall be \"npcf-policyauthorization\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in subclause
5.3.
## 5.2 Usage of HTTP
### 5.2.1 General
HTTP/2, IETF RFC 7540 [9], shall be used as specified in subclause 5.2 of 3GPP
TS 29.500 [5].
HTTP/2 shall be transported as specified in subclause 5.3 of 3GPP TS 29.500
[5].
The OpenAPI [11] specification of HTTP messages and content bodies for the
Npcf_PolicyAuthorization service is contained in Annex A.
### 5.2.2 HTTP standard headers
#### 5.2.2.1 General
See subclause 5.2.2 of 3GPP TS 29.500 [5] for the usage of HTTP standard
headers.
#### 5.2.2.2 Content type
JSON, IETF RFC 8259 [10], shall be used as content type of the HTTP bodies
specified in the present specification, as specified in subclause 5.4 of 3GPP
TS 29.500 [5]. The use of the JSON format shall be signalled by the content
type \"application/json\".
JSON object used in the HTTP PATCH request shall be encoded according to
\"JSON Merge Patch\" and shall be signalled by the content type
\"application/merge-patch+json\", as defined in IETF RFC 7396 [21].
\"Problem Details\" JSON object shall be used to indicate additional details
of the error in a HTTP response body and shall be signalled by the content
type \"application/problem+json\", as defined in IETF RFC 7807 [24].
### 5.2.3 HTTP custom headers
The Npcf_PolicyAuthorization API shall support HTTP custom header fields
specified in subclause 5.2.3.2 of 3GPP TS 29.500 [5].
In this Release of the specification, no specific custom headers are defined
for the Npcf_PolicyAuthorization API.
## 5.3 Resources
### 5.3.1 Resource Structure
{width="6.688194444444444in" height="4.020138888888889in"}
Figure 5.3.1-1: Resource URI structure of the Npcf_PolicyAuthorization API
Table 5.3.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 5.3.1-1: Resources and methods overview
+----------------+----------------+----------------+----------------+ | Resource name | Resource URI | HTTP method or | Description | | | | custom | | | | | operation | | +----------------+----------------+----------------+----------------+ | Application | /app-sessions | POST | Npcf_ | | Sessions | | | PolicyAuthoriz | | | | | ation_Create. | | | | | Creates a new | | | | | Individual | | | | | Application | | | | | Session | | | | | Context | | | | | resource and | | | | | may create the | | | | | child Events | | | | | Subscription | | | | | sub-resource. | +----------------+----------------+----------------+----------------+ | | /ap | Pc | P-CSCF | | | p-sessions/pcs | scfRestoration | restoration. | | | cf-restoration | | It indicates | | | | (POST) | that P-CSCF | | | | | restoration | | | | | needs to be | | | | | performed. | +----------------+----------------+----------------+----------------+ | Individual | /app-sessions/ | PATCH | Npcf_ | | Application | {appSessionId} | | PolicyAuthoriz | | Session | | | ation_Update. | | Context | | | Updates an | | | | | existing | | | | | Individual | | | | | Application | | | | | Session | | | | | Context | | | | | resource. It | | | | | can also | | | | | update an | | | | | Events | | | | | Subscription | | | | | sub-resource. | +----------------+----------------+----------------+----------------+ | | | GET | Reads an | | | | | existing | | | | | Individual | | | | | Application | | | | | Session | | | | | Context | | | | | resource. | +----------------+----------------+----------------+----------------+ | | /app-se | delete | Npcf_ | | | ssions/{appSes | | PolicyAuthoriz | | | sionId}/delete | (POST) | ation_Delete. | | | | | Deletes an | | | | | existing | | | | | Individual | | | | | Application | | | | | Session | | | | | Context | | | | | resource and | | | | | the child | | | | | Events | | | | | Subscription | | | | | sub-resource. | +----------------+----------------+----------------+----------------+ | Events | / | PUT | Npcf_Pol | | Subscription | app-sessions/{ | | icyAuthorizati | | | appSessionId}\ | | on_Subscribe. | | | /event | | Creates a new | | | s-subscription | | Events | | | | | Subscription | | | | | sub-resource | | | | | or modifies an | | | | | existing | | | | | Events | | | | | Subscription | | | | | sub-resource. | +----------------+----------------+----------------+----------------+ | | | DELETE | Npcf_Polic | | | | | yAuthorization | | | | | _Unsubscribe. | | | | | | | | | | Deletes an | | | | | Events | | | | | Subscription | | | | | sub-resource. | +----------------+----------------+----------------+----------------+
### 5.3.2 Resource: Application Sessions (Collection)
#### 5.3.2.1 Description
The Application Sessions resource represents all application session contexts
that exist in the Npcf_PolicyAuthorization service at a given PCF instance.
#### 5.3.2.2 Resource definition
Resource URI: **{apiRoot}/npcf-policyauthorization/v1/app-sessions**
This resource shall support the resource URI variables defined in table
5.3.2.2-1.
Table 5.3.2.2-1: Resource URI variables for this resource
* * *
Name Data type Definition apiRoot string See subclause 5.1
* * *
#### 5.3.2.3 Resource Standard Methods
##### 5.3.2.3.1 POST
This method shall support the URI query parameters specified in table
5.3.2.3.1-1.
Table 5.3.2.3.1-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.3.2.3.1-2 and the response data structures and response codes specified in
table 5.3.2.3.1-3.
Table 5.3.2.3.1-2: Data structures supported by the POST Request Body on this
resource
* * *
Data type P Cardinality Description AppSessionContext M 1 Contains the
information for the creation of a new Individual Application Session Context
resource.
* * *
Table 5.3.2.3.1-3: Data structures supported by the POST Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | AppS | M | 1 | 201 Created | Successful | | essionContext | | | | case. | | | | | | | | | | | | The creation | | | | | | of an | | | | | | Individual | | | | | | Application | | | | | | Session | | | | | | Context | | | | | | resource is | | | | | | confirmed and | | | | | | a | | | | | | r | | | | | | epresentation | | | | | | of that | | | | | | resource is | | | | | | returned. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 303 See Other | The result of | | | | | | the HTTP POST | | | | | | request would | | | | | | be equivalent | | | | | | to the | | | | | | existing | | | | | | Application | | | | | | Session | | | | | | Context. The | | | | | | HTTP response | | | | | | shall contain | | | | | | a Location | | | | | | header field | | | | | | set to the | | | | | | URI of the | | | | | | existing | | | | | | individual | | | | | | Application | | | | | | Session | | | | | | Context | | | | | | resource. | +---------------+---+-------------+---------------+---------------+ | ExtendedP | O | 0..1 | 403 Forbidden | (NOTE 2) | | roblemDetails | | | | | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 500 Internal | (NOTE 2) | | roblemDetails | | | Server Error | | +---------------+---+-------------+---------------+---------------+ | NOTE 1: In | | | | | | addition, the | | | | | | HTTP status | | | | | | codes which | | | | | | are specified | | | | | | as mandatory | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [5] | | | | | | for the POST | | | | | | method shall | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Failure cases | | | | | | are described | | | | | | in | | | | | | s | | | | | | ubclause 5.7. | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.3.2.3.1-4: Headers supported by the 201 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 Contains the URI
of the newly created resource, according to the structure: {apiRoot}/npcf-
policyauthorization/v1/app-sessions/{appSessionId}
* * *
Table 5.3.2.3.1-5: Headers supported by the 303 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 Contains the URI
of the existing individual Application Session Context resource.
* * *
Table 5.3.2.3.1-6: Headers supported by the 403 Response Code on this resource
* * *
Name Data type P Cardinality Description Retry-After string or integer M 1
Indicates the time the AF has to wait before making a new request.
* * *
#### 5.3.2.4 Resource Custom Operations
##### 5.3.2.4.1 Overview
Table 5.3.2.4.1-1: Custom operations
* * *
Operation name Custom operation URI Mapped HTTP method Description
PcscfRestoration /app-sessions/pcscf-restoration POST The P-CSCF Restoration
custom operation invokes P-CSCF restoration. It does not create an Individual
Application Session Context resource.
* * *
##### 5.3.2.4.2 Operation: PcscfRestoration
###### 5.3.2.4.2.1 Description
###### 5.3.2.4.2.2 Operation Definition
This custom operation invokes P-CSCF restoration in the PCF and does not
create an Individual Application Session Context resource.
This operation shall support the request data structure specified in table
5.3.2.4.2.2-1 and the response data structure and response codes specified in
table 5.3.2.4.2.2-2.
Table 5.3.2.4.2.2-1: Data structures supported by the POST Request Body on
this resource
* * *
Data type P Cardinality Description PcscfRestorationRequestData O 0..1 P-CSCF
restoration data to be sent by the AF to request the P-CSCF restoration to the
PCF.
* * *
Table 5.3.2.4.2.2-2: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Successful | | | | | Content | case. | | | | | | | | | | | | The P-CSCF | | | | | | restoration | | | | | | has been | | | | | | successfully | | | | | | invoked. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during P-CSCF | | | | | | restoration. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | PCF (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during P-CSCF | | | | | | restoration. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | PCF (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 500 Internal | (NOTE 2) | | roblemDetails | | | Server Error | | +---------------+---+-------------+---------------+---------------+ | NOTE: In | | | | | | addition, the | | | | | | HTTP status | | | | | | codes which | | | | | | are specified | | | | | | as mandatory | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [5] | | | | | | for the POST | | | | | | method shall | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.3.2.4.2.2-3: Headers supported by the 307 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative PCF (service) instance. 3gpp-
Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected
* * *
Table 5.3.2.4.2.2-4: Headers supported by the 308 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative PCF (service) instance. 3gpp-
Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected
* * *
### 5.3.3 Resource: Individual Application Session Context (Document)
#### 5.3.3.1 Description
The Individual Application Session Context resource represents a single
application session context that exists in the Npcf_PolicyAuthorization
service.
#### 5.3.3.2 Resource definition
Resource URI: **{apiRoot}/npcf-policyauthorization/v1/app-
sessions/{appSessionId}**
This resource shall support the resource URI variables defined in table
5.3.2.2-1.
Table 5.3.3.2-1: Resource URI variables for this resource
* * *
Name Data type Definition apiRoot string See subclause 5.1 appSessionId string
Identifies an application session context formatted according to IETF RFC 3986
[19].
* * *
#### 5.3.3.3 Resource Standard Methods
##### 5.3.3.3.1 GET
This method shall support the URI query parameters specified in table
5.3.3.3.1-1.
Table 5.3.3.3.1-1: URI query parameters supported by the GET method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.3.3.3.1-2 and the response data structures and response codes specified in
table 5.3.3.3.1-3.
Table 5.3.3.3.1-2: Data structures supported by the GET Request Body on this
resource
* * *
Data type P Cardinality Description n/a
* * *
Table 5.3.3.3.1-3: Data structures supported by the GET Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | AppS | M | 1 | 200 OK | A | | essionContext | | | | r | | | | | | epresentation | | | | | | of an | | | | | | Individual | | | | | | Application | | | | | | Session | | | | | | Context | | | | | | resource is | | | | | | returned. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | Individual | | | | | | Application | | | | | | Session | | | | | | Context | | | | | | retrieval. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | PCF (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | Individual | | | | | | Application | | | | | | Session | | | | | | Context | | | | | | retrieval. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | PCF (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | (NOTE 2) | | roblemDetails | | | | | +---------------+---+-------------+---------------+---------------+ | NOTE 1: In | | | | | | addition, the | | | | | | HTTP status | | | | | | codes which | | | | | | are specified | | | | | | as mandatory | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [5] | | | | | | for the GET | | | | | | method shall | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Failure cases | | | | | | are described | | | | | | in | | | | | | s | | | | | | ubclause 5.7. | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.3.3.3.1-4: Headers supported by the 307 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative PCF (service) instance. 3gpp-
Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected
* * *
Table 5.3.3.3.1-5: Headers supported by the 308 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative PCF (service) instance. 3gpp-
Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected
* * *
##### 5.3.3.3.2 PATCH
This method shall support the URI query parameters specified in table
5.3.3.3.2-1.
Table 5.3.3.3.2-1: URI query parameters supported by the PATCH method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.3.3.3.2-2 and the response data structures and response codes specified in
table 5.3.3.3.2-3.
Table 5.3.3.3.2-2: Data structures supported by the PATCH Request Body on this
resource
* * *
Data type P Cardinality Description AppSessionContextUpdateDataPatch M 1
Contains the modification(s) to apply to the Individual Application Session
Context resource.
* * *
Table 5.3.3.3.2-3: Data structures supported by the PATCH Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | AppS | M | 1 | 200 OK | Successful | | essionContext | | | | case. | | | | | | | | | | | | The | | | | | | Individual | | | | | | Application | | | | | | Session | | | | | | Context | | | | | | resource was | | | | | | modified and | | | | | | a | | | | | | r | | | | | | epresentation | | | | | | of that | | | | | | resource is | | | | | | returned. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Successful | | | | | Content | case. | | | | | | | | | | | | The | | | | | | Individual | | | | | | Application | | | | | | session | | | | | | context | | | | | | resource was | | | | | | modified. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | Individual | | | | | | Application | | | | | | Session | | | | | | Context | | | | | | modification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | PCF (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | Individual | | | | | | Application | | | | | | Session | | | | | | Context | | | | | | modification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | PCF (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | ExtendedP | O | 0..1 | 403 Forbidden | (NOTE 2) | | roblemDetails | | | | | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | (NOTE 2) | | roblemDetails | | | | | +---------------+---+-------------+---------------+---------------+ | NOTE 1: In | | | | | | addition, the | | | | | | HTTP status | | | | | | codes which | | | | | | are specified | | | | | | as mandatory | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [5] | | | | | | for the PATCH | | | | | | method shall | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Failure cases | | | | | | are described | | | | | | in | | | | | | s | | | | | | ubclause 5.7. | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.3.3.3.2-4: Headers supported by the 403 Response Code on this resource
* * *
Name Data type P Cardinality Description Retry-After string or integer M 1
Indicates the time the AF has to wait before making a new request.
* * *
Table 5.3.3.3.2-5: Headers supported by the 307 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative PCF (service) instance. 3gpp-
Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected
* * *
Table 5.3.3.3.2-6: Headers supported by the 308 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative PCF (service) instance. 3gpp-
Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected
* * *
#### 5.3.3.4 Resource Custom Operations
##### 5.3.3.4.1 Overview
Table 5.3.3.4.1-1: Custom operations
* * *
Operation name Custom operation URI Mapped HTTP method Description delete
/app-sessions/{appSessionId}/delete POST Npcf_PolicyAuthorization_Delete.
Deletes an existing Individual Application Session Context resource and the
child Events Subscription sub-resource.
* * *
##### 5.3.3.4.2 Operation: delete
###### 5.3.3.4.2.1 Description
###### 5.3.3.4.2.2 Operation Definition
This custom operation deletes an existing Individual Application Session
Context resource and the child Events Subscription sub-resource in the PCF.
This operation shall support the request data structures specified in table
5.3.3.4.2.2-1 and the response data structure and response codes specified in
table 5.3.3.4.2.2-2.
Table 5.3.3.4.2.2-1: Data structures supported by the POST Request Body on
this resource
* * *
Data type P Cardinality Description EventsSubscReqData O 0..1 Events
subscription information to be sent by the AF to request event notification
when the Individual Application Session Context resource is deleted.
* * *
Table 5.3.3.4.2.2-2: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Successful | | | | | Content | case. | | | | | | | | | | | | The | | | | | | Individual | | | | | | Application | | | | | | session | | | | | | context | | | | | | resource was | | | | | | deleted. | +---------------+---+-------------+---------------+---------------+ | AppS | M | 1 | 200 OK | Successful | | essionContext | | | | case. | | | | | | | | | | | | The | | | | | | Individual | | | | | | Application | | | | | | Session | | | | | | Context | | | | | | resource was | | | | | | deleted and a | | | | | | partial | | | | | | r | | | | | | epresentation | | | | | | of that | | | | | | resource | | | | | | containing | | | | | | event | | | | | | notification | | | | | | information | | | | | | is returned. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | Individual | | | | | | Application | | | | | | Session | | | | | | Context | | | | | | termination. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | PCF (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | Individual | | | | | | Application | | | | | | Session | | | | | | Context | | | | | | termination. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | PCF (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | (NOTE 2) | | roblemDetails | | | | | +---------------+---+-------------+---------------+---------------+ | NOTE 1: In | | | | | | addition, the | | | | | | HTTP status | | | | | | codes which | | | | | | are specified | | | | | | as mandatory | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [5] | | | | | | for the POST | | | | | | method shall | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Failure cases | | | | | | are described | | | | | | in | | | | | | s | | | | | | ubclause 5.7. | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.3.3.4.2.2-3: Headers supported by the 307 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative PCF (service) instance. 3gpp-
Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected
* * *
Table 5.3.3.4.2.2-4: Headers supported by the 308 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative PCF (service) instance. 3gpp-
Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected
* * *
### 5.3.4 Resource: Events Subscription (Document)
#### 5.3.4.1 Description
The Events Subscription sub-resource represents a subscription to events for
an application session context that exists in the Npcf_PolicyAuthorization
service.
#### 5.3.4.2 Resource definition
Resource URI: **{apiRoot}/npcf-policyauthorization/v1/app-
sessions/{appSessionId}/events-subscription**
This resource shall support the resource URI variables defined in table
5.3.4.2-1.
Table 5.3.4.2-1: Resource URI variables for this resource
* * *
Name Data type Definition apiRoot string See subclause 5.1 appSessionId string
Identifies an application session context formatted according to IETF RFC 3986
[19].
* * *
#### 5.3.4.3 Resource Standard Methods
##### 5.3.4.3.1 PUT
This method shall support the URI query parameters specified in table
5.3.4.3.1-1.
Table 5.3.4.3.1-1: URI query parameters supported by the PUT method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.3.4.3.1-2 and the response data structures and response codes specified in
table 5.3.4.3.1-3.
Table 5.3.4.3.1-2: Data structures supported by the PUT Request Body on this
resource
* * *
Data type P Cardinality Description EventsSubscReqData M 1 Contains
information for the modification of the Events Subscription sub-resource.
* * *
Table 5.3.4.3.1-3: Data structures supported by the PUT Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | Event | M | 1 | 201 Created | Successful | | sSubscPutData | | | | case. | | | | | | | | | | | | The Events | | | | | | Subscription | | | | | | sub-resource | | | | | | was created. | | | | | | The | | | | | | properties of | | | | | | the | | | | | | Event | | | | | | sSubscReqData | | | | | | data type | | | | | | shall be | | | | | | included. The | | | | | | properties of | | | | | | the | | | | | | Event | | | | | | sNotification | | | | | | data type | | | | | | shall be | | | | | | included when | | | | | | the | | | | | | notification | | | | | | for one or | | | | | | more created | | | | | | events is | | | | | | already | | | | | | available in | | | | | | the PCF. | +---------------+---+-------------+---------------+---------------+ | Event | M | 1 | 200 OK | Successful | | sSubscPutData | | | | case. | | | | | | | | | | | | The Events | | | | | | Subscription | | | | | | sub-resource | | | | | | was modified | | | | | | and a | | | | | | r | | | | | | epresentation | | | | | | of that | | | | | | sub-resource | | | | | | is returned. | | | | | | The | | | | | | properties of | | | | | | the | | | | | | Event | | | | | | sSubscReqData | | | | | | data type | | | | | | shall be | | | | | | included. The | | | | | | properties of | | | | | | the | | | | | | Event | | | | | | sNotification | | | | | | data type | | | | | | shall be | | | | | | included when | | | | | | the | | | | | | notification | | | | | | for one or | | | | | | more updated | | | | | | events is | | | | | | already | | | | | | available in | | | | | | the PCF. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Successful | | | | | Content | case. | | | | | | | | | | | | The Events | | | | | | Subscription | | | | | | sub-resource | | | | | | was modified. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during Events | | | | | | Subscription | | | | | | modification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | PCF (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during Events | | | | | | Subscription | | | | | | modification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | PCF (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 403 Forbidden | (NOTE 2) | | roblemDetails | | | | | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | (NOTE 2) | | roblemDetails | | | | | +---------------+---+-------------+---------------+---------------+ | NOTE 1: In | | | | | | addition, the | | | | | | HTTP status | | | | | | codes which | | | | | | are specified | | | | | | as mandatory | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [5] | | | | | | for the PUT | | | | | | method shall | | | | | | also apply. | | | | | | | | | | | | NOTE 2: | | | | | | Failure cases | | | | | | are described | | | | | | in | | | | | | s | | | | | | ubclause 5.7. | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.3.4.3.1-4: Headers supported by the 201 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 Contains the URI
of the newly created resource, according to the structure: {apiRoot}/npcf-
policyauthorization/v1/app-sessions/{appSessionId}/events-subscription
* * *
Table 5.3.4.3.1-5: Headers supported by the 307 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative PCF (service) instance. 3gpp-
Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected
* * *
Table 5.3.4.3.1-6: Headers supported by the 308 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative PCF (service) instance. 3gpp-
Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected
* * *
##### 5.3.4.3.2 DELETE
This method shall support the URI query parameters specified in table
5.3.4.3.2-1.
Table 5.3.4.3.2-1: URI query parameters supported by the DELETE method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.3.4.3.2-2 and the response data structures and response codes specified in
table 5.3.4.3.2-3.
Table 5.3.4.3.2-2: Data structures supported by the DELETE Request Body on
this resource
* * *
Data type P Cardinality Description n/a
* * *
Table 5.3.4.3.2-3: Data structures supported by the DELETE Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Successful | | | | | Content | case. | | | | | | | | | | | | The Events | | | | | | Subscription | | | | | | sub-resource | | | | | | was deleted. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during Events | | | | | | Subscription | | | | | | termination. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | PCF (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during Events | | | | | | Subscription | | | | | | termination. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | PCF (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | (NOTE 2) | | roblemDetails | | | | | +---------------+---+-------------+---------------+---------------+ | NOTE 1: In | | | | | | addition, the | | | | | | HTTP status | | | | | | codes which | | | | | | are specified | | | | | | as mandatory | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [5] | | | | | | for the | | | | | | DELETE method | | | | | | shall also | | | | | | apply. | | | | | | | | | | | | NOTE 2: | | | | | | Failure cases | | | | | | are described | | | | | | in | | | | | | s | | | | | | ubclause 5.7. | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.3.4.3.2-4: Headers supported by the 307 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative PCF (service) instance. 3gpp-
Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected.
* * *
Table 5.3.4.3.2-5: Headers supported by the 308 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative PCF (service) instance. 3gpp-
Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected.
* * *
#### 5.3.3.4 Resource Custom Operations
None.
## 5.4 Custom Operations without associated resources
No custom operation is defined in this Release of the specification.
## 5.5 Notifications
### 5.5.1 General
Notifications shall comply to subclause 6.2 of 3GPP TS 29.500 [5] and
subclause 4.6.2.3 of 3GPP TS 29.501 [6].
Table 5.5.1-1: Notifications overview
* * *
Notification Callback URI HTTP method or custom operation Description (service
operation) Event Notification {notifUri}/notify notify (POST) PCF event
notification. Termination Request {notifUri}/terminate terminate (POST)
Request for termination of an Individual Application Session Context.
Notification about new 5GS Bridge {notifUri}/new-bridge new-bridge (POST)
Notification about new 5GS Bridge
* * *
### 5.5.2 Event Notification
#### 5.5.2.1 Description
The Event Notification is used by the PCF to report one or several observed
application session context events to the NF service consumer that has
subscribed to such notifications via the Events Subscription sub-resource.
#### 5.5.2.2 Target URI
The Callback URI **\"{notifUri}/notify\"** shall be used with the callback URI
variables defined in table 5.5.2.2-1.
Table 5.5.2.2-1: Callback URI variables
* * *
Name Data type Definition notifUri Uri The Notification Uri as assigned within
the Events Subscription sub-resource and described within the
EventsSubscReqData type (see table 5.6.2.6-1).
* * *
#### 5.5.2.3 Standard Methods
##### 5.5.2.3.1 POST
This method shall support the URI query parameters specified in table
5.5.2.3.1-1.
Table 5.5.2.3.1-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.5.2.3.1-2 and the response data structures and response codes specified in
table 5.5.2.3.1-3.
Table 5.5.2.3.1-2: Data structures supported by the POST Request Body on this
resource
* * *
Data type P Cardinality Description EventsNotification M 1 Provides
Information about observed events.
* * *
Table 5.5.2.3.1-3: Data structures supported by the POST Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | The receipt | | | | | Content | of the | | | | | | Notification | | | | | | is | | | | | | acknowledged. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during event | | | | | | notification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative | | | | | | NF consumer | | | | | | (service) | | | | | | instance | | | | | | where the | | | | | | notification | | | | | | should be | | | | | | sent. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | subscription | | | | | | modification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative | | | | | | NF consumer | | | | | | (service) | | | | | | instance | | | | | | where the | | | | | | notification | | | | | | should be | | | | | | sent. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | NOTE: In | | | | | | addition, the | | | | | | HTTP status | | | | | | codes which | | | | | | are specified | | | | | | as mandatory | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [5] | | | | | | for the POST | | | | | | method shall | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.5.2.3.1-4: Headers supported by the 307 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI representing the end point of an alternative NF consumer (service)
instance towards which the notification should be redirected. 3gpp-Sbi-Target-
Nf-Id string O 0..1 Identifier of the target NF (service) instance towards
which the notification request is redirected
* * *
Table 5.5.2.3.1-5: Headers supported by the 308 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI representing the end point of an alternative NF consumer (service)
instance towards which the notification should be redirected. 3gpp-Sbi-Target-
Nf-Id string O 0..1 Identifier of the target NF (service) instance towards
which the notification request is redirected
* * *
### 5.5.3 Termination Request
#### 5.5.3.1 Description
The Termination Request is used by the PCF to request the NF service consumer
the deletion of the Individual Application Session Context resource.
#### 5.5.3.2 Target URI
The Callback URI **\"{notifUri}/terminate\"** shall be used with the callback
URI variables defined in table 5.5.3.2-1.
Table 5.5.3.2-1: Callback URI variables
* * *
Name Data type Definition notifUri Uri The Notification Uri as assigned within
the Individual Application Session Context resource and described within the
AppSessionContextReqData Data type (see table 5.6.2.3-1).
* * *
#### 5.5.3.3 Standard Methods
##### 5.5.3.3.1 POST
This method shall support the URI query parameters specified in table
5.5.3.3.1-1.
Table 5.5.3.3.1-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.5.3.3.1-2 and the response data structures and response codes specified in
table 5.5.3.3.1-3.
Table 5.5.3.3.1-2: Data structures supported by the POST Request Body on this
resource
* * *
Data type P Cardinality Description TerminationInfo M 1 Provides information
about the deletion of the resource.
* * *
Table 5.5.3.3.1-3: Data structures supported by the POST Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | The receipt | | | | | Content | of the | | | | | | Notification | | | | | | is | | | | | | acknowledged. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during event | | | | | | notification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative | | | | | | NF consumer | | | | | | (service) | | | | | | instance | | | | | | where the | | | | | | notification | | | | | | should be | | | | | | sent. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during event | | | | | | notification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative | | | | | | NF consumer | | | | | | (service) | | | | | | instance | | | | | | where the | | | | | | notification | | | | | | should be | | | | | | sent. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | NOTE: In | | | | | | addition, the | | | | | | HTTP status | | | | | | codes which | | | | | | are specified | | | | | | as mandatory | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [5] | | | | | | for the POST | | | | | | method shall | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.5.3.3.1-4: Headers supported by the 307 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI representing the end point of an alternative NF consumer (service)
instance towards which the notification should be redirected. 3gpp-Sbi-Target-
Nf-Id string O 0..1 Identifier of the target NF (service) instance towards
which the notification request is redirected
* * *
Table 5.5.3.3.1-5: Headers supported by the 308 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI representing the end point of an alternative NF consumer (service)
instance towards which the notification should be redirected. 3gpp-Sbi-Target-
Nf-Id string O 0..1 Identifier of the target NF (service) instance towards
which the notification request is redirected
* * *
### 5.5.4 Detected 5GS Bridge for a PDU session
#### 5.5.4.1 Description
The Detected 5GS Bridge for a PDU session operation is used by the PCF to
notifiy the NF service consumer about the detection of 5GS Bridge information
in the context of a PDU session and to trigger in the TSN AF the creation of a
new Individual Application Session Context to associate it with the detected
5GS Bridge for the PDU session.
The PCF shall use the locally configured notification URI of the TSN AF as
request URI of the notification request. The \"callback\" definition in the
OpenAPI specification is associated to the \"ApplicationSessions\" resource.
#### 5.5.4.2 Target URI
The Callback URI **\"{notifUri}/new-bridge\"** shall be used with the callback
URI variables defined in table 5.5.4.2-1.
Table 5.5.4.2-1: Callback URI variables
* * *
Name Data type Definition notifUri Uri It is locally configured in the PCF.
* * *
#### 5.5.4.3 Standard Methods
##### 5.5.4.3.1 POST
This method shall support the URI query parameters specified in table
5.5.4.3.1-1.
Table 5.5.4.3.1-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.5.4.3.1-2 and the response data structures and response codes specified in
table 5.5.4.3.1-3.
Table 5.5.4.3.1-2: Data structures supported by the POST Request Body on this
resource
* * *
Data type P Cardinality Description PduSessionTsnBridge M 1 Provides
information about the deletion of the resource.
* * *
Table 5.5.4.3.1-3: Data structures supported by the POST Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | The receipt | | | | | Content | of the | | | | | | Notification | | | | | | is | | | | | | acknowledged. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during PDU | | | | | | session TSN | | | | | | Bridge | | | | | | notification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative | | | | | | NF consumer | | | | | | (service) | | | | | | instance | | | | | | where the | | | | | | notification | | | | | | should be | | | | | | sent. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during PDU | | | | | | session TSN | | | | | | Bridge | | | | | | notification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative | | | | | | NF consumer | | | | | | (service) | | | | | | instance | | | | | | where the | | | | | | notification | | | | | | should be | | | | | | sent. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | NOTE: In | | | | | | addition, the | | | | | | HTTP status | | | | | | codes which | | | | | | are specified | | | | | | as mandatory | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [5] | | | | | | for the POST | | | | | | method shall | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.5.4.3.1-4: Headers supported by the 307 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI representing the end point of an alternative NF consumer (service)
instance towards which the notification should be redirected. 3gpp-Sbi-Target-
Nf-Id string O 0..1 Identifier of the target NF (service) instance towards
which the notification request is redirected
* * *
Table 5.5.4.3.1-5: Headers supported by the 308 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI representing the end point of an alternative NF consumer (service)
instance towards which the notification should be redirected. 3gpp-Sbi-Target-
Nf-Id string O 0..1 Identifier of the target NF (service) instance towards
which the notification request is redirected
* * *
## 5.6 Data Model
### 5.6.1 General
This subclause specifies the application data model supported by the API.
Table 5.6.1-1 specifies the data types defined for the
Npcf_PolicyAuthorization service based interface protocol.
Table 5.6.1-1: Npcf_PolicyAuthorization specific Data Types
+----------------+----------------+----------------+----------------+ | Data type | Section | Description | Applicability | | | defined | | | +----------------+----------------+----------------+----------------+ | Accepta | 5.6.2.30 | Acceptable | | | bleServiceInfo | | maximum | | | | | requested | | | | | bandwidth. | | +----------------+----------------+----------------+----------------+ | AccessNetChar | 5.6.2.32 | Contains the | IMS_SBI | | gingIdentifier | | access network | | | | | charging | | | | | identifier. | | +----------------+----------------+----------------+----------------+ | AfAppId | 5.6.3.2 | Contains an AF | | | | | application | | | | | identifier. | | +----------------+----------------+----------------+----------------+ | AfEvent | 5.6.3.7 | Represents an | | | | | event to | | | | | notify to the | | | | | AF. | | +----------------+----------------+----------------+----------------+ | AfEve | 5.6.2.11 | Represents the | | | ntNotification | | notification | | | | | of an event. | | +----------------+----------------+----------------+----------------+ | AfEve | 5.6.2.10 | Represents the | | | ntSubscription | | subscription | | | | | to events. | | +----------------+----------------+----------------+----------------+ | AfNotifMethod | 5.6.3.8 | Represents the | | | | | notification | | | | | methods that | | | | | can be | | | | | subscribed for | | | | | an event. | | +----------------+----------------+----------------+----------------+ | A | 5.6.3.18 | Represents the | IMS_SBI | | fRequestedData | | information | | | | | the AF | | | | | requested to | | | | | be exposed. | | +----------------+----------------+----------------+----------------+ | AfRout | 5.6.2.13 | Describes the | InfluenceOn | | ingRequirement | | routing | TrafficRouting | | | | requirements | | | | | for the | | | | | application | | | | | traffic flows. | | +----------------+----------------+----------------+----------------+ | AfRoutin | 5.6.2.24 | This data type | InfluenceOn | | gRequirementRm | | is defined in | TrafficRouting | | | | the same way | | | | | as the | | | | | \"AfRoutin | | | | | gRequirement\" | | | | | data type, but | | | | | with the | | | | | OpenAPI | | | | | \"nullable: | | | | | true\" | | | | | property. | | +----------------+----------------+----------------+----------------+ | AnGwAddress | 5.6.2.20 | Carries the | | | | | control plane | | | | | address of the | | | | | access network | | | | | gateway. | | +----------------+----------------+----------------+----------------+ | App | 5.6.2.2 | Represents an | | | SessionContext | | Individual | | | | | Application | | | | | Session | | | | | Context | | | | | resource. | | +----------------+----------------+----------------+----------------+ | AppSession | 5.6.2.3 | Represents the | | | ContextReqData | | Individual | | | | | Application | | | | | Session | | | | | Context | | | | | resource data | | | | | received in an | | | | | HTTP POST | | | | | request | | | | | message. | | +----------------+----------------+----------------+----------------+ | AppSessionC | 5.6.2.4 | Represents the | | | ontextRespData | | Individual | | | | | Application | | | | | Session | | | | | Context | | | | | resource data | | | | | produced by | | | | | the server and | | | | | returned in an | | | | | HTTP response | | | | | message. | | +----------------+----------------+----------------+----------------+ | AppSessionCon | 5.6.2.5 | Describes the | | | textUpdateData | | modifications | | | | | to the | | | | | \"ascReqData\" | | | | | property of an | | | | | Individual | | | | | Application | | | | | Session | | | | | Context | | | | | resource. | | +----------------+----------------+----------------+----------------+ | AppS | 5.6.2.43 | Describes the | P | | essionContextU | | modifications | atchCorrection | | pdateDataPatch | | to an | | | | | Individual | | | | | Application | | | | | Session | | | | | Context | | | | | resource | | +----------------+----------------+----------------+----------------+ | AspId | 5.6.3.2 | Contains an | Sponsor | | | | identity of an | edConnectivity | | | | application | | | | | service | | | | | provider. | | +----------------+----------------+----------------+----------------+ | CodecData | 5.6.3.2 | Contains a | | | | | codec related | | | | | information. | | +----------------+----------------+----------------+----------------+ | ContentVersion | 5.6.3.2 | Represents the | MediaCompo | | | | version of a | nentVersioning | | | | media | | | | | component. | | +----------------+----------------+----------------+----------------+ | EthF | 5.6.2.17 | Defines a | | | lowDescription | | packet filter | | | | | for an | | | | | Ethernet flow. | | +----------------+----------------+----------------+----------------+ | Even | 5.6.2.9 | Describes the | | | tsNotification | | notification | | | | | about the | | | | | events | | | | | occurred | | | | | within an | | | | | Individual | | | | | Application | | | | | Session | | | | | Context | | | | | resource. | | +----------------+----------------+----------------+----------------+ | Even | 5.6.2.42 | Identifies the | | | tsSubscPutData | | events the | | | | | application | | | | | subscribes to | | | | | within an | | | | | Events | | | | | Subscription | | | | | sub-resource | | | | | data. It may | | | | | also include | | | | | the attributes | | | | | of the | | | | | notification | | | | | about the | | | | | events already | | | | | met at the | | | | | time of | | | | | subscription. | | | | | | | | | | It is | | | | | represented as | | | | | a | | | | | non-exclusive | | | | | list of two | | | | | data types: | | | | | Even | | | | | tsSubscReqData | | | | | and | | | | | Event | | | | | sNotification. | | +----------------+----------------+----------------+----------------+ | Even | 5.6.2.6 | Identifies the | | | tsSubscReqData | | events the | | | | | application | | | | | subscribes to | | | | | within an | | | | | Individual | | | | | Application | | | | | Session | | | | | Context | | | | | resource. | | +----------------+----------------+----------------+----------------+ | Events | 5.6.2.25 | This data type | | | SubscReqDataRm | | is defined in | | | | | the same way | | | | | as the | | | | | \"Events | | | | | SubscReqData\" | | | | | data type, but | | | | | with the | | | | | OpenAPI | | | | | \"nullable: | | | | | true\" | | | | | property. | | +----------------+----------------+----------------+----------------+ | Extended | 5.6.2.29 | Data type that | | | ProblemDetails | | extends | | | | | P | | | | | roblemDetails. | | +----------------+----------------+----------------+----------------+ | F | 5.6.3.2 | Defines a | | | lowDescription | | packet filter | | | | | for an IP | | | | | flow. | | +----------------+----------------+----------------+----------------+ | Flows | 5.6.2.21 | Identifies the | | | | | flows related | | | | | to a media | | | | | component. | | +----------------+----------------+----------------+----------------+ | FlowStatus | 5.6.3.12 | Describes | | | | | whether the IP | | | | | flow(s) are | | | | | enabled or | | | | | disabled. | | +----------------+----------------+----------------+----------------+ | FlowUsage | 5.6.3.14 | Describes the | | | | | flow usage of | | | | | the flows | | | | | described by a | | | | | media | | | | | subcomponent. | | +----------------+----------------+----------------+----------------+ | MediaComponent | 5.6.2.7 | Contains | | | | | service | | | | | information | | | | | for a media | | | | | component of | | | | | an AF session. | | +----------------+----------------+----------------+----------------+ | Me | 5.6.2.26 | This data type | | | diaComponentRm | | is defined in | | | | | the same way | | | | | as the | | | | | \"Me | | | | | diaComponent\" | | | | | data type, but | | | | | with the | | | | | OpenAPI | | | | | \"nullable: | | | | | true\" | | | | | property. | | +----------------+----------------+----------------+----------------+ | M | 5.6.3.13 | Indicates | | | ediaComponentR | | whether the | | | esourcesStatus | | media | | | | | component is | | | | | active or | | | | | inactive. | | +----------------+----------------+----------------+----------------+ | Med | 5.6.2.8 | Contains the | | | iaSubComponent | | requested | | | | | bitrate and | | | | | filters for | | | | | the set of IP | | | | | flows | | | | | identified by | | | | | their common | | | | | flow | | | | | identifier. | | +----------------+----------------+----------------+----------------+ | Media | 5.6.2.27 | This data type | | | SubComponentRm | | is defined in | | | | | the same way | | | | | as the | | | | | \"Media | | | | | SubComponent\" | | | | | data type, but | | | | | with the | | | | | OpenAPI | | | | | \"nullable: | | | | | true\" | | | | | property. | | +----------------+----------------+----------------+----------------+ | MediaType | 5.6.3.3 | Indicates the | | | | | media type of | | | | | a media | | | | | component. | | +----------------+----------------+----------------+----------------+ | OutOfCre | 5.6.2.33 | Indicates the | IMS_SBI | | ditInformation | | service data | | | | | flows without | | | | | available | | | | | credit and the | | | | | corresponding | | | | | termination | | | | | action. | | +----------------+----------------+----------------+----------------+ | PcscfRestorat | 5.6.2.36 | Indicates | P | | ionRequestData | | P-CSCF | CSCF-Restorati | | | | restoration. | on-Enhancement | +----------------+----------------+----------------+----------------+ | PduSe | 5.6.2.40 | Contains the | TimeSensi | | ssionTsnBridge | | Bridge | tiveNetworking | | | | Information | | | | | and DS-TT port | | | | | and/or NW-TT | | | | | ports | | | | | management | | | | | information of | | | | | a new detected | | | | | 5GS Bridge in | | | | | the context of | | | | | a new PDU | | | | | session. | | +----------------+----------------+----------------+----------------+ | PreemptionCont | 5.6.3.19 | Pre-emption | MC | | rolInformation | | control | PTT-Preemption | | | | information. | | +----------------+----------------+----------------+----------------+ | Pr | 5.6.3.21 | This data type | MC | | eemptionContro | | is defined in | PTT-Preemption | | lInformationRm | | the same way | | | | | as the | | | | | \"Pr | | | | | eemptionContro | | | | | lInformation\" | | | | | data type, but | | | | | with the | | | | | OpenAPI | | | | | \"nullable: | | | | | true\" | | | | | property. | | +----------------+----------------+----------------+----------------+ | PrioritySh | 5.6.3.20 | Priority | P | | aringIndicator | | sharing | rioritySharing | | | | indicator. | | +----------------+----------------+----------------+----------------+ | QosMonitor | 5.6.2.34 | QoS monitoring | QoSMonitoring | | ingInformation | | for UL, DL or | | | | | round trip | | | | | delay. | | +----------------+----------------+----------------+----------------+ | QosMonitorin | 5.6.2.41 | This data type | QoSMonitoring | | gInformationRm | | is defined in | | | | | the same way | | | | | as the | | | | | \"QosMonitorin | | | | | gInformation\" | | | | | data type, but | | | | | with the | | | | | OpenAPI | | | | | \"nullable: | | | | | true\" | | | | | property. | | +----------------+----------------+----------------+----------------+ | QosMo | 5.6.2.37 | Contains QoS | QoSMonitoring | | nitoringReport | | monitoring | | | | | reporting | | | | | information. | | +----------------+----------------+----------------+----------------+ | QosNotificat | 5.6.2.15 | Indicates | | | ionControlInfo | | whether the | | | | | QoS targets | | | | | related to | | | | | certain media | | | | | component are | | | | | not guaranteed | | | | | or are | | | | | guaranteed | | | | | again. | | +----------------+----------------+----------------+----------------+ | QosNotifType | 5.6.3.9 | Indicates type | | | | | of | | | | | notification | | | | | for QoS | | | | | Notification | | | | | Control. | | +----------------+----------------+----------------+----------------+ | Requ | 5.6.3.15 | Indicates the | NetLoc | | iredAccessInfo | | access network | | | | | information | | | | | required for | | | | | an AF session. | | +----------------+----------------+----------------+----------------+ | ReservPriority | 5.6.3.4 | Indicates the | | | | | reservation | | | | | priority. | | +----------------+----------------+----------------+----------------+ | Resources | 5.6.2.14 | Indicates the | | | AllocationInfo | | status of the | | | | | PCC rule(s) | | | | | related to | | | | | certain media | | | | | component. | | +----------------+----------------+----------------+----------------+ | ServAuthInfo | 5.6.3.5 | Indicates the | | | | | result of the | | | | | Policy | | | | | Authorization | | | | | service | | | | | request from | | | | | the AF. | | +----------------+----------------+----------------+----------------+ | Ser | 5.6.3.16 | Preliminary or | IMS_SBI | | viceInfoStatus | | final service | | | | | information | | | | | status. | | +----------------+----------------+----------------+----------------+ | ServiceUrn | 5.6.3.2 | Service URN. | IMS_SBI | +----------------+----------------+----------------+----------------+ | SipFor | 5.6.3.17 | Describes if | IMS_SBI | | kingIndication | | several SIP | | | | | dialogues are | | | | | related to an | | | | | \"Individual | | | | | Application | | | | | Session | | | | | Context\" | | | | | resource. | | +----------------+----------------+----------------+----------------+ | S | 5.6.2.16 | Describes the | InfluenceOn | | patialValidity | | spatial | TrafficRouting | | | | validity of an | | | | | AF request for | | | | | influencing | | | | | traffic | | | | | routing. | | +----------------+----------------+----------------+----------------+ | Spa | 5.6.2.28 | This data type | InfluenceOn | | tialValidityRm | | is defined in | TrafficRouting | | | | the same way | | | | | as the | | | | | \"Spa | | | | | tialValidity\" | | | | | data type, but | | | | | with the | | | | | OpenAPI | | | | | \"nullable: | | | | | true\" | | | | | property. | | +----------------+----------------+----------------+----------------+ | SponId | 5.6.3.2 | Contains an | Sponsor | | | | Identity of a | edConnectivity | | | | sponsor. | | +----------------+----------------+----------------+----------------+ | Sp | 5.6.3.6 | Represents | Sponsor | | onsoringStatus | | whether | edConnectivity | | | | sponsored data | | | | | connectivity | | | | | is enabled or | | | | | disabled/not | | | | | enabled. | | +----------------+----------------+----------------+----------------+ | Te | 5.6.2.22 | Indicates the | InfluenceOn | | mporalValidity | | time interval | TrafficRouting | | | | during which | | | | | the AF request | | | | | is to be | | | | | applied. | | +----------------+----------------+----------------+----------------+ | Te | 5.6.3.10 | Indicates the | | | rminationCause | | cause for | | | | | requesting the | | | | | deletion of | | | | | the Individual | | | | | Application | | | | | Session | | | | | Context | | | | | resource. | | +----------------+----------------+----------------+----------------+ | T | 5.6.2.12 | Includes | | | erminationInfo | | information | | | | | related to the | | | | | termination of | | | | | the Individual | | | | | Application | | | | | Session | | | | | Context | | | | | resource. | | +----------------+----------------+----------------+----------------+ | T | 5.6.3.2 | Contains the | | | osTrafficClass | | IPv4 | | | | | T | | | | | ype-of-Service | | | | | or the IPv6 | | | | | Traffic-Class | | | | | field and the | | | | | ToS/Traffic | | | | | Class mask | | | | | field. | | +----------------+----------------+----------------+----------------+ | Tos | 5.6.3.2 | This data type | | | TrafficClassRm | | is defined in | | | | | the same way | | | | | as the | | | | | \"Tos | | | | | TrafficClass\" | | | | | data type, but | | | | | with the | | | | | OpenAPI | | | | | \"nullable: | | | | | true\" | | | | | property. | | +----------------+----------------+----------------+----------------+ | Ts | 5.6.3.2 | Priority of | TimeSensi | | cPriorityLevel | | TSC Flows | tiveNetworking | +----------------+----------------+----------------+----------------+ | TscP | 5.6.3.2 | This data type | TimeSensi | | riorityLevelRm | | is defined in | tiveNetworking | | | | the same way | | | | | as the | | | | | \"TscP | | | | | riorityLevel\" | | | | | data type, but | | | | | with the | | | | | OpenAPI | | | | | \"nullable: | | | | | true\" | | | | | property | | +----------------+----------------+----------------+----------------+ | Tscai | 5.6.2.39 | TSCAI Input | TimeSensi | | InputContainer | | information | tiveNetworking | | | | container. | | +----------------+----------------+----------------+----------------+ | T | 5.6.2.35 | TSC traffic | TimeSensi | | snQosContainer | | QoS | tiveNetworking | | | | parameters. | | +----------------+----------------+----------------+----------------+ | Tsn | 5.6.2.38 | This data type | TimeSensi | | QosContainerRm | | is defined in | tiveNetworking | | | | the same way | | | | | as the | | | | | \"Tsn | | | | | QosContainer\" | | | | | data type, but | | | | | with the | | | | | OpenAPI | | | | | \"nullable: | | | | | true\" | | | | | property. | | +----------------+----------------+----------------+----------------+ | UeIdentityInfo | 5.6.2.31 | Represents | IMS_SBI | | | | 5GS-Level UE | | | | | Identities. | | +----------------+----------------+----------------+----------------+
Table 5.6.1-2 specifies data types re-used by the Npcf_PolicyAuthorization
service based interface protocol from other specifications, including a
reference to their respective specifications and when needed, a short
description of their use within the Npcf_PolicyAuthorization service based
interface.
Table 5.6.1-2: Npcf_PolicyAuthorization re-used Data Types
* * *
Data type Reference Comments Applicability AccNetChargingAddress 3GPP TS
29.512 [8] Indicates the IP address of the network entity within the access
network performing charging. IMS_SBI AccessType 3GPP TS 29.571 [12] The
identification of the type of access network.  
AccumulatedUsage 3GPP TS 29.122 [15] Accumulated Usage. SponsoredConnectivity
AdditionalAccessInfo 3GPP TS 29.512 [8] Indicates the combination of
additional Access Type and RAT Type for MA PDU session ATSSS AfSigProtocol
3GPP TS 29.512 [8] Represents the protocol used for signalling between the UE
and the AF. ProvAFsignalFlow ApplicationChargingId 3GPP TS 29.571 [12]
Application provided charging identifier allowing correlation of charging
information. IMS_SBI BdtReferenceId 3GPP TS 29.122 [15] Identifies transfer
policies.  
BitRate 3GPP TS 29.571 [12] Specifies bitrate in kbits per second.  
BitRateRm 3GPP TS 29.571 [12] This data type is defined in the same way as the
\"BitRate\" data type, but with the OpenAPI \"nullable: true\" property.  
BridgeManagementContainer 3GPP TS 29.512 [8] Contains bridge management
information. TimeSensitiveNetworking Bytes 3GPP TS 29.571 [12] String with
format \"byte\".  
ChargingId 3GPP TS 29.571 [12] Charging identifier allowing correlation of
charging information. IMS_SBI DateTime 3GPP TS 29.571 [12] String with format
\"date-time\" as defined in OpenAPI Specification [11].
InfluenceOnTrafficRouting, TimeSensitiveNetworking Dnn 3GPP TS 29.571 [12]
Data Network Name.  
DurationSec 3GPP TS 29.571 [12] Identifies a period of time in units of
seconds. TimeSensitiveNetworking, EnhancedSubscriptionToNotification
FinalUnitAction 3GPP TS 32.291 [22] Indicates the action to be taken when the
user\'s account cannot cover the service cost.  
Float 3GPP TS 29.571 [12] Number with format \"float\" as defined in OpenAPI
Specification [11]. FLUS FloatRm 3GPP TS 29.571 [12] This data type is defined
in the same way as the \"Float\" data type, but with the OpenAPI \"nullable:
true\" property. FLUS FlowDirection 3GPP TS 29.512 [8] Flow Direction.  
ExtMaxDataBurstVol 3GPP TS 29.571 [12] Maximum Burst Size.
TimeSensitiveNetworking ExtMaxDataBurstVolRm 3GPP TS 29.571 [12] This data
type is defined in the same way as the \"ExtMaxDataBurstVol\" data type, but
with the OpenAPI \"nullable: true\" property TimeSensitiveNetworking Gpsi 3GPP
TS 29.571 [12] Identifies the GPSI.  
Ipv4Addr 3GPP TS 29.571 [12] Identifies an IPv4 address.  
Ipv6Addr 3GPP TS 29.571 [12] Identifies an IPv6 address.  
MacAddr48 3GPP TS 29.571 [12] MAC Address.  
NetLocAccessSupport 3GPP TS 29.512 [8] Indicates the access network does not
support the report of the requested access network information. NetLoc
NullValue 3GPP TS 29.571 [12] JSON\'s null value, used as an explicit value of
an enumeration. MCPTT-Preemption PacketDelBudget 3GPP TS 29.571 [12] Packet
Delay Budget. TimeSensitiveNetworking PacketDelBudgetRm 3GPP TS 29.571 [12]
This data type is defined in the same way as the \"PacketDelBudget\" data
type, but with the OpenAPI \"nullable: true\" property TimeSensitiveNetworking
PacketLossRateRm 3GPP TS 29.571 [12] This data type is defined in the same way
as the \"PacketLossRate\" data type, but with the OpenAPI \"nullable: true\"
property. CHEM Pei 3GPP TS 29.571 [12] Identifies the PEI. IMS_SBI PlmnIdNid
3GPP TS 29.571 [12] Identifies the network: the PLMN Identifier (mobile
country code and mobile network code) and, for an SNPN, also the NID.  
PreemptionCapability 3GPP TS 29.571 [12] Pre-emption capability. MCPTT-
Preemption PreemptionVulnerability 3GPP TS 29.571 [12] Pre-emption
vulnerability. MCPTT-Preemption PreemptionCapabilityRm 3GPP TS 29.571 [12] It
is defined in the same way as the \"PreemptionCapability\" data type, but with
the OpenAPI \"nullable: true\" property. MCPTT-Preemption
PreemptionVulnerabilityRm 3GPP TS 29.571 [12] It is defined in the same way as
the \"PreemptionVulnerability\" data type, but with the OpenAPI \"nullable:
true\" property. MCPTT-Preemption PresenceInfo 3GPP TS 29.571 [12] Represents
an area of interest, e.g. a Presence Reporting Area. InfluenceOnTrafficRouting
PortManagementContainer 3GPP TS 29.512 [8] Contains port management
information for a related TSN port. TimeSensitiveNetworking ProblemDetails
3GPP TS 29.571 [12] Contains a detailed information about an error.  
RanNasRelCause 3GPP TS 29.512 [8] Indicates RAN and/or NAS release cause code
information. RAN-NAS-Cause RedirectResponse 3GPP TS 29.571 [12] Contains
redirection related information. ES3XX RequestedQosMonitoringParameter 3GPP TS
29.512 [8] Indicate the UL packet delay, DL packet delay or round trip packet
delay between the UE and the UPF is to be monitored when the QoS Monitoring
for URLLC is enabled for the service data flow. QoSMonitoring RatType 3GPP TS
29.571 [12] RAT Type.  
RouteToLocation 3GPP TS 29.571 [12] Identifies routes to locations of
applications. InfluenceOnTrafficRouting Snssai 3GPP TS 29.571 [12] Identifies
the S-NSSAI.  
Supi 3GPP TS 29.571 [12] Identifies the SUPI.  
SupportedFeatures 3GPP TS 29.571 [12] Used to negotiate the applicability of
the optional features defined in table 5.8-1.  
TimeZone 3GPP TS 29.571 [12] Time Zone. NetLoc TsnBridgeInfo 3GPP TS 29.512
[8] TSN bridge information. TimeSensitiveNetworking Uinteger 3GPP TS 29.571
[12] Unsigned Integer. TimeSensitiveNetworking Uint32 3GPP TS 29.571 [12]
Unsigned 32-bit integers, i.e. only value 0 and 32-bit integers above 0 are
permissible. ResourceSharing Uint32Rm 3GPP TS 29.571 [12] This data type is
defined in the same way as the \"Uint32\" data type, but with the OpenAPI
\"nullable: true\" property. ResourceSharing UpPathChgEvent 3GPP TS 29.512 [8]
Contains the subscription information to be delivered to SMF for the UP path
management events. InfluenceOnTrafficRouting Uri 3GPP TS 29.571 [12] String
providing an URI.  
UsageThreshold 3GPP TS 29.122 [15] Usage Thresholds. SponsoredConnectivity
UsageThresholdRm 3GPP TS 29.122 [15] This data type is defined in the same way
as the \"UsageThreshold\" data type, but with the OpenAPI \"nullable: true\"
property. SponsoredConnectivity UserLocation 3GPP TS 29.571 [12] User
Location. NetLoc
* * *
### 5.6.2 Structured data types
#### 5.6.2.1 Introduction
This subclause defines the structures to be used in resource representations.
#### 5.6.2.2 Type AppSessionContext
Table 5.6.2.2-1: Definition of type AppSessionContext
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | a | AppSes | C | 0..1 | I | | | scReqData | sionConte | | | dentifies | | | | xtReqData | | | the | | | | | | | service | | | | | | | req | | | | | | | uirements | | | | | | | of an | | | | | | | I | | | | | | | ndividual | | | | | | | Ap | | | | | | | plication | | | | | | | Session | | | | | | | Context. | | | | | | | | | | | | | | It shall | | | | | | | be | | | | | | | present | | | | | | | in HTTP | | | | | | | POST | | | | | | | request | | | | | | | messages | | | | | | | for the | | | | | | | creation | | | | | | | of the | | | | | | | resource | | | | | | | and may | | | | | | | be | | | | | | | included | | | | | | | in the | | | | | | | HTTP | | | | | | | response | | | | | | | messages. | | +-----------+-----------+---+-----------+-----------+-----------+ | as | AppSess | C | 0..1 | Describes | | | cRespData | ionContex | | | the | | | | tRespData | | | auth | | | | | | | orization | | | | | | | data of | | | | | | | an | | | | | | | I | | | | | | | ndividual | | | | | | | Ap | | | | | | | plication | | | | | | | Session | | | | | | | Context | | | | | | | created | | | | | | | by the | | | | | | | PCF. | | | | | | | | | | | | | | It may be | | | | | | | present | | | | | | | in the | | | | | | | HTTP | | | | | | | response | | | | | | | messages. | | +-----------+-----------+---+-----------+-----------+-----------+ | evsNotif | EventsNot | O | 0..1 | Describes | | | | ification | | | in | | | | | | | formation | | | | | | | related | | | | | | | to the | | | | | | | not | | | | | | | ification | | | | | | | of | | | | | | | events. | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.3 Type AppSessionContextReqData
Table 5.6.2.3-1: Definition of type AppSessionContextReqData
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | afAppId | AfAppId | O | 0..1 | AF | | | | | | | ap | | | | | | | plication | | | | | | | id | | | | | | | entifier. | | +-----------+-----------+---+-----------+-----------+-----------+ | afChargId | App | O | 0..1 | AF | IMS_SBI | | | licationC | | | charging | | | | hargingId | | | id | | | | | | | entifier. | | | | | | | This | | | | | | | in | | | | | | | formation | | | | | | | may be | | | | | | | used for | | | | | | | charging | | | | | | | co | | | | | | | rrelation | | | | | | | with QoS | | | | | | | flow. | | +-----------+-----------+---+-----------+-----------+-----------+ | afReqData | AfRequ | O | 0..1 | R | IMS_SBI | | | estedData | | | epresents | | | | | | | the AF | | | | | | | requested | | | | | | | data to | | | | | | | be | | | | | | | exposed. | | +-----------+-----------+---+-----------+-----------+-----------+ | afRoutReq | Af | C | 0..1 | Indicates | Influen | | | RoutingRe | | | the AF | ceOnTraff | | | quirement | | | traffic | icRouting | | | | | | routing | | | | | | | requ | | | | | | | irements. | | | | | | | It shall | | | | | | | be | | | | | | | included | | | | | | | if | | | | | | | Influence | | | | | | | on | | | | | | | Traffic | | | | | | | Routing | | | | | | | feature | | | | | | | is | | | | | | | s | | | | | | | upported. | | +-----------+-----------+---+-----------+-----------+-----------+ | aspId | AspId | C | 0..1 | Ap | Spo | | | | | | plication | nsoredCon | | | | | | service | nectivity | | | | | | provider | | | | | | | identity. | | | | | | | It shall | | | | | | | be | | | | | | | included | | | | | | | if | | | | | | | \"Spons | | | | | | | oredConne | | | | | | | ctivity\" | | | | | | | feature | | | | | | | is | | | | | | | s | | | | | | | upported. | | +-----------+-----------+---+-----------+-----------+-----------+ | bdtRefId | BdtRe | O | 0..1 | Reference | | | | ferenceId | | | to a | | | | | | | transfer | | | | | | | policy | | | | | | | n | | | | | | | egotiated | | | | | | | for | | | | | | | b | | | | | | | ackground | | | | | | | data | | | | | | | traffic. | | +-----------+-----------+---+-----------+-----------+-----------+ | dnn | Dnn | C | 0..1 | Data | | | | | | | Network | | | | | | | Name, a | | | | | | | full DNN | | | | | | | with both | | | | | | | the | | | | | | | Network | | | | | | | I | | | | | | | dentifier | | | | | | | and | | | | | | | Operator | | | | | | | Id | | | | | | | entifier, | | | | | | | or a DNN | | | | | | | with the | | | | | | | Network | | | | | | | I | | | | | | | dentifier | | | | | | | only. It | | | | | | | shall be | | | | | | | present | | | | | | | when the | | | | | | | \"af | | | | | | | RoutReq\" | | | | | | | attribute | | | | | | | is | | | | | | | present. | | +-----------+-----------+---+-----------+-----------+-----------+ | evSubsc | EventsSub | O | 0..1 | I | | | | scReqData | | | dentifies | | | | | | | the | | | | | | | events | | | | | | | the | | | | | | | ap | | | | | | | plication | | | | | | | s | | | | | | | ubscribes | | | | | | | to at | | | | | | | creation | | | | | | | of an | | | | | | | I | | | | | | | ndividual | | | | | | | Ap | | | | | | | plication | | | | | | | Session | | | | | | | Context | | | | | | | resource. | | +-----------+-----------+---+-----------+-----------+-----------+ | ipDomain | string | O | 0..1 | Indicates | | | | | | | the IPv4 | | | | | | | address | | | | | | | domain | | | | | | | in | | | | | | | formation | | | | | | | that | | | | | | | assists | | | | | | | session | | | | | | | binding. | | +-----------+-----------+---+-----------+-----------+-----------+ | mcpttId | string | O | 0..1 | Indicates | MCPTT | | | | | | that the | | | | | | | created | | | | | | | I | | | | | | | ndividual | | | | | | | Ap | | | | | | | plication | | | | | | | Session | | | | | | | Context | | | | | | | resource | | | | | | | relates | | | | | | | to an | | | | | | | MCPTT | | | | | | | session | | | | | | | pr | | | | | | | ioritized | | | | | | | call. | | | | | | | | | | | | | | It | | | | | | | includes | | | | | | | either | | | | | | | one of | | | | | | | the | | | | | | | namespace | | | | | | | values | | | | | | | used for | | | | | | | MCPTT | | | | | | | (see | | | | | | | IET | | | | | | | F RFC 810 | | | | | | | 1 [42]) | | | | | | | and it | | | | | | | may | | | | | | | include | | | | | | | the name | | | | | | | of the | | | | | | | MCPTT | | | | | | | service | | | | | | | provider. | | +-----------+-----------+---+-----------+-----------+-----------+ | mcVideoId | string | O | 0..1 | Indicates | MCVideo | | | | | | that the | | | | | | | created | | | | | | | I | | | | | | | ndividual | | | | | | | Ap | | | | | | | plication | | | | | | | Session | | | | | | | Context | | | | | | | resource | | | | | | | relates | | | | | | | to an | | | | | | | MCVideo | | | | | | | session | | | | | | | pr | | | | | | | ioritized | | | | | | | call. | | | | | | | | | | | | | | It | | | | | | | includes | | | | | | | either | | | | | | | one of | | | | | | | the | | | | | | | namespace | | | | | | | values | | | | | | | used for | | | | | | | MCPTT | | | | | | | (see | | | | | | | IET | | | | | | | F RFC 810 | | | | | | | 1 [42]) | | | | | | | and it | | | | | | | may | | | | | | | include | | | | | | | the name | | | | | | | of the | | | | | | | MCVideo | | | | | | | service | | | | | | | provider. | | +-----------+-----------+---+-----------+-----------+-----------+ | medC | m | O | 1..N | Media | | | omponents | ap(MediaC | | | Component | | | | omponent) | | | inf | | | | | | | ormation. | | | | | | | The key | | | | | | | of the | | | | | | | map is | | | | | | | the | | | | | | | attribute | | | | | | | \"me | | | | | | | dCompN\". | | +-----------+-----------+---+-----------+-----------+-----------+ | mpsId | string | O | 0..1 | Indicates | | | | | | | that the | | | | | | | created | | | | | | | I | | | | | | | ndividual | | | | | | | Ap | | | | | | | plication | | | | | | | Session | | | | | | | Context | | | | | | | resource | | | | | | | relates | | | | | | | to an MPS | | | | | | | service. | | | | | | | It | | | | | | | contains | | | | | | | the | | | | | | | national | | | | | | | variant | | | | | | | for MPS | | | | | | | service | | | | | | | name. | | +-----------+-----------+---+-----------+-----------+-----------+ | mcsId | string | O | 0..1 | Indicates | | | | | | | that the | | | | | | | created | | | | | | | I | | | | | | | ndividual | | | | | | | Ap | | | | | | | plication | | | | | | | Session | | | | | | | Context | | | | | | | resource | | | | | | | relates | | | | | | | to an MCS | | | | | | | service. | | | | | | | It | | | | | | | contains | | | | | | | the | | | | | | | national | | | | | | | variant | | | | | | | for MCS | | | | | | | service | | | | | | | name. | | +-----------+-----------+---+-----------+-----------+-----------+ | preemptCo | P | O | 0..1 | Pr | MCPTT-P | | ntrolInfo | reemption | | | e-emption | reemption | | | ControlIn | | | control | | | | formation | | | inf | | | | | | | ormation. | | +-----------+-----------+---+-----------+-----------+-----------+ | resPrio | Reser | O | 0..1 | Indicates | | | | vPriority | | | the | | | | | | | re | | | | | | | servation | | | | | | | priority. | | +-----------+-----------+---+-----------+-----------+-----------+ | serv | ServiceI | O | 0..1 | Indicates | IMS_SBI | | InfStatus | nfoStatus | | | whether | | | | | | | the | | | | | | | service | | | | | | | in | | | | | | | formation | | | | | | | is | | | | | | | pr | | | | | | | eliminary | | | | | | | or final. | | | | | | | | | | | | | | When the | | | | | | | attribute | | | | | | | is not | | | | | | | provided | | | | | | | the | | | | | | | default | | | | | | | value is | | | | | | | \ | | | | | | | "FINAL\". | | +-----------+-----------+---+-----------+-----------+-----------+ | notifUri | Uri | M | 1 | Not | | | | | | | ification | | | | | | | URI for | | | | | | | Ap | | | | | | | plication | | | | | | | Session | | | | | | | Context | | | | | | | te | | | | | | | rmination | | | | | | | requests. | | +-----------+-----------+---+-----------+-----------+-----------+ | servUrn | S | O | 0..1 | Service | IMS_SBI | | | erviceUrn | | | URN. | | +-----------+-----------+---+-----------+-----------+-----------+ | sliceInfo | Snssai | O | 0..1 | I | | | | | | | dentifies | | | | | | | the | | | | | | | S-NSSAI. | | +-----------+-----------+---+-----------+-----------+-----------+ | sponId | SponId | C | 0..1 | Sponsor | Spo | | | | | | identity. | nsoredCon | | | | | | It shall | nectivity | | | | | | be | | | | | | | included | | | | | | | if | | | | | | | \"Spons | | | | | | | oredConne | | | | | | | ctivity\" | | | | | | | feature | | | | | | | is | | | | | | | s | | | | | | | upported. | | +-----------+-----------+---+-----------+-----------+-----------+ | s | Sponsor | O | 0..1 | I | Spo | | ponStatus | ingStatus | | | ndication | nsoredCon | | | | | | of | nectivity | | | | | | whether | | | | | | | sponsored | | | | | | | con | | | | | | | nectivity | | | | | | | is | | | | | | | enabled | | | | | | | or | | | | | | | dis | | | | | | | abled/not | | | | | | | enabled. | | | | | | | | | | | | | | The | | | | | | | absence | | | | | | | of the | | | | | | | attribute | | | | | | | indicates | | | | | | | that the | | | | | | | sponsored | | | | | | | con | | | | | | | nectivity | | | | | | | is | | | | | | | enabled. | | +-----------+-----------+---+-----------+-----------+-----------+ | supi | Supi | O | 0..1 | Sub | | | | | | | scription | | | | | | | Permanent | | | | | | | Id | | | | | | | entifier. | | +-----------+-----------+---+-----------+-----------+-----------+ | gpsi | Gpsi | O | 0..1 | Generic | | | | | | | Public | | | | | | | Sub | | | | | | | scription | | | | | | | Id | | | | | | | entifier. | | +-----------+-----------+---+-----------+-----------+-----------+ | suppFeat | Supporte | M | 1 | This IE | | | | dFeatures | | | r | | | | | | | epresents | | | | | | | a list of | | | | | | | Supported | | | | | | | features | | | | | | | used as | | | | | | | described | | | | | | | in | | | | | | | subcl | | | | | | | ause 5.8. | | | | | | | | | | | | | | It shall | | | | | | | be | | | | | | | supplied | | | | | | | by the NF | | | | | | | service | | | | | | | consumer | | | | | | | in the | | | | | | | POST | | | | | | | request | | | | | | | that | | | | | | | requests | | | | | | | a | | | | | | | creation | | | | | | | of an | | | | | | | I | | | | | | | ndividual | | | | | | | Ap | | | | | | | plication | | | | | | | Session | | | | | | | Context | | | | | | | resource. | | +-----------+-----------+---+-----------+-----------+-----------+ | ueIpv4 | Ipv4Addr | C | 0..1 | The IPv4 | | | | | | | address | | | | | | | of the | | | | | | | served | | | | | | | UE. | | +-----------+-----------+---+-----------+-----------+-----------+ | ueIpv6 | Ipv6Addr | C | 0..1 | The IPv6 | | | | | | | address | | | | | | | of the | | | | | | | served | | | | | | | UE. | | +-----------+-----------+---+-----------+-----------+-----------+ | ueMac | MacAddr48 | C | 0..1 | The MAC | | | | | | | address | | | | | | | of the | | | | | | | served | | | | | | | UE. When | | | | | | | the | | | | | | | feature | | | | | | | \"TimeSen | | | | | | | sitiveNet | | | | | | | working\" | | | | | | | is | | | | | | | supported | | | | | | | this | | | | | | | attribute | | | | | | | r | | | | | | | epresents | | | | | | | the DS-TT | | | | | | | port MAC | | | | | | | address. | | +-----------+-----------+---+-----------+-----------+-----------+ | tsnBrid | BridgeM | O | 0..1 | T | TimeS | | geManCont | anagement | | | ransports | ensitiveN | | | Container | | | TSN | etworking | | | | | | bridge | | | | | | | m | | | | | | | anagement | | | | | | | inf | | | | | | | ormation. | | +-----------+-----------+---+-----------+-----------+-----------+ | tsnPortMa | PortM | O | 0..1 | T | TimeS | | nContDstt | anagement | | | ransports | ensitiveN | | | Container | | | TSN port | etworking | | | | | | m | | | | | | | anagement | | | | | | | in | | | | | | | formation | | | | | | | for the | | | | | | | DS-TT | | | | | | | port. | | +-----------+-----------+---+-----------+-----------+-----------+ | t | arr | O | 1..N | T | TimeS | | snPortMan | ay(PortMa | | | ransports | ensitiveN | | ContNwtts | nagementC | | | TSN port | etworking | | | ontainer) | | | m | | | | | | | anagement | | | | | | | in | | | | | | | formation | | | | | | | for one | | | | | | | or more | | | | | | | NW-TT | | | | | | | ports. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: | | | | | | | Only one | | | | | | | of the | | | | | | | served UE | | | | | | | a | | | | | | | ddressing | | | | | | | p | | | | | | | arameters | | | | | | | (the IPv4 | | | | | | | address | | | | | | | or the | | | | | | | IPv6 | | | | | | | address | | | | | | | or MAC | | | | | | | address) | | | | | | | shall | | | | | | | always be | | | | | | | included. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.4 Type AppSessionContextRespData
Table 5.6.2.4-1: Definition of type AppSessionContextRespData
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | ser | Ser | O | 0..1 | Indicates | | | vAuthInfo | vAuthInfo | | | the | | | | | | | result of | | | | | | | the | | | | | | | auth | | | | | | | orization | | | | | | | for a | | | | | | | service | | | | | | | request | | | | | | | bound to | | | | | | | a | | | | | | | transfer | | | | | | | policy. | | +-----------+-----------+---+-----------+-----------+-----------+ | ueIds | arr | O | 1..N | R | IMS_SBI | | | ay(UeIden | | | epresents | | | | tityInfo) | | | the | | | | | | | 5GS-Level | | | | | | | UE | | | | | | | i | | | | | | | dentities | | | | | | | available | | | | | | | for an AF | | | | | | | session | | | | | | | context. | | +-----------+-----------+---+-----------+-----------+-----------+ | suppFeat | Supporte | C | 0..1 | This IE | | | | dFeatures | | | r | | | | | | | epresents | | | | | | | a list of | | | | | | | Supported | | | | | | | features | | | | | | | used as | | | | | | | described | | | | | | | in | | | | | | | subcl | | | | | | | ause 5.8. | | | | | | | | | | | | | | It shall | | | | | | | be | | | | | | | supplied | | | | | | | by the | | | | | | | PCF in | | | | | | | the | | | | | | | response | | | | | | | to the | | | | | | | POST | | | | | | | request | | | | | | | that | | | | | | | requested | | | | | | | a | | | | | | | creation | | | | | | | of an | | | | | | | I | | | | | | | ndividual | | | | | | | Ap | | | | | | | plication | | | | | | | Session | | | | | | | Context | | | | | | | resource. | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.5 Type AppSessionContextUpdateData
Table 5.6.2.5-1: Definition of type AppSessionContextUpdateData
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | afAppId | AfAppId | O | 0..1 | AF | | | | | | | ap | | | | | | | plication | | | | | | | id | | | | | | | entifier. | | +-----------+-----------+---+-----------+-----------+-----------+ | afRoutReq | AfRo | O | 0..1 | Indicates | Influen | | | utingRequ | | | the AF | ceOnTraff | | | irementRm | | | traffic | icRouting | | | | | | routing | | | | | | | requ | | | | | | | irements. | | +-----------+-----------+---+-----------+-----------+-----------+ | aspId | AspId | O | 0..1 | Ap | Spo | | | | | | plication | nsoredCon | | | | | | service | nectivity | | | | | | provider | | | | | | | identity. | | +-----------+-----------+---+-----------+-----------+-----------+ | bdtRefId | BdtRe | O | 0..1 | Reference | | | | ferenceId | | | to a | | | | | | | transfer | | | | | | | policy | | | | | | | n | | | | | | | egotiated | | | | | | | for | | | | | | | b | | | | | | | ackground | | | | | | | data | | | | | | | traffic. | | +-----------+-----------+---+-----------+-----------+-----------+ | evSubsc | Ev | O | 0..1 | I | | | | entsSubsc | | | dentifies | | | | ReqDataRm | | | the | | | | | | | events | | | | | | | the | | | | | | | ap | | | | | | | plication | | | | | | | s | | | | | | | ubscribes | | | | | | | to at | | | | | | | mod | | | | | | | ification | | | | | | | of an | | | | | | | I | | | | | | | ndividual | | | | | | | Ap | | | | | | | plication | | | | | | | Session | | | | | | | Context | | | | | | | resource. | | +-----------+-----------+---+-----------+-----------+-----------+ | mcpttId | string | O | 0..1 | Indicates | MCPTT | | | | | | that the | | | | | | | updated | | | | | | | I | | | | | | | ndividual | | | | | | | Ap | | | | | | | plication | | | | | | | Session | | | | | | | Context | | | | | | | resource | | | | | | | relates | | | | | | | to an | | | | | | | MCPTT | | | | | | | session | | | | | | | pr | | | | | | | ioritized | | | | | | | call. | | | | | | | | | | | | | | It | | | | | | | includes | | | | | | | either | | | | | | | one of | | | | | | | the | | | | | | | namespace | | | | | | | values | | | | | | | used for | | | | | | | MCPTT | | | | | | | (see | | | | | | | IET | | | | | | | F RFC 810 | | | | | | | 1 [42]) | | | | | | | and it | | | | | | | may | | | | | | | include | | | | | | | the name | | | | | | | of the | | | | | | | MCPTT | | | | | | | service | | | | | | | provider. | | +-----------+-----------+---+-----------+-----------+-----------+ | mcVideoId | string | O | 0..1 | Indicates | MCVideo | | | | | | that the | | | | | | | updated | | | | | | | I | | | | | | | ndividual | | | | | | | Ap | | | | | | | plication | | | | | | | Session | | | | | | | Context | | | | | | | resource | | | | | | | relates | | | | | | | to an | | | | | | | MCVideo | | | | | | | session | | | | | | | pr | | | | | | | ioritized | | | | | | | call. | | | | | | | | | | | | | | It | | | | | | | includes | | | | | | | either | | | | | | | one of | | | | | | | the | | | | | | | namespace | | | | | | | values | | | | | | | used for | | | | | | | MCPTT | | | | | | | (see | | | | | | | IET | | | | | | | F RFC 810 | | | | | | | 1 [42]) | | | | | | | and it | | | | | | | may | | | | | | | include | | | | | | | the name | | | | | | | of the | | | | | | | MCVideo | | | | | | | service | | | | | | | provider. | | +-----------+-----------+---+-----------+-----------+-----------+ | medC | map | O | 1..N | Media | | | omponents | (MediaCom | | | Component | | | | ponentRm) | | | inf | | | | | | | ormation. | | +-----------+-----------+---+-----------+-----------+-----------+ | mpsId | string | O | 0..1 | Indicates | | | | | | | that the | | | | | | | modified | | | | | | | I | | | | | | | ndividual | | | | | | | Ap | | | | | | | plication | | | | | | | Session | | | | | | | Context | | | | | | | resource | | | | | | | relates | | | | | | | to an MPS | | | | | | | service. | | | | | | | It | | | | | | | contains | | | | | | | the | | | | | | | national | | | | | | | variant | | | | | | | for MPS | | | | | | | service | | | | | | | name. | | +-----------+-----------+---+-----------+-----------+-----------+ | mcsId | string | O | 0..1 | Indicates | | | | | | | that the | | | | | | | updated | | | | | | | I | | | | | | | ndividual | | | | | | | Ap | | | | | | | plication | | | | | | | Session | | | | | | | Context | | | | | | | resource | | | | | | | relates | | | | | | | to an MCS | | | | | | | service. | | | | | | | It | | | | | | | contains | | | | | | | the | | | | | | | national | | | | | | | variant | | | | | | | for MCS | | | | | | | service | | | | | | | name. | | +-----------+-----------+---+-----------+-----------+-----------+ | preemptCo | Pre | O | 0..1 | P | MCPTT-P | | ntrolInfo | emptionCo | | | reemption | reemption | | | ntrolInfo | | | control | | | | rmationRm | | | inf | | | | | | | ormation. | | +-----------+-----------+---+-----------+-----------+-----------+ | resPrio | Reser | O | 0..1 | Indicates | | | | vPriority | | | the | | | | | | | re | | | | | | | servation | | | | | | | priority. | | +-----------+-----------+---+-----------+-----------+-----------+ | serv | ServiceI | O | 0..1 | Indicates | IMS_SBI | | InfStatus | nfoStatus | | | whether | | | | | | | the | | | | | | | service | | | | | | | in | | | | | | | formation | | | | | | | is | | | | | | | pr | | | | | | | eliminary | | | | | | | or final. | | +-----------+-----------+---+-----------+-----------+-----------+ | s | Si | O | 0..1 | Describes | IMS_SBI | | ipForkInd | pForkingI | | | if | | | | ndication | | | several | | | | | | | SIP | | | | | | | dialogues | | | | | | | are | | | | | | | related | | | | | | | to an | | | | | | | \"I | | | | | | | ndividual | | | | | | | Ap | | | | | | | plication | | | | | | | Session | | | | | | | Context\" | | | | | | | resource. | | +-----------+-----------+---+-----------+-----------+-----------+ | sponId | SponId | O | 0..1 | Sponsor | Spo | | | | | | identity. | nsoredCon | | | | | | | nectivity | +-----------+-----------+---+-----------+-----------+-----------+ | s | Sponsor | O | 0..1 | I | Spo | | ponStatus | ingStatus | | | ndication | nsoredCon | | | | | | of | nectivity | | | | | | whether | | | | | | | sponsored | | | | | | | con | | | | | | | nectivity | | | | | | | is | | | | | | | enabled | | | | | | | or | | | | | | | dis | | | | | | | abled/not | | | | | | | enabled. | | +-----------+-----------+---+-----------+-----------+-----------+ | tsnBrid | BridgeM | O | 0..1 | T | TimeS | | geManCont | anagement | | | ransports | ensitiveN | | | Container | | | TSN | etworking | | | | | | bridge | | | | | | | m | | | | | | | anagement | | | | | | | inf | | | | | | | ormation. | | +-----------+-----------+---+-----------+-----------+-----------+ | tsnPortMa | PortM | O | 0..1 | T | TimeS | | nContDstt | anagement | | | ransports | ensitiveN | | | Container | | | TSN port | etworking | | | | | | m | | | | | | | anagement | | | | | | | in | | | | | | | formation | | | | | | | for the | | | | | | | DS-TT | | | | | | | port. | | +-----------+-----------+---+-----------+-----------+-----------+ | t | arr | O | 1..N | T | TimeS | | snPortMan | ay(PortMa | | | ransports | ensitiveN | | ContNwtts | nagementC | | | TSN port | etworking | | | ontainer) | | | m | | | | | | | anagement | | | | | | | in | | | | | | | formation | | | | | | | for one | | | | | | | or more | | | | | | | NW-TT | | | | | | | ports. | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.6 Type EventsSubscReqData
Table 5.6.2.6-1: Definition of type EventsSubscReqData
* * *
Attribute name Data type P Cardinality Description Applicability events
array(AfEventSubscription) M 1..N Subscribed Events.  
notifUri Uri O 0..1 Notification URI.  
reqQosMonParams array(RequestedQosMonitoringParameter) O 1..N Indicates the UL
packet delay, DL packet delay and/or round trip packet delay between the UE
and the UPF is to be monitored when the QoS Monitoring for URLLC is enabled
for the service data flow. QoSMonitoring qosMon QosMonitoringInformation O
0..1 Qos Monitoring information. It can be present when the event
\"QOS_MONITORING\" is subscribed. QoSMonitoring reqAnis
array(RequiredAccessInfo) C 1..N Represents the required access network
information. It shall be present when the event \"ANI_REPORT\" is subscribed.
NetLoc usgThres UsageThreshold O 0..1 Includes the volume and/or time
thresholds for sponsored data connectivity. SponsoredConnectivity notifCorreId
string O 0..1 It is used to set the value of Notification Correlation ID in
the corresponding notification. EnhancedSubscriptionToNotification
* * *
#### 5.6.2.7 Type MediaComponent
Table 5.6.2.7-1: Definition of type MediaComponent
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | afAppId | AfAppId | O | 0..1 | Contains | | | | | | | in | | | | | | | formation | | | | | | | that | | | | | | | i | | | | | | | dentifies | | | | | | | the | | | | | | | p | | | | | | | articular | | | | | | | service | | | | | | | the AF | | | | | | | session | | | | | | | belongs | | | | | | | to. | | +-----------+-----------+---+-----------+-----------+-----------+ | afRoutReq | Af | O | 0..1 | Indicates | Influen | | | RoutingRe | | | the AF | ceOnTraff | | | quirement | | | traffic | icRouting | | | | | | routing | | | | | | | requ | | | | | | | irements. | | +-----------+-----------+---+-----------+-----------+-----------+ | qos | string | O | 0..1 | I | A | | Reference | | | | dentifies | uthorizat | | | | | | a | ionWithRe | | | | | | pr | quiredQoS | | | | | | e-defined | | | | | | | QoS | | | | | | | inf | | | | | | | ormation. | | +-----------+-----------+---+-----------+-----------+-----------+ | a | arra | O | 1..N | Ordered | A | | ltSerReqs | y(string) | | | list of | uthorizat | | | | | | al | ionWithRe | | | | | | ternative | quiredQoS | | | | | | service | | | | | | | requ | | | | | | | irements. | | | | | | | The lower | | | | | | | the index | | | | | | | of the | | | | | | | array for | | | | | | | a given | | | | | | | entry, | | | | | | | the | | | | | | | higher | | | | | | | the | | | | | | | priority. | | +-----------+-----------+---+-----------+-----------+-----------+ | d | boolean | O | 0..1 | Indicates | Dis | | isUeNotif | | | | to | ableUENot | | | | | | disable | ification | | | | | | QoS flow | | | | | | | p | | | | | | | arameters | | | | | | | s | | | | | | | ignalling | | | | | | | to the UE | | | | | | | when the | | | | | | | SMF is | | | | | | | notified | | | | | | | by the | | | | | | | NG-RAN of | | | | | | | changes | | | | | | | in the | | | | | | | fulfilled | | | | | | | QoS | | | | | | | situation | | | | | | | when it | | | | | | | is | | | | | | | included | | | | | | | and set | | | | | | | to | | | | | | | \"true\". | | | | | | | The | | | | | | | fulfilled | | | | | | | situation | | | | | | | is either | | | | | | | the QoS | | | | | | | profile | | | | | | | or an | | | | | | | Al | | | | | | | ternative | | | | | | | QoS | | | | | | | Profile. | | | | | | | The | | | | | | | default | | | | | | | value | | | | | | | \"false\" | | | | | | | shall | | | | | | | apply, if | | | | | | | the | | | | | | | attribute | | | | | | | is not | | | | | | | present | | | | | | | and has | | | | | | | not been | | | | | | | supplied | | | | | | | pr | | | | | | | eviously. | | +-----------+-----------+---+-----------+-----------+-----------+ | contVer | Conte | O | 0..1 | R | MediaC | | | ntVersion | | | epresents | omponentV | | | | | | the | ersioning | | | | | | content | | | | | | | version | | | | | | | of a | | | | | | | media | | | | | | | c | | | | | | | omponent. | | +-----------+-----------+---+-----------+-----------+-----------+ | desM | Float | O | 0..1 | Indicates | FLUS, | | axLatency | | | | a maximum | QoSHint | | | | | | desirable | | | | | | | transport | | | | | | | level | | | | | | | packet | | | | | | | latency | | | | | | | in | | | | | | | mill | | | | | | | iseconds. | | +-----------+-----------+---+-----------+-----------+-----------+ | d | Float | O | 0..1 | Indicates | FLUS, | | esMaxLoss | | | | the | QoSHint | | | | | | maximum | | | | | | | desirable | | | | | | | transport | | | | | | | level | | | | | | | packet | | | | | | | loss rate | | | | | | | in | | | | | | | percent | | | | | | | (without | | | | | | | \"%\" | | | | | | | sign). | | +-----------+-----------+---+-----------+-----------+-----------+ | flusId | string | O | 0..1 | Indicates | FLUS | | | | | | that the | | | | | | | media | | | | | | | component | | | | | | | is used | | | | | | | for FLUS | | | | | | | media. | | | | | | | | | | | | | | It is | | | | | | | derived | | | | | | | from the | | | | | | | media | | | | | | | level | | | | | | | attribute | | | | | | | \"a | | | | | | | =label:\" | | | | | | | (see | | | | | | | IET | | | | | | | F RFC 457 | | | | | | | 4 [50]) | | | | | | | obtained | | | | | | | from the | | | | | | | SDP body. | | | | | | | It | | | | | | | contains | | | | | | | the | | | | | | | string | | | | | | | after | | | | | | | \"a | | | | | | | =label:\" | | | | | | | starting | | | | | | | with | | | | | | | \"flus\" | | | | | | | and may | | | | | | | be | | | | | | | followed | | | | | | | by more | | | | | | | c | | | | | | | haracters | | | | | | | as | | | | | | | described | | | | | | | in | | | | | | | 3GPP | | | | | | | TS 26.23 | | | | | | | 8 [51]. | | +-----------+-----------+---+-----------+-----------+-----------+ | medCompN | integer | M | 1 | I | | | | | | | dentifies | | | | | | | the media | | | | | | | component | | | | | | | number, | | | | | | | and it | | | | | | | contains | | | | | | | the | | | | | | | ordinal | | | | | | | number of | | | | | | | the media | | | | | | | c | | | | | | | omponent. | | +-----------+-----------+---+-----------+-----------+-----------+ | me | map( | O | 1..N | Contains | | | dSubComps | MediaSubC | | | the | | | | omponent) | | | requested | | | | | | | bitrate | | | | | | | and | | | | | | | filters | | | | | | | for the | | | | | | | set of | | | | | | | service | | | | | | | data | | | | | | | flows | | | | | | | i | | | | | | | dentified | | | | | | | by their | | | | | | | common | | | | | | | flow | | | | | | | id | | | | | | | entifier. | | | | | | | The key | | | | | | | of the | | | | | | | map is | | | | | | | the | | | | | | | attribute | | | | | | | \"fNum\". | | +-----------+-----------+---+-----------+-----------+-----------+ | medType | MediaType | O | 0..1 | Indicates | | | | | | | the media | | | | | | | type of | | | | | | | the | | | | | | | service. | | +-----------+-----------+---+-----------+-----------+-----------+ | marBwUl | BitRate | O | 0..1 | Maximum | | | | | | | requested | | | | | | | bandwidth | | | | | | | for the | | | | | | | Uplink. | | +-----------+-----------+---+-----------+-----------+-----------+ | marBwDl | BitRate | O | 0..1 | Maximum | | | | | | | requested | | | | | | | bandwidth | | | | | | | for the | | | | | | | Downlink. | | +-----------+-----------+---+-----------+-----------+-----------+ | m | PacketL | O | 0..1 | Indicates | CHEM | | axPacketL | ossRateRm | | | the | | | ossRateDl | | | | downlink | | | | | | | maximum | | | | | | | rate for | | | | | | | lost | | | | | | | packets | | | | | | | that can | | | | | | | be | | | | | | | tolerated | | | | | | | for the | | | | | | | service | | | | | | | data | | | | | | | flow. | | +-----------+-----------+---+-----------+-----------+-----------+ | m | PacketL | O | 0..1 | Indicates | CHEM | | axPacketL | ossRateRm | | | the | | | ossRateUl | | | | uplink | | | | | | | maximum | | | | | | | rate for | | | | | | | lost | | | | | | | packets | | | | | | | that can | | | | | | | be | | | | | | | tolerated | | | | | | | for the | | | | | | | service | | | | | | | data | | | | | | | flow. | | +-----------+-----------+---+-----------+-----------+-----------+ | ma | BitRate | O | 0..1 | Maximum | IMS_SBI | | xSuppBwDl | | | | supported | | | | | | | bandwidth | | | | | | | for the | | | | | | | Downlink. | | +-----------+-----------+---+-----------+-----------+-----------+ | ma | BitRate | O | 0..1 | Maximum | IMS_SBI | | xSuppBwUl | | | | supported | | | | | | | bandwidth | | | | | | | for the | | | | | | | Uplink. | | +-----------+-----------+---+-----------+-----------+-----------+ | m | BitRate | O | 0..1 | Minimum | IMS_SBI | | inDesBwDl | | | | desired | | | | | | | bandwidth | | | | | | | for the | | | | | | | Downlink. | | +-----------+-----------+---+-----------+-----------+-----------+ | m | BitRate | O | 0..1 | Minimum | IMS_SBI | | inDesBwUl | | | | desired | | | | | | | bandwidth | | | | | | | for the | | | | | | | Uplink. | | +-----------+-----------+---+-----------+-----------+-----------+ | mirBwUl | BitRate | O | 0..1 | Minimum | | | | | | | requested | | | | | | | bandwidth | | | | | | | for the | | | | | | | Uplink. | | +-----------+-----------+---+-----------+-----------+-----------+ | mirBwDl | BitRate | O | 0..1 | Minimum | | | | | | | requested | | | | | | | bandwidth | | | | | | | for the | | | | | | | Downlink. | | +-----------+-----------+---+-----------+-----------+-----------+ | fStatus | F | O | 0..1 | Indicates | | | | lowStatus | | | whether | | | | | | | the | | | | | | | status of | | | | | | | the | | | | | | | service | | | | | | | data | | | | | | | flows is | | | | | | | enabled, | | | | | | | or | | | | | | | disabled. | | +-----------+-----------+---+-----------+-----------+-----------+ | p | Pr | O | 0..1 | Defines | MCPTT-P | | reemptCap | eemptionC | | | whether | reemption | | | apability | | | the media | | | | | | | flow may | | | | | | | get | | | | | | | resources | | | | | | | that were | | | | | | | already | | | | | | | assigned | | | | | | | to | | | | | | | another | | | | | | | media | | | | | | | flow with | | | | | | | a lower | | | | | | | priority | | | | | | | level. It | | | | | | | may be | | | | | | | included | | | | | | | together | | | | | | | with | | | | | | | \"prioSha | | | | | | | ringInd\" | | | | | | | for ARP | | | | | | | decision. | | +-----------+-----------+---+-----------+-----------+-----------+ | pr | Preem | O | 0..1 | Defines | MCPTT-P | | eemptVuln | ptionVuln | | | whether | reemption | | | erability | | | the media | | | | | | | flow may | | | | | | | lose the | | | | | | | resources | | | | | | | assigned | | | | | | | to it in | | | | | | | order to | | | | | | | admit a | | | | | | | media | | | | | | | flow with | | | | | | | higher | | | | | | | priority | | | | | | | level. It | | | | | | | may be | | | | | | | included | | | | | | | together | | | | | | | with | | | | | | | \"prioSha | | | | | | | ringInd\" | | | | | | | for ARP | | | | | | | decision. | | +-----------+-----------+---+-----------+-----------+-----------+ | prioS | Priori | O | 0..1 | Indicates | Priori | | haringInd | tySharing | | | that the | tySharing | | | Indicator | | | media | | | | | | | flow is | | | | | | | allowed | | | | | | | to use | | | | | | | the same | | | | | | | ARP as | | | | | | | media | | | | | | | flows | | | | | | | belonging | | | | | | | to other | | | | | | | \"I | | | | | | | ndividual | | | | | | | Ap | | | | | | | plication | | | | | | | Session | | | | | | | Context\" | | | | | | | resources | | | | | | | bound to | | | | | | | the same | | | | | | | PDU | | | | | | | session. | | +-----------+-----------+---+-----------+-----------+-----------+ | resPrio | Reser | O | 0..1 | Indicates | | | | vPriority | | | the | | | | | | | re | | | | | | | servation | | | | | | | priority. | | +-----------+-----------+---+-----------+-----------+-----------+ | rrBw | BitRate | O | 0..1 | Indicates | IMS_SBI | | | | | | the | | | | | | | maximum | | | | | | | required | | | | | | | bandwidth | | | | | | | in bits | | | | | | | per | | | | | | | second | | | | | | | for RTCP | | | | | | | receiver | | | | | | | reports | | | | | | | within | | | | | | | the | | | | | | | session | | | | | | | component | | | | | | | as | | | | | | | specified | | | | | | | in | | | | | | | IET | | | | | | | F RFC 355 | | | | | | | 6 [37]. | | | | | | | The | | | | | | | bandwidth | | | | | | | contains | | | | | | | all the | | | | | | | overhead | | | | | | | coming | | | | | | | from the | | | | | | | IP-layer | | | | | | | and the | | | | | | | layers | | | | | | | above, | | | | | | | i.e. IP, | | | | | | | UDP and | | | | | | | RTCP. | | +-----------+-----------+---+-----------+-----------+-----------+ | rsBw | BitRate | O | 0..1 | Indicates | IMS_SBI | | | | | | the | | | | | | | maximum | | | | | | | required | | | | | | | bandwidth | | | | | | | in bits | | | | | | | per | | | | | | | second | | | | | | | for RTCP | | | | | | | sender | | | | | | | reports | | | | | | | within | | | | | | | the | | | | | | | session | | | | | | | component | | | | | | | as | | | | | | | specified | | | | | | | in | | | | | | | IET | | | | | | | F RFC 355 | | | | | | | 6 [37]. | | | | | | | The | | | | | | | bandwidth | | | | | | | contains | | | | | | | all the | | | | | | | overhead | | | | | | | coming | | | | | | | from the | | | | | | | IP-layer | | | | | | | and the | | | | | | | layers | | | | | | | above, | | | | | | | i.e. IP, | | | | | | | UDP and | | | | | | | RTCP. | | +-----------+-----------+---+-----------+-----------+-----------+ | sha | Uint32 | O | 0..1 | I | Resour | | ringKeyDl | | | | dentifies | ceSharing | | | | | | which | | | | | | | media | | | | | | | c | | | | | | | omponents | | | | | | | share | | | | | | | resources | | | | | | | in the | | | | | | | downlink | | | | | | | d | | | | | | | irection. | | | | | | | | | | | | | | If | | | | | | | resource | | | | | | | sharing | | | | | | | applies | | | | | | | between | | | | | | | media | | | | | | | c | | | | | | | omponents | | | | | | | across | | | | | | | \"I | | | | | | | ndividual | | | | | | | Ap | | | | | | | plication | | | | | | | Session | | | | | | | Context\" | | | | | | | resources | | | | | | | for the | | | | | | | same PDU | | | | | | | session, | | | | | | | the same | | | | | | | value of | | | | | | | the | | | | | | | \"shari | | | | | | | ngKeyDl\" | | | | | | | attribute | | | | | | | shall be | | | | | | | used. If | | | | | | | resource | | | | | | | sharing | | | | | | | does not | | | | | | | apply | | | | | | | among | | | | | | | media | | | | | | | c | | | | | | | omponents | | | | | | | across | | | | | | | \"I | | | | | | | ndividual | | | | | | | Ap | | | | | | | plication | | | | | | | Session | | | | | | | Context\" | | | | | | | resources | | | | | | | for the | | | | | | | same PDU | | | | | | | session, | | | | | | | a | | | | | | | different | | | | | | | value for | | | | | | | the | | | | | | | \"shari | | | | | | | ngKeyDl\" | | | | | | | attribute | | | | | | | shall be | | | | | | | used. | | +-----------+-----------+---+-----------+-----------+-----------+ | sha | Uint32 | O | 0..1 | I | Resour | | ringKeyUl | | | | dentifies | ceSharing | | | | | | which | | | | | | | media | | | | | | | c | | | | | | | omponents | | | | | | | share | | | | | | | resources | | | | | | | in the | | | | | | | uplink | | | | | | | d | | | | | | | irection. | | | | | | | | | | | | | | If | | | | | | | resource | | | | | | | sharing | | | | | | | applies | | | | | | | between | | | | | | | media | | | | | | | c | | | | | | | omponents | | | | | | | across | | | | | | | \"I | | | | | | | ndividual | | | | | | | Ap | | | | | | | plication | | | | | | | Session | | | | | | | Context\" | | | | | | | resources | | | | | | | for the | | | | | | | same PDU | | | | | | | session, | | | | | | | the same | | | | | | | value of | | | | | | | the | | | | | | | \"shari | | | | | | | ngKeyUl\" | | | | | | | attribute | | | | | | | shall be | | | | | | | used. If | | | | | | | resource | | | | | | | sharing | | | | | | | does not | | | | | | | apply | | | | | | | among | | | | | | | media | | | | | | | c | | | | | | | omponents | | | | | | | across | | | | | | | \"I | | | | | | | ndividual | | | | | | | Ap | | | | | | | plication | | | | | | | Session | | | | | | | Context\" | | | | | | | resources | | | | | | | for the | | | | | | | same PDU | | | | | | | session, | | | | | | | a | | | | | | | different | | | | | | | value for | | | | | | | the | | | | | | | \"shari | | | | | | | ngKeyUl\" | | | | | | | attribute | | | | | | | shall be | | | | | | | used. | | +-----------+-----------+---+-----------+-----------+-----------+ | codecs | array(C | O | 1..2 | Indicates | | | | odecData) | | | the codec | | | | | | | data. | | +-----------+-----------+---+-----------+-----------+-----------+ | tsnQos | TsnQoS | O | 0..1 | T | TimeS | | | Container | | | ransports | ensitiveN | | | | | | QoS | etworking | | | | | | p | | | | | | | arameters | | | | | | | for TSC | | | | | | | traffic. | | +-----------+-----------+---+-----------+-----------+-----------+ | tsc | T | O | 0..1 | T | TimeS | | aiInputUl | scaiInput | | | ransports | ensitiveN | | | Container | | | TSCAI | etworking | | | | | | input | | | | | | | p | | | | | | | arameters | | | | | | | for TSC | | | | | | | traffic | | | | | | | at the | | | | | | | ingress | | | | | | | interface | | | | | | | of the | | | | | | | DS-TT/UE | | | | | | | (uplink | | | | | | | flow | | | | | | | di | | | | | | | rection). | | +-----------+-----------+---+-----------+-----------+-----------+ | tsc | T | O | 0..1 | T | TimeS | | aiInputDl | scaiInput | | | ransports | ensitiveN | | | Container | | | TSCAI | etworking | | | | | | input | | | | | | | p | | | | | | | arameters | | | | | | | for TSC | | | | | | | traffic | | | | | | | at the | | | | | | | ingress | | | | | | | of the | | | | | | | NW-TT | | | | | | | (downlink | | | | | | | flow | | | | | | | di | | | | | | | rection). | | +-----------+-----------+---+-----------+-----------+-----------+
All IP flows within a \"MediaSubComponent\" data type are permanently disabled
by supplying \"FlowStatus\" data type with a deletion indication.
Bandwidth information and the \"fStatus\" attribute provided within the
MediaComponent applies to all those IP flows within the media component, for
which no corresponding information is being provided within the
\"medSubComps\" attribute. As defined in 3GPP TS 29.513 [7], the bandwidth
information within the media component level \"marBwUl\" and \"marBwDl\"
attributes applies separately to each media subcomponent except for media
subcomponents with a \"flowUsage\" attribute with the value \"RTCP\". The
mapping of bandwidth information for RTCP media subcomponent is defined in
3GPP TS 29.513 [7] subclause 7.3.3.
#### 5.6.2.8 Type MediaSubComponent
Table 5.6.2.8-1: Definition of type MediaSubComponent
* * *
Attribute name Data type P Cardinality Description Applicability afSigProtocol
AfSigProtocol O 0..1 Indicates the protocol used for signalling between the UE
and the AF. It may be included only if the \"flowUsage\" attribute is set to
the value \"AF_SIGNALLING\". ProvAFsignalFlow ethfDescs
array(EthFlowDescription) O 1..2 Contains the flow description for the Uplink
and/or Downlink Ethernet flows.  
fNum integer M 1 Identifies the ordinal number of the service data flow.  
fDescs array(FlowDescription) O 1..2 Contains the flow description for the
Uplink and/or Downlink IP flows.  
fStatus FlowStatus O 0..1 Indicates whether the status of the service data
flows is enabled or disabled.  
flowUsage FlowUsage O 0..1 Flow usage of the flows (e.g. RTCP, AF signalling).  
marBwUl BitRate O 0..1 Maximum requested bandwidth for the Uplink.  
marBwDl BitRate O 0..1 Maximum requested bandwidth for the Downlink.  
tosTrCl TosTrafficClass O 0..1 Type of Service or Traffic Class.
* * *
The bit rate information and flow status information provided within the
\"MediaSubComponent\" data type takes precedence over information provided
within \"MediaComponent\" data type.
All service data flows within a \"MediaSubComponent\" data type are
permanently disabled by supplying \"FlowStatus\" data type with a deletion
indication.
#### 5.6.2.9 Type EventsNotification
Table 5.6.2.9-1: Definition of type EventsNotification
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | a | A | C | 0..1 | Includes | | | ccessType | ccessType | | | the | | | | | | | access | | | | | | | type. It | | | | | | | shall be | | | | | | | present | | | | | | | when the | | | | | | | notified | | | | | | | event is | | | | | | | \"ACCES | | | | | | | S_TYPE_ | | | | | | | CHANGE\". | | +-----------+-----------+---+-----------+-----------+-----------+ | addA | Ad | O | 0..1 | Indicates | ATSSS | | ccessInfo | ditionalA | | | the | | | | ccessInfo | | | a | | | | | | | dditional | | | | | | | co | | | | | | | mbination | | | | | | | of Access | | | | | | | Type and | | | | | | | RAT Type | | | | | | | available | | | | | | | for MA | | | | | | | PDU | | | | | | | session. | | | | | | | It may be | | | | | | | present | | | | | | | when the | | | | | | | notified | | | | | | | event is | | | | | | | \"ACCE | | | | | | | SS_TYPE\ | | | | | | | _CHANGE\" | | | | | | | and the | | | | | | | PDU | | | | | | | session | | | | | | | is a | | | | | | | Mul | | | | | | | ti-Access | | | | | | | PDU | | | | | | | session. | | +-----------+-----------+---+-----------+-----------+-----------+ | relA | Ad | O | 0..1 | Indicates | ATSSS | | ccessInfo | ditionalA | | | the | | | | ccessInfo | | | released | | | | | | | co | | | | | | | mbination | | | | | | | of Access | | | | | | | Type and | | | | | | | RAT Type | | | | | | | p | | | | | | | reviously | | | | | | | available | | | | | | | for MA | | | | | | | PDU | | | | | | | session. | | | | | | | It may be | | | | | | | present | | | | | | | when the | | | | | | | notified | | | | | | | event is | | | | | | | \"ACCE | | | | | | | SS_TYPE\ | | | | | | | _CHANGE\" | | | | | | | and the | | | | | | | PDU | | | | | | | session | | | | | | | is a | | | | | | | Mul | | | | | | | ti-Access | | | | | | | PDU | | | | | | | session. | | +-----------+-----------+---+-----------+-----------+-----------+ | an | Acc | O | 0..1 | Includes | IMS_SBI | | ChargAddr | NetChargi | | | the | | | | ngAddress | | | access | | | | | | | network | | | | | | | charging | | | | | | | address. | | | | | | | It shall | | | | | | | be | | | | | | | present | | | | | | | if | | | | | | | available | | | | | | | when the | | | | | | | notified | | | | | | | event is | | | | | | | \"CHARGI | | | | | | | NG_CORRE | | | | | | | LATION\". | | +-----------+-----------+---+-----------+-----------+-----------+ | a | array(A | C | 1..N | Includes | IMS_SBI | | nChargIds | ccessNetC | | | the | | | | hargingId | | | access | | | | entifier) | | | network | | | | | | | charging | | | | | | | ident | | | | | | | ifier(s). | | | | | | | It shall | | | | | | | be | | | | | | | present | | | | | | | when the | | | | | | | notified | | | | | | | event is | | | | | | | \"CHARGI | | | | | | | NG_CORRE | | | | | | | LATION\". | | +-----------+-----------+---+-----------+-----------+-----------+ | anGwAddr | An | O | 0..1 | Access | | | | GwAddress | | | network | | | | | | | Gateway | | | | | | | Address. | | | | | | | It shall | | | | | | | be | | | | | | | present, | | | | | | | if | | | | | | | ap | | | | | | | plicable, | | | | | | | when the | | | | | | | notified | | | | | | | event is | | | | | | | \"ACCES | | | | | | | S_TYPE_ | | | | | | | CHANGE\". | | +-----------+-----------+---+-----------+-----------+-----------+ | evSubsUri | Uri | M | 1 | The | | | | | | | Events | | | | | | | Sub | | | | | | | scription | | | | | | | URI. | | | | | | | I | | | | | | | dentifies | | | | | | | the | | | | | | | Events | | | | | | | Sub | | | | | | | scription | | | | | | | sub | | | | | | | -resource | | | | | | | that | | | | | | | triggered | | | | | | | the | | | | | | | noti | | | | | | | fication. | | | | | | | | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | evNotifs | array(Af | M | 1..N | Noti | | | | EventNoti | | | fications | | | | fication) | | | about | | | | | | | i | | | | | | | ndividual | | | | | | | events. | | +-----------+-----------+---+-----------+-----------+-----------+ | failedR | arr | C | 1..N | Indicates | | | esourcAll | ay(Resour | | | the | | | ocReports | cesAlloca | | | status of | | | | tionInfo) | | | the PCC | | | | | | | rule(s) | | | | | | | related | | | | | | | to | | | | | | | certain | | | | | | | failed | | | | | | | media | | | | | | | co | | | | | | | mponents. | | | | | | | It shall | | | | | | | be | | | | | | | included | | | | | | | when the | | | | | | | event | | | | | | | trigger | | | | | | | is | | | | | | | \"FAILE | | | | | | | D_RESOUR | | | | | | | CES_ALLO | | | | | | | CATION\". | | +-----------+-----------+---+-----------+-----------+-----------+ | succR | arr | O | 1..N | Indicates | A | | esourcAll | ay(Resour | | | the | uthorizat | | ocReports | cesAlloca | | | al | ionWithRe | | | tionInfo) | | | ternative | quiredQoS | | | | | | service | | | | | | | re | | | | | | | quirement | | | | | | | the | | | | | | | NG-RAN | | | | | | | can | | | | | | | guarantee | | | | | | | to | | | | | | | certain | | | | | | | media | | | | | | | co | | | | | | | mponents. | | | | | | | It may be | | | | | | | included | | | | | | | when the | | | | | | | event | | | | | | | trigger | | | | | | | is | | | | | | | \" | | | | | | | SUCCESSFU | | | | | | | L_RESOUR | | | | | | | CES_ALLO | | | | | | | CATION\". | | +-----------+-----------+---+-----------+-----------+-----------+ | noN | N | O | 0..1 | Indicates | NetLoc | | etLocSupp | etLocAcce | | | the | | | | ssSupport | | | access | | | | | | | network | | | | | | | does not | | | | | | | support | | | | | | | the | | | | | | | report of | | | | | | | the | | | | | | | requested | | | | | | | access | | | | | | | network | | | | | | | inf | | | | | | | ormation. | | +-----------+-----------+---+-----------+-----------+-----------+ | outOfCr | ar | C | 1..N | Out of | IMS_SBI | | edReports | ray(OutOf | | | credit | | | | CreditInf | | | in | | | | ormation) | | | formation | | | | | | | per | | | | | | | service | | | | | | | data | | | | | | | flow. It | | | | | | | shall be | | | | | | | present | | | | | | | when the | | | | | | | notified | | | | | | | event is | | | | | | | \" | | | | | | | OUT_OF_ | | | | | | | CREDIT\". | | +-----------+-----------+---+-----------+-----------+-----------+ | plmnId | PlmnIdNid | C | 0..1 | PLMN | | | | | | | I | | | | | | | dentifier | | | | | | | and, for | | | | | | | an SNPN, | | | | | | | also the | | | | | | | NID. It | | | | | | | shall be | | | | | | | present | | | | | | | when the | | | | | | | notified | | | | | | | event is | | | | | | | \"PL | | | | | | | MN_CHG\" | | | | | | | or, if | | | | | | | location | | | | | | | in | | | | | | | formation | | | | | | | is | | | | | | | required | | | | | | | but is | | | | | | | not | | | | | | | available | | | | | | | when the | | | | | | | notified | | | | | | | event is | | | | | | | \"ANI_ | | | | | | | REPORT\". | | | | | | | It shall | | | | | | | be | | | | | | | present | | | | | | | if | | | | | | | available | | | | | | | when the | | | | | | | notified | | | | | | | event is | | | | | | | \" | | | | | | | RAN_NAS\ | | | | | | | _CAUSE\". | | +-----------+-----------+---+-----------+-----------+-----------+ | q | array( | C | 1..N | QoS | | | ncReports | QosNotifi | | | not | | | | cationCon | | | ification | | | | trolInfo) | | | control | | | | | | | inf | | | | | | | ormation. | | | | | | | It shall | | | | | | | be | | | | | | | present | | | | | | | when the | | | | | | | notified | | | | | | | event is | | | | | | | \"QOS\ | | | | | | | _NOTIF\". | | +-----------+-----------+---+-----------+-----------+-----------+ | qosM | array(Qo | C | 1..N | QoS | QoSM | | onReports | sMonitori | | | M | onitoring | | | ngReport) | | | onitoring | | | | | | | reporting | | | | | | | inf | | | | | | | ormation. | | | | | | | It shall | | | | | | | be | | | | | | | present | | | | | | | when the | | | | | | | notified | | | | | | | event is | | | | | | | \" | | | | | | | QOS_MONI | | | | | | | TORING\". | | +-----------+-----------+---+-----------+-----------+-----------+ | ranNas | arr | C | 1..N | RAN-NAS | RAN- | | RelCauses | ay(RanNas | | | release | NAS-Cause | | | RelCause) | | | cause. It | | | | | | | shall be | | | | | | | present | | | | | | | if | | | | | | | available | | | | | | | when the | | | | | | | notified | | | | | | | event is | | | | | | | \" | | | | | | | RAN_NAS\ | | | | | | | _CAUSE\". | | +-----------+-----------+---+-----------+-----------+-----------+ | ratType | RatType | O | 0..1 | RAT type. | | | | | | | It shall | | | | | | | be | | | | | | | present, | | | | | | | if | | | | | | | ap | | | | | | | plicable, | | | | | | | when the | | | | | | | notified | | | | | | | event is | | | | | | | \"ACCES | | | | | | | S_TYPE_ | | | | | | | CHANGE\". | | +-----------+-----------+---+-----------+-----------+-----------+ | ueLoc | Use | O | 0..1 | E-UTRA, | NetLoc, | | | rLocation | | | NR, or | RAN- | | | | | | non-3GPP | NAS-Cause | | | | | | trusted | | | | | | | and | | | | | | | untrusted | | | | | | | access | | | | | | | user | | | | | | | location | | | | | | | inf | | | | | | | ormation. | | | | | | | \"n | | | | | | | 3gppTai\" | | | | | | | and | | | | | | | \" | | | | | | | n3IwfId\" | | | | | | | a | | | | | | | ttributes | | | | | | | within | | | | | | | the | | | | | | | \"N3gaL | | | | | | | ocation\" | | | | | | | data type | | | | | | | shall not | | | | | | | be | | | | | | | supplied. | | | | | | | It shall | | | | | | | be | | | | | | | present | | | | | | | if | | | | | | | required | | | | | | | and | | | | | | | available | | | | | | | when the | | | | | | | notified | | | | | | | event is | | | | | | | \"ANI_ | | | | | | | REPORT\". | | | | | | | It shall | | | | | | | be | | | | | | | present | | | | | | | if | | | | | | | available | | | | | | | when the | | | | | | | notified | | | | | | | event is | | | | | | | \" | | | | | | | RAN_NAS\ | | | | | | | _CAUSE\". | | | | | | | | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | ueLocTime | DateTime | O | 0..1 | Contains | NetLoc | | | | | | the NTP | | | | | | | time at | | | | | | | which the | | | | | | | UE was | | | | | | | last | | | | | | | known to | | | | | | | be in the | | | | | | | location. | | | | | | | | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | u | TimeZone | O | 0..1 | UE time | NetLoc, | | eTimeZone | | | | zone. | RAN- | | | | | | | NAS-Cause | | | | | | It shall | | | | | | | be | | | | | | | present | | | | | | | if | | | | | | | required | | | | | | | and | | | | | | | available | | | | | | | when the | | | | | | | notified | | | | | | | event is | | | | | | | \"ANI_ | | | | | | | REPORT\". | | | | | | | It shall | | | | | | | be | | | | | | | present | | | | | | | if | | | | | | | available | | | | | | | when the | | | | | | | notified | | | | | | | event is | | | | | | | \" | | | | | | | RAN_NAS\ | | | | | | | _CAUSE\". | | +-----------+-----------+---+-----------+-----------+-----------+ | usgRep | Accumul | C | 0..1 | Indicates | Spo | | | atedUsage | | | the | nsoredCon | | | | | | measured | nectivity | | | | | | volume | | | | | | | and/or | | | | | | | time for | | | | | | | sponsored | | | | | | | data | | | | | | | conn | | | | | | | ectivity. | | | | | | | It shall | | | | | | | be | | | | | | | present | | | | | | | when the | | | | | | | notified | | | | | | | event is | | | | | | | \"USAGE_ | | | | | | | REPORT\". | | +-----------+-----------+---+-----------+-----------+-----------+ | tsnBrid | BridgeM | O | 0..1 | T | TimeS | | geManCont | anagement | | | ransports | ensitiveN | | | Container | | | TSN | etworking | | | | | | bridge | | | | | | | m | | | | | | | anagement | | | | | | | inf | | | | | | | ormation. | | +-----------+-----------+---+-----------+-----------+-----------+ | tsnPortMa | PortM | O | 0..1 | T | TimeS | | nContDstt | anagement | | | ransports | ensitiveN | | | Container | | | TSN port | etworking | | | | | | m | | | | | | | anagement | | | | | | | in | | | | | | | formation | | | | | | | for the | | | | | | | DS-TT | | | | | | | port. | | +-----------+-----------+---+-----------+-----------+-----------+ | t | arr | O | 1..N | T | TimeS | | snPortMan | ay(PortMa | | | ransports | ensitiveN | | ContNwtts | nagementC | | | TSN port | etworking | | | ontainer) | | | m | | | | | | | anagement | | | | | | | in | | | | | | | formation | | | | | | | for one | | | | | | | or more | | | | | | | NW-TT | | | | | | | ports. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE 1: | | | | | | | Either | | | | | | | the | | | | | | | complete | | | | | | | resource | | | | | | | URI | | | | | | | included | | | | | | | in the | | | | | | | \"ev | | | | | | | SubsUri\" | | | | | | | attribute | | | | | | | or the | | | | | | | \"a | | | | | | | piSpecifi | | | | | | | cResource | | | | | | | UriPart\" | | | | | | | component | | | | | | | (see | | | | | | | subcl | | | | | | | ause 5.1) | | | | | | | of the | | | | | | | resource | | | | | | | URI | | | | | | | included | | | | | | | in the | | | | | | | \"ev | | | | | | | SubsUri\" | | | | | | | attribute | | | | | | | may be | | | | | | | used by | | | | | | | the NF | | | | | | | service | | | | | | | consumer | | | | | | | for the | | | | | | | ident | | | | | | | ification | | | | | | | of the | | | | | | | I | | | | | | | ndividual | | | | | | | Ap | | | | | | | plication | | | | | | | Session | | | | | | | Context | | | | | | | resource | | | | | | | related | | | | | | | to the | | | | | | | noti | | | | | | | fication. | | | | | | | | | | | | | | NOTE 2: | | | | | | | Whether | | | | | | | the | | | | | | | \"ueLoc\" | | | | | | | attribute | | | | | | | also | | | | | | | encodes | | | | | | | the age | | | | | | | of | | | | | | | location | | | | | | | is | | | | | | | imple | | | | | | | mentation | | | | | | | specific. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.10 Type AfEventSubscription
Table 5.6.2.10-1: Definition of type AfEventSubscription
* * *
Attribute name Data type P Cardinality Description Applicability event AfEvent
M 1 Subscribed Event.  
notifMethod AfNotifMethod O 0..1 If notifMethod is not supplied, the default
value \"EVENT_DETECTION\" applies.  
repPeriod DurationSec O 0..1 Indicates the time interval between successive
event notifications. It is supplied for notification method \"PERIODIC\".
EnhancedSubscriptionToNotification waitTime DurationSec O 0..1 Indicates the
minimum waiting time between subsequent reports. Only applicable when the
notification is set to \"EVENT_DETECTION\". EnhancedSubscriptionToNotification
* * *
#### 5.6.2.11 Type AfEventNotification
Table 5.6.2.11-1: Definition of type AfEventNotification
* * *
Attribute name Data type P Cardinality Description Applicability event AfEvent
M 1 Notified Event.  
flows array(Flows) O 1..N Affected Service Data Flows.
* * *
#### 5.6.2.12 Type TerminationInfo
Table 5.6.2.12-1: Definition of type TerminationInfo
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | termCause | Termina | M | 1 | Indicates | | | | tionCause | | | the cause | | | | | | | for | | | | | | | r | | | | | | | equesting | | | | | | | the | | | | | | | deletion | | | | | | | of the | | | | | | | I | | | | | | | ndividual | | | | | | | Ap | | | | | | | plication | | | | | | | Session | | | | | | | Context | | | | | | | resource. | | +-----------+-----------+---+-----------+-----------+-----------+ | resUri | Uri | M | 1 | I | | | | | | | dentifies | | | | | | | the | | | | | | | I | | | | | | | ndividual | | | | | | | Ap | | | | | | | plication | | | | | | | Session | | | | | | | Context | | | | | | | that | | | | | | | triggered | | | | | | | the | | | | | | | te | | | | | | | rmination | | | | | | | noti | | | | | | | fication. | | | | | | | | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: | | | | | | | Either | | | | | | | the | | | | | | | complete | | | | | | | resource | | | | | | | URI | | | | | | | included | | | | | | | in the | | | | | | | \ | | | | | | | "resUri\" | | | | | | | attribute | | | | | | | or the | | | | | | | \"a | | | | | | | piSpecifi | | | | | | | cResource | | | | | | | UriPart\" | | | | | | | component | | | | | | | (see | | | | | | | subcl | | | | | | | ause 5.1) | | | | | | | of the | | | | | | | resource | | | | | | | URI | | | | | | | included | | | | | | | in the | | | | | | | \ | | | | | | | "resUri\" | | | | | | | attribute | | | | | | | may be | | | | | | | used by | | | | | | | the NF | | | | | | | service | | | | | | | consumer | | | | | | | for the | | | | | | | ident | | | | | | | ification | | | | | | | of the | | | | | | | I | | | | | | | ndividual | | | | | | | Ap | | | | | | | plication | | | | | | | Session | | | | | | | Context | | | | | | | resource | | | | | | | related | | | | | | | to the | | | | | | | te | | | | | | | rmination | | | | | | | noti | | | | | | | fication. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.13 Type AfRoutingRequirement
Table 5.6.2.13-1: Definition of type AfRoutingRequirement
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | appReloc | boolean | O | 0..1 | I | Influen | | | | | | ndication | ceOnTraff | | | | | | of | icRouting | | | | | | ap | | | | | | | plication | | | | | | | r | | | | | | | elocation | | | | | | | pos | | | | | | | sibility. | | | | | | | | | | | | | | When it | | | | | | | is | | | | | | | included | | | | | | | and set | | | | | | | to | | | | | | | \"true\", | | | | | | | it | | | | | | | indicates | | | | | | | that the | | | | | | | ap | | | | | | | plication | | | | | | | cannot be | | | | | | | relocated | | | | | | | once a | | | | | | | location | | | | | | | of the | | | | | | | ap | | | | | | | plication | | | | | | | is | | | | | | | selected | | | | | | | by the | | | | | | | 5GC. The | | | | | | | default | | | | | | | value is | | | | | | | \ | | | | | | | "false\". | | +-----------+-----------+---+-----------+-----------+-----------+ | ro | arra | O | 1..N | A list of | Influen | | uteToLocs | y(RouteTo | | | traffic | ceOnTraff | | | Location) | | | routes to | icRouting | | | | | | app | | | | | | | lications | | | | | | | l | | | | | | | ocations. | | +-----------+-----------+---+-----------+-----------+-----------+ | spVal | Spatia | O | 0..1 | Indicates | Influen | | | lValidity | | | where the | ceOnTraff | | | | | | traffic | icRouting | | | | | | routing | | | | | | | req | | | | | | | uirements | | | | | | | apply. | | | | | | | The | | | | | | | absence | | | | | | | of this | | | | | | | attribute | | | | | | | indicates | | | | | | | no | | | | | | | spatial | | | | | | | rest | | | | | | | rictions. | | +-----------+-----------+---+-----------+-----------+-----------+ | tempVals | array | O | 1..N | Indicates | Influen | | | (Temporal | | | the time | ceOnTraff | | | Validity) | | | in | icRouting | | | | | | terval(s) | | | | | | | during | | | | | | | which the | | | | | | | AF | | | | | | | request | | | | | | | is to be | | | | | | | applied. | | +-----------+-----------+---+-----------+-----------+-----------+ | upP | UpPat | O | 0..1 | Sub | Influen | | athChgSub | hChgEvent | | | scription | ceOnTraff | | | | | | to UP | icRouting | | | | | | path | | | | | | | m | | | | | | | anagement | | | | | | | events. | | +-----------+-----------+---+-----------+-----------+-----------+ | addr | boolean | O | 0..1 | Indicates | URLLC | | PreserInd | | | | whether | | | | | | | UE IP | | | | | | | address | | | | | | | should be | | | | | | | p | | | | | | | reserved. | | | | | | | | | | | | | | This | | | | | | | attribute | | | | | | | shall set | | | | | | | to | | | | | | | \"true\" | | | | | | | if | | | | | | | p | | | | | | | reserved, | | | | | | | o | | | | | | | therwise, | | | | | | | set to | | | | | | | \ | | | | | | | "false\". | | | | | | | | | | | | | | Default | | | | | | | value is | | | | | | | false if | | | | | | | omitted. | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.14 Type ResourcesAllocationInfo
Table 5.6.2.14-1: Definition of type ResourcesAllocationInfo
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | mcReso | Me | C | 0..1 | Indicates | | | urcStatus | diaCompon | | | the | | | | entResour | | | status of | | | | cesStatus | | | the PCC | | | | | | | rule(s) | | | | | | | related | | | | | | | to the | | | | | | | media | | | | | | | c | | | | | | | omponents | | | | | | | i | | | | | | | dentified | | | | | | | by the | | | | | | | \"flows\" | | | | | | | a | | | | | | | ttribute. | | +-----------+-----------+---+-----------+-----------+-----------+ | flows | arr | C | 1..N | Ident | | | | ay(Flows) | | | ification | | | | | | | of the | | | | | | | flows. | | | | | | | | | | | | | | It shall | | | | | | | be | | | | | | | included | | | | | | | if | | | | | | | \ | | | | | | | "MediaCom | | | | | | | ponentVer | | | | | | | sioning\" | | | | | | | feature | | | | | | | is | | | | | | | s | | | | | | | upported. | | | | | | | | | | | | | | When | | | | | | | \ | | | | | | | "MediaCom | | | | | | | ponentVer | | | | | | | sioning\" | | | | | | | feature | | | | | | | is not | | | | | | | s | | | | | | | upported, | | | | | | | if no | | | | | | | flows are | | | | | | | provided, | | | | | | | the | | | | | | | status in | | | | | | | the | | | | | | | \ | | | | | | | "mcResour | | | | | | | cStatus\" | | | | | | | applies | | | | | | | for all | | | | | | | flows | | | | | | | within | | | | | | | the AF | | | | | | | session. | | +-----------+-----------+---+-----------+-----------+-----------+ | altSerReq | string | O | 0..1 | When | A | | | | | | present, | uthorizat | | | | | | indicates | ionWithRe | | | | | | the | quiredQoS | | | | | | al | | | | | | | ternative | | | | | | | service | | | | | | | re | | | | | | | quirement | | | | | | | the | | | | | | | NG-RAN | | | | | | | can | | | | | | | guarantee | | | | | | | for the | | | | | | | indicated | | | | | | | \ | | | | | | | "flows\". | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: The | | | | | | | \ | | | | | | | "mcResour | | | | | | | cStatus\" | | | | | | | attribute | | | | | | | shall be | | | | | | | included | | | | | | | if | | | | | | | A | | | | | | | uthorizat | | | | | | | ionWithRe | | | | | | | quiredQoS | | | | | | | feature | | | | | | | is not | | | | | | | s | | | | | | | upported. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.15 Type QosNotificationControlInfo
Table 5.6.2.15-1: Definition of type QosNotificationControlInfo
* * *
Attribute name Data type P Cardinality Description Applicability notifType
QosNotifType M 0..1 Indicates whether the GBR targets for the indicated SDFs
are \"NOT_GUARANTEED\" or \"GUARANTEED\" again.  
flows array(Flows) C 1..N Identification of the flows. It shall be included if
\"MediaComponentVersioning\" feature is supported. When
\"MediaComponentVersioning\" feature is not supported, if no flows are
provided, the notification in the \"notifType\" applies for all flows within
the AF session.  
altSerReq string O 0..1 Indicates the alternative service requirement the NG-
RAN can guarantee. AuthorizationWithRequiredQoS
* * *
#### 5.6.2.16 Type SpatialValidity
Table 5.6.2.16-1: Definition of type SpatialValidity
* * *
Attribute name Data type P Cardinality Description Applicability
presenceInfoList map(PresenceInfo) M 1..N Defines the presence information
provisioned by the AF. The \"presenceState\" attribute within the
\"PresenceInfo\" data type shall not be supplied. InfluenceOnTrafficRouting
* * *
#### 5.6.2.17 Type EthFlowDescription
Table 5.6.2.17-1: Definition of type EthFlowDescription
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | de | MacAddr48 | O | 0..1 | De | | | stMacAddr | | | | stination | | | | | | | MAC | | | | | | | address. | | +-----------+-----------+---+-----------+-----------+-----------+ | ethType | string | M | 1 | A | | | | | | | two-octet | | | | | | | string | | | | | | | that | | | | | | | r | | | | | | | epresents | | | | | | | the | | | | | | | E | | | | | | | thertype, | | | | | | | as | | | | | | | described | | | | | | | in | | | | | | | IEEE 802 | | | | | | | .3 [16] | | | | | | | and | | | | | | | IE | | | | | | | TF RFC 70 | | | | | | | 42 [18] | | | | | | | in | | | | | | | he | | | | | | | xadecimal | | | | | | | repres | | | | | | | entation. | | | | | | | | | | | | | | Each | | | | | | | character | | | | | | | in the | | | | | | | string | | | | | | | shall | | | | | | | take a | | | | | | | value of | | | | | | | \"0\" to | | | | | | | \"9\" or | | | | | | | \"A\" to | | | | | | | \"F\" and | | | | | | | shall | | | | | | | represent | | | | | | | 4 bits. | | | | | | | The most | | | | | | | si | | | | | | | gnificant | | | | | | | character | | | | | | | rep | | | | | | | resenting | | | | | | | the 4 | | | | | | | most | | | | | | | si | | | | | | | gnificant | | | | | | | bits of | | | | | | | the | | | | | | | ethType | | | | | | | shall | | | | | | | appear | | | | | | | first in | | | | | | | the | | | | | | | string, | | | | | | | and the | | | | | | | character | | | | | | | rep | | | | | | | resenting | | | | | | | the 4 | | | | | | | least | | | | | | | si | | | | | | | gnificant | | | | | | | bits of | | | | | | | the | | | | | | | ethType | | | | | | | shall | | | | | | | appear | | | | | | | last in | | | | | | | the | | | | | | | string. | | +-----------+-----------+---+-----------+-----------+-----------+ | fDesc | FlowDe | C | 0..1 | Contains | | | | scription | | | the flow | | | | | | | de | | | | | | | scription | | | | | | | for the | | | | | | | Uplink or | | | | | | | Downlink | | | | | | | IP flow. | | | | | | | It shall | | | | | | | be | | | | | | | present | | | | | | | when the | | | | | | | Ethertype | | | | | | | is IP. | | | | | | | (NOTE 3) | | +-----------+-----------+---+-----------+-----------+-----------+ | fDir | Flow | O | 0..1 | Contains | | | | Direction | | | the | | | | | | | packet | | | | | | | filter | | | | | | | d | | | | | | | irection. | | | | | | | Only the | | | | | | | \"D | | | | | | | OWNLINK\" | | | | | | | or | | | | | | | \ | | | | | | | "UPLINK\" | | | | | | | value is | | | | | | | ap | | | | | | | plicable. | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | sour | MacAddr48 | O | 0..1 | Source | | | ceMacAddr | | | | MAC | | | | | | | address. | | +-----------+-----------+---+-----------+-----------+-----------+ | vlanTags | arra | O | 1..2 | Cust | | | | y(string) | | | omer-VLAN | | | | | | | and/or | | | | | | | Ser | | | | | | | vice-VLAN | | | | | | | tags | | | | | | | c | | | | | | | ontaining | | | | | | | the VID, | | | | | | | PCP/DEI | | | | | | | fields as | | | | | | | defined | | | | | | | in | | | | | | | IEEE 802. | | | | | | | 1Q [17] | | | | | | | and | | | | | | | IET | | | | | | | F RFC 704 | | | | | | | 2 [18]. | | | | | | | The | | | | | | | fi | | | | | | | rst/lower | | | | | | | instance | | | | | | | in the | | | | | | | array | | | | | | | stands | | | | | | | for the | | | | | | | Cust | | | | | | | omer-VLAN | | | | | | | tag and | | | | | | | the | | | | | | | seco | | | | | | | nd/higher | | | | | | | instance | | | | | | | in the | | | | | | | array | | | | | | | stands | | | | | | | for the | | | | | | | Ser | | | | | | | vice-VLAN | | | | | | | tag. | | | | | | | | | | | | | | Each | | | | | | | field is | | | | | | | encoded | | | | | | | as a | | | | | | | two-octet | | | | | | | string in | | | | | | | he | | | | | | | xadecimal | | | | | | | repres | | | | | | | entation. | | | | | | | Each | | | | | | | character | | | | | | | in the | | | | | | | string | | | | | | | shall | | | | | | | take a | | | | | | | value of | | | | | | | \"0\" to | | | | | | | \"9\" or | | | | | | | \"A\" to | | | | | | | \"F\" and | | | | | | | shall | | | | | | | represent | | | | | | | 4 bits. | | | | | | | The most | | | | | | | si | | | | | | | gnificant | | | | | | | character | | | | | | | rep | | | | | | | resenting | | | | | | | the | | | | | | | PCP/DEI | | | | | | | field | | | | | | | shall | | | | | | | appear | | | | | | | first in | | | | | | | the | | | | | | | string, | | | | | | | followed | | | | | | | by | | | | | | | character | | | | | | | rep | | | | | | | resenting | | | | | | | the 4 | | | | | | | most | | | | | | | si | | | | | | | gnificant | | | | | | | bits of | | | | | | | the VID | | | | | | | field, | | | | | | | and the | | | | | | | character | | | | | | | rep | | | | | | | resenting | | | | | | | the 4 | | | | | | | least | | | | | | | si | | | | | | | gnificant | | | | | | | bits of | | | | | | | the VID | | | | | | | field | | | | | | | shall | | | | | | | appear | | | | | | | last in | | | | | | | the | | | | | | | string. | | | | | | | | | | | | | | If only | | | | | | | Ser | | | | | | | vice-VLAN | | | | | | | tag is | | | | | | | provided, | | | | | | | empty | | | | | | | string | | | | | | | for | | | | | | | Cust | | | | | | | omer-VLAN | | | | | | | tag shall | | | | | | | be | | | | | | | provided. | | +-----------+-----------+---+-----------+-----------+-----------+ | srcM | MacAddr48 | O | 0..1 | Source | MacAdd | | acAddrEnd | | | | MAC | ressRange | | | | | | address | | | | | | | end. If | | | | | | | this | | | | | | | attribute | | | | | | | is | | | | | | | present, | | | | | | | the | | | | | | | sour | | | | | | | ceMacAddr | | | | | | | attribute | | | | | | | specifies | | | | | | | the | | | | | | | source | | | | | | | MAC | | | | | | | address | | | | | | | start. | | | | | | | E.g. | | | | | | | srcM | | | | | | | acAddrEnd | | | | | | | with | | | | | | | value | | | | | | | 00-10-A4 | | | | | | | -23-3E-FE | | | | | | | and | | | | | | | sour | | | | | | | ceMacAddr | | | | | | | with | | | | | | | value | | | | | | | 00-10-A4 | | | | | | | -23-3E-02 | | | | | | | means all | | | | | | | MAC | | | | | | | addresses | | | | | | | from | | | | | | | 00-10-A4 | | | | | | | -23-3E-02 | | | | | | | up to and | | | | | | | including | | | | | | | 00-10-A4- | | | | | | | 23-3E-FE. | | +-----------+-----------+---+-----------+-----------+-----------+ | destM | MacAddr48 | O | 0..1 | De | MacAdd | | acAddrEnd | | | | stination | ressRange | | | | | | MAC | | | | | | | address | | | | | | | end. If | | | | | | | this | | | | | | | attribute | | | | | | | is | | | | | | | present, | | | | | | | the | | | | | | | de | | | | | | | stMacAddr | | | | | | | attribute | | | | | | | specifies | | | | | | | the | | | | | | | de | | | | | | | stination | | | | | | | MAC | | | | | | | address | | | | | | | start. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE 1: | | | | | | | The | | | | | | | \"srcMac | | | | | | | AddrEnd\" | | | | | | | attribute | | | | | | | may only | | | | | | | be | | | | | | | present | | | | | | | if the | | | | | | | \"source | | | | | | | MacAddr\" | | | | | | | attribute | | | | | | | is | | | | | | | present; | | | | | | | the | | | | | | | \"destMac | | | | | | | AddrEnd\" | | | | | | | attribute | | | | | | | may only | | | | | | | be | | | | | | | present | | | | | | | if the | | | | | | | \"dest | | | | | | | MacAddr\" | | | | | | | attribute | | | | | | | is | | | | | | | present. | | | | | | | | | | | | | | NOTE 2: | | | | | | | If the | | | | | | | \ | | | | | | | "UPLINK\" | | | | | | | is | | | | | | | included | | | | | | | within | | | | | | | the | | | | | | | \"fDir\" | | | | | | | a | | | | | | | ttribute, | | | | | | | the | | | | | | | \"source | | | | | | | MacAddr\" | | | | | | | attribute | | | | | | | and | | | | | | | \"srcMac | | | | | | | AddrEnd\" | | | | | | | attribute | | | | | | | (if | | | | | | | MacAdd | | | | | | | ressRange | | | | | | | feature | | | | | | | is | | | | | | | s | | | | | | | upported) | | | | | | | contain | | | | | | | the UE | | | | | | | address | | | | | | | and | | | | | | | \"dest | | | | | | | MacAddr\" | | | | | | | attribute | | | | | | | and | | | | | | | \"destMac | | | | | | | AddrEnd\" | | | | | | | attribute | | | | | | | (if | | | | | | | MacAdd | | | | | | | ressRange | | | | | | | feature | | | | | | | is | | | | | | | supporte | | | | | | | d)contain | | | | | | | the | | | | | | | remote | | | | | | | address; | | | | | | | otherwise | | | | | | | if the | | | | | | | \"D | | | | | | | OWNLINK\" | | | | | | | is | | | | | | | included | | | | | | | within | | | | | | | the | | | | | | | \"fDir\" | | | | | | | attribute | | | | | | | or the | | | | | | | \"fDir\" | | | | | | | attribute | | | | | | | is never | | | | | | | provided, | | | | | | | the | | | | | | | \"source | | | | | | | MacAddr\" | | | | | | | attribute | | | | | | | and | | | | | | | \"srcMac | | | | | | | AddrEnd\" | | | | | | | attribute | | | | | | | (if | | | | | | | MacAdd | | | | | | | ressRange | | | | | | | feature | | | | | | | is | | | | | | | s | | | | | | | upported) | | | | | | | contain | | | | | | | the | | | | | | | remote | | | | | | | address | | | | | | | and | | | | | | | \"dest | | | | | | | MacAddr\" | | | | | | | attribute | | | | | | | and | | | | | | | \"destMac | | | | | | | AddrEnd\" | | | | | | | attribute | | | | | | | (if | | | | | | | MacAdd | | | | | | | ressRange | | | | | | | feature | | | | | | | is | | | | | | | s | | | | | | | upported) | | | | | | | contain | | | | | | | the UE | | | | | | | address. | | | | | | | | | | | | | | NOTE 3: | | | | | | | The | | | | | | | direction | | | | | | | of the | | | | | | | \"fDesc\" | | | | | | | attribute | | | | | | | shall be | | | | | | | set to | | | | | | | \"in\" if | | | | | | | the | | | | | | | \ | | | | | | | "UPLINK\" | | | | | | | is | | | | | | | included | | | | | | | within | | | | | | | the | | | | | | | \"fDir\" | | | | | | | a | | | | | | | ttribute; | | | | | | | the | | | | | | | direction | | | | | | | of the | | | | | | | \"fDesc\" | | | | | | | attribute | | | | | | | shall be | | | | | | | set to | | | | | | | \"out\" | | | | | | | if the | | | | | | | \"D | | | | | | | OWNLINK\" | | | | | | | is | | | | | | | included | | | | | | | within | | | | | | | the | | | | | | | \"fDir\" | | | | | | | attribute | | | | | | | or the | | | | | | | \"fDir\" | | | | | | | attribute | | | | | | | is never | | | | | | | provided. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.18 Void
#### 5.6.2.19 Void
#### 5.6.2.20 Type AnGwAddress
Table 5.6.2.20-1: Definition of type AnGwAddress
* * *
Attribute name Data type P Cardinality Description Applicability anGwIpv4addr
Ipv4Addr O 0..1 Includes the IPv4 address of the access network gateway
control node.  
anGwIpv6addr Ipv6Addr O 0..1 Includes the IPv6 address of the access network
gateway control node.  
NOTE: At least one address of the access network gateway control node (the
IPv4 address or the IPv6 address or both if both addresses are available)
shall be included.
* * *
#### 5.6.2.21 Type Flows
Table 5.6.2.21-1: Definition of type Flows
* * *
Attribute name Data type P Cardinality Description Applicability contVers
array(ContentVersion) C 1..N Represents the content version of the content of
a media component. If \"MediaComponentVersioning\" feature is supported, the
content version shall be included if it was included when the corresponding
media component was provided or modified. MediaComponentVersioning fNums
array(integer) O 1..N Indicates the service data flows via their flow
identifier. If no flow identifier is supplied, the Flows data type refers to
all the flows matching the media component number.  
medCompN integer M 1 Identifies the media component number, and it contains
the ordinal number of the media component.
* * *
#### 5.6.2.22 Type TemporalValidity
Table 5.6.2.22-1: Definition of type TemporalValidity
* * *
Attribute name Data type P Cardinality Description Applicability startTime
DateTime O 0..1 Indicates the time from which the traffic routing requirements
start to apply. The absence of this attribute indicates the traffic routing
requirements apply immediately. InfluenceOnTrafficRouting stopTime DateTime O
0..1 Indicates the time when the traffic routing requirements cease to apply.
The absence of this attribute indicates the traffic routing requirements do
not cease at any time. InfluenceOnTrafficRouting
* * *
#### 5.6.2.23 Void
#### 5.6.2.24 Type AfRoutingRequirementRm
This data type is defined in the same way as the \"AfRoutingRequirement\" data
type, but:
\- with the OpenAPI \"nullable: true\" property;
\- the removable attribute \"spVal\" is defined with the data type
\"SpatialValidityRm\"; and
\- the removable attributes \"tempVals\", \"routeToLocs\" and
\"addrPreserInd\" are defined as nullable in the OpenAPI.
Table 5.6.2.24-1: Definition of type AfRoutingRequirementRm
* * *
Attribute name Data type P Cardinality Description Applicability appReloc
boolean O 0..1 Indication of application relocation possibility. When it is
set to \"true\", it indicates that the application cannot be relocated once a
location of the application is selected by the 5GC. InfluenceOnTrafficRouting
routeToLocs array(RouteToLocation) O 1..N A list of traffic routes to
applications locations. InfluenceOnTrafficRouting spVal SpatialValidityRm O
0..1 Indicates where the traffic routing requirements apply.
InfluenceOnTrafficRouting tempVals array(TemporalValidity) O 1..N Indicates
the time interval(s) during which the AF request is to be applied.
InfluenceOnTrafficRouting upPathChgSub UpPathChgEvent O 0..1 Subscription to
UP path management events. InfluenceOnTrafficRouting addrPreserInd boolean O
0..1 Indicates whether UE IP address should be preserved. URLLC
* * *
#### 5.6.2.25 Type EventsSubscReqDataRm
This data type is defined in the same way as the \"EventsSubscReqData\" data
type, but:
\- with the OpenAPI \"nullable: true\" property; and
\- the removable attribute \"usgThres\" is defined with the removable data
type \"UsageThresholdRm\"; and removable attribute \"qosMon\" is defined with
the removable data type \"QosMonitoringInformationRm\".
Table 5.6.2.25-1: Definition of type EventsSubscReqDataRm
* * *
Attribute name Data type P Cardinality Description Applicability events
array(AfEventSubscription) M 1..N Subscribed Events.  
notifUri Uri O 0..1 Notification URI.  
reqQosMonParams array(RequestedQosMonitoringParameter) O 1..N Indicates the UL
packet delay, DL packet delay and/or round trip packet delay between the UE
and the UPF is to be monitored when the QoS Monitoring for URLLC is enabled
for the service data flow. QoSMonitoring qosMon QosMonitoringInformationRm O
0..1 Qos Monitoring information. It can be present when the event
\"QOS_MONITORING\" is subscribed. QoSMonitoring reqAnis
array(RequiredAccessInfo) C 1..N Represents the required access network
information. It shall be present when the event \"ANI_REPORT\" is subscribed.
(NOTE) NetLoc usgThres UsageThresholdRm O 0..1 Includes the volume and/or time
thresholds for sponsored data connectivity. SponsoredConnectivity notifCorreId
string O 0..1 It is used to set the value of Notification Correlation ID in
the corresponding notification. EnhancedSubscriptionToNotification NOTE:
\"ANI_REPORT\" is the one-time reported event and thus the attribute
\"reqAnis\" is not defined as removable attribute (i.e. with the removable
data type \"RequiredAccessInfoRm\"). Once the access network information is
reported to the AF the subscription to this event is automatically terminated
in the PCF and the related information is removed.
* * *
#### 5.6.2.26 Type MediaComponentRm
This data type is defined in the same way as the \"MediaComponent\" data type,
but:
\- with the OpenAPI \"nullable: true\" property; and
\- the removable attributes \"afRoutReq\" is defined with the removable data
type \"AfRoutingRequirementRm\"; \"maxPacketLossRateDl\" and
\"maxPacketLossRateUl\" are defined with the removable data type
\"PacketLossRateRm\"; \"medSubComps\" is defined with the removable data type
\"MediaSubComponentRm\"; \"preemptCap\" is defined with the removable data
type \"PreemptionCapabilityRm\"; \"preemptVuln\" is defined with the removable
data type \"PreemptionVulnerabilityRm\"; \"marBwDl\", \"marBwUl\",
\"minDesBwDl\", \"minDesBwUl\", \"mirBwDl\", \"mirBwUl\", \"maxSuppBwDl\",
\"maxSuppBwUl\", \"rrBw\", \"rsBw\" are defined with the removable data type
\"BitRateRm\"; \"sharingKeyDl\", \"sharingKeyUl\", and \"tsnQos\" are defined
with the removable data types , \"Uint32Rm\" and \"TsnQosContainerRm\"; the
removable attributes \"desMaxLatency\" and \"desMaxLoss\" are defined with the
removable data type \"FloatRm\"; the removable attribute \"flusId\" is defined
as nullable in the OpenAPI.
\- the removable attributes \"qosReference\" and \"altSerReqs\" are defined as
nullable.
Table 5.6.2.26-1: Definition of type MediaComponentRm
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | afAppId | AfAppId | O | 0..1 | Contains | | | | | | | in | | | | | | | formation | | | | | | | that | | | | | | | i | | | | | | | dentifies | | | | | | | the | | | | | | | p | | | | | | | articular | | | | | | | service | | | | | | | the AF | | | | | | | session | | | | | | | belongs | | | | | | | to. | | +-----------+-----------+---+-----------+-----------+-----------+ | afRoutReq | AfRo | O | 0..1 | Indicates | Influen | | | utingRequ | | | the AF | ceOnTraff | | | irementRm | | | traffic | icRouting | | | | | | routing | | | | | | | requ | | | | | | | irements. | | +-----------+-----------+---+-----------+-----------+-----------+ | qos | string | O | 0..1 | I | A | | Reference | | | | dentifies | uthorizat | | | | | | a | ionWithRe | | | | | | pr | quiredQoS | | | | | | e-defined | | | | | | | QoS | | | | | | | inf | | | | | | | ormation. | | +-----------+-----------+---+-----------+-----------+-----------+ | a | arra | O | 1..N | Ordered | A | | ltSerReqs | y(string) | | | list of | uthorizat | | | | | | al | ionWithRe | | | | | | ternative | quiredQoS | | | | | | service | | | | | | | requ | | | | | | | irements. | | | | | | | The lower | | | | | | | the index | | | | | | | of the | | | | | | | array for | | | | | | | a given | | | | | | | entry, | | | | | | | the | | | | | | | higher | | | | | | | the | | | | | | | priority. | | +-----------+-----------+---+-----------+-----------+-----------+ | d | boolean | O | 0..1 | Indicates | Dis | | isUeNotif | | | | to | ableUENot | | | | | | disable | ification | | | | | | QoS flow | | | | | | | p | | | | | | | arameters | | | | | | | s | | | | | | | ignalling | | | | | | | to the UE | | | | | | | when the | | | | | | | SMF is | | | | | | | notified | | | | | | | by the | | | | | | | NG-RAN of | | | | | | | changes | | | | | | | in the | | | | | | | fulfilled | | | | | | | QoS | | | | | | | situation | | | | | | | when it | | | | | | | is | | | | | | | included | | | | | | | and set | | | | | | | to | | | | | | | \"true\". | | | | | | | The | | | | | | | fulfilled | | | | | | | situation | | | | | | | is either | | | | | | | the QoS | | | | | | | profile | | | | | | | or an | | | | | | | Al | | | | | | | ternative | | | | | | | QoS | | | | | | | Profile. | | | | | | | The | | | | | | | default | | | | | | | value | | | | | | | \"false\" | | | | | | | shall | | | | | | | apply, if | | | | | | | the | | | | | | | attribute | | | | | | | is not | | | | | | | present | | | | | | | and has | | | | | | | not been | | | | | | | supplied | | | | | | | pr | | | | | | | eviously. | | +-----------+-----------+---+-----------+-----------+-----------+ | contVer | Conte | O | 0..1 | R | MediaC | | | ntVersion | | | epresents | omponentV | | | | | | the | ersioning | | | | | | content | | | | | | | version | | | | | | | of a | | | | | | | media | | | | | | | c | | | | | | | omponent. | | +-----------+-----------+---+-----------+-----------+-----------+ | desM | FloatRm | O | 0..1 | Indicates | FLUS, | | axLatency | | | | a maximum | QoSHint | | | | | | desirable | | | | | | | transport | | | | | | | level | | | | | | | packet | | | | | | | latency | | | | | | | in | | | | | | | mill | | | | | | | iseconds. | | +-----------+-----------+---+-----------+-----------+-----------+ | d | FloatRm | O | 0..1 | Indicates | FLUS, | | esMaxLoss | | | | the | QoSHint | | | | | | maximum | | | | | | | desirable | | | | | | | transport | | | | | | | level | | | | | | | packet | | | | | | | loss rate | | | | | | | in | | | | | | | percent | | | | | | | (without | | | | | | | \"%\" | | | | | | | sign). | | +-----------+-----------+---+-----------+-----------+-----------+ | flusId | string | O | 0..1 | Indicates | FLUS | | | | | | that the | | | | | | | media | | | | | | | component | | | | | | | is used | | | | | | | for FLUS | | | | | | | media. | | | | | | | | | | | | | | It is | | | | | | | derived | | | | | | | from the | | | | | | | media | | | | | | | level | | | | | | | attribute | | | | | | | \"a | | | | | | | =label:\" | | | | | | | (see | | | | | | | IET | | | | | | | F RFC 457 | | | | | | | 4 [50]) | | | | | | | obtained | | | | | | | from the | | | | | | | SDP body. | | | | | | | It | | | | | | | contains | | | | | | | the | | | | | | | string | | | | | | | after | | | | | | | \"a | | | | | | | =label:\" | | | | | | | starting | | | | | | | with | | | | | | | \"flus\" | | | | | | | and may | | | | | | | be | | | | | | | followed | | | | | | | by more | | | | | | | c | | | | | | | haracters | | | | | | | as | | | | | | | described | | | | | | | in | | | | | | | 3GPP | | | | | | | TS 26.23 | | | | | | | 8 [51]. | | +-----------+-----------+---+-----------+-----------+-----------+ | m | PacketL | O | 0..1 | Indicates | CHEM | | axPacketL | ossRateRm | | | the | | | ossRateDl | | | | downlink | | | | | | | maximum | | | | | | | rate for | | | | | | | lost | | | | | | | packets | | | | | | | that can | | | | | | | be | | | | | | | tolerated | | | | | | | for the | | | | | | | service | | | | | | | data | | | | | | | flow. | | +-----------+-----------+---+-----------+-----------+-----------+ | m | PacketL | O | 0..1 | Indicates | CHEM | | axPacketL | ossRateRm | | | the | | | ossRateUl | | | | uplink | | | | | | | maximum | | | | | | | rate for | | | | | | | lost | | | | | | | packets | | | | | | | that can | | | | | | | be | | | | | | | tolerated | | | | | | | for the | | | | | | | service | | | | | | | data | | | | | | | flow. | | +-----------+-----------+---+-----------+-----------+-----------+ | medCompN | integer | M | 1 | I | | | | | | | dentifies | | | | | | | the media | | | | | | | component | | | | | | | number, | | | | | | | and it | | | | | | | contains | | | | | | | the | | | | | | | ordinal | | | | | | | number of | | | | | | | the media | | | | | | | c | | | | | | | omponent. | | +-----------+-----------+---+-----------+-----------+-----------+ | me | map(Me | O | 1..N | Contains | | | dSubComps | diaSubCom | | | the | | | | ponentRm) | | | requested | | | | | | | bitrate | | | | | | | and | | | | | | | filters | | | | | | | for the | | | | | | | set of | | | | | | | service | | | | | | | data | | | | | | | flows | | | | | | | i | | | | | | | dentified | | | | | | | by their | | | | | | | common | | | | | | | flow | | | | | | | id | | | | | | | entifier. | | | | | | | The key | | | | | | | of the | | | | | | | map is | | | | | | | the | | | | | | | attribute | | | | | | | \"fNum\". | | +-----------+-----------+---+-----------+-----------+-----------+ | medType | MediaType | O | 0..1 | Indicates | | | | | | | the media | | | | | | | type of | | | | | | | the | | | | | | | service. | | +-----------+-----------+---+-----------+-----------+-----------+ | marBwUl | BitRateRm | O | 0..1 | Maximum | | | | | | | requested | | | | | | | bandwidth | | | | | | | for the | | | | | | | Uplink. | | +-----------+-----------+---+-----------+-----------+-----------+ | marBwDl | BitRateRm | O | 0..1 | Maximum | | | | | | | requested | | | | | | | bandwidth | | | | | | | for the | | | | | | | Downlink. | | +-----------+-----------+---+-----------+-----------+-----------+ | ma | BitRateRm | O | 0..1 | Maximum | IMS_SBI | | xSuppBwDl | | | | supported | | | | | | | bandwidth | | | | | | | for the | | | | | | | Downlink. | | +-----------+-----------+---+-----------+-----------+-----------+ | ma | BitRateRm | O | 0..1 | Maximum | IMS_SBI | | xSuppBwUl | | | | supported | | | | | | | bandwidth | | | | | | | for the | | | | | | | Uplink. | | +-----------+-----------+---+-----------+-----------+-----------+ | m | BitRateRm | O | 0..1 | Minimum | IMS_SBI | | inDesBwDl | | | | desired | | | | | | | bandwidth | | | | | | | for the | | | | | | | Downlink. | | +-----------+-----------+---+-----------+-----------+-----------+ | m | BitRateRm | O | 0..1 | Minimum | IMS_SBI | | inDesBwUl | | | | desired | | | | | | | bandwidth | | | | | | | for the | | | | | | | Uplink. | | +-----------+-----------+---+-----------+-----------+-----------+ | mirBwUl | BitRateRm | O | 0..1 | Minimum | | | | | | | requested | | | | | | | bandwidth | | | | | | | for the | | | | | | | Uplink. | | +-----------+-----------+---+-----------+-----------+-----------+ | mirBwDl | BitRateRm | O | 0..1 | Minimum | | | | | | | requested | | | | | | | bandwidth | | | | | | | for the | | | | | | | Downlink. | | +-----------+-----------+---+-----------+-----------+-----------+ | fStatus | F | O | 0..1 | Indicates | | | | lowStatus | | | whether | | | | | | | the | | | | | | | status of | | | | | | | the | | | | | | | service | | | | | | | data | | | | | | | flows is | | | | | | | enabled, | | | | | | | or | | | | | | | disabled. | | +-----------+-----------+---+-----------+-----------+-----------+ | p | Pree | O | 0..1 | Defines | MCPTT-P | | reemptCap | mptionCap | | | whether | reemption | | | abilityRm | | | the media | | | | | | | flow may | | | | | | | get | | | | | | | resources | | | | | | | that were | | | | | | | already | | | | | | | assigned | | | | | | | to | | | | | | | another | | | | | | | media | | | | | | | flow with | | | | | | | a lower | | | | | | | priority | | | | | | | level. | | +-----------+-----------+---+-----------+-----------+-----------+ | pr | Preempt | O | 0..1 | Defines | MCPTT-P | | eemptVuln | ionVulner | | | whether | reemption | | | abilityRm | | | the media | | | | | | | flow may | | | | | | | lose the | | | | | | | resources | | | | | | | assigned | | | | | | | to it in | | | | | | | order to | | | | | | | admit a | | | | | | | media | | | | | | | flow with | | | | | | | higher | | | | | | | priority | | | | | | | level. | | +-----------+-----------+---+-----------+-----------+-----------+ | prioS | Priori | O | 0..1 | Indicates | Priori | | haringInd | tySharing | | | that the | tySharing | | | Indicator | | | media | | | | | | | flow is | | | | | | | allowed | | | | | | | to use | | | | | | | the same | | | | | | | ARP as | | | | | | | media | | | | | | | flows | | | | | | | belonging | | | | | | | to other | | | | | | | \"I | | | | | | | ndividual | | | | | | | Ap | | | | | | | plication | | | | | | | Session | | | | | | | Context\" | | | | | | | resources | | | | | | | bound to | | | | | | | the same | | | | | | | PDU | | | | | | | session. | | +-----------+-----------+---+-----------+-----------+-----------+ | resPrio | Reser | O | 0..1 | Indicates | | | | vPriority | | | the | | | | | | | re | | | | | | | servation | | | | | | | priority. | | +-----------+-----------+---+-----------+-----------+-----------+ | rrBw | BitRateRm | O | 0..1 | Indicates | IMS_SBI | | | | | | the | | | | | | | maximum | | | | | | | required | | | | | | | bandwidth | | | | | | | in bits | | | | | | | per | | | | | | | second | | | | | | | for RTCP | | | | | | | receiver | | | | | | | reports | | | | | | | within | | | | | | | the | | | | | | | session | | | | | | | component | | | | | | | as | | | | | | | specified | | | | | | | in | | | | | | | IET | | | | | | | F RFC 355 | | | | | | | 6 [37]. | | | | | | | The | | | | | | | bandwidth | | | | | | | contains | | | | | | | all the | | | | | | | overhead | | | | | | | coming | | | | | | | from the | | | | | | | IP-layer | | | | | | | and the | | | | | | | layers | | | | | | | above, | | | | | | | i.e. IP, | | | | | | | UDP and | | | | | | | RTCP. | | +-----------+-----------+---+-----------+-----------+-----------+ | rsBw | BitRateRm | O | 0..1 | Indicates | IMS_SBI | | | | | | the | | | | | | | maximum | | | | | | | required | | | | | | | bandwidth | | | | | | | in bits | | | | | | | per | | | | | | | second | | | | | | | for RTCP | | | | | | | sender | | | | | | | reports | | | | | | | within | | | | | | | the | | | | | | | session | | | | | | | component | | | | | | | as | | | | | | | specified | | | | | | | in | | | | | | | IET | | | | | | | F RFC 355 | | | | | | | 6 [37]. | | | | | | | The | | | | | | | bandwidth | | | | | | | contains | | | | | | | all the | | | | | | | overhead | | | | | | | coming | | | | | | | from the | | | | | | | IP-layer | | | | | | | and the | | | | | | | layers | | | | | | | above, | | | | | | | i.e. IP, | | | | | | | UDP and | | | | | | | RTCP. | | +-----------+-----------+---+-----------+-----------+-----------+ | codecs | array(C | O | 1..2 | Indicates | | | | odecData) | | | the codec | | | | | | | data. | | +-----------+-----------+---+-----------+-----------+-----------+ | sha | Uint32Rm | O | 0..1 | I | Resour | | ringKeyDl | | | | dentifies | ceSharing | | | | | | which | | | | | | | media | | | | | | | c | | | | | | | omponents | | | | | | | share | | | | | | | resources | | | | | | | in the | | | | | | | downlink | | | | | | | d | | | | | | | irection. | | | | | | | | | | | | | | If | | | | | | | resource | | | | | | | sharing | | | | | | | applies | | | | | | | between | | | | | | | media | | | | | | | c | | | | | | | omponents | | | | | | | across | | | | | | | \"I | | | | | | | ndividual | | | | | | | Ap | | | | | | | plication | | | | | | | Session | | | | | | | Context\" | | | | | | | resources | | | | | | | for the | | | | | | | same PDU | | | | | | | session, | | | | | | | the same | | | | | | | value of | | | | | | | the | | | | | | | \"shari | | | | | | | ngKeyDl\" | | | | | | | attribute | | | | | | | shall be | | | | | | | used. If | | | | | | | resource | | | | | | | sharing | | | | | | | does not | | | | | | | apply | | | | | | | among | | | | | | | media | | | | | | | c | | | | | | | omponents | | | | | | | across | | | | | | | \"I | | | | | | | ndividual | | | | | | | Ap | | | | | | | plication | | | | | | | Session | | | | | | | Context\" | | | | | | | resources | | | | | | | for the | | | | | | | same PDU | | | | | | | session, | | | | | | | a | | | | | | | different | | | | | | | value for | | | | | | | the | | | | | | | \"shari | | | | | | | ngKeyDl\" | | | | | | | attribute | | | | | | | shall be | | | | | | | used. | | | | | | | | | | | | | | If | | | | | | | resource | | | | | | | sharing | | | | | | | does no | | | | | | | longer | | | | | | | apply for | | | | | | | this | | | | | | | media | | | | | | | c | | | | | | | omponent, | | | | | | | the | | | | | | | \"shari | | | | | | | ngKeyDl\" | | | | | | | attribute | | | | | | | shall be | | | | | | | set to | | | | | | | \"null\". | | +-----------+-----------+---+-----------+-----------+-----------+ | sha | Uint32Rm | O | 0..1 | I | Resour | | ringKeyUl | | | | dentifies | ceSharing | | | | | | which | | | | | | | media | | | | | | | c | | | | | | | omponents | | | | | | | share | | | | | | | resources | | | | | | | in the | | | | | | | uplink | | | | | | | d | | | | | | | irection. | | | | | | | | | | | | | | If | | | | | | | resource | | | | | | | sharing | | | | | | | applies | | | | | | | between | | | | | | | media | | | | | | | c | | | | | | | omponents | | | | | | | across | | | | | | | \"I | | | | | | | ndividual | | | | | | | Ap | | | | | | | plication | | | | | | | Session | | | | | | | Context\" | | | | | | | resources | | | | | | | for the | | | | | | | same PDU | | | | | | | session, | | | | | | | the same | | | | | | | value of | | | | | | | the | | | | | | | \"shari | | | | | | | ngKeyUl\" | | | | | | | attribute | | | | | | | shall be | | | | | | | used. If | | | | | | | resource | | | | | | | sharing | | | | | | | does not | | | | | | | apply | | | | | | | among | | | | | | | media | | | | | | | c | | | | | | | omponents | | | | | | | across | | | | | | | \"I | | | | | | | ndividual | | | | | | | Ap | | | | | | | plication | | | | | | | Session | | | | | | | Context\" | | | | | | | resources | | | | | | | for the | | | | | | | same PDU | | | | | | | session, | | | | | | | a | | | | | | | different | | | | | | | value for | | | | | | | the | | | | | | | \"shari | | | | | | | ngKeyUl\" | | | | | | | attribute | | | | | | | shall be | | | | | | | used. | | | | | | | | | | | | | | If | | | | | | | resource | | | | | | | sharing | | | | | | | does no | | | | | | | longer | | | | | | | apply for | | | | | | | this | | | | | | | media | | | | | | | c | | | | | | | omponent, | | | | | | | the | | | | | | | \"shari | | | | | | | ngKeyUl\" | | | | | | | attribute | | | | | | | shall be | | | | | | | set to | | | | | | | \"null\". | | +-----------+-----------+---+-----------+-----------+-----------+ | tsnQos | TsnQoSCo | O | 0..1 | T | TimeS | | | ntainerRm | | | ransports | ensitiveN | | | | | | QoS | etworking | | | | | | p | | | | | | | arameters | | | | | | | for TSC | | | | | | | traffic. | | +-----------+-----------+---+-----------+-----------+-----------+ | tsc | T | O | 0..1 | T | TimeS | | aiInputUl | scaiInput | | | ransports | ensitiveN | | | Container | | | TSCAI | etworking | | | | | | input | | | | | | | p | | | | | | | arameters | | | | | | | for TSC | | | | | | | traffic | | | | | | | at the | | | | | | | ingress | | | | | | | interface | | | | | | | of the | | | | | | | DS-TT/UE | | | | | | | (uplink | | | | | | | flow | | | | | | | di | | | | | | | rection). | | +-----------+-----------+---+-----------+-----------+-----------+ | tsc | T | O | 0..1 | T | TimeS | | aiInputDl | scaiInput | | | ransports | ensitiveN | | | Container | | | TSCAI | etworking | | | | | | input | | | | | | | p | | | | | | | arameters | | | | | | | for TSC | | | | | | | traffic | | | | | | | at the | | | | | | | ingress | | | | | | | of the | | | | | | | NW-TT | | | | | | | (downlink | | | | | | | flow | | | | | | | di | | | | | | | rection). | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.27 Type MediaSubComponentRm
This data type is defined in the same way as the \"MediaSubComponent\" data
type, but:
\- with the OpenAPI \"nullable: true\" property;
\- the removable attributes \"marBwDl\", \"marBwUl\", defined with the
removable data type \"BitRateRm\"; the removable attribute \"tosTrCl\",
defined with the removable data type \"TosTrafficClassRm\"; and
\- the removable attributes \"ethfDescs\" and \"fDescs\" are defined as
nullable in the OpenAPI.
Table 5.6.2.27-1: Definition of type MediaSubComponentRm
* * *
Attribute name Data type P Cardinality Description Applicability afSigProtocol
AfSigProtocol O 0..1 Indicates the protocol used for signalling between the UE
and the AF. It may be included only if the \"flowUsage\" attribute is set to
the value \"AF_SIGNALLING\". ProvAFsignalFlow ethfDescs
array(EthFlowDescription) O 1..2 Contains the flow description for the Uplink
and/or Downlink Ethernet flows.  
fNum integer M 1 Identifies the ordinal number of the IP flow.  
fDescs array(FlowDescription) O 1..2 Contains the flow description for the
Uplink and/or Downlink IP flows.  
fStatus FlowStatus O 0..1 Indicates whether the status of the service data
flows is enabled or disabled.  
flowUsage FlowUsage O 0..1 Flow usage of the flows (e.g. RTCP, AF signalling).  
marBwUl BitRateRm O 0..1 Maximum requested bandwidth for the Uplink.  
marBwDl BitRateRm O 0..1 Maximum requested bandwidth for the Downlink.  
tosTrCl TosTrafficClassRm O 0..1 Type of Service or Traffic Class.
* * *
#### 5.6.2.28 Type SpatialValidityRm
This data type is defined in the same way as the \"SpatialValidity\" data
type, but with the OpenAPI \"nullable: true\" property.
#### 5.6.2.29 Type ExtendedProblemDetails
This data type is the \"ProblemDetails\" data type defined in 3GPP TS 29.571
[12] but extended with the attribute \"acceptableServInfo\" of data type
\"AcceptableServiceInfo\".
Table 5.6.2.29-1: Definition of type ExtendedProblemDetails
* * *
Attribute name Data type P Cardinality Description Applicability
acceptableServInfo AcceptableServiceInfo O 0..1 Describes information related
to the acceptable service information, i.e., the maximum acceptable bandwidth
for an AF session and/or for specific media components.  
NOTE: ExtendedProblemDetails data type also contains all the properties
defined for ProblemDetails data type in 3GPP TS 29.571[12].
* * *
#### 5.6.2.30 Type AcceptableServiceInfo
Table 5.6.2.30-1: Definition of type AcceptableServiceInfo
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | accB | m | O | 1..N | Indicates | | | wMedComps | ap(MediaC | | | the | | | | omponent) | | | maximum | | | | | | | bandwidth | | | | | | | that | | | | | | | shall be | | | | | | | a | | | | | | | uthorized | | | | | | | by the | | | | | | | PCF for | | | | | | | each | | | | | | | media | | | | | | | component | | | | | | | of the | | | | | | | map. | | | | | | | | | | | | | | Each | | | | | | | media | | | | | | | component | | | | | | | of the | | | | | | | map shall | | | | | | | only | | | | | | | include | | | | | | | the | | | | | | | \"m | | | | | | | edCompN\" | | | | | | | attribute | | | | | | | and the | | | | | | | \" | | | | | | | marBwDl\" | | | | | | | and/or | | | | | | | \" | | | | | | | marBwUl\" | | | | | | | a | | | | | | | ttributes | | | | | | | i | | | | | | | ndicating | | | | | | | the | | | | | | | maximum | | | | | | | a | | | | | | | cceptable | | | | | | | b | | | | | | | andwidth. | | | | | | | | | | | | | | The key | | | | | | | of the | | | | | | | map is | | | | | | | the media | | | | | | | component | | | | | | | number. | | +-----------+-----------+---+-----------+-----------+-----------+ | marBwUl | BitRate | O | 0..1 | Maximum | | | | | | | a | | | | | | | cceptable | | | | | | | bandwidth | | | | | | | for the | | | | | | | Uplink | | | | | | | for the | | | | | | | AF | | | | | | | session. | | +-----------+-----------+---+-----------+-----------+-----------+ | marBwDl | BitRate | O | 0..1 | Maximum | | | | | | | a | | | | | | | cceptable | | | | | | | bandwidth | | | | | | | for the | | | | | | | Downlink | | | | | | | for the | | | | | | | AF | | | | | | | session. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: | | | | | | | When the | | | | | | | a | | | | | | | cceptable | | | | | | | bandwidth | | | | | | | applies | | | | | | | to one or | | | | | | | more | | | | | | | media | | | | | | | co | | | | | | | mponents, | | | | | | | only the | | | | | | | \"accBwM | | | | | | | edComps\" | | | | | | | attribute | | | | | | | shall be | | | | | | | provided. | | | | | | | When the | | | | | | | a | | | | | | | cceptable | | | | | | | bandwidth | | | | | | | applies | | | | | | | to the | | | | | | | whole AF | | | | | | | session, | | | | | | | only the | | | | | | | \" | | | | | | | marBwDl\" | | | | | | | and | | | | | | | \" | | | | | | | marBwUl\" | | | | | | | a | | | | | | | ttributes | | | | | | | shall be | | | | | | | present. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.31 Type UeIdentityInfo
Table 5.6.2.31-1: Definition of type UeIdentityInfo
* * *
Attribute name Data type P Cardinality Description Applicability gpsi Gpsi O
0..1 Represents the GPSI.  
pei Pei O 0..1 Represents the PEI.  
supi Supi O 0..1 Represents the SUPI.  
NOTE: At least one of the \"gpsi\", \"supi\" and \"pei\" attributes shall be
present. More than one attribute may be present simultaneously.
* * *
#### 5.6.2.32 Type AccessNetChargingIdentifier
Table 5.6.2.32-1: Definition of type AccessNetChargingIdentifier
* * *
Attribute name Data type P Cardinality Description Applicability
accNetChaIdValue ChargingId M 1 Contains a charging identifier.  
flows array(Flows) O 1..N Identifications of the flows transported within the
corresponding QoS flow. If no flows are provided, the charging identifier
applies for all flows within the AF session.
* * *
#### 5.6.2.33 Type OutOfCreditInformation
Table 5.6.2.33-1: Definition of type OutOfCreditInformation
* * *
Attribute name Data type P Cardinality Description Applicability finUnitAct
FinalUnitAction M 1 Indicates the termination action to be taken when the
user\'s account cannot cover the service cost.  
flows array(Flows) O 1..N Identifications of the flows without available
credit. If no flows are provided, the termination action in \"finUnitAct\"
attribute applies for all flows within the AF session.
* * *
#### 5.6.2.34 Type QosMonitoringInformation
Table 5.6.2.34-1: Definition of type QosMonitoringInformation
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | re | integer | O | 0..1 | Indicates | | | pThreshDl | | | | the | | | | | | | threshold | | | | | | | in units | | | | | | | of | | | | | | | mil | | | | | | | liseconds | | | | | | | for DL | | | | | | | packet | | | | | | | delay. | | | | | | | Only | | | | | | | a | | | | | | | pplicable | | | | | | | when the | | | | | | | \"noti | | | | | | | fMethod\" | | | | | | | attribute | | | | | | | is not | | | | | | | supplied | | | | | | | or the | | | | | | | \"noti | | | | | | | fMethod\" | | | | | | | is | | | | | | | supplied | | | | | | | and set | | | | | | | to | | | | | | | \"EVENT_ | | | | | | | DETECTION | | | | | | | \". | | | | | | | | | | | | | | Minimum = | | | | | | | 0. | | +-----------+-----------+---+-----------+-----------+-----------+ | re | integer | O | 0..1 | Indicates | | | pThreshUl | | | | the | | | | | | | threshold | | | | | | | in units | | | | | | | of | | | | | | | mil | | | | | | | liseconds | | | | | | | for UL | | | | | | | packet | | | | | | | delay. | | | | | | | Only | | | | | | | a | | | | | | | pplicable | | | | | | | when the | | | | | | | \"noti | | | | | | | fMethod\" | | | | | | | attribute | | | | | | | is not | | | | | | | supplied | | | | | | | or the | | | | | | | \"noti | | | | | | | fMethod\" | | | | | | | is | | | | | | | supplied | | | | | | | and set | | | | | | | to | | | | | | | \"E | | | | | | | VENT_DET | | | | | | | ECTION\". | | | | | | | | | | | | | | Minimum = | | | | | | | 0. | | +-----------+-----------+---+-----------+-----------+-----------+ | re | integer | O | 0..1 | Indicates | | | pThreshRp | | | | the | | | | | | | threshold | | | | | | | in units | | | | | | | of | | | | | | | mil | | | | | | | liseconds | | | | | | | for round | | | | | | | trip | | | | | | | packet | | | | | | | delay. | | | | | | | Only | | | | | | | a | | | | | | | pplicable | | | | | | | when the | | | | | | | \"noti | | | | | | | fMethod\" | | | | | | | attribute | | | | | | | is not | | | | | | | supplied | | | | | | | or the | | | | | | | \"noti | | | | | | | fMethod\" | | | | | | | is | | | | | | | supplied | | | | | | | and set | | | | | | | to | | | | | | | \"E | | | | | | | VENT_DET | | | | | | | ECTION\". | | | | | | | | | | | | | | Minimum = | | | | | | | 0. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: The | | | | | | | \"repT | | | | | | | hreshDl\" | | | | | | | attribute | | | | | | | and/or | | | | | | | the | | | | | | | \"repT | | | | | | | hreshUl\" | | | | | | | attribute | | | | | | | and/or | | | | | | | the | | | | | | | \"repT | | | | | | | hreshRp\" | | | | | | | attribute | | | | | | | shall be | | | | | | | present. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.35 Type TsnQosContainer
Table 5.6.2.35-1: Definition of type TsnQosContainer
* * *
Attribute name Data type P Cardinality Description Applicability
maxTscBurstSize ExtMaxDataBurstVol O 0..1 Maximum burst size of the TSC
traffic in units of Bytes.\  
Minimum = 4096, Maximum = 2000000.
tscPackDelay PacketDelBudget O 0..1 Delay of the TSC traffic.
tscPrioLevel TscPriorityLevel O 0..1 TSC traffic priority in relation to other
TSC and non-TSC traffic.
NOTE: At least one of the attributes shall be present in an instance of the
TsnQosContainer.
* * *
#### 5.6.2.36 Type PcscfRestorationRequestData
Table 5.6.2.36-1: Definition of type PcscfRestorationRequestData
* * *
Attribute name Data type P Cardinality Description Applicability dnn Dnn C
0..1 Data Network Name, a full DNN with both the Network Identifier and
Operator Identifier, or a DNN with the Network Identifier only. It shall be
present when the \"afRoutReq\" attribute is present.  
ipDomain string O 0..1 Indicates the IPv4 address domain information that
assists session binding.  
sliceInfo Snssai O 0..1 Identifies the S-NSSAI.  
supi Supi O 0..1 Subscription Permanent Identifier.  
ueIpv4 Ipv4Addr C 0..1 The IPv4 address of the served UE.  
ueIpv6 Ipv6Addr C 0..1 The IPv6 address of the served UE.  
NOTE: When present, only one of the served UE addressing parameters (the IPv4
address or the IPv6 address) shall always be included.
* * *
#### 5.6.2.37 Type QosMonitoringReport
Table 5.6.2.42-1: Definition of type QosMonitoringReport
* * *
Attribute name Data type P Cardinality Description Applicability flows
array(Flows) C 1..N Identification of the flows. It shall be included if
\"MediaComponentVersioning\" feature is supported. When
\"MediaComponentVersioning\" feature is not supported, if no flows are
provided, the packet delay applies for all flows within the AF session.  
ulDelays array(integer) O 1..N Uplink packet delay in units of milliseconds.
(NOTE)  
dlDelays array(integer) O 1..N Downlink packet delay in units of milliseconds.
(NOTE)  
rtDelays array(integer) O 1..N Round trip delay in units of milliseconds.
(NOTE)  
NOTE: In this release of the specification the maximum number of elements in
the array is 2.
* * *
#### 5.6.2.38 Type TsnQosContainerRm
This data type is defined in the same way as the \"TsnQoSContainer\" data
type, but with the OpenAPI \"nullable: true\" property.
#### 5.6.2.39 Type TscaiInputContainer
Table 5.6.2.39-1: Definition of type TscaiInputContainer
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | pe | Uinteger | O | 0..1 | Unsigned | | | riodicity | | | | 64-b | | | | | | | itinteger | | | | | | | id | | | | | | | entifying | | | | | | | a period | | | | | | | of time | | | | | | | in units | | | | | | | of | | | | | | | micr | | | | | | | oseconds, | | | | | | | i.e. 0 to | | | | | | | ( | | | | | | | 2\^64)-1. | | | | | | | | | | | | | | Minimum = | | | | | | | 0. | | | | | | | | | | | | | | Maximum = | | | | | | | 184 | | | | | | | 467440737 | | | | | | | 09551615. | | | | | | | Identi | | | | | | | fications | | | | | | | of the | | | | | | | time | | | | | | | period | | | | | | | between | | | | | | | the start | | | | | | | of two | | | | | | | bursts in | | | | | | | reference | | | | | | | to the | | | | | | | TSN GM. | | +-----------+-----------+---+-----------+-----------+-----------+ | burstAr | DateTime | O | 0..1 | Indicates | | | rivalTime | | | | the | | | | | | | arrival | | | | | | | time of | | | | | | | the data | | | | | | | burst in | | | | | | | reference | | | | | | | to the | | | | | | | TSN GM. | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.40 Type PduSessionTsnBridge
Table 5.6.2.40-1: Definition of type PduSessionTsnBridge
* * *
Attribute name Data type P Cardinality Description Applicability tsnBridgeInfo
TsnBridgeInfo M 1 Reports the 5GS Bridge information.  
tsnBridgeManCont BridgeManagementContainer O 0..1 Transports TSN bridge
management information.  
tsnPortManContDstt PortManagementContainer O 0..1 Transports TSN port
management information for the DS-TT port.  
tsnPortManContNwtts array(PortManagementContainer) O 1..N Transports TSN port
management information for one or more NW-TT ports.
* * *
#### 5.6.2.41 Type QosMonitoringInformationRm
This data type is defined in the same way as the \"QosMonitoringInformation\"
data type, but with the OpenAPI \"nullable: true\" property.
#### 5.6.2.42 Type EventsSubscPutData
Table 5.6.2.42-1: Definition of type EventsSubscPutData
* * *
Data Type P Cardinality Description Applicability
EventsSubscReqData C 0..1 Identifies the events the application subscribes to
and represents the Events Subscription sub-resource data.\  
It shall be present in the response to PUT requests as specified in table
5.3.4.3.1-3.
EventsNotification C 0..1 Describes the notification about the events already
met at the time of subscription. It shall be present if available.
NOTE: EventsSubscPutData data type is represented as a non-exclusive list of
two data types: EventsSubscReqData and EventsNotification.
* * *
#### 5.6.2.43 Type AppSessionContextUpdateDataPatch
Table 5.6.2.43-1: Definition of type AppSessionContextUpdateDataPatch
* * *
Attribute name Data type P Cardinality Description Applicability ascReqData
AppSessionContextUpdateData O 0..1 Describes the requested update to the
services requirements of an Individual Application Session Context.
* * *
### 5.6.3 Simple data types and enumerations
#### 5.6.3.1 Introduction
This subclause defines simple data types and enumerations that can be
referenced from data structures defined in the previous subclauses.
#### 5.6.3.2 Simple data types
The simple data types defined in table 5.6.3.2-1 shall be supported.
Table 5.6.3.2-1: Simple data types
+----------------+----------------+----------------+----------------+ | Type Name | Type | Description | Applicability | | | Definition | | | +----------------+----------------+----------------+----------------+ | AfAppId | string | Contains an AF | | | | | application | | | | | identifier. | | +----------------+----------------+----------------+----------------+ | AspId | string | Contains an | Sponsor | | | | identity of an | edConnectivity | | | | application | | | | | service | | | | | provider. | | +----------------+----------------+----------------+----------------+ | CodecData | string | Contains codec | | | | | related | | | | | information. | | | | | | | | | | Refer to | | | | | s | | | | | ubclause 5.3.7 | | | | | of | | | | | 3GPP TS | | | | | 29.214 [20] | | | | | for encoding. | | +----------------+----------------+----------------+----------------+ | ContentVersion | integer | Unsigned | MediaCompo | | | | 64-bit integer | nentVersioning | | | | that indicates | | | | | the version of | | | | | some content, | | | | | as e.g. the | | | | | content of a | | | | | media | | | | | component. The | | | | | content | | | | | version shall | | | | | be unique for | | | | | the content | | | | | and for the | | | | | lifetime of | | | | | that content. | | | | | (NOTE) | | +----------------+----------------+----------------+----------------+ | F | string | Defines a | | | lowDescription | | packet filter | | | | | for an IP | | | | | flow. It | | | | | contains an | | | | | IpFilterRule | | | | | according to | | | | | section 4.3 of | | | | | IETF RF | | | | | C 6733 [52]. | | | | | | | | | | Refer to | | | | | s | | | | | ubclause 5.3.8 | | | | | of | | | | | 3GPP TS | | | | | 29.214 [20] | | | | | for encoding. | | +----------------+----------------+----------------+----------------+ | SponId | string | Contains an | Sponsor | | | | identity of a | edConnectivity | | | | sponsor. | | +----------------+----------------+----------------+----------------+ | ServiceUrn | string | Indicates that | IMS_SBI | | | | an AF session | | | | | is used for | | | | | Emergency | | | | | traffic. | | | | | | | | | | It contains | | | | | values of the | | | | | service URN | | | | | and it may | | | | | include | | | | | subservices, | | | | | as defined in | | | | | IETF R | | | | | FC 5031 [34] | | | | | or registered | | | | | at IANA. | | | | | | | | | | The string | | | | | \" | | | | | urn:service:\" | | | | | in the | | | | | beginning of | | | | | the URN shall | | | | | be omitted and | | | | | all subsequent | | | | | text shall be | | | | | included. | | | | | Examples of | | | | | valid values | | | | | of the | | | | | ServiceUrn | | | | | data structure | | | | | are \"sos\", | | | | | \"sos.fire\", | | | | | \"sos.police\" | | | | | and | | | | | \"so | | | | | s.ambulance\". | | +----------------+----------------+----------------+----------------+ | T | string | 2-octet | | | osTrafficClass | | string, where | | | | | each octet is | | | | | encoded in | | | | | hexadecimal | | | | | r | | | | | epresentation. | | | | | The first | | | | | octet contains | | | | | the IPv4 | | | | | T | | | | | ype-of-Service | | | | | or the IPv6 | | | | | Traffic-Class | | | | | field and the | | | | | second octet | | | | | contains the | | | | | ToS/Traffic | | | | | Class mask | | | | | field. Each | | | | | character in | | | | | the string | | | | | shall take a | | | | | value of \"0\" | | | | | to \"9\" or | | | | | \"A\" to \"F\" | | | | | and shall | | | | | represent 4 | | | | | bits. One | | | | | example is | | | | | that of a TFT | | | | | packet filter | | | | | as defined in | | | | | 3GPP TS | | | | | 24.008 [36]. | | +----------------+----------------+----------------+----------------+ | Tos | string | This data type | | | TrafficClassRm | | is defined in | | | | | the same way | | | | | as the | | | | | \"Tos | | | | | TrafficClass\" | | | | | data type, but | | | | | with the | | | | | OpenAPI | | | | | \"nullable: | | | | | true\" | | | | | property. | | +----------------+----------------+----------------+----------------+ | Ts | integer | Indicates the | TimeSensi | | cPriorityLevel | | TSC traffic | tiveNetworking | | | | Priority | | | | | Level, within | | | | | the range 1 to | | | | | 8. | | | | | | | | | | Values are | | | | | ordered in | | | | | decreasing | | | | | order of | | | | | priority, i.e. | | | | | with 1 as the | | | | | highest | | | | | priority and 8 | | | | | as the lowest | | | | | priority. | | +----------------+----------------+----------------+----------------+ | TscP | integer | This data type | TimeSensi | | riorityLevelRm | | is defined in | tiveNetworking | | | | the same way | | | | | as the | | | | | \"TscP | | | | | riorityLevel\" | | | | | data type, but | | | | | with the | | | | | OpenAPI | | | | | \"nullable: | | | | | true\" | | | | | property. | | +----------------+----------------+----------------+----------------+ | NOTE: The | | | | | method of | | | | | assigning | | | | | content | | | | | versions is | | | | | implementation | | | | | specific. | | | | +----------------+----------------+----------------+----------------+
#### 5.6.3.3 Enumeration: MediaType
The enumeration \"MediaType\" represents the media type of a media component.
Table 5.6.3.3-1: Enumeration MediaType
* * *
Enumeration value Description Applicability AUDIO The type of media is audio.  
VIDEO The type of media is video.  
DATA The type of media is data.  
APPLICATION The type of media is application data.  
CONTROL The type of media is control.  
TEXT The type of media is text.  
MESSAGE The type of media is message  
OTHER Other type of media.
* * *
#### 5.6.3.4 Enumeration: ReservPriority
The enumeration \"ReservPriority\" represents the reservation priority. The
lowest priority shall be indicated with the \"PRIO_1\" value, the next after
the lowest with the \"PRIO_2\" value, and so on up to the highest priority
which shall be indicated with \"PRIO_16\".
Table 5.6.3.4-1: Enumeration ReservPriority
* * *
Enumeration value Description Applicability PRIO_1  
PRIO_2  
PRIO_3  
PRIO_4  
PRIO_5  
PRIO_6  
PRIO_7  
PRIO_8  
PRIO_9  
PRIO_10  
PRIO_11  
PRIO_12  
PRIO_13  
PRIO_14  
PRIO_15  
PRIO_16
* * *
#### 5.6.3.5 Enumeration: ServAuthInfo
The enumeration \"ServAuthInfo\" represents the result of the
Npcf_PolicyAuthorization service request from the AF.
Table 5.6.3.5-1: Enumeration ServAuthInfo
* * *
Enumeration value Description Applicability TP_NOT_KNOWN Indicates the
transfer policy is not known.  
TP_EXPIRED Indicates the transfer policy has expired.  
TP_NOT_YET_OCCURRED Indicates the time window of the transfer policy has not
yet occurred.
* * *
#### 5.6.3.6 Enumeration: SponsoringStatus
The enumeration \"SponsoringStatus\" represents whether the sponsored data
connectivity is enabled or disabled/not-enabled.
Table 5.6.3.6-1: Enumeration SponsoringStatus
* * *
Enumeration value Description Applicability SPONSOR_DISABLED Sponsored data
connectivity is disabled or not enabled. SponsoredConnectivity SPONSOR_ENABLED
Sponsored data connectivity is enabled. SponsoredConnectivity
* * *
#### 5.6.3.7 Enumeration: AfEvent
The enumeration \"AfEvent\" represents the traffic events the PCF can notify
to the AF.
Table 5.6.3.7-1: Enumeration AfEvent
+----------------------+----------------------+----------------------+ | Enumeration value | Description | Applicability | +----------------------+----------------------+----------------------+ | ACCESS_TYPE_CHANGE | Access type change. | | +----------------------+----------------------+----------------------+ | ANI_REPORT | Access Network | NetLoc | | | Information Report | | | | requested. | | +----------------------+----------------------+----------------------+ | C | Access Network | IMS_SBI | | HARGING_CORRELATION | Charging Correlation | | | | Information. | | +----------------------+----------------------+----------------------+ | EPS_FALLBACK | Indicates that the | EPSFallbackReport | | | establishment of the | | | | QoS flow for the | | | | requested voice | | | | media type was | | | | rejected due to | | | | fallback to EPS. | | +----------------------+----------------------+----------------------+ | FAILED_R | Indicates that one | | | ESOURCES_ALLOCATION | or more of the SDFs | | | | of an Individual | | | | Application Session | | | | Context are | | | | deactivated at the | | | | SMF. It also | | | | indicates that the | | | | resources requested | | | | for a particular | | | | service information | | | | cannot be | | | | successfully | | | | allocated. | | +----------------------+----------------------+----------------------+ | OUT_OF_CREDIT | Out of credit. | IMS_SBI | +----------------------+----------------------+----------------------+ | PLMN_CHG | This trigger | | | | indicates PLMN | | | | change. | | +----------------------+----------------------+----------------------+ | QOS_NOTIF | The GBR QoS targets | | | | of a SDF are not | | | | guaranteed or are | | | | guaranteed again. | | +----------------------+----------------------+----------------------+ | QOS_MONITORING | Indicates PCF to | QoSMonitoring | | | enable Qos | | | | Monitoring for the | | | | Service Data Flow. | | +----------------------+----------------------+----------------------+ | RAN_NAS_CAUSE | This trigger | RAN-NAS-Cause | | | indicates RAN-NAS | | | | release cause | | | | information is | | | | available in the PCF | | | | from the SMF. | | | | | | | | This event does not | | | | require explicit | | | | subscription. | | +----------------------+----------------------+----------------------+ | REAL | Credit has been | IMS_SBI, | | LOCATION_OF_CREDIT | reallocated after a | ReallocationOfCredit | | | former out of credit | | | | indication. | | +----------------------+----------------------+----------------------+ | SUCCESSFUL_R | Indicates that the | | | ESOURCES_ALLOCATION | resources requested | | | | for particular | | | | service information | | | | have been | | | | successfully | | | | allocated. | | +----------------------+----------------------+----------------------+ | TSN_BRIDGE_INFO | 5GS Bridge | Tim | | | information (BMIC | eSensitiveNetworking | | | and/or PMIC(s)) | | | | received by the PCF | | | | from the SMF. | | +----------------------+----------------------+----------------------+ | USAGE_REPORT | Volume and/or time | S | | | usage for sponsored | ponsoredConnectivity | | | data connectivity. | | +----------------------+----------------------+----------------------+
#### 5.6.3.8 Enumeration: AfNotifMethod
The enumeration \"AfNotifMethod\" represents the notification methods that can
be subscribed by an AF.
Table 5.6.3.8-1: Enumeration AfNotifMethod
* * *
Enumeration value Description Applicability EVENT_DETECTION Event is reported
whenever the event is met and the subscription is alive.  
ONE_TIME Events are reported once the event is met and are not reported again
unless the AF refreshes the subscription.  
PERIODIC The notification is periodically sent.
EnhancedSubscriptionToNotification
* * *
#### 5.6.3.9 Enumeration: QosNotifType
The enumeration \"QosNotifType\" represents the types of reports bound to the
notification of QoS Notification Control.
Table 5.6.3.9-1: Enumeration QosNotifType
* * *
Enumeration value Description Applicability GUARANTEED The QoS targets of one
or more SDFs are guaranteed again.  
NOT_GUARANTEED The QoS targets of one or more SDFs are not being guaranteed.
* * *
#### 5.6.3.10 Enumeration: TerminationCause
The enumeration \"TerminationCause\" represents the types of causes the PCF
can report when requesting to the AF the deletion of the \"Individual
Application Session Context\" resource.
Table 5.6.3.10-1: Enumeration TerminationCause
* * *
Enumeration value Description Applicability ALL_SDF_DEACTIVATION All the SDFs
of an Individual Application Session Context are deactivated at the SMF.  
PDU_SESSION_TERMINATION The PDU session is terminated.  
PS_TO_CS_HO Indication of PS to CS handover is received from the SMF. IMS_SBI
* * *
#### 5.6.3.11 Void
#### 5.6.3.12 Enumeration: FlowStatus
The enumeration \"FlowStatus\" represents whether the service data flow(s) are
enabled or disabled.
Table 5.6.3.12-1: Enumeration FlowStatus
* * *
Enumeration value Description Applicability ENABLED-UPLINK Indicates to enable
associated uplink service data flow(s) and to disable associated downlink
service data flow(s).  
ENABLED-DOWNLINK Indicates to enable associated downlink service data flow(s)
and to disable associated uplink service data flow(s).  
ENABLED Indicates to enable all associated service data flow(s) in both
directions.  
DISABLED Indicates to disable all associated service data flow(s) in both
directions.  
REMOVED Indicates to remove all associated service data flow(s). The IP
Filters for the associated service data flow(s) shall be removed. The
associated service data flows shall not be taken into account when deriving
the authorized QoS.
* * *
#### 5.6.3.13 Enumeration: MediaComponentResourcesStatus
The enumeration \"MediaComponentResourcesStatus\" indicates whether the PCC
rule(s) related to certain media component are active or inactive.
Table 5.6.3.13-1: Enumeration MediaComponentResourcesStatus
* * *
Enumeration value Description Applicability ACTIVE Indicates that the PCC
rule(s) related to certain media component are active.  
INACTIVE Indicates that the PCC rule(s) related to certain media component are
inactive.
* * *
#### 5.6.3.14 Enumeration: FlowUsage
The enumeration \"FlowUsage\" represents the flow usage of the flows described
by a media subcomponent.
Table 5.6.3.14-1: Enumeration FlowUsage
* * *
Enumeration value Description Applicability NO_INFO This value is used to
indicate that no information about the usage of the IP flow is being provided.
This is the default value.  
RTCP This value is used to indicate that an IP flow is used to transport RTCP.  
AF_SIGNALLING This value is used to indicate that the IP flow is used to
transport AF Signalling Protocols (e.g. SIP/SDP). IMS_SBI
* * *
NOTE: An AF can choose not to identify RTCP flows, e.g. in order to avoid that
RTCP flows are always enabled by the server.
#### 5.6.3.15 Enumeration: RequiredAccessInfo
The enumeration \"RequiredAccessInfo\" represents the access network
information required for the \"Individual Application Session Context\"
resource.
Table 5.6.3.15-1: Enumeration RequiredAccessInfo
* * *
Enumeration value Description Applicability USER_LOCATION Indicates that the
user location information shall be reported.  
UE_TIME_ZONE Indicates that the user timezone shall be reported.
* * *
#### 5.6.3.16 Enumeration: ServiceInfoStatus
The enumeration \"ServiceInfoStatus\" represents whether the AF provided
service information is preliminary or final.
Table 5.6.3.16-1: Enumeration ServiceInfoStatus
* * *
Enumeration value Description Applicability FINAL This value is used to
indicate that the service has been fully negotiated between the two ends and
service information provided is the result of that negotiation.  
PRELIMINARY This value is used to indicate that the service information that
the AF has provided to the PCF is preliminary and needs to be further
negotiated between the two ends (e.g. for IMS when the service information is
sent based on the SDP offer).
* * *
#### 5.6.3.17 Enumeration: SipForkingIndication
The enumeration \"SipForkingIndication\" describes if several SIP dialogues
are related to an \"Individual Application Session Context\" resource.
Table 5.6.3.17-1: Enumeration SipForkingIndication
* * *
Enumeration value Description Applicability
SINGLE_DIALOGUE This value is used to indicate that the \"Individual
Application Session Context\" resource relates to a single SIP dialogue.\  
This is the default value.
SEVERAL_DIALOGUES This value is used to indicate that the \"Individual
Application Session Context\" resource relates to several SIP dialogues.
* * *
#### 5.6.3.18 Enumeration: AfRequestedData
The enumeration \"AfRequestedData\" represents the information the AF
requested to be exposed.
Table 5.6.3.18-1: Enumeration AfRequestedData
* * *
Enumeration value Description Applicability UE_IDENTITY Indicates that the AF
requests the PCF to provide the 5GS-level UE identities (SUPI, GPSI, PEI)
available for that PDU session.
* * *
#### 5.6.3.19 Enumeration: PreemptionControlInformation
The enumeration \"PreemptionControlInformation\" represents how to perform
pre-emption among multiple potential media flow candidates of same priority.
Table 5.6.3.19-1: Enumeration PreemptionControlInformation
* * *
Enumeration value Description Applicability MOST_RECENT Indicates the most
recent added flow is to be pre-empted.  
LEAST_RECENT Indicates the least recent added flow is to be pre-empted.  
HIGHEST_BW Indicates the highest bandwidth flow is to be pre-empted.
* * *
#### 5.6.3.20 Enumeration: PrioritySharingIndicator
The enumeration \"PrioritySharingIndicator\" represents whether the media
component is enabled or disabled for priority sharing with other media
components which are assigned the same 5QI and belong to other \"Individual
Application Session Context\" resource bound to the same PDU session.
Table 5.6.3.20-1: Enumeration PrioritySharingIndicator
* * *
Enumeration value Description Applicability ENABLED Indicates the media
component is allowed to share ARP with other medias which are assigned the
same 5QI and belong to other \"Individual Application Session Context\"
resources bound to the same PDU session.  
DISABLED Indicates the media component is not allowed to share ARP with other
media components. This is the default value when omitted.
* * *
#### 5.6.3.21 Enumeration: PreemptionControlInformationRm
This data type is defined in the same way as the
\"PreemptionControlInformation\" data type but also allows null value
(specified as \"NullValue\" data type).
## 5.7 Error handling
### 5.7.1 General
HTTP error handling shall be supported as specified in subclause 5.2.4 of 3GPP
TS 29.500 [5].
For the Npcf_PolicyAuthorization API, HTTP error responses shall be supported
as specified in subclause 4.8 of 3GPP TS 29.501 [6].
Protocol errors and application errors specified in table 5.2.7.2-1 of 3GPP TS
29.500 [5] shall be supported for an HTTP method if the corresponding HTTP
status codes are specified as mandatory for that HTTP method in table
5.2.7.1-1 of 3GPP TS 29.500 [5].
In addition, the requirements in the following subclauses shall apply.
### 5.7.2 Protocol Errors
In this Release of the specification, there are no additional protocol errors
applicable for the Npcf_PolicyAuthorization API.
### 5.7.3 Application Errors
The application errors defined for the Npcf_PolicyAuthorization API are listed
in table 5.7.3-1.
Table 5.7.3-1: Application errors
+----------------------+----------------------+----------------------+ | Application Error | HTTP status code | Description | +----------------------+----------------------+----------------------+ | REQUESTED_SERV | 403 Forbidden | The service | | ICE_NOT_AUTHORIZED | | information provided | | | | in the request is | | | | rejected. (NOTE 1) | +----------------------+----------------------+----------------------+ | REQUESTE | 403 Forbidden | The service | | D_SERVICE_TEMPORAR | | information provided | | ILY_NOT_AUTHORIZED | | in the request is | | | | temporarily | | | | rejected. (NOTE 2) | +----------------------+----------------------+----------------------+ | UNA | 403 Forbidden | The request for | | UTHORIZED_SPONSORED | | sponsored data | | _DATA_CONNECTIVITY | | connectivity is not | | | | authorized. (NOTE 3) | +----------------------+----------------------+----------------------+ | UNAUTHORIZED_NON | 403 Forbidden | The PCF rejects a | | _EMERGENCY_SESSION | | new AF session | | | | context setup | | | | because the session | | | | binding function | | | | associated a | | | | non-Emergency IMS | | | | session to a PDU | | | | session established | | | | to an Emergency DNN. | +----------------------+----------------------+----------------------+ | A | 404 Not Found | The HTTP request is | | PPLICATION_SESSION\ | | rejected because the | | _CONTEXT_NOT_FOUND | | specified Individual | | | | Application Session | | | | Context does not | | | | exist. (NOTE 4) | +----------------------+----------------------+----------------------+ | PDU_SES | 500 Internal Server | The PCF failed in | | SION_NOT_AVAILABLE | Error | executing session | | | | binding. (NOTE 5) | +----------------------+----------------------+----------------------+ | NOTE 1: This | | | | application error is | | | | included in the | | | | response to the POST | | | | request (see | | | | subclauses 4.2.2.2 | | | | and 4.2.2.5) and to | | | | the PATCH request | | | | (see | | | | subclauses 4.2.3.2 | | | | and 4.2.3.5). | | | | | | | | NOTE 2: This | | | | application error is | | | | included in the | | | | response to the POST | | | | request (see | | | | subclause 4.2.2.2) | | | | and to the PATCH | | | | request (see | | | | subclause 4.2.3.2). | | | | | | | | NOTE 3: This | | | | application error is | | | | included in the | | | | response to the POST | | | | request (see | | | | subclause 4.2.2.5) | | | | and to the PATCH | | | | request (see | | | | subclause 4.2.3.5). | | | | | | | | NOTE 4: This | | | | application error is | | | | included in the | | | | responses to the | | | | GET, PATCH and | | | | delete custom | | | | operation requests | | | | to the Individual | | | | Application Session | | | | Context resource, | | | | and to the PUT and | | | | DELETE requests to | | | | the Events | | | | Subscription | | | | resource. | | | | | | | | NOTE 5: This | | | | application error is | | | | included in the | | | | response to the POST | | | | request (see | | | | subclauses 4.2.2.2, | | | | 4.2.6.3 and | | | | 4.2.2.27). | | | | | | | | NOTE 6: Including a | | | | \"ProblemDetails\" | | | | data structure with | | | | the \"cause\" | | | | attribute in the | | | | HTTP response is | | | | optional unless | | | | explicitly mandated | | | | in the service | | | | operation | | | | subclauses. | | | +----------------------+----------------------+----------------------+
## 5.8 Feature negotiation
The optional features in table 5.8-1 are defined for the
Npcf_PolicyAuthorization API. They shall be negotiated using the extensibility
mechanism defined in subclause 6.6.2 of 3GPP TS 29.500 [5].
When requesting the PCF to create an Individual Application Session Context
resource the NF service consumer shall indicate the optional features the NF
service consumer supports for the Npcf_PolicyAuthorization service by
including the \"suppFeat\" attribute in the \"AppSessionContextReqData\" data
type of the HTTP POST request.
The PCF shall determine the supported features for the created Individual
Application Session Context resource as specified in subclause 6.6.2 of 3GPP
TS 29.500 [5]. The PCF shall indicate the supported features in the HTTP
response confirming the creation of the Individual Application Session Context
resource by including the \"suppFeat\" attribute in the
\"AppSessionContextRespData\" data type.
Table 5.8-1: Supported Features
+----------------+-------------------------+-------------------------+ | Feature number | Feature Name | Description | +----------------+-------------------------+-------------------------+ | 1 | In | Indicates support of | | | fluenceOnTrafficRouting | Application Function | | | | influence on traffic | | | | routing. If the PCF | | | | supports this feature, | | | | the AF may influence | | | | SMF routing to | | | | applications or | | | | subscribe to | | | | notifications of UP | | | | path management for the | | | | traffic flows of an | | | | active PDU session. | +----------------+-------------------------+-------------------------+ | 2 | SponsoredConnectivity | Indicates support of | | | | sponsored data | | | | connectivity. If the | | | | PCF supports this | | | | feature, the AF may | | | | provide sponsored data | | | | connectivity to the | | | | SUPI. | +----------------+-------------------------+-------------------------+ | 3 | M | Indicates the support | | | ediaComponentVersioning | of the media component | | | | versioning. | +----------------+-------------------------+-------------------------+ | 4 | URLLC | Indicates support of | | | | Ultra-Reliable | | | | Low-Latency | | | | Communication (URLLC) | | | | requirements, i.e. AF | | | | application relocation | | | | acknowledgement and UE | | | | address(es) | | | | preservation. The | | | | In | | | | fluenceOnTrafficRouting | | | | feature shall be | | | | supported in order to | | | | support this feature. | +----------------+-------------------------+-------------------------+ | 5 | IMS_SBI | Indicates support of | | | | the communication with | | | | the 5GC IMS AF via | | | | Service Based | | | | Interfaces. | +----------------+-------------------------+-------------------------+ | 6 | NetLoc | Indicates the support | | | | of access network | | | | information reporting. | +----------------+-------------------------+-------------------------+ | 7 | ProvAFsignalFlow | This indicates support | | | | for the feature of | | | | provisioning of AF | | | | signalling flow | | | | information as | | | | described in | | | | subclauses 4.2.2.16 and | | | | 4.2.3.17. If the PCF | | | | supports this feature | | | | the AF may provision AF | | | | signalling flow | | | | information. | | | | | | | | NOTE: This feature is | | | | used by the IMS | | | | Restoration Procedures | | | | to provide to the SMF | | | | the address of the | | | | P-CSCF selected by the | | | | UE, refer to | | | | 3GPP TS 23.380 [39]. | | | | | | | | The IMS_SBI feature | | | | shall be supported in | | | | order to support this | | | | feature. | +----------------+-------------------------+-------------------------+ | 8 | ResourceSharing | This feature indicates | | | | the support of resource | | | | sharing across several | | | | \"Individual | | | | Application Session | | | | Context\" resources. | | | | The IMS_SBI feature | | | | shall be supported in | | | | order to support this | | | | feature. | +----------------+-------------------------+-------------------------+ | 9 | MCPTT | This feature indicates | | | | the support of Mission | | | | Critical Push To Talk | | | | services as described | | | | in | | | | 3GPP TS 24.379 [41]. | +----------------+-------------------------+-------------------------+ | 10 | MCVideo | This feature indicates | | | | the support of Mission | | | | Critical Video services | | | | as described in | | | | 3GPP TS 24.281 [43]. | +----------------+-------------------------+-------------------------+ | 11 | PrioritySharing | This feature indicates | | | | that Priority Sharing | | | | is supported as | | | | described in | | | | 3GPP TS 23.503 [4], | | | | subclause 6.1.3.15. | +----------------+-------------------------+-------------------------+ | 12 | MCPTT-Preemption | This feature indicates | | | | the support of service | | | | pre-emption based on | | | | the information | | | | provided by the AF. It | | | | requires that both | | | | PrioritySharing and | | | | MCPTT features are also | | | | supported. | +----------------+-------------------------+-------------------------+ | 13 | MacAddressRange | Indicates the support | | | | of a set of MAC | | | | addresses with a | | | | specific range in the | | | | traffic filter. | +----------------+-------------------------+-------------------------+ | 14 | RAN-NAS-Cause | This feature indicates | | | | the support for the | | | | release cause code | | | | information from the | | | | access network. | +----------------+-------------------------+-------------------------+ | 15 | EnhancedSub | Indicates the support | | | scriptionToNotification | of: | | | | | | | | > \- Subscription to | | | | > periodic | | | | > notifications. | | | | > | | | | > \- Definition of a | | | | > waiting time between | | | | > the reporting of two | | | | > event triggered | | | | > events. | | | | > | | | | > \- Indication of | | | | > whether the event has | | | | > to be reported at PDU | | | | > Session termination. | | | | > | | | | > \- Notification | | | | > Correlation Id for a | | | | > subscription to an | | | | > event. | +----------------+-------------------------+-------------------------+ | 16 | QoSMonitoring | Indicates the support | | | | of QoS monitoring | | | | information. This | | | | feature requires the | | | | support of the | | | | EnhancedSub | | | | scriptionToNotification | | | | feature. | +----------------+-------------------------+-------------------------+ | 17 | Autho | Indicates support of | | | rizationWithRequiredQoS | policy authorization | | | | for the AF session with | | | | required QoS. | +----------------+-------------------------+-------------------------+ | 18 | TimeSensitiveNetworking | Indicates that the 5G | | | | System is integrated | | | | within the external | | | | network as a TSN | | | | bridge. | +----------------+-------------------------+-------------------------+ | 19 | PCSCF- | This feature indicates | | | Restoration-Enhancement | support of P-CSCF | | | | Restoration | | | | Enhancement. It is used | | | | for the PCF and the | | | | P-CSCF to indicate if | | | | they support P-CSCF | | | | Restoration | | | | Enhancement. | +----------------+-------------------------+-------------------------+ | 20 | CHEM | This feature indicates | | | | the support of Coverage | | | | and Handover | | | | Enhancements for Media | | | | (CHEM). | +----------------+-------------------------+-------------------------+ | 21 | FLUS | This feature indicates | | | | the support of FLUS | | | | functionality as | | | | described in | | | | 3GPP TS 26.238 [51]. | +----------------+-------------------------+-------------------------+ | 22 | EPSFallbackReport | This feature indicates | | | | the support of the | | | | report of EPS Fallback | | | | as defined in | | | | subclauses 4.2.2.30, | | | | 4.2.3.29 and 4.2.5.15. | +----------------+-------------------------+-------------------------+ | 23 | ATSSS | Indicates the support | | | | of the report of the | | | | multiple access types | | | | of a MA PDU session. | +----------------+-------------------------+-------------------------+ | 24 | QoSHint | This feature indicates | | | | the support of specific | | | | QoS hint parameters as | | | | described in | | | | 3GPP TS 26.114 [30], | | | | subclause 6.2.10. | +----------------+-------------------------+-------------------------+ | 25 | ReallocationOfCredit | This feature indicates | | | | the support of | | | | notifications of | | | | reallocation of credits | | | | events. It requires the | | | | support of IMS_SBI | | | | feature. | +----------------+-------------------------+-------------------------+ | 26 | ES3XX | Extended Support for | | | | 3xx redirections. This | | | | feature indicates the | | | | support of redirection | | | | for any service | | | | operation, according to | | | | Stateless NF procedures | | | | as specified in | | | | subclauses 6.5.3.2 and | | | | 6.5.3.3 of | | | | 3GPP TS 29.500 [5] | | | | and according to HTTP | | | | redirection principles | | | | for indirect | | | | communication, as | | | | specified in | | | | subclause 6.10.9 of | | | | 3GPP TS 29.500 [5]. | +----------------+-------------------------+-------------------------+ | 27 | DisableUENotification | Indicates the support | | | | of disabling QoS flow | | | | parameters signalling | | | | to the UE when the SMF | | | | is notified by the | | | | NG-RAN of changes in | | | | the fulfilled QoS | | | | situation. This feature | | | | requires that the | | | | Autho | | | | rizationWithRequiredQoS | | | | featute is also | | | | supported. | +----------------+-------------------------+-------------------------+ | 28 | PatchCorrection | Indicates support of | | | | the correction to the | | | | PATCH method: | | | | | | | | When this feature is | | | | not supported, the | | | | interoperability | | | | between a NF service | | | | consumer and the PCF | | | | can only be ensured | | | | when it is not required | | | | the update of the | | | | Individual Application | | | | Session Context | | | | resource. | +----------------+-------------------------+-------------------------+
## 5.9 Security
As indicated in 3GPP TS 33.501 [25] and 3GPP TS 29.500 [5], the access to the
Npcf_PolicyAuthorization API, based on local configuration, may be authorized
by means of the OAuth2 protocol (see IETF RFC 6749 [26]), using the \"Client
Credentials\" authorization grant, where the NRF (see 3GPP TS 29.510 [27])
plays the role of the authorization server.
If OAuth2 authorization is used, an NF Service Consumer, prior to consuming
services offered by the Npcf_PolicyAuthorization API, shall obtain a \"token\"
from the authorization server, by invoking the Access Token Request service,
as described in 3GPP TS 29.510 [27], subclause 5.4.2.2.
NOTE: When multiple NRFs are deployed in a network, the NRF used as
authorization server is the same NRF that the NF Service Consumer used for
discovering the Npcf_PolicyAuthorization service.
The Npcf_PolicyAuthorization API defines a single scope \"npcf-
policyauthorization\" for OAuth2 authorization (as specified in 3GPP TS 33.501
[25]) for the entire API, and it does not define any additional scopes at
resource or operation level.
###### ## Annex A (normative): OpenAPI specification
# A.1 General
The present Annex contains an OpenAPI [11] specification of HTTP messages and
content bodies used by the Npcf_PolicyAuthorization API.
This Annex shall take precedence when being discrepant to other parts of the
specification with respect to the encoding of information elements and methods
within the API.
NOTE: The semantics and procedures, as well as conditions, e.g. for the
applicability and allowed combinations of attributes or values, not expressed
in the OpenAPI definitions but defined in other parts of the specification
also apply.
Informative copies of the OpenAPI specification file contained in this 3GPP
Technical Specification are available on a Git-based repository that uses the
GitLab software version control system (see clause 5B of the 3GPP TR 21.900
[28] and subclause 5.3.1 of the 3GPP TS 29.501 [6] for further information).
# A.2 Npcf_PolicyAuthorization API
openapi: 3.0.0
info:
title: Npcf_PolicyAuthorization Service API
version: 1.1.7
description: \|
PCF Policy Authorization Service.
Â© 2023, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
externalDocs:
description: 3GPP TS 29.514 V16.17.0; 5G System; Policy Authorization
Service;Stage 3.
url: \'http://www.3gpp.org/ftp/Specs/archive/29_series/29.514/\'
#
servers:
\- url: \'{apiRoot}/npcf-policyauthorization/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in subclause 4.4 of 3GPP TS 29.501
security:
\- {}
\- oAuth2ClientCredentials:
\- npcf-policyauthorization
paths:
/app-sessions:
post:
summary: Creates a new Individual Application Session Context resource
operationId: PostAppSessions
tags:
\- Application Sessions (Collection)
requestBody:
description: Contains the information for the creation the resource
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/AppSessionContext\'
responses:
\'201\':
description: Successful creation of the resource
content:
application/json:
schema:
\$ref: \'#/components/schemas/AppSessionContext\'
headers:
Location:
description: \'Contains the URI of the created individual application session
context resource, according to the structure: {apiRoot}/npcf-
policyauthorization/v1/app-sessions/{appSessionId} or the URI of the created
events subscription sub-resource, according to the structure: {apiRoot}/npcf-
policyauthorization/v1/app-sessions/{appSessionId}/events-subscription}\'
required: true
schema:
type: string
\'303\':
description: See Other. The result of the HTTP POST request would be
equivalent to the existing Application Session Context.
headers:
Location:
description: \'Contains the URI of the existing individual Application Session
Context resource.\'
required: true
schema:
type: string
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
description: Forbidden
content:
application/problem+json:
schema:
\$ref: \'#/components/schemas/ExtendedProblemDetails\'
headers:
Retry-After:
description: \'Indicates the time the AF has to wait before making a new
request. It can be a non-negative integer (decimal number) indicating the
number of seconds the AF has to wait before making a new request or an HTTP-
date after which the AF can retry a new request.\'
schema:
anyOf:
\- type: integer
\- type: string
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
callbacks:
terminationRequest:
\'{\$request.body#/ascReqData/notifUri}/terminate\':
post:
requestBody:
description: Request of the termination of the Individual Application Session
Context
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/TerminationInfo\'
responses:
\'204\':
description: The receipt of the notification is acknowledged.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
eventNotification:
\'{\$request.body#/ascReqData/evSubsc/notifUri}/notify\':
post:
requestBody:
description: Notification of an event occurrence in the PCF.
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/EventsNotification\'
responses:
\'204\':
description: The receipt of the notification is acknowledged
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
detected5GsBridgeForPduSession:
\'{\$request.body#/ascReqData/evSubsc/notifUri}/new-bridge\':
post:
requestBody:
description: Notification of a new 5GS Bridge detected in the PCF.
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/PduSessionTsnBridge\'
responses:
\'204\':
description: The receipt of the notification is acknowledged
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
/app-sessions/pcscf-restoration:
post:
summary: \"Indicates P-CSCF restoration and does not create an Individual
Application Session Context\"
operationId: PcscfRestoration
tags:
\- PCSCF Restoration Indication
requestBody:
description: PCSCF Restoration Indication
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/PcscfRestorationRequestData\'
responses:
\'204\':
description: The deletion is confirmed without returning additional data.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
#
/app-sessions/{appSessionId}:
get:
summary: \"Reads an existing Individual Application Session Context\"
operationId: GetAppSession
tags:
\- Individual Application Session Context (Document)
parameters:
\- name: appSessionId
description: string identifying the resource
in: path
required: true
schema:
type: string
responses:
\'200\':
description: A representation of the resource is returned.
content:
application/json:
schema:
\$ref: \'#/components/schemas/AppSessionContext\'
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'406\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/406\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
patch:
summary: \"Modifies an existing Individual Application Session Context\"
operationId: ModAppSession
tags:
\- Individual Application Session Context (Document)
parameters:
\- name: appSessionId
description: string identifying the resource
in: path
required: true
schema:
type: string
requestBody:
description: modification of the resource.
required: true
content:
application/merge-patch+json:
schema:
\$ref: \'#/components/schemas/AppSessionContextUpdateDataPatch\'
responses:
\'200\':
description: successful modification of the resource and a representation of
that resource is returned
content:
application/json:
schema:
\$ref: \'#/components/schemas/AppSessionContext\'
\'204\':
description: The successful modification
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
description: Forbidden
content:
application/problem+json:
schema:
\$ref: \'#/components/schemas/ExtendedProblemDetails\'
headers:
Retry-After:
description: \'Indicates the time the AF has to wait before making a new
request. It can be a non-negative integer (decimal number) indicating the
number of seconds the AF has to wait before making a new request or an HTTP-
date after which the AF can retry a new request.\'
schema:
anyOf:
\- type: integer
\- type: string
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
callbacks:
eventNotification:
\'{\$request.body#/ascReqData/evSubsc/notifUri}/notify\':
post:
requestBody:
description: Notification of an event occurrence in the PCF.
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/EventsNotification\'
responses:
\'204\':
description: The receipt of the notification is acknowledged
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
#
#
/app-sessions/{appSessionId}/delete:
post:
summary: \"Deletes an existing Individual Application Session Context\"
operationId: DeleteAppSession
tags:
\- Individual Application Session Context (Document)
parameters:
\- name: appSessionId
description: string identifying the Individual Application Session Context
resource
in: path
required: true
schema:
type: string
requestBody:
description: deletion of the Individual Application Session Context resource,
req notification
required: false
content:
application/json:
schema:
\$ref: \'#/components/schemas/EventsSubscReqData\'
responses:
\'200\':
description: The deletion of the resource is confirmed and a resource is
returned
content:
application/json:
schema:
\$ref: \'#/components/schemas/AppSessionContext\'
\'204\':
description: The deletion is confirmed without returning additional data.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
#
/app-sessions/{appSessionId}/events-subscription:
put:
summary: \"creates or modifies an Events Subscription subresource\"
operationId: updateEventsSubsc
tags:
\- Events Subscription (Document)
parameters:
\- name: appSessionId
description: string identifying the Events Subscription resource
in: path
required: true
schema:
type: string
requestBody:
description: Creation or modification of an Events Subscription resource.
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/EventsSubscReqData\'
responses:
\'201\':
description: The creation of the Events Subscription resource is confirmed and
its representation is returned.
content:
application/json:
schema:
\$ref: \'#/components/schemas/EventsSubscPutData\'
headers:
Location:
description: \'Contains the URI of the created Events Subscription resource,
according to the structure: {apiRoot}/npcf-policyauthorization/v1/app-
sessions/{appSessionId}/events-subscription}\'
required: true
schema:
type: string
\'200\':
description: The modification of the Events Subscription resource is confirmed
its representation is returned.
content:
application/json:
schema:
\$ref: \'#/components/schemas/EventsSubscPutData\'
\'204\':
description: The modification of the Events Subscription subresource is
confirmed without returning additional data.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
callbacks:
eventNotification:
\'{\$request.body#/notifUri}/notify\':
post:
requestBody:
description: Contains the information for the notification of an event
occurrence in the PCF.
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/EventsNotification\'
responses:
\'204\':
description: The receipt of the notification is acknowledged.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
delete:
summary: deletes the Events Subscription subresource
operationId: DeleteEventsSubsc
tags:
\- Events Subscription (Document)
parameters:
\- name: appSessionId
description: string identifying the Individual Application Session Context
resource
in: path
required: true
schema:
type: string
responses:
\'204\':
description: The deletion of the of the Events Subscription sub-resource is
confirmed without returning additional data.
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
components:
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{nrfApiRoot}/oauth2/token\'
scopes:
npcf-policyauthorization: Access to the Npcf_PolicyAuthorization API
schemas:
AppSessionContext:
description: Represents an Individual Application Session Context resource.
type: object
properties:
ascReqData:
\$ref: \'#/components/schemas/AppSessionContextReqData\'
ascRespData:
\$ref: \'#/components/schemas/AppSessionContextRespData\'
evsNotif:
\$ref: \'#/components/schemas/EventsNotification\'
AppSessionContextReqData:
description: Identifies the service requirements of an Individual Application
Session Context.
type: object
required:
\- notifUri
\- suppFeat
oneOf:
\- required: [ueIpv4]
\- required: [ueIpv6]
\- required: [ueMac]
properties:
afAppId:
\$ref: \'#/components/schemas/AfAppId\'
afChargId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ApplicationChargingId\'
afReqData:
\$ref: \'#/components/schemas/AfRequestedData\'
afRoutReq:
\$ref: \'#/components/schemas/AfRoutingRequirement\'
aspId:
\$ref: \'#/components/schemas/AspId\'
bdtRefId:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/BdtReferenceId\'
dnn:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Dnn\'
evSubsc:
\$ref: \'#/components/schemas/EventsSubscReqData\'
mcpttId:
description: indication of MCPTT service request
type: string
mcVideoId:
description: indication of MCVideo service request
type: string
medComponents:
type: object
additionalProperties:
\$ref: \'#/components/schemas/MediaComponent\'
minProperties: 1
ipDomain:
type: string
mpsId:
description: indication of MPS service request
type: string
mcsId:
description: indication of MCS service request
type: string
preemptControlInfo:
\$ref: \'#/components/schemas/PreemptionControlInformation\'
resPrio:
\$ref: \'#/components/schemas/ReservPriority\'
servInfStatus:
\$ref: \'#/components/schemas/ServiceInfoStatus\'
notifUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
servUrn:
\$ref: \'#/components/schemas/ServiceUrn\'
sliceInfo:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
sponId:
\$ref: \'#/components/schemas/SponId\'
sponStatus:
\$ref: \'#/components/schemas/SponsoringStatus\'
supi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Supi\'
gpsi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Gpsi\'
suppFeat:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
ueIpv4:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr\'
ueIpv6:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv6Addr\'
ueMac:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/MacAddr48\'
tsnBridgeManCont:
\$ref:
\'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/BridgeManagementContainer\'
tsnPortManContDstt:
\$ref:
\'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/PortManagementContainer\'
tsnPortManContNwtts:
type: array
items:
\$ref:
\'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/PortManagementContainer\'
minItems: 1
AppSessionContextRespData:
description: Describes the authorization data of an Individual Application
Session Context created by the PCF.
type: object
properties:
servAuthInfo:
\$ref: \'#/components/schemas/ServAuthInfo\'
ueIds:
type: array
items:
\$ref: \'#/components/schemas/UeIdentityInfo\'
minItems: 1
suppFeat:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
AppSessionContextUpdateDataPatch:
description: Identifies the modifications to an Individual Application Session
Context and/or the modifications to the sub-resource Events Subscription.
type: object
properties:
ascReqData:
\$ref: \'#/components/schemas/AppSessionContextUpdateData\'
AppSessionContextUpdateData:
description: Identifies the modifications to the \"ascReqData\" property of an
Individual Application Session Context which may include the modifications to
the sub-resource Events Subscription.
type: object
properties:
afAppId:
\$ref: \'#/components/schemas/AfAppId\'
afRoutReq:
\$ref: \'#/components/schemas/AfRoutingRequirementRm\'
aspId:
\$ref: \'#/components/schemas/AspId\'
bdtRefId:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/BdtReferenceId\'
evSubsc:
\$ref: \'#/components/schemas/EventsSubscReqDataRm\'
mcpttId:
description: indication of MCPTT service request
type: string
mcVideoId:
description: indication of modification of MCVideo service
type: string
medComponents:
type: object
additionalProperties:
\$ref: \'#/components/schemas/MediaComponentRm\'
minProperties: 1
mpsId:
description: indication of MPS service request
type: string
mcsId:
description: indication of MCS service request
type: string
preemptControlInfo:
\$ref: \'#/components/schemas/PreemptionControlInformationRm\'
resPrio:
\$ref: \'#/components/schemas/ReservPriority\'
servInfStatus:
\$ref: \'#/components/schemas/ServiceInfoStatus\'
sipForkInd:
\$ref: \'#/components/schemas/SipForkingIndication\'
sponId:
\$ref: \'#/components/schemas/SponId\'
sponStatus:
\$ref: \'#/components/schemas/SponsoringStatus\'
tsnBridgeManCont:
\$ref:
\'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/BridgeManagementContainer\'
tsnPortManContDstt:
\$ref:
\'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/PortManagementContainer\'
tsnPortManContNwtts:
type: array
items:
\$ref:
\'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/PortManagementContainer\'
minItems: 1
EventsSubscReqData:
description: Identifies the events the application subscribes to.
type: object
required:
\- events
properties:
events:
type: array
items:
\$ref: \'#/components/schemas/AfEventSubscription\'
minItems: 1
notifUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
reqQosMonParams:
type: array
items:
\$ref:
\'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/RequestedQosMonitoringParameter\'
minItems: 1
qosMon:
\$ref: \'#/components/schemas/QosMonitoringInformation\'
reqAnis:
type: array
items:
\$ref: \'#/components/schemas/RequiredAccessInfo\'
minItems: 1
usgThres:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/UsageThreshold\'
notifCorreId:
type: string
EventsSubscReqDataRm:
description: this data type is defined in the same way as the
EventsSubscReqData data type, but with the OpenAPI nullable property set to
true.
type: object
required:
\- events
properties:
events:
type: array
items:
\$ref: \'#/components/schemas/AfEventSubscription\'
notifUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
reqQosMonParams:
type: array
items:
\$ref:
\'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/RequestedQosMonitoringParameter\'
minItems: 1
qosMon:
\$ref: \'#/components/schemas/QosMonitoringInformationRm\'
reqAnis:
type: array
items:
\$ref: \'#/components/schemas/RequiredAccessInfo\'
minItems: 1
usgThres:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/UsageThresholdRm\'
notifCorreId:
type: string
nullable: true
MediaComponent:
description: Identifies a media component.
type: object
required:
\- medCompN
properties:
afAppId:
\$ref: \'#/components/schemas/AfAppId\'
afRoutReq:
\$ref: \'#/components/schemas/AfRoutingRequirement\'
qosReference:
type: string
disUeNotif:
type: boolean
altSerReqs:
type: array
items:
type: string
minItems: 1
contVer:
\$ref: \'#/components/schemas/ContentVersion\'
codecs:
type: array
items:
\$ref: \'#/components/schemas/CodecData\'
minItems: 1
maxItems: 2
desMaxLatency:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Float\'
desMaxLoss:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Float\'
flusId:
type: string
fStatus:
\$ref: \'#/components/schemas/FlowStatus\'
marBwDl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRate\'
marBwUl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRate\'
maxPacketLossRateDl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PacketLossRateRm\'
maxPacketLossRateUl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PacketLossRateRm\'
maxSuppBwDl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRate\'
maxSuppBwUl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRate\'
medCompN:
type: integer
medSubComps:
type: object
additionalProperties:
\$ref: \'#/components/schemas/MediaSubComponent\'
minProperties: 1
medType:
\$ref: \'#/components/schemas/MediaType\'
minDesBwDl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRate\'
minDesBwUl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRate\'
mirBwDl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRate\'
mirBwUl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRate\'
preemptCap:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PreemptionCapability\'
preemptVuln:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PreemptionVulnerability\'
prioSharingInd:
\$ref: \'#/components/schemas/PrioritySharingIndicator\'
resPrio:
\$ref: \'#/components/schemas/ReservPriority\'
rrBw:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRate\'
rsBw:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRate\'
sharingKeyDl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uint32\'
sharingKeyUl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uint32\'
tsnQos:
\$ref: \'#/components/schemas/TsnQosContainer\'
tscaiInputDl:
\$ref: \'#/components/schemas/TscaiInputContainer\'
tscaiInputUl:
\$ref: \'#/components/schemas/TscaiInputContainer\'
MediaComponentRm:
description: This data type is defined in the same way as the MediaComponent
data type, but with the OpenAPI nullable property set to true
type: object
required:
\- medCompN
properties:
afAppId:
\$ref: \'#/components/schemas/AfAppId\'
afRoutReq:
\$ref: \'#/components/schemas/AfRoutingRequirementRm\'
qosReference:
type: string
nullable: true
altSerReqs:
type: array
items:
type: string
minItems: 1
nullable: true
disUeNotif:
type: boolean
contVer:
\$ref: \'#/components/schemas/ContentVersion\'
codecs:
type: array
items:
\$ref: \'#/components/schemas/CodecData\'
minItems: 1
maxItems: 2
desMaxLatency:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/FloatRm\'
desMaxLoss:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/FloatRm\'
flusId:
type: string
nullable: true
fStatus:
\$ref: \'#/components/schemas/FlowStatus\'
marBwDl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRateRm\'
marBwUl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRateRm\'
maxPacketLossRateDl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PacketLossRateRm\'
maxPacketLossRateUl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PacketLossRateRm\'
maxSuppBwDl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRateRm\'
maxSuppBwUl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRateRm\'
medCompN:
type: integer
medSubComps:
type: object
additionalProperties:
\$ref: \'#/components/schemas/MediaSubComponentRm\'
minProperties: 1
medType:
\$ref: \'#/components/schemas/MediaType\'
minDesBwDl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRateRm\'
minDesBwUl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRateRm\'
mirBwDl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRateRm\'
mirBwUl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRateRm\'
preemptCap:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PreemptionCapabilityRm\'
preemptVuln:
\$ref:
\'TS29571_CommonData.yaml#/components/schemas/PreemptionVulnerabilityRm\'
prioSharingInd:
\$ref: \'#/components/schemas/PrioritySharingIndicator\'
resPrio:
\$ref: \'#/components/schemas/ReservPriority\'
rrBw:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRateRm\'
rsBw:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRateRm\'
sharingKeyDl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uint32Rm\'
sharingKeyUl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uint32Rm\'
tsnQos:
\$ref: \'#/components/schemas/TsnQosContainerRm\'
tscaiInputDl:
\$ref: \'#/components/schemas/TscaiInputContainer\'
tscaiInputUl:
\$ref: \'#/components/schemas/TscaiInputContainer\'
nullable: true
MediaSubComponent:
description: Identifies a media subcomponent
type: object
required:
\- fNum
properties:
afSigProtocol:
\$ref: \'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/AfSigProtocol\'
ethfDescs:
type: array
items:
\$ref: \'#/components/schemas/EthFlowDescription\'
minItems: 1
maxItems: 2
fNum:
type: integer
fDescs:
type: array
items:
\$ref: \'#/components/schemas/FlowDescription\'
minItems: 1
maxItems: 2
fStatus:
\$ref: \'#/components/schemas/FlowStatus\'
marBwDl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRate\'
marBwUl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRate\'
tosTrCl:
\$ref: \'#/components/schemas/TosTrafficClass\'
flowUsage:
\$ref: \'#/components/schemas/FlowUsage\'
MediaSubComponentRm:
description: This data type is defined in the same way as the
MediaSubComponent data type, but with the OpenAPI nullable property set to
true. Removable attributes marBwDl and marBwUl are defined with the
corresponding removable data type.
type: object
required:
\- fNum
properties:
afSigProtocol:
\$ref: \'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/AfSigProtocol\'
ethfDescs:
type: array
items:
\$ref: \'#/components/schemas/EthFlowDescription\'
minItems: 1
maxItems: 2
nullable: true
fNum:
type: integer
fDescs:
type: array
items:
\$ref: \'#/components/schemas/FlowDescription\'
minItems: 1
maxItems: 2
nullable: true
fStatus:
\$ref: \'#/components/schemas/FlowStatus\'
marBwDl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRateRm\'
marBwUl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRateRm\'
tosTrCl:
\$ref: \'#/components/schemas/TosTrafficClassRm\'
flowUsage:
\$ref: \'#/components/schemas/FlowUsage\'
nullable: true
EventsNotification:
description: describes the notification of a matched event
type: object
required:
\- evSubsUri
\- evNotifs
properties:
accessType:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/AccessType\'
addAccessInfo:
\$ref:
\'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/AdditionalAccessInfo\'
relAccessInfo:
\$ref:
\'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/AdditionalAccessInfo\'
anChargAddr:
\$ref:
\'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/AccNetChargingAddress\'
anChargIds:
type: array
items:
\$ref: \'#/components/schemas/AccessNetChargingIdentifier\'
minItems: 1
anGwAddr:
\$ref: \'#/components/schemas/AnGwAddress\'
evSubsUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
evNotifs:
type: array
items:
\$ref: \'#/components/schemas/AfEventNotification\'
minItems: 1
failedResourcAllocReports:
type: array
items:
\$ref: \'#/components/schemas/ResourcesAllocationInfo\'
minItems: 1
succResourcAllocReports:
type: array
items:
\$ref: \'#/components/schemas/ResourcesAllocationInfo\'
minItems: 1
noNetLocSupp:
\$ref:
\'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/NetLocAccessSupport\'
outOfCredReports:
type: array
items:
\$ref: \'#/components/schemas/OutOfCreditInformation\'
minItems: 1
plmnId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PlmnIdNid\'
qncReports:
type: array
items:
\$ref: \'#/components/schemas/QosNotificationControlInfo\'
minItems: 1
qosMonReports:
type: array
items:
\$ref: \'#/components/schemas/QosMonitoringReport\'
minItems: 1
ranNasRelCauses:
type: array
items:
\$ref:
\'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/RanNasRelCause\'
minItems: 1
description: Contains the RAN and/or NAS release cause.
ratType:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RatType\'
ueLoc:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/UserLocation\'
ueLocTime:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
ueTimeZone:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/TimeZone\'
usgRep:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/AccumulatedUsage\'
tsnBridgeManCont:
\$ref:
\'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/BridgeManagementContainer\'
tsnPortManContDstt:
\$ref:
\'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/PortManagementContainer\'
tsnPortManContNwtts:
type: array
items:
\$ref:
\'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/PortManagementContainer\'
minItems: 1
AfEventSubscription:
description: describes the event information delivered in the subscription
type: object
required:
\- event
properties:
event:
\$ref: \'#/components/schemas/AfEvent\'
notifMethod:
\$ref: \'#/components/schemas/AfNotifMethod\'
repPeriod:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DurationSec\'
waitTime:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DurationSec\'
AfEventNotification:
description: describes the event information delivered in the notification
type: object
required:
\- event
properties:
event:
\$ref: \'#/components/schemas/AfEvent\'
flows:
type: array
items:
\$ref: \'#/components/schemas/Flows\'
minItems: 1
TerminationInfo:
description: indicates the cause for requesting the deletion of the Individual
Application Session Context resource
type: object
required:
\- termCause
\- resUri
properties:
termCause:
\$ref: \'#/components/schemas/TerminationCause\'
resUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
AfRoutingRequirement:
description: describes the event information delivered in the subscription
type: object
properties:
appReloc:
type: boolean
routeToLocs:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RouteToLocation\'
minItems: 1
spVal:
\$ref: \'#/components/schemas/SpatialValidity\'
tempVals:
type: array
items:
\$ref: \'#/components/schemas/TemporalValidity\'
minItems: 1
upPathChgSub:
\$ref:
\'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/UpPathChgEvent\'
addrPreserInd:
type: boolean
SpatialValidity:
description: describes explicitly the route to an Application location
type: object
required:
\- presenceInfoList
properties:
presenceInfoList:
type: object
additionalProperties:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PresenceInfo\'
minProperties: 1
SpatialValidityRm:
description: this data type is defined in the same way as the SpatialValidity
data type, but with the OpenAPI nullable property set to true
type: object
required:
\- presenceInfoList
properties:
presenceInfoList:
type: object
additionalProperties:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PresenceInfo\'
minProperties: 1
nullable: true
AfRoutingRequirementRm:
description: this data type is defined in the same way as the
AfRoutingRequirement data type, but with the OpenAPI nullable property set to
true and the spVal and tempVals attributes defined as removable.
type: object
properties:
appReloc:
type: boolean
routeToLocs:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/RouteToLocation\'
minItems: 1
nullable: true
spVal:
\$ref: \'#/components/schemas/SpatialValidityRm\'
tempVals:
type: array
items:
\$ref: \'#/components/schemas/TemporalValidity\'
minItems: 1
nullable: true
upPathChgSub:
\$ref:
\'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/UpPathChgEvent\'
addrPreserInd:
type: boolean
nullable: true
nullable: true
AnGwAddress:
description: describes the address of the access network gateway control node
type: object
anyOf:
\- required: [anGwIpv4Addr]
\- required: [anGwIpv6Addr]
properties:
anGwIpv4Addr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr\'
anGwIpv6Addr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv6Addr\'
Flows:
description: Identifies the flows
type: object
required:
\- medCompN
properties:
contVers:
type: array
items:
\$ref: \'#/components/schemas/ContentVersion\'
minItems: 1
fNums:
type: array
items:
type: integer
minItems: 1
medCompN:
type: integer
EthFlowDescription:
description: Identifies an Ethernet flow
type: object
required:
\- ethType
properties:
destMacAddr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/MacAddr48\'
ethType:
type: string
fDesc:
\$ref: \'#/components/schemas/FlowDescription\'
fDir:
\$ref: \'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/FlowDirection\'
sourceMacAddr:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/MacAddr48\'
vlanTags:
type: array
items:
type: string
minItems: 1
maxItems: 2
srcMacAddrEnd:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/MacAddr48\'
destMacAddrEnd:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/MacAddr48\'
ResourcesAllocationInfo:
description: describes the status of the PCC rule(s) related to certain media
components.
type: object
properties:
mcResourcStatus:
\$ref: \'#/components/schemas/MediaComponentResourcesStatus\'
flows:
type: array
items:
\$ref: \'#/components/schemas/Flows\'
minItems: 1
altSerReq:
type: string
TemporalValidity:
description: Indicates the time interval(s) during which the AF request is to
be applied
type: object
properties:
startTime:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
stopTime:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
#
QosNotificationControlInfo:
description: Indicates whether the QoS targets for a GRB flow are not
guaranteed or guaranteed again
type: object
required:
\- notifType
properties:
notifType:
\$ref: \'#/components/schemas/QosNotifType\'
flows:
type: array
items:
\$ref: \'#/components/schemas/Flows\'
minItems: 1
altSerReq:
type: string
#
AcceptableServiceInfo:
description: Indicates the maximum bandwidth that shall be authorized by the
PCF.
type: object
properties:
accBwMedComps:
type: object
additionalProperties:
\$ref: \'#/components/schemas/MediaComponent\'
minProperties: 1
marBwUl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRate\'
marBwDl:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/BitRate\'
UeIdentityInfo:
description: Represents 5GS-Level UE identities.
type: object
anyOf:
\- required: [gpsi]
\- required: [pei]
\- required: [supi]
properties:
gpsi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Gpsi\'
pei:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Pei\'
supi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Supi\'
#
AccessNetChargingIdentifier:
description: Describes the access network charging identifier.
type: object
required:
\- accNetChaIdValue
properties:
accNetChaIdValue:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ChargingId\'
flows:
type: array
items:
\$ref: \'#/components/schemas/Flows\'
minItems: 1
#
OutOfCreditInformation:
description: Indicates the SDFs without available credit and the corresponding
termination action.
type: object
required:
\- finUnitAct
properties:
finUnitAct:
\$ref:
\'TS32291_Nchf_ConvergedCharging.yaml#/components/schemas/FinalUnitAction\'
flows:
type: array
items:
\$ref: \'#/components/schemas/Flows\'
minItems: 1
#
QosMonitoringInformation:
description: Indicates the QoS Monitoring information to report, i.e. UL
and/or DL and or round trip delay.
type: object
properties:
repThreshDl:
type: integer
repThreshUl:
type: integer
repThreshRp:
type: integer
#
#
PduSessionTsnBridge:
description: Contains the new 5GS Bridge information and may contain the DS-TT
port and/or NW-TT port management information.
type: object
required:
\- tsnBridgeInfo
properties:
tsnBridgeInfo:
\$ref: \'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/TsnBridgeInfo\'
tsnBridgeManCont:
\$ref:
\'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/BridgeManagementContainer\'
tsnPortManContDstt:
\$ref:
\'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/PortManagementContainer\'
tsnPortManContNwtts:
type: array
items:
\$ref:
\'TS29512_Npcf_SMPolicyControl.yaml#/components/schemas/PortManagementContainer\'
minItems: 1
#
QosMonitoringInformationRm:
description: this data type is defined in the same way as the
QosMonitoringInformation data type, but with the OpenAPI nullable property set
to true.
type: object
properties:
repThreshDl:
type: integer
repThreshUl:
type: integer
repThreshRp:
type: integer
nullable: true
#
PcscfRestorationRequestData:
description: Indicates P-CSCF restoration.
type: object
oneOf:
\- required: [ueIpv4]
\- required: [ueIpv6]
properties:
dnn:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Dnn\'
ipDomain:
type: string
sliceInfo:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
supi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Supi\'
ueIpv4:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv4Addr\'
ueIpv6:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Ipv6Addr\'
#
#
QosMonitoringReport:
description: QoS Monitoring reporting information
type: object
properties:
flows:
type: array
items:
\$ref: \'#/components/schemas/Flows\'
minItems: 1
ulDelays:
type: array
items:
type: integer
minItems: 1
dlDelays:
type: array
items:
type: integer
minItems: 1
rtDelays:
type: array
items:
type: integer
minItems: 1
#
TsnQosContainer:
description: Indicates TSC Traffic QoS.
type: object
properties:
maxTscBurstSize:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ExtMaxDataBurstVol\'
tscPackDelay:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PacketDelBudget\'
tscPrioLevel:
\$ref: \'#/components/schemas/TscPriorityLevel\'
#
#
TsnQosContainerRm:
description: Indicates removable TSC Traffic QoS.
type: object
properties:
maxTscBurstSize:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ExtMaxDataBurstVolRm\'
tscPackDelay:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PacketDelBudgetRm\'
tscPrioLevel:
\$ref: \'#/components/schemas/TscPriorityLevelRm\'
nullable: true
#
TscaiInputContainer:
description: Indicates TSC Traffic pattern.
type: object
properties:
periodicity:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uinteger\'
burstArrivalTime:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
nullable: true
#
#
EventsSubscPutData:
description: Identifies the events the application subscribes to within an
Events Subscription sub-resource data. It may contain the notification of the
already met events
anyOf:
\- \$ref: \'#/components/schemas/EventsSubscReqData\'
\- \$ref: \'#/components/schemas/EventsNotification\'
#
# EXTENDED PROBLEMDETAILS
#
ExtendedProblemDetails:
description: Extends ProblemDetails to also include the acceptable service
info.
allOf:
\- \$ref: \'TS29571_CommonData.yaml#/components/schemas/ProblemDetails\'
\- type: object
properties:
acceptableServInfo:
\$ref: \'#/components/schemas/AcceptableServiceInfo\'
#
# SIMPLE DATA TYPES
#
AfAppId:
description: Contains an AF application identifier.
type: string
AspId:
description: Contains an identity of an application service provider.
type: string
CodecData:
description: Contains codec related information.
type: string
ContentVersion:
description: Represents the content version of some content.
type: integer
FlowDescription:
description: Defines a packet filter of an IP flow.
type: string
SponId:
description: Contains an identity of a sponsor.
type: string
ServiceUrn:
description: Contains values of the service URN and may include subservices.
type: string
TosTrafficClass:
description: 2-octet string, where each octet is encoded in hexadecimal
representation. The first octet contains the IPv4 Type-of-Service or the IPv6
Traffic-Class field and the second octet contains the ToS/Traffic Class mask
field.
type: string
TosTrafficClassRm:
description: this data type is defined in the same way as the TosTrafficClass
data type, but with the OpenAPI nullable property set to true
type: string
nullable: true
TscPriorityLevel:
type: integer
minimum: 1
maximum: 8
TscPriorityLevelRm:
type: integer
minimum: 1
maximum: 8
nullable: true
#
# ENUMERATIONS DATA TYPES
#
MediaType:
anyOf:
\- type: string
enum:
\- AUDIO
\- VIDEO
\- DATA
\- APPLICATION
\- CONTROL
\- TEXT
\- MESSAGE
\- OTHER
\- type: string
#
ReservPriority:
anyOf:
\- type: string
enum:
\- PRIO_1
\- PRIO_2
\- PRIO_3
\- PRIO_4
\- PRIO_5
\- PRIO_6
\- PRIO_7
\- PRIO_8
\- PRIO_9
\- PRIO_10
\- PRIO_11
\- PRIO_12
\- PRIO_13
\- PRIO_14
\- PRIO_15
\- PRIO_16
\- type: string
#
ServAuthInfo:
anyOf:
\- type: string
enum:
\- TP_NOT_KNOWN
\- TP_EXPIRED
\- TP_NOT_YET_OCURRED
\- type: string
#
SponsoringStatus:
anyOf:
\- type: string
enum:
\- SPONSOR_DISABLED
\- SPONSOR_ENABLED
\- type: string
#
AfEvent:
anyOf:
\- type: string
enum:
\- ACCESS_TYPE_CHANGE
\- ANI_REPORT
\- CHARGING_CORRELATION
\- EPS_FALLBACK
\- FAILED_RESOURCES_ALLOCATION
\- OUT_OF_CREDIT
\- PLMN_CHG
\- QOS_MONITORING
\- QOS_NOTIF
\- RAN_NAS_CAUSE
\- REALLOCATION_OF_CREDIT
\- SUCCESSFUL_RESOURCES_ALLOCATION
\- TSN_BRIDGE_INFO
\- USAGE_REPORT
\- type: string
#
AfNotifMethod:
anyOf:
\- type: string
enum:
\- EVENT_DETECTION
\- ONE_TIME
\- PERIODIC
\- type: string
#
QosNotifType:
anyOf:
\- type: string
enum:
\- GUARANTEED
\- NOT_GUARANTEED
\- type: string
#
TerminationCause:
anyOf:
\- type: string
enum:
\- ALL_SDF_DEACTIVATION
\- PDU_SESSION_TERMINATION
\- PS_TO_CS_HO
\- type: string
#
MediaComponentResourcesStatus:
anyOf:
\- type: string
enum:
\- ACTIVE
\- INACTIVE
\- type: string
#
#
FlowUsage:
anyOf:
\- type: string
enum:
\- NO_INFO
\- RTCP
\- AF_SIGNALLING
\- type: string
FlowStatus:
anyOf:
\- type: string
enum:
\- ENABLED-UPLINK
\- ENABLED-DOWNLINK
\- ENABLED
\- DISABLED
\- REMOVED
\- type: string
#
RequiredAccessInfo:
anyOf:
\- type: string
enum:
\- USER_LOCATION
\- UE_TIME_ZONE
\- type: string
#
SipForkingIndication:
anyOf:
\- type: string
enum:
\- SINGLE_DIALOGUE
\- SEVERAL_DIALOGUES
\- type: string
#
AfRequestedData:
anyOf:
\- type: string
enum:
\- UE_IDENTITY
\- type: string
#
ServiceInfoStatus:
anyOf:
\- type: string
enum:
\- FINAL
\- PRELIMINARY
\- type: string
#
PreemptionControlInformation:
anyOf:
\- type: string
enum:
\- MOST_RECENT
\- LEAST_RECENT
\- HIGHEST_BW
\- type: string
#
PrioritySharingIndicator:
anyOf:
\- type: string
enum:
\- ENABLED
\- DISABLED
\- type: string
#
PreemptionControlInformationRm:
anyOf:
\- \$ref: \'#/components/schemas/PreemptionControlInformation\'
\- \$ref: \'TS29571_CommonData.yaml#/components/schemas/NullValue\'
###### ## Annex B (normative): IMS Related P-CSCF Procedures over N5
# B.1 Provision of Service Information at P-CSCF
When the \"IMS_SBI\" feature is supported, the P-CSCF shall send service
information to the PCF upon every SIP message that includes an SDP answer
payload for the purpose of authorizing the IP flows and the QoS resources
required for a negotiated IMS session, unless the SDP payload only relates to
a circuit-switched bearer (i.e. \"c=\" line set to \"PSTN\" and an \"m=\" line
set to \"PSTN\", refer to 3GPP TS 24.292 [29]). The service information shall
be derived both from the SDP offer and the SDP answer. This ensures that the
PCF receives proper information to perform media authorization for all
possible IMS session set-up scenarios, and that the PCF is also capable of
handling session modifications. The P-CSCF may include \"servInfStatus\"
attribute set to \"FINAL\".
Additionally, the P-CSCF may send service information to the PCF when
receiving a SIP message that includes an SDP offer payload for the purpose of
performing an early bandwidth authorization check, or for enabling pre-
authorization for a UE terminated IMS session establishment or modification
with UE initiated resource reservation, or for the retrieval of network
provided access network information (see subclause B.8.2).
The P-CSCF shall send service information to the PCF when receiving a SIP
message that includes an SDP offer payload when the IMS session is an MPS
session that requires priority treatment. For a UE terminated session the
P-CSCF may send the service information derived from the SDP offer when the
SDP offer either does not include any preconditions information or includes
preconditions information indicating that the local preconditions (i.e. the
preconditions related to the remote peer) are already met. In this case, the
P-CSCF shall derive the service information only from the SDP offer and shall
include \"servInfStatus\" attribute set to \"PRELIMINARY\".
NOTE 1: For a UE terminated session setup, when the SDP offer either does not
include any preconditions information or includes preconditions information
indicating that the local preconditions (i.e. the preconditions related to the
remote peer) are already met, the terminating UE can request a resource
modification prior to sending the SDP answer. Even if the IP address and port
information in the session information derived from the SDP offer can be
insufficient for PCC rule authorization, the policy to handle such UE
initiated requests at the PCF can take into account the fact that an IMS
session establishment is ongoing, for instance in deciding whether to
authorize the request and in selecting an appropriate charging key and a
gating policy.
The P-CSCF shall derive the value of the \"fDescs\" attribute within the
service information from the SDP as follows:
\- An uplink entry in the \"fDescs\" attribute shall be formed as follows: The
destination address shall be taken from the SDP information received by the
P-CSCF in downlink direction, while the source IP address may be formed from
the address present in the SDP received by the P-CSCF in uplink direction
(taking into account only the 64 bit prefix of the Ipv6 address) Source and
destination ports shall be derived according to rules provided in 3GPP TS
29.513 [7] subclause 7.2.
EXAMPLE 1: Assuming UE A sends an SDP to UE B, the PCF of UE B uses the
address present in this SDP for the destination address of UE B's uplink entry
in the \"fDescs\" attribute, while the PCF of the UE A uses the 64 bit prefix
of the same address for the source address of UE A's uplink entry in the
\"fDescs\" attribute. If the source address is not formed from the 64 bit
prefix, the source address shall be wildcarded.
\- A downlink entry in the \"fDescs\" attribute shall be formed as follows:
The destination address shall be taken from the SDP information received by
the P-CSCF in uplink direction, while the source IP address may be formed (in
order to reduce the possibilities of QoS flow misuse) from the destination
address in the SDP received by the P-CSCF in downlink direction (taking into
account only the 64 bit prefix of the Ipv6 address) Source and destination
ports shall be derived according to rules provided in 3GPP TS 29.513 [7]
subclause 7.2.
EXAMPLE 2: Assuming UE A sends an SDP to UE B, the PCF of UE A uses the
address present in this SDP for the destination address of UE A's downlink
entry in the \"fDescs\" attribute, while the PCF of UE B uses the 64 bit
prefix of the same address for the source address of UE B's downlink entry in
the \"fDescs\" attribute. If the source address is not formed from the 64 bit
prefix, the source address shall be wildcarded.
The P-CSCF shall derive the bandwidth information within the service
information, from the \"b=AS\" SDP parameter and \"a=bw-info\" SDP parameter,
if available. If \"a=bw-info\" is used for bandwidth derivation, the P-CSCF
shall use the SDP attribute line that contains the bandwidth properties for
the IP version used by the UE, as detailed in 3GPP TS 29.513 [7] subclause
7.2. If the received \"a=bw-info\" SDP attribute line(s) contain only
bandwidth properties for an IP version that is not used by the UE, the P-CSCF
shall re-compute the bandwidth properties for the used IP version and use that
value for the bandwidth derivation as defined in 3GPP TS 26.114 [30].
NOTE 2: If no IP version is included for any of the \"a=bw-info\" SDP
attribute lines related to a certain payload type and direction then IPv6 is
assumed for all bandwidth properties related to the same direction and payload
type, on all of the related \"a=bw-info\" SDP attribute lines, see clause 19
of 3GPP TS 26.114 [30].
If \"a=bw-info\" is used for bandwidth derivation and it includes both known
and unknown bandwidth properties, the P-CSCF shall only consider the known
bandwidth properties to derive the bandwidth information and ignore the
unknown ones. If the\" a=bw-info\" line is received with an unknown
directionality, then the entire \"a=bw-info\" line shall be ignored.
For the possibly associated RTCP IP flows, the P-CSCF shall use the SDP
\"b=RR\" and \"b=RS\" parameters, if present, as specified in 3GPP TS 29.513
[7] subclause 7.2. The \"b=AS\", \"b=RR\" and \"b=RS\" parameters in the SDP
contain all the overhead coming from the IP-layer and the layers above, e.g.
IP, UDP, RTP and RTCP payload, or IP, UDP and RTCP.
For multiplexed RTP/RTCP flows (as negotiated using the \"a=rtcp-mux\" SDP
attribute defined in IETF RFC 5761 [31], a P-CSCF supporting RTP/RTCP
transport multiplexing shall derive the bandwidth information within the
service information as specified in 3GPP TS 29.513 [7] subclause 7.2.
However, if service information is received containing the \"b=TIAS\" SDP
parameter that corresponds to an SDP answer payload, and if the P-CSCF
supports this parameter, the P-CSCF may derive the bandwidth from this
parameter rather than from the \"b=AS\" SDP parameter, as detailed in 3GPP TS
29.513 [7] subclause 7.2.
When available, the P-CSCF shall also indicate to PCF, as a complement to the
Service Information, the IMS Communication Service Identifier within the
\"afAppId\" attribute. The originating P-CSCF shall take the IMS Communication
Service Identifier value from the SIP response. The terminating P-CSCF shall
take the IMS Communication Service Identifier value from the SIP request.
Otherwise, the P-CSCF may not be able to provide an IMS Communication Service
Identifier value to the PCF. The format and specific headers where IMS
communication service identifiers are transported within SIP are defined in
3GPP TS 24.229 [32].
NOTE 3: In order to indicate the IMS Communication Service Identifier to the
PCF, the originating P-CSCF sets the \"afAppId\" attribute to the ICSI
contained in the topmost occurrence of the \"+g.3gpp.icsi-ref\" header field
parameter of the Feature-Caps header field(s) of 18x or 2xx SIP response
(Feature-Caps: *;+g.3gpp.icsi-ref="urn%Aurn-7%A3gpp-service.ims.icsi.mmtel")
and the terminating P-CSCF sets the \"afAppId\" attribute to the ICSI of the
P-Asserted-Service header information received in the SIP request (e.g.
P-Asserted-Service: urn:urn-7:3gpp-service.ims.icsi.mmtel). Since the headers
and the format of the ICSI can vary depending on the case, the PCF has to be
prepared to accept the complete ICSI information received in different
formats, as described in subclause 7.2A.8.2 in 3GPP TS 24.229 [32].
Additionally, if \"ResourceSharing\" feature is supported, the P-CSCF may
include the \"sharingKeyUl\" attribute and/or \"sharingKeyDl\" attribute
within a media component of the \"medComponents\" attribute in order to
indicate the PCF that resource sharing should apply for the media components
in the related direction with the same value for the \"sharingKeyUl\"
attribute and/or \"sharingKeyDl\" attribute.
Additionally, if \"PrioritySharing\" feature is supported, the P-CSCF may
provide the \"prioSharingInd\" attribute within a media component of the
\"medComponents\" attribute as described in subclause 4.2.2.21 and 4.2.3.21.
NOTE 4: The P-CSCF obtains this information from the Application Server as
described in 3GPP TS 23.228 [33], subclause 5.4.7.9.
NOTE 5: RTCP flows are not subject to resource sharing. This requirement
cannot be met for multiplexed RTP/RTCP flows as in this case there is no
mechanism in the current release to distinguish between RTP and RTCP flows.
If the \"servUrn\" attribute does not include an emergency service URN, i.e. a
top-level service type of \"sos\" as specified in IETF RFC 5031 [34] and
possibly additional sub-service information on the type of the emergency
service and the PCF binds the IMS service session to a PDU session established
to an Emergency DNN, the PCF shall return the application error
UNAUTHORIZED_NON_EMERGENCY_SESSION to the P-CSCF. Upon receiving an
application error UNAUTHORIZED_NON_EMERGENCY_SESSION the P-CSCF shall apply
the procedures defined in 3GPP TS 24.229 [32].
NOTE 6: The PCF determines whether a PDU session is established to an
Emergency DNN based on the information received over N7 and operator
configuration.
If the \"afReqData\" attribute is provided in the \"ascReqData\" attribute
indicating \"5GS-level UE Identities required\", the PCF shall provide the
available user information for the PDU session within the \"ueIds\" attribute
included in the \"ascRespData\" attribute, where each entry shall contain
either the \"supi\", and/or the \"gpsi\" and/or the \"pei\" attributes.
The PCF may decide not to authorize requested service information. The PCF
will indicate it to the P-CSCF by rejecting the HTTP request with an HTTP
\"403 Forbidden\" response message including the \"cause\" attribute set to
\"REQUESTED_SERVICE_NOT_AUTHORIZED\". Upon receiving an HTTP \"403 Forbidden\"
response message including the \"cause\" attribute set to the value
\"REQUESTED_SERVICE_NOT_AUTHORIZED\" the P-CSCF shall apply the procedures
defined in 3GPP TS 24.229 [32].
# B.2 Enabling of IP Flows
## B.2.1 General
Prior to the completion of the SIP session set-up, i.e. until the 2xx response
to the INVITE request is received, the P-CSCF may enable or disable media IP
flows depending on operator policy, thus allowing or forbidding early media in
forward and/or backward direction. The P-CSCF may set the values of the
\"fStatus\" attribute derived from the SDP direction attributes as defined in
3GPP TS 29.513 [7] subclause 7.3.3 or set the values of the \"fStatus\"
attributes considering the em-param of the P-Early-Media header field
according to subclause B.2.2 or downgrade the values of the \"fStatus\"
attribute derived from the SDP direction attribute based on the configuration
in the P-CSCF according to subclause B.2.3. However for multiplexed RTP/RTCP
flows (as negotiated using the \"a=rtcp-mux\" SDP attribute defined in IETF
RFC 5761 [31]), a P-CSCF supporting RTP/RTCP transport multiplexing shall set
the \"fStatus\" attribute to \"ENABLED\" to prevent that RTCP is blocked. If
the P-CSCF chooses to modify the values of the \"fStatus\" as received from
the SDP direction attribute, the P-CSCF shall store the last received SDP.
When a 2xx response is received, the P-CSCF shall enable all media IP flows
according to the direction attribute within the last received SDP, as
specified in 3GPP TS 29.513 [7] subclause 7.3.3. When a 2xx response is
received and the P-CSCF previously provided the values of the \"fStatus\"
attributes different from the value derived from the SDP direction attribute
in the session information, the P-CSCF shall provide service information with
values of the \"fStatus\" attributes corresponding to the last received SDP.
NOTE: In most cases a 2xx response is a 200 (OK) response.
If the P-CSCF receives SDP answers after the completion of the SIP session
set-up, i.e. after the 2xx response to the INVITE request is received, the
P-CSCF shall provide the \"fStatus\" attribute, based on the last received SDP
answer. The \"fStatus\" attribute shall be derived from the SDP according to
3GPP TS 29.513 [7] subclause 7.3.3.
## B.2.2 Gate control procedures considering the P-Early-Media header field
Prior to the completion of the SIP session set-up, the P-CSCF may use the em-
param of the P-Early-Media header field defined in IETF RFC 5009 [35] in order
to enable or disable early media in forward and/or backward direction. If the
P-CSCF uses the em-param of the P-Early-Media header field for the gate
control of early media, the P-CSCF shall perform the following procedures.
In the terminating P-CSCF, when a SIP message with the P-Early-Media header
field is received from the UE and the policies configured in the P-CSCF
indicate that the UE is authorized to send early media, then:
1) the P-CSCF shall set the \"fStatus\" attribute to \"ENABLED\" if:
\- the received em-param(s) in the P-Early-Media header field includes
\"sendrecv\" and the last received SDP direction attribute from the UE is
\"sendrecv\" or no SDP direction attribute has been received; or
2) the P-CSCF shall set the \"fStatus\" attribute to \"ENABLED-UPLINK\" if:
\- the received em-param(s) in the P-Early-Media header field includes
\"sendrecv\" and the last received SDP direction attribute from the UE is
\"sendonly\"; or
\- the received em-param(s) in the P-Early-Media header field includes
\"sendonly\" and the last received SDP direction attribute from the UE is
\"sendrecv\" or \"sendonly\" or no SDP direction attribute has been received;
or
3) the P-CSCF shall set the \"fStatus\" attribute to \"ENABLED-DOWNLINK\" if:
\- the received em-param(s) in the P-Early-Media header field includes
\"sendrecv\" and the last received SDP direction attribute from the UE is
\"recvonly\"; or
\- the received em-param(s) in the P-Early-Media header field includes
\"recvonly\" and the last received SDP direction attribute from the UE is
\"sendrecv\" or \"recvonly\" or no SDP direction attribute has been received;
or
4) the P-CSCF shall set the \"fStatus\" attribute to \"DISABLED\" if either
the received em-param(s) in the P-Early-Media header field or the last
received SDP direction attribute from the UE includes \"inactive\"; or
5) the P-CSCF may set the \"fStatus\" attribute to \"DISABLED\" or apply the
rules defined in subclause B.2.2 if the received em-param(s) in the P-Early-
Media header field includes \"sendonly\" or \"recvonly\" and the last received
SDP direction attribute from the UE is \"recvonly\" or \"sendonly\"
respectively.
NOTE 1: If the UE is authorized to send early media, the P-CSCF will not
remove or modify the P-Early-Media header field according to 3GPP TS 24.229
[32].
When a SIP message with the P-Early-Media header field is received from the
functional entity within the trust domain, and if:
\- the P-Early-Media header field includes the \"gated\" parameter, then the
P-CSCF may decide not to perform the gate control of early media; or
\- the P-Early-Media header field does not include the \"gated\" parameter,
then the P-CSCF shall perform the following procedures:
1) the P-CSCF shall set the \"fStatus\" attribute to \"ENABLED\" if:
\- the received em-param(s) in the P-Early-Media header field includes
\"sendrecv\" and the last received SDP direction attribute from the functional
entity is \"sendrecv\" or no SDP direction attribute has been received; or
2) the P-CSCF shall set the \"fStatus\" attribute to \"ENABLED-DOWNLINK\" if:
\- the received em-param(s) in the P-Early-Media header field includes
\"sendrecv\" and the last received SDP direction attribute from the functional
entity is \"sendonly\"; or
\- the received em-param(s) in the P-Early-Media header field includes
\"sendonly\" and the last received SDP direction attribute from the functional
entity is \"sendrecv\" or \"sendonly\" or no SDP direction parameter has been
received; or
3) the P-CSCF shall set the \"fStatus\" attribute to \"ENABLED-UPLINK\" if:
\- the received em-param(s) in the P-Early-Media header field includes
\"sendrecv\" and the last received SDP direction attribute from the functional
entity is \"recvonly\"; or
\- the received em-param(s) in the P-Early-Media header field includes
\"recvonly\" and the last received SDP direction attribute from the functional
entity is \"sendrecv\" or \"recvonly\" or no SDP direction parameter has been
received; or
4) the P-CSCF shall set the \"fStatus\" attribute to \"DISABLED\" if either
the received em-param(s) in the P-Early-Media header field or the last
received SDP direction attribute from the functional entity includes
\"inactive\"; or
5) the P-CSCF may set the \"fStatus\" attribute to \"DISABLED\" or apply the
rules defined in subclause A.2.2 if the received em-param(s) in the P-Early-
Media header field includes \"sendonly\" or \"recvonly\" and the last received
SDP direction attribute from the functional entity is \"recvonly\" or
\"sendonly\" respectively.
NOTE 2: According to IETF RFC 5009 [35], the non-direction parameter \"gated\"
can be included after the direction parameter (e.g. \"sendrecv\") in the
parameter list. The proxy performing gating of early media can add the
parameter before forwarding the SIP message.
When a SIP message without the P-Early-Media header field is received from
either the functional entity within the trust domain or the UE that is
authorized to send early media, then the P-CSCF may set the \"fStatus\"
attribute to \"DISABLED\" or apply the rules defined in subclause B.2.3 or
apply the rules defined in 3GPP TS 29.513 [7] subclause 7.3.3.
NOTE 3: As indicated in IETF RFC 5009 [35] the applicable preconditions need
to be met in order to allow early media in a particular direction.
When a SIP message is received from the functional entity other than the
functional entity within the trust domain or the UE that is authorized to send
early media, then the P-CSCF shall not use the received em-param(s) in the
P-Early-Media header field and may apply the rules defined in subclause B.2.2
or apply the rules defined in 3GPP TS 29.513 [7] subclause 7.3.3.
NOTE 4: The P-CSCF will remove or modify the P-Early-Media header field in the
above case.
## B.2.3 Gate control procedures based on the configuration in the P-CSCF
Prior to the completion of the SIP session set-up, the P-CSCF may downgrade
the values of the \"fStatus\" attributes derived from the SDP direction
attributes based on the configuration in the P-CSCF. If the P-CSCF has the
configuration for the gate control of early media, the P-CSCF shall perform
the following procedures.
NOTE: The gate control of early media can be configured in the P-CSCF per UE
basis.
When the \"fStatus\" attribute derived from the SDP direction attribute is
\"ENABLED\", then the P-CSCF may downgrade the value of the \"fStatus\"
attribute to the value \"DISABLED\", \"ENABLED_UPLINK\", or
\"ENABLED_DOWNLINK\" based on the configuration in the P-CSCF.
When the \"fStatus\" attribute derived from the SDP direction attribute is
\"ENABLED_UPLINK\" or \"ENABLED_DOWNLINK\", then the P-CSCF may downgrade the
value of the \"fStatus\" attribute to the value \"DISABLED\" based on the
configuration in the P-CSCF.
# B.3 Support for SIP forking
The P-CSCF shall be able to handle forking when PCC is applied and the
\"IMS_SBI\" feature is supported. Forking can occur as specified in 3GPP TS
23.228 [33]. The related UE procedures are described in 3GPP TS 24.229 [32].
## B.3.1 PCC rule provisioning for early media for forked responses
When a SIP session has been originated by a connected UE, the P-CSCF may
receive multiple provisional responses due to forking before the first final
answer is received. Multiple early media session may be established during
this process.
The UE and the P-CSCF become aware of the forking only when a subsequent
provisional response arrives for a new early dialogue. After the first early
media session is established, for each subsequent provisional response
establishing an additional early media session, the P-CSCF shall use an
Npcf_PolicyAuthorization_Update service operation containing the
\"sipForkInd\" attribute with value \"SEVERAL_DIALOGUES\" and include the
service information derived from the latest provisional response.
The P-CSCF shall also provision the service information derived from any
subsequent SDP offer-answer exchange within an early dialogue (e.g. in PRACK
and OK(PRACK), or UPDATE and OK(UPDATE) ) using an
Npcf_PolicyAuthorization_Update service operation containing the
\"sipForkInd\" attribute with value \"SEVERAL_DIALOGUES\" and the derived
service information.
When receiving an Npcf_PolicyAuthorization_Update service operation containing
the \"sipForkInd\" attribute with value \"SEVERAL_DIALOGUES\", the PCF shall
identify the existing \"Individual Application Session Context\" resource with
existing authorization information.
The PCF shall send additional PCC Rules or individual service data flow
filters to already provided PCC rules as required by the \"fDescs\" attribute
within the AF session context information to the SMF. The PCF shall authorize
any additional media components and any increased QoS requirements for the
previously authorized media components, as requested within the service
information.
The PCF shall authorize the maximum bandwidth required by any of the
dialogues, but not the sum of the bandwidths required by all dialogues. Thus,
the QoS authorized for a media component is equal to the highest QoS requested
for that media component by any of the forked responses.
The PCF shall open or close the gates for service flows depending on the flow
status that is being provisioned. However, if a flow ID has been enabled in
uplink or downlink direction or both way within previous service information,
it shall remain enabled even if the PCF receives service information that
disable this flow ID within an Npcf_PolicyAuthorization_Update service
operation containing the \"sipForkInd\" attribute with value
\"SEVERAL_DIALOGUES\".
If the P-CSCF provides one or more media components within the
\"medComponents\" attribute with the \"fStatus\" attribute set to \"REMOVED\"
for previously authorized media component(s) the media component shall remain
as authorized and the PCF shall not take any action on that media
component(s).
NOTE: There can be cases where a forked response could not support some of the
media components included in the SDP Offer (e.g. when early session
disposition SDP as described in Annex B.6 applies, the forked response related
to the early session could include the port set to zero for those media
components not related to the early session or when a subsequent SDP Offer-
Answer to indicate that some media is disabled). For those cases the P-CSCF
will indicate the PCF about the removal of the corresponding media component.
However this media component is already supported by other UEs and the PCF
needs to maintain the corresponding PCC rules until the final SDP answer is
received in the P-CSCF in order to avoid the release of resources in the
network.
## B.3.2 Updating the provisioned PCC rules at the final answer
The P-CSCF shall store the SDP information for each early dialogue separately
till the first final SIP answer is received. Then the related early dialogue
is progressed to an established dialogue to establish the final SIP session.
All the other early dialogues are terminated. The service information for the
SIP session is updated to match the requirements of the remaining early
dialogue only.
When receiving the first final SIP response, the P-CSCF shall send an
Npcf_PolicyAuthorization_Update service operation setting to null the
\"sipForkInd\" attribute and shall include the service information derived
from the SDP corresponding to the dialogue of the final response. The P-CSCF
shall provision the full service information including the applicable
\"fDescs\" attribute and \"fStatus\" attribute.
When receiving an Npcf_PolicyAuthorization_Update service operation with a
\"sipForkInd\" attribute with value \"SINGLE_DIALOGUE\", the PCF shall update
installed PCC Rules information and Authorized-QoS information to match only
the requirements of the service information within this
Npcf_PolicyAuthorization_Update service operation. The PCF should immediately
remove PCC Rule(s) or individual service data flow filters not matching IP
flow(s) in the updated Service Information, to reduce the risk for initial
clipping of the media stream, and to minimize possible misuse of resources.
The PCF shall also open or close the gates for service flows according to the
flow status in the received service information.
# B.4 Notification of AF Signalling Transmission Path Status
When the P-CSCF receives an initial REGISTER SIP message from an attached UE,
the P-CSCF may subscribe to notifications of the status of the AF signalling
transmission path using the procedures specified in subclause 4.2.6.7. Once
the P-CSCF has subscribed, the P-CSCF may receive notifications from the PCF
according to subclause 4.2.5.10.
NOTE: This procedure is not applicable for IMS registrations for Emergency
sessions.
The P-CSCF shall cancel the subscription to notification of the status of the
AF signalling transmission path when the AF signalling to that particular user
is terminated (i.e. when the user is de-REGISTERED from the IM CN subsystem).
When the P-CSCF receives a notification of loss of signalling connectivity
from the PCF, the P-CSCF shall behave as defined in 3GPP TS 24.229 [32].
# B.5 Indication of Emergency Registration and Session Establishment
When the P-CSCF receives an initial REGISTER SIP message for an IMS emergency
registration or an INVITE SIP message for an emergency session and the P-CSCF
determines that there are no IMS-level roaming interfaces, and the \"IMS_SBI\"
feature is supported the P-CSCF may request the PCF to provide the 5GS-Level
UE identities (GPSI, SUPI, PEI) available for that PDU session using the
procedure as specified in this subclause (for an IMS emergency registration)
or B.5.1 (for an IMS emergency session establishment).
A P-CSCF may request the PCF to provide the 5GS-level identities (GPSI, SUPI,
PEI) available for that PDU session when no service information is available
in the AF. To do so, the P-CSCF shall create an \"Individual Application
Session Context\" resource in the PCF for the AF signalling using an
Npcf_PolicyAuthorization_Create service operation. The P-CSCF shall provide
the UE's IP address (using either the \"ueIpv4\" attribute or the \"ueIpv6\"
attribute) and the \"afReqData\" attribute set to \"UE_IDENTITY\". The AF
shall include the \"servUrn\" attribute set to the value \"sos\", in order to
indicate that the new AF session context relates to emergency traffic that is
not related to a specific emergency service.
If the P-CSCF supports the SBI Message Priority mechanism for an emergency
session, it shall include the \"3gppâ€‘Sbiâ€‘Messageâ€‘Priority\" custom HTTP header
towards the PCF as described in subclause 6.8.2 of 3GPP TS 29.500 [5].
NOTE: If the P-CSCF supports the SBI Message Priority mechanism for an
emergency session, the P-CSCF includes the \"3gpp-Sbi-Message-Priority\"
custom HTTP header based on P-CSCF policies in relation to valid values of the
\"servUrn\" attribute. The highest user priority value is mapped to the
corresponding lowest value of the \"3gpp-Sbi-Message-Priority\" custom HTTP
header.
When the PCF receives an Npcf_PolicyAuthorization_Create service operation as
described in the preceding paragraphs from the P-CSCF, the PCF shall perform
session binding as described in 3GPP TS 29.513 [7]. When the PCF receives the
\"servUrn\" attribute indicating an emergency session, the PCF may apply
special policies, for instance prioritising service flows relating to the AF
session context or allowing these service flows free of charge.
When the \"servUrn\" attribute indicates that the AF session context relates
to emergency traffic and the \"afReqData\" attribute is received indicating
\"UE_IDENTITY\", the PCF shall provide the requested available user
information (GPSI, SUPI, PEI) for the PDU session within \"ueIds\" attribute
within the \"ascRespData\" in the HTTP \"201 Created\" response.
When the P-CSCF receives the HTTP \"201 Created\" response with the 5GS-level
UE identities from the PCF, the P-CSCF stores the \"ueIds\" received within
\"Individual Application Session Context\" resource returned in the HTTP \"201
Created\" response and behaves as defined in 3GPP TS 24.229 [32].
NOTE: The user information received within the \"ueIds\" attribute can be used
to support PSAP callback functionality for anonymous IMS emergency sessions.
See 3GPP TS 23.167 [40] for further information.
The P-CSCF may decide to delete the \"Individual Application Session Context\"
resource at any time. In that case, the Npcf_PolicyAuthorization_Delete
service operation, as described in subclause 4.2.4.2.
A SIP INVITE request can contain a service URN as defined in IETF RFC 5031
[34] within the request URI. If the service within this URN is \"sos\",
possibly with additional sub-service information, the P-CSCF shall provision
this service and sub-service information within the \"servUrn\" attribute
towards the PCF. The P-CSCF may also provision possible information about
other services received within the service URN.
# B.6 Support for Early Session disposition SDP
## B.6.1 General
As a network option, when the \"IMS_SBI\" feature is supported, the P-CSCF may
support the PCC procedures in the present subclause to handle \"early
session\" disposition type SDP, as standardised in IETF RFC 3959 [38].
## B.6.2 Service Information Provisioning for Early Media
The P-CSCF can receive \"early session\" disposition SDP in addition to
\"session\" disposition SDP in SIP early dialogues.
The P-CSCF shall then provision service information derived both from the
\"early session\" disposition SDP and \"session\" disposition SDP applying the
procedures in clauses B.1, B.2, and B.3, and in the present subclause.
The P-CSCF shall apply the mapping rules in Annex C to derive the flow
identifiers from \"early session\" disposition SDP.
If a single media line with one media type (e.g. \"audio\" or \"video\") is
contained in \"early session\" disposition SDP and a single media line with
the same media type is contained in the \"session\" disposition SDP of the
same SIP dialogue, and both media lines describe service flows of the same
directionality (uplink, downlink, or bidirectional), the P-CSCF should
describe those SDP media lines in the same session information media component
(with the same flow ID).
The \"early session\" disposition SDP can also contain media lines of a type
not included in the \"session\" disposition SDP, or several media lines of the
same type. Such media components shall be described in own media components in
the service information.
If the P-CSCF desires to invoke special policies or separate event
notifications for an \"early session\" disposition media line, it may choose
to provision a separate session information media component even if a media
line with the same media type and directionality is contained in \"session\"
disposition SDP.
NOTE 1: A PCF is then likely to supply separate PCC rules for early media and
the corresponding final media. This may lead to an over provisioning of
resources during call establishment and a subsequent reconfiguration of the
radio bearer, or even to a call failure if the extra resources are not
authorized or available.
If the P-CSCF receives \"early session\" disposition SDP before any
\"session\" disposition SDP and supplies service information derived from the
\"early session\" disposition SDP at this point of time, it shall use
dedicated media components relating only to the \"early session\" disposition
SDP in the service information.
NOTE 2: The \"session\" disposition SDP offer will frequently occur before the
\"early session\" disposition SDP offer, but can also occur in parallel or in
exceptional cases afterwards. The \"session\" disposition SDP answer can be
contained in the same SIP message as the \"early session\" disposition SDP
offer, or can be sent in a 200 OK (INVITE), i.e. after the \"early session\"
disposition SDP answer.
If the P-CSCF includes any media component relating both to \"early session\"
disposition SDP and \"session\" disposition SDP in the service information,
the P-CSCF shall:
\- provision the service information derived from \"early session\"
disposition SDP and the service information derived from \"session\"
disposition SDP in separate Npcf_PolicyAuthorization_Update requests (to the
same \"Individual Application Session Context\" resource), and shall send a
new Npcf_PolicyAuthorization_Update request only after any previous
Npcf_PolicyAuthorization_Update request has been acknowledged; and
\- provision the first service information (either derived from \"early
session\" disposition SDP or \"session\" disposition SDP) without the
\"sipForkInd\" attribute, or with \"sipForkInd\" attribute with value
\"SINGLE_DIALOGUE\"; and
\- provision all subsequent service information during ongoing call
establishment with the \"sipForkInd\" attribute with value SEVERAL_DIALOGUES;
and
\- if an SDP answer has been received and codecs are provisioned within the
\"codecs\" attribute included in a media component of the \"medComponents\"
attribute, provision within a \"codecs\" attribute the codec derived from the
corresponding offer together with a codec derived from the SDP answer.
NOTE 3: The P-CSCF needs to provision the service information derived from
\"early session\" disposition SDP and the service information derived from
\"session\" disposition SDP in separate Npcf_PolicyAuthorization_Update
requests because the encoding of the media component does not allow for the
simultaneous provisioning of two corresponding filters.
NOTE 4: The PCF will treat service information containing the \"sipForkInd\"
attribute as described in subclause B.3.
## B.6.3 Updating the Provisioned Service Information when Dialogue is
established
The P-CSCF shall store the SDP information for the \"session\" disposition
type until the first final SIP answer is received. Then the early media
described in the \"early session\" disposition type SDP are terminated.
The P-CSCF shall then update the service information to match the requirements
of the media described in the \"session\" disposition type SDP only:
\- If the P-CSCF included any media component relating both to \"early
session\" disposition SDP and \"session\" disposition SDP in the service
information, the P-CSCF shall send an Npcf_PolicyAuthorization_Update request
without the \"sipForkInd\" attribute or with a \"sipForkInd\" attribute with
value SINGLE_DIALOGUE and shall include the service information derived from
the \"session\" disposition SDP. The P-CSCF shall provision the full service
information including the applicable \"fDescs\" attribute and \"fStatus\"
attribute.
\- The P-CSCF shall disable any media component(s) in the service information
that relate to early media only by setting their flow status to \"REMOVED\".
# B.7 Provision of Signalling Flow Information at P-CSCF
When the P-CSCF has successfully concluded the initial registration of an
attached UE, i.e., when the P-CSCF has sent to the UE a SIP 200 (OK) response
to the SIP REGISTER request, the P-CSCF may provision information about the
SIP signalling flows between the UE and itself using the procedure specified
in subclause 4.2.2.16. If the P-CSCF already has created an \"Individual
Application Session Context\" resource with the PCF related to the signalling
with the UE, e.g. one that has been opened according to the procedure
described in clause B.4, the P-CSCF shall reuse the already open session to
provision the SIP Signalling IP Flow information using the procedure specified
in subclause 4.2.3.17.
NOTE: This procedure is not applicable for IMS registrations for Emergency
sessions.
If the P-CSCF provisions information about SIP signalling flows, the P-CSCF
shall ensure that for each signalling IP flow information it provides, the
flow descriptions within the \"fDescs\" attribute shall accurately reflect the
IP flow information as seen in the IP header \'on the wire\'. The P-CSCF shall
set the value of the \"afSigProtocol\" attribute to \"SIP\".
When the P-CSCF de-registers the UE and terminates SIP Signalling to the UE,
the P-CSCF shall de-provision the SIP Signalling IP flow information from the
PCRF as described in subclauses 4.2.2.16 and 4.2.3.17.
# B.8 Retrieval of network provided location information
## B.8.1 General
According to clause E.7 of 3GPP TS 23.228 [33], the P-CSCF can use PCC to
retrieve network provided location information. Information flows related to
the distribution of network provided location information within the IMS are
provided in Annex R of 3GPP TS 23.228 [33].
The following subclauses provide optional PCC procedures to support the
retrieval of network provided location information.
The originating P-CSCF can, depending on operator policy, retrieve the user
location and/or UE Time Zone information either before sending the INVITE
towards the terminating side or upon reception of the SDP answer from the
terminating side.
## B.8.2 Retrieval of network provided location information at originating
P-CSCF for inclusion in SIP Request
If the originating P-CSCF is required by operator policy to retrieve network
provided location information before forwarding a SIP INVITE request, upon
reception of the SIP INVITE/UPDATE request, the P-CSCF shall invoke:
\- the Npcf_PolicyAuthorization_Create service operation according to
subclause 4.2.2.14 (SIP INVITE request); or
\- the Npcf_PolicyAuthorization_Update service operation according to
subclause 4.2.3.14 or the Npcf_PolicyAuthorization_Subscribe service operation
according to subclause 4.2.6.6 (SIP INVITE/UPDATE request);
including in the corresponding HTTP request:
\- an entry of the \"AfEventSubscription\" data type in the \"events\"
attribute with:
a) the \"event\" attribute set to the value \"ANI_REPORT\"; and
b) the \"notifMethod\" attribute set to the value \"ONE_TIME\"; and
\- the \"reqAnis\" attribute, with the required access network information,
i.e. user location and/or user time zone information).
If the SIP INVITE request is an initial SIP INVITE request, the P-CSCF shall
create a new \"Individual Application Session Context\" for the new SIP
session with the Npcf_PolicyAuthorization_Subscribe service operation
according to subclause 4.2.6.6 (if no session information is included) or with
the Npcf_PolicyAuthorization_Create service operation according to subclause
4.2.2.14 (if preliminary session information is included).
The P-CSCF will receive the access network information from the PCF within the
Npcf_PolicyAuthorization_Notify service operation as described in subclause
4.2.5.11 and should include this access network information in the SIP
INVITE/UPDATE requests that it forwards. When the retrieved access network
information corresponds to the \"tnapId\" or \"twapId\" attribute, the P-CSCF
may also map the retrieved access network information to a Geographical
Identifier for routing, as specified in clause E.8 of 3GPP TS 23.228 [33].
## B.8.3 Retrieval of network provided location information at originating
P-CSCF for inclusion in SIP response confirmation
If an originating P-CSCF is required by operator policy to retrieve network
provided location information before forwarding an SDP answer, the P-CSCF
shall apply the following procedures.
Upon reception of an SDP offer, the P-CSCF may invoke the
Npcf_PolicyAuthorization_Create service operation to the PCF according to
clause B.1 and may include in the corresponding HTTP POST request:
\- an entry of the \"AfEventSubscription\" data type in the \"events\"
attribute with:
a) the \"event\" attribute set to the value \"ANI_REPORT\"; and
b) the \"notifMethod\" attribute set to the value \"ONE_TIME\"; and
\- the \"reqAnis\" attribute, with the required access network information,
i.e. user location and/or user time zone information).
Upon reception of an SDP answer, the P-CSCF will invoke the
Npcf_PolicyAuthorization_Update service operation to the PCF according to
clause B.1. If the P-CSCF has not requested access network information upon
reception of the SDP offer, the P-CSCF shall include in the corresponding HTTP
PATCH request:
\- an entry of the \"AfEventSubscription\" data type in the \"events\"
attribute with:
a) the \"event\" attribute set to the value \"ANI_REPORT\"; and
b) the \"notifMethod\" attribute set to the value \"ONE_TIME\"; and
\- the \"reqAnis\" attribute, with the required access network information,
i.e. user location and/or user time zone information).
The P-CSCF will receive the access network information from the PCF in the
Npcf_PolicyAuthorization_Notify service operation and should include this
access network information in the SIP message with the response confirmation
before forwarding it. When the retrieved access network information
corresponds to the \"tnapId\" or \"twapId\" attribute, the P-CSCF may also map
the retrieved access network information to a Geographical Identifier for
routing, as specified in clause E.8 of 3GPP TS 23.228 [33].
## B.8.4 Retrieval of network provided location information at terminating
P-CSCF
If a terminating P-CSCF is required by operator policy to retrieve network
provided location information at session establishment and/or modification,
the P-CSCF shall apply the following procedures.
The terminating P-CSCF may request network provided location information upon
reception of a SIP INVITE request in the following manner:
\- if the SIP INVITE request is an initial SIP INVITE request, the P-CSCF
shall create a new \"Individual Application Session Context\" for the new SIP
session with the Npcf_PolicyAuthorization_Subscribe service operation
according to subclause 4.2.6.6 (if no session information is included) or with
the Npcf_PolicyAuthorization_Create service operation according to subclause
4.2.2.14 (if preliminary session information is included);
\- if the SIP INVITE contains an SDP offer, the P-CSCF shall include in the
corresponding HTTP request:
a) an entry of the \"AfEventSubscription\" data type in the \"events\"
attribute with:
(i) the \"event\" attribute set to the value \"ANI_REPORT\"; and
(ii) the \"notifMethod\" attribute set to the value \"ONE_TIME\";
b) the \"reqAnis\" attribute, with the required access network information,
i.e. user location and/or user time zone information);
c) service information derived from the SDP offer; and
d) the \"servInfStatus\" attribute with the value set to \"PRELIMINARY\"; and
\- if the SIP INVITE does not contain an SDP offer, the P-CSCF shall include
in the corresponding HTTP request:
a) an entry of the \"AfEventSubscription\" data type in the \"events\"
attribute with:
(i) the \"event\" attribute set to the value \"ANI_REPORT\"; and
(ii) the \"notifMethod\" attribute set to the value \"ONE_TIME\"; and
b) the \"reqAnis\" attribute, with the required access network information,
i.e. user location and/or user time zone information).
Upon reception of a SIP response that requires the inclusion of access network
information, if the P-CSCF has not already requested network provided location
information upon reception of the corresponding SIP INVITE request, the P-CSCF
shall request network provided location information in the following manner:
\- if an \"Individual Application Session Context\" related to service data
has not yet been created, the P-CSCF shall create an \"Individual Application
Session Context\" for the new SIP session with the
Npcf_PolicyAuthorization_Subscribe service operation according to subclause
4.2.6.6 (if no session information is included) or with the
Npcf_PolicyAuthorization_Create service operation according to subclause
4.2.2.14 (if session information is included);
\- if the SIP response includes an SDP answer, the P-CSCF shall send an HTTP
request to the PCF according to clause B.1; the P-CSCF shall include in this
HTTP request:
a) an entry of the \"AfEventSubscription\" data type in the \"events\"
attribute with:
(i) the \"event\" attribute set to the value \"ANI_REPORT\"; and
(ii) the \"notifMethod\" attribute set to the value \"ONE_TIME\"; and
b) the \"reqAnis\" attribute, with the required access network information,
i.e. user location and/or user time zone information);
\- if the SIP response does not contain an SDP body, the P-CSCF shall include
in the corresponding HTTP request:
a) an entry of the \"AfEventSubscription\" data type in the \"events\"
attribute with:
(i) the \"event\" attribute set to the value \"ANI_REPORT\"; and
(ii) the \"notifMethod\" attribute set to the value \"ONE_TIME\"; and
b) the \"reqAnis\" attribute, with the required access network information,
i.e. user location and/or user time zone information); and
\- if the SIP response includes an SDP offer, the P-CSCF shall include in the
corresponding HTTP request:
\- a) an entry of the \"AfEventSubscription\" data type in the \"events\"
attribute with:
(i) the \"event\" attribute set to the value \"ANI_REPORT\"; and
(ii) the \"notifMethod\" attribute set to the value \"ONE_TIME\";
b) the \"reqAnis\" attribute, with the required access network information,
i.e. user location and/or user time zone information);
c) service information derived from the SDP offer; and
d) the \"servInfStatus\" attribute with the value set to \"PRELIMINARY\".
The P-CSCF will receive the access network information from the PCF in the
Npcf_PolicyAuthorization_Notify service operation and should include this
access network information in the appropriate SIP response before forwarding
it. When the retrieved access network information corresponds to the
\"tnapId\" or \"twapId\" attribute, the P-CSCF may also map the retrieved
access network information to a Geographical Identifier for routing, as
specified in clause E.8 of 3GPP TS 23.228 [33].
## B.8.5 Provisioning of network provided location information at SIP session
release
If a P-CSCF is required by operator policy to include network provided
location information in SIP session release signalling, the P-CSCF shall apply
the following procedures:
Upon reception of a SIP session release request that requires the inclusion of
network provided location information, the P-CSCF will invoke the
Npcf_PolicyAuthorization_Delete service operation to the PCF according to
subclause 4.2.4.6 and shall include in the HTTP request:
\- an entry of the \"AfEventSubscription\" data type in the \"events\"
attribute with:
a) the \"event\" attribute set to the value \"ANI_REPORT\"; and
b) the \"notifMethod\" attribute set to the value \"ONE_TIME\"; and
\- the \"reqAnis\" attribute, with the required access network information,
i.e. user location and/or user time zone information).
The P-CSCF will receive the access network information from the PCF in the
Npcf_PolicyAuthorization_Delete service operation according to subclause
4.2.4.6 and shall include this access network information in the appropriate
SIP message before forwarding it. When the retrieved access network
information corresponds to the \"tnapId\" or \"twapId\" attribute, the P-CSCF
may also map the retrieved access network information to a Geographical
Identifier for routing, as specified in clause E.8 of 3GPP TS 23.228 [33].
# B.9 Resource Sharing
The P-CSCF may indicate to the PCF that media of an \"Individual Application
Session Context\" resource may share resources with media belonging to other
\"Individual Application Session Context\" resources according to 3GPP TS
23.228 [33].
If the P-CSCF determines that resource sharing is possible, it may at creation
of a new \"Individual Application Session Context\" resource, include the
\"sharingKeyUl\" attribute and/or \"sharingKeyDl\" attribute indicating that
media resources may be shared in the related direction. The P-CSCF shall
assign a distinct value for the \"sharingKeyUl\" attribute and/or
\"sharingKeyDl\" attribute for each media component within the
\"medComponents\" attribute.
NOTE 1: When resource sharing applies to both directions for a certain media
component, the P-CSCF can assign the same value for \"sharingKeyUl\" attribute
and \"sharingKeyDl\" attribute within the same media component.
The P-CSCF shall not include the \"sharingKeyUl\" attribute and/or
\"sharingKeyDl\" attribute within the media components in the
\"medComponents\" attribute when the \"Individual Application Session
Context\" resource relates to an Emergency Session.
The PCF shall not include the \"sharingKeyUl\" attribute and/or
\"sharingKeyDl\" attribute for those PCC/QoS Rules related to the RTCP
traffic.
Trigger conditions that require applying or stopping resource sharing are
described in 3GPP TS 24.229 [32].
NOTE 2: When P-CSCF needs to stop sharing according to the procedures
described in 3GPP TS 24.229 [32], the P-CSCF will provide \"null\" value for
the \"sharingKeyUl\" attribute and/or \"sharingKeyDl\" attribute within the
media component in the \"medComponents\" attribute.
# B.10 Handling of MCPTT priority call
## B.10.1 General
Within the framework of MCPTT, when the SIP Core (3GPP TS 24.379 [41]) is
implemented by an IMS core network, if the P-CSCF receives a SIP request
message including a Resource-Priority header field with a namespace field and
priority value defined for MCPTT for adjusting the priority of an MCPTT
session, the P-CSCF shall provide the \"resPrio\" attribute and the
\"mcpttId\" in the Npcf_PolicyAuthorization_Create request as defined in
subclause B.13.2 to allow the PCF to set the corresponding PCC rule(s)
according to the prioritized MCPTT service. Additionally, if
\"PrioritySharing\" feature is supported, the P-CSCF may provide the
\"prioSharingInd\" attribute within the media component included in the
\"medComponents\" attribute as described in clause B.1. For MCPTT the service
priority and the priority sharing indicator are defined in 3GPP TS 24.379
[41].
NOTE 1: The process of adjusting priority may occur several times during the
course of one session, e.g. a normal MCPTT group call elevated to an MCPTT
emergency group call, returned to a normal priority MCPTT group call, elevated
to an MCPTT imminent peril group call and returned to a normal priority MCPTT
group call.
NOTE 2: Upon reception of a request that requires the adjustment of the MCPTT
priority, the PCF is expected to derive the PCC Rules corresponding to the
this MCPTT session, as appropriate according to operator policies.
NOTE 3: The PCF can identify an MCPTT call using the IMS Communication Service
Identifier specific to MCPTT, which is provided by the P-CSCF in the
\"afAppId\" attribute in the Npcf_PolicyAuthorization_Create request sent to
PCF.
## B.10.2 Determination of MCPTT priority parameter values
When the P-CSCF receives an authorized Resource-Priority header field
containing an appropriate namespace and priority value used for MCPTT in SIP
signalling, the P-CSCF shall include the \"mcpttId\" attribute and the
\"resPrio\" attribute in the corresponding Npcf_PolicyAuthorization service
operation towards the PCF.
The \"mcpttId\" attribute shall include the namespace defined for MCPTT as
received within the Resource-Priority header field.
NOTE: Two different values are defined for the MCPTT-Identifier AVP, one for
each namespace value defined for MCPTT (see IETF RFC 8101 [42]).
The \"resPrio\" attribute shall contain the priority value of the Resource-
Priority header; the lowest priority shall be mapped to PRIO_1 (Resource-
Priority header value 0), the next after the lowest to PRIO_2 (Resource-
Priority header value 1), and so on up to the highest priority which shall be
mapped to PRIO_16 (Resource-Priority header value 15).
Additionally, when the P-CSCF receives information about priority sharing from
an MCPTT server that supports simultaneous sessions and that needs to share a
common priority for several MCPTT sessions and if \"PrioritySharing\" feature
is supported, the P-CSCF may include the \"prioSharingInd\" attribute within
the media component received in the \"medComponents\" attribute in the
corresponding Npcf_PolicyAuthorization service operation. See 3GPP TS 24.379
[41] for further information.
# B.11 Handling of MCVideo priority call
## B.11.1 General
Within the framework of MCVideo, when the SIP Core (3GPP TS 23.281 [34]) is
implemented by an IMS core network, if the P-CSCF receives a SIP request
message including a Resource-Priority header field with a namespace field and
priority value defined for MCVideo for adjusting the priority of an MCVideo
session, the P-CSCF shall provide the \"resPrio\" attribute and the
\"mcVideoId\" in the Npcf_PolicyAuthorization_Create request as defined in
subclause B.15.2 to allow the PCF to set the corresponding PCC rule(s)
according to the prioritized MCVideo service.
NOTE 1: The process of adjusting priority may occur several times during the
course of one session, e.g. a normal MCVideo group call elevated to an MCVideo
emergency group call and returned to a normal priority MCVideo group call,
elevated to an MCVideo imminent peril group call and returned to a normal
priority MCVideo group call.
NOTE 2: Upon reception of a request that requires the adjustment of the
MCVideo priority, the PCF is expected to derive the PCC Rules corresponding to
the this MCVideo session, as appropriate according to operator policies.
NOTE 3: The PCF can identify an MCVideo call using the IMS Communication
Service Identifier specific to MCVideo, which is provided by the P-CSCF in the
\"afAppId\" attribute in the Npcf_PolicyAuthorization_Create request sent to
PCF.
## B.11.2 Determination of MCVideo priority parameter values
When the P-CSCF receives an authorized Resource-Priority header field
containing an appropriate namespace and priority value used for MCVideo in SIP
signalling, the P-CSCF shall include the \"mcVideoId\" attribute and the
\"resPrio\" attribute in the corresponding Npcf_PolicyAuthorization service
operation towards the PCF.
The \"mcVideoId\" attribute shall include the namespace defined for MCVideo as
received within the Resource-Priority header field.
The \"resPrio\" attribute shall contain the priority value of the Resource-
Priority header; the lowest priority shall be mapped to PRIO_1 (Resource-
Priority header value 0), the next after the lowest to PRIO_2 (Resource-
Priority header value 1), and so on up to the highest priority which shall be
mapped to PRIO_16 (Resource-Priority header value 15).
# B.12 Notification Access Type Change
When the P-CSCF receives an initial SIP REGISTER message or a SIP INVITE
message from an attached UE, the P-CSCF may request from the PCF the
information about the access type the UE is attached to using the procedure
specified in subclauses 4.2.2.2, 4.2.3.2 and 4.2.6.2.
NOTE 1: This procedure is not applicable for IMS registrations for Emergency
sessions.
NOTE 2: The P-CSCF can request information about the access type as part of
the SIP session setup when it is only interested in the related information
when the IMS session is ongoing.
If the P-CSCF requests information about the access type, the P-CSCF shall
also subscribe within the same Npcf_PolicyAuthorization service operation to
notifications for changes of the access type used by the UE. The P-CSCF shall
include an entry of the \"AfEventSubscription\" data type in the \"events\"
attribute with the \"event\" attribute set to the value
\"ACCESS_TYPE_CHANGE\".
When the P-CSCF receives from the PCF the access type:
\- in the subscription request response within the HTTP response; or
\- in the notification of access type change in an HTTP POST request from the
PCF,
the P-CSCF shall store the access type information received within the
\"accessType\" attribute and the RAT type information received within
\"ratType\" attribute and use the received information as per P-CSCF
procedures in 3GPP TS 24.229 [32].
The P-CSCF may receive subsequent notifications for changes of the access type
from the PCF according to subclause 4.2.5.2. When the P-CSCF receives a
notification of the change of the access type used by the UE, the P-CSCF shall
store the new access type information and RAT type information and use the
received information as per P-CSCF procedures in 3GPP TS 24.229 [32].
NOTE 3: The subscription to receive information about the access type will be
cancelled when the corresponding Individual Application Session Context
resource is removed by the AF (i.e. when the UE is deâ€‘REGISTERED or the
related SIP call is released).
# B.13 Notification of PLMN Change
When the P-CSCF receives an initial SIP REGISTER message from an attached UE,
the P-CSCF may subscribe to notifications of PLMN changes corresponding to the
identity of the network where the UE is located using the procedure specified
in subclauses 4.2.2.2, 4.2.3.2 and 4.2.6.2.
When the P-CSCF receives the subscription request response in an HTTP response
or the notification of PLMN change in an HTTP POST request from the PCF, the
P-CSCF shall store the PLMN identifier and, if available, the NID received
within the \"plmnId\" attribute and use the received information as per P-CSCF
procedures in 3GPP TS 24.229 [32].
The P-CSCF shall cancel the subscription to notification for changes of the
PLMN used by the UE when the user is de-registered from the IM CN subsystem.
# B.14 Coverage and Handoff Enhancements using Multimedia error robustness
feature (CHEM)
As a network option, the P-CSCF may support the PCC procedures in the present
clause to handle the Coverage and Handoff Enhancements using Multimedia error
robustness feature (CHEM).
NOTE: When the CHEM feature is supported, improved error robustness might be
enabled by packet-loss handling procedures of the codec, codec mode, or codec
configuration to avoid, delay, or reduce the need to handoff a terminal due to
degradation in the media quality. Communicating the level of robustness of the
media to the network enables the eNB to use this information to determine a
threshold for when the terminal should be handed off to another cell, domain
(circuit-switched vs. packet-switched), or radio access technology.
When a session is initiated or modified the P-CSCF supporting the CHEM feature
shall derive the \"maxPacketLossRateDl\" attribute and \"maxPacketLossRateUl\"
attribute based on the PLR_adapt and maxe2e-PLR attribute values in both the
SDP offer and/or SDP answer to determine the maximum tolerable end-to-end PLR
budget distributed across the uplink and downlink in a media transport path as
described in 3GPP TS 29.513 [7] subclause 7.2.3.
Upon reception of SDP offer and answer, the P-CSCF should check whether \"a=
PLR_adapt\" line is present in both SDP offer and answer to derive
\"maxPacketLossRateDl\" attribute and \"maxPacketLossRateUl\" attribute in
\"medComponents\" attribute else \"maxPacketLossRateDl\" and
\"maxPacketLossRateUl\" attributes are not included by the P-CSCF.
The originating P-CSCF should derive \"maxPacketLossRateDl\" attribute to the
maximum value of MaxPacketLossRateDl among all the RTP payload types. For each
RTP payload type MaxPacketLossRateDl is computed as described in 3GPP TS
29.513 [7] subclause 7.2.3.
\- If maxe2e-PLR is included in the SDP offer then the MaxPacketLossRateDl for
a payload type is derived as value of maxe2e-PLR in the SDP offer minus maxUL-
PLR in the SDP answer if present else the MaxPacketLossRateDlis Â½ maxe2e-PLR
value present in the SDP offer.
\- If maxe2e-PLR is not included in the SDP offer then the MaxPacketLossRateDl
for a payload type is derived from the default value in end-to-end Maximum
End-to-End Packet Loss Rate for the decoder of the RTP payload type as
recommended in 3GPP TS 26.114 [30]subclause X.1.2 for application layer
redundancy or X.1.1 for partial redundancy minus maxUL-PLR in the SDP answer
if present else the MaxPacketLossRateDl Â½ default value in end-to-end Maximum
End-to-End Packet Loss Rate for the decoder of the RTP payload type as
recommended in 3GPP TS 26.114 [30] subclause X.1.2 for application layer
redundancy or X.1.1 for partial redundancy.
The originating P-CSCF should derive \"maxPacketLossRateUl\" attribute to the
maximum value of MaxPacketLossRateUl among all the RTP payload types. For each
RTP payload type MaxPacketLossRateUl is computed as described in 3GPP TS
29.513 [7] subclause 7.2.3.
\- If maxe2e-PLR is included in the SDP answer then the MaxPacketLossRateUl
for a payload type is derived as value of maxe2e-PLR in the SDP answer minus
maxDL-PLR in the SDP answer if present else the MaxPacketLossRateUl is Â½
maxe2e-PLR value present in the SDP answer.
\- If maxe2e-PLR is not included in the SDP answer then the
MaxPacketLossRateUl for a payload type is derived as the Â½ default value in
end-to-end Maximum End-to-End Packet Loss Rate for the decoder of the RTP
payload type as recommended in 3GPP TS 26.114 [30] subclause X.1.2 for
application layer redundancy or X.1.1 for partial redundancy.
The terminating P-CSCF should derive \"maxPacketLossRateDl\" attribute to the
maximum value of MaxPacketLossRateDl among all the RTP payload types. For each
RTP payload type MaxPacketLossRateDl is computed as described in 3GPP TS
29.513 [7] subclause 7.2.3.
\- If maxe2e-PLR is included in the SDP answer then the MaxPacketLossRateDl
for a payload type is derived as value of maxDL-PLR in the SDP answer if
present else the MaxPacketLossRateDl is Â½ maxe2e-PLR value present in the SDP
answer.
\- If maxe2e-PLR is not included in the SDP answer then the
MaxPacketLossRateDl for a payload type is derived as the Â½ default value in
end-to-end Maximum End-to-End Packet Loss Rate for the decoder of the RTP
payload type as recommended in 3GPP TS 26.114 [30] subclause X.1.2 for
application layer redundancy or X.1.1 for partial redundancy.
The terminating P-CSCF should derive \"maxPacketLossRateUl\" attribute to the
maximum value of MaxPacketLossRateUl among all the RTP payload types. For each
RTP payload type MaxPacketLossRateUl is computed as described in 3GPP TS
29.513 [7] subclause 7.2.3.
\- If maxe2e-PLR is included in the SDP offer then the MaxPacketLossRateUl for
a payload type is derived as value of maxUL-PLR in the SDP answer if present
else the MaxPacketLossRateUl is Â½ maxe2e-PLR value present in the SDP offer.
\- If maxe2e-PLR is not included in the SDP offer then the MaxPacketLossRateUl
for a payload type is derived as the Â½ default value in end-to-end Maximum
End-to-End Packet Loss Rate for the decoder of the RTP payload type as
recommended in 3GPP TS 26.114 [30] subclause X.1.2 for application layer
redundancy or X.1.1 for partial redundancy.
# B.15 Handling of a FLUS session
If the P-CSCF receives a SIP request that requires provisioning of a service
information to the PCF, the \"FLUS\" feature is supported and an SDP attribute
\"a=label:flus...\" is included in one or more of the received SDP media
descriptions, the P-CSCF shall provide the string after \"a=label:\" starting
with \"flus\" within the \"flusId\" attribute for each affected media
components within the \"medComponents\" attribute in the corresponding
Npcf_PolicyAuthorization service operation towards the PCF.
NOTE: During the first interaction with the PCF, the P-CSCF does not know if
the \"FLUS\" feature is supported by the PCF. In this case the P-CSCF will
include the information as if the feature is supported.
If additionally the P-CSCF receives the \"a=3gpp-qos-hint\" media-level SDP
attribute in the SIP request, the P-CSCF shall provide the PCF with the
\"desMaxLatency\" attribute and/or \"desMaxLoss\" attribute as described in
3GPP TS 29.513 [7], subclause 7.2.3.
Upon receiving the information from the P-CSCF and if the \"FLUS\" feature is
supported, the PCF shall derive the QoS information as described in 3GPP TS
29.513 [7], subclause 7.3.3.
# B.16 QoS hint support for data channel media
If the P-CSCF receives a SIP request that requires provisioning of a service
information to the PCF, the QoSHint feature is supported and an SDP attribute
\"a=3gpp-qos-hint\" is included in one or more of the received data channel
media descriptions, the P-CSCF may provide the \"desMaxLatency\" attribute
and/or \"desMaxLoss\" attribute for each affected application media component
within the \"medComponents\" attribute in the corresponding
Npcf_PolicyAuthorization service operation towards the PCF.
NOTE: During the first interaction with the PCF, the P-CSCF does not know if
the QoSHint feature is supported by the PCF. In this case the P-CSCF will
include the information as if the feature is supported.
Upon receiving the information from the P-CSCF and if the QoSHint feature is
supported, the PCF shall derive the QoS information as described in 3GPP TS
29.513 [7], subclause 7.3.3.
# B.17 Handling of MPS Session
When the P-CSCF receives an authorised Resource-Priority header field or when
the P-CSCF adds a temporarily authorised Resource-Priority header field
containing an appropriate namespace and priority value in SIP signaling, and
recognizes the need for priority treatment as specified in 3GPP TS 24.229
[32], and the \"IMS_SBI\" feature is supported, the P-CSCF shall include the
\"mpsId\" attribute and the \"resPrio\" attribute in the corresponding
Npcf_PolicyAuthorization service operation towards the PCF. The \"mpsId\"
attribute shall contain the national variant for MPS service name indicating
an MPS session. The \"resPrio\" attribute shall be determined based on the
resource value received in the \"wps\" namespace of the SIP Resource-Priority
header field, and shall be included at \"AppSessionContextReqData\" data type
level as well as the \"MediaComponent\" data type level. The \"resPrio\"
attribute shall be populated with a default value if the priority value is
unknown.
NOTE 1: Various mechanisms can be applied to recognize the need for priority
treatment in the P-CSCF (e.g., based on the dialled digits), according to
national regulation and network configuration, as stated in 3GPP TS 24.229
[32].
NOTE 2: Highest user priority level (lowest numerical resource value of the
SIP Resource-Priority header field) is mapped to the highest enumerated value
of the \"resPrio\" attribute.
If the P-CSCF supports the SBI Message Priority mechanism for an MPS session,
the P-CSCF shall include the \"3gpp-Sbi-Message-Priority\" custom HTTP header
with a priority value based on the value of the \"resPrio\" attribute. The
highest \"resPrio\" value is mapped to the corresponding lowest value of the
\"3gpp-Sbi-Message-Priority\" custom HTTP header.
Upon reception of a request that requires MPS treatment, the PCF shall derive
the PCC rules corresponding to the MPS session, as appropriate. The PCF shall
take specific actions on the corresponding PDU session to ensure that the MPS
session is prioritized, as described in 3GPP TS 29.512 [8], subclause
4.2.6.2.12.3.
When the P-CSCF detects that the MPS session has ended, the P-CSCF deletes in
the PCF the \"Individual Application Session Context\" resource corresponding
to the MPS session. The PCF shall delete the PCC rules corresponding to the
MPS session and shall revoke the actions related to the prioritization of the
MPS session in the corresponding PDU session, as described in 3GPP TS 29.512
[8], subclause 4.2.6.2.12.3.
###### ## Annex C (normative): Flow identifiers: Format definition and
examples
# C.1 Format of a flow identifier
## C.1.1 General
A flow identifier is expressed as a 2-tuple as follows:
\
where both are numbered starting from 1. The encoding of the flow identifier
is as indicated in 3GPP TS 24.008 [36].
The rules for the allocation of flow identifiers to IP flows are defined in
3GPP TS 29.214 [20], Annex B.1.1. Derivation of flow identifiers from SDP are
described in 3GPP TS 29.214 [20], Annex B.1.2, and examples are covered in
3GPP TS 29.214 [20], Annex B2, B3, B4 and B5.
###### ## Annex D (normative): Wireless and wireline convergence access
support
# D.1 Scope
This annex provides the stage 3 definition of the Policy Authorization Service
for wireless and wireline convergence access support for 5GS.
The stage 2 definition and procedures of the Policy Authorization Service for
wireless and wireline convergence access support for 5GS are contained in 3GPP
TS 23.316 [44].
# D.2 Npcf_PolicyAuthorization Service
## D.2.1 Service Description
### D.2.1.1 Overview
The overview defined in subclause 4.1.1 applies with the exception that the UE
is replaced by the 5G-RG and the W-AGF, which is acting as a UE towards the
5GC on behalf of the FN-RG.
### D.2.1.2 Service Architecture
The service architecture defined in subclause 4.1.2 applies.
### D.2.1.3 Network Functions
#### D.2.1.3.1 Policy Control Function (PCF)
The PCF functionality defined in subclause 4.1.3.1 shall apply with the
following modifications for W-5GAN and for the Npcf_PolicyAuthorization
service:
\- The 5G-RG and the W-AGF, acting as a UE towards the 5GC on behalf of the
FN-RG, replace the UE.
\- The PCF provides Policy Authorization as described in this Annex.
#### D.2.1.3.2 NF Service Consumers
The AF functionality defined in subclause 4.1.3.2 shall apply with the
following exceptions for the traffic of a PDU session over wireline access:
\- Indication that the QoS targets can no longer (or can again) be guaranteed
does not apply.
\- Invocation of Multimedia Priority Services does not apply in this release
of the specification.
\- Indication of PLMN change does not apply.
\- Indication of TSN 5GS Bridge Information does not apply.
\- Reporting RAN/NAS Release Cause over wireline does not apply.
\- The Maximum Packet Loss Rate for UL and DL is not forwarded to the wireline
access. CHEM feature does not apply.
# D.3 Service Operations
## D.3.1 Introduction
Service procedures covered in subclause 4.2.1 shall apply.
## D.3.2 Npcf_PolicyAuthorization_Create Service Operation
### D.3.2.1 General
The procedures specified in subclause 4.2.2 shall apply with the following
differences:
\- Subscriptions to notifications of Service Data Flow QoS targets are not
supported. Subclause 4.2.2.6 does not apply for the traffic of a PDU session
over wireline access.
\- Invocation of Multimedia Priority Services is not supported. Subclause
4.2.2.12 does not apply for the traffic of a PDU session over wireline access.
\- The PEI that may be returned as available user information within the
\"ueIds\" attribute described in subclause 4.2.2.18 shall have one of the
following representations:
i. When the UE supports only wireline access, the PEI shall be a MAC address.
ii. When the UE supports at least one 3GPP access technology, the PEI shall be
the allocated IMEI or IMEISV.
\- Subscription and notification of PLMN change does not apply for the traffic
of a PDU session over wireline access.
\- Indication of TSN 5GS Bridge Information does not apply. Subclauses
4.2.2.24, 4.2.2.25 and 4.2.2.31 do not apply.
\- The Maximum Packet Loss Rate for UL and DL is not forwarded to the wireline
access. Subclause 4.2.2.28, Support of CHEM feature, does not apply for the
traffic of a PDU session over wireline access.
\- When the AF subscribes to the Access Type Change event, the event is met,
and the 5G-RG or FN-RG is connected to the 5GC via wireline access, the
reported wireline transmission technology is encoded in the \"ratType\"
attribute, within either the EventsNotification data type or the
AdditionalAccessInfo data type, as applicable.
## D.3.3 Npcf_PolicyAuthorization_Update Service Operation
### D.3.3.1 General
The procedures specified in subclause 4.2.3 shall apply with the following
differences:
\- Subscriptions to notifications of Service Data Flow QoS targets are not
supported. Subclause 4.2.3.6 does not apply for the traffic of a PDU session
over wireline access.
\- Invocation of Multimedia Priority Services is not supported. Subclause
4.2.3.12 does not apply for the traffic of a PDU session over wireline access.
\- Subscription and notification of PLMN change does not apply for the traffic
of a PDU session over wireline access.
\- Indication of TSN 5GS Bridge Information does not apply. Subclauses
4.2.3.24, and 4.2.3.25 do not apply.
\- The Maximum Packet Loss Rate for UL and DL is not forwarded to the wireline
access. Subclause 4.2.3.27, Support of CHEM feature, does not apply for the
traffic of a PDU session over wireline access.
\- When the AF subscribes to the Access Type Change event, the event is met,
and the 5G-RG or FN-RG is connected to the 5GC via wireline access, the
reported wireline transmission technology is encoded in the \"ratType\"
attribute, within either the EventsNotification data type or the
AdditionalAccessInfo data type, as applicable.
## D.3.4 Npcf_PolicyAuthorization_Delete Service Operation
### D.3.4.1 General
The procedures specified in subclause 4.2.4 shall apply with the following
differences:
\- When the report of access network information described in subclause
4.2.4.6 includes the user location information, the \"n3gaLocation\" attribute
shall be included in the \"ueLoc\" attribute and shall encode:
a) if the UE connects via W-5GBAN access:
\- shall encode the Global Line Identifier in the \"gli\" attribute; and
\- may include the \"w5gbanLineType\" attribute to indicate whether the
W-5GBAN access is DSL or PON; or
b) if the UE connects via W-5GCAN access, the HFC Node Identifier in the
\"hfcNodeId\" attribute.
\- Reporting RAN/NAS Release Cause over wireline does not apply. Subclause
4.2.4.10 does not apply.
## D.3.5 Npcf_PolicyAuthorization_Notify Service Operation
### D.3.5.1 General
The procedures specified in subclause 4.2.5 shall apply with the following
differences:
\- Subscriptions to notifications of Service Data Flow QoS targets are not
supported. Subclause 4.2.5.4 does not apply for the traffic of a PDU session
over wireline access.
\- Invocation of Multimedia Priority Services is not supported. Subclause
4.2.4.5 does not apply for the traffic of a PDU session over wireline access.
\- When the report of access network information described in subclause
4.2.5.11 includes the user location information, the \"n3gaLocation\"
attribute shall be included in the \"ueLoc\" attribute and shall encode:
a) if the UE connects via W-5GBAN access:
\- shall encode the Global Line Identifier in the \"gli\" attribute; and
\- may include the \"w5gbanLineType\" attribute to indicate whether the
W-5GBAN access is DSL or PON; or
b) if the UE connects via W-5GCAN access, the HFC Node Identifier in the
\"hfcNodeId\" attribute.
\- Notification of PLMN changes does not apply for the traffic of a PDU
session over wireline access.
\- Indication of TSN 5GS Bridge Information does not apply. Subclauses
4.2.5.13 and 4.2.5.16 do not apply.
\- Reporting RAN/NAS Release Cause over wireline does not apply. Subclauses
4.2.5.5 and 4.2.5.10 do not apply.
\- When the 5G-RG or FN-RG connects to the 5GC via W-5GAN, and the Access Type
Change event is met, the reported wireline transmission technology is encoded
in the \"ratType\" attribute, within either the EventsNotification data type
or the AdditionalAccessInfo data type, as applicable.
## D.3.6 Npcf_PolicyAuthorization_Subscribe Service Operation
### D.3.6.1 General
The procedures specified in subclause 4.2.6 shall apply with the following
differences:
\- When the AF subscribes to the Access Type Change event, the event is met,
and the 5G-RG or FN-RG is connected to the 5GC via wireline access, the
reported wireline transmission technology is encoded in the \"ratType\"
attribute, within either the EventsNotification data type or the
AdditionalAccessInfo data type, as applicable.
\- Subscription to PLMN change does not apply for the traffic of a PDU session
over wireline access.
## D.3.7 Npcf_PolicyAuthorization_Unsubscribe Service Operation
### D.3.7.1 General
The procedures specified in subclause 4.2.7 shall apply.
#