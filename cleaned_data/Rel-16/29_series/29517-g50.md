# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, certain modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
NOTE 1: The constructions \"shall\" and \"shall not\" are confined to the
context of normative provisions, and do not appear in Technical Reports.
NOTE 2: The constructions \"must\" and \"must not\" are not used as
substitutes for \"shall\" and \"shall not\". Their use is avoided insofar as
possible, and they are not used in a normative context except in a direct
citation from an external, referenced, non-3GPP document, or so as to maintain
continuity of style when extending or modifying the provisions of such a
referenced document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
NOTE 3: The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
NOTE 4: The constructions \"can\" and \"cannot\" shall not to be used as
substitutes for \"may\" and \"need Not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
NOTE 5: The constructions \"is\" and \"is not\" do not indicate requirements.
# 1 Scope
The present document specifies the stage 3 protocol and data model for the
Application Function Event Exposure Service of the 5G System. It provides
stage 3 protocol definitions, message flows and specifies the API for the
Naf_EventExposure service.
The 5G System stage 2 architecture and the procedures are specified in 3GPP TS
23.501 [2], 3GPP TS 23.502 [3], and 3GPP TS 23.288 [4].
The Technical Realization of the Service Based Architecture and the Principles
and Guidelines for Services Definition are specified in 3GPP TS 29.500 [5] and
3GPP TS 29.501 [6].
The Application Function Event Exposure Service is provided by the Application
Function (AF). This service exposes service experience events observed at the
AF.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".
[3] 3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".
[4] 3GPP TS 23.288: \"Architecture enhancements for 5G System (5GS) to support
network data analytics services\".
[5] 3GPP TS 29.500: \"5G System; Technical Realization of Service Based
Architecture; Stage 3\".
[6] 3GPP TS 29.501: \"5G System; Principles and Guidelines for Services
Definition; Stage 3\".
[7] IETF RFC 7540: \"Hypertext Transfer Protocol Version 2 (HTTP/2)\".
[8] OpenAPI: \"OpenAPI 3.0.0 Specification\", https://github.com/OAI/OpenAPI-
Specification/blob/master/versions/3.0.0.md.
[9] IETF RFC 8259: \"The JavaScript Object Notation (JSON) Data Interchange
Format\".
[10] IETF RFC 7807: \"Problem Details for HTTP APIs\".
[11] 3GPP TR 21.900: \"Technical Specification Group working methods\".
[12] 3GPP TS 29.523: \"5G System; Policy Control Event Exposure Service; Stage
3\".
[13] 3GPP TS 29.571: \"5G System; Common Data Types for Service Based
Interfaces Stage 3\".
[14] 3GPP TS 33.501: \"Security architecture and procedures for 5G system\".
[15] IETF RFC 6749: \"The OAuth 2.0 Authorization Framework\".
[16] 3GPP TS 29.510: \"5G System; Network Function Repository Services; Stage
3\".
[17] 3GPP TS 29.122: \"T8 reference point for northbound Application
Programming Interfaces (APIs)\".
[18] 3GPP TS 29.514: \"5G System; Policy Authorization Service; Stage 3\".
[19] 3GPP TS 29.520: \"5G System; Network Data Analytics Services; Stage 3\".
[20] IETF RFC 5246, \"The Transport Layer Security (TLS) Protocol Version
1.2\".
[21] IETF RFC 7230: \"Hypertext Transfer Protocol (HTTP/1.1): Message Syntax
and Routing\".
[22] IETF RFC 7231: \"Hypertext Transfer Protocol (HTTP/1.1): Semantics and
Content\".
[23] IETF RFC 7232: \"Hypertext Transfer Protocol (HTTP/1.1): Conditional
Requests\".
[24] IETF RFC 7233: \"Hypertext Transfer Protocol (HTTP/1.1): Range
Requests\".
[25] IETF RFC 7234: \"Hypertext Transfer Protocol (HTTP/1.1): Caching\".
[26] IETF RFC 7235: \"Hypertext Transfer Protocol (HTTP/1.1):
Authentication\".
[27] 3GPP TS 29.503: \"5G System; Unified Data Management Services; Stage 3\".
# 3 Definitions of terms, symbols and abbreviations
## 3.1 Terms
For the purposes of the present document, the terms given in 3GPP TR 21.905
[1] and the following apply. A term defined in the present document takes
precedence over the definition of the same term, if any, in 3GPP TR 21.905
[1].
(None)
## 3.2 Symbols
For the purposes of the present document, the following symbols apply:
(None)
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
AF Application Function
DNAI DN Access Identifier
GPSI Generic Public Subscription Identifier
NEF Network Exposure Function
NF Network Function
NWDAF Network Data Analytics Function
SUPI Subscription Permanent Identifier
URI Uniform Resource Identifier
# 4 Naf_EventExposure Service
## 4.1 Service Description
### 4.1.1 Overview
The Application Function Exposure Service, as defined in 3GPP TS 23.502 [3]
and 3GPP TS 23.288 [4], is provided by the Application Function (AF).
This service:
\- allows NF service consumers to subscribe, modify and unsubscribe for
application events; and
\- notifies NF service consumers with a corresponding subscription about
observed events on the AF.
The types of observed events include:
\- Service Experience information for an application;
\- UE mobility information;
\- UE communication information; and
\- Exceptions information.
When the event to which the NF service consumer has subscribed occurs, the AF
reports the requested information to the NF service consumer based on the
event reporting information definition requested by the NF service consumer
(see 3GPP TS 23.502 [3]).
### 4.1.2 Service Architecture
The Data Analytics Architecture is defined in 3GPP TS 23.288 [4].
The Application Function Exposure Service (Naf_EventExposure) is part of the
Naf service-based interface exhibited by the Application Function (AF).
The known NF service consumers of the Naf_EventExposure service are the
Network Exposure Function (NEF) and the Network Data Analytics Function
(NWDAF).
The Naf_EventExposure service is provided by the AF and consumed by NF service
consumers (e.g. NEF, NWDAF), as shown in figure 4.1.2-1 for the SBI
representation model and in figure 4.1.2-2 for reference point representation
model.
Figure 4.1.2-1: Naf_EventExposure service Architecture, SBI representation
Figure 4.1.2-2: Naf_EventExposure service Architecture, reference point
representation
### 4.1.3 Network Functions
#### 4.1.3.1 Application Function (AF)
The AF is a functional element that provides service or application related
information to NF service consumers.
The AF allows NF service consumers to subscribe to and unsubscribe from
periodic notifications and/or notifications related to the detection of
subscribed event.
#### 4.1.3.2 NF Service Consumers
The Network Data Analytics Function (NWDAF):
\- supports (un)subscribing to notifications of subscribed event(s) from the
AF;
\- supports receiving the notifications of subscribed event(s) from the AF.
The Network Exposure Function (NEF):
\- supports (un)subscribing to notifications of service experience information
from the AF;
\- supports receiving the notifications of subscribed event(s) from the AF.
## 4.2 Service Operations
### 4.2.1 Introduction
Service operations defined for the Naf_EventExposure Service are shown in
table 4.2.1-1.
_Table 4.2.1-1: Naf_EventExposure Service Operations_
* * *
Service Operation Name Description Initiated by Naf_EventExposure_Subscribe
This service operation is used by an NF service consumer to subscribe to, or
modify a subscription in the AF for event notifications on a specified
application related event for one or more UE(s) or any UE. NF Consumer (NWDAF,
NEF) Naf_EventExposure_Unsubscribe This service operation is used by an NF
service consumer to unsubscribe from event notifications. NF Consumer (NWDAF,
NEF) Naf_EventExposure_Notify This service operation is used by the AF to
report application related event(s) to the NF service consumer which has
subscribed to the event report service. AF
* * *
### 4.2.2 Naf_EventExposure_Subscribe service operation
#### 4.2.2.1 General
This service operation is used by an NF service consumer to subscribe for
event notifications on specific event(s), or to modify an existing
subscription.
The following are the types of events for which a subscription can be made:
\- Service Experience information for an application;
\- UE mobility information;
\- UE communication information; and
\- Exceptions information.
The following procedures using the Naf_EventExposure_Subscribe service
operation are supported:
\- creating a new subscription;
\- modifying an existing subscription.
#### 4.2.2.2 Creating a new subscription
Figure 4.2.2.2-1 illustrates the creation of a subscription.
Figure 4.2.2.2-1: Creation of a subscription
To subscribe to event notifications, the NF service consumer shall send an
HTTP POST request to the AF with: \"{apiRoot}/naf-
eventexposure/\/subscriptions\" as request URI as shown in step 1
of figure 4.2.2.2-1, and the \"AfEventExposureSubsc\" data structure as
request body.
The \"AfEventExposureSubsc\" data structure shall include:
\- description of subscribed event information as \"eventsSubs\" attribute by
using one or more \"EventsSubs\" data;
\- description of the event reporting information as \"eventsRepInfo\"
attribute;
\- a URI where to receive the requested notifications as \"notifUri\"
attribute;
\- a Notification Correlation Identifier assigned by the NF service consumer
for the requested notifications as \"notifId\" attribute.
The \"EventsSubs\" data shall include:
\- a event to subscribe as a \"event\" attribute; and
\- event filter information as \"eventFilter\" attribute associated with the
event.
The \"eventsRepInfo\" attribute may include:
\- event notification method (periodic, one time, on event detection) as
\"notifMethod\" attribute;
\- Maximum Number of Reports as \"maxReportNbr\" attribute;
\- Monitoring Duration as \"monDur\" attribute;
\- repetition period for periodic reporting as \"repPeriod\" attribute;
\- immediate reporting indication as \"immRep\" attribute;
\- sampling ratio as \"sampRatio\" attribute; and/or
\- group reporting guard time as \"grpRepTime\" attribute.
The \"eventFilter\" shall include:
\- identification of target UE(s) to which the subscription applies via :
> 1) identification of individual UE(s) via \"gpsis\" attribute or \"supis\"
> attribute; or
>
> 2) identification of group(s) of UE(s) via \"exterGroupIds\" attribute or
> \"interGroupIds\" attribute; or
>
> 3) identification of any UE via \"anyUeInd\" attribute.
Depending on the event type:
\- if the feature \"ServiceExperience\" is supported and the event is
\"SVC_EXPERIENCE\", the \"eventFilter\" attribute may provide:
> 1) identification of application to which the subscription applies via
> \"appIds\" attribute;
>
> 2) an area of interest via \"locArea\" attribute.
\- if the feature \"Exceptions\" is supported and the event is \"EXCEPTIONS\",
the \"eventFilter\" attribute may provide:
1) identification of application to which the subscription applies via
\"appIds\" attribute;
2) an area of interest via \"locArea\" attribute;
\- if the feature \"UeCommunication\" is supported and the event is
\"UE_COMM\", the \"eventFilter\" attribute may provide:
1) identification of application to which the subscription applies via
\"appIds\" attribute;
2) an area of interest via \"locArea\" attribute.
\- if the feature \"UeMobility\" is supported and the event is
\"UE_MOBILITY\", the \"eventFilter\" attribute may provide:
1) identification of application to which the subscription applies via
\"appIds\" attribute;
2) an area of interest via \"locArea\" attribute.
If the AF cannot successfully fulfil the received HTTP POST request due to an
internal error or an error in the HTTP POST request, the AF shall send the
HTTP error response as specified in clause 5.7.
Upon successful reception of the HTTP POST request with \"{apiRoot}/naf-
eventexposure/\/subscriptions\" as request URI and
\"AfEventExposureSubsc\" data structure as request body, the AF shall create a
new \"Individual Application Event Subscription\" resource, store the
subscription and send an HTTP \"201 Created\" response as shown in step 2 of
figure 4.2.2.2-1, containing:
\- a Location header field; and
\- an \"AfEventExposureSubsc\" data type in the payload body.
The Location header field shall contain the URI of the created individual
application session context resource i.e. \"{apiRoot}/naf-
eventexposure/\/subscriptions/{subscriptionId}\".
The \"AfEventExposureSubsc\" data type payload body shall contain the
representation of the created \"Individual Application Event Subscription\".
When the \"monDur\" attribute is included in the response by the AF, it
represents AF selected expiry time that is equal or less than the expiry time
received in the request.
When the \"immRep\" attribute is included and sets to \"true\" in the
subscription and the subscribed events are available, the AF shall include the
reports of the events subscribed, if available, in the HTTP POST response.
When the sampling ratio as, \"sampRatio\" attribute, is included in the
subscription, the AF shall select a random subset of UEs among the target UEs
according to the sampling ratio and only report the event(s) related to the
selected subset of UEs.
When the group reporting guard time as the \"grpRepTime\" attribute is
included in the subscription, the AF shall accumulate all the event reports
for the target UEs until the group reporting guard time expires. Then the AF
shall notify the NF service consumer using the Naf_EventExposure_Notify
service operation, as described in clause 4.2.4.2.
#### 4.2.2.3 Modifying an existing subscription
Figure 4.2.2.3-1 illustrates the modification of an existing subscription.
Figure 4.2.2.3-1: Modification of an existing subscription
To modify an existing subscription to event notifications, the NF service
consumer shall send an HTTP PUT request with: \"{apiRoot}/naf-
eventexposure/\/subscriptions/{**subscriptionId**}\" as request
URI, as shown in step 1 of figure 4.2.2.3-1, where \"{**subscriptionId**}\" is
the subscription correlation ID of the existing subscription. The
\"AfEventExposureSubsc\" data structure is included as request body as
described in clause 4.2.2.2.
NOTE 1: An alternate NF service consumer than the one that requested the
generation of the subscription resource can send the PUT request.
NOTE 2: The \"notifUri\" attribute within the AfEventExposureSubsc data
structure can be modified to request that subsequent notifications are sent to
a new NF service consumer.
NOTE 3: The \"monDur\" attribute within the AfEventExposureSubsc data
structure can be modified to extend the expiry time to keep receiving
notifications.
If the AF cannot successfully fulfil the received HTTP PUT request due to an
internal error or an error in the HTTP PUT request, the AF shall send an HTTP
error response as specified in clause 5.7.
If the feature \"ES3XX\" is supported, and the AF determines the received HTTP
PUT request needs to be redirected, the AF shall send an HTTP redirect
response as specified in clause 6.10.9 of 3GPP TS 29.500 [5].
Upon successful reception of an HTTP PUT request with: \"{apiRoot}/naf-
eventexposure/\/subscriptions/{**subscriptionId**}\" as request
URI and \"AfEventExposureSubsc\" data structure as request body, the AF shall
update the subscription and send either a HTTP \"200 OK\" response with the
\"AfEventExposureSubsc\" data structure as response body containing the
representation of the modified \"Individual Application Event Subscription\",
or an HTTP \"204 No Content\" response, as shown in step 2 of figure
4.2.2.3-1.
When the \"monDur\" attribute is included in the response by the AF, it
represents AF selected expiry time that is equal or less than the expiry time
received in the request.
When the \"immRep\" attribute is included and sets to \"true\" in the
subscription and the subscribed events are available, the AF shall include the
reports of the events subscribed, if available, in the HTTP PUT response.
When the sampling ratio, as \"sampRatio\" attribute, is included in the
subscription, the AF shall select a random subset of UEs among the target UEs
according to the sampling ratio and only report the event(s) related to the
selected subset of UEs.
When the group reporting guard time, as \"grpRepTime\" attribute, is included
in the subscription, the AF shall accumulate all the event reports for the
target UEs until the group reporting guard time expires. Then, the AF shall
notify the NF service consumer using the Naf_EventExposure_Notify service
operation, as described in clause 4.2.4.2.
### 4.2.3 Naf_EventExposure_Unsubscribe service operation
#### 4.2.3.1 General
This service operation is used by an NF service consumer to unsubscribe from
event notifications.
The following procedure using the Naf_EventExposure_Unsubscribe service
operation is supported:
\- unsubscription from event notifications.
#### 4.2.3.2 Unsubscription from event notifications
Figure 4.2.3.2-1 illustrates the unsubscription from event notifications.
Figure 4.2.3.2-1: Unsubscription from event notifications
To unsubscribe from event notifications, the NF service consumer shall send an
HTTP DELETE request with \"{apiRoot}/naf-
eventexposure/\/subscriptions/{**subscriptionId**}\" as request
URI, as shown in step 1 of figure 4.2.3.2-1, where \"{**subscriptionId**}\" is
the subscription correlation identifier of the existing resource subscription
that is to be deleted.
If the AF cannot successfully fulfil the received HTTP DELETE request due to
an internal error or an error in the HTTP DELETE request, the AF shall send an
HTTP error response as specified in clause 5.7.
If the feature \"ES3XX\" is supported, and the AF determines the received HTTP
DELETE request needs to be redirected, the AF shall send an HTTP redirect
response as specified in clause 6.10.9 of 3GPP TS 29.500 [5].
Upon successful reception of the HTTP DELETE request with: \"{apiRoot}/naf-
eventexposure/\/subscriptions/{**subscriptionId**}\" as request
URI, the AF shall remove the corresponding subscription and send an HTTP \"204
No Content\" response as shown in step 2 of figure 4.2.3.2-1.
### 4.2.4 Naf_EventExposure_Notify service operation
#### 4.2.4.1 General
The Naf_EventExposure_Notify service operation enables the AF to notify to the
NF service consumer(s) that the previously subscribed application related
event occurred.
The following procedure using the Naf_EventExposure_Notify service operation
is supported:
\- notification about subscribed events.
#### 4.2.4.2 Notification about subscribed events
Figure 4.2.4.2-1 illustrates the notification about subscribed events.
Figure 4.2.4.2-1: Notification about subscribed events
If the AF observes application related event(s) for which an NF service
consumer has subscribed, the AF shall send an HTTP POST request as shown in
step 1 of figure 4.2.4.2-1, with the \"{notifUri}\" as request URI containing
the value previously provided by the NF service consumer within the
corresponding subscription, and the \"AfEventExposureNotif\" data structure.
The \"AfEventExposureNotif\" data structure shall include:
a) the notification correlation ID provided by the NF service consumer during
the subscription as \"notifId\" attribute; and
b) information about the observed event(s) within the \"eventNotifs\"
attribute that shall contain for each observed event an
\"AfEventNotification\" data structure that shall include:
1) the application related event as \"event\" attribute;
2) the time at which the event was observed encoded as \"timeStamp\"
attribute;
3) if the \"event\" attribute is \"SVC_EXPERIENCE\":
\- service experience information about the application involved in the
reported event in the \"svcExprcInfos\" attribute;
4) if the \"event\" attribute is \"UE_MOBILITY\":
\- UE mobility information associated with the application as
\"ueMobilityInfos\" attribute;
5) if the \"event\" attribute is \"UE_COMM\":
\- application communication information associated with the application as
\"ueCommInfos\" attribute; and
6) if the \"event\" attribute is \"EXCEPTIONS\":
\- exceptions information associated with a service flow as \"excepInfos\"
attribute.
If the NF service consumer cannot successfully fulfil the received HTTP POST
request due to an internal error or an error in the HTTP POST request, the NF
service consumer shall send an HTTP error response as specified in clause 5.7.
If the feature \"ES3XX\" is supported, and the NF service consumer determines
the received HTTP POST request needs to be redirected, the NF service consumer
shall send an HTTP redirect response as specified in clause 6.10.9 of 3GPP TS
29.500 [5].
Upon successful reception of the HTTP POST request with \"{notifUri}\" as
request URI and \"AfEventExposureNotif\" data structure as request body, the
NF service consumer shall send a \"204 No Content\" HTTP response, as shown in
step 2 of figure 4.2.4.2-1.
# 5 Naf_EventExposure Service API
## 5.1 Introduction
The Naf_EventExposure Service shall use the Naf_EventExposure API.
The API URI of the Naf_EventExposure API shall be:
**{apiRoot}/\ /\/**
The request URIs used in HTTP requests from the NF service consumer towards
the AF shall have the Resource URI structure defined in clause 4.4.1 of 3GPP
TS 29.501 [6], i.e.:
**{apiRoot}/\ /\/\**
with the following components:
\- The {apiRoot} shall be set as described in 3GPP TS 29.501 [6].
\- The **\ ** shall be \"naf-eventexposure\".
\- The **\ ** shall be \"v1\".
\- The **\ ** shall be set as described in
clause 5.3.
## 5.2 Usage of HTTP
### 5.2.1 General
If the AF is untrusted, support of HTTP/1.1 (IETF RFC 7230 [21], IETF RFC 7231
[22], IETF RFC 7232 [23], IETF RFC 7233 [24], IETF RFC 7234 [25] and IETF RFC
7235 [26]) over TLS (IETF RFC 5246 [20]) is mandatory and support of HTTP/2
(IETF RFC 7540 [7]) over TLS (IETF RFC 5246 [20]) is recommended.
If the AF is trusted, HTTP/2, IETF RFC 7540 [7], shall be used as specified in
clause 5.2 of 3GPP TS 29.500 [5].
HTTP/2 shall be transported as specified in clause 5.3 of 3GPP TS 29.500 [5].
The OpenAPI [8] specification of HTTP messages and content bodies for the
Naf_EventExposure is contained in Annex A.
### 5.2.2 HTTP standard headers
#### 5.2.2.1 General
See clause 5.2.2 of 3GPP TS 29.500 [5] for the usage of HTTP standard headers.
#### 5.2.2.2 Content type
JSON, IETF RFC 8259 [9], shall be used as content type of the HTTP bodies
specified in the present specification as specified in clause 5.4 of 3GPP TS
29.500 [5]. The use of the JSON format shall be signalled by the content type
\"application/json\".
\"Problem Details\" JSON object shall be used to indicate additional details
of the error in a HTTP response body and shall be signalled by the content
type \"application/problem+json\", as defined in IETF RFC 7807 [10].
### 5.2.3 HTTP custom headers
#### 5.2.3.1 General
The mandatory HTTP custom header fields specified in clause 5.2.3.2 of 3GPP TS
29.500 [5] shall be applicable.
In this Release of the specification, no specific custom headers are defined
for the Naf_EventExposure API.
## 5.3 Resources
### 5.3.1 Resource Structure
Figure 5.3.1-1: Resource URI structure of the Naf_EventExposure API
Table 5.3.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 5.3.1-1: Resources and methods overview
* * *
Resource name Resource URI HTTP method or custom operation Description
Application Event Subscriptions /subscriptions POST Subscription to the
notification of application events and creation of an Individual Application
Event Subscription resource.
Individual Application Event Subscription /subscriptions/\ GET Reads an
Individual Application Event Subscription resource. {subscriptionId}
                                                                 PUT                               Modifies an Individual Application Event Subscription.
                                                                 DELETE                            Cancels an individual subscription to notifications of application event.
* * *
### 5.3.2 Resource: Application Event Subscriptions
#### 5.3.2.1 Description
The Application Event Subscriptions resource represents all subscriptions of
the Naf_EventExposure service at a given AF.
#### 5.3.2.2 Resource definition
Resource URI: **{apiRoot}/naf-eventexposure/\ /subscriptions**
This resource shall support the resource URI variables defined in table
5.3.2.2-1.
Table 5.3.2.2-1: Resource URI variables for this resource
* * *
Name Data type Definition apiRoot string See clause 5.1 apiVersion string See
clause 5.1
* * *
#### 5.3.2.3 Resource Standard Methods
##### 5.3.2.3.1 POST
This method shall support the URI query parameters specified in table
5.3.2.3.1-1.
Table 5.3.2.3.1-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.3.2.3.1-2 and the response data structures and response codes specified in
table 5.3.2.3.1-3.
Table 5.3.2.3.1-2: Data structures supported by the POST Request Body on this
resource
* * *
Data type P Cardinality Description AfEventExposureSubsc M 1 Contains the
information required for the creation of a new individual application event
subscription.
* * *
Table 5.3.2.3.1-3: Data structures supported by the POST Response Body on this
resource
* * *
Data type P Cardinality Response codes Description AfEventExposureSubsc M 1
201 Created Contains the representation of the Individual Application Event
Subscription resource. NOTE: The mandatory HTTP error status codes for the
POST method listed in table 5.2.7.1-1 of 3GPP TS 29.500 [5] also apply.
* * *
Table 5.3.2.3.1-4: Headers supported by the 201 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 Contains the URI
of the newly created resource, according to the structure: {apiRoot}/naf-
eventexposure/\/subscriptions/{**subscriptionId**}
* * *
### 5.3.3 Resource: Individual Application Event Subscription
#### 5.3.3.1 Description
The Individual Application Event Subscription resource represents a single
subscription of the Naf_EventExposure service at a given AF.
#### 5.3.3.2 Resource definition
Resource URI: **{apiRoot}/naf-eventexposure/\
/subscriptions/{subscriptionId}**
This resource shall support the resource URI variables defined in table
5.3.3.2-1.
Table 5.3.3.2-1: Resource URI variables for this resource
* * *
Name Data type Definition apiRoot string See clause 5.1 apiVersion string See
clause 5.1 subscriptionId string Identifies a subscription to the AF event
exposure service.
* * *
#### 5.3.3.3 Resource Standard Methods
##### 5.3.3.3.1 GET
This method shall support the URI query parameters specified in table
5.3.3.3.1-1.
Table 5.3.3.3.1-1: URI query parameters supported by the GET method on this
resource
* * *
Name Data type P Cardinality Description supp-feat SupportedFeatures O 0..1
The features supported by the NF service consumer.
* * *
This method shall support the request data structures specified in table
5.3.3.3.1-2 and the response data structures and response codes specified in
table 5.3.3.3.1-3.
Table 5.3.3.3.1-2: Data structures supported by the GET Request Body on this
resource
* * *
Data type P Cardinality Description n/a
* * *
Table 5.3.3.3.1-3: Data structures supported by the GET Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | AfEvent | M | 1 | 200 OK | Contains the | | ExposureSubsc | | | | r | | | | | | epresentation | | | | | | of the | | | | | | Individual | | | | | | Application | | | | | | Event | | | | | | Subscription | | | | | | resource. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | subscription | | | | | | retrieval. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | AF (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | subscription | | | | | | retrieval. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | AF (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the GET | | | | | | method listed | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [5] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.3.3.3.1-4: Headers supported by the 307 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative AF (service) instance. 3gpp-Sbi-
Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected.
* * *
Table 5.3.3.3.1-5: Headers supported by the 308 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative AF (service) instance. 3gpp-Sbi-
Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected.
* * *
##### 5.3.3.3.2 PUT
This method shall support the URI query parameters specified in table
5.3.3.3.2-1.
Table 5.3.3.3.2-1: URI query parameters supported by the PUT method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.3.3.3.2-2 and the response data structures and response codes specified in
table 5.3.3.3.2-3.
Table 5.3.3.3.2-2: Data structures supported by the PUT Request Body on this
resource
* * *
Data type P Cardinality Description AfEventExposureSubsc M 1 Modifies the
existing Individual Application Event Subscription resource.
* * *
Table 5.3.3.3.2-3: Data structures supported by the PUT Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | AfEvent | M | 1 | 200 OK | Successful | | ExposureSubsc | | | | case. | | | | | | | | | | | | The | | | | | | Individual | | | | | | Application | | | | | | Event | | | | | | Subscription | | | | | | resource was | | | | | | modified and | | | | | | a | | | | | | r | | | | | | epresentation | | | | | | is returned. | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Successful | | | | | Content | case. | | | | | | | | | | | | The | | | | | | Individual | | | | | | Application | | | | | | Event | | | | | | Subscription | | | | | | resource was | | | | | | modified. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | subscription | | | | | | modification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | AF (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | subscription | | | | | | modification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | AF (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the PUT | | | | | | method listed | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [5] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.3.3.3.2-4: Headers supported by the 307 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative AF (service) instance. 3gpp-Sbi-
Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected.
* * *
Table 5.3.3.3.2-5: Headers supported by the 308 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative AF (service) instance. 3gpp-Sbi-
Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected.
* * *
##### 5.3.3.3.3 DELETE
This method shall support the URI query parameters specified in table
5.3.3.3.3-1.
Table 5.3.3.3.3-1: URI query parameters supported by the DELETE method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.3.3.3.3-2 and the response data structures and response codes specified in
table 5.3.3.3.3-3.
Table 5.3.3.3.3-2: Data structures supported by the DELETE Request Body on
this resource
* * *
Data type P Cardinality Description n/a
* * *
Table 5.3.3.3.3-3: Data structures supported by the DELETE Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Successful | | | | | Content | case. The | | | | | | Individual | | | | | | Application | | | | | | Event | | | | | | Subscription | | | | | | resource | | | | | | matching the | | | | | | s | | | | | | ubscriptionId | | | | | | was deleted. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | subscription | | | | | | termination. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | AF (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during | | | | | | subscription | | | | | | termination. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located in an | | | | | | alternative | | | | | | AF (service) | | | | | | instance. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | NOTE: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status code | | | | | | for the | | | | | | DELETE method | | | | | | listed in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [5] | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.3.3.3.3-4: Headers supported by the 307 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative AF (service) instance. 3gpp-Sbi-
Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected.
* * *
Table 5.3.3.3.3-5: Headers supported by the 308 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI of the resource located in an alternative AF (service) instance. 3gpp-Sbi-
Target-Nf-Id string O 0..1 Identifier of the target NF (service) instance
towards which the request is redirected.
* * *
## 5.4 Custom Operations without associated resources
No custom operation is defined in this Release of the specification.
## 5.5 Notifications
### 5.5.1 General
Notifications shall comply with clause 6.2 of 3GPP TS 29.500 [5] and clause
4.6.2.3 of 3GPP TS 29.501 [6].
Table 5.5.1-1: Notifications overview
+----------------+--------------+----------------+----------------+ | Notification | Callback URI | HTTP method or | Description | | | | custom | | | | | operation | (service | | | | | operation) | +----------------+--------------+----------------+----------------+ | Application | {notifUri} | POST | Notification | | Event | | | of application | | Notification | | | related event | | | | | reporting. | +----------------+--------------+----------------+----------------+
### 5.5.2 Application Event Notification
#### 5.5.2.1 Description
The Application Event Notification is used by the AF to report one or several
observed application related events to the NF service consumer that has
subscribed to such notifications.
#### 5.5.2.2 Target URI
The callback URI **\"{notifUri}\"** shall be used with the callback URI
variables defined in table 5.5.2.2-1.
Table 5.5.2.2-1: Callback URI variables
* * *
Name Data type Definition notifUri Uri The Notification Uri as assigned by the
NF service consumer during the subscription service operation and described
within the AfEventExposureSubsc data type (see table 5.6.2.2-1).
* * *
#### 5.5.2.3 Standard Methods
##### 5.5.2.3.1 POST
This method shall support the URI query parameters specified in table
5.5.2.3.1-1.
Table 5.5.2.3.1-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
5.5.2.3.1-2 and the response data structures and response codes specified in
table 5.5.2.3.1-3.
Table 5.5.2.3.1-2: Data structures supported by the POST Request Body on this
resource
* * *
Data type P Cardinality Description AfEventExposureNotif M 1 Provides
Information about observed application related events
* * *
Table 5.5.2.3.1-3: Data structures supported by the POST Response Body on this
resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | The receipt | | | | | Content | of the | | | | | | Notification | | | | | | is | | | | | | acknowledged. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection, | | | | | | during event | | | | | | notification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative | | | | | | NF consumer | | | | | | (service) | | | | | | instance | | | | | | where the | | | | | | notification | | | | | | should be | | | | | | sent. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection, | | | | | | during event | | | | | | notification. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing an | | | | | | alternative | | | | | | URI | | | | | | representing | | | | | | the end point | | | | | | of an | | | | | | alternative | | | | | | NF consumer | | | | | | (service) | | | | | | instance | | | | | | where the | | | | | | notification | | | | | | should be | | | | | | sent. | | | | | | | | | | | | Applicable if | | | | | | the feature | | | | | | \"ES3XX\" is | | | | | | supported. | +---------------+---+-------------+---------------+---------------+ | NOTE: In | | | | | | addition, the | | | | | | HTTP status | | | | | | codes which | | | | | | are specified | | | | | | as mandatory | | | | | | in | | | | | | ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [5] | | | | | | for the POST | | | | | | method shall | | | | | | also apply. | | | | | +---------------+---+-------------+---------------+---------------+
Table 5.5.2.3.1-4: Headers supported by the 307 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI representing the end point of an alternative NF consumer (service)
instance towards which the notification should be redirected. 3gpp-Sbi-Target-
Nf-Id string O 0..1 Identifier of the target NF (service) instance towards
which the notification request is redirected.
* * *
Table 5.5.2.3.1-5: Headers supported by the 308 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 An alternative
URI representing the end point of an alternative NF consumer (service)
instance towards which the notification should be redirected. 3gpp-Sbi-Target-
Nf-Id string O 0..1 Identifier of the target NF (service) instance towards
which the notification request is redirected.
* * *
## 5.6 Data Model
### 5.6.1 General
This clause specifies the application data model supported by the API.
Table 5.6.1-1 specifies the data types defined for the Naf_EventExposure
service based interface protocol.
Table 5.6.1-1: Naf_EventExposure specific Data Types
* * *
Data type Section defined Description Applicability AfEvent 5.6.3.3
Application Events.  
AfEventExposureSubsc 5.6.2.2 Represents an Individual Application Event
Subscription resource.  
AfEventExposureNotif 5.6.2.3 Describes notifications about application event
that occurred in an Individual Application Event Subscription resource.  
AfEventNotification 5.6.2.6 AfEventNotification  
CommunicationCollection 5.6.2.13  
EventFilter 5.6.2.5 Represents event filter information  
EventsSubs 5.6.2.4  
ExceptionInfo 5.6.2.14 Describes the exceptions information provided by AF.  
SvcExperience 5.6.2.9 Mean opinion score with the customized range.  
ServiceExperienceInfoPerApp 5.6.2.7 Contains service experience associated
with the application  
ServiceExperienceInfoPerFlow 5.6.2.8 Contains service experience associated
with the service flow  
UeCommunicationCollection 5.6.2.11 Contains UE communication information
associated with the application.  
UeMobilityCollection 5.6.2.10 Contains UE mobility information associated with
the application.  
UeTrajectoryCollection 5.6.2.12
* * *
Table 5.6.1-2 specifies data types re-used by the Naf_EventExposure service
based interface protocol from other specifications, including a reference to
their respective specifications and when needed, a short description of their
use within the Naf_EventExposure service based interface.
Table 5.6.1-2: Naf_EventExposure re-used Data Types
* * *
Data type Reference Comments Applicability ApplicationId 3GPP TS 29.571 [13]  
DateTime 3GPP TS 29.571 [13]  
Dnai 3GPP TS 29.571 [13]  
EthFlowDescription 3GPP TS 29.514 [18]  
Exception 3GPP TS 29.520 [19]  
Float 3GPP TS 29.571 [13]  
FlowInfo 3GPP TS 29.122 [17]  
Gpsi 3GPP TS 29.571 [13]  
GroupId 3GPP TS 29.571 [13]  
LocationArea5G 3GPP TS 29.122 [17]  
RedirectResponse 3GPP TS 29.571 [13] Contains redirection related information.
ES3XX ReportingInformation 3GPP TS 29.523 [12]  
SupportedFeatures 3GPP TS 29.571 [13]  
TimeWindow 3GPP TS 29.122 [17]  
Uri 3GPP TS 29.571 [13]  
Volume 3GPP TS 29.122 [17]  
Supi 3GPP TS 29.571 [13]  
ExtGroupId 3GPP TS 29.503 [27]
* * *
### 5.6.2 Structured data types
#### 5.6.2.1 Introduction
This clause defines the structures to be used in resource representations.
#### 5.6.2.2 Type AfEventExposureSubsc
Table 5.6.2.2-1: Definition of type AfEventExposureSubsc
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | e | array(Ev | M | 1..N | S | | | ventsSubs | entsSubs) | | | ubscribed | | | | | | | events | | | | | | | and the | | | | | | | related | | | | | | | event | | | | | | | filters. | | +-----------+-----------+---+-----------+-----------+-----------+ | even | Re | M | 1 | R | | | tsRepInfo | portingIn | | | epresents | | | | formation | | | the | | | | | | | reporting | | | | | | | req | | | | | | | uirements | | | | | | | of the | | | | | | | subs | | | | | | | cription. | | +-----------+-----------+---+-----------+-----------+-----------+ | notifUri | Uri | M | 1 | Not | | | | | | | ification | | | | | | | URI for | | | | | | | event | | | | | | | r | | | | | | | eporting. | | +-----------+-----------+---+-----------+-----------+-----------+ | notifId | string | M | 1 | Not | | | | | | | ification | | | | | | | Co | | | | | | | rrelation | | | | | | | ID | | | | | | | assigned | | | | | | | by the NF | | | | | | | service | | | | | | | consumer. | | +-----------+-----------+---+-----------+-----------+-----------+ | ev | array(Af | C | 1..N | R | | | entNotifs | EventNoti | | | epresents | | | | fication) | | | the | | | | | | | Events to | | | | | | | be | | | | | | | reported. | | | | | | | | | | | | | | Shall | | | | | | | only be | | | | | | | present | | | | | | | if the | | | | | | | immediate | | | | | | | reporting | | | | | | | i | | | | | | | ndication | | | | | | | in the | | | | | | | \ | | | | | | | "immRep\" | | | | | | | attribute | | | | | | | within | | | | | | | the | | | | | | | \"events | | | | | | | RepInfo\" | | | | | | | attribute | | | | | | | sets to | | | | | | | true in | | | | | | | the event | | | | | | | subs | | | | | | | cription, | | | | | | | and the | | | | | | | reports | | | | | | | are | | | | | | | a | | | | | | | vailable. | | +-----------+-----------+---+-----------+-----------+-----------+ | suppFeat | Supporte | C | 0..1 | This IE | | | | dFeatures | | | r | | | | | | | epresents | | | | | | | a list of | | | | | | | Supported | | | | | | | features | | | | | | | used as | | | | | | | described | | | | | | | in | | | | | | | cl | | | | | | | ause 5.8. | | | | | | | | | | | | | | Shall be | | | | | | | present | | | | | | | in the | | | | | | | HTTP POST | | | | | | | request/ | | | | | | | response; | | | | | | | or in the | | | | | | | HTTP GET | | | | | | | response | | | | | | | if the | | | | | | | \"su | | | | | | | pp-feat\" | | | | | | | attribute | | | | | | | query | | | | | | | parameter | | | | | | | is | | | | | | | included | | | | | | | in the | | | | | | | HTTP GET | | | | | | | request. | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: In | | | | | | | the HTTP | | | | | | | POST | | | | | | | request | | | | | | | it | | | | | | | r | | | | | | | epresents | | | | | | | the set | | | | | | | of NF | | | | | | | service | | | | | | | consumer | | | | | | | supported | | | | | | | features. | | | | | | | In the | | | | | | | HTTP POST | | | | | | | and GET | | | | | | | responses | | | | | | | it | | | | | | | r | | | | | | | epresents | | | | | | | the set | | | | | | | of | | | | | | | features | | | | | | | supported | | | | | | | by both | | | | | | | the NF | | | | | | | service | | | | | | | consumer | | | | | | | and the | | | | | | | AF. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.3 Type AfEventExposureNotif
Table 5.6.2.3-1: Definition of type AfEventExposureNotif
* * *
Attribute name Data type P Cardinality Description Applicability notifId
string M 1 Notification Correlation ID assigned by the NF service consumer.  
eventNotifs array(AfEventNotification) M 1..N Represents the Events to be
reported according to the subscription corresponding to the Notification
Correlation ID.
* * *
#### 5.6.2.4 Type EventsSubs
Table 5.6.2.4-1: Definition of type EventsSubs
* * *
Attribute name Data type P Cardinality Description Applicability event AfEvent
M 1 Subscribed event.  
eventFilter EventFilter M 1 Represents the event filter information associated
with each event.
* * *
#### 5.6.2.5 Type EventFilter
Table 5.6.2.5-1: Definition of type EventFilter
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | | | | | | | | | | | | | | (NOTE 4) | +-----------+-----------+---+-----------+-----------+-----------+ | gpsis | ar | O | 1..N | Each | | | | ray(Gpsi) | | | element | | | | | | | r | | | | | | | epresents | | | | | | | external | | | | | | | UE | | | | | | | id | | | | | | | entifier. | | | | | | | | | | | | | | (NOTE 1, | | | | | | | NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | supis | ar | O | 1..N | Each | | | | ray(Supi) | | | element | | | | | | | r | | | | | | | epresents | | | | | | | a SUPI | | | | | | | id | | | | | | | entifying | | | | | | | a UE | | | | | | | (NOTE 1, | | | | | | | NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | exte | array(Ex | O | 1..N | Each | | | rGroupIds | tGroupId) | | | element | | | | | | | r | | | | | | | epresents | | | | | | | a group | | | | | | | of UEs | | | | | | | i | | | | | | | dentified | | | | | | | by an | | | | | | | External | | | | | | | Group | | | | | | | Id | | | | | | | entifier. | | | | | | | | | | | | | | (NOTE 1, | | | | | | | NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | inte | array | O | 1..N | Each | | | rGroupIds | (GroupId) | | | element | | | | | | | r | | | | | | | epresents | | | | | | | a group | | | | | | | of UEs | | | | | | | i | | | | | | | dentified | | | | | | | by an | | | | | | | Internal | | | | | | | Group | | | | | | | I | | | | | | | dentifier | | | | | | | (NOTE 1, | | | | | | | NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | anyUeInd | boolean | O | 0..1 | I | ServiceE | | | | | | dentifies | xperience | | | | | | whether | | | | | | | the | E | | | | | | request | xceptions | | | | | | applies | | | | | | | to any | | | | | | | UE. | | | | | | | | | | | | | | This | | | | | | | attribute | | | | | | | shall set | | | | | | | to | | | | | | | \"true\" | | | | | | | if | | | | | | | a | | | | | | | pplicable | | | | | | | for any | | | | | | | UE, | | | | | | | o | | | | | | | therwise, | | | | | | | set to | | | | | | | \ | | | | | | | "false\". | | | | | | | | | | | | | | May only | | | | | | | be | | | | | | | present | | | | | | | and sets | | | | | | | to | | | | | | | \"true\" | | | | | | | if | | | | | | | \" | | | | | | | AfEvent\" | | | | | | | sets to | | | | | | | \ | | | | | | | "SVC_EXP | | | | | | | ERIENCE\" | | | | | | | or | | | | | | | \"EXCE | | | | | | | PTIONS\". | | | | | | | | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | appIds | ar | O | 1..N | Each | | | | ray(Appli | | | element | | | | cationId) | | | indicates | | | | | | | an | | | | | | | ap | | | | | | | plication | | | | | | | id | | | | | | | entifier. | | | | | | | | | | | | | | If | | | | | | | absent, | | | | | | | the | | | | | | | Ev | | | | | | | entFilter | | | | | | | data | | | | | | | applies | | | | | | | to any | | | | | | | ap | | | | | | | plication | | | | | | | (i.e. all | | | | | | | appl | | | | | | | ications) | | | | | | | | | | | | | | (NOTE 3) | | +-----------+-----------+---+-----------+-----------+-----------+ | locArea | Locat | O | 0..1 | R | | | | ionArea5G | | | epresents | | | | | | | area of | | | | | | | interest. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE 1: | | | | | | | For | | | | | | | untrusted | | | | | | | AF, only | | | | | | | gpsis and | | | | | | | exte | | | | | | | rGroupIds | | | | | | | are | | | | | | | ap | | | | | | | plicable. | | | | | | | For | | | | | | | trusted | | | | | | | AF, only | | | | | | | supis and | | | | | | | inte | | | | | | | rGroupIds | | | | | | | are | | | | | | | ap | | | | | | | plicable. | | | | | | | | | | | | | | NOTE 2: | | | | | | | For an | | | | | | | a | | | | | | | pplicable | | | | | | | feature, | | | | | | | only one | | | | | | | attribute | | | | | | | id | | | | | | | entifying | | | | | | | the | | | | | | | target UE | | | | | | | shall be | | | | | | | provided. | | | | | | | | | | | | | | NOTE 3: | | | | | | | For event | | | | | | | \"UE | | | | | | | _COMM\", | | | | | | | \"UE_M | | | | | | | OBILITY\" | | | | | | | and | | | | | | | \"EXCE | | | | | | | PTIONS\", | | | | | | | the | | | | | | | \ | | | | | | | "appIds\" | | | | | | | a | | | | | | | ttribute, | | | | | | | if | | | | | | | present, | | | | | | | shall | | | | | | | include | | | | | | | only one | | | | | | | element. | | | | | | | | | | | | | | NOTE 4: | | | | | | | P | | | | | | | roperties | | | | | | | marked | | | | | | | with a | | | | | | | feature | | | | | | | as | | | | | | | defined | | | | | | | in | | | | | | | c | | | | | | | lause 5.8 | | | | | | | are | | | | | | | a | | | | | | | pplicable | | | | | | | as | | | | | | | described | | | | | | | in | | | | | | | c | | | | | | | lause 6.6 | | | | | | | of | | | | | | | 3GP | | | | | | | P TS 29.5 | | | | | | | 00 [5]. | | | | | | | If no | | | | | | | features | | | | | | | are | | | | | | | i | | | | | | | ndicated, | | | | | | | the | | | | | | | related | | | | | | | property | | | | | | | applies | | | | | | | for all | | | | | | | the | | | | | | | features. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.6 Type AfEventNotification
Table 5.6.2.6-1: Definition of type AfEventNotification
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | event | AfEvent | M | 1 | Reported | | | | | | | ap | | | | | | | plication | | | | | | | related | | | | | | | event. | | +-----------+-----------+---+-----------+-----------+-----------+ | timeStamp | DateTime | M | 1 | Time at | | | | | | | which the | | | | | | | event is | | | | | | | observed. | | +-----------+-----------+---+-----------+-----------+-----------+ | svcE | array(S | C | 1..N | Contains | ServiceE | | xprcInfos | erviceExp | | | the | xperience | | | erienceIn | | | service | | | | foPerApp) | | | e | | | | | | | xperience | | | | | | | inf | | | | | | | ormation. | | | | | | | | | | | | | | Shall be | | | | | | | present | | | | | | | if the | | | | | | | \"event\" | | | | | | | attribute | | | | | | | sets to | | | | | | | \ | | | | | | | "SVC_EXP | | | | | | | ERIENCE\" | | +-----------+-----------+---+-----------+-----------+-----------+ | ueMobi | array(UeM | C | 1..N | Contains | U | | lityInfos | obilityCo | | | the UE | eMobility | | | llection) | | | mobility | | | | | | | inf | | | | | | | ormation. | | | | | | | | | | | | | | Shall be | | | | | | | present | | | | | | | if the | | | | | | | \"event\" | | | | | | | attribute | | | | | | | sets to | | | | | | | \"UE_M | | | | | | | OBILITY\" | | +-----------+-----------+---+-----------+-----------+-----------+ | ue | array | C | 1..N | Contains | UeComm | | CommInfos | (UeCommun | | | the | unication | | | icationCo | | | ap | | | | llection) | | | plication | | | | | | | comm | | | | | | | unication | | | | | | | inf | | | | | | | ormation. | | | | | | | | | | | | | | Shall be | | | | | | | present | | | | | | | if the | | | | | | | \"event\" | | | | | | | attribute | | | | | | | sets to | | | | | | | \"U | | | | | | | E_COMM\" | | +-----------+-----------+---+-----------+-----------+-----------+ | e | ar | C | 1..N | Each | E | | xcepInfos | ray(Excep | | | element | xceptions | | | tionInfo) | | | r | | | | | | | epresents | | | | | | | the | | | | | | | exception | | | | | | | in | | | | | | | formation | | | | | | | for a | | | | | | | service | | | | | | | flow. | | | | | | | | | | | | | | Shall be | | | | | | | present | | | | | | | if the | | | | | | | \"event\" | | | | | | | attribute | | | | | | | sets to | | | | | | | \"EXCE | | | | | | | PTIONS\". | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.7 Type ServiceExperienceInfoPerApp
Table 5.6.2.7-1: Definition of type ServiceExperienceInfoPerApp
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | appId | Appl | C | 0..1 | Indicates | | | | icationId | | | an | | | | | | | ap | | | | | | | plication | | | | | | | id | | | | | | | entifier. | | | | | | | | | | | | | | Shall be | | | | | | | present | | | | | | | if the AF | | | | | | | event | | | | | | | exposure | | | | | | | service | | | | | | | request | | | | | | | applies | | | | | | | to more | | | | | | | than one | | | | | | | app | | | | | | | lication. | | +-----------+-----------+---+-----------+-----------+-----------+ | svcEx | array(Se | M | 1..N | Each | | | pPerFlows | rviceExpe | | | element | | | | rienceInf | | | r | | | | oPerFlow) | | | epresents | | | | | | | service | | | | | | | e | | | | | | | xperience | | | | | | | for each | | | | | | | service | | | | | | | flow. | | +-----------+-----------+---+-----------+-----------+-----------+ | gpsis | ar | O | 1..N | Each | | | | ray(Gpsi) | | | element | | | | | | | r | | | | | | | epresents | | | | | | | external | | | | | | | UE | | | | | | | id | | | | | | | entifier. | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | supis | ar | O | 1..N | SUPI | | | | ray(Supi) | | | id | | | | | | | entifying | | | | | | | a UE. | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: | | | | | | | Either | | | | | | | gpsis or | | | | | | | supis | | | | | | | shall be | | | | | | | present. | | | | | | | For | | | | | | | untrusted | | | | | | | AF, only | | | | | | | gpsis is | | | | | | | ap | | | | | | | plicable. | | | | | | | For | | | | | | | trusted | | | | | | | AF, only | | | | | | | supis is | | | | | | | ap | | | | | | | plicable. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.8 Type ServiceExperienceInfoPerFlow
Table 5.6.2.8-1: Definition of type ServiceExperienceInfoPerFlow
* * *
Attribute name Data type P Cardinality Description Applicability svcExprc
SvcExperience M 1 Service experience  
timeIntev TimeWindow M 1 Represents a start and stop time of the measurement
period for the AF service experience.  
dnai Dnai O 0..1 Indicates the DN Access Identifiers representing location of
the service flow.  
ipTrafficFilter FlowInfo O 0..1 Identifies IP packet filter.(NOTE)  
ethTrafficFilter EthFlowDescription O 0..1 Identifies Ethernet packet
filter.(NOTE)  
NOTE: Either \"ipTrafficFilter\" or \"ethTrafficFilter\" shall be provided.
* * *
#### 5.6.2.9 Type SvcExperience
Table 5.6.2.9-1: Definition of type SvcExperience
* * *
Attribute name Data type P Cardinality Description Applicability mos Float M 1
Mean opinion score.  
upperRange Float M 1 The upper value within the rating scale range  
lowerRange Float M 1 The lower value within the rating scale range
* * *
#### 5.6.2.10 Type UeMobilityCollection
Table 5.6.2.10-1: Definition of type UeMobilityCollection
* * *
Attribute name Data type P Cardinality Description Applicability gpsi Gpsi O
0..1 Identifies a UE. (NOTE)  
supi Supi O 0..1 SUPI identifying a UE. (NOTE)  
appId ApplicationId M 1 Identifies an application identifier.  
ueTrajs array(UeTrajectoryCollection) M 1..N Identifies a list of UE moving
trajectories.  
NOTE: Either gpsi or supi shall be present. For untrusted AF, only gpsi is
applicable. For trusted AF, only supi is applicable.
* * *
#### 5.6.2.11 Type UeCommunicationCollection
Table 5.6.2.11-1: Definition of type UeCommunicationCollection
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | gpsi | Gpsi | O | 0..1 | I | | | | | | | dentifies | | | | | | | a UE. | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | supi | Supi | O | 0..1 | SUPI | | | | | | | id | | | | | | | entifying | | | | | | | a UE. | | | | | | | (NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | ext | E | O | 0..1 | I | | | erGroupId | xtGroupId | | | dentifies | | | | | | | an | | | | | | | external | | | | | | | group of | | | | | | | UEs. | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | int | GroupId | O | 0..1 | I | | | erGroupId | | | | dentifies | | | | | | | an | | | | | | | internal | | | | | | | group of | | | | | | | UEs. | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | appId | Appl | M | 1 | I | | | | icationId | | | dentifies | | | | | | | an | | | | | | | ap | | | | | | | plication | | | | | | | id | | | | | | | entifier. | | +-----------+-----------+---+-----------+-----------+-----------+ | comms | arr | M | 1..N | This | | | | ay(Commun | | | attribute | | | | icationCo | | | contains | | | | llection) | | | a list of | | | | | | | comm | | | | | | | unication | | | | | | | inf | | | | | | | ormation. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE 1: | | | | | | | Either | | | | | | | gpsi or | | | | | | | supi | | | | | | | shall be | | | | | | | present. | | | | | | | For | | | | | | | untrusted | | | | | | | AF, only | | | | | | | gpsi is | | | | | | | ap | | | | | | | plicable. | | | | | | | For | | | | | | | trusted | | | | | | | AF, only | | | | | | | supi is | | | | | | | ap | | | | | | | plicable. | | | | | | | | | | | | | | NOTE 2: | | | | | | | \"inter | | | | | | | GroupId\" | | | | | | | attribute | | | | | | | only | | | | | | | applies | | | | | | | to | | | | | | | trusted | | | | | | | AF and | | | | | | | \"exter | | | | | | | GroupId\" | | | | | | | only | | | | | | | applies | | | | | | | to | | | | | | | untrusted | | | | | | | AF. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
#### 5.6.2.12 Type UeTrajectoryCollection
Table 5.6.2.12-1: Definition of type UeTrajectoryCollection
* * *
Attribute name Data type P Cardinality Description Applicability ts DateTime M
1 This attribute identifies the timestamp when the UE enters the location.  
locArea LocationArea5G M 1 This attribute includes the location information of
the UE.
* * *
#### 5.6.2.13 Type CommunicationCollection
Table 5.6.2.13-1: Definition of type CommunicationCollection
* * *
Attribute name Data type P Cardinality Description Applicability startTime
DateTime M 1 Identifies the timestamp this communication starts.  
endTime DateTime M 1 Identifies the timestamp this communication stops.  
ulVol Volume O 0..1 Identifies the uplink traffic volume. (NOTE)  
dlVol Volume O 0..1 Identifies the downlink traffic volume. (NOTE)  
NOTE: At least one of ulVol or dlVol shall be provided.
* * *
#### 5.6.2.14 Type ExceptionInfo
Table 5.6.2.14-1: Definition of type ExceptionInfo
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +-----------+-----------+---+-----------+-----------+-----------+ | ipTraf | FlowInfo | O | 0..1 | I | | | ficFilter | | | | dentifies | | | | | | | IP | | | | | | | flow | | | | | | | .(NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | ethTraf | EthFlowDe | O | 0..1 | I | | | ficFilter | scription | | | dentifies | | | | | | | Ethernet | | | | | | | flow | | | | | | | .(NOTE 1) | | +-----------+-----------+---+-----------+-----------+-----------+ | exceps | array(E | M | 1..N | Contains | | | | xception) | | | the | | | | | | | de | | | | | | | scription | | | | | | | of one or | | | | | | | more | | | | | | | exception | | | | | | | inf | | | | | | | ormation. | | | | | | | (NOTE 2) | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE 1: | | | | | | | Either | | | | | | | \ | | | | | | | "ipTraffi | | | | | | | cFilter\" | | | | | | | or | | | | | | | \" | | | | | | | ethTraffi | | | | | | | cFilter\" | | | | | | | shall be | | | | | | | provided. | | | | | | | | | | | | | | NOTE 2: | | | | | | | Only | | | | | | | \"e | | | | | | | xcepId\", | | | | | | | \"exc | | | | | | | epLevel\" | | | | | | | and | | | | | | | \"exc | | | | | | | epTrend\" | | | | | | | within | | | | | | | the | | | | | | | Exception | | | | | | | data type | | | | | | | as | | | | | | | defined | | | | | | | in | | | | | | | 3GP | | | | | | | P TS 29.5 | | | | | | | 20 [19] | | | | | | | apply to | | | | | | | the | | | | | | | Exce | | | | | | | ptionInfo | | | | | | | data | | | | | | | type. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
### 5.6.3 Simple data types and enumerations
#### 5.6.3.1 Introduction
This clause defines simple data types and enumerations that can be referenced
from data structures defined in the previous clauses.
#### 5.6.3.2 Simple data types
The simple data types defined in table 5.6.3.2-1 shall be supported.
Table 5.6.3.2-1: Simple data types
* * *
Type Name Type Definition Description Applicability
* * *
#### 5.6.3.3 Enumeration: AfEvent
The enumeration AfEvent represents the application events that can be
subscribed. It shall comply with the provisions defined in table 5.6.3.3-1.
Table 5.6.3.3-1: Enumeration AfEvent
* * *
Enumeration value Description Applicability SVC_EXPERIENCE Indicates that the
event subscribed is service experience data for an application.
ServiceExperience UE_MOBILITY Indicates that the event subscribed is UE
mobility information. UeMobility UE_COMM Indicates that the event subscribed
is UE communication information. UeCommunication EXCEPTIONS Indicates that the
event subscribed is exceptions information. Exceptions
* * *
## 5.7 Error handling
### 5.7.1 General
HTTP error handling shall be supported as specified in clause 5.2.4 of 3GPP TS
29.500 [5].
For the Naf_EventExposure API, HTTP error responses shall be supported as
specified in clause 4.8 of 3GPP TS 29.501 [6]. Protocol errors and application
errors specified in table 5.2.7.2-1 of 3GPP TS 29.500 [5] shall be supported
for an HTTP method if the corresponding HTTP status codes are specified as
mandatory for that HTTP method in table 5.2.7.1-1 of 3GPP TS 29.500 [5].
In addition, the requirements in the following clauses are applicable for the
Naf_EventExposure API.
### 5.7.2 Protocol Errors
In this Release of the specification, there are no service specific protocol
errors applicable for the Naf_EventExposure API.
### 5.7.3 Application Errors
The application errors defined for the Naf_EventExposure service are listed in
table 5.7.3-1.
Table 5.7.3-1: Application errors
* * *
Application Error HTTP status code Description
* * *
## 5.8 Feature negotiation
The optional features in table 5.8-1 are defined for the Naf_EventExposure
API. They shall be negotiated using the extensibility mechanism defined in
clause 6.6 of 3GPP TS 29.500 [5].
Table 5.8-1: Supported Features
* * *
Feature number Feature Name Description 1 ServiceExperience This feature
indicates support for the event related to service experience. 2 UeMobility
This feature indicates support for the event related to UE mobility. 3
UeCommunication This feature indicates support for the event related to UE
communication information. 4 Exceptions This feature indicates support for the
event related to exception information. 5 ES3XX Extended Support for 3xx
redirections. This feature indicates the support of redirection for any
service operation, according to Stateless NF procedures as specified in
subclauses 6.5.3.2 and 6.5.3.3 of 3GPP TS 29.500 [5] and according to HTTP
redirection principles for indirect communication, as specified in subclause
6.10.9 of 3GPP TS 29.500 [5].
* * *
## 5.9 Security
TLS (IETF RFC 5246 [20]) shall be used to support the security communication
between the NF Service Consumer and the AF as defined in clause 12.3 and
clause 13.1 of 3GPP TS 33.501 [14].
If the AF is trusted, as indicated in 3GPP TS 33.501 [14] and 3GPP TS 29.500
[5], the access to the Naf_EventExposure API may be authorized by means of the
OAuth 2.0 protocol (see IETF RFC 6749 [15]), based on local configuration,
using the \"Client Credentials\" authorization grant, where the NRF (see 3GPP
TS 29.510 [16]) plays the role of the authorization server.
If OAuth 2.0 is used, an NF Service Consumer, prior to consuming services
offered by the Naf_EventExposure API, shall obtain a \"token\" from the
authorization server, by invoking the Access Token Request service, as
described in 3GPP TS 29.510 [16], clause 5.4.2.2.
NOTE: When multiple NRFs are deployed in a network, the NRF used as
authorization server is the same NRF that the NF Service Consumer used for
discovering the Naf_EventExposure service.
The Naf_EventExposure API defines a single scope \"naf-eventexposure\" for the
entire service, and it does not define any additional scopes at resource or
operation level.
If the AF is untrusted, the access to Naf_EventExposure API shall be
authorized by means of OAuth2 protocol (see IETF RFC 6749 [15]), based on
local configuration, using the \"Client Credentials\" authorization grant. If
OAuth2 is used, a NF Service Consumer (e.g. NEF), prior to consuming services
offered by the Naf_EventExposure API, shall obtain a \"token\" from the
authorization server.
###### ## Annex A (normative): OpenAPI specification
# A.1 General
This Annex is based on the OpenAPI 3.0.0 specification [8] and provides
corresponding representations of all APIs defined in the present
specification.
NOTE 1: An OpenAPIs representation embeds JSON Schema representations of HTTP
message bodies.
This Annex shall take precedence when being discrepant to other parts of the
specification with respect to the encoding of information elements and methods
within the API(s).
NOTE 2: The semantics and procedures, as well as conditions, e.g. for the
applicability and allowed combinations of attributes or values, not expressed
in the OpenAPI definitions but defined in other parts of the specification
also apply.
Informative copies of the OpenAPI specification files contained in this 3GPP
Technical Specification are available on a Git-based repository that uses the
GitLab software version control system (see clause 5B of the 3GPP TR 21.900
[11] and clause 5.3.1 of the 3GPP TS 29.501 [6] for further information).
The security scheme defined below for the Naf_EventExposure API shows the case
when the AF is in untrusted domain and the \"scopes\" and \"tokenUrl\" are
undefined. For the trusted AF, the \"scopes\" definition shall use \"naf-
eventexposure\" and the \"tokenUrl\" definition shall use
\"{nrfApiRoot}/oauth2/token\".
# A.2 Naf_EventExposure API
openapi: 3.0.0
info:
version: 1.0.3
title: Naf_EventExposure
description: \|
AF Event Exposure Service.
Â© 2021, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
externalDocs:
description: 3GPP TS 29.517 V16.5.0; 5G System; Application Function Event
Exposure Service; Stage 3.
url: http://www.3gpp.org/ftp/Specs/archive/29_series/29.517/
servers:
\- url: \'{apiRoot}/naf-eventexposure/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 4.4 of 3GPP TS 29.501
security:
\- {}
\- oAuth2ClientCredentials: []
paths:
/subscriptions:
post:
summary: Creates a new Individual Application Event Exposure Subscription
resource
operationId: PostAfEventExposureSubsc
tags:
\- Application Event Subscription (Collection)
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/AfEventExposureSubsc\'
responses:
\'201\':
description: Success
content:
application/json:
schema:
\$ref: \'#/components/schemas/AfEventExposureSubsc\'
headers:
Location:
description: \'Contains the URI of the created individual application event
subscription resource\'
required: true
schema:
type: string
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
callbacks:
AfEventExposureNotif:
\'{\$request.body#/notifUri}\':
post:
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/AfEventExposureNotif\'
responses:
\'204\':
description: No Content, Notification was successful
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
/subscriptions/{subscriptionId}:
get:
summary: \"Reads an existing Individual Application Event Subscription\"
operationId: GetAfEventExposureSubsc
tags:
\- Individual Application Event Subscription (Document)
parameters:
\- name: subscriptionId
in: path
description: Application Event Subscription ID
required: true
schema:
type: string
\- name: supp-feat
in: query
description: Features supported by the NF service consumer
required: false
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
responses:
\'200\':
description: OK. Resource representation is returned
content:
application/json:
schema:
\$ref: \'#/components/schemas/AfEventExposureSubsc\'
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'406\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/406\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
put:
summary: \"Modifies an existing Individual Application Event Subscription \"
operationId: PutAfEventExposureSubsc
tags:
\- Individual Application Event Subscription (Document)
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/AfEventExposureSubsc\'
parameters:
\- name: subscriptionId
in: path
description: Application Event Subscription ID
required: true
schema:
type: string
responses:
\'200\':
description: OK. Resource was successfully modified and representation is
returned
content:
application/json:
schema:
\$ref: \'#/components/schemas/AfEventExposureSubsc\'
\'204\':
description: No Content. Resource was successfully modified
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
delete:
summary: \"Cancels an existing Individual Application Event Subscription \"
operationId: DeleteAfEventExposureSubsc
tags:
\- Individual Application Event Subscription (Document)
parameters:
\- name: subscriptionId
in: path
description: Application Event Subscription ID
required: true
schema:
type: string
responses:
\'204\':
description: No Content. Resource was successfully deleted
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
components:
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{tokenUri}\'
scopes: {}
description: for trusted AF, the \'naf-eventexposure\' shall be used as
\'scopes\' and \'{nrfApiRoot}/oauth2/token\' shall be used as \'tokenUri\'.
schemas:
AfEventExposureNotif:
type: object
properties:
notifId:
type: string
eventNotifs:
type: array
items:
\$ref: \'#/components/schemas/AfEventNotification\'
minItems: 1
required:
\- notifId
\- eventNotifs
AfEventExposureSubsc:
type: object
properties:
eventsSubs:
type: array
items:
\$ref: \'#/components/schemas/EventsSubs\'
minItems: 1
eventsRepInfo:
\$ref:
\'TS29523_Npcf_EventExposure.yaml#/components/schemas/ReportingInformation\'
notifUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
notifId:
type: string
eventNotifs:
type: array
items:
\$ref: \'#/components/schemas/AfEventNotification\'
minItems: 1
suppFeat:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
required:
\- eventsSubs
\- eventsRepInfo
\- notifId
\- notifUri
AfEventNotification:
type: object
properties:
event:
\$ref: \'#/components/schemas/AfEvent\'
timeStamp:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
svcExprcInfos:
type: array
items:
\$ref: \'#/components/schemas/ServiceExperienceInfoPerApp\'
minItems: 1
ueMobilityInfos:
type: array
items:
\$ref: \'#/components/schemas/UeMobilityCollection\'
minItems: 1
ueCommInfos:
type: array
items:
\$ref: \'#/components/schemas/UeCommunicationCollection\'
minItems: 1
excepInfos:
type: array
items:
\$ref: \'#/components/schemas/ExceptionInfo\'
minItems: 1
required:
\- event
\- timeStamp
EventsSubs:
type: object
properties:
event:
\$ref: \'#/components/schemas/AfEvent\'
eventFilter:
\$ref: \'#/components/schemas/EventFilter\'
required:
\- event
\- eventFilter
EventFilter:
type: object
properties:
gpsis:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Gpsi\'
minItems: 1
supis:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Supi\'
minItems: 1
exterGroupIds:
type: array
items:
\$ref: \'TS29503_Nudm_SDM.yaml#/components/schemas/ExtGroupId\'
minItems: 1
interGroupIds:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/GroupId\'
anyUeInd:
type: boolean
appIds:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ApplicationId\'
minItems: 1
locArea:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/LocationArea5G\'
ServiceExperienceInfoPerApp:
type: object
properties:
appId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ApplicationId\'
svcExpPerFlows:
type: array
items:
\$ref: \'#/components/schemas/ServiceExperienceInfoPerFlow\'
minItems: 1
gpsis:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Gpsi\'
minItems: 1
supis:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Supi\'
minItems: 1
required:
\- svcExpPerFlows
ServiceExperienceInfoPerFlow:
type: object
properties:
svcExprc:
\$ref: \'#/components/schemas/SvcExperience\'
timeIntev:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/TimeWindow\'
dnai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Dnai\'
ipTrafficFilter:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/FlowInfo\'
ethTrafficFilter:
\$ref:
\'TS29514_Npcf_PolicyAuthorization.yaml#/components/schemas/EthFlowDescription\'
SvcExperience:
type: object
properties:
mos:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Float\'
upperRange:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Float\'
lowerRange:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Float\'
UeMobilityCollection:
type: object
properties:
gpsi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Gpsi\'
supi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Supi\'
appId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ApplicationId\'
ueTrajs:
type: array
items:
\$ref: \'#/components/schemas/UeTrajectoryCollection\'
minItems: 1
required:
\- appId
\- ueTrajs
UeCommunicationCollection:
type: object
properties:
gpsi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Gpsi\'
supi:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Supi\'
exterGroupId:
\$ref: \'TS29503_Nudm_SDM.yaml#/components/schemas/ExtGroupId\'
interGroupId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/GroupId\'
appId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ApplicationId\'
comms:
type: array
items:
\$ref: \'#/components/schemas/CommunicationCollection\'
minItems: 1
required:
\- appId
\- comms
UeTrajectoryCollection:
type: object
properties:
ts:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
locArea:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/LocationArea5G\'
required:
\- ts
\- locArea
CommunicationCollection:
type: object
properties:
startTime:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
endTime:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
ulVol:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/Volume\'
dlVol:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/Volume\'
required:
\- startTime
\- endTime
\- ulVol
\- dlVol
ExceptionInfo:
type: object
properties:
ipTrafficFilter:
\$ref: \'TS29122_CommonData.yaml#/components/schemas/FlowInfo\'
ethTrafficFilter:
\$ref:
\'TS29514_Npcf_PolicyAuthorization.yaml#/components/schemas/EthFlowDescription\'
exceps:
type: array
items:
\$ref:
\'TS29520_Nnwdaf_EventsSubscription.yaml#/components/schemas/Exception\'
minItems: 1
# Simple data types and Enumerations
AfEvent:
anyOf:
\- type: string
enum:
\- SVC_EXPERIENCE
\- UE_MOBILITY
\- UE_COMM
\- EXCEPTIONS
\- type: string
#