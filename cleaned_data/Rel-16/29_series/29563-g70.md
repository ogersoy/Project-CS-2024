# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# 1 Scope
The present document specifies the stage 3 protocol, including message flows
and API specification details, for the Nhss services, as part of the 5G
Service-Based Architecture, offered by the HSS for interworking with the 5G
UDM Network Function.
The 5G System stage 2 architecture and procedures are specified in 3GPP TS
23.501 [2] and 3GPP TS 23.502 [3].
The User Data Interworking, Coexistence and Migration stage 2 architecture and
procedures are specified in 3GPP TS 23.632 [8].
The Technical Realization of the Service Based Architecture and the Principles
and Guidelines for Services Definition are specified in 3GPP TS 29.500 [4] and
3GPP TS 29.501 [5].
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".
[3] 3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".
[4] 3GPP TS 29.500: \"5G System; Technical Realization of Service Based
Architecture; Stage 3\".
[5] 3GPP TS 29.501: \"5G System; Principles and Guidelines for Services
Definition; Stage 3\".
[6] 3GPP TS 23.335: \"User Data Convergence (UDC); Technical realization and
information flows\".
[7] 3GPP TS 29.335: \"User Data Convergence (UDC); User Data Repository Access
Protocol over the Ud interface\".
[8] 3GPP TS 23.632: \"User Data Interworking, Coexistence and Migration\".
[9] IETF RFC 7540: \"Hypertext Transfer Protocol Version 2 (HTTP/2)\".
[10] OpenAPI Initiative, \"OpenAPI 3.0.0 Specification\",
https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.0.md
[11] IETF RFC 8259: \"The JavaScript Object Notation (JSON) Data Interchange
Format\".
[12] IETF RFC 7807: \"Problem Details for HTTP APIs\".
[13] 3GPP TS 29.503: \"5G System; Unified Data Management Services; Stage 3\".
[14] 3GPP TR 21.900: \"Technical Specification Group working methods\".
[15] 3GPP TS 23.003: \"Numbering, addressing and identification\".
[16] 3GPP TS 29.303: \"Domain Name System Procedures; Stage 3\".
[17] 3GPP TS 29.272: \"Evolved Packet System; MME and SGSN Related Interfaces
Based on Diameter Protocol\".
[18] 3GPP TS 23.682: \"Architecture enhancements to facilitate communications
with packet data networks and applications\".
[19] 3GPP TS 29.002: \"Mobile Application Part (MAP) specification\".
# 3 Definitions of terms, symbols and abbreviations
## 3.1 Terms
Void.
## 3.2 Symbols
Void.
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
5GC 5G Core Network
HSS Home Subscriber Server
JSON Javascript Object Notation
SBI Service Based Interface
UDM Unified Data Management
UDR Unified Data Repository
# 4 Overview
## 4.1 Introduction
Within the 5GC, the HSS offers services to the UDM via the Nhss service-based
interface (see 3GPP TS 23.501 [2], 3GPP TS 23.502 [3] and 3GPP TS 23.632 [8]).
Figure 4.1-1 provides the reference model in service-based interface
representation with focus on the HSS.
Figure 4.1-1: Reference model -- HSS
# 5 Services offered by the HSS
## 5.1 Introduction
The HSS offers the following services via the Nhss interface:
\- Nhss_UEAuthentication Service
\- Nhss_SubscriberDataManagement Service
\- Nhss_UEContextManagement service
All scenarios shown in the following clauses assume that the HSS is stateful
and stores information in local memory. However, the HSS may be stateless and
stores information externally in the EPS-UDR. If so, the stateless HSS makes
use of Ud interface as specified in 3GPP TS 23.335 [6] and 3GPP TS 29.335 [7]
to retrieve required data from the EPS-UDR and store them locally before
processing an incoming request. Processing the incoming request may then
include updating data in the EPS-UDR or subscribing to data change
notifications at the EPS-UDR by using the Ud interface. After processing the
incoming request, the HSS may delete the locally stored data.
Table 5.1-1 summarizes the corresponding APIs defined for this specification.
Table 5.1-1: API Descriptions
**Service Name** **Clause** **Description** **OpenAPI Specification File**
**apiName** **Annex**
* * *
Nhss_UEAuthentication Service 6.1 HSS UE Authentication Service
TS29563_Nhss_UEAU.yaml nhss-ueau A.2 Nhss_SubscriberDataManagement Service 6.2
HSS Subscriber Data Management TS29563_Nhss_SDM.yaml nhss-sdm A.3
Nhss_UEContextManagement Service 6.3 HSS UE Context Management
TS29563_Nhss_UECM.yaml nhss-uecm A.4
## 5.2 Nhss_UEAuthentication Service
### 5.2.1 Service Description
The Nhss_UEAuthentication service allows a NF consumer (UDM) to request
calculation of a fresh Authentication Vector (AV) for 5G_AKA or EAP_AKA_PRIME
and provide the calculated AV to the requesting NF.
### 5.2.2 Service Operations
#### 5.2.2.1 Introduction
For the Nhss_UEAuthentication service the following service operation is
defined:
\- Get
The Nhss_UEAuthentication service is used by the UDM to request the HSS to,
calculate a fresh authentication vector (AV) for authentication the method
5G_AKA or EAP_AKA_PRIME, and provide it to the UDM by means of the Get service
operation. See 3GPP TS 23.632 [8] clause 4.2.2.
#### 5.2.2.2 Get
##### 5.2.2.2.1 General
The following procedure using the Get service operation is supported:
\- Authentication Vector Retrieval
##### 5.2.2.2.2 Authentication Vector Retrieval
Figure 5.2.2.2.2-1 shows a scenario where the NF service consumer (UDM)
retrieves an Authentication Vector for the UE from the HSS (see also 3GPP TS
23.632 [8] clause 4.2.2). The request contains the UE\'s identity (imsi), the
serving network name, the authentication method (5G_AKA or EAP_AKA_PRIME) and
may contain resynchronization info.
Figure 5.2.2.2.2-1: NF service consumer requesting an Authentication Vector
1\. The NF service consumer sends a POST request (custom method: generate-av)
to the HSS.
2a. The HSS responds with \"200 OK\" with the message body containing the
authentication vector.
2b. If the operation cannot be authorized due to e.g. UE does not have
required subscription data, HTTP status code \"403 Forbidden\" should be
returned including additional error information in the response body (in
\"ProblemDetails\" element).
On failure, the appropriate HTTP status code indicating the error shall be
returned and appropriate additional error information should be returned in
the POST response body.
In the case of redirection, the HSS shall return 3xx status code, which shall
contain a Location header with an URI pointing to the endpoint of another HSS
(service) instance.
## 5.3 Nhss_SubscriberDataManagement Service
### 5.3.1 Service Description
This service is used to retrieve the subscriber data indicated by the
requested data type from HSS. In this release, only the PGW-C+SMF FQDN for
S5/S8 interface information is supported as requested data type. See 3GPP TS
23.632 [8], clause 6.1.4.
### 5.3.2 Service Operations
#### 5.3.2.1 Introduction
For the Nhss_SubscriberDataManagement service the following service operations
are defined:
\- Get
The Nhss_SubscriberDataManagement service is used by Consumer NF (UDM) to
retrieve the UE data from the HSS due to IRAT mobility.
#### 5.3.2.2 Get
##### 5.3.2.2.1 General
The following procedure using the Get service operation is supported:
> \- UE Context In PGW Data Retrieval
##### 5.3.2.2.2 UE Context In PGW Data Retrieval
Figure 5.3.2.2.2-1 shows a scenario where the NF service consumer (UDM) sends
a request to the HSS to retrieve the UE\'s Context In PGW data. The request
contains the UE\'s identity (which shall be an IMSI) and the requested
information.
Figure 5.3.2.2.2-1: Requesting a UE\'s Context in PGW Data
1\. The NF service consumer (e.g. UDM) shall send a GET request to the
resource representing the UE\'s Context In PGW Data.
2a. On Success, the HSS shall respond with \"200 OK\" with the message body
containing the UE\'s Context In PGW Data as relevant for the requesting NF
service consumer.
2b. If there is no valid data for the UE, HTTP status code \"404 Not Found\"
shall be returned including additional error information in the response body
(in the \"ProblemDetails\" element).
On failure, the appropriate HTTP status code indicating the error shall be
returned and appropriate additional error information should be returned in
the GET response body.
In the case of redirection, the HSS shall return 3xx status code, which shall
contain a Location header with an URI pointing to the endpoint of another HSS
(service) instance.
#### 5.3.2.3 Subscribe
##### 5.3.2.3.1 General
The following procedures using the Subscribe service operation are supported:
\- Subscription to notification of data change
##### 5.3.2.3.2 Subscription to notifications of data change
Figure 5.3.2.3.2-1 shows a scenario where the NF service consumer (e.g. UDM)
sends a request to the HSS to subscribe to notifications of data change. The
request contains a callback URI and the URI of the monitored resource.
Figure 5.3.2.3.2-1: NF service consumer subscribes to notifications
1\. The NF service consumer sends a POST request to the parent resource
(collection of subscriptions) (.../{ueId}/subscriptions), to create a
subscription as present in message body.
2a. On success, the HSS responds with \"201 Created\" with the message body
containing a representation of the created subscription. The Location HTTP
header shall contain the URI of the created subscription.
2b. If there is no valid subscription data for the UE, HTTP status code \"404
Not Found\" shall be returned including additional error information in the
response body (in the \"ProblemDetails\" element).
2c. If the UE subscription data exist, but the requested subscription to data
change notification cannot be created (e.g. due to an invalid/unsupported data
reference to be monitored, contained in the SubscriptionData parameter), HTTP
status code \"501 Not Implemented\" shall be returned including additional
error information in the response body (in the \"ProblemDetails\" element).
On failure, the appropriate HTTP status code indicating the error shall be
returned and appropriate additional error information should be returned in
the POST response body.
In the case of redirection, the HSS shall return 3xx status code, which shall
contain a Location header with an URI pointing to the endpoint of another HSS
(service) instance.
#### 5.3.2.4 Unsubscribe
##### 5.3.2.4.1 General
The following procedures using the Unsubscribe service operation are
supported:
\- Unsubscribe to notification of data change
##### 5.3.2.4.2 Unsubscribe to notifications of data change
Figure 5.3.2.4.2-1 shows a scenario where the NF service consumer sends a
request to the HSS to unsubscribe from notifications of data changes. The
request contains the URI previously received in the Location HTTP header of
the response to the subscription.
Figure 5.3.2.4.2-1: NF service consumer unsubscribes to notifications
1\. The NF service consumer sends a DELETE request to the resource identified
by the URI previously received during subscription creation.
2a. On success, the HSS responds with \"204 No Content\".
2b. If there is no valid subscription available (e.g. due to an unknown
subscriptionId value), HTTP status code \"404 Not Found\" should be returned
including additional error information in the response body (in the
\"ProblemDetails\" element).
On failure, the appropriate HTTP status code indicating the error shall be
returned and appropriate additional error information should be returned in
the DELETE response body.
In the case of redirection, the HSS shall return 3xx status code, which shall
contain a Location header with an URI pointing to the endpoint of another HSS
(service) instance.
#### 5.3.2.5 Notification
##### 5.3.2.5.1 General
The following procedures using the Notification service operation are
supported:
\- Data change notification to NF.
##### 5.3.2.5.2 Data Change Notification To NF
Figure 5.3.2.5.2-1 shows a scenario where the HSS notifies the NF service
consumer (that has subscribed to receive such notification) about subscription
data change. The request contains the callbackReference URI as previously
received in the SubscriptionData.
Figure 5.3.2.5.2-1: Subscription Data Change Notification
1\. The HSS sends a POST request to the callbackReference as provided by the
NF service consumer during the subscription.
2a. The NF service consumer responds with \"204 No Content\".
On failure, the appropriate HTTP status code indicating the error shall be
returned and appropriate additional error information should be returned in
the POST response body.
In the case of redirection, the NF Service Consumer shall return 3xx status
code, which shall contain a Location header with an URI pointing to an
alternative notification endpoint.
## 5.4 Nhss_UEContextManagement Service
### 5.4.1 Service Description
The service allows an NF consumer (UDM) to trigger the cancellation of any
previous registered serving node due to IRAT mobility. See 3GPP TS 23.632 [8],
clause 6.1.3.
### 5.4.2 Service Operations
#### 5.4.2.1 Introduction
For the Nhss_UEContextManagement service the following service operations are
defined:
\- SnDeregistration
\- ImeiUpdate
The Nhss_UEContextManagement service is used by Consumer NF (UDM) to request
HSS to deregister the MME/SGSN via cancel location procedure and to update the
IMEI of the UE in the HSS.
#### 5.4.2.2 SnDeregistration
##### 5.4.2.2.1 General
The following procedure using the SnDeregistration service operation is
supported:
\- SN Deregistration
##### 5.4.2.2.2 SN Deregistration
Figure 5.4.2.2.2-1 shows a scenario where the NF service consumer (UDM)
requests HSS to initiate Cancel Location procedure towards the MME/SGSN due to
IRAT mobility. The request contains the UE\'s identity which shall be an IMSI.
Figure 5.4.2.2.2-1: SN Deregistration
1\. The NF service consumer sends a POST request (custom method: deregister-
sn) to the HSS; the request body contains the UE identity (IMSI) and the
deregistration reason.
The HSS, based on the value indicated in the deregistration reason, initiates
a Cancel Location towards the serving node, including a Cancellation Type
value (see 3GPP TS 29.272 [17] and 3GPP TS 29.002 [19]) as follows:
\- \"UE_INITIAL_AND_SINGLE_REGISTRATION\": S6a/S6d/Gr(S4/Gn/Gp) Cancel
Location sent towards MME/SGSN, with a Cancellation-Type set to
MME_UPDATE_PROCEDURE/SGSN_UPDATE_PROCEDURE; the HSS shall delete the stored
MME/SGSN address and MME/SGSN number.
Additionally, a MAP D Cancel Location (IMSI) shall be sent towards MSC/VLR if
a VLR number was found in the HSS/HLR for the user; the HSS/HLR shall delete
the stored MSC/VLR number.
\- \"UE_INITIAL_AND_DUAL_REGISTRATION\": S6d/Gr(S4) Cancel Location sent
towards SGSN, with a Cancellation-Type set to SGSN_UPDATE_PROCEDURE; the HSS
shall delete the stored SGSN address and SGSN number.
NOTE 1: As described in 3GPP TS 23.502 [3], a UE operating in dual-
registration mode indicates that it is moving from EPS, which implies that
there is an MME registered in HSS.
\- \"EPS_TO_5GS_MOBILITY\": S6a Cancel Location sent towards MME, with a
Cancellation-Type set to MME_UPDATE_PROCEDURE; the HSS shall delete the stored
MME address and MME number.
Additionally, a MAP D Cancel Location (IMSI) shall be sent towards MSC/VLR if
a VLR number was found in the HSS/HLR for the user; the HSS/HLR shall delete
the stored MSC/VLR number.
\- \"EPS_TO_5GS_MOBILITY\": S6d/Gr(S4) Cancel Location sent towards SGSN, with
a Cancellation-Type set to SGSN_UPDATE_PROCEDURE; the HSS shall delete the
stored SGSN address and SGSN number.
NOTE 2: Based on operator policy, and the presence of GUAMI in the
DeregistrationRequest, the HSS can decide whether a registered VLR in the
VPLMN needs to be cancelled. It should be noted that keeping the VLR
registration can impact terminating services (e.g. T-ADS, MT-SMS...) causing
failed paging attempts.
2a. On success, the HSS responds with \"204 No Content\". If the HSS has a
valid subscription for the UE, but the UE is not registered in EPS network,
the HSS shall respond with \"204 No Content\".
2b. If there is no valid subscription data for the UE, HTTP status code \"404
Not Found\" should be returned including additional error information in the
response body (in the \"ProblemDetails\" element).
On failure, the appropriate HTTP status code indicating the error shall be
returned and appropriate additional error information should be returned in
the POST response body.
In the case of redirection, the HSS shall return 3xx status code, which shall
contain a Location header with an URI pointing to the endpoint of another HSS
(service) instance.
##### 5.4.2.2.3 IMEI Update
Figure 5.4.2.2.3-1 shows a scenario where the NF service consumer (UDM)
requests HSS to update the IMEI of the UE stored in the HSS. The request
contains the UE\'s identity which shall be an IMSI, and the new IMEI of the
UE.
Figure 5.4.2.2.3-1: IMEI Update
1\. The NF service consumer sends a POST request (custom method: imei-update)
to the HSS; the request body contains the UE identity (IMSI) and the new IMEI
of the UE.
2a. On success, the HSS responds with \"204 No Content\".
2b. If there is no valid subscription data for the UE, or the UE is not
registered in EPS network for 3GPP access, HTTP status code \"404 Not Found\"
should be returned including additional error information in the response body
(in the \"ProblemDetails\" element).
On failure, the appropriate HTTP status code indicating the error shall be
returned and appropriate additional error information should be returned in
the POST response body.
In the case of redirection, the HSS shall return 3xx status code, which shall
contain a Location header with an URI pointing to the endpoint of another HSS
(service) instance.
## 5.5 Nhss_EventExposure Service
### 5.5.1 Service Description
See 3GPP TS 23.632 [8].
### 5.5.2 Service Operations
#### 5.5.2.1 Introduction
For the Nhss_EventExposure service the following service operations are
defined:
\- Subscribe
\- Unsubscribe
\- Notify
\- ModifySubscription
The Nhss_EventExposure service is used by consumer NFs (e.g. UDM) to subscribe
to notifications of event occurrence by means of the Subscribe service
operation.
The Nhss_EventExposure service is also used by the consumer NFs (e.g. UDM)
that have previously subscribed to notifications, to unsubscribe by means of
the Unsubscribe service operation.
The Nhss_EventExposure service is also used by the subscribed consumer NFs
(e.g. UDM) to modify an existing subscription by means of the
ModifySubscription service operation.
#### 5.5.2.2 Subscribe
##### 5.5.2.2.1 General
The following procedures using the Subscribe service operation are supported:
\- Subscribe to Notification of event occurrence
##### 5.5.2.2.2 Subscription to Notification of event occurrence
Figure 5.5.2.2.2-1 shows a scenario where the NF service consumer sends a
request to the HSS to subscribe to notifications of event occurrence. The
request contains a callback URI, the type of event that is monitored and
additional information e.g. SCEF Id, event filters and reporting options.
Figure 5.5.2.2.2-1: NF service consumer subscribes to notifications
1\. The NF service consumer sends a POST request to the parent resource
(collection of subscriptions) (.../{ueId}/ee-subscriptions), to create a
subscription as present in message body. The request may contain an expiry
time, suggested by the NF Service Consumer, representing the time upto which
the subscription is desired to be kept active and the time after which the
subscribed event(s) shall stop generating notifications. Additionally, the
request may include an SCEF Id if Common Network Exposure is used (i.e. if
combined SCEF+NEF requested the event(s) to be subscribed/monitored in EPC)
2a. On success, the HSS responds with \"201 Created\" with the message body
containing a representation of the created subscription. The Location HTTP
header shall contain the URI of the created subscription. If both HSS and NF
consumer has indicated supporting of ERIR feature (see clause 6.4.8), the HSS
shall include available immediate event reports, i.e. reports already received
from MME, in the response body.
2b. If the user does not exist, HTTP status code \"404 Not Found\" shall be
returned including additional error information in the response body (in the
\"ProblemDetails\" element).
2c. If there is no valid subscription data for the UE, i.e. based on the UE\'s
subscription information monitoring of the requested EventType is not allowed,
or the requested EventType is not supported, HTTP status code \"403
Forbidden\" shall be returned including additional error information in the
response body (in the \"ProblemDetails\" element).
On failure, the appropriate HTTP status code indicating the error shall be
returned and appropriate additional error information should be returned in
the POST response body.
In the case of redirection, the HSS shall return 3xx status code, which shall
contain a Location header with an URI pointing to the endpoint of another HSS
(service) instance.
#### 5.5.2.3 Unsubscribe
##### 5.5.2.3.1 General
The following procedures using the Unsubscribe service operation are
supported:
\- Unsubscribe to Notifications of event occurrence
##### 5.5.2.3.2 Unsubscribe to notifications of event occurrence
Figure 5.5.2.3.2-1 shows a scenario where the NF service consumer sends a
request to the HSS to unsubscribe from notifications of event occurrence. The
request contains the URI previously received in the Location HTTP header of
the response to the subscription.
Figure 5.5.2.3.2-1: NF service consumer unsubscribes to notifications
1\. The NF service consumer sends a DELETE request to the resource identified
by the URI previously received during subscription creation.
2a. On success, the HSS responds with \"204 No Content\".
2b. If there is no valid subscription available (e.g. due to an unknown
SubscriptionId value), HTTP status code \"404 Not Found\" shall be returned
including additional error information in the response body (in the
\"ProblemDetails\" element).
On failure, the appropriate HTTP status code indicating the error shall be
returned and appropriate additional error information should be returned in
the DELETE response body.
In the case of redirection, the HSS shall return 3xx status code, which shall
contain a Location header with an URI pointing to the endpoint of another HSS
(service) instance.
#### 5.5.2.4 Notify
##### 5.5.2.4.1 General
The following procedures using the Notify service operation are supported:
\- Event Occurrence Notification
##### 5.5.2.4.2 Event Occurrence Notification
Figure 5.5.2.4.2-1 shows a scenario where the HSS notifies the NF service
consumer (that has subscribed to receive such notification) about occurrence
of an event. The request contains the callbackReference URI as previously
received in the EeSubscription.
Figure 5.5.2.4.2-1: Event Occurrence Notification
1\. The HSS sends a POST request to the callbackReference as provided by the
NF service consumer during the subscription.
2a. The NF Service Consumer responds with \"204 No Content\".
On failure, the appropriate HTTP status code indicating the error shall be
returned and appropriate additional error information should be returned in
the POST response body.
In the case of redirection, the NF Service Consumer shall return 3xx status
code, which shall contain a Location header with an URI pointing to an
alternative notification endpoint.
#### 5.5.2.5 ModifySubscription
##### 5.5.2.5.1 General
The following procedures using the ModifySubscription service operation are
supported:
\- Modification of an EE-Subscription to notification of events
##### 5.5.2.5.2 Modification of a subscription
The service operation is invoked by a NF Service Consumer, e.g. UDM, towards
the HSS, when it needs to modify an existing subscription previously created
by itself at the HSS.
The NF Service Consumer shall modify the subscription by using HTTP method
PATCH with the URI of the individual subscription resource to be modified.
Figure 5.5.2.5.2-1: NF service consumer updates subscription
1\. The NF service consumer (e.g. NEF) shall send a PATCH request to the
resource representing a subscription. The modification may be for the events
subscribed or for updating the event report options.
2a. On success, the request is accepted, the HSS shall respond with \"204 No
Content\".
2b. If the resource does not exist e.g. the subscriptionId cannot be found,
HTTP status code \"404 Not Found\" should be returned including additional
error information in the response body (in the \"ProblemDetails\" element).
2c. If the modification can\'t be accepted, HTTP status code \"403 Forbidden\"
should be returned including additional error information in the response body
(in the \"ProblemDetails\" element).
On failure, the appropriate HTTP status code indicating the error shall be
returned and appropriate additional error information should be returned in
the PATCH response body.
In the case of redirection, the HSS shall return 3xx status code, which shall
contain a Location header with an URI pointing to the endpoint of another HSS
(service) instance.
# 6 API Definitions
## 6.1 Nhss_UEAuthentication Service API
### 6.1.1 Introduction
The Nhss_UEAuthentication service shall use the Nhss_UEAuthentication API.
The request URI used in HTTP request from the NF service consumer towards the
NF service producer shall have the structure defined in clause 4.4.1 of 3GPP
TS 29.501 [5], i.e.:
**{apiRoot}/\ /\/\**
with the following components:
\- The {apiRoot} shall be set as described in 3GPP TS 29.501 [5].
\- The \ shall be \"nhss-ueau\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause 6.1.
### 6.1.2 Usage of HTTP
#### 6.1.2.1 General
HTTP/2, as defined in IETF RFC 7540 [9], shall be used as specified in clause
5 of 3GPP TS 29.500 [4].
HTTP/2 shall be transported as specified in clause 5.3 of 3GPP TS 29.500 [4].
HTTP messages and bodies for the Nhss_UEAuthentication service shall comply
with the OpenAPI [10] specification contained in Annex A.
#### 6.1.2.2 HTTP standard headers
##### 6.1.2.2.1 General
The usage of HTTP standard headers shall be supported as specified in clause
5.2.2 of 3GPP TS 29.500 [4].
##### 6.1.2.2.2 Content type
The following content types shall be supported:
\- JSON, as defined in IETF RFC 8259 [11], signalled by the content type
\"application/json\".
\- The Problem Details JSON Object (IETF RFC 7807 [12] signalled by the
content type \"application/problem+json\".
#### 6.1.2.3 HTTP custom headers
##### 6.1.2.3.1 General
In this release of the specification, no specific custom headers are defined
for the Nhss_UEAuthentication service.
For 3GPP specific HTTP custom headers used across all service based
interfaces, see clause 5.2.3 of 3GPP TS 29.500 [4].
### 6.1.3 Resources
#### 6.1.3.1 Overview
Figure 6.1.3.1-1: Resource URI structure of the nhss-ueau API
Table 6.1.3.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 6.1.3.1-1: Resources and methods overview
Resource name Resource URI HTTP method or custom operation Description
* * *
n/a generate-av generate-av (POST) Generate Authentication Vector
### 6.1.4 Custom Operations without associated resources
#### 6.1.4.1 Overview
Table 6.1.4.1-1: Custom operations without associated resources
Custom operation URI Mapped HTTP method Description
* * *
{apiRoot}/nhss-ueau/\/generate-av POST The HSS calculates a fresh
Authentication Vector taking into account the received information (imsi,
serving network name, authentication method)
#### 6.1.4.2 Operation: Generate AV
##### 6.1.4.2.1 Description
This custom operation is used by the NF service consumer (UDM) to request
calculation of an authentication vector for the provided imsi.
##### 6.1.4.2.2 Operation Definition
This operation shall support the response data structures and response codes
specified in tables 6.1.4.2.2-1 and 6.1.4.2.2-2.
Table 6.1.4.2.2-1: Data structures supported by the POST Request Body
* * *
Data type P Cardinality Description AvGenerationRequest M 1 Contains input
parameters for Authentication Vector calculation
* * *
Table 6.1.4.2.2-2: Data structures supported by the POST Response Body
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | AvGener | M | 1 | 200 OK | Upon success, | | ationResponse | | | | a response | | | | | | body | | | | | | containing | | | | | | the generated | | | | | | a | | | | | | uthentication | | | | | | vector shall | | | | | | be returned | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if a | | | | | | request is | | | | | | redirected to | | | | | | the same | | | | | | target | | | | | | resource via | | | | | | a different | | | | | | SCP. In the | | | | | | former case, | | | | | | the URI shall | | | | | | be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same HSS | | | | | | (service) | | | | | | set. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if a | | | | | | request is | | | | | | redirected to | | | | | | the same | | | | | | target | | | | | | resource via | | | | | | a different | | | | | | SCP. In the | | | | | | former case, | | | | | | the URI shall | | | | | | be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same HSS | | | | | | (service) | | | | | | set. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 403 Forbidden | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | AUTHENTICAT | | | | | | ION_REJECTED | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | USE | | | | | | R_NOT_FOUND | +---------------+---+-------------+---------------+---------------+
Table 6.1.4.2.2-3: Headers supported by the 307 Response Code on this resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same HSS | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
Table 6.1.4.2.2-4: Headers supported by the 308 Response Code on this resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same HSS | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
### 6.1.5 Notifications
In this release of this specification, no notifications are defined for the
Nhss_UEAuthentication Service.
### 6.1.6 Data Model
#### 6.1.6.1 General
This clause specifies the application data model supported by the API.
Table 6.1.6.1-1 specifies the data types defined for the Nhss service based
interface protocol.
Table 6.1.6.1-1: Nhss specific Data Types
Data type Clause defined Description Applicability
* * *
AvGenerationRequest 6.1.6.2.2 Contains imsi, authentication method, serving
network name, resynchronization info  
AvGenerationResponse 6.1.6.2.3 Contains the calculated Authentication Vector
Table 6.1.6.1-2 specifies data types re-used by the Nhss service based
interface protocol from other specifications, including a reference to their
respective specifications and when needed, a short description of their use
within the Nhss service based interface.
Table 6.1.6.1-2: Nhss re-used Data Types
Data type Reference Comments Applicability
* * *
AuthType 3GPP TS 29.503 [13]  
ServingNetworkName 3GPP TS 29.503 [13]  
ResynchronizationInfo 3GPP TS 29.503 [13]  
AvEapAkaPrime 3GPP TS 29.503 [13]  
Av5GHeAka 3GPP TS 29.503 [13]  
ProblemDetails 3GPP TS 29.571 [7] Response body of error response messages.  
RedirectResponse 3GPP TS 29.571 [7] Response body of redirect response
messages.
#### 6.1.6.2 Structured data types
##### 6.1.6.2.1 Introduction
This clause defines the structures to be used in resource representations.
##### 6.1.6.2.2 Type: AvGenerationRequest
Table 6.1.6.2.2-1: Definition of type AvGenerationRequest
Attribute name Data type P Cardinality Description Applicability
* * *
imsi string M 1 pattern: \"[0-9]{5,15}\"  
authType AuthType M 1 Indicates the authentication method; \"EAP_AKA_PRIME\"
or \"5G_AKA\"  
servingNetworkName ServingNetworkName M 1  
resynchronizationInfo ResynchronizationInfo O 0..1
##### 6.1.6.2.3 Type: AvGenerationResponse
Table 6.1.6.2.3-1: Definition of type AvGenerationResponse
Attribute name Data type P Cardinality Description Applicability
* * *
avEapAkaPrime AvEapAkaPrime C 0..1 shall be present if av5GHeAka is absent,
otherwise shall be absent.  
av5GHeAka Av5GHeAka C 0..1 shall be present if avEapAkaPrime is absent,
otherwise shall be absent.
#### 6.1.6.3 Simple data types and enumerations
##### 6.1.6.3.1 Introduction
This clause defines simple data types and enumerations that can be referenced
from data structures defined in the previous clauses.
##### 6.1.6.3.2 Simple data types
The simple data types defined in table 6.1.6.3.2-1 shall be supported.
Table 6.1.6.3.2-1: Simple data types
* * *
Type Name Type Definition Description Applicability
* * *
### 6.1.7 Error Handling
#### 6.1.7.1 General
HTTP error handling shall be supported as specified in clause 5.2.4 of 3GPP TS
29.500 [4].
#### 6.1.7.2 Protocol Errors
Protocol errors handling shall be supported as specified in clause 5.2.7 of
3GPP TS 29.500 [4].
#### 6.1.7.3 Application Errors
The application errors defined for the Nhss_UEAuthentication service are
listed in table 6.1.7.3-1.
Table 6.1.7.3-1: Application errors
Application Error HTTP status code Description
* * *
AUTHENTICATION_REJECTED 403 Forbidden The user cannot be authenticated
USER_NOT_FOUND 404 Not Found The user does not exist in the HPLMN
### 6.1.8 Feature negotiation
The optional features in table 6.1.8-1 are defined for the
Nhss_UEAuthentication API. They shall be negotiated using the extensibility
mechanism defined in clause 6.6 of 3GPP TS 29.500 [4].
Table 6.1.8-1: Supported Features
Feature number Feature Name Description
* * *
## 6.2 Nhss_SubscriberDataManagement Service API
### 6.2.1 API URI
The Nhss_SubscriberDataManagement service shall use the
Nhss_SubscriberDataManagement API.
The request URI used in HTTP request from the NF service consumer towards the
NF service producer shall have the structure defined in clause 4.4.1 of 3GPP
TS 29.501 [5], i.e.:
**{apiRoot}/\ /\/\**
with the following components:
\- The {apiRoot} shall be set as described in 3GPP TS 29.501 [5].
\- The \ shall be \"nhss-sdm\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause
6.2.3.
### 6.2.2 Usage of HTTP
#### 6.2.2.1 General
HTTP/2, as defined in IETF RFC 7540 [9], shall be used as specified in clause
5 of 3GPP TS 29.500 [4].
HTTP/2 shall be transported as specified in clause 5.3 of 3GPP TS 29.500 [4].
HTTP messages and bodies for the Nhss_SubscriberDataManagement service shall
comply with the OpenAPI [10] specification contained in Annex A.
#### 6.2.2.2 HTTP standard headers
##### 6.2.2.2.1 General
The usage of HTTP standard headers shall be supported as specified in clause
5.2.2 of 3GPP TS 29.500 [4].
##### 6.2.2.2.2 Content type
The following content types shall be supported:
\- JSON, as defined in IETF RFC 8259 [11], signalled by the content type
\"application/json\".
\- The Problem Details JSON Object (IETF RFC 7807 [12] signalled by the
content type \"application/problem+json\".
#### 6.2.2.3 HTTP custom headers
##### 6.2.2.3.1 General
In this release of the specification, no specific custom headers are defined
for the Nhss_SubscriberDataManagement service.
For 3GPP specific HTTP custom headers used across all service-based
interfaces, see clause 5.2.3 of 3GPP TS 29.500 [4].
### 6.2.3 Resources
#### 6.2.3.1 Overview
Figure 6.2.3.1-1: Resource URI structure of the nhss-sdm API
Table 6.2.3.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 6.2.3.1-1: Resources and methods overview
+----------------+----------------+----------------+----------------+ | Resource name\ | Resource URI | HTTP method or | Description | | (Archetype) | | custom | | | | | operation | | +================+================+================+================+ | UeCon | /{ | GET | Retrieve the | | textInPgwData\ | ueId}/ue-conte | | UE\'s Context | | (Document) | xt-in-pgw-data | | in PGW Data | +----------------+----------------+----------------+----------------+ | Subscriptions | /{ueId} | POST | Create a | | | /subscriptions | | subscription | | (Collection) | | | | +----------------+----------------+----------------+----------------+ | Individual | /{ueId}/su | DELETE | Delete the | | Subscription | bscriptions/{s | | subscription | | | ubscriptionId} | | identified by | | (Document) | | | {su | | | | | bscriptionId}, | | | | | i.e. | | | | | unsubscribe | +----------------+----------------+----------------+----------------+ | | | PATCH | Modify the | | | | | subscription | | | | | identified by | | | | | {s | | | | | ubscriptionId} | +----------------+----------------+----------------+----------------+
#### 6.2.3.2 Resource: UeContextInPgwData
##### 6.2.3.2.1 Description
This resource represents the allocated PGWs for the UE.
##### 6.2.3.2.2 Resource Definition
Resource URI: {apiRoot}/nhss-sdm/\/{ueId}/ue-context-in-pgw-data
This resource shall support the resource URI variables defined in table
6.2.3.2.2-1.
Table 6.2.3.2.2-1: Resource URI variables for this resource
+------------+----------------------------------------------+ | Name | Definition | +============+==============================================+ | apiRoot | See clause 6.2.1 | +------------+----------------------------------------------+ | apiVersion | See clause 6.2.1 | +------------+----------------------------------------------+ | ueId | Represents the UE identifier with type IMSI. | | | | | | pattern: \"\^(imsi-[0-9]{5,15}\|.+)\$\" | +------------+----------------------------------------------+
##### 6.2.3.2.3 Resource Standard Methods
###### 6.2.3.2.3.1 GET
This method shall support the URI query parameters specified in table
6.2.3.2.3.1-1.
Table 6.2.3.2.3.3-1: URI query parameters supported by the GET method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
6.2.3.2.3.1-2 and the response data structures and response codes specified in
table 6.2.3.2.3.1-3.
Table 6.2.3.2.3.1-2: Data structures supported by the GET Request Body on this
resource
* * *
Data type P Cardinality Description n/a
* * *
Table 6.2.3.2.3.1-3: Data structures supported by the GET Response Body on
this resource
+--------------+-------+--------------+--------------+--------------+ | **Data |** P**|** C | **Response** | **D | | type** | | ardinality**| | escription** | | | | | **codes** | | +--------------+-------+--------------+--------------+--------------+ | UeCont | M | 1 | 200 OK | A response | | extInPgwData | | | | body | | | | | | containing | | | | | | the | | | | | | UeCont | | | | | | extInPgwData | | | | | | shall be | | | | | | returned. | +--------------+-------+--------------+--------------+--------------+ | Redi | O | 0..1 | 307 | Temporary | | rectResponse | | | Temporary | redirection. | | | | | Redirect | The response | | | | | | shall | | | | | | include a | | | | | | Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if | | | | | | a request is | | | | | | redirected | | | | | | to the same | | | | | | target | | | | | | resource via | | | | | | a different | | | | | | SCP. In the | | | | | | former case, | | | | | | the URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on | | | | | | an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same HSS | | | | | | (service) | | | | | | set. | +--------------+-------+--------------+--------------+--------------+ | Redi | O | 0..1 | 308 | Permanent | | rectResponse | | | Permanent | redirection. | | | | | Redirect | The response | | | | | | shall | | | | | | include a | | | | | | Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if | | | | | | a request is | | | | | | redirected | | | | | | to the same | | | | | | target | | | | | | resource via | | | | | | a different | | | | | | SCP. In the | | | | | | former case, | | | | | | the URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on | | | | | | an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same HSS | | | | | | (service) | | | | | | set. | +--------------+-------+--------------+--------------+--------------+ | Pr | O | 0..1 | 404 Not | The | | oblemDetails | | | Found | \"cause\" | | | | | | attribute | | | | | | may be used | | | | | | to indicate | | | | | | one of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | USER | | | | | | _NOT_FOUND | | | | | | | | | | | | - | | | | | | DATA | | | | | | _NOT_FOUND | +--------------+-------+--------------+--------------+--------------+ | NOTE: In | | | | | | addition, | | | | | | common data | | | | | | structures | | | | | | as listed in | | | | | | Tab | | | | | | le 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | are | | | | | | supported. | | | | | +--------------+-------+--------------+--------------+--------------+
Table 6.2.3.2.3.1-4: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same HSS | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
Table 6.2.3.2.3.1-5: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same HSS | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
#### 6.2.3.3 Resource: Subscriptions
##### 6.2.3.3.1 Description
This resource is used to represent subscriptions to notifications.
##### 6.2.3.3.2 Resource Definition
Resource URI: {apiRoot}/nhss-sdm/\/{ueId}/subscriptions
This resource shall support the resource URI variables defined in table
6.2.3.3.2-1.
Table 6.2.3.3.2-1: Resource URI variables for this resource
* * *
Name Definition
* * *
apiRoot See clause 6.1.1
apiVersion See clause 6.1.1
ueId Represents the IMSI of the subscriber.\ pattern:
\"\^(imsi-[0-9]{5,15})\$\"
* * *
##### 6.2.3.3.3 Resource Standard Methods
###### 6.2.3.3.3.1 POST
This method shall support the URI query parameters specified in table
6.2.3.3.3.1-1.
Table 6.2.3.3.3.1-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
6.2.3.3.3.1-2 and the response data structures and response codes specified in
table 6.2.3.3.3.1-3.
Table 6.2.3.3.3.1-2: Data structures supported by the POST Request Body on
this resource
* * *
Data type P Cardinality Description SubscriptionData M 1 The subscription that
is to be created.
* * *
Table 6.2.3.3.3.1-3: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | Sub | M | 1 | 201 Created | Upon success, | | scriptionData | | | | a response | | | | | | body | | | | | | containing a | | | | | | r | | | | | | epresentation | | | | | | of the | | | | | | created | | | | | | Individual | | | | | | subscription | | | | | | resource | | | | | | shall be | | | | | | returned. | | | | | | | | | | | | The HTTP | | | | | | response | | | | | | shall include | | | | | | a | | | | | | \"Location\" | | | | | | HTTP header | | | | | | that contains | | | | | | the resource | | | | | | URI of the | | | | | | created | | | | | | resource. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if a | | | | | | request is | | | | | | redirected to | | | | | | the same | | | | | | target | | | | | | resource via | | | | | | a different | | | | | | SCP. In the | | | | | | former case, | | | | | | the URI shall | | | | | | be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same HSS | | | | | | (service) | | | | | | set. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if a | | | | | | request is | | | | | | redirected to | | | | | | the same | | | | | | target | | | | | | resource via | | | | | | a different | | | | | | SCP. In the | | | | | | former case, | | | | | | the URI shall | | | | | | be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same HSS | | | | | | (service) | | | | | | set. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | USE | | | | | | R_NOT_FOUND | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 501 Not | The \"cause\" | | roblemDetails | | | Implemented | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | UNSUPPORTED_ | | | | | | RESOURCE_URI | | | | | | | | | | | | This response | | | | | | shall not be | | | | | | cached. | +---------------+---+-------------+---------------+---------------+ | NOTE: In | | | | | | addition, | | | | | | common data | | | | | | structures as | | | | | | listed in | | | | | | Ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | are | | | | | | supported. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.2.3.3.3.1-4: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same HSS | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
Table 6.2.3.3.3.1-5: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same HSS | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
#### 6.2.3.4 Resource: Individual subscription
##### 6.2.3.4.1 Description
This resource is used to represent an individual subscription to
notifications.
##### 6.2.3.4.2 Resource Definition
Resource URI: {apiRoot}/nhss-
sdm/\/{ueId}/subscriptions/{subscriptionId}
This resource shall support the resource URI variables defined in table
6.2.3.4.2-1.
Table 6.2.3.4.2-1: Resource URI variables for this resource
* * *
Name Definition
* * *
apiRoot See clause 6.1.1
apiVersion See clause 6.1.1
ueId Represents the IMSI of the subscriber\ pattern:
\"\^(imsi-[0-9]{5,15})\$\"
subscriptionId The subscriptionId identifies an individual subscription to
notifications.
* * *
##### 6.2.3.4.3 Resource Standard Methods
###### 6.2.3.4.3.1 DELETE
This method shall support the URI query parameters specified in table
6.2.3.4.3.1-1.
Table 6.2.3.4.3.1-1: URI query parameters supported by the DELETE method on
this resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
6.2.3.4.3.1-2 and the response data structures and response codes specified in
table 6.2.3.4.3.1-3.
Table 6.2.3.4.3.1-2: Data structures supported by the Delete Request Body on
this resource
* * *
Data type P Cardinality Description n/a The request body shall be empty.
* * *
Table 6.2.3.4.3.1-3: Data structures supported by the DELETE Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Upon success, | | | | | Content | an empty | | | | | | response body | | | | | | shall be | | | | | | returned. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if a | | | | | | request is | | | | | | redirected to | | | | | | the same | | | | | | target | | | | | | resource via | | | | | | a different | | | | | | SCP. In the | | | | | | former case, | | | | | | the URI shall | | | | | | be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same HSS | | | | | | (service) | | | | | | set. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if a | | | | | | request is | | | | | | redirected to | | | | | | the same | | | | | | target | | | | | | resource via | | | | | | a different | | | | | | SCP. In the | | | | | | former case, | | | | | | the URI shall | | | | | | be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same HSS | | | | | | (service) | | | | | | set. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | USE | | | | | | R_NOT_FOUND | | | | | | | | | | | | - | | | | | | SUBSCRIPTIO | | | | | | N_NOT_FOUND | | | | | | (see | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | tab | | | | | | le 5.2.7.2-1) | +---------------+---+-------------+---------------+---------------+ | NOTE: In | | | | | | addition, | | | | | | common data | | | | | | structures as | | | | | | listed in | | | | | | Ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | are | | | | | | supported. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.2.3.4.3.1-4: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same HSS | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
Table 6.2.3.4.3.1-5: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same HSS | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
###### 6.2.3.4.3.2 PATCH
This method shall support the URI query parameters specified in table
6.2.3.4.3.2-1.
Table 6.2.3.4.3.2-1: URI query parameters supported by the PATCH method on
this resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
6.2.3.4.3.2-2 and the response data structures and response codes specified in
table 6.2.3.4.3.2-3.
Table 6.2.3.4.3.2-2: Data structures supported by the PATCH Request Body on
this resource
* * *
Data type P Cardinality Description array(PatchItem) M 1 It contains the list
of changes to be made to the resource representing the individual
subscription, according to the JSON PATCH format specified in IETF RFC 6902
[13].
* * *
Table 6.2.3.4.3.2-3: Data structures supported by the PATCH Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Upon success, | | | | | Content | a response | | | | | | with no | | | | | | content is | | | | | | returned. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if a | | | | | | request is | | | | | | redirected to | | | | | | the same | | | | | | target | | | | | | resource via | | | | | | a different | | | | | | SCP. In the | | | | | | former case, | | | | | | the URI shall | | | | | | be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same HSS | | | | | | (service) | | | | | | set. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if a | | | | | | request is | | | | | | redirected to | | | | | | the same | | | | | | target | | | | | | resource via | | | | | | a different | | | | | | SCP. In the | | | | | | former case, | | | | | | the URI shall | | | | | | be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same HSS | | | | | | (service) | | | | | | set. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | USE | | | | | | R_NOT_FOUND | | | | | | | | | | | | - | | | | | | SUBSCRIPTIO | | | | | | N_NOT_FOUND | | | | | | (see | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | tab | | | | | | le 5.2.7.2-1) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 403 Forbidden | One or more | | roblemDetails | | | | attributes | | | | | | are not | | | | | | allowed to be | | | | | | modified. | | | | | | | | | | | | The \"cause\" | | | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | MODIFICATION\ | | | | | | _NOT_ALLOWED | | | | | | (see | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | tab | | | | | | le 5.2.7.2-1) | +---------------+---+-------------+---------------+---------------+ | NOTE: In | | | | | | addition, | | | | | | common data | | | | | | structures as | | | | | | listed in | | | | | | Ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | are | | | | | | supported. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.2.3.4.3.2-4: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same HSS | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
Table 6.2.3.4.3.2-5: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same HSS | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
6.2.4 Custom Operations without associated resources
In this release of this specification, no custom operations without associated
resources are defined for the Nhss_SubscriberDataManagement Service.
6.2.5 Notifications
#### 6.2.5.1 General
This clause specifies the use of notifications and corresponding protocol
details.
#### 6.2.5.2 Data Change Notification
The POST method shall be used for Data Change Notifications and the URI shall
be as provided during the subscription procedure.
Resource URI: {callbackReference}
Support of URI query parameters is specified in table 6.2.5.2-1.
Table 6.2.5.2-1: URI query parameters supported by the POST method
* * *
Name Data type P Cardinality Description n/a
* * *
Support of request data structures is specified in table 6.2.5.2-2 and of
response data structures and response codes is specified in table 6.2.5.2-3.
Table 6.2.5.2-2: Data structures supported by the POST Request Body
* * *
Data type P Cardinality Description ModificationNotification M 1
* * *
Table 6.2.5.2-3: Data structures supported by the POST Response Body
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Upon success, | | | | | Content | an empty | | | | | | response body | | | | | | shall be | | | | | | returned. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI. The URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | notification | | | | | | endpoint of | | | | | | the | | | | | | subscribing | | | | | | NF Service | | | | | | Consumer. | | | | | | | | | | | | If an SCP | | | | | | redirects the | | | | | | message to | | | | | | another SCP | | | | | | then the | | | | | | location | | | | | | header field | | | | | | shall contain | | | | | | the same URI | | | | | | or a | | | | | | different URI | | | | | | pointing to | | | | | | the endpoint | | | | | | of the NF | | | | | | service | | | | | | consumer to | | | | | | which the | | | | | | notification | | | | | | should be | | | | | | sent. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI. The URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | notification | | | | | | endpoint of | | | | | | the | | | | | | subscribing | | | | | | NF Service | | | | | | Consumer. | | | | | | | | | | | | If an SCP | | | | | | redirects the | | | | | | message to | | | | | | another SCP | | | | | | then the | | | | | | location | | | | | | header field | | | | | | shall contain | | | | | | the same URI | | | | | | or a | | | | | | different URI | | | | | | pointing to | | | | | | the endpoint | | | | | | of the NF | | | | | | service | | | | | | consumer to | | | | | | which the | | | | | | notification | | | | | | should be | | | | | | sent. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | CONTEX | | | | | | T_NOT_FOUND | | | | | | | | | | | | See table | | | | | | 6.2.7.3-1 for | | | | | | the | | | | | | description | | | | | | of this | | | | | | error. | +---------------+---+-------------+---------------+---------------+ | NOTE: In | | | | | | addition, | | | | | | common data | | | | | | structures as | | | | | | listed in | | | | | | Ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | are | | | | | | supported. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.2.5.2-4: Headers supported by the 307 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 A URI pointing to
the endpoint of the NF service consumer to which the notification should be
sent. 3gpp-Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF
(service) instance ID towards which the request is redirected.
* * *
Table 6.2.5.2-5: Headers supported by the 308 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 A URI pointing to
the endpoint of the NF service consumer to which the notification should be
sent. 3gpp-Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF
(service) instance ID towards which the request is redirected.
* * *
### 6.2.6 Data Model
#### 6.2.6.1 General
This clause specifies the application data model supported by the API.
Table 6.2.6.1-1 specifies the data types defined for the
Nhss_SubscriberDataManagement service API.
Table 6.2.6.1-1: Nhss_SubscriberDataManagement specific Data Types
Data type Clause defined Description
* * *
UeContextInPgwData 6.2.6.2.2  
SubscriptionData 6.2.6.2.3 Subscription Data SubscriptionDataSets 6.2.6.2.4 UE
Subscription Data Sets
Table 6.2.6.1-2 specifies data types re-used by the
Nhss_SubscriberDataManagement service API from other APIs, including a
reference and when needed, a short description of their use within the
Nhss_SubscriberDataManagement service API.
Table 6.2.6.1-2: Nhss_SubscriberDataManagement re-used Data Types
Data type Reference Comments
* * *
PgwInfo 3GPP TS 29.503 [13]  
ModificationNotification 3GPP TS 29.503 [13]  
NfInstanceId 3GPP TS 29.571 [7] Network Function Instance Identifier Uri 3GPP
TS 29.571 [7] Uniform Resource Identifier DateTime 3GPP TS 29.571 [7]  
ProblemDetails 3GPP TS 29.571 [7] Response body of error response messages.
RedirectResponse 3GPP TS 29.571 [7] Response body of redirect response
messages.
#### 6.2.6.2 Structured data types
##### 6.2.6.2.1 Introduction
This clause defines the data structures to be used in resource
representations.
##### 6.2.6.2.2 Type: UeContextInPgwData
Table 6.2.6.2.2-1: Definition of type UeContextInPgwData
Attribute name Data type P Cardinality Description
* * *
pgwInfo array(PgwInfo) O 1..N Information about the APNs and PGW-C+SMF FQDNs
used in interworking with UDM emergencyFqdn string O 0..1 PGW-C+SMF FQDN for
emergency session Note: At least one of pgwInfo and emergencyFqdn shall be
present. The format of PGW-C+SMF FQDN is specified in clause 5.12.3.2, 3GPP TS
29.303 [16].
##### 6.2.6.2.3 Type: SubscriptionData
Table 6.2.6.2.3-1: Definition of type SubscriptionData
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | nfInstanceId | NfInstanceId | M | 1 | Identity of | | | | | | the NF | | | | | | Instance | | | | | | creating the | | | | | | subscription. | +---------------+---------------+---+-------------+---------------+ | call | Uri | M | 1 | URI provided | | backReference | | | | by the NF | | | | | | service | | | | | | consumer to | | | | | | receive | | | | | | notifications | +---------------+---------------+---+-------------+---------------+ | monitore | array(Uri) | M | 1..N | A set of URIs | | dResourceUris | | | | that identify | | | | | | the resources | | | | | | for which a | | | | | | change | | | | | | triggers a | | | | | | notification. | | | | | | | | | | | | The URI shall | | | | | | take the form | | | | | | of either an | | | | | | absolute URI | | | | | | or an | | | | | | absolute-path | | | | | | reference as | | | | | | defined in | | | | | | IETF RFC | | | | | | 3986 [31]. | | | | | | | | | | | | See NOTE 1. | +---------------+---------------+---+-------------+---------------+ | expires | DateTime | O | 0..1 | If present in | | | | | | a POST | | | | | | request, it | | | | | | indicates the | | | | | | point in time | | | | | | at which the | | | | | | subscription | | | | | | expires. | | | | | | | | | | | | Within a POST | | | | | | request the | | | | | | proposed | | | | | | expiry time | | | | | | is conveyed | | | | | | whereas in a | | | | | | POST response | | | | | | or PATCH | | | | | | response the | | | | | | confirmed | | | | | | expiry time | | | | | | is returned. | +---------------+---------------+---+-------------+---------------+ | im | boolean | O | 0..1 | This IE | | mediateReport | | | | indicates | | | | | | whether | | | | | | immediate | | | | | | report is | | | | | | needed or | | | | | | not. | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | be set as | | | | | | following: | | | | | | | | | | | | - true: | | | | | | immediate | | | | | | report is | | | | | | required | | | | | | | | | | | | - false | | | | | | (default) | | | | | | immediate | | | | | | report is not | | | | | | required | +---------------+---------------+---+-------------+---------------+ | report | Subscri | C | 0..1 | This IE shall | | | ptionDataSets | | | be present in | | | | | | Subscribe | | | | | | response, if | | | | | | the | | | | | | im | | | | | | mediateReport | | | | | | attribute is | | | | | | set to | | | | | | \"true\" in | | | | | | Subscribe | | | | | | request. | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | contain the | | | | | | r | | | | | | epresentation | | | | | | of | | | | | | subscription | | | | | | data sets | | | | | | that to be | | | | | | monitored, | | | | | | i.e. listed | | | | | | in | | | | | | monitore | | | | | | dResourceUris | | | | | | attribute. | +---------------+---------------+---+-------------+---------------+ | NOTE 1: The | | | | | | HSS should | | | | | | handle only | | | | | | the | | | | | | relative-path | | | | | | part | | | | | | (a | | | | | | piSpecificRes | | | | | | ourceUriPart, | | | | | | see | | | | | | 3GPP TS | | | | | | 29.501 [5] | | | | | | clause 4.4.1) | | | | | | and ignore | | | | | | possible | | | | | | in | | | | | | consistencies | | | | | | (caused by | | | | | | e.g. an SCP) | | | | | | in the base | | | | | | URI part. | | | | | +---------------+---------------+---+-------------+---------------+
##### 6.2.6.2.4 Type: SubscriptionDataSets
Table 6.2.6.2.4-1: Definition of type SusbcriptionDataSets
Attribute name Data type P Cardinality Description
* * *
ueContextInPgwData UeContextInPgwData O 0..1 UE Context in PGW Data
#### 6.2.6.3 Simple data types and enumerations
##### 6.2.6.3.1 Introduction
This clause defines simple data types and enumerations that can be referenced
from data structures defined in the previous clauses.
##### 6.2.6.3.2 Simple data types
The simple data types defined in table 6.2.6.3.2-1 shall be supported.
Table 6.2.6.3.2-1: Simple data types
* * *
Type Name Type Definition Description
* * *
### 6.2.7 Error Handling
#### 6.2.7.1 General
HTTP error handling shall be supported as specified in clause 5.2.4 of 3GPP TS
29.500 [4].
#### 6.2.7.2 Protocol Errors
Protocol errors handling shall be supported as specified in clause 5.2.7 of
3GPP TS 29.500 [4].
#### 6.2.7.3 Application Errors
The common application errors defined in the Table 5.2.7.2-1 in 3GPP TS 29.500
[4] may also be used for the Nhss_SubscriberDataManagement service. The
following application errors listed in Table 6.2.7.3-1 are specific for the
Nhss_SubscriberDataManagement service.
Table 6.2.7.3-1: Application errors
Application Error HTTP status code Description
* * *
USER_NOT_FOUND 404 Not Found The user does not exist. DATA_NOT_FOUND 404 Not
Found The requested data is not found/does not exist. CONTEXT_NOT_FOUND 404
Not Found It is used during the modification of an existing subscription when
no corresponding context exists.
### 6.2.8 Feature Negotiation
The optional features in table 6.2.8-1 are defined for the
Nhss_SubscriberDataManagement API. They shall be negotiated using the
extensibility mechanism defined in clause 6.6 of 3GPP TS 29.500 [4].
Table 6.2.8-1: Supported Features
Feature number Feature Name Description
* * *
## 6.3 Nhss_UEContextManagement Service API
### 6.3.1 Introduction
The Nhss_UEContextManagement service shall use the Nhss_UEContextManagement
API.
The request URI used in HTTP request from the NF service consumer towards the
NF service producer shall have the structure defined in clause 4.4.1 of 3GPP
TS 29.501 [5], i.e.:
**{apiRoot}/\ /\/\**
with the following components:
\- The {apiRoot} shall be set as described in 3GPP TS 29.501 [5].
\- The \ shall be \"nhss-uecm\".
\- The \ shall be \"v1\".
\- The \ shall be set as described in clause 6.1.
### 6.3.2 Usage of HTTP
#### 6.3.2.1 General
HTTP/2, as defined in IETF RFC 7540 [9], shall be used as specified in clause
5 of 3GPP TS 29.500 [4].
HTTP/2 shall be transported as specified in clause 5.3 of 3GPP TS 29.500 [4].
HTTP messages and bodies for the Nhss_UEContextManagement service shall comply
with the OpenAPI [10] specification contained in Annex A.
#### 6.3.2.2 HTTP standard headers
##### 6.3.2.2.1 General
The usage of HTTP standard headers shall be supported as specified in clause
5.2.2 of 3GPP TS 29.500 [4].
##### 6.3.2.2.2 Content type
The following content types shall be supported:
\- JSON, as defined in IETF RFC 8259 [11], signalled by the content type
\"application/json\".
\- The Problem Details JSON Object (IETF RFC 7807 [12] signalled by the
content type \"application/problem+json\".
#### 6.3.2.3 HTTP custom headers
##### 6.3.2.3.1 General
In this release of the specification, no specific custom headers are defined
for the Nhss_UEContextManagement service.
For 3GPP specific HTTP custom headers used across all service-based
interfaces, see clause 5.2.3 of 3GPP TS 29.500 [4].
### 6.3.3 Resources
#### 6.3.3.1 Overview
Figure 6.3.3.1-1: Resource URI structure of the nhss-uecm API
Table 6.3.3.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 6.3.3.1-1: Resources and methods overview
+---------------+---------------+-----------------+-----------------+ | Resource name | Resource URI | HTTP method or | Description | | | | custom | | | | | operation | | +===============+===============+=================+=================+ | n/a | deregister-sn | deregister-sn | Requesting | | | | (POST) | MME/SGSN | | | | | deregistration | +---------------+---------------+-----------------+-----------------+ | n/a | imei-update | imei-update | Requests the | | | | | update of the | | | | (POST) | IMEI of the UE | | | | | stored in HSS | +---------------+---------------+-----------------+-----------------+
### 6.3.4 Custom Operations without associated resources
#### 6.3.4.1 Overview
Table 6.3.4.1-1: Custom operations without associated resources
Custom operation URI Mapped HTTP method Description
* * *
{apiRoot}/nhss-uecm/\/deregister-sn POST Requesting MME/SGSN
deregistration.
#### 6.3.4.2 Operation: deregister-sn
##### 6.3.4.2.1 Description
This custom operation is used by the NF service consumer (UDM) to request
MME/SGSN deregistration.
##### 6.3.4.2.2 Operation Definition
This operation shall support the data structures and response codes specified
in tables 6.3.4.2.2-1 and 6.3.4.2.2-2.
Table 6.3.4.2.2-1: Data structures supported by the POST Request Body
* * *
Data type P Cardinality Description DeregistrationRequest M 1
* * *
Table 6.3.4.2.2-2: Data structures supported by the POST Response Body
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Upon success, | | | | | Content | an empty | | | | | | response body | | | | | | shall be | | | | | | returned. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if a | | | | | | request is | | | | | | redirected to | | | | | | the same | | | | | | target | | | | | | resource via | | | | | | a different | | | | | | SCP. In the | | | | | | former case, | | | | | | the URI shall | | | | | | be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same HSS | | | | | | (service) | | | | | | set. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if a | | | | | | request is | | | | | | redirected to | | | | | | the same | | | | | | target | | | | | | resource via | | | | | | a different | | | | | | SCP. In the | | | | | | former case, | | | | | | the URI shall | | | | | | be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same HSS | | | | | | (service) | | | | | | set. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | USE | | | | | | R_NOT_FOUND | +---------------+---+-------------+---------------+---------------+
Table 6.3.4.2.2-3: Headers supported by the 307 Response Code on this resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same HSS | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
Table 6.3.4.2.2-4: Headers supported by the 308 Response Code on this resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same HSS | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
#### 6.3.4.3 Operation: imei-update
##### 6.3.4.3.1 Description
This custom operation is used by the NF service consumer (UDM) to request the
update of the IMEI of the UE.
##### 6.3.4.3.2 Operation Definition
This operation shall support the data structures and response codes specified
in tables 6.3.4.3.2-1 and 6.3.4.3.2-2.
Table 6.3.4.3.2-1: Data structures supported by the POST Request Body
* * *
Data type P Cardinality Description ImeiUpdateInfo M 1
* * *
Table 6.3.4.3.2-2: Data structures supported by the POST Response Body
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Upon success, | | | | | Content | an empty | | | | | | response body | | | | | | shall be | | | | | | returned. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if a | | | | | | request is | | | | | | redirected to | | | | | | the same | | | | | | target | | | | | | resource via | | | | | | a different | | | | | | SCP. In the | | | | | | former case, | | | | | | the URI shall | | | | | | be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same HSS | | | | | | (service) | | | | | | set. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if a | | | | | | request is | | | | | | redirected to | | | | | | the same | | | | | | target | | | | | | resource via | | | | | | a different | | | | | | SCP. In the | | | | | | former case, | | | | | | the URI shall | | | | | | be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same HSS | | | | | | (service) | | | | | | set. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | USE | | | | | | R_NOT_FOUND | | | | | | | | | | | | - | | | | | | CONTEX | | | | | | T_NOT_FOUND | +---------------+---+-------------+---------------+---------------+
Table 6.3.4.3.2-3: Headers supported by the 307 Response Code on this resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same HSS | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
Table 6.3.4.3.2-4: Headers supported by the 308 Response Code on this resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same HSS | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
### 6.3.5 Notifications
In this release of this specification, no notifications are defined for the
Nhss_UEContextManagement Service.
### 6.3.6 Data Model
#### 6.3.6.1 General
This clause specifies the application data model supported by the API.
Table 6.3.6.1-1 specifies the structured data types defined for the Nhss_UECM
service API.
Table 6.3.6.1-1: Nhss_UECM specific Data Types
Data type Clause defined Description Applicability
* * *
DeregistrationRequest 6.3.6.2.2 Contains IMSI, deregistration reason  
ImeiUpdateInfo 6.3.6.2.3 Contains IMSI, new IMEI
Table 6.3.6.1-2 specifies data types re-used by the Nhss_UECM service API from
other specifications, including a reference to their respective specifications
and when needed, a short description of their use within the Nhss_UECM service
API.
Table 6.3.6.1-2: Nhss_UECM re-used Data Types
Data type Reference Comments Applicability
* * *
Guami 3GPP TS 29.571 [7]  
ProblemDetails 3GPP TS 29.571 [7] Response body of error response messages.  
RedirectResponse 3GPP TS 29.571 [7] Response body of redirect response
messages.
#### 6.3.6.2 Structured data types
##### 6.3.6.2.1 Introduction
This clause defines the structures to be used in resource representations.
##### 6.3.6.2.2 Type: DeregistrationRequest
Table 6.3.6.2.2-1: Definition of type DeregistrationRequest
Attribute name Data type P Cardinality Description Applicability
* * *
imsi string M 1 pattern: \"\^[0-9]{5,15}\$\"  
deregReason DeregistrationReason M 1 String, see clause 6.3.6.3.3  
guami Guami O 0..1 The GUAMI identifying the AMF where the UE is registered.
May be used by the HSS based on operator policy to decide whether a registered
VLR shall be cancelled.
##### 6.3.6.2.3 Type: ImeiUpdateInfo
Table 6.3.6.2.3-1: Definition of type ImeiUpdateInfo
+-----------------+-----------+---+-------------+-----------------+ | Attribute name | Data type | P | Cardinality | Description | +=================+===========+===+=============+=================+ | imsi | string | M | 1 | IMSI of the | | | | | | subscriber. | | | | | | | | | | | | pattern: | | | | | | \"\^[ | | | | | | 0-9]{5,15}\$\" | +-----------------+-----------+---+-------------+-----------------+ | imei | string | C | 0..1 | IMEI of the UE | | | | | | as described in | | | | | | 3GPP TS | | | | | | 23.003 [15], | | | | | | clause 6.2.1; | | | | | | it shall not | | | | | | include the | | | | | | Check Digit. | | | | | | | | | | | | pattern: | | | | | | \"\^ | | | | | | [0-9]{14}\$\" | +-----------------+-----------+---+-------------+-----------------+ | imeisv | string | C | 0..1 | IMEISV of the | | | | | | UE as described | | | | | | in | | | | | | 3GPP TS | | | | | | 23.003 [15], | | | | | | clause 6.2.2. | | | | | | | | | | | | pattern: | | | | | | \"\^ | | | | | | [0-9]{16}\$\" | +-----------------+-----------+---+-------------+-----------------+ | NOTE: Exactly | | | | | | one of | | | | | | attributes | | | | | | \"imei\" or | | | | | | \"imeisv\" | | | | | | shall be | | | | | | present. | | | | | +-----------------+-----------+---+-------------+-----------------+
#### 6.3.6.3 Simple data types and enumerations
##### 6.3.6.3.1 Introduction
This clause defines simple data types and enumerations that can be referenced
from data structures defined in the previous clauses.
##### 6.3.6.3.2 Simple data types
The simple data types defined in table 6.3.6.3.2-1 shall be supported.
Table 6.3.6.3.2-1: Simple data types
* * *
Type Name Type Definition Description
* * *
##### 6.3.6.3.3 Enumeration: DeregistrationReason
Table 6.3.6.3.3-1: Enumeration DeregistrationReason
Enumeration value Description
* * *
\"UE_INITIAL_AND_SINGLE_REGISTRATION\" This value is used when the UDM needs
to indicate to HSS that the MME/SGSN, if any, shall be cancelled due to an
initial registration for single registration.
\"UE_INITIAL_AND_DUAL_REGISTRATION\" This value is used when the UDM needs to
indicate to HSS that an SGSN shall be cancelled (due to initial registration),
but the MME shall not be cancelled (due to dual registration).
\"EPS_TO_5GS_MOBILITY\" This value is used when the UDM needs to indicate to
HSS that the MME/SGSN, if any, shall be cancelled due to a mobility event
(i.e. for single registration which is not an initial registration).
### 6.3.7 Error Handling
#### 6.3.7.1 General
HTTP error handling shall be supported as specified in clause 5.2.4 of 3GPP TS
29.500 [4].
#### 6.3.7.2 Protocol Errors
Protocol errors handling shall be supported as specified in clause 5.2.7 of
3GPP TS 29.500 [4].
#### 6.3.7.3 Application Errors
The common application errors defined in the Table 5.2.7.2-1 in 3GPP TS 29.500
[4] may also be used for the Nudm_UEContextManagement service. The application
errors defined for the Nhss_UEContextManagement service are listed in Table
6.3.7.3-1.
Table 6.3.7.3-1: Application errors
Application Error HTTP status code Description
* * *
USER_NOT_FOUND 404 Not Found The user does not exist. CONTEXT_NOT_FOUND 404
Not Found It is used when no corresponding UE context exists.
### 6.3.8 Feature Negotiation
The optional features in table 6.3.8-1 are defined for the
Nhss_UEContextManagement API. They shall be negotiated using the extensibility
mechanism defined in clause 6.6 of 3GPP TS 29.500 [4].
Table 6.3.8-1: Supported Features
Feature number Feature Name Description
* * *
## 6.4 Nhss_EventExposure Service API
### 6.4.1 API URI
URIs of this API shall have the following root:
{apiRoot}/\/\/
where \"apiRoot\" is defined in clause 4.4.1 of 3GPP TS 29.501 [5], the
\"apiName\" shall be set to \"nhss-ee\" and the \"apiVersion\" shall be set to
\"v1\" for the current version of this specification.
### 6.4.2 Usage of HTTP
#### 6.4.2.1 General
HTTP/2, as defined in IETF RFC 7540 [13], shall be used as specified in clause
5 of 3GPP TS 29.500 [4].
HTTP/2 shall be transported as specified in clause 5.3 of 3GPP TS 29.500 [4].
HTTP messages and bodies for the Nhss_EE service shall comply with the OpenAPI
[14] specification contained in Annex A5.
#### 6.4.2.2 HTTP standard headers
##### 6.4.2.2.1 General
The usage of HTTP standard headers shall be supported as specified in clause
5.2.2 of 3GPP TS 29.500 [4].
##### 6.4.2.2.2 Content type
The following content types shall be supported:
JSON, as defined in IETF RFC 8259 [15], signalled by the content type
\"application/json\".
The Problem Details JSON Object (IETF RFC 7807 [16] signalled by the content
type \"application/problem+json\"
JSON Patch (IETF RFC 6902 [41]). The use of the JSON Patch format in a HTTP
request body shall be signalled by the content type \"application/json-
patch+json\".
#### 6.4.2.3 HTTP custom headers
##### 6.4.2.3.1 General
The usage of HTTP custom headers shall be supported as specified in clause
5.2.3 of 3GPP TS 29.500 [4].
### 6.4.3 Resources
#### 6.4.3.1 Overview
Figure 6.4.3.1-1: Resource URI structure of the Nhss_EE API
Table 6.4.3.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 6.4.3.1-1: Resources and methods overview
* * *
Resource name\ Resource URI HTTP method or custom operation Description
(Archetype)
* * *
EeSubscriptions\ /{ueId}/ee-subscriptions POST Create a subscription
(Collection)
Individual subscription\ /{ueId}/ee-subscriptions/{subscriptionId} PATCH
Update the subscription identified by {subscriptionId} (Document)
                                                                         DELETE                            Delete the subscription identified by {subscriptionId}, i.e. unsubscribe
* * *
#### 6.4.3.2 Resource: EeSubscriptions (Collection)
##### 6.4.3.2.1 Description
This resource is used to represent subscriptions to notifications.
##### 6.4.3.2.2 Resource Definition
Resource URI: {apiRoot}/nhss-ee/\/{ueId}/ee-subscriptions
This resource shall support the resource URI variables defined in table
6.4.3.2.2-1.
Table 6.4.3.2.2-1: Resource URI variables for this resource
+---------+--------------------------------------------------------------+ | Name | Definition | +=========+==============================================================+ | apiRoot | See clause 6.4.1 | +---------+--------------------------------------------------------------+ | ueId | Represents the identity of the UE in the HSS (IMSI) | | | | | | pattern: See type Imsi in clause 6.4.6.3.2 of this document. | +---------+--------------------------------------------------------------+
##### 6.4.3.2.3 Resource Standard Methods
###### 6.4.3.2.3.1 POST
This method shall support the URI query parameters specified in table
6.4.3.2.3.1-1.
Table 6.4.3.2.3.1-1: URI query parameters supported by the POST method on this
resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
6.4.3.2.3.1-2 and the response data structures and response codes specified in
table 6.4.3.2.3.1-3.
Table 6.4.3.2.3.1-2: Data structures supported by the POST Request Body on
this resource
* * *
Data type P Cardinality Description EeSubscription M 1 The subscription that
is to be created
* * *
Table 6.4.3.2.3.1-3: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | CreatedE | M | 1 | 201 Created | Upon success, | | eSubscription | | | | a response | | | | | | body | | | | | | containing a | | | | | | r | | | | | | epresentation | | | | | | of the | | | | | | created | | | | | | Individual | | | | | | subscription | | | | | | resource | | | | | | shall be | | | | | | returned, | | | | | | along with | | | | | | event reports | | | | | | that might be | | | | | | immediately | | | | | | available at | | | | | | the HSS. | | | | | | | | | | | | The HTTP | | | | | | response | | | | | | shall include | | | | | | a | | | | | | \"Location\" | | | | | | HTTP header | | | | | | that contains | | | | | | the resource | | | | | | URI of the | | | | | | created | | | | | | resource. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if a | | | | | | request is | | | | | | redirected to | | | | | | the same | | | | | | target | | | | | | resource via | | | | | | a different | | | | | | SCP. In the | | | | | | former case, | | | | | | the URI shall | | | | | | be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same HSS | | | | | | (service) | | | | | | set. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if a | | | | | | request is | | | | | | redirected to | | | | | | the same | | | | | | target | | | | | | resource via | | | | | | a different | | | | | | SCP. In the | | | | | | former case, | | | | | | the URI shall | | | | | | be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same HSS | | | | | | (service) | | | | | | set. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 403 Forbidden | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | MONITORING\ | | | | | | _NOT_ALLOWED | | | | | | | | | | | | - | | | | | | MA | | | | | | XIMUM_RESOUR | | | | | | CES_EXCEEDED | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | USE | | | | | | R_NOT_FOUND | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 501 Not | The \"cause\" | | roblemDetails | | | Implemented | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | UNSUPPORTE | | | | | | D_MONITORING | | | | | | _EVENT_TYPE | | | | | | | | | | | | - | | | | | | U | | | | | | NSUPPORTED_M | | | | | | ONITORING_RE | | | | | | PORT_OPTIONS | | | | | | | | | | | | This response | | | | | | shall not be | | | | | | cached. | +---------------+---+-------------+---------------+---------------+
Table 6.4.3.2.3.1-4: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same HSS | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
Table 6.4.3.2.3.1-5: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same HSS | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
#### 6.4.3.3 Resource: Individual subscription (Document)
##### 6.4.3.3.1 Resource Definition
Resource URI: {apiRoot}/nhss-ee/\/{ueId}/ee-
subscriptions/{subscriptionId}
This resource shall support the resource URI variables defined in table
6.4.3.3.1-1.
Table 6.4.3.3.1-1: Resource URI variables for this resource
+----------------+----------------------------------------------------+ | Name | Definition | +================+====================================================+ | apiRoot | See clause 6.4.1 | +----------------+----------------------------------------------------+ | ueId | Represents the identity of the UE in the HSS | | | (IMSI) | | | | | | pattern: See type Imsi in clause 6.4.6.3.2 of this | | | document. | +----------------+----------------------------------------------------+ | subscriptionId | The subscriptionId identifies an individual | | | subscription to notifications | | | | | | The type is string. | +----------------+----------------------------------------------------+
##### 6.4.3.3.2 Resource Standard Methods
###### 6.4.3.3.2.1 DELETE
This method shall support the URI query parameters specified in table
6.4.3.3.2.1-1.
Table 6.4.3.3.1.1-1: URI query parameters supported by the DELETE method on
this resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
6.4.3.3.2.1-2 and the response data structures and response codes specified in
table 6.4.3.3.2.1-3.
Table 6.4.3.3.2.1-2: Data structures supported by the Delete Request Body on
this resource
* * *
Data type P Cardinality Description n/a The request body shall be empty.
* * *
Table 6.4.3.3.2.1-3: Data structures supported by the DELETE Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Upon success, | | | | | Content | an empty | | | | | | response body | | | | | | shall be | | | | | | returned. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if a | | | | | | request is | | | | | | redirected to | | | | | | the same | | | | | | target | | | | | | resource via | | | | | | a different | | | | | | SCP. In the | | | | | | former case, | | | | | | the URI shall | | | | | | be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same HSS | | | | | | (service) | | | | | | set. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if a | | | | | | request is | | | | | | redirected to | | | | | | the same | | | | | | target | | | | | | resource via | | | | | | a different | | | | | | SCP. In the | | | | | | former case, | | | | | | the URI shall | | | | | | be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same HSS | | | | | | (service) | | | | | | set. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | USE | | | | | | R_NOT_FOUND | | | | | | | | | | | | - | | | | | | SUBSCRIPTION | | | | | | _NOT_FOUND, | | | | | | see | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | tab | | | | | | le 5.2.7.2-1. | +---------------+---+-------------+---------------+---------------+
Table 6.4.3.3.2.1-4: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same HSS | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
Table 6.4.3.3.2.1-5: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same HSS | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
###### 6.4.3.3.2.2 PATCH
This method shall support the URI query parameters specified in table
6.4.3.3.2.2-1.
Table 6.4.3.3.2.2-1: URI query parameters supported by the PATCH method on
this resource
* * *
Name Data type P Cardinality Description supported-features SupportedFeatures
O 0..1 see 3GPP TS 29.500 [4] clause 6.6
* * *
This method shall support the request data structures specified in table
6.4.3.3.2.2-2 and the response data structures and response codes specified in
table 6.4.3.3.2.2-3.
Table 6.4.3.3.2.2-2: Data structures supported by the PATCH Request Body on
this resource
* * *
Data type P Cardinality Description array(PatchItem) M 1..N Items describe the
modifications to the Event Subscription
* * *
Table 6.4.3.3.2.2-3: Data structures supported by the PATCH Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Upon success, | | | | | Content | an empty | | | | | | response body | | | | | | shall be | | | | | | returned. | +---------------+---+-------------+---------------+---------------+ | PatchResult | M | 1 | 200 OK | Upon success, | | | | | | the execution | | | | | | report is | | | | | | returned. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if a | | | | | | request is | | | | | | redirected to | | | | | | the same | | | | | | target | | | | | | resource via | | | | | | a different | | | | | | SCP. In the | | | | | | former case, | | | | | | the URI shall | | | | | | be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same HSS | | | | | | (service) | | | | | | set. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if a | | | | | | request is | | | | | | redirected to | | | | | | the same | | | | | | target | | | | | | resource via | | | | | | a different | | | | | | SCP. In the | | | | | | former case, | | | | | | the URI shall | | | | | | be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same HSS | | | | | | (service) | | | | | | set. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | USE | | | | | | R_NOT_FOUND | | | | | | | | | | | | - | | | | | | SUBSCRIPTION | | | | | | _NOT_FOUND, | | | | | | see | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | tab | | | | | | le 5.2.7.2-1. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 403 Forbidden | One or more | | roblemDetails | | | | attributes | | | | | | are not | | | | | | allowed to be | | | | | | modified. | | | | | | | | | | | | The \"cause\" | | | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | M | | | | | | ODIFICATION_ | | | | | | NOT_ALLOWED, | | | | | | see | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | tab | | | | | | le 5.2.7.2-1. | +---------------+---+-------------+---------------+---------------+
Table 6.4.3.3.2.2-4: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same HSS | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
Table 6.4.3.3.2.2-5: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same HSS | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected. | +-----------------+-----------+---+-------------+-----------------+
### 6.4.4 Custom Operations without associated resources
In this release of this specification, no custom operations without associated
resources are defined for the Nhss_EventExposure Service.
### 6.4.5 Notifications
#### 6.4.5.1 General
This clause will specify the use of notifications and corresponding protocol
details if required for the specific service. When notifications are supported
by the API, it will include a reference to the general description of
notifications support over the 5G SBIs specified in TS 29.500 / TS 29.501.
#### 6.4.5.2 Event Occurrence Notification
The POST method shall be used for Event Occurrence Notifications and the URI
shall be as provided during the subscription procedure.
Resource URI: {callbackReference}
Support of URI query parameters is specified in table 6.4.5.2-1.
Table 6.4.5.2-1: URI query parameters supported by the POST method
* * *
Name Data type P Cardinality Description n/a
* * *
Support of request data structures is specified in table 6.4.5.2-2 and of
response data structures and response codes is specified in table 6.4.5.2-3.
Table 6.4.5.2-2: Data structures supported by the POST Request Body
* * *
Data type P Cardinality Description array(MonitoringReport) M 1..N A list of
MonitoringReports each of which contains information regarding the occurred
event
* * *
Table 6.4.5.2-3: Data structures supported by the POST Response Body
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | Upon success, | | | | | Content | an empty | | | | | | response body | | | | | | shall be | | | | | | returned. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI. The URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | notification | | | | | | endpoint of | | | | | | the | | | | | | subscribing | | | | | | NF Service | | | | | | Consumer. | | | | | | | | | | | | If an SCP | | | | | | redirects the | | | | | | message to | | | | | | another SCP | | | | | | then the | | | | | | location | | | | | | header field | | | | | | shall contain | | | | | | the same URI | | | | | | or a | | | | | | different URI | | | | | | pointing to | | | | | | the endpoint | | | | | | of the NF | | | | | | service | | | | | | consumer to | | | | | | which the | | | | | | notification | | | | | | should be | | | | | | sent. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI. The URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | notification | | | | | | endpoint of | | | | | | the | | | | | | subscribing | | | | | | NF Service | | | | | | Consumer. | | | | | | | | | | | | If an SCP | | | | | | redirects the | | | | | | message to | | | | | | another SCP | | | | | | then the | | | | | | location | | | | | | header field | | | | | | shall contain | | | | | | the same URI | | | | | | or a | | | | | | different URI | | | | | | pointing to | | | | | | the endpoint | | | | | | of the NF | | | | | | service | | | | | | consumer to | | | | | | which the | | | | | | notification | | | | | | should be | | | | | | sent. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | CONTEX | | | | | | T_NOT_FOUND | +---------------+---+-------------+---------------+---------------+ | NOTE: In | | | | | | addition, | | | | | | common data | | | | | | structures as | | | | | | listed in | | | | | | Ta | | | | | | ble 5.2.7.1-1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | are | | | | | | supported. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.4.5.2-4: Headers supported by the 307 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 A URI pointing to
the endpoint of the NF service consumer to which the notification should be
sent. 3gpp-Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF
(service) instance ID towards which the request is redirected.
* * *
Table 6.4.5.2-5: Headers supported by the 308 Response Code on this resource
* * *
Name Data type P Cardinality Description Location string M 1 A URI pointing to
the endpoint of the NF service consumer to which the notification should be
sent. 3gpp-Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF
(service) instance ID towards which the request is redirected.
* * *
### 6.4.6 Data Model
#### 6.4.6.1 General
This clause specifies the application data model supported by the API.
Table 6.4.6.1-1 specifies the data types defined for the Nhss_EE service API.
Table 6.4.6.1-1: Nhss_EE specific Data Types
Data type Clause defined Description
* * *
EeSubscription 6.4.6.2.2 A subscription to Notifications CreatedEeSubscription
6.4.6.2.3  
MonitoringConfiguration 6.4.6.2.4 Monitoring Configuration MonitoringReport
6.4.6.2.5 Monitoring Report Report 6.4.6.2.6  
ReportingOptions 6.4.6.2.7  
LocationReportingConfiguration 6.4.6.2.8  
ReachabilityForSmsReport 6.4.6.2.9  
LossConnectivityConfiguration 6.4.6.2.10  
ReachabilityForDataConfiguration 6.4.6.2.11  
PduSessionStatusCfg 6.4.6.2.12 Reporting configuration for events related to
PDN connectivity Status ReachabilityForDataReport 6.4.6.2.13 Report of
\"UE_REACHABILITY_FOR_DATA\" event EventType 6.4.6.3.3  
LocationAccuracy 6.4.6.3.4
Table 6.4.6.1-2 specifies data types re-used by the Nhss_EE service API from
other specifications, including a reference to their respective specifications
and when needed, a short description of their use within the Nhss_EE service
API.
Table 6.4.6.1-2: Nhss_EE re-used Data Types
Data type Reference Comments
* * *
Uri 3GPP TS 29.571 [7] Uniform Resource Identifier SupportedFeatures 3GPP TS
29.571 [7] See 3GPP TS 29.500 [4] clause 6.6 DateTime 3GPP TS 29.571 [7]  
PatchResult 3GPP TS 29.571 [7]  
DurationSec 3GPP TS 29.571 [7]  
DiameterIdentity 3GPP TS 29.571 [7]  
Dnn 3GPP TS 29.571 [7] Data Network Name with Network Identifier only.
ProblemDetails 3GPP TS 29.571 [7] Response body of error response messages.
RedirectResponse 3GPP TS 29.571 [7] Response body of redirect response
messages. LossConnectivityReport 3GPP TS 29.503 [13] Report of
\"LOSS_OF_CONNECTIVITY\" event LocationReport 3GPP TS 29.503 [13] Report of
\"LOCATION_REPORTING\" event PdnConnectivityStatReport 3GPP TS 29.503 [13]
Report of \"PDN_CONNECTIVITY_STATUS\" event
#### 6.4.6.2 Structured data types
##### 6.4.6.2.1 Introduction
This clause defines the data structures to be used in resource
representations.
##### 6.4.6.2.2 Type: EeSubscription
Table 6.4.6.2.2-1: Definition of type EeSubscription
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | call | Uri | M | 1 | URI provided | | backReference | | | | by the NF | | | | | | service | | | | | | consumer to | | | | | | receive | | | | | | notifications | +---------------+---------------+---+-------------+---------------+ | monitoringC | ma | O | 1..N | A map (list | | onfigurations | p(MonitoringC | | | of key-value | | | onfiguration) | | | pairs where | | | | | | referenceId | | | | | | converted | | | | | | from integer | | | | | | to string | | | | | | serves as | | | | | | key) of | | | | | | MonitoringC | | | | | | onfigurations | +---------------+---------------+---+-------------+---------------+ | scefId | Dia | O | 0..1 | Diameter | | | meterIdentity | | | Identify | | | | | | (FQDN) of the | | | | | | SCEF | +---------------+---------------+---+-------------+---------------+ | supp | Supp | O | 0..1 | See clause | | ortedFeatures | ortedFeatures | | | 6.4.8 | +---------------+---------------+---+-------------+---------------+ | rep | Rep | O | 0..1 | This IE may | | ortingOptions | ortingOptions | | | be included | | | | | | if the NF | | | | | | service | | | | | | consumer | | | | | | wants to | | | | | | describe how | | | | | | the reports | | | | | | of the event | | | | | | are to be | | | | | | generated. | | | | | | | | | | | | If this | | | | | | attribute is | | | | | | not present | | | | | | in the | | | | | | request, it | | | | | | means that | | | | | | the NF | | | | | | service | | | | | | consumer does | | | | | | not specify | | | | | | any maximum | | | | | | number of | | | | | | reports or | | | | | | any expiry | | | | | | time for the | | | | | | subscription; | | | | | | still, the NF | | | | | | service | | | | | | producer | | | | | | (HSS) may set | | | | | | an expiry | | | | | | time in the | | | | | | response to | | | | | | the | | | | | | subscription | | | | | | creation (see | | | | | | claus | | | | | | e 6.4.6.2.7). | +---------------+---------------+---+-------------+---------------+
##### 6.4.6.2.3 Type: CreatedEeSubscription
Table 6.4.6.2.3-1: Definition of type CreatedEeSubscription
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | eeSub | EeSub | M | 1 | This IE | | | scription | scription | | | shall | | | | | | | contain | | | | | | | the | | | | | | | repre | | | | | | | sentation | | | | | | | of the | | | | | | | created | | | | | | | event | | | | | | | subs | | | | | | | cription. | | +-----------+-----------+---+-----------+-----------+-----------+ | eve | array | O | 1..N | This IE | ERIR | | ntReports | (Monitori | | | may be | | | | ngReport) | | | included | | | | | | | when the | | | | | | | NF | | | | | | | consumer | | | | | | | has | | | | | | | indicated | | | | | | | s | | | | | | | upporting | | | | | | | of ERIR | | | | | | | feature | | | | | | | in the | | | | | | | sub | | | | | | | scription | | | | | | | creation | | | | | | | request | | | | | | | (see | | | | | | | claus | | | | | | | e 6.4.8). | | | | | | | | | | | | | | This IE | | | | | | | when | | | | | | | present, | | | | | | | shall | | | | | | | contain | | | | | | | the | | | | | | | status of | | | | | | | events | | | | | | | that are | | | | | | | requested | | | | | | | for | | | | | | | immediate | | | | | | | reporting | | | | | | | as well, | | | | | | | if those | | | | | | | events | | | | | | | are | | | | | | | available | | | | | | | at the | | | | | | | time of | | | | | | | subs | | | | | | | cription. | | +-----------+-----------+---+-----------+-----------+-----------+ | supporte | Supporte | O | 0..1 | See | | | dFeatures | dFeatures | | | clause | | | | | | | 6.4.8 | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.4.6.2.4 Type: MonitoringConfiguration
Table 6.4.6.2.4-1: Definition of type MonitoringConfiguration
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | eventType | EventType | M | 1 | Event type | +---------------+---------------+---+-------------+---------------+ | immediateFlag | boolean | O | 0..1 | Indicates if | | | | | | an immediate | | | | | | event report | | | | | | in the | | | | | | subscription | | | | | | response | | | | | | indicating | | | | | | current value | | | | | | / status of | | | | | | the event is | | | | | | required, if | | | | | | available. If | | | | | | the flag is | | | | | | not present, | | | | | | then | | | | | | immediate | | | | | | reporting may | | | | | | be skipped. | +---------------+---------------+---+-------------+---------------+ | loca | Loca | C | 0..1 | Shall be | | tionReporting | tionReporting | | | present if | | Configuration | Configuration | | | eventType is | | | | | | \"LOCATION | | | | | | _REPORTING\" | +---------------+---------------+---+-------------+---------------+ | los | Los | O | 0..1 | May be | | sConnectivity | sConnectivity | | | present if | | Configuration | Configuration | | | eventType is | | | | | | \ | | | | | | "LOSS_OF_CO | | | | | | NNECTIVITY\". | +---------------+---------------+---+-------------+---------------+ | reacha | Reacha | O | 0..1 | May be | | bilityForData | bilityForData | | | present if | | Configuration | Configuration | | | eventType is | | | | | | \"UE\ | | | | | | _REACHABILITY | | | | | | _FOR_DATA\" | +---------------+---------------+---+-------------+---------------+ | pduSes | PduSes | O | 0..1 | may be | | sionStatusCfg | sionStatusCfg | | | present if | | | | | | eventType is | | | | | | \"P | | | | | | DN_CONNECTIV | | | | | | ITY_STATUS\" | +---------------+---------------+---+-------------+---------------+ | idleStatusInd | boolean | O | 0..1 | Idle Status | | | | | | Indication | | | | | | request. | | | | | | | | | | | | May be | | | | | | present if | | | | | | eventType is | | | | | | \"UE\ | | | | | | _REACHABILITY | | | | | | _FOR_DATA\" | | | | | | or | | | | | | \"AVAILABIL | | | | | | ITY_AFTER_D | | | | | | DN_FAILURE\" | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | be set as | | | | | | following: | | | | | | | | | | | | - true: Idle | | | | | | status | | | | | | indication is | | | | | | requested | | | | | | | | | | | | - false | | | | | | (default): | | | | | | Idle status | | | | | | indication is | | | | | | not requested | +---------------+---------------+---+-------------+---------------+
##### 6.4.6.2.5 Type: MonitoringReport
Table 6.4.6.2.5-1: Definition of type MonitoringReport
+---------------+-------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+=============+===+=============+===============+ | referenceId | ReferenceId | M | 1 | Shall contain | | | | | | the Reference | | | | | | ID which was | | | | | | provided as | | | | | | the key of | | | | | | the | | | | | | associated | | | | | | monitoring | | | | | | configuration | | | | | | in | | | | | | subscription | | | | | | request. The | | | | | | consumer can | | | | | | use this IE | | | | | | to uniquely | | | | | | associate the | | | | | | report with | | | | | | the | | | | | | corresponding | | | | | | event that | | | | | | was requested | | | | | | to be | | | | | | monitored. | +---------------+-------------+---+-------------+---------------+ | eventType | EventType | M | 1 | String; see | | | | | | clause | | | | | | 6.4.6.3.3 | | | | | | | | | | | | only the | | | | | | following | | | | | | values are | | | | | | allowed: | | | | | | | | | | | | \"UE | | | | | | _REACHABILIT | | | | | | Y_FOR_SMS\" | | | | | | | | | | | | \"UE\ | | | | | | _REACHABILITY | | | | | | _FOR_DATA\" | | | | | | | | | | | | \"LOSS_OF_C | | | | | | ONNECTIVITY\" | | | | | | | | | | | | \"LOCATION | | | | | | _REPORTING\" | | | | | | | | | | | | \"P | | | | | | DN_CONNECTIV | | | | | | ITY_STATUS\" | +---------------+-------------+---+-------------+---------------+ | timeStamp | DateTime | M | 1 | Point in time | | | | | | at which the | | | | | | event occured | +---------------+-------------+---+-------------+---------------+ | report | Report | O | 0..1 | Shall be | | | | | | present if | | | | | | eventType is | | | | | | \"UE | | | | | | _REACHABILIT | | | | | | Y_FOR_SMS\" | | | | | | | | | | | | \"UE\ | | | | | | _REACHABILITY | | | | | | _FOR_DATA\" | | | | | | | | | | | | \"LOSS_OF_C | | | | | | ONNECTIVITY\" | | | | | | | | | | | | \"LOCATION | | | | | | _REPORTING\" | | | | | | | | | | | | \"P | | | | | | DN_CONNECTIV | | | | | | ITY_STATUS\" | +---------------+-------------+---+-------------+---------------+
##### 6.4.6.2.6 Type: Report
Table 6.4.6.2.6-1: Definition of type Report
Attribute name Data type P Cardinality Description
* * *
reachabilityForSmsReport ReachabilityForSmsReport O 0..1 Reports the UE
reachacbility for SMS reachabilityForDataReport ReachabilityForDataReport O
0..1 Reports the UE reachacbility for Data lossConnectivityReport
LossConnectivityReport O 0..1 Reports the Loss of Connectivity locationReport
LocationReport O 0..1 Reports the UE Location pdnConnectivityStatReport
PdnConnectivityStatReport O 0..1 Reports the PDN Connectivity Status
##### 6.4.6.2.7 Type: ReportingOptions
Table 6.4.6.2.7-1: Definition of type ReportingOptions
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | ma | Ma | O | 0..1 | Maximum | | xNumOfReports | xNumOfReports | | | number of | | | | | | reports. If | | | | | | not present, | | | | | | the NF | | | | | | service | | | | | | consumer does | | | | | | not specify | | | | | | any maximum | | | | | | number of | | | | | | reports to be | | | | | | received. | | | | | | | | | | | | (NOTE) | +---------------+---------------+---+-------------+---------------+ | expiry | DateTime | C | 0..1 | This IE shall | | | | | | be included | | | | | | in an event | | | | | | subscription | | | | | | response, if, | | | | | | based on | | | | | | operator | | | | | | policy, the | | | | | | HSS needs to | | | | | | include an | | | | | | expiry time, | | | | | | and may be | | | | | | included in | | | | | | an event | | | | | | subscription | | | | | | request. When | | | | | | present, this | | | | | | IE shall | | | | | | represent the | | | | | | time at which | | | | | | monitoring | | | | | | shall cease | | | | | | and the | | | | | | subscription | | | | | | becomes | | | | | | invalid. If | | | | | | the | | | | | | ma | | | | | | xNumOfReports | | | | | | included in | | | | | | an event | | | | | | subscription | | | | | | response is 1 | | | | | | and if an | | | | | | event report | | | | | | is included | | | | | | in the | | | | | | subscription | | | | | | response then | | | | | | the value of | | | | | | the expiry | | | | | | included in | | | | | | the response | | | | | | shall be an | | | | | | immediate | | | | | | timestamp. | | | | | | | | | | | | (NOTE) | +---------------+---------------+---+-------------+---------------+ | reportPeriod | DurationSec | C | 0..1 | Indicates the | | | | | | interval time | | | | | | between which | | | | | | the event | | | | | | notification | | | | | | is reported, | | | | | | may be | | | | | | present if | | | | | | event type is | | | | | | \"LOCATION | | | | | | _REPORTING\" | +---------------+---------------+---+-------------+---------------+ | NOTE: If | | | | | | parameter | | | | | | \"maxN | | | | | | umOfReports\" | | | | | | and | | | | | | \"expiry\" | | | | | | are included | | | | | | at the same | | | | | | time, the | | | | | | subscription | | | | | | will expire | | | | | | as soon as | | | | | | one of the | | | | | | conditions is | | | | | | met. | | | | | +---------------+---------------+---+-------------+---------------+
##### 6.4.6.2.8 Type: LocationReportingConfiguration
Table 6.4.6.2.8-1: Definition of type LocationReportingConfiguration
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | cu | boolean | M | 1 | true: | | rrentLocation | | | | Indicates | | | | | | that current | | | | | | location is | | | | | | requested. | | | | | | | | | | | | false: | | | | | | Indicates | | | | | | that last | | | | | | known | | | | | | location is | | | | | | requested. | +---------------+---------------+---+-------------+---------------+ | accuracy | Loc | C | 0..1 | Indicates | | | ationAccuracy | | | whether | | | | | | Cell-level or | | | | | | TA-level | | | | | | accuracy is | | | | | | requested. | | | | | | Shall be | | | | | | present when | | | | | | current | | | | | | location is | | | | | | requested. | +---------------+---------------+---+-------------+---------------+
##### 6.4.6.2.9 Type: ReachabilityForSmsReport
Table 6.4.6.2.9-1: Definition of type ReachabilityForSmsReport
+-----------------+-----------+---+-------------+-----------------+ | Attribute name | Data type | P | Cardinality | Description | +=================+===========+===+=============+=================+ | reacha | boolean | M | 1 | true: UE is | | bilitySmsStatus | | | | reachable for | | | | | | SMS | | | | | | | | | | | | false: UE is | | | | | | not reachable | | | | | | for SMS | +-----------------+-----------+---+-------------+-----------------+ | maxA | DateTime | O | 0..1 | Indicates the | | vailabilityTime | | | | time (in UTC) | | | | | | until which the | | | | | | UE is expected | | | | | | to be | | | | | | reachable. | | | | | | | | | | | | This | | | | | | information may | | | | | | be used by the | | | | | | SMS Service | | | | | | Center to | | | | | | prioritize the | | | | | | retransmission | | | | | | of pending | | | | | | Mobile | | | | | | Terminated | | | | | | Short Message | | | | | | to UEs using a | | | | | | power saving | | | | | | mechanism | | | | | | (eDRX, PSM | | | | | | etc.). | +-----------------+-----------+---+-------------+-----------------+
##### 6.4.6.2.10 Type: LossConnectivityConfiguration
Table 6.4.6.2.10-1: Definition of type LossConnectivityConfiguration
Attribute name Data type P Cardinality Description
* * *
maxDetectionTime DurationSec O 0..1 When present, it indicates the configured
Maximum Detection Time
##### 6.4.6.2.11 Type: ReachabilityForDataConfiguration
Table 6.4.6.2.11-1: Definition of type ReachabilityForDataConfiguration
Attribute name Data type P Cardinality Description
* * *
maximumLatency DurationSec O 0..1 When present, it indicates the configured
Maximum Latency. (NOTE) maximumResponseTime DurationSec O 0..1 When present,
it indicates the configured Maximum Response Time. (NOTE) suggestedPacketNumDl
integer O 0..1 When present, it indicates the configured Suggested number of
downlink packets. (NOTE) NOTE: At least one of maximumLatency,
maximumResponseTime or suggestedPacketNumDl shall be present
##### 6.4.6.2.12 Type: PduSessionStatusCfg
Table 6.4.6.2.12-1: Definition of type PduSessionStatusCfg
Attribute name Data type P Cardinality Description
* * *
apn Dnn O 0..1 When present, it indicates the APN for which the event is
monitored.
##### 6.4.6.2.13 Type: ReachabilityForDataReport
Table 6.4.6.2.13-1: Definition of type ReachabilityForDataReport
+-----------------+-----------+---+-------------+-----------------+ | Attribute name | Data type | P | Cardinality | Description | +=================+===========+===+=============+=================+ | reachab | boolean | M | 1 | true: UE is | | ilityDataStatus | | | | reachable for | | | | | | Data | | | | | | | | | | | | false: UE is | | | | | | not reachable | | | | | | for Data | +-----------------+-----------+---+-------------+-----------------+ | maxA | DateTime | O | 0..1 | Indicates the | | vailabilityTime | | | | time (in UTC) | | | | | | until which the | | | | | | UE is expected | | | | | | to be | | | | | | reachable. | | | | | | | | | | | | This | | | | | | information may | | | | | | be used by the | | | | | | SMS Service | | | | | | Center to | | | | | | prioritize the | | | | | | retransmission | | | | | | of pending | | | | | | Mobile | | | | | | Terminated | | | | | | Short Message | | | | | | to UEs using a | | | | | | power saving | | | | | | mechanism | | | | | | (eDRX, PSM | | | | | | etc.). | +-----------------+-----------+---+-------------+-----------------+
#### 6.4.6.3 Simple data types and enumerations
##### 6.4.6.3.1 Introduction
This clause defines simple data types and enumerations that can be referenced
from data structures defined in the previous clauses.
##### 6.4.6.3.2 Simple data types
The simple data types defined in table 6.4.6.3.2-1 shall be supported.
Table 6.4.6.3.2-1: Simple data types
+-----------------+-----------------+--------------------------------+ | Type Name | Type Definition | Description | +-----------------+-----------------+--------------------------------+ | ReferenceId | integer | ReferenceId is used as key in | | | | a map of | | | | MonitoringConfigurations; see | | | | clause 6.4.6.2.4. | | | | | | | | The numeric value should not | | | | be higher than 2\^64-1 (i.e. | | | | it should be possible to | | | | convey it in an unsigned 64 | | | | integer Information Element, | | | | used in other protocols), if | | | | interworking with the Event | | | | Exposure framework in EPC is | | | | required. | +-----------------+-----------------+--------------------------------+ | Imsi | string | IMSI | | | | | | | | pattern: | | | | \'\^(imsi-[0-9]{5,15})\$\' | +-----------------+-----------------+--------------------------------+ | MaxNumOfReports | integer | Maximum number of reports. | | | | | | | | Minimum: 1 | +-----------------+-----------------+--------------------------------+
##### 6.4.6.3.3 Enumeration: EventType
Table 6.4.6.3.3-1: Enumeration EventType
+----------------------------------+----------------------------------+ | Enumeration value | Description | +==================================+==================================+ | \"LOSS_OF_CONNECTIVITY\" | Loss of connectivity | +----------------------------------+----------------------------------+ | \"UE_REACHABILITY_FOR_DATA\" | UE reachability for Data, | | | implements the \"UE Reachability | | | for Data\" event as specified in | | | 3GPP TS 23.682 [18]. | | | | | | When this event is subscribed by | | | an NF service consumer, the HSS | | | shall send an Insert Subscriber | | | Data Request message to the | | | MME/SGSN for the UE with the | | | Monitoring-Type AVP set to the | | | value UE_REACHABILITY and the | | | Reachability-Information AVP set | | | to the value | | | REACHABLE_FOR_DATA, see | | | clause 5.2.2.1.3 of | | | 3GPP TS 29.272 [17]. | +----------------------------------+----------------------------------+ | \"UE_REACHABILITY_FOR_SMS\" | UE reachability for SMS, | | | implements the \"UE Reachability | | | for SMS Delivery\" event as | | | specified in 3GPP TS 23.682 | | | [18]. | | | | | | This event only supports | | | One-Time reporting. | +----------------------------------+----------------------------------+ | \"LOCATION_REPORTING\" | Location Reporting | +----------------------------------+----------------------------------+ | \"COMMUNICATION_FAILURE\" | Communication Failure | +----------------------------------+----------------------------------+ | \"AVA | Availability after DDN failure | | ILABILITY_AFTER_DDN_FAILURE\" | | +----------------------------------+----------------------------------+ | \"PDN_CONNECTIVITY_STATUS\" | PDN_CONNECTIVITY_STATUS | +----------------------------------+----------------------------------+
##### 6.4.6.3.4 Enumeration: LocationAccuracy
Table 6.4.6.3.4-1: Enumeration LocationAccuracy
Enumeration value Description
* * *
\"CELL_LEVEL\" Change of cell shall be reported \"TA_LEVEL\" Change of TA
shall be reported
### 6.4.7 Error Handling
#### 6.4.7.1 General
HTTP error handling shall be supported as specified in clause 5.2.4 of 3GPP TS
29.500 [4].
#### 6.4.7.2 Protocol Errors
Protocol errors handling shall be supported as specified in clause 5.2.7 of
3GPP TS 29.500 [4].
#### 6.4.7.3 Application Errors
The common application errors defined in the Table 5.2.7.2-1 in 3GPP TS 29.500
[4] may also be used for the Nhss_EventExposure service. The following
application errors listed in Table 6.4.7.3-1 are specific for the
Nhss_EventExposure service.
Table 6.4.7.3-1: Application errors
Application Error HTTP status code Description
* * *
MONITORING_NOT_ALLOWED 403 Forbidden The subscriber does not have the
necessary subscription for monitoring with the requested Event Type.
USER_NOT_FOUND 404 Not Found The user does not exist CONTEXT_NOT_FOUND 404 Not
Found It is used when no corresponding context exists.
UNSUPPORTED_MONITORING_EVENT_TYPE 501 Not Implemented The monitoring
configuration contains unsupported event type.
UNSUPPORTED_MONITORING_REPORT_OPTIONS 501 Not Implemented The monitoring
configuration contains unsupported report options.
### 6.4.8 Feature Negotiation
The optional features in table 6.4.8-1 are defined for the Nhss_EE API. They
shall be negotiated using the extensibility mechanism defined in clause 6.6 of
3GPP TS 29.500 [4].
Table 6.4.8-1: Supported Features
+----------------+--------------+------------------------------------+ | Feature number | Feature Name | Description | +================+==============+====================================+ | 1 | ERIR | Event Reports in Response | | | | | | | | An NF consumer supporting this | | | | feature shall be able to handle | | | | the event reports within the Event | | | | Subscrpition Create Repsonse, as | | | | specified in clause 5.5.2.2.2. | +----------------+--------------+------------------------------------+
### 6.4.9 Security
As indicated in 3GPP TS 33.501 [6] and 3GPP TS 29.500 [4], the access to the
Nhss_EE API may be authorized by means of the OAuth2 protocol (see IETF RFC
6749 [18]), based on local configuration, using the \"Client Credentials\"
authorization grant, where the NRF (see 3GPP TS 29.510 [19]) plays the role of
the authorization server.
If OAuth2 is used, an NF Service Consumer, prior to consuming services offered
by the Nhss_EE API, shall obtain a \"token\" from the authorization server, by
invoking the Access Token Request service, as described in 3GPP TS 29.510
[19], clause 5.4.2.2.
NOTE: When multiple NRFs are deployed in a network, the NRF used as
authorization server is the same NRF that the NF Service Consumer used for
discovering the Nhss_EE service.
The Nhss_EE API defines a single scope \"nhss-ee\" for OAuth2 authorization
(as specified in 3GPP TS 33.501 [6]) for the entire API, and it does not
define any additional scopes at resource or operation level.
###### ## Annex A (normative): OpenAPI specification
## A.1 General
This Annex specifies the formal definition of the Nhss Service API(s). It
consists of OpenAPI 3.0.0 specifications in YAML format.
This Annex takes precedence when being discrepant to other parts of the
specification with respect to the encoding of information elements and methods
within the API(s).
NOTE: The semantics and procedures, as well as conditions, e.g. for the
applicability and allowed combinations of attributes or values, not expressed
in the OpenAPI definitions but defined in other parts of the specification
also apply.
Informative copies of the OpenAPI specification files contained in this 3GPP
Technical Specification are available on a Git-based repository, that uses the
GitLab software version control system (see 3GPP TS 29.501 [5] clause 5.3.1
and 3GPP TR 21.900 [14] clause 5B).
## A.2 Nhss_UEAuthentication API
openapi: 3.0.0
info:
version: \'1.0.1\'
title: \'NhssUEAU\'
description: \|
HSS UE Authentication Service.
Â© 2021, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
externalDocs:
description: 3GPP TS 29.563 HSS Services for Interworking With UDM, version
16.5.0
url: \'http://www.3gpp.org/ftp/Specs/archive/29_series/29.563/\'
servers:
\- url: \'{apiRoot}/nhss-ueau/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 4.4 of 3GPP TS 29.501.
security:
\- oAuth2ClientCredentials:
\- nhss-ueau
\- {}
paths:
/generate-av:
post:
summary: Generate authentication vector for the UE
operationId: GenerateAV
tags:
\- Generate Auth Vector
requestBody:
content:
application/json:
schema:
\$ref: \'#/components/schemas/AvGenerationRequest\'
required: true
responses:
\'200\':
description: Expected response to a valid request
content:
application/json:
schema:
\$ref: \'#/components/schemas/AvGenerationResponse\'
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'501\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/501\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
description: Unexpected error
components:
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{nrfApiRoot}/oauth2/token\'
scopes:
nhss-ueau: Access to the nhss-ueau API
schemas:
# COMPLEX TYPES:
AvGenerationRequest:
type: object
required:
\- imsi
\- authType
\- servingNetworkName
properties:
imsi:
type: string
pattern: \'\^[0-9]{5,15}\$\'
authType:
\$ref: \'TS29503_Nudm_UEAU.yaml#/components/schemas/AuthType\'
servingNetworkName:
\$ref: \'TS29503_Nudm_UEAU.yaml#/components/schemas/ServingNetworkName\'
resynchronizationInfo:
\$ref: \'TS29503_Nudm_UEAU.yaml#/components/schemas/ResynchronizationInfo\'
AvGenerationResponse:
type: object
oneOf:
\- required:
\- avEapAkaPrime
\- required:
\- av5GHeAka
properties:
avEapAkaPrime:
\$ref: \'TS29503_Nudm_UEAU.yaml#/components/schemas/AvEapAkaPrime\'
av5GHeAka:
\$ref: \'TS29503_Nudm_UEAU.yaml#/components/schemas/Av5GHeAka\'
# SIMPLE TYPES:
# ENUMS:
## A.3 Nhss_SubscriberDataManagement API
openapi: 3.0.0
info:
version: \'1.0.2\'
title: \'Nhss_SDM\'
description: \|
HSS Subscriber Data Management.
Â© 2021, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
externalDocs:
description: 3GPP TS 29.563 HSS Services for Interworking With UDM, version
16.5.0
url: \'http://www.3gpp.org/ftp/Specs/archive/29_series/29.563/\'
servers:
\- url: \'{apiRoot}/nhss-sdm/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 4.4 of 3GPP TS 29.501.
security:
\- oAuth2ClientCredentials:
\- nhss-sdm
\- {}
paths:
/{ueId}/ue-context-in-pgw-data:
get:
summary: Retrieve the UE Context In PGW
operationId: GetUeCtxInPgwData
tags:
\- UE Context In PGW Data Retrieval
parameters:
\- name: ueId
in: path
description: Identifier of the UE
required: true
schema:
type: string
pattern: \'\^(imsi-[0-9]{5,15})\$\'
responses:
\'200\':
description: Expected response to a valid request
content:
application/json:
schema:
\$ref: \'#/components/schemas/UeContextInPgwData\'
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
description: Unexpected error
/{ueId}/subscriptions:
post:
summary: subscribe to notifications
operationId: Subscribe
tags:
\- Subscription Creation
parameters:
\- name: ueId
in: path
description: IMSI of the user
required: true
schema:
type: string
pattern: \'\^(imsi-[0-9]{5,15})\$\'
requestBody:
content:
application/json:
schema:
\$ref: \'#/components/schemas/SubscriptionData\'
required: true
responses:
\'201\':
description: Expected response to a valid request
content:
application/json:
schema:
\$ref: \'#/components/schemas/SubscriptionData\'
headers:
Location:
description: \'Contains the URI of the newly created resource, according to
the structure: {apiRoot}/nhss-
sdm/\/{ueId}/subscriptions/{subscriptionId}\'
required: true
schema:
type: string
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'501\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/501\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
description: Unexpected error
callbacks:
datachangeNotification:
\'{request.body#/callbackReference}\':
post:
requestBody:
required: true
content:
application/json:
schema:
\$ref: \'TS29503_Nudm_SDM.yaml#/components/schemas/ModificationNotification\'
responses:
\'204\':
description: Successful Notification response
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
description: Unexpected error
/{ueId}/subscriptions/{subscriptionId}:
delete:
summary: unsubscribe from notifications
operationId: Unsubscribe
tags:
\- Subscription Deletion
parameters:
\- name: ueId
in: path
description: IMSI of the user
required: true
schema:
type: string
pattern: \'\^(imsi-[0-9]{5,15})\$\'
\- name: subscriptionId
in: path
description: Id of the Subscription
required: true
schema:
type: string
responses:
\'204\':
description: Successful response
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
description: Unexpected error
patch:
summary: modify the subscription
operationId: Modify
tags:
\- Subscription Modification
parameters:
\- name: ueId
in: path
description: IMSI of the user
required: true
schema:
type: string
pattern: \'\^(imsi-[0-9]{5,15})\$\'
\- name: subscriptionId
in: path
description: Id of the Subscription
required: true
schema:
type: string
requestBody:
content:
application/json-patch+json:
schema:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PatchItem\'
minItems: 1
required: true
responses:
\'204\':
description: Successful modification
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
description: Unexpected error
components:
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{nrfApiRoot}/oauth2/token\'
scopes:
nhss-sdm: Access to the nhss-sdm API
schemas:
# COMPLEX TYPES:
UeContextInPgwData:
type: object
properties:
pgwInfo:
type: array
items:
\$ref: \'TS29503_Nudm_SDM.yaml#/components/schemas/PgwInfo\'
minItems: 1
emergencyFqdn:
type: string
SubscriptionData:
type: object
required:
\- nfInstanceId
\- callbackReference
\- monitoredResourceUris
properties:
nfInstanceId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NfInstanceId\'
callbackReference:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
monitoredResourceUris:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
minItems: 1
expires:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
immediateReport:
type: boolean
default: false
report:
\$ref: \'#/components/schemas/SubscriptionDataSets\'
SubscriptionDataSets:
type: object
properties:
ueContextInPgwData:
\$ref: \'#/components/schemas/UeContextInPgwData\'
# SIMPLE TYPES:
# ENUMS:
## A.4 Nhss_UEContextManagement API
openapi: 3.0.0
info:
version: \'1.0.2\'
title: \'Nhss_UECM\'
description: \|
HSS UE Context Management
Â© 2021, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
externalDocs:
description: 3GPP TS 29.563 HSS Services for Interworking With UDM, version
16.5.0
url: \'http://www.3gpp.org/ftp/Specs/archive/29_series/29.563/\'
servers:
\- url: \'{apiRoot}/nhss-uecm/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 4.4 of 3GPP TS 29.501.
security:
\- oAuth2ClientCredentials:
\- nhss-uecm
\- {}
paths:
/deregister-sn:
post:
summary: MME/SGSN Deregistration
operationId: DeregisterSN
tags:
\- MME/SGSN Deregistration
requestBody:
content:
application/json:
schema:
\$ref: \'#/components/schemas/DeregistrationRequest\'
required: true
responses:
\'204\':
description: No content
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'501\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/501\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
description: Unexpected error
/imei-update:
post:
summary: IMEI Update
operationId: IMEIUpdate
tags:
\- IMEI Update
requestBody:
content:
application/json:
schema:
\$ref: \'#/components/schemas/ImeiUpdateInfo\'
required: true
responses:
\'204\':
description: No content
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'501\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/501\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
description: Unexpected error
components:
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{nrfApiRoot}/oauth2/token\'
scopes:
nhss-uecm: Access to the nhss-uecm API
schemas:
# COMPLEX TYPES:
DeregistrationRequest:
type: object
required:
\- imsi
\- deregReason
properties:
imsi:
type: string
pattern: \'\^[0-9]{5,15}\$\'
deregReason:
\$ref: \'#/components/schemas/DeregistrationReason\'
guami:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Guami\'
ImeiUpdateInfo:
type: object
required:
\- imsi
oneOf:
\- required: [ imei ]
\- required: [ imeisv ]
properties:
imsi:
type: string
pattern: \'\^[0-9]{5,15}\$\'
imei:
type: string
pattern: \'\^[0-9]{14,15}\$\'
imeisv:
type: string
pattern: \'\^[0-9]{16}\$\'
# SIMPLE TYPES:
# ENUMS:
DeregistrationReason:
anyOf:
\- type: string
enum:
\- UE_INITIAL_AND_SINGLE_REGISTRATION
\- UE_INITIAL_AND_DUAL_REGISTRATION
\- EPS_TO_5GS_MOBILITY
\- type: string
## A.5 Nhss_EE API
openapi: 3.0.0
info:
version: \'1.0.5\'
title: \'Nhss_EE\'
description: \|
HSS Event Exposure.
Â© 2022, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
externalDocs:
description: 3GPP TS 29.563 HSS Services for Interworking With UDM, version
16.7.0
url: \'https://www.3gpp.org/ftp/Specs/archive/29_series/29.563/\'
servers:
\- url: \'{apiRoot}/nhss-ee/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 4.4 of 3GPP TS 29.501.
security:
\- {}
\- oAuth2ClientCredentials:
\- nhss-ee
paths:
/{ueId}/ee-subscriptions:
post:
summary: Subscribe
operationId: CreateEeSubscription
tags:
\- EE Subscription (Collection)
parameters:
\- name: ueId
in: path
description: IMSI of the subscriber
required: true
schema:
\$ref: \'#/components/schemas/Imsi\'
requestBody:
content:
application/json:
schema:
\$ref: \'#/components/schemas/EeSubscription\'
required: true
responses:
\'201\':
description: Expected response to a valid request
content:
application/json:
schema:
\$ref: \'#/components/schemas/CreatedEeSubscription\'
headers:
Location:
description: \'Contains the URI of the newly created resource, according to
the structure: {apiRoot}/nhss-ee/v1/{ueId}/ee-subscriptions/{subscriptionId}\'
required: true
schema:
type: string
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'501\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/501\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
description: Unexpected error
callbacks:
eventOccurrenceNotification:
\'{request.body#/callbackReference}\':
post:
requestBody:
required: true
content:
application/json:
schema:
type: array
items:
\$ref: \'#/components/schemas/MonitoringReport\'
minItems: 1
responses:
\'204\':
description: Successful Notification response
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
description: Unexpected error
/{ueId}/ee-subscriptions/{subscriptionId}:
delete:
summary: Unsubscribe
operationId: DeleteEeSubscription
tags:
\- Delete EE Subscription
parameters:
\- name: ueId
in: path
description: IMSI of the subscriber
required: true
schema:
\$ref: \'#/components/schemas/Imsi\'
\- name: subscriptionId
in: path
description: Id of the EE Subscription
required: true
schema:
type: string
responses:
\'204\':
description: Successful response
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
description: Unexpected error
patch:
summary: Patch
operationId: UpdateEeSubscription
tags:
\- Update EE Subscription
parameters:
\- name: ueId
in: path
description: IMSI of the subscriber
required: true
schema:
\$ref: \'#/components/schemas/Imsi\'
\- name: subscriptionId
in: path
description: Id of the EE Subscription
required: true
schema:
type: string
requestBody:
content:
application/json-patch+json:
schema:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PatchItem\'
minItems: 1
required: true
responses:
\'200\':
description: Expected response to a valid request
content:
application/json:
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PatchResult\'
\'204\':
description: Successful response
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
default:
description: Unexpected error
components:
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{nrfApiRoot}/oauth2/token\'
scopes:
nhss-ee: Access to the nhss-ee API
schemas:
# COMPLEX TYPES:
EeSubscription:
type: object
required:
\- callbackReference
properties:
callbackReference:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
scefId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DiameterIdentity\'
monitoringConfigurations:
description: A map (list of key-value pairs where ReferenceId serves as key)
of MonitoringConfigurations
type: object
additionalProperties:
\$ref: \'#/components/schemas/MonitoringConfiguration\'
minProperties: 1
supportedFeatures:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
reportingOptions:
\$ref: \'#/components/schemas/ReportingOptions\'
CreatedEeSubscription:
type: object
required:
\- eeSubscription
properties:
eeSubscription:
\$ref: \'#/components/schemas/EeSubscription\'
eventReports:
type: array
items:
\$ref: \'#/components/schemas/MonitoringReport\'
minItems: 1
supportedFeatures:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
MonitoringConfiguration:
type: object
required:
\- eventType
properties:
eventType:
\$ref: \'#/components/schemas/EventType\'
immediateFlag:
type: boolean
locationReportingConfiguration:
\$ref: \'#/components/schemas/LocationReportingConfiguration\'
lossConnectivityConfiguration:
\$ref: \'#/components/schemas/LossConnectivityConfiguration\'
reachabilityForDataConfiguration:
\$ref: \'#/components/schemas/ReachabilityForDataConfiguration\'
pduSessionStatusCfg:
\$ref: \'#/components/schemas/PduSessionStatusCfg\'
idleStatusInd:
type: boolean
default: false
MonitoringReport:
type: object
required:
\- referenceId
\- eventType
\- timeStamp
properties:
referenceId:
\$ref: \'#/components/schemas/ReferenceId\'
eventType:
\$ref: \'#/components/schemas/EventType\'
timeStamp:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
report:
\$ref: \'#/components/schemas/Report\'
ReportingOptions:
type: object
properties:
maxNumOfReports:
\$ref: \'#/components/schemas/MaxNumOfReports\'
expiry:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
reportPeriod:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DurationSec\'
Report:
type: object
properties:
reachabilityForSmsReport:
\$ref: \'#/components/schemas/ReachabilityForSmsReport\'
reachabilityForDataReport:
\$ref: \'#/components/schemas/ReachabilityForDataReport\'
lossConnectivityReport:
\$ref: \'TS29503_Nudm_EE.yaml#/components/schemas/LossConnectivityReport\'
locationReport:
\$ref: \'TS29503_Nudm_EE.yaml#/components/schemas/LocationReport\'
pdnConnectivityStatReport:
\$ref: \'TS29503_Nudm_EE.yaml#/components/schemas/PdnConnectivityStatReport\'
ReachabilityForSmsReport:
type: object
required:
\- reachabilitySmsStatus
properties:
reachabilitySmsStatus:
type: boolean
maxAvailabilityTime:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
ReachabilityForDataReport:
description: Contains data for a Monitoring Event Report, specific to the
\'Reachability For Data\' event type
type: object
required:
\- reachabilityDataStatus
properties:
reachabilityDataStatus:
type: boolean
maxAvailabilityTime:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
LossConnectivityConfiguration:
type: object
properties:
maxDetectionTime:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DurationSec\'
LocationReportingConfiguration:
type: object
required:
\- currentLocation
properties:
currentLocation:
type: boolean
accuracy:
\$ref: \'#/components/schemas/LocationAccuracy\'
ReachabilityForDataConfiguration:
type: object
anyOf:
\- required: [ maximumLatency ]
\- required: [ maximumResponseTime ]
\- required: [ suggestedPacketNumDl ]
properties:
maximumLatency:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DurationSec\'
maximumResponseTime:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DurationSec\'
suggestedPacketNumDl:
type: integer
minimum: 1
PduSessionStatusCfg:
type: object
properties:
apn:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Dnn\'
# SIMPLE TYPES:
ReferenceId:
type: integer
Imsi:
type: string
pattern: \'\^(imsi-[0-9]{5,15})\$\'
MaxNumOfReports:
type: integer
minimum: 1
# ENUMS:
EventType:
anyOf:
\- type: string
enum:
\- LOSS_OF_CONNECTIVITY
\- UE_REACHABILITY_FOR_DATA
\- UE_REACHABILITY_FOR_SMS
\- LOCATION_REPORTING
\- COMMUNICATION_FAILURE
\- AVAILABILITY_AFTER_DDN_FAILURE
\- PDN_CONNECTIVITY_STATUS
\- type: string
LocationAccuracy:
anyOf:
\- type: string
enum:
\- CELL_LEVEL
\- TA_LEVEL
\- type: string
###### ## Annex B (informative): Withdrawn API versions
# B.1 General
This Annex lists withdrawn API versions of the APIs defined in the present
specification. 3GPP TS 29.501 [5] clause 4.3.1.6 describes the withdrawal of
API versions.
#