# Foreword
This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
In the present document, modal verbs have the following meanings:
**shall** indicates a mandatory requirement to do something
**shall not** indicates an interdiction (prohibition) to do something
The constructions \"shall\" and \"shall not\" are confined to the context of
normative provisions, and do not appear in Technical Reports.
The constructions \"must\" and \"must not\" are not used as substitutes for
\"shall\" and \"shall not\". Their use is avoided insofar as possible, and
they are not used in a normative context except in a direct citation from an
external, referenced, non-3GPP document, or so as to maintain continuity of
style when extending or modifying the provisions of such a referenced
document.
**should** indicates a recommendation to do something
**should not** indicates a recommendation not to do something
**may** indicates permission to do something
**need not** indicates permission not to do something
The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\" are
used instead, depending upon the meaning intended.
**can** indicates that something is possible
**cannot** indicates that something is impossible
The constructions \"can\" and \"cannot\" are not substitutes for \"may\" and
\"need not\".
**will** indicates that something is certain or expected to happen as a result
of action taken by an agency the behaviour of which is outside the scope of
the present document
**will not** indicates that something is certain or expected not to happen as
a result of action taken by an agency the behaviour of which is outside the
scope of the present document
**might** indicates a likelihood that something will happen as a result of
action taken by some agency the behaviour of which is outside the scope of the
present document
**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside the
scope of the present document
In addition:
**is** (or any other verb in the indicative mood) indicates a statement of
fact
**is not** (or any other negative verb in the indicative mood) indicates a
statement of fact
The constructions \"is\" and \"is not\" do not indicate requirements.
# 1 Scope
The present document specifies the stage 3 protocol and data model for the
Nnssf Service Based Interface. It provides stage 3 protocol definitions and
message flows, and specifies the API for each service offered by the NSSF.
The 5G System stage 2 architecture and procedures are specified in 3GPP TS
23.501 [2] and 3GPP TS 23.502 [3].
The Technical Realization of the Service Based Architecture and the Principles
and Guidelines for Services Definition are specified in 3GPP TS 29.500 [4] and
3GPP TS 29.501 [5].
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
\- References are either specific (identified by date of publication, edition
number, version number, etc.) or nonâ€‘specific.
\- For a specific reference, subsequent revisions do not apply.
\- For a non-specific reference, the latest version applies. In the case of a
reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".
[3] 3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".
[4] 3GPP TS 29.500: \"5G System; Technical Realization of Service Based
Architecture; Stage 3\".
[5] 3GPP TS 29.501: \"5G System; Principles and Guidelines for Services
Definition; Stage 3\".
[6] OpenAPI: \"OpenAPI 3.0.0 Specification\", https://github.com/OAI/OpenAPI-
Specification/blob/master/versions/3.0.0.md.
[7] 3GPP TS 29.571: \"5G System; Common Data Types for Service Based
Interfaces; Stage 3\".
[8] IETF RFC 6902: \"JavaScript Object Notation (JSON) Patch\".
[9] 3GPP TS 23.003: \"Numbering, addressing and identification\".
[10] IETF RFC 7540: \"Hypertext Transfer Protocol Version 2 (HTTP/2)\".
[11] 3GPP TS 33.501: \"Security architecture and procedures for 5G system\".
[12] IETF RFC 6749: \"The OAuth 2.0 Authorization Framework\".
[13] 3GPP TS 29.510: \"Network Function Repository Services; Stage 3\".
[14] IETF RFC 8259: \"The JavaScript Object Notation (JSON) Data Interchange
Format\".
[15] IETF RFC 7807: \"Problem Details for HTTP APIs\".
[16] IETF RFC 1952: \"GZIP file format specification version 4.3\".
[17] 3GPP TR 21.900: \"Technical Specification Group working methods\".
[18] IETF RFC 7231: \"Hypertext Transfer Protocol (HTTP/1.1): Semantics and
Content\".
[19] IETF RFC 7694: \"Hypertext Transfer Protocol (HTTP) Client-Initiated
Content-Encoding\".
[20] 3GPP TS 24.501: \"Non-Access-Stratum (NAS) protocol for 5G System (5GS);
Stage 3\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in
3GPP TR 21.905 [1].
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in 3GPP TR 21.905 [1].
# 4 Overview
## 4.1 Introduction
Within the 5GC, the NSSF offers services to the AMF and NSSF in a different
PLMN via the Nnssf service based interface (see 3GPP TS 23.501 [2] and 3GPP TS
23.502 [3]).
Figure 4.1-1 provides the reference model (in service based interface
representation and in reference point representation), with focus on the NSSF
and the scope of the present specification.
Figure 4.1-1: NSSF in 5G System architecture
The functionalities supported by the NSSF are listed in clause 6.2.14 of 3GPP
TS 23.501 [2].
# 5 Services offered by the NSSF
## 5.1 Introduction
The NSSF supports the following services.
Table 5.1-1: NF Services provided by NSSF
Service Name Description Example Consumer
* * *
Nnssf_NSSelection This service enables Network Slice selection in both the
Serving PLMN and the HPLMN AMF, V-NSSF Nnssf_NSSAIAvailability This service
enables to update the S-NSSAI(s) the NF service consumer (e.g AMF) supports on
a per TA basis on the NSSF and to subscribe and notify any change in status,
on a per TA basis, of the SNSSAIs available per TA (unrestricted) and the
restricted S-NSSAI(s) per PLMN in that TA in the serving PLMN of the UE. AMF
Table 5.1-2 summarizes the corresponding APIs defined for this specification.
Table 5.1-2: API Descriptions
Service Name Clause Description OpenAPI Specification File apiName Annex
* * *
Nnssf_NSSelection 6.1 NSSF Network Slice Selection Service
TS29531_Nnssf_NSSelection.yaml nnssf-nsselection A.2 Nnssf_NSSAIAvailability
6.2 NSSF NSSAI Availability Service TS29531_Nnssf_NSSAIAvailability.yaml
nnssf-nssaiavailability A.3
## 5.2 Nnssf_NSSelection Service
### 5.2.1 Service Description
The Nnssf_NSSelection service is used by an NF Service Consumer (e.g. AMF or
NSSF in a different PLMN) to retrieve the information related to network slice
in the non-roaming and roaming case. It also enables the NSSF to provide to
the AMF the Allowed NSSAI and the Configured NSSAI for the Serving PLMN. The
NF service consumer discovers the NSSF based on the local configuration. The
NSSF in a different PLMN is discovered based on the self-constructed FQDN as
specified in 3GPP TS 23.003 [9].
### 5.2.2 Service Operations
#### 5.2.2.1 Introduction
For the Nnssf_NSSelection service the following service operations are
defined:
\- Get.
#### 5.2.2.2 GET
##### 5.2.2.2.1 General
The Get operation shall be used in the non-roaming or roaming scenario to
retrieve:
\- The slice selection information including the allowed NSSAI, Configured
NSSAI, target AMF Set or the list of candidate AMF(s), and optionally
\- The Mapping Of Allowed NSSAI;
\- The Mapping Of Configured NSSAI;
\- NSI ID(s) associated with the Network Slice instances of the Allowed NSSAI;
\- NRF(s) to be used to select NFs/services within the selected Network Slice
instance(s) and NRF to be used to determine the list of candidate AMF(s) from
the AMF Set, during Registration procedure and
\- Information on whether the S-NSSAI(s) not included in the Allowed NSSAI
which were part of the Requested NSSAI are rejected in the serving PLMN or in
the current TA.
\- The NRF to be used to select NFs/services within the selected network slice
instance, and optionally the NSI ID associated with the S-NSSAI provided in
the input, during the PDU Session Establishment procedure.
\- The slice mapping information including the mapping of S-NSSAI(s) of the
VPLMN to corresponding HPLMN S-NSSAI(s).
It is used in the following procedures:
\- Registration with AMF re-allocation (see clause 4.2.2.2.3 of 3GPP TS 23.502
[3]);
\- EPS to 5GS handover using N26 interface (see clause 4.11.1.2.2 of 3GPP TS
23.502 [3]);
\- EPS to 5GS mobility registration procedure (see clauses 4.11.1.3.3,
4.11.1.3.3A, 4.11.1.3.4 and 4.23.12 of 3GPP TS 23.502 [3]);
\- Xn and N2 Handover procedures with PLMN change (see clauses 4.9.1, 4.23.7
and 4.23.11 of 3GPP TS 23.502 [3]);
\- UE Configuration Update procedure (see clause 4.2.4.2 of 3GPP TS 23.502
[3]);
\- SMF selection for non-roaming and roaming with local breakout (see clause
4.3.2.2.3.2 of 3GPP TS 23.502 [3]) or SMF selection for home-routed roaming
scenario (see clause 4.3.2.2.3.3 of 3GPP TS 23.502 [3]).
NOTE: The list of procedures above, which trigger invoking of the
Nnssf_NSSelection_Get service operation, is not exhaustive.
##### 5.2.2.2.2 Get service operation of Nnssf_NSSelection service
In this procedure, the NF Service Consumer (e.g. AMF) retrieves the slice
selection information including the Allowed NSSAI, Configured NSSAI, target
AMF Set or the list of candidate AMF(s) and other optional information.
This service operation shall also be used to retrieve the slice mapping
information including the mapping of S-NSSAI(s) of the VPLMN to corresponding
HPLMN S-NSSAI(s) during inter-PLMN mobility procedure.
Figure 5.2.2.2.2-1: Retrieve the network slice information during the mobility
procedure
1 The AMF shall send a GET request to the NSSF.
If the AMF wants to retrieve the slice selection information, one or more of
the following parameters shall be included as query parameters: Requested
NSSAI and Subscribed S-NSSAI(s) with the indication if marked as default
S-NSSAI included in the slice-info-request-for-registration, PLMN ID of the
SUPI, TAI, NF type of the NF service consumer, Requester ID.
If the AMF wants to retrieve the slice mapping information, the following
parameters shall be included as query parameters: sNssaiForMapping IE and
requestMapping IE included in the slice-info-request-for-registration, PLMN ID
of the SUPI, TAI, NF type of the NF service consumer and Requester ID.
2a On success, \"200 OK\" shall be returned when the NSSF is able to find
authorized network slice information for the requested network slice selection
information, the response body shall include a payload body containing at
least the Allowed NSSAI, target AMF Set or the list of candidate AMF(s); the
payload body may additionally contain a target AMF Service Set. \"200 OK\"
shall also be returned when the NSSF is able to find the requested slicing
mapping information, the response body shall include a payload body containing
the mapping of S-NSSAI(s) of the VPLMN to corresponding HPLMN S-NSSAI(s)
included in the allowedNssaiList IE.
2b If no slice instances can be found for the requested slice selection
information or the requested slice mapping information, then the NSSF shall
return a 403 Forbidden response with the \"ProblemDetails\" IE containing the
Application Error \"SNSSAI_NOT_SUPPORTED\" (cf. Table 6.1.7.3-1).
On failure or redirection, the NSSF shall return one of the HTTP status codes
together with the response body listed in Table 6.1.3.2.3.1-3.
##### 5.2.2.2.3 Get service operation of Nnssf_NSSelection service during the
PDU session establishment
In this procedure, the NF Service Consumer (e.g. AMF) retrieves the NRF and
the optionally the NSI ID of the network slice instance:
Figure 5.2.2.2.3-1: Retrieve the network slice information during the PDU
session establishment procedure
1 The NF Service consumer (e.g. AMF or NSSF in the different PLMN) shall send
a GET request to the NSSF. The request shall include query parameters, contain
at least S-NSSAI, S-NSSAI from the HPLMN that maps to the S-NSSAI from the
Allowed NSSAI of the Serving PLMN, the NF type of the NF service consumer and
Requester ID. For the procedure invoked in the Serving PLMN, the query
parameters shall also contain non-roaming/LBO roaming/HR roaming indication,
PLMN ID of the SUPI and TAI.
2a On success, \"200 OK\" shall be returned when the NSSF is able to find
network slice instance information for the requested network slice selection
information, the response body shall include a payload body containing at
least the NRF to be used to select NFs/services within the selected Network
Slice instance;
2b If no slice instances can be found for the requested slice selection
information, then the NSSF shall return a 403 Forbidden response with the
\"ProblemDetails\" IE containing the Application Error
\"SNSSAI_NOT_SUPPORTED\" (cf. Table 6.1.7.3-1).
On failure or redirection, the NSSF shall return one of the HTTP status codes
together with the response body listed in Table 6.1.3.2.3.1-3.
##### 5.2.2.2.4 Get service operation of Nnssf_NSSelection service during UE
configuration update procedure
In this procedure, the NF Service Consumer (e.g. AMF) retrieves network slice
configuration information (e.g. the Allowed NSSAI and the Configured NSSAI)
during the UE configuration update procedure.
Figure 5.2.2.2.4-1: Retrieve the network slice information during UE
configuration update procedure
1 The NF Service consumer (e.g. AMF) shall send a GET request to the NSSF. The
request shall include query parameters: Subscribed S-NSSAI(s) with the
indication if the S-NSSAI is marked as default S-NSSAI, PLMN ID of the SUPI,
TAI, NF type of the NF service consumer and the NF instance ID of the
requester NF.
2a On success, \"200 OK\" shall be returned when the NSSF is able to find
authorized network slice information for the requested network slice selection
information, the response body shall include a payload body containing at
least the Allowed NSSAI, Configured NSSAI;
2b If no slice instances can be found for the requested slice selection
information, then the NSSF shall return a 403 Forbidden response with the
\"ProblemDetails\" IE containing the Application Error
\"SNSSAI_NOT_SUPPORTED\" (cf. Table 6.1.7.3-1).
On failure or redirection, the NSSF shall return one of the HTTP status codes
together with the response body listed in Table 6.1.3.2.3.1-3.
## 5.3 Nnssf_NSSAIAvailability Service
### 5.3.1 Service Description
The Nnssf_NSSAIAvailability service is used by the NF service consumer (e.g
AMF) to update the S-NSSAI(s) the AMF supports on a per TA basis on the NSSF,
subscribe and unsubscribe the notification of any changes to the NSSAI
availability information on a per TA basis, of the S-NSSAIs available per TA
(unrestricted) and the restricted S-NSSAI(s) per PLMN in that TA in the
serving PLMN of the UE.
### 5.3.2 Service Operations
#### 5.3.2.1 Introduction
For the Nnssf_NSSAIAvailability service the following service operations are
defined:
\- Update;
\- Subscribe;
\- Unsubscribe;
\- Notify;
\- Delete;
\- Options.
#### 5.3.2.2 Update Service Operation
##### 5.3.2.2.1 General
The Update operation shall be used by an NF Service Consumer (e.g. AMF) to
update the NSSF with the S-NSSAIs the NF service consumer (e.g. AMF) supports
per TA, and get the availability of the S-NSSAIs per TA for the S-NSSAIs the
NF service consumer (e.g. AMF) supports.
Figure 5.3.2.2.1-1: Update the S-NSSAIs the AMF supports per TA
1\. The NF service consumer (e.g. AMF) shall send a PUT request to the
resource representing the NSSAI Availability information of the individual NF,
identified by the {nfId}, to replace or create the NSSAI Availability
information of the NF. The payload of the body shall contain the
NssaiAvailabilityInfo which contains one or more representations of the
individual supportedSnssai information to be replaced.
The NF service consumer (e.g. AMF) shall send a PATCH request to the resource
representing the NSSAI Availability information of the individual NF,
identified by the {nfId}, to update the NSSAI Availability information of the
NF. The payload of the body shall contain the PatchDocument which contains one
or more PatchItem instructions for updating the individual supportedSnssai
resources.
2\. On success, \"204 No content\" shall be returned if Authorized NSSAI
Availability is empty after the update; otherwise, \"200 OK\" shall be
returned, the payload body of the PUT/PATCH response shall contain the
representation describing the status of the request and the complete
AuthorizedNssaiAvailabilityData information representing the current state of
the AuthorizedNssaiAvailabilityInfo. If there is no supported S-NSSAIs
authorized by the NSSF for the TA, the NSSF shall not return the
AuthorizedNssaiAvailabilityData for the corresponding TA in the response.
On failure or redirection, the NSSF shall return one of the HTTP status code
together with the response body listed in Table 6.2.3.2.3.1-2 / Table
6.2.3.2.3.2-2.
#### 5.3.2.3 Subscribe Service Operation
##### 5.3.2.3.1 Creation of a subscription
The Subscribe Operation is used by a NF Service Consumer (e.g. AMF) to
subscribe to a notification of any changes in status of the NSSAI availability
information (e.g. S-NSSAIs available per TA and the restricted S-NSSAI(s) per
PLMN in that TA in the serving PLMN of the UE) upon this is updated by another
AMF.
Figure 5.3.2.3.1-1 Create a subscription
1\. The NF Service Consumer shall send a POST request to create a subscription
resource in the NSSF. The payload body of the POST request shall contain a
representation of the individual event subscription resource to be created in
the NssfEventSubscriptionCreateData. The request may contain an expiry time,
suggested by the NF Service Consumer as a hint, representing the time upto
during which the subscription is desired to be kept active and describes the
maximum duration after which the subscribed event shall stop generating
report. The request may also indicate a specific AMF Set to restrict the
subscriptions to notifications applicable to the AMF Set (i.e. notifications
related to S-NSSAIs supported by the AMF Set).
2\. On success, \"201 Created\" shall be returned, and the payload body of the
POST response shall contain the representation describing the status of the
created subscription in NssfEventSubscriptionCreatedData that may contain the
AuthorizedNssaiAvailabilityData information, if available. If there is no
supported S-NSSAIs authorized by the NSSF for the TA, the NSSF shall not
return the AuthorizedNssaiAvailabilityData for the corresponding TA in the
response. The Location header shall contain the location (URI) of the created
subscription resource.
The response, based on operator policy and taking into account the expiry time
included in the request, may contain the expiry time, as determined by the
NSSF, after which the subscription becomes invalid. Once the subscription
expires, if the NF Service Consumer wants to keep receiving notifications, it
shall create a new subscription in the NSSF. The NSSF shall not provide the
same expiry time for many subscriptions in order to avoid all of them expiring
and recreating the subscription at the same time. If the expiry time is not
included in the response, the NF Service Consumer shall consider the
subscription to be valid without an expiry time.
On failure or redirection, the NSSF shall return one of the HTTP status code
together with the response body listed in Table 6.2.3.3.3.1-2.
##### 5.3.2.3.2 Modification of a subscription
The Subscribe Operation may be used by a NF Service Consumer (e.g. AMF)
towards an NSSF supporting the SUMOD feature, when it needs to modify an
existing subscription previously created by itself at the AMF.
The NF Service Consumer shall modify the subscription by using HTTP method
PATCH with the URI of the individual subscription resource to be modified.
Figure 5.3.2.3.2-1 Modify a subscription
1\. The NF Service Consumer (e.g. AMF) shall send a PATCH request to the
resource URI identifying the individual subscription resource. The payload of
the body shall contain the PatchDocument which contains one or more PatchItem
instructions for updating the subscription data. The NF Service Consumer shall
not change the event IE included in the NssfEventSubscriptionCreateData by
invoking the PATCH request message. The taiList IE may only be set to an empty
array in PATCH request if the NF service consumer and NSSF support the ONSSAI
feature.
2\. On success, \"200 OK\" shall be returned, the payload body of the PATCH
response shall contain the representation describing the updated subscription
in NssfEventSubscriptionCreatedData. If there is no supported S-NSSAIs
authorized by the NSSF for the TA, the NSSF shall not return the
AuthorizedNssaiAvailabilityData for the corresponding TA in the response.
On failure or redirection, the NSSF shall return one of the HTTP status code
together with the response body listed in Table 6.2.3.4.3.2-2.
#### 5.3.2.4 Unsubscribe Service Operation
##### 5.3.2.4.1 General
The Unsubscribe Operation is used by a NF Service Consumer (e.g. AMF) to
unsubscribe to a notification of any previously subscribed changes to the
NSSAI availability information.
Figure 5.3.2.4.1-1 Unsubscribe a subscription
1\. The NF Service Consumer shall send a DELETE request to delete an existing
subscription resource in the NSSF.
2\. If the request is accepted, the NSSF shall respond with the status code
204 indicating the resource identified by subscription ID is successfully
deleted.
On failure or redirection, the NSSF shall return one of the HTTP status code
together with the response body listed in Table 6.2.3.4.3.1-2.
#### 5.3.2.5 Notify Service Operation
##### 5.3.2.5.1 General
The Notify Service operation shall be used by the NSSF to update the NF
Service Consumer (e.g. AMF) with any change in status, on a per TA basis, of
the S-NSSAIs available per TA (unrestricted) and the S-NSSAIs restricted per
PLMN in that TA in the serving PLMN of the UE.
Figure 5.3.2.5.1-1: Update the AMF with any S-NSSAIs restricted per TA
1\. The NSSF shall send a POST request to the resource representing the NSSF
availability resource in the NF service consumer (e.g. AMF). The payload body
of the POST request shall contain the one representations of the individual
NssfEventNotification resource. If there is no supported S-NSSAIs authorized
by the NSSF for the TA, the NSSF shall not return the
AuthorizedNssaiAvailabilityData for the corresponding TA in the notification.
If there is no supported S-NSSAIs authorized by the NSSF for all TAs and the
NF Service Consumer has indicated support of \"EANAN\" feature, the NSSF shall
set authorizedNssaiAvailabilityData attribute to an empty array.
2\. On success, \"204 No Content\" shall be returned and the payload body of
the POST response shall be empty.
On failure or redirection, the NF service consumer shall return one of the
HTTP status code together with the response body listed in Table
6.2.5.2.3.1-2.
#### 5.3.2.6 Delete Service Operation
##### 5.3.2.6.1 General
The Delete Service operation shall be used by the NF service consumer (e.g.
AMF) to delete the NSSAI availability information stored for the NF service
consumer in the NSSF.
Figure 5.3.2.6.1-1: Delete the NSSAI Availability Information at NSSF
1\. The NF service consumer (e.g. AMF) shall send a DELETE request to remove
the NSSAI availability information for the NF service consumer represented by
the {nfId} (e.g. AMF ID).
2\. The NSSF shall delete the NSSAI Availability information for the
individual AMF and shall return the 204 No Content status code.
On failure or redirection, the NSSF shall return one of the HTTP status code
together with the response body listed in Table 6.2.3.2.3.3-2.
#### 5.3.2.7 Options Service Operation
##### 5.3.2.7.1 General
The Options service operation is used by a NF Service Consumer (e.g. AMF) to
discover the communication options supported by the NSSF for the resource.
Figure 5.3.2.7.1-1: Procedure for the discovery of communication options
supported by the NSSF
1\. The NF service consumer (e.g. AMF) shall send an OPTIONS request to
discover the communication options supported by the NSSF for the resource.
2\. If the request is accepted, the NSSF shall respond with the status code
200 OK and include an Accept-Encoding header (as described in IETF RFC 7694).
On failure or redirection, the NSSF shall return one of the HTTP status code
listed in Table 6.2.3.5.3.1-3.
# 6 API Definitions
## 6.1 Nnssf_NSSelection Service API
### 6.1.1 API URI
The Nnssf_NSSelection service shall use the Nnssf_NSSelection API.
The API URI of the Nnssf_NSSelection API shall be:
**{apiRoot}/nnssf-nsselection/\ /**
The request URIs used in HTTP requests from the NF service consumer towards
the NF service producer shall have the Resource URI structure defined in
clause 4.4.1 of 3GPP TS 29.501 [5], i.e.:
**{apiRoot}/nnssf-nsselection/\ /\**
with the following components:
\- The {apiRoot} shall be set as described in 3GPP TS 29.501 [5].
\- The **\ ** shall be \"v2\".
\- The \ shall be set as described in clause
6.1.3.
### 6.1.2 Usage of HTTP
#### 6.1.2.1 General
HTTP/2, IETF RFC 7540 [10], shall be used as specified in clause 5 of 3GPP TS
29.500 [4].
An OpenAPI [6] specification of HTTP messages and content bodies for the
Nnssf_NSSelection service is specified in Annex A.
#### 6.1.2.2 HTTP standard headers
##### 6.1.2.2.1 General
See clause 5.2.2 of 3GPP TS 29.500 [4] for the usage of HTTP standard headers.
##### 6.1.2.2.2 Content type
The following content types shall be supported:
\- JSON, as defined in IETF RFC 8259 [14], shall be used as content type of
the HTTP bodies specified in the present specification as indicated in clause
5.4 of 3GPP TS 29.500 [4].
\- The Problem Details JSON Object (IETF RFC 7807 [15]. The use of the Problem
Details JSON object in a HTTP response body shall be signalled by the content
type \"application/problem+json\".6.1.2.3 HTTP custom headers
##### 6.1.2.3.1 General
In this release of this specification, no custom headers specific to the
Nnssf_NSSelection service are defined. For 3GPP specific HTTP custom headers
used across all service based interfaces, see clause 5.2.3 of 3GPP TS 29.500
[4].
### 6.1.3 Resources
#### 6.1.3.1 Overview
Figure 6.1.3.1-1 describes the resource URI structure of the Nnssf_NSSelection
API.
Figure 6.1.3.1-1: Resource URI structure of the nnssf_nsselection API
Table 6.1.3.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 6.1.3.1-1: Resources and methods overview
+----------------+----------------+----------------+----------------+ | Resource name | Resource URI | HTTP method or | Description | | | | custom | | | | | operation | | +================+================+================+================+ | Network Slice | / | GET | To retrieve | | Information | | | network slice | | | **n** etwo | | information. | | | rk**-** slice**| | See clause | | | -** information | | 6.1.3.2.3.1. | | | | | | | | | | Maps to | | | | | Nnssf_NS | | | | | Selection_Get | | | | | service | | | | | operation. | +----------------+----------------+----------------+----------------+
#### 6.1.3.2 Resource: Network Slice Information
##### 6.1.3.2.1 Description
This resource represents the network slice related information maintained by
the NSSF.This resource is modelled with the Document resource archetype (see
clause C.1 of 3GPP TS 29.501 [5]).
##### 6.1.3.2.2 Resource Definition
Resource URI: **{apiRoot}/nnssf-nsselection/{apiVersion}/network-slice-
information**
This resource shall support the resource URI variables defined in table
6.1.3.2.2-1.
Table 6.1.3.2.2-1: Resource URI variables for this resource
Name Data type Definition
* * *
apiRoot string See clause 6.1.1 apiVersion string See clause 6.1.1
##### 6.1.3.2.3 Resource Standard Methods
###### 6.1.3.2.3.1 GET
This method retrieves the information related to the selected slice based on
the input query parameters provided by the NF service consumer specified in
table 6.1.3.2.3.1-1.
This method shall support input query parameters specified in table
6.1.3.2.3.1-1 and the response data structure and response codes specified in
table 6.1.3.2.3.1-3.
Table 6.1.3.2.3.1-1: URI query parameters supported by the GET method on this
resource
* * *
Name Data type P Cardinality Description nf-type NFType M 1 This IE shall
contain the NF type of the NF service consumer. nf-id NfInstanceId M 1 This IE
shall contain the NF identifier of the NF service consumer. slice-info-
request-for-registration SliceInfoForRegistration C 0..1 This IE shall be
present when the network slice information is requested during the
Registration procedure or during EPS to 5GS handover procedure using N26
interface towards an NSSF in the serving PLMN. slice-info-request-for-pdu-
session SliceInfoForPDUSession C 0..1 This IE shall be present when the
network slice information is requested during the PDU session establishment
procedure. slice-info-request-for-ue-cu SliceInfoForUEConfigurationUpdate C
0..1 This IE shall be present when the network slice information is requested
during UE configuration update procedure. home-plmn-id PlmnId C 0..1 This IE
shall be present in the request towards an NSSF in the serving PLMN if the
subscriber is a roamer to the serving PLMN. When present, this IE shall
contain the home PLMN Id of the UE. tai Tai C 0..1 This IE shall be present in
the request towards an NSSF in the serving PLMN. When present, this IE shall
contain the TAI the UE is currently located. supported-features
SupportedFeatures C 0..1 This IE shall be present if at least one optional
feature defined in clause 6.1.8 is supported.
* * *
Table 6.1.3.2.3.1-2: Data structures supported by the GET Request Body on this
resource
* * *
Data type P Cardinality Description n/a
* * *
Table 6.1.3.2.3.1-3: Data structures supported by the GET Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | AuthorizedNet | M | 1 | 200 OK | This case | | workSliceInfo | | | | represents a | | | | | | successful | | | | | | return of the | | | | | | authorized | | | | | | network slice | | | | | | information | | | | | | selected for | | | | | | the | | | | | | corresponding | | | | | | request. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | | | | | | In the former | | | | | | case, the URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same NSSF or | | | | | | NSSF | | | | | | (service) | | | | | | set. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | | | | | | In the former | | | | | | case, the URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same NSSF or | | | | | | NSSF | | | | | | (service) | | | | | | set. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 403 Forbidden | This | | roblemDetails | | | | represents | | | | | | the case, | | | | | | where the NF | | | | | | service | | | | | | consumer is | | | | | | not | | | | | | authorized to | | | | | | retrieve the | | | | | | slice | | | | | | selection | | | | | | information | | | | | | or the all of | | | | | | the SNSSAIs | | | | | | included in | | | | | | the requested | | | | | | slice | | | | | | selection | | | | | | information | | | | | | is not | | | | | | supported in | | | | | | the PLMN. | | | | | | | | | | | | The | | | | | | application | | | | | | specific | | | | | | error | | | | | | information | | | | | | shall be | | | | | | provided in | | | | | | the \"cause\" | | | | | | attribute. | | | | | | The \"cause\" | | | | | | attribute | | | | | | shall be set | | | | | | to: | | | | | | | | | | | | - | | | | | | SNSSAI_NO | | | | | | T_SUPPORTED, | | | | | | if the SNSSAI | | | | | | included in | | | | | | the requested | | | | | | slice | | | | | | selection | | | | | | information | | | | | | is not | | | | | | allowed in | | | | | | the PLMN and | | | | | | there is no | | | | | | default NSSAI | | | | | | value | | | | | | provided in | | | | | | the request. | | | | | | | | | | | | - | | | | | | NOT | | | | | | _AUTHORIZED, | | | | | | if the NF | | | | | | service | | | | | | consumer | | | | | | identified by | | | | | | the NF Id is | | | | | | not | | | | | | authorized to | | | | | | retrieve the | | | | | | slice | | | | | | selection | | | | | | information. | | | | | | | | | | | | See table | | | | | | 6.1.7.3-1 for | | | | | | the | | | | | | description | | | | | | of this | | | | | | error. | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the GET | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | other than | | | | | | those | | | | | | specified in | | | | | | the table | | | | | | above also | | | | | | apply, with a | | | | | | P | | | | | | roblemDetails | | | | | | data type | | | | | | (see clause | | | | | | 5.2.7 of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.1.3.2.3.1-4: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same NSSF | | | | | | or NSSF | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
Table 6.1.3.2.3.1-5: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same NSSF | | | | | | or NSSF | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
##### 6.1.3.2.4 Resource Custom Operations
There are no custom methods supported on the network-slice-information
collection resource.
### 6.1.4 Custom Operations without associated resources
There are no custom operations without associated resources defined for the
Nnssf_NSSelection service in this version of this API.
### 6.1.5 Notifications
In this release of this specification, there are no notifications defined for
the Nnssf_NSSelection service.
### 6.1.6 Data Model
#### 6.1.6.1 General
This clause specifies the application data model supported by the API.
Table 6.1.6.1-1 specifies the data types defined for the Nnssf service based
interface protocol.
Table 6.1.6.1-1: Nnssf_NSSelection specific Data Types
Data type Clause defined Description
* * *
AuthorizedNetworkSliceInfo 6.1.6.2.2 Contains the authorized network slice
information. SubscribedSnssai 6.1.6.2.3 Contains the subscribed S-NSSAI.
AllowedSnssai 6.1.6.2.5 Contains the authorized S-NSSAI and optional mapped
home S-NSSAI and network slice instance information. AllowedNssai 6.1.6.2.6
Contains an array of allowed S-NSSAI that constitute the allowed NSSAI
information for the authorized network slice information. NsiInformation
6.1.6.2.7 Contains the API URIs of NRF services to be used to discover
NFs/services, subscribe to NF status changes and/or request access tokens
within the selected Network Slice instance and optional the Identifier of the
selected Network Slice instance. MappingOfSnssai 6.1.6.2.8 Contains the
mapping of S-NSSAI in the serving network and the value of the home network.
SliceInfoForRegistration 6.1.6.2.10 Contains the slice information requested
during a Registration procedure. SliceInfoForPDUSession 6.1.6.2.11 Contains
the slice information requested during PDU Session establishment procedure.
ConfiguredSnssai 6.1.6.2.12 Contains the configured S-NSSAI(s) authorized by
the NSSF in the serving PLMN and optional mapped home S-NSSAI.
SliceInfoForUEConfigurationUpdate 6.1.6.2.13 Contains the slice information
requested during UE configuration update procedure. NsiId 6.1.6.3.2  
RoamingIndication 6.1.6.3.3
Table 6.1.6.1-2 specifies data types re-used by the Nnssf~-~ service based
interface protocol from other specifications, including a reference to their
respective specifications and when needed, a short description of their use
within the Nnssf service based interface.
Table 6.1.6.1-2: Nnssf re-used Data Types
Data type Reference Comments
* * *
SupportedFeatures 3GPP TS 29.571 [7] Used to negotiate the applicability of
the optional features defined in table 6.1.8-1. Fqdn 3GPP TS 29.571 [7] Fully
Qualified Domain Name. AccessType 3GPP TS 29.571 [7] Used to specify the
access type for which a slice information is applicable. NfServiceSetId 3GPP
TS 29.571 [7] NF Service Set Identifier ExtSnssai 3GPP TS 29.571 [7]  
RedirectResponse 3GPP TS 29.571 [7]  
NFType 3GPP TS 29.510 [13] Type of Network Function.
#### 6.1.6.2 Structured data types
##### 6.1.6.2.1 Introduction
This clause defines the structures to be used in resource representations.
##### 6.1.6.2.2 Type: AuthorizedNetworkSliceInfo
Table 6.1.6.2.2-1: Definition of type AuthorizedNetworkSliceInfo
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | all | array( | C | 1..N | This IE shall | | owedNssaiList | AllowedNssai) | | | be included | | | | | | if: | | | | | | | | | | | | - the NSSF | | | | | | received the | | | | | | Requested | | | | | | NSSAI and the | | | | | | subscribed | | | | | | S-NSSAI(s); | | | | | | or | | | | | | | | | | | | - the | | | | | | \"req | | | | | | uestMapping\" | | | | | | flag in the | | | | | | corresponding | | | | | | request was | | | | | | set to | | | | | | \"true\". | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | contain the | | | | | | allowed | | | | | | S-NSSAI(s) | | | | | | authorized by | | | | | | the NSSF in | | | | | | the serving | | | | | | PLMN per | | | | | | access type | | | | | | if the | | | | | | Requested | | | | | | NSSAI and the | | | | | | subscribed | | | | | | S-NSSAI(s) | | | | | | received, or | | | | | | this IE shall | | | | | | contain the | | | | | | mapping of | | | | | | S-NSSAI(s) of | | | | | | the VPLMN to | | | | | | corresponding | | | | | | HPLMN | | | | | | S-NSSAI(s) if | | | | | | r | | | | | | equestMapping | | | | | | flag was set | | | | | | to \"true\". | | | | | | | | | | | | _NSSF may | | | | | | consider load | | | | | | level | | | | | | information | | | | | | of a Network | | | | | | Slice | | | | | | instance, | | | | | | provided by | | | | | | the NWDAF, to | | | | | | exclude | | | | | | slices that | | | | | | are | | | | | | overloaded_. | +---------------+---------------+---+-------------+---------------+ | co | array(Conf | C | 1..N | This IE shall | | nfiguredNssai | iguredSnssai) | | | be included | | | | | | if: | | | | | | | | | | | | - the NSSF | | | | | | did not | | | | | | receive any | | | | | | Requested | | | | | | NSSAI; or | | | | | | | | | | | | - the | | | | | | Requested | | | | | | NSSAI | | | | | | includes an | | | | | | S-NSSAI that | | | | | | is not valid | | | | | | in the | | | | | | Serving PLMN; | | | | | | or | | | | | | | | | | | | - the NSSF | | | | | | has received | | | | | | \"de | | | | | | faultConfigur | | | | | | edSnssaiInd\" | | | | | | set to | | | | | | \"true\". | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | contain the | | | | | | configured | | | | | | S-NSSAI(s) | | | | | | authorized by | | | | | | the NSSF in | | | | | | the serving | | | | | | PLMN. | | | | | | | | | | | | This IE shall | | | | | | not be | | | | | | included if | | | | | | the | | | | | | \"req | | | | | | uestMapping\" | | | | | | IE was | | | | | | included in | | | | | | the request | | | | | | message and | | | | | | was set to | | | | | | \"true\". | | | | | | | | | | | | _NSSF may | | | | | | consider load | | | | | | level | | | | | | information | | | | | | of a Network | | | | | | Slice | | | | | | instance, | | | | | | provided by | | | | | | the NWDAF, to | | | | | | exclude | | | | | | slices that | | | | | | are | | | | | | overloaded_. | +---------------+---------------+---+-------------+---------------+ | targetAmfSet | string | O | 0..1 | This IE may | | | | | | be included | | | | | | by the NSSF | | | | | | based on | | | | | | configuration | | | | | | and if the | | | | | | NSSF received | | | | | | the Requested | | | | | | NSSAI and the | | | | | | subscribed | | | | | | S-NSSAI(s). | | | | | | When present, | | | | | | this IE shall | | | | | | contain the | | | | | | target AMF | | | | | | set which | | | | | | shall be | | | | | | constructed | | | | | | from PLMN-ID | | | | | | (i.e. three | | | | | | decimal | | | | | | digits MCC | | | | | | and two or | | | | | | three decimal | | | | | | digits MNC), | | | | | | AMF Region Id | | | | | | (8 bit), and | | | | | | AMF Set Id | | | | | | (10 bit). | | | | | | | | | | | | This IE shall | | | | | | not be | | | | | | included if | | | | | | the | | | | | | \"req | | | | | | uestMapping\" | | | | | | IE was | | | | | | included in | | | | | | the request | | | | | | message and | | | | | | was set to | | | | | | \"true\". | | | | | | | | | | | | Pattern: | | | | | | \'\^[0 | | | | | | -9]{3}-[0-9 | | | | | | ]{2-3}-[A-F | | | | | | a-f0-9]{2}-\ | | | | | | [0-3][A-Fa- | | | | | | f0-9]{2}\$\' | | | | | | | | | | | | (NOTE) | +---------------+---------------+---+-------------+---------------+ | can | array( | O | 1..N | This IE may | | didateAmfList | NfInstanceId) | | | be included | | | | | | by the NSSF | | | | | | based on | | | | | | configuration | | | | | | and if the | | | | | | NSSF received | | | | | | the Requested | | | | | | NSSAI and the | | | | | | subscribed | | | | | | S-NSSAI(s). | | | | | | When present, | | | | | | this IE shall | | | | | | contain the | | | | | | list of | | | | | | candidate | | | | | | AMF(s). | | | | | | | | | | | | This IE shall | | | | | | not be | | | | | | included if | | | | | | the | | | | | | \"req | | | | | | uestMapping\" | | | | | | IE was | | | | | | included in | | | | | | the request | | | | | | message and | | | | | | was set to | | | | | | \"true\". | +---------------+---------------+---+-------------+---------------+ | reject | array(Snssai) | O | 1..N | This IE may | | edNssaiInPlmn | | | | be included | | | | | | by the NSSF | | | | | | if the NSSF | | | | | | received the | | | | | | Requested | | | | | | NSSAI and the | | | | | | subscribed | | | | | | S-NSSAI(s). | | | | | | When present, | | | | | | this IE shall | | | | | | contain the | | | | | | rejected | | | | | | NSSAI in the | | | | | | PLMN. | | | | | | | | | | | | _NSSF may | | | | | | consider load | | | | | | level | | | | | | information | | | | | | of a Network | | | | | | Slice | | | | | | instance, | | | | | | provided by | | | | | | the NWDAF, to | | | | | | exclude | | | | | | slices that | | | | | | are | | | | | | overloaded_. | | | | | | Such slices | | | | | | may be | | | | | | included in | | | | | | this | | | | | | attribute. | +---------------+---------------+---+-------------+---------------+ | reje | array(Snssai) | O | 1..N | This IE may | | ctedNssaiInTa | | | | be included | | | | | | by the NSSF | | | | | | if the NSSF | | | | | | received the | | | | | | Requested | | | | | | NSSAI and the | | | | | | subscribed | | | | | | S-NSSAI(s). | | | | | | When present, | | | | | | this IE shall | | | | | | contain the | | | | | | rejected | | | | | | NSSAI in the | | | | | | current TA. | | | | | | | | | | | | _NSSF may | | | | | | consider load | | | | | | level | | | | | | information | | | | | | of a Network | | | | | | Slice | | | | | | instance, | | | | | | provided by | | | | | | the NWDAF, to | | | | | | exclude | | | | | | slices that | | | | | | are | | | | | | overloaded_. | | | | | | Such slices | | | | | | may be | | | | | | included in | | | | | | this | | | | | | attribute. | +---------------+---------------+---+-------------+---------------+ | n | N | C | 0..1 | This IE shall | | siInformation | siInformation | | | be included | | | | | | by the NSSF | | | | | | if the NSSF | | | | | | received the | | | | | | S-NSSAI. | | | | | | (i.e. during | | | | | | PDU session | | | | | | establishment | | | | | | procedure) | | | | | | | | | | | | This IE shall | | | | | | not be | | | | | | included if | | | | | | the | | | | | | \"req | | | | | | uestMapping\" | | | | | | IE was | | | | | | included in | | | | | | the request | | | | | | message and | | | | | | was set to | | | | | | \"true\". | +---------------+---------------+---+-------------+---------------+ | supp | Supp | C | 0..1 | This IE shall | | ortedFeatures | ortedFeatures | | | be present if | | | | | | at least one | | | | | | optional | | | | | | feature | | | | | | defined in | | | | | | clause 6.1.8 | | | | | | is supported | +---------------+---------------+---+-------------+---------------+ | nrfAmfSet | Uri | O | 0..1 | This IE may | | | | | | be included | | | | | | by the NSSF | | | | | | based on | | | | | | configuration | | | | | | and if the | | | | | | target AMF | | | | | | Set is | | | | | | included. | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | contain the | | | | | | API URI of | | | | | | the NRF | | | | | | NFDiscovery | | | | | | Service (see | | | | | | clause 6.2.1 | | | | | | of | | | | | | 3GPP TS 2 | | | | | | 9.510 [13]) | | | | | | to be used to | | | | | | determine the | | | | | | list of | | | | | | candidate | | | | | | AMF(s) from | | | | | | the AMF Set. | +---------------+---------------+---+-------------+---------------+ | nrfA | Uri | C | 0..1 | This IE | | mfSetNfMgtUri | | | | should be | | | | | | present if | | | | | | the nrfAmfSet | | | | | | is present. | | | | | | When present, | | | | | | it shall | | | | | | contain the | | | | | | API URI of | | | | | | the NRF | | | | | | NFManagement | | | | | | Service (see | | | | | | clause 6.1.1 | | | | | | of | | | | | | 3GPP TS 29 | | | | | | .510 [13]). | +---------------+---------------+---+-------------+---------------+ | nrfAmfSetA | Uri | O | 0..1 | When present, | | ccessTokenUri | | | | this IE shall | | | | | | contain the | | | | | | API URI of | | | | | | the NRF | | | | | | Access Token | | | | | | Service (see | | | | | | clause 6.3.2 | | | | | | of | | | | | | 3GPP TS 29 | | | | | | .510 [13]). | +---------------+---------------+---+-------------+---------------+ | target | N | O | 0..1 | When present, | | AmfServiceSet | fServiceSetId | | | this IE shall | | | | | | contain the | | | | | | target AMF | | | | | | service set. | | | | | | (NOTE) | +---------------+---------------+---+-------------+---------------+ | NOTE: The NF | | | | | | Service | | | | | | Consumer uses | | | | | | the PLMN ID, | | | | | | AMF Region, | | | | | | AMF Set and | | | | | | AMF Service | | | | | | Set to | | | | | | perform a NF | | | | | | Discovery to | | | | | | the NRF. | | | | | +---------------+---------------+---+-------------+---------------+
##### 6.1.6.2.3 Type: SubscribedSnssai
Table 6.1.6.2.3-1: Definition of type SubscribedSnssai
Attribute name Data type P Cardinality Description
* * *
subscribedSnssai Snssai M 1 This IE shall contain the subscribed S-NSSAI.
defaultIndication boolean O 0..1 If it is set, the subscribed S-NSSAI is a
default subscribed S-NSSAI.
##### 6.1.6.2.4 Void
##### 6.1.6.2.5 Type: AllowedSnssai
Table 6.1.6.2.5-1: Definition of type AllowedSnssai
Attribute name Data type P Cardinality Description
* * *
allowedSnssai Snssai M 1 This IE shall contain the allowed S-NSSAI in the
serving PLMN. nsiInformationList array(NsiInformation) O 1..N This IE may be
present when the NSSF provides the allowed NSSAI information to the NF service
consumer (e.g AMF). If present, this IE shall include the information related
to the network slice instance corresponding to the allowed S-NSSAI.
mappedHomeSnssai Snssai O 0..1 When present, this IE shall contain the mapped
S-NSSAI value of home network corresponding to the allowed S-NSSAI in the
serving PLMN.
##### 6.1.6.2.6 Type: AllowedNssai
Table 6.1.6.2.6-1: Definition of type AllowedNssai
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | allo | array(A | M | 1..N | This IE shall | | wedSnssaiList | llowedSnssai) | | | contain the | | | | | | allowed | | | | | | S-NSSAI in | | | | | | the serving | | | | | | PLMN. | | | | | | | | | | | | (NOTE) | +---------------+---------------+---+-------------+---------------+ | accessType | AccessType | M | 1 | This IE shall | | | | | | contain the | | | | | | access type | | | | | | to which this | | | | | | allowed NSSAI | | | | | | belongs. | +---------------+---------------+---+-------------+---------------+ | NOTE: The | | | | | | maximum | | | | | | number of | | | | | | allowed | | | | | | S-NSSAIs | | | | | | shall not | | | | | | exceed the | | | | | | maximum | | | | | | number | | | | | | defined in | | | | | | 3GPP TS 2 | | | | | | 4.501 [20]. | | | | | +---------------+---------------+---+-------------+---------------+
##### 6.1.6.2.7 Type: NsiInformation
Table 6.1.6.2.7-1: Definition of type NsiInformation
Attribute name Data type P Cardinality Description
* * *
nrfId Uri M 1 This IE shall contain the API URI of the NRF NFDiscovery Service
(see clause 6.2.1 of 3GPP TS 29.510 [13]) to be used to select the
NFs/services within the selected Network Slice instance. nsiId NsiId O 0..1
This IE may be optionally included by the NSSF. When present, this IE shall
contain the Identifier of the selected Network Slice instance nrfNfMgtUri Uri
O 0..1 This IE should be present. When present, it shall contain the API URI
of the NRF NFManagement Service (see clause 6.1.1 of 3GPP TS 29.510 [13]).
nrfAccessTokenUri Uri O 0..1 When present, this IE shall contain the API URI
of the NRF Access Token Service (see clause 6.3.2 of 3GPP TS 29.510 [13]).
##### 6.1.6.2.8 Type: MappingOfSnssai
Table 6.1.6.2.8-1: Definition of type MappingOfSnssai
Attribute name Data type P Cardinality Description
* * *
servingSnssai Snssai M 1 This IE shall contain the S-NSSAI value of serving
network. homeSnssai Snssai M 1 This IE shall contain the mapped S-NSSAI value
of home network.
##### 6.1.6.2.9 Void
##### 6.1.6.2.10 Type: SliceInfoForRegistration
Table 6.1.6.2.10-1: Definition of type SliceInfoForRegistration
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | su | array(Subs | C | 1..N | This IE shall | | bscribedNssai | cribedSnssai) | | | be included | | | | | | during the | | | | | | initial | | | | | | registration | | | | | | procedure or | | | | | | during | | | | | | mobility | | | | | | registration | | | | | | procedure in | | | | | | 5GS. This IE | | | | | | may also be | | | | | | included | | | | | | during EPS to | | | | | | 5GS handover | | | | | | p | | | | | | rocedure/Idle | | | | | | mode Mobility | | | | | | Registration | | | | | | Procedure | | | | | | using N26 | | | | | | interface or | | | | | | the handover | | | | | | procedure | | | | | | within 5GS. | | | | | | When present, | | | | | | this IE shall | | | | | | contain the | | | | | | list of | | | | | | subscribed | | | | | | S-NSSAIs | | | | | | along with an | | | | | | indication | | | | | | for each | | | | | | S-NSSAI if it | | | | | | is a default | | | | | | S-NSSAI. | +---------------+---------------+---+-------------+---------------+ | allowedNssai | AllowedNssai | C | 0..1 | This IE shall | | CurrentAccess | | | | be included | | | | | | during an | | | | | | initial | | | | | | registration | | | | | | procedure in | | | | | | 5GS or during | | | | | | mobility | | | | | | registration | | | | | | update | | | | | | procedure in | | | | | | 5GS with a | | | | | | native | | | | | | 5G-GUTI as | | | | | | the old GUTI, | | | | | | and an | | | | | | allowed NSSAI | | | | | | for the | | | | | | current | | | | | | access type | | | | | | of the UE is | | | | | | available at | | | | | | the NF | | | | | | service | | | | | | consumer (e.g | | | | | | AMF). | +---------------+---------------+---+-------------+---------------+ | allowedNss | AllowedNssai | C | 0..1 | This IE shall | | aiOtherAccess | | | | be present | | | | | | during an | | | | | | initial | | | | | | registration | | | | | | procedure in | | | | | | 5GS or during | | | | | | mobility | | | | | | registration | | | | | | update | | | | | | procedure in | | | | | | 5GS with a | | | | | | native | | | | | | 5G-GUTI as | | | | | | the old GUTI, | | | | | | and if the UE | | | | | | was | | | | | | registered | | | | | | with the NF | | | | | | service | | | | | | consumer (e.g | | | | | | AMF) earlier | | | | | | for another | | | | | | access type | | | | | | and an | | | | | | allowed NSSAI | | | | | | for the other | | | | | | access type | | | | | | is available | | | | | | at the NF | | | | | | service | | | | | | consumer (e.g | | | | | | AMF). | +---------------+---------------+---+-------------+---------------+ | sNs | array(Snssai) | C | 1..N | This IE shall | | saiForMapping | | | | be included | | | | | | if the | | | | | | r | | | | | | equestMapping | | | | | | IE is set to | | | | | | true. When | | | | | | included, | | | | | | this IE shall | | | | | | contain the | | | | | | set of | | | | | | S-NSSAIs | | | | | | obtained from | | | | | | PGW+SMF in | | | | | | the HPLMN for | | | | | | PDU sessions | | | | | | that are | | | | | | handed over | | | | | | from EPS to | | | | | | 5GS, or shall | | | | | | contain the | | | | | | set of HPLMN | | | | | | S-NSSAIs | | | | | | obtained from | | | | | | source AMF | | | | | | during | | | | | | handover | | | | | | procedure | | | | | | within 5GS, | | | | | | or shall | | | | | | contain the | | | | | | S-NSSAIs for | | | | | | the HPLMN | | | | | | received from | | | | | | the UE during | | | | | | EPS to 5GS | | | | | | Idle mode | | | | | | Mobility | | | | | | Registration | | | | | | Procedure | | | | | | using N26 | | | | | | i | | | | | | nterface/idle | | | | | | state | | | | | | mobility | | | | | | registration | | | | | | procedure in | | | | | | 5GS. | +---------------+---------------+---+-------------+---------------+ | m | array(Map | O | 1..N | This IE may | | appingOfNssai | pingOfSnssai) | | | be present | | | | | | when the | | | | | | network slice | | | | | | information | | | | | | is requested | | | | | | during the | | | | | | Registration | | | | | | procedure. If | | | | | | present, this | | | | | | IE shall | | | | | | contain the | | | | | | mapping of | | | | | | S-NSSAI of | | | | | | the VPLMN to | | | | | | corresponding | | | | | | HPLMN | | | | | | S-NSSAI, for | | | | | | the S-NSSAIs | | | | | | included in | | | | | | the | | | | | | r | | | | | | equestedNssai | | | | | | and | | | | | | allowedNssai | | | | | | IEs for the | | | | | | current and | | | | | | other access | | | | | | types. | | | | | | | | | | | | This IE may | | | | | | also be | | | | | | present when | | | | | | the network | | | | | | slice | | | | | | information | | | | | | is requested | | | | | | during EPS to | | | | | | 5GS handover | | | | | | procedure | | | | | | using N26 | | | | | | interface or | | | | | | the handover | | | | | | procedure | | | | | | within 5GS. | | | | | | If present, | | | | | | this IE shall | | | | | | contain the | | | | | | mapping of | | | | | | S-NSSAI of | | | | | | the VPLMN to | | | | | | corresponding | | | | | | HPLMN | | | | | | S-NSSAI, for | | | | | | the S-NSSAIs | | | | | | included in | | | | | | the | | | | | | r | | | | | | equestedNssai | | | | | | IE. | +---------------+---------------+---+-------------+---------------+ | r | array(Snssai) | O | 1..N | This IE may | | equestedNssai | | | | contain the | | | | | | set of | | | | | | S-NSSAIs | | | | | | requested by | | | | | | the UE. | | | | | | | | | | | | During EPS to | | | | | | 5GS handover | | | | | | procedure | | | | | | using N26 | | | | | | interface, | | | | | | this IE may | | | | | | contain the | | | | | | set of | | | | | | S-NSSAIs in | | | | | | the serving | | | | | | PLMN obtained | | | | | | from PGW+SMF | | | | | | in VPLMN, or | | | | | | mapped from | | | | | | the set of | | | | | | S-NSSAIs | | | | | | obtained from | | | | | | PGW+SMF in | | | | | | the HPLMN. | | | | | | | | | | | | During | | | | | | handover | | | | | | procedure | | | | | | within 5GS, | | | | | | this IE may | | | | | | contain the | | | | | | set of | | | | | | S-NSSAIs in | | | | | | the serving | | | | | | PLMN obtained | | | | | | from the | | | | | | source AMF, | | | | | | or mapped | | | | | | from the set | | | | | | of HPLMN | | | | | | S-NSSAIs | | | | | | obtained from | | | | | | source AMF. | +---------------+---------------+---+-------------+---------------+ | defaultConfig | boolean | C | 0..1 | This IE shall | | uredSnssaiInd | | | | be present | | | | | | when the UE | | | | | | includes the | | | | | | Default | | | | | | Configured | | | | | | NSSAI | | | | | | Indication | | | | | | during the | | | | | | Registration | | | | | | procedure. | | | | | | | | | | | | true: The | | | | | | Default | | | | | | Configured | | | | | | NSSAI is | | | | | | indicated by | | | | | | the UE;\ | | | | | | false | | | | | | (default): | | | | | | The Default | | | | | | Configured | | | | | | NSSAI is not | | | | | | indicated by | | | | | | the UE. | +---------------+---------------+---+-------------+---------------+ | r | boolean | O | 0..1 | This IE may | | equestMapping | | | | be present | | | | | | when the | | | | | | Nnssf_NSS | | | | | | election_Get | | | | | | procedure is | | | | | | invoked | | | | | | during EPS to | | | | | | 5GS Mobility | | | | | | Registration | | | | | | Procedure | | | | | | (Idle State) | | | | | | using N26 | | | | | | interface or | | | | | | during EPS to | | | | | | 5GS handover | | | | | | procedure | | | | | | using N26 | | | | | | interface. | | | | | | | | | | | | This IE may | | | | | | also be | | | | | | present when | | | | | | Nnssf_NSS | | | | | | election_Get | | | | | | procedure is | | | | | | invoked | | | | | | during idle | | | | | | state | | | | | | Mobility | | | | | | Registration | | | | | | Procedure or | | | | | | handover | | | | | | procedure in | | | | | | 5GS. | | | | | | | | | | | | When present | | | | | | this IE shall | | | | | | indicate to | | | | | | the NSSF that | | | | | | the NSSF | | | | | | shall return | | | | | | the VPLMN | | | | | | specific | | | | | | mapped SNSSAI | | | | | | values for | | | | | | the S-NSSAI | | | | | | values in the | | | | | | sNs | | | | | | saiForMapping | | | | | | IE. | +---------------+---------------+---+-------------+---------------+
##### 6.1.6.2.11 Type: SliceInfoForPDUSession
Table 6.1.6.2.11-1: Definition of type SliceInfoForPDUSession
Attribute name Data type P Cardinality Description
* * *
sNssai Snssai M 1 This IE shall contain the requested S-NSSAI for the PDU
session, when the AMF queries the NSSF in the serving PLMN. When the vNSSF
queries the hNSSF during PDU session establishment for home routed roaming
case, this IE shall contain the S-NSSAI from the HPLMN that maps to the
S-NSSAI from the Allowed NSSAI of the Serving PLMN, as obtained from the NF
Service Consumer of the vNSSF. roamingIndication RoamingIndication M 1 This IE
shall contain the indication whether the UE is in non-roaming, LBO roaming or
HR roaming. homeSnssai Snssai C 0..1 This IE shall be included by the NF
Service Consumer (e.g. AMF) towards the vNSSF during PDU session establishment
procedure in home routed roaming scenario. This IE shall contain the S-NSSAI
of the HPLMN that maps to the S-NSSAI from the Allowed NSSAI of the Serving
PLMN when the UE in the roaming scenario.
##### 6.1.6.2.12 Type: ConfiguredSnssai
Table 6.1.6.2.12-1: Definition of type ConfiguredSNssai
Attribute name Data type P Cardinality Description
* * *
configuredSnssai Snssai M 1 This IE shall contain the configured S-NSSAI in
the serving PLMN. mappedHomeSnssai Snssai O 0..1 When present, this IE shall
contain the mapped S-NSSAI value of home network corresponding to the
configured S-NSSAI in the serving PLMN.
##### 6.1.6.2.13 Type: SliceInfoForUEConfigurationUpdate
Table 6.1.6.2.13-1: Definition of type SliceInfoForUEConfigurationUpdate
Attribute name Data type P Cardinality Description
* * *
subscribedNssai array(SubscribedSnssai) C 1..N This IE shall be included
during UE configuration update procedure in 5GS. When present, this IE shall
contain the list of subscribed S-NSSAIs along with an indication for each
S-NSSAI if it is a default S-NSSAI. allowedNssaiCurrentAccess AllowedNssai O
0..1 This IE may be included during UE configuration update procedure in 5GS.
When present, this IE shall contain the list of allowed S-NSSAIs in the AMF
for the current access type of the UE. allowedNssaiOtherAccess AllowedNssai O
0..1 This IE may be included during UE configuration update procedure in 5GS.
When present, this IE shall contain the list of allowed S-NSSAIs in the AMF
for the other access type of the UE. defaultConfiguredSnssaiInd boolean O 0..1
This IE may be present if the UE included the Default Configured NSSAI
Indication during the recent Registration procedure. requestedNssai
array(Snssai) O 1..N This IE may contain the set of S-NSSAIs requested by the
UE in the recent registration procedure. mappingOfNssai array(MappingOfSnssai)
O 1..N This IE may be present when the network slice information is requested
during UE configuration update procedure. If present, this IE shall contain
the mapping of S-NSSAI of the VPLMN to corresponding HPLMN S-NSSAI, for the
S-NSSAIs included in the requestedNssai and the allowedNssai IEs for the
current and other access types.
#### 6.1.6.3 Simple data types and enumerations
##### 6.1.6.3.1 Introduction
This clause defines simple data types and enumerations that can be referenced
from data structures defined in the previous clauses.
##### 6.1.6.3.2 Simple data types
The simple data types defined in table 6.1.6.3.2-1 shall be supported.
Table 6.1.6.3.2-1: Simple data types
* * *
Type Name Type Definition Description NsiId string Represents the Network
Slice Instance Identifier
* * *
##### 6.1.6.3.3 Enumeration: RoamingIndication
Table 6.1.6.3.3-1: Enumeration RoamingIndication
Enumeration value Description
* * *
NON_ROAMING This value indicates that the UE is not roaming. LOCAL_BREAKOUT
This value indicates that the UE is roaming but is using a local breakout PDU
session. HOME_ROUTED_ROAMING This value indicates that the UE is roaming and
is using a home routed PDU session.
#### 6.1.6.4 Binary data
There is no binary data used for the Nnssf_NSSelection service in this version
of the API.
### 6.1.7 Error Handling
#### 6.1.7.1 General
HTTP error handling shall be supported as specified in clause 5.2.4 of 3GPP TS
29.500 [4].
#### 6.1.7.2 Protocol Errors
Protocol Error Handling shall be supported as specified in clause 5.2.7.2 of
3GPP TS 29.500 [4].
#### 6.1.7.3 Application Errors
_The common application errors defined in the Table 5.2.7.2-1 in 3GPP TS
29.500 [4] may also be used for the Nnssf_NSSelection service._ The following
application errors listed in Table 6.1.7.3-1 are specific for the
_Nnssf_NSSelection_ service.
Table 6.1.7.3-1: Application errors
Application Error HTTP status code Description
* * *
SNSSAI_NOT_SUPPORTED 403 Forbidden This cause value shall be set when the
requested slice selection information is for SNSSAI(s) not supported in the
PLMN. NOT_AUTHORIZED 403 Forbidden The request is rejected due to the NF
service consumer is not authorized to retrieve the slice selection
information.
### 6.1.8 Feature negotiation
The feature negotiation mechanism specified in clause 6.6 of 3GPP TS 29.500
[4] shall be used to negotiate the optional features applicable between the
NSSF and the NF Service Consumer, for the Nnssf_NSSelection service, if any.
The NF Service Consumer shall indicate the optional features it supports for
the Nnssf_NSSelection service, if any, by including the supportedFeatures
attribute in the HTTP GET request when requesting the NSSF to provide the
allowed NSSAI information.
The NSSF shall determine the supported features for the requested network
slice information resource as specified in clause 6.6 of 3GPP TS 29.500 [4]
and shall indicate the supported features by including the supportedFeatures
attribute in the allowed NSSAI information it returns in the HTTP response.
The syntax of the supportedFeatures attribute is defined in clause 5.2.2 of
3GPP TS 29.571 [7].
The following features are defined for the Nnssf_NSSelection service.
Table 6.1.8-1: Features of supportedFeatures attribute used by
Nnssf_NSSelection service
+-------------------------+---------+-----+-------------------------+ | Feature Number | Feature | M/O | Description | +-------------------------+---------+-----+-------------------------+ | 1 | ES3XX | M | Extended Support of | | | | | HTTP 307/308 | | | | | redirection | | | | | | | | | | An NF Service Consumer | | | | | (e.g. AMF) that | | | | | supports this feature | | | | | shall support handling | | | | | of HTTP 307/308 | | | | | redirection for any | | | | | service operation of | | | | | the Nnssf_NSSelection | | | | | service. An NF Service | | | | | Consumer that does not | | | | | support this feature | | | | | does only support HTTP | | | | | redirection as | | | | | specified for 3GPP | | | | | Release 15. | +-------------------------+---------+-----+-------------------------+ | Feature number: The | | | | | order number of the | | | | | feature within the | | | | | s**upportedFeatures | | | | | attribute (starting | | | | | with 1).** | | | | | | | | | | **Feature: A short name | | | | | that can be used to | | | | | refer to the bit and to | | | | | the feature.** | | | | | | | | | | **M/O: Defines if the | | | | | implementation of the | | | | | feature is mandatory | | | | | (** \"**M** \"**) or | | | | | optional | | | | | (** \"**O** \"**).** | | | | | | | | | | Description: A clear | | | | | textual description of | | | | | the feature. | | | | +-------------------------+---------+-----+-------------------------+
### 6.1.9 Security
As indicated in 3GPP TS 33.501 [11] and 3GPP TS 29.500 [4], the access to the
Nnssf_NSSelection API may be authorized by means of the OAuth2 protocol (see
IETF RFC 6749 [12]), based on local configuration, using the \"Client
Credentials\" authorization grant, where the NRF (see 3GPP TS 29.510 [13])
plays the role of the authorization server.
If OAuth2 is used, an NF Service Consumer, prior to consuming services offered
by the Nnssf_NSSelection API, shall obtain a \"token\" from the authorization
server, by invoking the Access Token Request service, as described in 3GPP TS
29.510 [13], clause 5.4.2.2.
NOTE: When multiple NRFs are deployed in a network, the NRF used as
authorization server is the same NRF that the NF Service Consumer used for
discovering the Nnssf_NSSelection service.
The Nnssf_NSSelection API does not define any scopes for OAuth2 authorization.
### 6.1.10 HTTP redirection
An HTTP request may be redirected to a different NSSF service instance, within
the same NSSF or a different NSSF of an NSSF set, e.g. when an NSSF service
instance is part of an NSSF (service) set or when using indirect
communications (see 3GPP TS 29.500 [4]). See the ES3XX feature in clause
6.1.8.
An SCP that reselects a different NSSF producer instance will return the NF
Instance ID of the new NSSF producer instance in the 3gpp-Sbi-Producer-Id
header, as specified in clause 6.10.3.4 of 3GPP TS 29.500 [4].
If an NSSF within an NSSF set redirects a service request to a different NSSF
of the set using a 307 Temporary Redirect or 308 Permanent Redirect status
code, the identity of the new NSSF towards which the service request is
redirected shall be indicated in the 3gpp-Sbi-Target-Nf-Id header of the 307
Temporary Redirect or 308 Permanent Redirect response as specified in clause
6.10.9.1 of 3GPP TS 29.500 [4].
## 6.2 Nnssf_NSSAIAvailability Service API
## 6.2.1 API URI
The Nnssf_NSSAIAvailability service shall use the Nnssf_ NSSAIAvailability
API.
The API URI of the Nnssf_NSSAIAvailability API shall be:
**{apiRoot}/nnssf-** **nssaiavailability/\ /**
The request URIs used in HTTP requests from the NF service consumer towards
the NF service producer shall have the Resource URI structure defined in
clause 4.4.1 of 3GPP TS 29.501 [5], i.e.:
**{apiRoot}/nnssf-** **nssaiavailability/\
/\**
with the following components:
\- The {apiRoot} shall be set as described in 3GPP TS 29.501 [5].
\- The **\ ** shall be \"v1\".
\- The \ shall be set as described in clause
6.2.3.
### 6.2.2 Usage of HTTP
#### 6.2.2.1 General
HTTP/2, IETF RFC 7540 [10], shall be used as specified in clause 5 of 3GPP TS
29.500 [4].
An OpenAPI [6] specification of HTTP messages and content bodies for the
Nnssf_NSSAIAvailability service is specified in Annex A.
#### 6.2.2.2 HTTP standard headers
##### 6.2.2.2.1 General
See clause 5.2.2 of 3GPP TS 29.500 [4] for the usage of HTTP standard headers.
##### 6.2.2.2.2 Content type
The JSON format shall be supported. The use of JSON format shall be as
specified in clause 5.4 of 3GPP TS 29.500 [4].
The following content types shall be supported:
\- JSON, as defined in IETF RFC 8259 [14], shall be used as content type of
the HTTP bodies specified in the present specification as indicated in clause
5.4 of 3GPP TS 29.500 [4].
\- The Problem Details JSON Object (IETF RFC 7807 [15]). The use of the
Problem Details JSON object in a HTTP response body shall be signalled by the
content type \"application/problem+json\".
\- JSON Patch (IETF RFC 6902 [8]). The use of the JSON Patch format in a HTTP
request body shall be signalled by the content type \"application/json-
patch+json\".
##### 6.2.2.2.3 Accept-Encoding
The NSSF should support gzip coding (see IETF RFC 1952 [16]) in HTTP requests
and responses and indicate so in the Accept-Encoding header, as described in
clause 6.9 of 3GPP TS 29.500 [4].
#### 6.2.2.3 HTTP custom headers
##### 6.2.2.3.1 General
In this release of this specification, no custom headers specific to the
Nnssf_NSSAIAvailability service are defined. For 3GPP specific HTTP custom
headers used across all service based interfaces, see clause 5.2.3 of 3GPP TS
29.500 [4].
### 6.2.3 Resources
#### 6.2.3.1 Overview
Figure 6.2.3.1-1: Resource URI structure of the Nnssf_NSSAIAvailability API
Table 6.2.3.1-1 provides an overview of the resources and applicable HTTP
methods.
Table 6.2.3.1-1: Resources and methods overview
Resource name Resource URI HTTP method or custom operation Description
* * *
NSSAI Availability Store /nssai-availability OPTIONS Discover the
communication options supported by the NSSF for this resource. NSSAI
Availability Document /nssai-availability/{nfId} PUT Updates the NSSF with the
S-NSSAIs the NF service consumer (e.g. AMF) supports per TA. PATCH Updates the
NSSF with the S-NSSAIs the NF service consumer (e.g. AMF) supports per TA.
DELETE Delete the resource of the S-NSSAIs supported per TA by the NF service
consumer (e.g. AMF) NSSAI Availability Notification Subscriptions Collection
/nssai-availability/subscriptions POST Create a subscription to the
notification of any changes to the NSSAI availability information. Individual
NSSAI Availability Notification Subscriptions /nssai-
availability/subscriptions/{subscriptionId} DELETE Unsubscribe to the
notification of any changes to the NSSAI availability information. PATCH
Modify a subscription.
#### 6.2.3.2 Resource: NSSAI Availability Document
##### 6.2.3.2.1 Description
This resource represents a single NSSAI Availability resource.
This resource is modelled with the Document resource archetype (see clause C.1
of 3GPP TS 29.501 [5]).
##### 6.2.3.2.2 Resource Definition
Resource URI: {apiRoot}/nnssf-nssaiavailability/{apiVersion}/nssai-
availability/{nfId}
This resource shall support the resource URI variables defined in table
6.2.3.2.2-1.
Table 6.2.3.2.2-1: Resource URI variables for this resource
Name Data type Definition
* * *
apiRoot string See clause 6.2.1 apiVersion string See clause 6.2.1 nfId
NfInstanceId Represents the Identifier of the AMF for which the NSSAI
Availability information is updated.
##### 6.2.3.2.3 Resource Standard Methods
###### 6.2.3.2.3.1 PUT
This method shall support the request data structures specified in table
6.2.3.2.3.1-1 and the response data structures and response codes specified in
table 6.2.3.2.3.1-2.
Table 6.2.3.2.3.1-1: Data structures supported by the PUT Request Body on this
resource
* * *
Data type P Cardinality Description NssaiAvailabilityInfo M 1 This IE contains
the information regarding the NssaiAvailabilityData for the NF Service
Consumer (e.g AMF).
* * *
Table 6.2.3.2.3.1-2: Data structures supported by the PUT Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | Autho | M | 1 | 200 OK | This case | | rizedNssaiAva | | | | represents a | | ilabilityInfo | | | | successful | | | | | | update of the | | | | | | NSSF with the | | | | | | S-NSSAIs the | | | | | | AMF supports | | | | | | per TA. | | | | | | | | | | | | The | | | | | | authorized | | | | | | NSSAI | | | | | | availability | | | | | | (i.e. | | | | | | S-NSSAIs | | | | | | available per | | | | | | TA | | | | | | ( | | | | | | unrestricted) | | | | | | and any | | | | | | S-NSSAIs | | | | | | restricted | | | | | | per PLMN in | | | | | | that TA in | | | | | | the serving | | | | | | PLMN of the | | | | | | UE) | | | | | | information | | | | | | shall be | | | | | | returned in | | | | | | the response | | | | | | payload body. | +---------------+---+-------------+---------------+---------------+ | N/A | | | 204 No | This case | | | | | Content | represents a | | | | | | successful | | | | | | update of the | | | | | | NSSF with the | | | | | | S-NSSAIs the | | | | | | AMF supports | | | | | | per TA, and | | | | | | the | | | | | | authorized | | | | | | NSSAI | | | | | | availability | | | | | | is empty | | | | | | after the | | | | | | update. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | | | | | | In the former | | | | | | case, the URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same NSSF or | | | | | | NSSF | | | | | | (service) | | | | | | set. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | | | | | | In the former | | | | | | case, the URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same NSSF or | | | | | | NSSF | | | | | | (service) | | | | | | set. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 403 Forbidden | When the NF | | roblemDetails | | | | service | | | | | | consumer is | | | | | | not | | | | | | authorized to | | | | | | update the | | | | | | NSSAI | | | | | | availability | | | | | | information | | | | | | or the | | | | | | TAI/S-NSSAI | | | | | | information | | | | | | provided is | | | | | | not supported | | | | | | in the PLMN, | | | | | | the \"cause\" | | | | | | attribute | | | | | | shall be set | | | | | | to: | | | | | | | | | | | | - | | | | | | SNSSAI_NO | | | | | | T_SUPPORTED, | | | | | | if the | | | | | | S-NSSAI | | | | | | provided is | | | | | | not supported | | | | | | in the PLMN. | | | | | | | | | | | | - | | | | | | NOT | | | | | | _AUTHORIZED, | | | | | | if the NF | | | | | | service | | | | | | consumer | | | | | | identified by | | | | | | the NF Id is | | | | | | not | | | | | | authorized to | | | | | | update the | | | | | | NSSAI | | | | | | availability | | | | | | information. | | | | | | | | | | | | See table | | | | | | 6.2.7.3-1 for | | | | | | the | | | | | | description | | | | | | of this | | | | | | error. | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the PUT | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | other than | | | | | | those | | | | | | specified in | | | | | | the table | | | | | | above also | | | | | | apply, with a | | | | | | P | | | | | | roblemDetails | | | | | | data type | | | | | | (see clause | | | | | | 5.2.7 of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.2.3.2.3.1-3: Headers supported by the PUT method on this resource
* * *
Name Data type P Cardinality Description Content-Encoding string O 0..1
Content-Encoding, described in IETF RFC 7231 [18]
* * *
Table 6.2.3.2.3.1-4: Headers supported by the 200 Response Code on this
resource
* * *
Name Data type P Cardinality Description Accept-Encoding string O 0..1 Accept-
Encoding, described in IETF RFC 7694 [19]
* * *
Table 6.2.3.2.3.1-5: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same NSSF | | | | | | or NSSF | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
Table 6.2.3.2.3.1-6: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same NSSF | | | | | | or NSSF | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
###### 6.2.3.2.3.2 PATCH
This method shall support the request data structures specified in table
6.2.3.2.3.2-1 and the response data structures and response codes specified in
table 6.2.3.2.3.2-2.
Table 6.2.3.2.3.2-1: Data structures supported by the PATCH Request Body on
this resource
* * *
Data type P Cardinality Description PatchDocument M 1 This IE contains the
information regarding the JSON patch instructions for updating the
supportedSnssai(s) in NssaiAvailabilityInfo.
* * *
Table 6.2.3.2.3.2-2: Data structures supported by the PATCH Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | Autho | M | 1 | 200 OK | This case | | rizedNssaiAva | | | | represents a | | ilabilityInfo | | | | successful | | | | | | update of the | | | | | | NSSF with the | | | | | | S-NSSAIs the | | | | | | AMF supports | | | | | | per TA. | | | | | | | | | | | | If the | | | | | | authorized | | | | | | NSSAI | | | | | | availability | | | | | | (i.e. | | | | | | S-NSSAIs | | | | | | available per | | | | | | TA | | | | | | ( | | | | | | unrestricted) | | | | | | and any | | | | | | S-NSSAIs | | | | | | restricted | | | | | | per PLMN in | | | | | | that TA in | | | | | | the serving | | | | | | PLMN of the | | | | | | UE) is | | | | | | changed, the | | | | | | NSSF shall | | | | | | return a data | | | | | | structure of | | | | | | type | | | | | | \"Authori | | | | | | zedNssaiAvail | | | | | | abilityInfo\" | | | | | | in the | | | | | | response | | | | | | payload body. | +---------------+---+-------------+---------------+---------------+ | N/A | | | 204 | This case | | | | | | represents a | | | | | | successful | | | | | | update of the | | | | | | NSSF with the | | | | | | S-NSSAIs the | | | | | | AMF supports | | | | | | per TA, and | | | | | | the | | | | | | authorized | | | | | | NSSAI | | | | | | availability | | | | | | is empty | | | | | | after the | | | | | | update. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | | | | | | In the former | | | | | | case, the URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same NSSF or | | | | | | NSSF | | | | | | (service) | | | | | | set. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | | | | | | In the former | | | | | | case, the URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same NSSF or | | | | | | NSSF | | | | | | (service) | | | | | | set. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 403 Forbidden | When the NF | | roblemDetails | | | | service | | | | | | consumer is | | | | | | not | | | | | | authorized to | | | | | | update the | | | | | | NSSAI | | | | | | availability | | | | | | information | | | | | | or the | | | | | | S-NSSAI | | | | | | information | | | | | | provided is | | | | | | not supported | | | | | | in the PLMN, | | | | | | the \"cause\" | | | | | | attribute | | | | | | shall be set | | | | | | to: | | | | | | | | | | | | - | | | | | | SNSSAI_NO | | | | | | T_SUPPORTED, | | | | | | if the | | | | | | S-NSSAI | | | | | | provided is | | | | | | not supported | | | | | | in the PLMN. | | | | | | | | | | | | - | | | | | | NOT | | | | | | _AUTHORIZED, | | | | | | if the NF | | | | | | service | | | | | | consumer | | | | | | identified by | | | | | | the NF Id is | | | | | | not | | | | | | authorized to | | | | | | update the | | | | | | NSSAI | | | | | | availability | | | | | | information. | | | | | | | | | | | | See table | | | | | | 6.2.7.3-1 for | | | | | | the | | | | | | description | | | | | | of this | | | | | | error. | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | error: | | | | | | | | | | | | - | | | | | | RESOURC | | | | | | E_NOT_FOUND | | | | | | | | | | | | See table | | | | | | 6.2.7.3-1 for | | | | | | the | | | | | | description | | | | | | of this | | | | | | error. | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the PATCH | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | other than | | | | | | those | | | | | | specified in | | | | | | the table | | | | | | above also | | | | | | apply, with a | | | | | | P | | | | | | roblemDetails | | | | | | data type | | | | | | (see clause | | | | | | 5.2.7 of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.2.3.2.3.2-3: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same NSSF | | | | | | or NSSF | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
Table 6.2.3.2.3.2-4: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same NSSF | | | | | | or NSSF | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
###### 6.2.3.2.3.3 DELETE
This method shall support the request data structures specified in table
6.2.3.2.3.3-1 and the response data structures and response codes specified in
table 6.2.3.2.3.3-2.
Table 6.2.3.2.3.3-1: Data structures supported by the DELETE Request Body on
this resource
* * *
Data type P Cardinality Description n/a
* * *
Table 6.2.3.2.3.3-2: Data structures supported by the DELETE Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | | | | | | Content | | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | | | | | | In the former | | | | | | case, the URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same NSSF or | | | | | | NSSF | | | | | | (service) | | | | | | set. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | | | | | | In the former | | | | | | case, the URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same NSSF or | | | | | | NSSF | | | | | | (service) | | | | | | set. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | error: | | | | | | | | | | | | - | | | | | | RESOURC | | | | | | E_NOT_FOUND | | | | | | | | | | | | See table | | | | | | 6.2.7.3-1 for | | | | | | the | | | | | | description | | | | | | of this | | | | | | error. | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the | | | | | | DELETE method | | | | | | listed in | | | | | | Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | other than | | | | | | those | | | | | | specified in | | | | | | the table | | | | | | above also | | | | | | apply, with a | | | | | | P | | | | | | roblemDetails | | | | | | data type | | | | | | (see clause | | | | | | 5.2.7 of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.2.3.2.3.3-3: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same NSSF | | | | | | or NSSF | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
Table 6.2.3.2.3.3-4: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same NSSF | | | | | | or NSSF | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
#### 6.2.3.3 Resource: NSSAI Availability Notification Subscriptions
Collection
##### 6.2.3.3.1 Description
This resource represents the collection of NSSAI Availability Notification
Subscriptions in the NSSF.
This resource is modelled with the Collection resource archetype (see clause
C.2 of 3GPP TS 29.501 [5]).
##### 6.2.3.3.2 Resource Definition
Resource URI: {apiRoot}/nnssf-nssaiavailability/{apiVersion}/nssai-
availability/subscriptions
This resource shall support the resource URI variables defined in table
6.2.3.3.2-1.
Table 6.2.3.3.2-1: Resource URI variables for this resource
Name Data type Definition
* * *
apiRoot string See clause 6.2.1 apiVersion string See clause 6.2.1
##### 6.2.3.3.3 Resource Standard Methods
###### 6.2.3.3.3.1 POST
This method shall support the request data structures specified in table
6.2.3.3.3.1-1 and the response data structures and response codes specified in
table 6.2.3.3.3.1-2.
Table 6.2.3.3.3.1-1: Data structures supported by the POST Request Body on
this resource
* * *
Data type P Cardinality Description NssfEventSubscriptionCreateData M 1 This
IE contains the information regarding the SubscriptionData for the AMF to
notify any changes to the NSSAI availability information.
* * *
Table 6.2.3.3.3.1-2: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | NssfEv | M | 1 | 201 Created | This case | | entSubscripti | | | | represents a | | onCreatedData | | | | successful | | | | | | creation of | | | | | | subscription | | | | | | to the change | | | | | | of NSSAI | | | | | | availability | | | | | | information. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | | | | | | In the former | | | | | | case, the URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same NSSF or | | | | | | NSSF | | | | | | (service) | | | | | | set. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | | | | | | In the former | | | | | | case, the URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same NSSF or | | | | | | NSSF | | | | | | (service) | | | | | | set. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 403 Forbidden | The \"cause\" | | roblemDetails | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | error: | | | | | | | | | | | | - | | | | | | NO | | | | | | T_AUTHORIZED | | | | | | | | | | | | See table | | | | | | 6.2.7.3-1 for | | | | | | the | | | | | | description | | | | | | of these | | | | | | errors. | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | other than | | | | | | those | | | | | | specified in | | | | | | the table | | | | | | above also | | | | | | apply, with a | | | | | | P | | | | | | roblemDetails | | | | | | data type | | | | | | (see clause | | | | | | 5.2.7 of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.2.3.3.3.1-3: Headers supported by the 201 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 Contains the URI
of the newly created resource, according to the structure: {apiRoot}/nnssf-
nssaiavailability/v1/nssai-availability/subscriptions/{subscriptionId}
* * *
Table 6.2.3.3.3.1-4: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same NSSF | | | | | | or NSSF | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
Table 6.2.3.3.3.1-5: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same NSSF | | | | | | or NSSF | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
#### 6.2.3.4 Resource: Individual NSSAI Availability Notification
Subscriptions
##### 6.2.3.4.1 Description
This resource represents an Individual NSSAI Availability Notification
Subscriptions resources generated by the NSSF.
This resource is modelled with the Document resource archetype (see clause C.1
of 3GPP TS 29.501 [5]).
##### 6.2.3.4.2 Resource Definition
Resource URI: {apiRoot}/nnssf-nssaiavailability/{apiVersion}/nssai-
availability/subscriptions/{subscriptionId}
This resource shall support the resource URI variables defined in table
6.2.3.4.2-1.
Table 6.2.3.4.2-1: Resource URI variables for this resource
Name Data type Definition
* * *
apiRoot string See clause 6.2.1 apiVersion string See clause 6.2.1
subscriptionId string Represents the Identifier of the subscription.
##### 6.2.3.4.3 Resource Standard Methods
###### 6.2.3.4.3.1 DELETE
This method shall support the request data structures specified in table
6.2.3.4.3.1-1 and the response data structures and response codes specified in
table 6.2.3.4.3.1-2.
Table 6.2.3.4.3.1-1: Data structures supported by the DELETE Request Body on
this resource
* * *
Data type P Cardinality Description N/A
* * *
Table 6.2.3.4.3.1-2: Data structures supported by the DELETE Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | N/A | | | 204 NO | This case | | | | | Content | represents a | | | | | | successful | | | | | | deletion of | | | | | | the | | | | | | subscription. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | | | | | | In the former | | | | | | case, the URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same NSSF or | | | | | | NSSF | | | | | | (service) | | | | | | set. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | | | | | | In the former | | | | | | case, the URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same NSSF or | | | | | | NSSF | | | | | | (service) | | | | | | set. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | This | | roblemDetails | | | | represents | | | | | | the case when | | | | | | the | | | | | | subscription | | | | | | resource is | | | | | | unavailable. | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the | | | | | | DELETE method | | | | | | listed in | | | | | | Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | other than | | | | | | those | | | | | | specified in | | | | | | the table | | | | | | above also | | | | | | apply, with a | | | | | | P | | | | | | roblemDetails | | | | | | data type | | | | | | (see clause | | | | | | 5.2.7 of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.2.3.4.3.1-3: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same NSSF | | | | | | or NSSF | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
Table 6.2.3.3.3.1-4: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same NSSF | | | | | | or NSSF | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
###### 6.2.3.4.3.2 PATCH
This method shall support the request data structures specified in table
6.2.3.4.3.2-1 and the response data structures and response codes specified in
table 6.2.3.4.3.2-2.
Table 6.2.3.4.3.2-1: Data structures supported by the PATCH Request Body on
this resource
* * *
Data type P Cardinality Description PatchDocument M 1 This IE contains the
information regarding the JSON patch instructions for updating the
NssfEventSubscriptionCreateData.
* * *
Table 6.2.3.4.3.2-2: Data structures supported by the PATCH Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | NssfEv | M | 1 | 200 OK | This case | | entSubscripti | | | | represents a | | onCreatedData | | | | successful | | | | | | update of the | | | | | | subscription. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | | | | | | In the former | | | | | | case, the URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same NSSF or | | | | | | NSSF | | | | | | (service) | | | | | | set. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | | | | | | In the former | | | | | | case, the URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same NSSF or | | | | | | NSSF | | | | | | (service) | | | | | | set. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 404 Not Found | Indicates the | | roblemDetails | | | | modification | | | | | | of | | | | | | subscription | | | | | | has failed | | | | | | due to | | | | | | application | | | | | | error. | | | | | | | | | | | | The \"cause\" | | | | | | attribute may | | | | | | be used to | | | | | | indicate one | | | | | | of the | | | | | | following | | | | | | application | | | | | | errors: | | | | | | | | | | | | - | | | | | | SUBSCRIPTION | | | | | | _NOT_FOUND. | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the PATCH | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | other than | | | | | | those | | | | | | specified in | | | | | | the table | | | | | | above also | | | | | | apply, with a | | | | | | P | | | | | | roblemDetails | | | | | | data type | | | | | | (see clause | | | | | | 5.2.7 of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.2.3.4.3.2-3: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same NSSF | | | | | | or NSSF | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
Table 6.2.3.4.3.2-4: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same NSSF | | | | | | or NSSF | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
#### 6.2.3.5 Resource: NSSAI Availability Store
##### 6.2.3.5.1 Description
This resource represents a collection of NSSAI Availability resources.
This resource is modelled with the Store resource archetype (see clause C.1 of
3GPP TS 29.501 [5]).
##### 6.2.3.5.2 Resource Definition
Resource URI: {apiRoot}/nnssf-nssaiavailability/v1/nssai-availability
This resource shall support the resource URI variables defined in table
6.2.3.5.2-1.
Table 6.2.3.5.2-1: Resource URI variables for this resource
Name Data type Definition
* * *
apiRoot string See clause 6.2.1
##### 6.2.3.5.3 Resource Standard Methods
###### 6.2.3.5.3.1 OPTIONS
This method queries the communication options supported by the NSSF (see
clause 6.9 of 3GPP TS 29.500 [4]). This method shall support the URI query
parameters specified in table 6.1.3.5.3.1-1.
Table 6.2.3.5.3.1-1: URI query parameters supported by the OPTIONS method on
this resource
* * *
Name Data type P Cardinality Description n/a
* * *
This method shall support the request data structures specified in table
6.2.3.5.3.1-2 and the response data structures and response codes specified in
table 6.2.3.5.3.2-3.
Table 6.2.3.5.3.1-2: Data structures supported by the OPTIONS Request Body on
this resource
* * *
Data type P Cardinality Description n/a
* * *
Table 6.2.3.5.3.1-3: Data structures supported by the OPTIONS Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 200 OK | | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | | | | | | In the former | | | | | | case, the URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same NSSF or | | | | | | NSSF | | | | | | (service) | | | | | | set. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | | | | | | In the former | | | | | | case, the URI | | | | | | shall be an | | | | | | alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance | | | | | | within the | | | | | | same NSSF or | | | | | | NSSF | | | | | | (service) | | | | | | set. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 405 Method | | | roblemDetails | | | Not Allowed | | +---------------+---+-------------+---------------+---------------+ | P | O | 0..1 | 501 Not | | | roblemDetails | | | Implemented | | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the | | | | | | OPTIONS | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | other than | | | | | | those | | | | | | specified in | | | | | | the table | | | | | | above also | | | | | | apply, with a | | | | | | P | | | | | | roblemDetails | | | | | | data type | | | | | | (see clause | | | | | | 5.2.7 of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.2.3.5.3.1-4: Headers supported by the 200 Response Code on this
resource
* * *
Name Data type P Cardinality Description Accept-Encoding string O 0..1 Accept-
Encoding, described in IETF RFC 7694 [19]
* * *
Table 6.2.3.5.3.1-5: Headers supported by the 307 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same NSSF | | | | | | or NSSF | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
Table 6.2.3.5.3.1-6: Headers supported by the 308 Response Code on this
resource
+-----------------+-----------+---+-------------+-----------------+ | Name | Data type | P | Cardinality | Description | +-----------------+-----------+---+-------------+-----------------+ | Location | string | M | 1 | An alternative | | | | | | URI of the | | | | | | resource | | | | | | located on an | | | | | | alternative | | | | | | service | | | | | | instance within | | | | | | the same NSSF | | | | | | or NSSF | | | | | | (service) set. | | | | | | | | | | | | Or the same | | | | | | URI, if a | | | | | | request is | | | | | | redirected to | | | | | | the same target | | | | | | resource via a | | | | | | different SCP. | +-----------------+-----------+---+-------------+-----------------+ | 3gpp-S | string | O | 0..1 | Identifier of | | bi-Target-Nf-Id | | | | the target NF | | | | | | (service) | | | | | | instance ID | | | | | | towards which | | | | | | the request is | | | | | | redirected | +-----------------+-----------+---+-------------+-----------------+
### 6.2.4 Custom Operations without associated resources
There are no custom operations without associated resources for the
Nnssf_NSSAIAvailability service in this version of the API.
### 6.2.5 Notifications
#### 6.2.5.1 General
This clause specifies the notifications provided by the
Nnssf_NSSAIAvailability service.
Table 6.2.5.1-1: Notifications overview
+----------------+----------------+----------------+----------------+ | Notification | Callback URI | HTTP method or | Description | | | | custom | | | | | operation | (service | | | | | operation) | +================+================+================+================+ | NSSAI | {nfNssaiAv | POST | | | Availability | ailabilityUri} | | | | Notification | | | | +----------------+----------------+----------------+----------------+
#### 6.2.5.2 NSSAI Availability Notification
##### 6.2.5.2.1 Description
If the NF Service Consumer (e.g. AMF) has provided the callback URI for
getting notified about the NSSAI availability information, the NSSF shall
notify the NF Service Consumer whenever the NSSAI availability information is
updated.
##### 6.2.5.2.2 Notification Definition
Callback URI: {nfNssaiAvailabilityUri}
This callback URI is provided by the NF Service Consumer (e.g. AMF) during
NSSAI Availability Information update invoked by the NF Service Consumer.
Table 6.2.5.2.2-1: Resources and methods overview
Resource name Callback URI HTTP method or custom operation Description
* * *
NSSAI Availability Notification Callback {nfNssaiAvailabilityUri} POST The
NSSF uses this callback URI to Update the AMF with any S-NSSAIs restricted per
TA in the serving PLMN of the UE.
##### 6.2.5.2.3 Notification Standard Methods
###### 6.2.5.2.3.1 POST
This method shall support the request data structures specified in table
6.2.5.2.3.1-1 and the response data structures and response codes specified in
table 6.2.5.2.3.1-2.
Table 6.2.5.2.3.1-1: Data structures supported by the POST Request Body on
this resource
* * *
Data type P Cardinality Description NssfEventNotification M 1 Representation
of the data to be sent to the NF service consumer (e.g. AMF) to update NSSAI
availability information, authorized by the NSSF in the serving PLMN.
* * *
Table 6.2.5.2.3.1-2: Data structures supported by the POST Response Body on
this resource
+---------------+---+-------------+---------------+---------------+ | Data type | P | Cardinality | Response | Description | | | | | | | | | | | codes | | +---------------+---+-------------+---------------+---------------+ | n/a | | | 204 No | This case | | | | | Content | represents a | | | | | | successful | | | | | | update of the | | | | | | NF service | | | | | | consumer | | | | | | (e.g. | | | | | | AMF)with | | | | | | NSSAI | | | | | | availability | | | | | | information. | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 307 Temporary | Temporary | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | | | | | | In the former | | | | | | case, the URI | | | | | | shall be an | | | | | | URI pointing | | | | | | to the | | | | | | endpoint of | | | | | | another NF | | | | | | service | | | | | | consumer to | | | | | | which the | | | | | | notification | | | | | | should be | | | | | | sent. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | Red | O | 0..1 | 308 Permanent | Permanent | | irectResponse | | | Redirect | redirection. | | | | | | The response | | | | | | shall include | | | | | | a Location | | | | | | header field | | | | | | containing a | | | | | | different | | | | | | URI, or the | | | | | | same URI if | | | | | | this is a | | | | | | redirection | | | | | | triggered by | | | | | | an SCP to the | | | | | | same target | | | | | | resource via | | | | | | another SCP. | | | | | | In the former | | | | | | case, the URI | | | | | | shall be an | | | | | | URI pointing | | | | | | to the | | | | | | endpoint of | | | | | | another NF | | | | | | service | | | | | | consumer to | | | | | | which the | | | | | | notification | | | | | | should be | | | | | | sent. | | | | | | | | | | | | (NOTE 2) | +---------------+---+-------------+---------------+---------------+ | NOTE 1: The | | | | | | mandatory | | | | | | HTTP error | | | | | | status codes | | | | | | for the POST | | | | | | method listed | | | | | | in Table | | | | | | 5.2.7.1-1 of | | | | | | 3GPP TS | | | | | | 29.500 [4] | | | | | | other than | | | | | | those | | | | | | specified in | | | | | | the table | | | | | | above also | | | | | | apply, with a | | | | | | P | | | | | | roblemDetails | | | | | | data type | | | | | | (see clause | | | | | | 5.2.7 of | | | | | | 3GPP TS 2 | | | | | | 9.500 [4]). | | | | | | | | | | | | NOTE 2: | | | | | | Red | | | | | | irectResponse | | | | | | may be | | | | | | inserted by | | | | | | an SCP, see | | | | | | cl | | | | | | ause 6.10.9.1 | | | | | | of | | | | | | 3GPP TS | | | | | | 29.500 [4]. | | | | | +---------------+---+-------------+---------------+---------------+
Table 6.2.5.2.3.1-3: Headers supported by the 307 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 A URI pointing to
the endpoint of NF service consumer to which the notification should be sent
3gpp-Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF (service)
instance ID towards which the request is redirected
* * *
Table 6.2.5.2.3.1-4: Headers supported by the 308 Response Code on this
resource
* * *
Name Data type P Cardinality Description Location string M 1 A URI pointing to
the endpoint of NF service consumer to which the notification should be sent
3gpp-Sbi-Target-Nf-Id string O 0..1 Identifier of the target NF (service)
instance ID towards which the request is redirected
* * *
### 6.2.6 Data Model
#### 6.2.6.1 General
This clause specifies the application data model supported by the API.
Table 6.2.6.1-1 specifies the data types defined for the
Nnssf_NSSAIAvailability service based interface protocol.
Table 6.2.6.1-1: Nnssf_NSSAIAvailability specific Data Types
Data type Clause defined Description
* * *
NssaiAvailabilityInfo 6.2.6.2.2 This contains the Nssai availability
information requested by the AMF. SupportedNssaiAvailabilityData 6.2.6.2.3
This contains the Nssai availability data information per TA supported by the
AMF. AuthorizedNssaiAvailabilityData 6.2.6.2.4 This contains the Nssai
availability data information per TA authorized by the NSSF RestrictedSnssai
6.2.6.2.5 This contains the restricted SNssai information per PLMN.
AuthorizedNssaiAvailabilityInfo 6.2.6.2.6 This contains the Nssai availability
data information authorized by the NSSF PatchDocument 6.2.6.2.7 This contains
the JSON Patch instructions for updating the Nssai availability data
information at the NSSF. NssfEventSubscriptionCreateData 6.2.6.2.8 This
contains the information for event subscription.
NssfEventSubscriptionCreatedData 6.2.6.2.9 This contains the information for
event subscription. NssfEventNotification 6.2.6.2.10 This contains the
information for created event subscription. NssfEventType 6.2.6.3.3
Table 6.2.6.1-2 specifies data types re-used by the Nnssf service based
interface protocol from other specifications.
Table 6.2.6.1-2: Nnssf re-used Data Types
Data type Reference Comments
* * *
SupportedFeatures 3GPP TS 29.571 [7] Used to negotiate the applicability of
the optional features defined in table 6.2.8-1. Snssai 3GPP TS 29.571 [7]  
PatchItem 3GPP TS 29.571 [7] Identifies the JSON Patch instructions DateTime
3GPP TS 29.571 [7]  
RedirectResponse 3GPP TS 29.571 [7]  
TaiRange 3GPP TS 29.510 [13]
#### 6.2.6.2 Structured data types
##### 6.2.6.2.1 Introduction
This clause defines the structures to be used in resource representations.
##### 6.2.6.2.2 Type: NssaiAvailabilityInfo
Table 6.2.6.2.2-1: Definition of type NssaiAvailabilityInfo
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | supp | array(Suppo | M | 1..N | This IE shall | | ortedNssaiAva | rtedNssaiAvai | | | contain the | | ilabilityData | labilityData) | | | information | | | | | | regarding the | | | | | | S-NSSAIs the | | | | | | NF service | | | | | | consumer | | | | | | (e.g. AMF) | | | | | | and the 5G-AN | | | | | | supports per | | | | | | TA. | +---------------+---------------+---+-------------+---------------+ | supp | Supp | C | 0..1 | This IE shall | | ortedFeatures | ortedFeatures | | | be present if | | | | | | at least one | | | | | | optional | | | | | | feature | | | | | | defined in | | | | | | clause 6.2.8 | | | | | | is supported | +---------------+---------------+---+-------------+---------------+ | amfSetId | string | O | 0..1 | This IE may | | | | | | be included | | | | | | to indicate | | | | | | the AMF set | | | | | | identifier | | | | | | for the AMFs | | | | | | serving the | | | | | | TAIs where | | | | | | the NSSAI is | | | | | | available. | | | | | | | | | | | | When present, | | | | | | this IE shall | | | | | | be | | | | | | constructed | | | | | | from PLMN-ID | | | | | | (i.e. three | | | | | | decimal | | | | | | digits MCC | | | | | | and two or | | | | | | three decimal | | | | | | digits MNC), | | | | | | AMF Region Id | | | | | | (8 bit), and | | | | | | AMF Set Id | | | | | | (10 bit). | | | | | | | | | | | | Pattern: | | | | | | \'\^[0 | | | | | | -9]{3}-[0-9 | | | | | | ]{2-3}-[A-F | | | | | | a-f0-9]{2}-\ | | | | | | [0-3][A-Fa- | | | | | | f0-9]{2}\$\' | +---------------+---------------+---+-------------+---------------+
##### 6.2.6.2.3 Type: SupportedNssaiAvailabilityData
Table 6.2.6.2.3-1: Definition of type SupportedNssaiAvailabilityData
* * *
Attribute name Data type P Cardinality Description Applicability
* * *
tai Tai M 1 This IE shall contain the identifier of the Tracking Area
supportedSnssaiList array(ExtSnssai) M 1..N This IE shall contain the
S-NSSAI(s) supported by the AMF for the TA.
taiList array(Tai) O 1..N When present, this IE shall contain additional TAIs
with the same list of supported S-NSSAIs.\ ONSSAI (NOTE)
taiRangeList array(TaiRange) O 1..N When present, this IE shall contain
range(s) of TAIs with the same list of supported S-NSSAIs.\ ONSSAI (NOTE)
NOTE: The taiList IE shall not include the TAI contained in the tai IE. The
taiRangeList IE may encompass the TAI contained in the tai IE.
* * *
##### 6.2.6.2.4 Type: AuthorizedNssaiAvailabilityData
Table 6.2.6.2.4-1: Definition of type AuthorizedNssaiAvailabilityData
* * *
Attribute name Data type P Cardinality Description Applicability
* * *
tai Tai M 1 This IE shall contain the identifier of the Tracking Area.
supportedSnssaiList array(ExtSnssai) M 1..N This IE shall contain the
S-NSSAI(s) supported by the AMF and 5G-AN and authorized by the NSSF for the
TA.
restrictedSnssaiList array(RestrictedSnssai) O 1..N This IE may contain the
restricted S-NSSAI(s) per PLMN for the TA. If the restricted S-NSSAI is not
present, the S-NSSAIs indicated in supportedSnssaiList are not restricted in
this TA for any PLMN. When present, this IE shall be included only by the
NSSF.
taiList array(Tai) O 1..N When present, this IE shall contain additional TAIs
with the same lists of supported and restricted S-NSSAIs.\ ONSSAI (NOTE)
taiRangeList array(TaiRange) O 1..N When present, this IE shall contain
range(s) of TAIs with the same lists of supported and restricted S-NSSAIs.\
ONSSAI (NOTE)
NOTE: The taiList IE shall not include the TAI contained in the tai IE. The
taiRangeList IE may encompass the TAI contained in the tai IE.
* * *
##### 6.2.6.2.5 Type: RestrictedSnssai
Table 6.2.6.2.5-1: Definition of type RestrictedSnssai
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | h | PlmnId | M | 1 | This IE | | | omePlmnId | | | | shall | | | | | | | contain | | | | | | | the home | | | | | | | PLMN ID | | | | | | | of the | | | | | | | PLMN with | | | | | | | which the | | | | | | | serving | | | | | | | network | | | | | | | has | | | | | | | roaming | | | | | | | a | | | | | | | greement. | | | | | | | | | | | | | | This IE | | | | | | | shall be | | | | | | | ignored | | | | | | | if the | | | | | | | roamingRe | | | | | | | striction | | | | | | | is set to | | | | | | | \"true\". | | +-----------+-----------+---+-----------+-----------+-----------+ | s | array(E | M | 1..N | This IE | | | NssaiList | xtSnssai) | | | shall | | | | | | | contain | | | | | | | the array | | | | | | | of | | | | | | | r | | | | | | | estricted | | | | | | | S-NSSAIs | | | | | | | for the | | | | | | | home PLMN | | | | | | | Id. | | +-----------+-----------+---+-----------+-----------+-----------+ | homeP | arra | O | 1..N | When | ONSSAI | | lmnIdList | y(PlmnId) | | | present, | | | | | | | this IE | | | | | | | shall | | | | | | | contain | | | | | | | a | | | | | | | dditional | | | | | | | home PLMN | | | | | | | IDs with | | | | | | | which the | | | | | | | serving | | | | | | | network | | | | | | | has | | | | | | | roaming | | | | | | | agreement | | | | | | | and with | | | | | | | the same | | | | | | | list of | | | | | | | r | | | | | | | estricted | | | | | | | S-NSSAIs. | | +-----------+-----------+---+-----------+-----------+-----------+ | roamingRe | boolean | O | 0..1 | When | ONSSAI | | striction | | | | present, | | | | | | | it shall | | | | | | | be set as | | | | | | | follows: | | | | | | | | | | | | | | > \- | | | | | | | > true: | | | | | | | > the | | | | | | | > list of | | | | | | | > r | | | | | | | estricted | | | | | | | > | | | | | | | S-NSSAIs | | | | | | | > are | | | | | | | > a | | | | | | | pplicable | | | | | | | > to all | | | | | | | > of the | | | | | | | > home | | | | | | | > PLMN | | | | | | | > IDs | | | | | | | > with | | | | | | | > which | | | | | | | > the | | | | | | | > serving | | | | | | | > network | | | | | | | > has | | | | | | | > roaming | | | | | | | > a | | | | | | | greement; | | | | | | | > | | | | | | | > \- | | | | | | | > false | | | | | | | > ( | | | | | | | default): | | | | | | | > the | | | | | | | > list of | | | | | | | > r | | | | | | | estricted | | | | | | | > | | | | | | | S-NSSAIs | | | | | | | > are | | | | | | | > a | | | | | | | pplicable | | | | | | | > to part | | | | | | | > of the | | | | | | | > home | | | | | | | > PLMN | | | | | | | > IDs | | | | | | | > with | | | | | | | > which | | | | | | | > the | | | | | | | > serving | | | | | | | > network | | | | | | | > has | | | | | | | > roaming | | | | | | | > | | | | | | | agreement | | | | | | | > as | | | | | | | > | | | | | | | included | | | | | | | > in the | | | | | | | > h | | | | | | | omePlmnId | | | | | | | > and | | | | | | | > homeP | | | | | | | lmnIdList | | | | | | | > IEs. | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.2.6.2.6 Type: AuthorizedNssaiAvailabilityInfo
Table 6.2.6.2.6 -1: Definition of type AuthorizedNssaiAvailabilityInfo
Attribute name Data type P Cardinality Description
* * *
authorizedNssaiAvailabilityData array(AuthorizedNssaiAvailabilityData) M 1..N
Contains the authorized NSSAI availability information. supportedFeatures
SupportedFeatures C 0..1 This IE shall be present if at least one optional
feature defined in clause 6.2.8 is supported
##### 6.2.6.2.7 Type: PatchDocument
Table 6.2.6.2.7-1: Definition of type PatchDocument
Attribute name Data type P Cardinality Description
* * *
N/A array(PatchItem) M 1..N An array of patch instructions to update the NSSAI
availability information or the NssfEventSubscriptionCreateData at the NSSF.
See 3GPP TS 29.571 [7].
##### 6.2.6.2.8 Type: NssfEventSubscriptionCreateData
Table 6.2.6.2.8-1: Definition of type NssfEventSubscriptionCreateData
+-----------+-----------+---+-----------+-----------+-----------+ | Attribute | Data type | P | Ca | De | Appl | | name | | | rdinality | scription | icability | +===========+===========+===+===========+===========+===========+ | nfNs | Uri | M | 1 | I | | | saiAvaila | | | | dentifies | | | bilityUri | | | | the | | | | | | | recipient | | | | | | | of | | | | | | | noti | | | | | | | fications | | | | | | | sent by | | | | | | | the NF | | | | | | | service | | | | | | | consumer | | | | | | | (e.g. | | | | | | | AMF) for | | | | | | | this | | | | | | | sub | | | | | | | scription | | +-----------+-----------+---+-----------+-----------+-----------+ | taiList | a | M | 0..N | I | | | | rray(Tai) | | | dentifies | | | | | | | the TAIs | | | | | | | supported | | | | | | | by the NF | | | | | | | service | | | | | | | consumer | | | | | | | (e.g. | | | | | | | AMF). | | | | | | | | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | event | Nssf | M | 1 | Describes | | | | EventType | | | the event | | | | | | | to be | | | | | | | s | | | | | | | ubscribed | | | | | | | for this | | | | | | | subs | | | | | | | cription. | | +-----------+-----------+---+-----------+-----------+-----------+ | expiry | DateTime | O | 0..1 | This IE | | | | | | | may be | | | | | | | included | | | | | | | by the NF | | | | | | | service | | | | | | | consumer. | | | | | | | When | | | | | | | present, | | | | | | | this IE | | | | | | | shall | | | | | | | represent | | | | | | | the | | | | | | | suggested | | | | | | | time | | | | | | | after | | | | | | | which the | | | | | | | sub | | | | | | | scription | | | | | | | becomes | | | | | | | invalid. | | +-----------+-----------+---+-----------+-----------+-----------+ | amfSetId | string | O | 0..1 | This IE | | | | | | | may be | | | | | | | included | | | | | | | to | | | | | | | identify | | | | | | | a | | | | | | | specific | | | | | | | AMF Set | | | | | | | for which | | | | | | | this | | | | | | | sub | | | | | | | scription | | | | | | | applies. | | | | | | | | | | | | | | When | | | | | | | present, | | | | | | | this IE | | | | | | | shall be | | | | | | | co | | | | | | | nstructed | | | | | | | from | | | | | | | PLMN-ID | | | | | | | (i.e. | | | | | | | three | | | | | | | decimal | | | | | | | digits | | | | | | | MCC and | | | | | | | two or | | | | | | | three | | | | | | | decimal | | | | | | | digits | | | | | | | MNC), AMF | | | | | | | Region Id | | | | | | | (8 bit), | | | | | | | and AMF | | | | | | | Set Id | | | | | | | (10 bit). | | | | | | | | | | | | | | Pattern: | | | | | | | \'\^[0-9 | | | | | | | ]{3}-[0 | | | | | | | -9]{2-3} | | | | | | | -[A-Fa-f | | | | | | | 0-9]{2}- | | | | | | | [0-3][ | | | | | | | A-Fa-f0-9 | | | | | | | ]{2}\$\' | | +-----------+-----------+---+-----------+-----------+-----------+ | tai | array( | O | 1..N | I | ONSSAI | | RangeList | TaiRange) | | | dentifies | | | | | | | a list of | | | | | | | TAI | | | | | | | ranges | | | | | | | supported | | | | | | | by the NF | | | | | | | service | | | | | | | consumer | | | | | | | (e.g. | | | | | | | AMF). | | | | | | | | | | | | | | The NF | | | | | | | service | | | | | | | consumer | | | | | | | shall | | | | | | | only | | | | | | | include | | | | | | | this IE | | | | | | | when it | | | | | | | knows | | | | | | | that the | | | | | | | NSSF | | | | | | | supports | | | | | | | the | | | | | | | \ | | | | | | | "ONSSAI\" | | | | | | | feature. | | | | | | | | | | | | | | (NOTE) | | +-----------+-----------+---+-----------+-----------+-----------+ | supporte | Supporte | C | 0..1 | This IE | | | dFeatures | dFeatures | | | shall be | | | | | | | present | | | | | | | if at | | | | | | | least one | | | | | | | optional | | | | | | | feature | | | | | | | defined | | | | | | | in clause | | | | | | | 6.2.8 is | | | | | | | s | | | | | | | upported. | | +-----------+-----------+---+-----------+-----------+-----------+ | NOTE: The | | | | | | | taiList | | | | | | | attribute | | | | | | | shall | | | | | | | only be | | | | | | | set to an | | | | | | | empty | | | | | | | array if | | | | | | | the NSSF | | | | | | | supports | | | | | | | the | | | | | | | \ | | | | | | | "ONSSAI\" | | | | | | | feature. | | | | | | | A NF | | | | | | | service | | | | | | | consumer | | | | | | | (e.g. | | | | | | | AMF) may | | | | | | | provide | | | | | | | both | | | | | | | tai | | | | | | | RangeList | | | | | | | and | | | | | | | taiList | | | | | | | at | | | | | | | tributes, | | | | | | | to carry | | | | | | | i | | | | | | | ndividual | | | | | | | TAI(s) in | | | | | | | the | | | | | | | taiList | | | | | | | attribute | | | | | | | and | | | | | | | ranges of | | | | | | | TAIs in | | | | | | | the | | | | | | | tai | | | | | | | RangeList | | | | | | | a | | | | | | | ttribute. | | | | | | +-----------+-----------+---+-----------+-----------+-----------+
##### 6.2.6.2.9 Type: NssfEventSubscriptionCreatedData
Table 6.2.6.2.9-1: Definition of type NssfEventSubscriptionCreatedData
Attribute name Data type P Cardinality Description
* * *
subscriptionId string M 1 Identifies the subscription Id for the created
subscription. expiry DateTime C 0..1 This IE shall be included, if, based on
operator policy and taking into account the expiry time included in the
request, the NSSF needs to include an expiry time. When present, it represents
the time after which the subscribed event shall stop generating report and the
subscription becomes invalid. Upon reaching this expiry time the NF service
consumer shall delete the representation of the subscription it may have.
authorizedNssaiAvailabilityData array(AuthorizedNssaiAvailabilityData) O 1..N
If the authorized NSSAI availability (i.e. S-NSSAIs available per TA
(unrestricted) and any S-NSSAIs restricted per PLMN in that TA in the serving
PLMN of the UE) is available, the NSSF may include this IE. supportedFeatures
SupportedFeatures C 0..1 This IE shall be present if at least one optional
feature defined in clause 6.2.8 is supported.
##### 6.2.6.2.10 Type: NssfEventNotification
Table 6.2.6.2.10-1: Definition of type NssfEventNotification
+---------------+---------------+---+-------------+---------------+ | Attribute | Data type | P | Cardinality | Description | | name | | | | | +===============+===============+===+=============+===============+ | s | string | M | 1 | Indicates | | ubscriptionId | | | | which | | | | | | subscription | | | | | | generated | | | | | | event | | | | | | n | | | | | | otificaiton.\ | | | | | | \ | | | | | | This | | | | | | parameter is | | | | | | generated by | | | | | | NSSF and | | | | | | returned in | | | | | | \"Location\" | | | | | | header in | | | | | | HTTP | | | | | | responses. | | | | | | This can be | | | | | | useful if a | | | | | | NF use a | | | | | | common | | | | | | call-back URI | | | | | | for multiple | | | | | | s | | | | | | ubscriptions. | +---------------+---------------+---+-------------+---------------+ | autho | array(Author | M | 0..N | This IE shall | | rizedNssaiAva | izedNssaiAvai | | | contain the | | ilabilityData | labilityData) | | | authorized | | | | | | NSSAI | | | | | | availability | | | | | | information | | | | | | for all TAs | | | | | | the AMF | | | | | | subscribed | | | | | | to. Each | | | | | | element shall | | | | | | contain the | | | | | | current | | | | | | status of the | | | | | | list of | | | | | | S-NSSAI | | | | | | available in | | | | | | a TA and the | | | | | | list of | | | | | | S-NSSAI | | | | | | restricted | | | | | | per PLMN in | | | | | | that TA. | | | | | | | | | | | | The NF | | | | | | Service | | | | | | Consumer | | | | | | shall replace | | | | | | any | | | | | | autho | | | | | | rizedNssaiAva | | | | | | ilabilityData | | | | | | received | | | | | | earlier by | | | | | | the new | | | | | | autho | | | | | | rizedNssaiAva | | | | | | ilabilityData | | | | | | received in | | | | | | the | | | | | | notification. | | | | | | | | | | | | When no | | | | | | supported | | | | | | S-NSSAIs | | | | | | authorized by | | | | | | the NSSF for | | | | | | all TAs, this | | | | | | IE shall | | | | | | contain an | | | | | | empty array | | | | | | indicating | | | | | | Authorized | | | | | | NSSAI | | | | | | Availability | | | | | | information | | | | | | is empty. | | | | | | When received | | | | | | this IE with | | | | | | empty array, | | | | | | the NF | | | | | | Service | | | | | | Consumer | | | | | | shall remove | | | | | | any locally | | | | | | stored | | | | | | autho | | | | | | rizedNssaiAva | | | | | | ilabilityData | | | | | | previously | | | | | | received from | | | | | | NSSF. (NOTE) | +---------------+---------------+---+-------------+---------------+ | NOTE: NSSF | | | | | | shall only | | | | | | send | | | | | | notificaiton | | | | | | with empty | | | | | | array to NF | | | | | | Service | | | | | | Consumer | | | | | | previously | | | | | | indicated | | | | | | support of | | | | | | \"EANAN\" | | | | | | feature, when | | | | | | there is no | | | | | | supported | | | | | | S-NSSAIs | | | | | | authorized by | | | | | | the NSSF for | | | | | | all TAs. | | | | | +---------------+---------------+---+-------------+---------------+
#### 6.2.6.3 Simple data types and enumerations
##### 6.2.6.3.1 Introduction
This clause defines simple data types and enumerations that can be referenced
from data structures defined in the previous clauses.
##### 6.2.6.3.2 Simple data types
The simple data types defined in table 6.2.6.3.2-1 shall be supported.
Table 6.2.6.3.2-1: Simple data types
* * *
Type Name Type Definition Description \
* * *
##### 6.2.6.3.3 Enumeration: NssfEventType
Table 6.2.6.3.3-1: Enumeration NssfEventType
Enumeration value Description
* * *
**\"SNSSAI_STATUS_CHANGE_REPORT\"** A NF subscribes to this event to receive
the status change about the current S-NSSAI available (i.e unrestricted) per
TA and the status change about the list of restricted S-NSSAI per TA and per
PLMN in the serving PLMN of the UE.
#### 6.2.6.4 Binary data
There is no binary data used for the Nnssf_NSSAIAvailability service in this
version of the API.
### 6.2.7 Error Handling
#### 6.2.7.1 General
HTTP error handling shall be supported as specified in clause 5.2.4 of 3GPP TS
29.500 [4].
#### 6.2.7.2 Protocol Errors
Protocol Error Handling shall be supported as specified in clause 5.2.7.2 of
3GPP TS 29.500 [4].
#### 6.2.7.3 Application Errors
_The common application errors defined in the Table 5.2.7.2-1 in 3GPP TS
29.500 [4] may also be used for the Nnssf_NSSAIAvailability service._ The
following application errors listed in Table 6.1.7.3-1 are specific for the
_Nnssf_NSSAIAvailability_ service.
Table 6.2.7.3-1: Application errors
Application Error HTTP status code Description
* * *
SNSSAI_NOT_SUPPORTED 403 Forbidden The request is rejected due to the SNSSAI
provided in the request is not supported in the PLMN. NOT_AUTHORIZED 403
Forbidden The request is rejected due to the NF service consumer is not
authorized to update the NSSAI availability information, or subscribe for the
NSSAI availability information notification. RESOURCE_NOT_FOUND 404 Not Found
The request is rejected due to the NF service consumer is authorized, but the
resource related to the NF Id for which the NSSAI availability information is
updated or deleted is unavailable. SUBSCRIPTION_NOT_FOUND 404 Not Found
Indicates the modification of subscription has failed due to an application
error when the subscription is not found in the NSSF.
### 6.2.8 Feature negotiation
The feature negotiation mechanism specified in clause 6.6 of 3GPP TS 29.500
[4] shall be used to negotiate the optional features applicable between the
NSSF and the NF Service Consumer, for the Nnssf_NSSAIAvailability service, if
any.
The NF Service Consumer shall indicate the optional features it supports for
the Nnssf_NSSAIAvailability service, if any, by including the
supportedFeatures attribute in the HTTP PUT request when requesting the NSSF
to update the NSSAI Availability information.
The NSSF shall determine the supported features for the updated NSSAI
Availability information resource as specified in clause 6.6 of 3GPP TS 29.500
[4] and shall indicate the supported features by including the
supportedFeatures attribute in the authorized NSSAI availability information
it returns in the HTTP response.
The syntax of the supportedFeatures attribute is defined in clause 5.2.2 of
3GPP TS 29.571 [7].
The following features are defined for the Nnssf_NSSAIAvailability service.
Table 6.2.8-1: Features of supportedFeatures attribute used by
Nnssf_NSSAIAvailability service
+-------------------------+---------+-----+-------------------------+ | Feature Number | Feature | M/O | Description | +-------------------------+---------+-----+-------------------------+ | 1 | ONSSAI | O | Optimized NSSAI | | | | | Availability Data | | | | | encoding | | | | | | | | | | When this feature is | | | | | supported: | | | | | | | | | | - NSSAI Availability | | | | | data may be signalled | | | | | per list or range(s) of | | | | | TAIs (see | | | | | clauses 6.2.6.2.3 and | | | | | 6.2.6.2.4); and | | | | | | | | | | - RestrictedSnssai may | | | | | encode a list of Home | | | | | PLMN IDs or may be | | | | | applicable to all of | | | | | the Home PLMN IDs (see | | | | | clause 6.2.6.2.5). | | | | | | | | | | - NSSF event | | | | | subscription may encode | | | | | a list of TAI ranges | | | | | (see clause 6.2.6.2.8). | +-------------------------+---------+-----+-------------------------+ | 2 | SUMOD | O | Subscription | | | | | Modification in | | | | | Subscribe Service | | | | | Operation | | | | | | | | | | When this feature is | | | | | supported, the | | | | | subscription of NSSAI | | | | | availability | | | | | information is | | | | | supported to be | | | | | modified (see clause | | | | | 5.3.2.3.2). | +-------------------------+---------+-----+-------------------------+ | 3 | EANAN | O | Empty Authorized NSSAI | | | | | Availability | | | | | Notification | | | | | | | | | | A NSSF supporting this | | | | | feature shall send a | | | | | notification to NF | | | | | consumer (as | | | | | subscriber) with empty | | | | | array of Authorized | | | | | NSSAI Availability | | | | | Data, when no supported | | | | | NSSAI Authorized by the | | | | | NSSF for all TAs after | | | | | latest update and the | | | | | NF consumer indicated | | | | | support of this | | | | | feature. | | | | | | | | | | A NF Consumer support | | | | | this feature shall | | | | | accept empty array of | | | | | Authorized NSSAI | | | | | Availability Data in a | | | | | notification from NSSF | | | | | and delete locally | | | | | stored Authorized NSSAI | | | | | Availability Data | | | | | previously received. | +-------------------------+---------+-----+-------------------------+ | 4 | ES3XX | M | Extended Support of | | | | | HTTP 307/308 | | | | | redirection | | | | | | | | | | An NF Service Consumer | | | | | (e.g. AMF) that | | | | | supports this feature | | | | | shall support handling | | | | | of HTTP 307/308 | | | | | redirection for any | | | | | service operation of | | | | | the | | | | | N | | | | | nssf_NSSAIAvailability | | | | | service. An NF Service | | | | | Consumer that does not | | | | | support this feature | | | | | does only support HTTP | | | | | redirection as | | | | | specified for 3GPP | | | | | Release 15. | +-------------------------+---------+-----+-------------------------+ | Feature number: The | | | | | order number of the | | | | | feature within the | | | | | s**upportedFeatures | | | | | attribute (starting | | | | | with 1).** | | | | | | | | | | **Feature: A short name | | | | | that can be used to | | | | | refer to the bit and to | | | | | the feature.** | | | | | | | | | | **M/O: Defines if the | | | | | implementation of the | | | | | feature is mandatory | | | | | (** \"**M** \"**) or | | | | | optional | | | | | (** \"**O** \"**).** | | | | | | | | | | Description: A clear | | | | | textual description of | | | | | the feature. | | | | +-------------------------+---------+-----+-------------------------+
### 6.2.9 Security
As indicated in 3GPP TS 33.501 [11] and 3GPP TS 29.500 [4], the access to the
Nnssf_NSSAIAvailability API may be authorized by means of the OAuth2 protocol
(see IETF RFC 6749 [12]), based on local configuration, using the \"Client
Credentials\" authorization grant, where the NRF (see 3GPP TS 29.510 [13])
plays the role of the authorization server.
If OAuth2 is used, an NF Service Consumer, prior to consuming services offered
by the Nnssf_NSSAIAvailability API, shall obtain a \"token\" from the
authorization server, by invoking the Access Token Request service, as
described in 3GPP TS 29.510 [13], clause 5.4.2.2.
NOTE: When multiple NRFs are deployed in a network, the NRF used as
authorization server is the same NRF that the NF Service Consumer used for
discovering the Nnssf_NSSAIAvailability service.
The Nnssf_NSSAIAvailability API does not define any scopes for OAuth2
authorization.
### 6.2.10 HTTP redirection
An HTTP request may be redirected to a different NSSF service instance, within
the same NSSF or a different NSSF of an NSSF set, e.g. when an NSSF service
instance is part of an NSSF (service) set or when using indirect
communications (see 3GPP TS 29.500 [4]). See the ES3XX feature in clause
6.2.8.
An SCP that reselects a different NSSF producer instance will return the NF
Instance ID of the new NSSF producer instance in the 3gpp-Sbi-Producer-Id
header, as specified in clause 6.10.3.4 of 3GPP TS 29.500 [4].
If an NSSF within an NSSF set redirects a service request to a different NSSF
of the set using a 307 Temporary Redirect or 308 Permanent Redirect status
code, the identity of the new NSSF towards which the service request is
redirected shall be indicated in the 3gpp-Sbi-Target-Nf-Id header of the 307
Temporary Redirect or 308 Permanent Redirect response as specified in clause
6.10.9.1 of 3GPP TS 29.500 [4].
###### ## Annex A (normative): OpenAPI specification
## A.1 General
This Annex specifies the formal definition of the Nnssf_NSSelection service.
It consists of OpenAPI 3.0.0 specifications, in YAML format.
This Annex takes precedence when being discrepant to other parts of the
specification with respect to the encoding of information elements and methods
within the API(s).
NOTE: The semantics and procedures, as well as conditions, e.g. for the
applicability and allowed combinations of attributes or values, not expressed
in the OpenAPI definitions but defined in other parts of the specification
also apply.
Informative copies of the OpenAPI specification files contained in this 3GPP
Technical Specification are available on a Git-based repository that uses the
GitLab software version control system (see 3GPP TS 29.501 [5] clause 5.3.1
and 3GPP TR 21.900 [7] clause 5B).
## A.2 Nnssf_NSSelection API
openapi: 3.0.0
info:
version: \'2.1.2\'
title: \'NSSF NS Selection\'
description: \|
NSSF Network Slice Selection Service.
Â© 2021, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
security:
\- {}
\- oAuth2ClientCredentials:
\- nnssf-nsselection
servers:
\- url: \'{apiRoot}/nnssf-nsselection/v2\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 4.4 of 3GPP TS 29.501
externalDocs:
description: 3GPP TS 29.531 V16.7.0; 5G System; Network Slice Selection
Services; Stage 3
url: http://www.3gpp.org/ftp/Specs/archive/29_series/29.531/
paths:
/network-slice-information:
get:
summary: Retrieve the Network Slice Selection Information
tags:
\- Network Slice Information (Document)
operationId: NSSelectionGet
parameters:
\- name: nf-type
in: query
description: NF type of the NF service consumer
required: true
schema:
\$ref: \'TS29510_Nnrf_NFManagement.yaml#/components/schemas/NFType\'
\- name: nf-id
in: query
description: NF Instance ID of the NF service consumer
required: true
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NfInstanceId\'
\- name: slice-info-request-for-registration
in: query
description: Requested network slice information during Registration procedure
content:
application/json:
schema:
\$ref: \'#/components/schemas/SliceInfoForRegistration\'
\- name: slice-info-request-for-pdu-session
in: query
description: Requested network slice information during PDU session
establishment procedure
content:
application/json:
schema:
\$ref: \'#/components/schemas/SliceInfoForPDUSession\'
\- name: slice-info-request-for-ue-cu
in: query
description: Requested network slice information during UE confuguration
update procedure
content:
application/json:
schema:
\$ref: \'#/components/schemas/SliceInfoForUEConfigurationUpdate\'
\- name: home-plmn-id
in: query
description: PLMN ID of the HPLMN
content:
application/json:
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PlmnId\'
\- name: tai
in: query
description: TAI of the UE
content:
application/json:
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Tai\'
\- name: supported-features
in: query
description: Features required to be supported by the NFs in the target slice
instance
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
responses:
\'200\':
description: OK (Successful Network Slice Selection)
content:
application/json:
schema:
\$ref: \'#/components/schemas/AuthorizedNetworkSliceInfo\'
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'406\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/406\'
\'414\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/414\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
description: Unexpected error
components:
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{nrfApiRoot}/oauth2/token\'
scopes:
nnssf-nsselection: Access to the Nnssf_NSSelection API
schemas:
AuthorizedNetworkSliceInfo:
type: object
properties:
allowedNssaiList:
type: array
items:
\$ref: \'#/components/schemas/AllowedNssai\'
minItems: 1
configuredNssai:
type: array
items:
\$ref: \'#/components/schemas/ConfiguredSnssai\'
minItems: 1
targetAmfSet:
type: string
pattern: \'\^[0-9]{3}-[0-9]{2-3}-[A-Fa-f0-9]{2}-[0-3][A-Fa-f0-9]{2}\$\'
candidateAmfList:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NfInstanceId\'
minItems: 1
rejectedNssaiInPlmn:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
minItems: 1
rejectedNssaiInTa:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
minItems: 1
nsiInformation:
\$ref: \'#/components/schemas/NsiInformation\'
supportedFeatures:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
nrfAmfSet:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
nrfAmfSetNfMgtUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
nrfAmfSetAccessTokenUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
targetAmfServiceSet:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NfServiceSetId\'
SubscribedSnssai:
type: object
required:
\- subscribedSnssai
properties:
subscribedSnssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
defaultIndication:
type: boolean
AllowedSnssai:
type: object
required:
\- allowedSnssai
properties:
allowedSnssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
nsiInformationList:
type: array
items:
\$ref: \'#/components/schemas/NsiInformation\'
minItems: 1
mappedHomeSnssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
AllowedNssai:
type: object
required:
\- allowedSnssaiList
\- accessType
properties:
allowedSnssaiList:
type: array
items:
\$ref: \'#/components/schemas/AllowedSnssai\'
minItems: 1
accessType:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/AccessType\'
NsiInformation:
type: object
required:
\- nrfId
properties:
nrfId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
nsiId:
\$ref: \'#/components/schemas/NsiId\'
nrfNfMgtUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
nrfAccessTokenUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
MappingOfSnssai:
type: object
required:
\- servingSnssai
\- homeSnssai
properties:
servingSnssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
homeSnssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
SliceInfoForRegistration:
type: object
properties:
subscribedNssai:
type: array
items:
\$ref: \'#/components/schemas/SubscribedSnssai\'
minItems: 1
allowedNssaiCurrentAccess:
\$ref: \'#/components/schemas/AllowedNssai\'
allowedNssaiOtherAccess:
\$ref: \'#/components/schemas/AllowedNssai\'
sNssaiForMapping:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
minItems: 1
requestedNssai:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
minItems: 1
defaultConfiguredSnssaiInd:
type: boolean
mappingOfNssai:
type: array
items:
\$ref: \'#/components/schemas/MappingOfSnssai\'
minItems: 1
requestMapping:
type: boolean
SliceInfoForPDUSession:
type: object
required:
\- sNssai
\- roamingIndication
properties:
sNssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
roamingIndication:
\$ref: \'#/components/schemas/RoamingIndication\'
homeSnssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
SliceInfoForUEConfigurationUpdate:
type: object
properties:
subscribedNssai:
type: array
items:
\$ref: \'#/components/schemas/SubscribedSnssai\'
minItems: 1
allowedNssaiCurrentAccess:
\$ref: \'#/components/schemas/AllowedNssai\'
allowedNssaiOtherAccess:
\$ref: \'#/components/schemas/AllowedNssai\'
defaultConfiguredSnssaiInd:
type: boolean
requestedNssai:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
minItems: 1
mappingOfNssai:
type: array
items:
\$ref: \'#/components/schemas/MappingOfSnssai\'
minItems: 1
ConfiguredSnssai:
type: object
required:
\- configuredSnssai
properties:
configuredSnssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
mappedHomeSnssai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Snssai\'
RoamingIndication:
anyOf:
\- type: string
enum:
\- NON_ROAMING
\- LOCAL_BREAKOUT
\- HOME_ROUTED_ROAMING
\- type: string
NsiId:
type: string
## A.3 Nnssf_NSSAIAvailability API
openapi: 3.0.0
info:
version: \'1.1.4\'
title: \'NSSF NSSAI Availability\'
description: \|
NSSF NSSAI Availability Service.
Â© 2021, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA,
TTC).
All rights reserved.
security:
\- {}
\- oAuth2ClientCredentials:
\- nnssf-nssaiavailability
servers:
\- url: \'{apiRoot}/nnssf-nssaiavailability/v1\'
variables:
apiRoot:
default: https://example.com
description: apiRoot as defined in clause 4.4 of 3GPP TS 29.501
externalDocs:
description: 3GPP TS 29.531 V16.7.0; 5G System; Network Slice Selection
Services; Stage 3
url: http://www.3gpp.org/ftp/Specs/archive/29_series/29.531/
paths:
/nssai-availability/{nfId}:
put:
summary: Updates/replaces the NSSF with the S-NSSAIs the NF service consumer
(e.g AMF)supports per TA
tags:
\- NF Instance ID (Document)
operationId: NSSAIAvailabilityPut
parameters:
\- name: nfId
in: path
description: Identifier of the NF service consumer instance
required: true
schema:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/NfInstanceId\'
\- name: Content-Encoding
in: header
description: Content-Encoding, described in IETF RFC 7231
schema:
type: string
\- name: Accept-Encoding
in: header
description: Accept-Encoding, described in IETF RFC 7231
schema:
type: string
requestBody:
description: Parameters to update/replace at the NSSF, the S-NSSAIs supported
per TA
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/NssaiAvailabilityInfo\'
responses:
\'200\':
description: OK (Successful update of SNSSAI information per TA)
content:
application/json:
schema:
\$ref: \'#/components/schemas/AuthorizedNssaiAvailabilityInfo\'
headers:
Accept-Encoding:
description: Accept-Encoding, described in IETF RFC 7694
schema:
type: string
Content-Encoding:
description: Content-Encoding, described in IETF RFC 7231
schema:
type: string
\'204\':
description: No Content (No supported slices after Successful update)
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
description: Unexpected error
patch:
summary: Updates an already existing S-NSSAIs per TA provided by the NF
service consumer (e.g AMF)
tags:
\- NF Instance ID (Document)
operationId: NSSAIAvailabilityPatch
parameters:
\- name: nfId
in: path
description: Identifier of the NF service consumer instance
required: true
schema:
type: string
\- name: Content-Encoding
in: header
description: Content-Encoding, described in IETF RFC 7231
schema:
type: string
\- name: Accept-Encoding
in: header
description: Accept-Encoding, described in IETF RFC 7231
schema:
type: string
requestBody:
description: JSON Patch instructions to update at the NSSF, the S-NSSAIs
supported per TA
required: true
content:
application/json-patch+json::
schema:
\$ref: \'#/components/schemas/PatchDocument\'
responses:
\'200\':
description: OK (Successful update of SNSSAI information per TA)
content:
application/json:
schema:
\$ref: \'#/components/schemas/AuthorizedNssaiAvailabilityInfo\'
headers:
Accept-Encoding:
description: Accept-Encoding, described in IETF RFC 7694
schema:
type: string
Content-Encoding:
description: Content-Encoding, described in IETF RFC 7231
schema:
type: string
\'204\':
description: No Content (No supported slices after Successful update)
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
description: Unexpected error
delete:
summary: Deletes an already existing S-NSSAIs per TA provided by the NF
service consumer (e.g AMF)
tags:
\- NF Instance ID (Document)
operationId: NSSAIAvailabilityDelete
parameters:
\- name: nfId
in: path
description: Identifier of the NF service consumer instance
required: true
schema:
type: string
responses:
\'204\':
description: No Content (Successful deletion of SNSSAI information per TA)
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
description: Unexpected error
/nssai-availability/subscriptions:
post:
summary: Creates subscriptions for notification about updates to NSSAI
availability information
tags:
\- Subscriptions (Collection)
operationId: NSSAIAvailabilityPost
parameters:
\- name: Content-Encoding
in: header
description: Content-Encoding, described in IETF RFC 7231
schema:
type: string
requestBody:
description: Subscription for notification about updates to NSSAI availability
information
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/NssfEventSubscriptionCreateData\'
callbacks:
nssaiAvailabilityNotification:
\'{request.body#/nfNssaiAvailabilityUri}\':
post:
parameters:
\- name: Content-Encoding
in: header
description: Content-Encoding, described in IETF RFC 7231
schema:
type: string
requestBody: # contents of the callback message
required: true
content:
application/json:
schema:
\$ref: \'#/components/schemas/NssfEventNotification\'
responses:
\'204\':
description: No Content (successful notification)
headers:
Accept-Encoding:
description: Accept-Encoding, described in IETF RFC 7694
schema:
type: string
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
description: Unexpected error
responses:
\'201\':
description: Created (Successful creation of subscription for notification)
content:
application/json:
schema:
\$ref: \'#/components/schemas/NssfEventSubscriptionCreatedData\'
headers:
Location:
description: \'Contains the URI of the newly created resource, according to
the structure: {apiRoot}/nnssf-nssaiavailability/v1/nssai-
availability/subscriptions/{subscriptionId}\'
required: true
schema:
type: string
Content-Encoding:
description: Content-Encoding, described in IETF RFC 7231
schema:
type: string
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
description: Unexpected error
/nssai-availability/subscriptions/{subscriptionId}:
delete:
summary: Deletes an already existing NSSAI availability notification
subscription
tags:
\- Subscription ID (Document)
operationId: NSSAIAvailabilityUnsubscribe
parameters:
\- name: subscriptionId
in: path
description: Identifier of the subscription for notification
required: true
schema:
type: string
responses:
\'204\':
description: No Content (Successful deletion of subscription for NSSAI
Availability notification)
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
description: Unexpected error
patch:
summary: updates an already existing NSSAI availability notification
subscription
tags:
\- Subscription ID (Document)
operationId: NSSAIAvailabilitySubModifyPatch
parameters:
\- name: subscriptionId
in: path
description: Identifier of the subscription for notification
required: true
schema:
type: string
\- name: Content-Encoding
in: header
description: Content-Encoding, described in IETF RFC 7231
schema:
type: string
requestBody:
description: JSON Patch instructions to update at the NSSF, the NSSAI
availability notification subscription
required: true
content:
application/json-patch+json::
schema:
\$ref: \'#/components/schemas/PatchDocument\'
responses:
\'200\':
description: OK (Successful update of NSSAI availability notification
subscription)
content:
application/json:
schema:
\$ref: \'#/components/schemas/NssfEventSubscriptionCreatedData\'
headers:
Content-Encoding:
description: Content-Encoding, described in IETF RFC 7231
schema:
type: string
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'411\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/411\'
\'413\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/413\'
\'415\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/415\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
description: Unexpected error
/nssai-availability:
options:
summary: Discover communication options supported by NSSF for NSSAI
Availability
operationId: NSSAIAvailabilityOptions
tags:
\- NSSAI Availability Store
responses:
\'200\':
description: OK
headers:
Accept-Encoding:
description: Accept-Encoding, described in IETF RFC 7694
schema:
type: string
\'307\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/307\'
\'308\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/308\'
\'400\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/400\'
\'401\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/401\'
\'403\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/403\'
\'404\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/404\'
\'405\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/405\'
\'429\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/429\'
\'500\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/500\'
\'501\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/501\'
\'503\':
\$ref: \'TS29571_CommonData.yaml#/components/responses/503\'
default:
\$ref: \'TS29571_CommonData.yaml#/components/responses/default\'
components:
securitySchemes:
oAuth2ClientCredentials:
type: oauth2
flows:
clientCredentials:
tokenUrl: \'{nrfApiRoot}/oauth2/token\'
scopes:
nnssf-nssaiavailability: Access to the Nnssf_NSSAIAvailability API
schemas:
NssaiAvailabilityInfo:
type: object
required:
\- supportedNssaiAvailabilityData
properties:
supportedNssaiAvailabilityData:
type: array
items:
\$ref: \'#/components/schemas/SupportedNssaiAvailabilityData\'
minItems: 1
supportedFeatures:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
amfSetId:
type: string
pattern: \'\^[0-9]{3}-[0-9]{2-3}-[A-Fa-f0-9]{2}-[0-3][A-Fa-f0-9]{2}\$\'
SupportedNssaiAvailabilityData:
type: object
required:
\- tai
\- supportedSnssaiList
properties:
tai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Tai\'
supportedSnssaiList:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ExtSnssai\'
minItems: 1
taiList:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Tai\'
minItems: 1
taiRangeList:
type: array
items:
\$ref: \'TS29510_Nnrf_NFManagement.yaml#/components/schemas/TaiRange\'
minItems: 1
AuthorizedNssaiAvailabilityData:
type: object
required:
\- tai
\- supportedSnssaiList
properties:
tai:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Tai\'
supportedSnssaiList:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ExtSnssai\'
minItems: 1
restrictedSnssaiList:
type: array
items:
\$ref: \'#/components/schemas/RestrictedSnssai\'
minItems: 1
taiList:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Tai\'
minItems: 1
taiRangeList:
type: array
items:
\$ref: \'TS29510_Nnrf_NFManagement.yaml#/components/schemas/TaiRange\'
minItems: 1
RestrictedSnssai:
type: object
required:
\- homePlmnId
\- sNssaiList
properties:
homePlmnId:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PlmnId\'
sNssaiList:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/ExtSnssai\'
minItems: 1
homePlmnIdList:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PlmnId\'
minItems: 1
roamingRestriction:
type: boolean
default: false
AuthorizedNssaiAvailabilityInfo:
type: object
required:
\- authorizedNssaiAvailabilityData
properties:
authorizedNssaiAvailabilityData:
type: array
items:
\$ref: \'#/components/schemas/AuthorizedNssaiAvailabilityData\'
minItems: 1
supportedFeatures:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
NssfEventSubscriptionCreateData:
type: object
required:
\- nfNssaiAvailabilityUri
\- taiList
\- event
properties:
nfNssaiAvailabilityUri:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Uri\'
taiList:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/Tai\'
event:
\$ref: \'#/components/schemas/NssfEventType\'
expiry:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
amfSetId:
type: string
pattern: \'\^[0-9]{3}-[0-9]{2-3}-[A-Fa-f0-9]{2}-[0-3][A-Fa-f0-9]{2}\$\'
taiRangeList:
type: array
items:
\$ref: \'TS29510_Nnrf_NFManagement.yaml#/components/schemas/TaiRange\'
minItems: 1
supportedFeatures:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
NssfEventSubscriptionCreatedData:
type: object
required:
\- subscriptionId
properties:
subscriptionId:
type: string
expiry:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/DateTime\'
authorizedNssaiAvailabilityData:
type: array
items:
\$ref: \'#/components/schemas/AuthorizedNssaiAvailabilityData\'
minItems: 1
supportedFeatures:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures\'
NssfEventNotification:
type: object
required:
\- subscriptionId
\- authorizedNssaiAvailabilityData
properties:
subscriptionId:
type: string
authorizedNssaiAvailabilityData:
type: array
items:
\$ref: \'#/components/schemas/AuthorizedNssaiAvailabilityData\'
NssfEventType:
anyOf:
\- type: string
enum:
\- SNSSAI_STATUS_CHANGE_REPORT
\- type: string
PatchDocument:
type: array
items:
\$ref: \'TS29571_CommonData.yaml#/components/schemas/PatchItem\'
minItems: 1
#