# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document defines a frame substitution and muting procedure which
shall be used by the RX DTX handler when one or more lost speech or SID frames
are received from the radio subsystem.
The requirements of the present document are mandatory for implementation in
all GSM Base Station Systems (BSS) and Mobile Stations (MS).
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or non‑specific.
  * For a specific reference, subsequent revisions do not apply.
```{=html}
``` \- For a non-specific reference, the latest version applies. In the case
of a reference to a 3GPP document (including a GSM document), a non-specific
reference implicitly refers to the latest version of that document _in the
same Release as the present document_.
[1] GSM 01.04: \"Digital cellular telecommunications system (Phase 2+);
Abbreviations and acronyms\".
[2] GSM 06.10: \"Digital cellular telecommunications system (Phase 2+); Full
rate speech; Transcoding\".
[3] GSM 06.31: \"Digital cellular telecommunications system (Phase 2+); Full
rate speech; Discontinuous Transmission (DTX) for full rate speech traffic
channel\".
# 3 Definitions and abbreviations
Abbreviations used in the present document are listed in GSM 01.04 [1].
The definitions of terms used in the present document can be found in GSM
06.31 [3].
# 4 General
The purpose of the frame substitution is to conceal the effect of lost frames.
The purpose of muting the output in the case of several lost frames is to
indicate the breakdown of the channel to the user.
# 5 Requirements
## 5.1 First lost speech frame
Normal decoding of lost speech frames would result in very unpleasant noise
effects. In order to improve the subjective quality, the first lost speech
frame shall be substituted with either a repetition or an extrapolation of the
previous good speech frame(s). Lost speech frames shall not be delivered to
the speech decoder, nor shall the output be muted directly.
## 5.2 Subsequent lost speech frames
For subsequent lost speech frames, a muting technique shall be used that will
gradually decrease the output level, resulting in silencing of the output
after a maximum of 320 ms. Clause 6 gives an example solution.
## 5.3 First lost SID frame
A single lost SID frame shall be substituted by the last valid SID frame and
the procedure for valid SID frames be applied as described in GSM 06.31 [3].
## 5.4 Subsequent lost SID frame
For the second lost SID frame, a muting technique shall be used on the comfort
noise that will gradually decrease the output level, resulting in silencing of
the output after a maximum of 320 ms. Clause 6 gives an example solution.
For subsequent lost SID frames, the muting of the output shall be maintained.
# 6 Example solution
For guidance, an example solution is given.
The first lost speech frame is replaced at the speech decoder input by the
previous good speech frame. Normal decoding is then performed.
The muting procedure to be used in the case of subsequent lost speech frames
or for comfort noise frames following the second lost SID frame is as follows:
The pseudo‑logarithmic encoded block amplitude Xmaxcr (GSM 06.10 [2]), coded
on the interval from 0 to 63, is decreased with a constant value d=4 in each
frame, down to the lowest possible value. Consequently, Xmaxcr will be reduced
gradually, and the output muted after a maximum of 320 ms. The grid position
parameters are chosen randomly between 0 and 3 during this time.
For subsequent unusable frames, after the frame where Xmaxcr reached the
lowest possible value, \"silence frames\" are passed from the RX DTX handler
to the speech decoder to guarantee a low output level under all conditions.
The silence frame is defined in table 1.
Table 1: Encoded parameters (GSM 06.10) of the silence frame
* * *
Log area ratio 1 = 42  
Log area ratio 2 = 39  
Log area ratio 3 = 21  
Log area ratio 4 = 10  
Log area ratio 5 = 9  
Log area ratio 6 = 4  
Log area ratio 7 = 3  
Log area ratio 8 = 2  
_  
LTP gain = 0  
LTP lag = 40
Grid position = 1  
Block amplitude = 0
RPE pulse no. 1 = 3  
RPE pulse no. 2 = 4  
RPE pulse no. 3 = 3  
RPE pulse no. 4 = 4  
RPE pulse no. 5 = 4  
‑ repeated for each subsegment RPE pulse no. 6 = 3  
RPE pulse no. 7 = 3  
RPE pulse no. 8 = 3  
RPE pulse no. 9 = 3  
RPE pulse no. 10 = 4  
RPE pulse no. 11 = 4  
RPE pulse no. 12 = 3  
RPE pulse no. 13 = 3 _
* * *
#