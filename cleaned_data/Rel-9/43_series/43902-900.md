# Foreword
This Technical Report has been produced by the 3^rd^ Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# Introduction
During the course of Release 6, 3GPP TS 43.318 [2] (Generic access to the A/Gb
interface; Stage 2) and 3GPP TS 44.318 [3] (Generic access to the A/Gb
interface; Stage 3) were developed that provide access to the 3GPP core
network using generic IP connection. Generic Access Networks, or GAN, is an
extension of GSM/GPRS mobile services into the customer\'s premises that is
achieved by tunnelling certain GSM/GPRS protocols between the customer\'s
premises and the Core Network over broadband IP network, and relaying them
through an unlicensed radio link inside the customer\'s premises. GAN is a
complement to traditional GSM/GPRS radio coverage, used to enhance customer
premises coverage, increase network capacity and potentially lower costs.
Early deployments of GAN are now ongoing. As part of the continuous process of
optimizing their network to better meet customer demand a number of operators
have indicated a need to further enhance the GAN system. Various goals for
such enhancements are documented in section four of the present document.
After presentation of the goals, the present document technical alternatives
for how to implement such enhancements to GAN.
# 1 Scope
The present document contains the results of the feasibility study into the
enhancements to Generic Access Networks or GAN. Considerations include overall
requirements for enhancements, architectural requirements, evaluation of
potential architectural solutions and alternative architectures.
The objective is to identify an architectural solution that best meets the
requirements as specified in first section. The feasibility study shall also
investigate mechanisms for selecting the most appropriate network domain to
serve the user.
Existing solutions developed by the 3GPP should be reused as much as possible.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or nonâ€‘specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the > case of a reference to a 3GPP document (including a GSM document), > a non-specific reference implicitly refers to the latest version > of that document _in the same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 43.318: \"Generic access to the A/Gb interface; Stage 2\".
[3] 3GPP TR 44 318: \"Generic Access (GA) to the A/Gb interface; Mobile GA
interface layer 3 specification\".
[4] 3GPP TS 24.008: \"Mobile radio interface Layer 3 specification; Core
network protocols; Stage 3\".
[5] 3GPP TS 29.060: \"General Packet Radio Service (GPRS); GPRS Tunnelling
Protocol (GTP) across the Gn and Gp interface\".
[6] 3GPP TS 23.060: \"General Packet Radio Service (GPRS); Service
description; Stage 2\".
[7] 3GPP TS 23.078: \"Customized Applications for Mobile network Enhanced
Logic (CAMEL) Phase X; Stage 2\".
[8] 3GPP TS 32.251: \"Telecommunication management; Charging management;
Packet Switched (PS) domain charging\".
[9] 3GPP TS 24.007: \"Mobile radio interface signalling layer 3; General
aspects\".
[10] 3GPP TS 33.107: \"3G security; Lawful interception architecture and
functions\".
[11] IETF RFC 2784 (March 2000): \"Generic Routing Encapsulation (GRE)\".
[12] 3GPP TS 25.410: \"UTRAN Iu interface: General aspects and principles\".
[13] 3GPP TS 25.450: \"UTRAN Iupc interface general aspects and principles\".
[14] 3GPP TS 25.419: \"UTRAN Iu-BC interface: Service Area Broadcast Protocol
(SABP)\".
[15] 3GPP TS 29.234: \"3GPP system to Wireless Local Area Network (WLAN)
interworking; Stage 3\".
[16] 3GPP TS 25.412: \"UTRAN Iu interface signalling transport\".
[17] 3GPP TS 25.414: \"UTRAN Iu interface data transport and transport
signalling\".
[18] 3GPP TS 25.415: \"UTRAN Iu interface user plane protocols\".
[19] 3GPP TS 26.071: \"AMR speech Codec; General description\".
[20] 3GPP TS 33.102: \"3G Security; Security architecture\".
[21] 3GPP TS 33.234: \"3G security; Wireless Local Area Network (WLAN)
interworking security\".
[22] 3GPP TS 23.122: \"Non-Access-Stratum (NAS) functions related to Mobile
Station (MS) in idle mode\".
[23] 3GPP TS 25.331: \"Radio Resource Control (RRC); Protocol specification\".
[24] 3GPP TS 44.064: \"Mobile Station - Serving GPRS Support Node (MS-SGSN);
Logical Link Control (LLC) Layer Specification\".
[25] 3GPP TS 44.065: \"Mobile Station (MS) - Serving GPRS Support Node (SGSN);
Subnetwork Dependent Convergence Protocol (SNDCP)\".
[26] 3GPP TS 23.003: \"Numbering, addressing and identification\".
[27] 3GPP TS 23.236: \"Intra-domain connection of Radio Access Network (RAN)
nodes to multiple Core Network (CN) nodes\".
[28] 3GPP TS 43.129: \"Packed-switched handover for GERAN A/Gb mode; Stage
2\".
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
3GPP TR 21.905 [1] and the following apply. A term defined in the present
document takes precedence over the definition of the same term, if any, in TR
21.905 [1].
## 3.2 Symbols
For the purposes of the present document, the following symbols apply:
Up Interface between UE and GANC
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 [1] and the following apply. An abbreviation defined in the present
document takes precedence over the definition of the same abbreviation, if
any, in TR 21.905 [1].
AAA Authentication, Authorization and Accounting
AKA Authentication and Key Agreement
AP Access Point
AS Access Stratum
BSC Base Station Controller
BSS Base Station Subsystem
BSSGP Base Station System GPRS Protocol
BSSMAP Base Station System Management Application Part
CC Call Control
CGI Cell Global Identification
CM Connection Management
CN Core Network
CS Circuit Switched
DNS Domain Name System
DTM Dual Transfer Mode
EAP Extensible Authentication Protocol
ETSI European Telecommunications Standards Institute
FQDN Fully Qualified Domain Name
GA-CSR Generic Access - Circuit Switched Resources
GAN Generic Access Network
GANC Generic Access Network Controller
GA-PSR Generic Access - Packet Switched Resources
GA-RC Generic Access - Resource Control
GA-RRC Generic Access - Radio Resource Control
GERAN GSM EDGE Radio Access Network
GGSN Gateway GPRS Support Node
GMM/SM GPRS Mobility Management and Session Management
GPRS General Packet Radio Service
GSM Global System for Mobile communications
GSN GPRS Support Node
HLR Home Location Register
HPLMN Home PLMN
IETF Internet Engineering Task Force
IKE Internet Key Exchange
IMEISV International Mobile station Equipment Identity and Software Version
number
IMSI International Mobile Subscriber Identity
IP Internet Protocol
LA Location Area
LAI Location Area Identity
LLC Logical Link Control
MAC Medium Access Control
MAC Message Authentication Code
MM Mobility Management
MS Mobile Station
MSC Mobile Switching Center
MTP1 Message Transfer Part layer 1
MTP2 Message Transfer Part layer 2
MTP3 Message Transfer Part layer 3
NAS Non-Access Stratum
PDP Packet Data Protocol
PDU Protocol Data Unit
PLMN Public Land Mobile Network
PSTN Public Switched Telephone Network
P-TMSI Packet - TMSI
QoS Quality of Service
RA Routing Area
RAC Routing Area Code
RAI Routing Area Identity
RAT Radio Access Technology
RLC Radio Link Control
RTCP Real Time Control Protocol
RTP Real Time Protocol
SCCP Signalling Connection Control Part
SEGW SEcurity GateWay
SGSN Serving GPRS Support Node
SIM Subscriber Identity Module
SMLC Serving Mobile Location Center
SMS Short Message Service
SNDCP Sub-Network Dependent Convergence Protocol
TBF Temporary Block Flow
TC Transport Channel
TCP Transmission Control Protocol
TFO Tandem Free Operation
TMSI Temporary Mobile Subscriber Identity
TrFO Transcoder Free Operation
TTY Text Telephone or TeletYpewriter
UDP User Datagram Protocol
UMTS Universal Mobile Telecommunication System
VLR Visited Location Register
VPLMN Visited Public Land Mobile Network
# 4 Requirements
## 4.1 Objectives
  1. GAN Enhancements shall be backwards compatible with GAN in 3GPP Rel-6 and Rel-7.
Two levels of enhancements may be considered that are either:
a) Forwards compatible from Rel-6: Rel-6 and Rel-7 terminals work with the
enhancements i.e. network-only enhancements
b) Not forwards compatible from Rel-6 (respectively Rel-7): Rel-6
(respectively Rel-7) terminals do not work with the enhancements
GAN Enhancements shall:
  * Support at minimum the same services as GAN in 3GPP Rel-6 and Rel-7; > and
  * Support existing QoS management as specified in 3GPP; and
  * Minimize the impact on the Core Network.
  * GAN Enhancements shall abide as per the unchanged GAN principle to keep the transparent support for any given service between UTRAN or GERAN, and GAN.
  * E.g. preserve the existing APN mechanism.
  * GAN Enhancements shall minimize the additional complexity on existing GANCs if applicable.
  * GAN Enhancements shall minimize the additional complexity on terminals (see case 1b above).
  * GAN Enhancements shall reduce the complexity for delivery of CS and PS services.
  * E.g. by reducing the number of functions and/or protocol overhead.
  * GAN Enhancements shall reduce the user-plane latency for delivery of PS services.
  * E.g. by reducing the number of functions and/or protocol overhead.
  * GAN Enhancements shall be compatible / shall align with other 3GPP Core Network enhancements e.g. \"one tunnel approach\" for PS services.
  * GAN Enhancements shall overcome the limitations imposed by using the Gb interface.
  * GAN Enhancements shall provide optimized support for operators using GSM-only, UMTS-only, or combined GSM/UMTS networks.
  * E.g. no changes to existing core network nodes/interfaces.
NOTE 1: The term \"GSM\" also refers to GPRS.
  1. GAN Enhancements shall provide seamless mobility for CS and seamless mobility for PS including PS conversational services.
  2. GAN Enhancements shall minimize \"Enhanced GAN mode\" power consumption on handsets.
NOTE 2: \"Enhanced GAN mode\" refers to the peer of GAN mode when operating as
per a given GAN Enhancement.
## 4.2 Benefits
The following items constitute a non-exhaustive list of benefits that may
characterize the proposals on GAN Enhancements:
  * PS Optimization independent of CS Changes.
  * Support the services/network deployed with GPRS APNs.
  * No impact on 3GPP TS 24.008 [4].
  * Minimize the load on existing network elements (e.g. HLR).
## 4.3 For further investigation
The following items require further investigation:
  * Whether \"Enhanced GAN\" Terminals shall support GAN specified in > 3GPP Rel-6 and Rel-7.
  * Whether there is any limitations induced by LLC protocol.
# 5 Architecture alternatives
## 5.1 A/Gn based architectures
### 5.1.1 Enhanced Up
#### 5.1.1.1 Architecture
Figure 1 shows the architecture of enhanced Up solution. The CS domain remains
unchanged and the PS domain is enhanced to increase the performance of the
broadband data services.
{width="6.043055555555555in" height="4.435416666666667in"}
Figure 1: Enhanced Up A/Gn solution architecture
EGANC is a combination of legacy GANC and part of SGSN functionalities. The
EGANC provides the Gn reference point and enhanced Up reference point for
enhanced PS efficiency and performance.
  * Gn reference point: This reference point to GGSN removes one node in > the path for PS services, hence reducing the latency and overhead. > It also moves the EGANC close to the core network, making the > GERAN/UTRAN radio-specific procedures unnecessary in the EGANC.
  * Enhanced Up reference point: This reference point removes the > unnecessary protocol stacks between UE and the EGANC, hence > enhancing the performance of the PS services. The Up reference > point for CS domain remains unchanged so that all the current > procedures keep working. The legacy Up reference point for PS > domain is also supported for backward compatibility.
The main features of the architecture are as follows:
  * No changes to CS domain - reuse of A interface.
  * Reuse of Up procedures for authentication, security, > discovery/registration. -reuse of Wm interface.
  * This proposal only affects the PS domain.
  * Direct connectivity to GGSN via unchanged Gn per 3GPP TS 29.060 > [5].
  * New Enhanced Up protocol for PS domain.
  * GA-PSR and 3GPP TS 24.008 [4] MM/SM are not used in PS EGAN mode.
  * Single enhanced Up PS stack in the terminal for 2G and 3G networks > and terminals environment.
  * Gb is kept for backward compatibility with R6 GAN terminals.
  * Other interfaces:
\- Gd interface is not needed. SMS is provided via CS domain in the WLAN
coverage via standardized 3GPP mechanisms without any changes for the
GERAN/UMTS coverage, where PS or CS preference can be kept (refer to
contribution on SMS).
\- Gs interface is not used.
\- The EGANC may interface with the GSM SCF for optional CAMEL control using
Ge reference point according to 3GPP TS 23.078 [7].
\- The EGANC may interface with the CGF (Charging Gateway Functionality) using
Ga interface for off-line charging via CDRs to according to 3GPP TS 32.251
[8].
\- The EGANC optionally interfaces ADMF (Administration Function), DF2
(Delivery Function 2) and DF3 (Delivery Function 3) via X1-1, X2 and X3 for
lawful interception if required (refer to contribution on Lawful Interception)
according to 3GPP TS 33.107 [10].
#### 5.1.1.2 Protocol stacks
The control plane and user plane CS domain protocol stacks are unchanged from
existing GAN. CS domain protocols stacks are not shown here. The PS domain
proposed changes are independent from the CS domain.
##### 5.1.1.2.1 PS Control Plane
The PS control plane protocol stack is shown in figure 2.
{width="6.13125in" height="2.347916666666667in"}
Figure 2: A/Gn alternative PS control plane protocol stacks
The control plane is simplified in the following way:
  * The two protocol stacks in a row (GA-PSR + BSSGP) can be replaced by > one single upper layer protocol (GA-SM).
  * GA-SM (GAN Session Management) protocol takes the role of NAS > 24.008, and it reuses 24.008 SM messages. The parallel operation > of the two radios of the terminal allow for a make-before-break > handover.
  * LLC is not required because user plane and control plane are > separated, and because security is ensured by the IPsec tunnel. > Removing LLC provides enhancement to the whole performance.
Furthermore UDP is sufficient to address GA-SM via a well-known port: TCP is
not needed as signalling in GPRS is performed above LLC in unacknowledged mode
(SAPI 1), and there is already a TCP connection to check the presence of the
terminal, established at GAN registration.
##### 5.1.1.2.2 PS User Plane
The PS user plane protocol stack is shown in figure 3.
{width="6.6506944444444445in" height="2.9625in"}
Figure 3: A/Gn alternative PS user plane protocol stacks
The user plane is also simplified in the same way:
  * The **two** protocol stacks in a row (GA-PSR + BSSGP) are replaced > by **one single** tunnelling protocol (e.g. GRE).
  * LLC is not required because user plane and control plane are > separated. The security is ensured by the IPsec tunnel.
  * SNDCP is replaced by a tunnel or flow-identification mechanism > provided by IP (e.g. IETF GRE [11] where NSAPI is embedded in > GRE header).
#### 5.1.1.3 Affected Procedures
##### 5.1.1.3.1 PS mobility overview
A GAN terminal under WLAN coverage, has several specificities that do not
exist for a GERAN/UMTS terminal:
1) No LA/RA needed in WLAN: Once authenticated, authorized and GAN registered,
the GAN terminal has an IPSec tunnel and a TCP connection with the GANC.
Therefore, it is possible to reach the terminal at cell level without any
paging. Consequently, there is no need for LA/RA concept in the WLAN.
2) Make before break: WLAN radio and GERAN/UMTS radio can operate
**simultaneously**. This allows for a simpler handover mechanism, which
consists in establishing a second leg in the new RAT, then releasing the first
leg in the old RAT.
  * No need for MM/PDP context transfer from one RAT to another.
  * The two systems can remain fully independent: they can have their > own radio parameters, their own security mechanisms, etc.
{width="2.1131944444444444in" height="2.4993055555555554in"}
Figure 4: GGSN as anchor point in the user plane
The establishment of the legs (bearers) is performed via GA-SM procedures
(equivalent to Activate PDP Context, Modify PDP Context, Deactivate PDP
Context, etc.).
**Control plane anchor**
The control plane anchor is a different function from the user plane anchor.
The principle is that signalling messages related to one UE must be routed to
the same entity (Proxy-Gn) whatever the active UE is on 3GPP or on WLAN. To
avoid any changes to existing GGSN, it is proposed to host the Gn-Proxy
function in the GANC.
To allow for mobility between GAN and GERAN/UMTS, the EGANC acts as a Proxy-Gn
i.e. when the terminal activates a PDP context in the GERAN/UMTS system, the
APN address resolution by the DNS causes the legacy SGSN to route the
signalling messages towards a Proxy-Gn (EGANC). The Proxy-Gn (EGANC) then
routes them to the GGSN. In other words, the EGANC is an anchor point for
control plane.
{width="5.877777777777778in" height="1.7798611111111111in"}
Figure 5: Mobility management in Enhanced Up solution
**Anchor PDP**
The Proxy-Gn function, hosted in EGANC, provides the PDP context anchor
functionality for the EGAN capable MS while acting as a relay for the first
PDP context creation of the MS that are not EGAN capable. From an external
point of view the Proxy-Gn is seen as a GGSN by the SGSN and the GA-SM entity,
but **its role is limited to the control plane only**.
For providing the PDP context anchor functionality, the Proxy-Gn introduces
the concept of Anchor PDP context. An Anchor PDP context is a PDP context with
several GTP-C end points called terminations. An Anchor PDP context embeds:
  * **one Access Termination per access technology**. For the case of > the EGAN there are two access terminations in the Anchor PDP > context:
\- one for the EGAN mode. This is the GTP-C end point for signalling with the
GA-SM;
\- one for the GERAN/UTRAN mode. This is the GTP-C end point for signalling
with the SGSN.
  * **one Network Termination**. It is the GTP-C end point for > signalling with the GGSN.
**Anchor PDP context interface**
The Anchor PDP context interfaces the SGSN, GA-SM (EGANC) and the GGSN in Gn.
However only the GTP-C part of Gn is considered since the user plane (GTP-U)
is out of the scope of the Anchor PDP context.
{width="6.757638888888889in" height="3.0944444444444446in"}
Figure 6: EGANC architecture
The UE GA-SM termination and the Proxy-Gn function exchange information by
using specific containers created in the PCO Information Element present in
the signalling messages related to PDP context. The PCO IE (Protocol
Configuration Options) is specified in 3GPP TS 24.008 [4] to convey
information from external protocols between the MS and the GGSN. The protocol
configuration options information element is transparent to the SGSN. These
new containers are processed by the Proxy-Gn and, according to 3GPP TS 29.060
[5], ignored by the legacy GGSNs:
**EGAN Access type:** It is appended by the UE GA-SM termination. It indicates
to the Proxy-Gn that the MS is EGAN capable and informs the Proxy-Gn about the
access PDP context that is identified by the request.
**Anchor address** **(ANCHOR_ADDR):** that container contains the IP address
of the Proxy Gn on which the Anchor PDP context has been created (wherever
GPRS/UMTS or WLAN). It is appended by the Proxy-Gn upon the creation of the
Anchor PDP context within the PDP context creation response. The UE GA-SM
termination is intended to store that address and to append a ANCHOR_ADDR
container for each subsequent request related to that PDP address. The UE GA-
SM termination removes that address upon the deletion of the last PDP context
related to that PDP address.
**Master Termination (MASTER_REQ):** the usage of this container is related to
the mobility. It indicates to the Prox-Gn that the request comes from the MS.
That container is present in modify PDP context request initiated by UE GA-SM
termination during a handover procedure. By the way it indicates to the Anchor
PDP context the corresponding Access Termination is becoming MASTER.
**GPRS stack behaviour when the user is in GAN mode**
As described above, since the MA-SM is located above the EGAN access mode
switch, which again is located above GA-SM and GPRS-SM, all the GPRS related
procedures are not impacted and performed as they are performed for GPRS mode,
even when the user is in GAN mode. Especially, since the MA-SM only deals with
the session management, all the GMM procedures are performed while the user is
in GAN mode. However, since MA-SM and EGAN access mode switch performs the
switching of the user traffic path (MA-SM decides which access to be used and
eGAN switch actually performs the switching) and all the user traffic passes
through either one of the accesses, the GMM procedure is done in the
background and has no impact to the user session when the user is in GAN mode.
This includes the periodic RAU, too. This may keep the user attached to the
GPRS as long as the timer is not expired, and makes the hand-back to GPRS very
fast and seamless since no GMM or SM messages may be needed at the point of
hand-back (e.g. if each PDP Context activated in eGAN mode has also been
activated via the GERAN/UTRAN radio path prior to the hand-back). When the MA-
SM layer decides that the GPRS side has the active PDP context for this
session it tells the EGAN access mode switch to start sending the user plane
data to the GPRS layers (i.e. once the necessary radio resources have been
allocated as further discussed below). In case the user enters eGAN mode with
GPRS detached, and wants to perform GPRS attach later on, the MA-SM instructs
the GPRS SM to activate the session and GPRS SM instructs the MM layer to
perform the attach procedure.
Note that the PDP context can be activated at the GERAN/UTRAN side immediately
after it is activated at the eGAN side. By doing this, when the user hands
back to GERAN/UTRAN there is no real time need to activate PDP context. MS
will request the allocation of radio resources in the GERAN/UTRAN cell before
the EGAN access mode switch can redirect the data path to the GERAN/UTRAN
stack.
As an implementation option, Enhanced Up solution supports the hibernation
mode.
NOTE: The hibernation mode is not currently defined for GAN terminal operation
and so the reference to this mode here is merely intended to indicate than an
MS operating in eGAN mode is able to completely shut down its GERAN/UTRAN
radio interface for an implementation specific period of time.
**Anchor PDP Context states**
Below are represented:
  * the state of the Anchor PDP Context as seen from outside;
  * the Access Termination states and substates;
  * the Network Termination states and substates.
{width="6.338888888888889in" height="3.8208333333333333in"}
Figure 7: EGAN state diagram
**Termination states**
**_ACTIVE:_** In the ACTIVE state, the Termination (Access type or Network
type) knows the remote GTP-C endpoint (IP address and a Teid). At least one
PDP create procedure has been successfully processed between the Termination
and the remote endpoint.
_ACTIVE Access termination sub-states_
An Access Termination in the ACTIVE state may be in one of the following sub
states: MASTER or SLAVE.
There is only one MASTER Access Termination per Anchor PDP. When an Access
Termination becomes MASTER, the former MASTER Access Termination reverts to
SLAVE role.
  * MASTER (C-Plane and U-Plane ready):
The GGSN is configured with the parameters of the remote User Plane peer
entity (IP address, TEID) i.e. the user plane is ready to be used for
transfer.
  * SLAVE (C-Plane ready):
The Access Termination knows the GTP-C endpoint but has not configured the
GGSN with the GTP-U endpoint parameters. The transition from SLAVE to MASTER
is performed on an explicit request from the MS (Create PDPor Update PDP with
Master-Req IE). In some cases, it may be possible to have an implicit
transition from SLAVE to MASTER (e.g.: when the SGSN requests the PDP context
deletion upon the expiration of MS reachable timer).
_ACTIVE Network Termination sub-states_ _:_ **
A Network Termination in the ACTIVE state may be in one of the following sub
states.
  * OPERATIONAL:
A MASTER access termination exists.
  * DEGRADED:
No Access termination is ACTIVE any more, but the MS is not the initiator
(e.g.: a network failure on the access side has been detected by the SGSN or
GA-SM , and a delete PDP context has been triggered).The user plane switching
is impossible. Nevertheless the Anchor PDP context is kept ACTIVE for a given
time that should enable a re-connection of the handset. This maintains the IP
address of the PDP context, and enables to recover the on going sessions. Upon
a timer expiration, if no create PDP context is received from the SGSN or the
GA-SM, the anchor PDP context is deleted.
**_INACTIVE:_** In the INACTIVE state, the Termination does not know any
remote GTP-C endpoint. A transition from the INACTIVE to ACTIVE state is
always triggered by an activate PDP context request initiated from the MS.
**Anchor PDP states**
**_INACTIVE:_** All the terminations of the anchor PDP are INACTIVE. The
Proxy-Gn does not know the IMSI/NSAPI identifier of the PDP. The only request
that can be processed for such an Anchor PDP context is a create PDP context
request from a SGSN or a GA-SM. All other requests are rejected with an
\"unknown PDP\" cause.
**_ACTIVE:_** The Proxy-Gn knows the IMSI/NSAPI identifier of the Anchor PDP
context. The Network termination is ACTIVE and an IP address has been
allocated by the GGSN (Dynamic PDP).
**Access Termination transitions**
An Access Termination performs a transition from the INACTIVE to the ACTIVE-
MASTER state upon the receipt of a create PDP context (the MASTER role is
implicitly requested on create PDP context).
The transition from INACTIVE to ACTIVE at the Access Termination triggers the
transition to OPERATIONAL at the Network Termination, which initiates a create
or update PDP context procedure (depending on the current state of the Network
Termination) with the GGSN with the user plane parameters of the MASTER Access
Termination.
When a delete PDP context request is initiated by the GGSN (received on the
Network Termination), all the Terminations are deleted and the Anchor PDP
context enters the INACTIVE state. During the transition, a delete PDP context
procedure is initiated for each ACTIVE access Termination.
When a delete PDP context request is initiated by the MS on the ACTIVE-MASTER
Access Termination, all the Termination are deleted and the Anchor PDP context
enters the INACTIVE state. During the transition, a delete PDP context
procedure is initiated on the Network Termination as well as on the other
Access Termination when ACTIVE.
When the origin of the delete PDP context request received on the ACTIVE-
MASTER Access Termination is not the MS but either the SGSN or the EGANC, only
the associated Access Termination is deleted (INACTIVE).
When a delete PDP context request is received on the ACTIVE-SLAVE Access
Termination (initiated either by the MS or the SGSN or the EGANC), only the
associated Access Termination is deleted (INACTIVE).
An ACTIVE Access Termination with the MASTER role enters the SLAVE role
because of another Access Termination takes the MASTER role. While taking the
SLAVE role a delete timer is started. Upon the timer expiration, the Proxy-Gn
initiates a delete PDP context to the remote end associated to the Access
Termination. Then the Access Termination enters the INACTIVE state.
NOTE: The introduction of the timer permits to avoid signalling overloading
while MS is switching back and forth between the GAN and UTRAN/GERAN.
An ACTIVE Access Termination with the SLAVE role enters MASTER upon receiving
either a create PDP context or an update PDP context request. Note that in the
case of the update PDP context, the PCO should explicitly contain the
MASTER_REQ container.
When receiving an update PDP request without MASTER_REQ container on an access
termination in ACTIVE-SLAVE state the request is processed locally; no
procedure is initiated on the Network Termination. When the Access Termination
is ACTIVE-MASTER, the update procedure is initiated with the GGSN by using the
Network Termination.
**Network Termination transition**
A Network Termination performs a transition from the INACTIVE to the ACTIVE-
OPERATIONAL state upon the receipt of a create PDP context from a SGSN or a
GA-SM:
  * with an ANCHOR_ADDR container set to the IP address of that > Proxy-Gn or without ANCHOR_ADDR container; and
  * with an IMSI/NSAPI identifier unknown from the Proxy-Gn.
A create PDP context procedure is initiated by the Network Termination with
the GGSN.
An ACTIVE-OPERATIONNAL Network Termination enters the ACTIVE-DEGRADED state
when all the access Terminations are INACTIVE and a timer is started. If no
access termination becomes ACTIVE-MASTER back, at timer expiration the Network
Termination becomes INACTIVE (it initiates a delete procedure with the GGSN).
A Network Termination in the ACTIVE state enters the INACTIVE state when
receiving a PDP context delete request from the GGSN. This triggers a deletion
of all the ACTIVE Access Termination too.
An update of the Network termination is processed each time a PDP context
update procedure is required with the GGSN:
  * Update on the ACTIVE-MASTER Access Termination.
  * The MASTER role switches to another Access Termination.
An update initiated by the GGSN triggers an update procedure on the current
ACTIVE-MASTER termination if any.
##### 5.1.1.3.2 PDP Context Activation /De-Activation
This subclause describes the PDP context related procedures for EGAN capable
handset: PDP context activation, PDP context de-activation and PDP context
handover.
EGAN procedures do not require any change in existing SGSN and GGSN.
The MS EGAN Access Mode Switch is located at the unchanged \"SMREG-SAP\"
interface specified in 3GPP TS 24.007 [9].
For each procedure, this section depicts:
  * the role of the MS EGAN Access Mode Switch (application in MS), the > GA-SM terminations (MS and EGANC), and the Proxy-GN (EGANC);
  * the usage of the different EGAN specific PCO containers (PCO IE > already exists in all 3GPP TS 24.008 SM messages);
  * the role of the Anchor PDP context and its associated Terminations > (Proxy-Gn application): SGSN-Access-Termination, > GAN-Access-Termination, and Network-Termination, as shown in > figure 8.
**a) PDP context activation on the GERAN/UTRAN side**
{width="6.685416666666667in" height="3.4097222222222223in"}
Figure 8: PDP context activation procedure on GERAN/UTRAN mode
The MS is GPRS attached and the application requests the activation of a PDP
context. It may have or not a connectivity with the EGAN.
1\. The MS application layer requests the activation of a PDP Context by
sending SMREG-PDP-ACTIVATE-REQ via the unchanged SMREG-SAP interface.
2\. The current Radio Access in use being GERAN (or UTRAN); the MS EGAN Access
Mode Switch forwards the SMREG-PDP-ACTIVATE-REQ to the GSM/UMTS SM layer via
unchanged SMREG-SAP interface.\ This PDP context has not yet been activated on
any access, and so:
  * no \"ANCHOR_ADDR container\" is set in the Protocol Configuration > Options (PCO) field;
  * a \"GERAN/UTRAN access type container\" is set in the PCO field.
NOTE 1: If the MS Application does not provide any PCO in its request, the MS
EGAN ACCESS MODE SWITCH client creates one.
3\. Since the GSM/UMTS SM layer is unchanged, it processes Activate PDP
Context Request as defined in 3GPP TS 24.008 [4].
4\. Since the SGSN is unchanged, it processes Activate PDP Context Request as
defined in 3GPP TS 23.060 and 3GPP TS 29.060 [5].
NOTE 2: The APN resolution provides the SGSN with a list of IP addresses of
Proxy-Gn function residing on EGANC.
5\. The Proxy-Gn receives the PDP context creation request without ANCHOR_ADDR
container within the PCO information.\ Since the EGAN Access Type container is
present, the Proxy-Gn creates an \"Anchor PDP context\" and among others:
a. It stores the parameter related to the Gn signalling (IP address of SGSN
and TEID for signalling), as well as the source IP address of the received
request, in GERAN/UTRAN Termination;
b. It allocates a TEID for GTP signalling for the Network Termination.
Then, it resolves the APN to find out a GGSN IP address, replaces the received
IP address and the TEID for GTP-C (signalling) with those of the Network
Termination of the Anchor PDP context.
NOTE 3: The IP address and TEID for GTP-U (user plane) remain those provided
by the SGSN since the Proxyâ€‘Gn is not involved in the User Plane.
6\. Since the GGSN is unchanged, it processes Create PDP Context Request as
defined in 3GPP TS 23.060 [6] and 3GPP TS 29.060 [5].
7\. Upon receiving the Create PDP Context Response from the GGSN, the Proxy-
Gn:
a. stores the IP address and the TEID for GTP-C (signalling) of the GGSN in
the Anchor PDP context Network Termination;
b. returns Create PDP Context Response to the SGSN with the following
modifications:
\- it replaces the control TEID and IP address of the GGSN by those of
GERAN/UTRAN Termination;
\- it creates a Protocol Configuration Options field or appends to the
existing Protocol Configuration Options field a ANCHOR_ADDR container set with
Proxy-Gn IP address.
NOTE 4: The IP address and TEID for GTP-U are passed unchanged to the SGSN.
8\. Since the SGSN is unchanged, it processes the Create PDP Context Response
as defined in 3GPP TS 23.060 [6] and 3GPP TS 29.060 [5].
9\. Since the MS GSM/UMTS SM layer is unchanged, it processes the Activate PDP
Context Response as defined in 3GPP TS 24.008 and sends SMREG-PDP-ACTIVATE-REQ
via the unchanged SMREG-SAP interface to the EGAN Access Mode Switch.
10\. The MS EGAN Access Mode Switch stores the address of the Proxy-Gn
anchoring that PDP context (received in the PCO), and sets PDP context to
ACTIVE on the GERAN/UTRAN side. The MS EGAN Access Mode Switch confirms the
PDP Context Activation to the MS Application via unchanged SMREG-SAP as
specified in 3GPP TS 24.007 [9].
**b) PDP context activation on the EGAN side**
{width="6.324305555555555in" height="3.1756944444444444in"}
Figure 9: PDP context activation procedure in EGAN mode
The MS has successfully performed its registration with the GAN and the
application requests the activation of a PDP context. It may or may not be
GPRS-attached.
1\. The MS application layer requests the activation of a PDP Context by
sending SMREG-PDP-ACTIVATE-REQ via the unchanged SMREG-SAP interface.
2\. The current Radio Access in use is GAN, therefore the MS EGAN Access Mode
Switch forwards the SMREG-PDP-ACTIVATE-REQ to GA-SM layer via the unchanged
SMREG-SAP interface.\ This PDP context has not yet been activated on any
access, and so:
  * no ANCHOR_ADDR container is set in the Protocol Configuration > Options field;
  * a EGAN access type container is set in the PCO field.
NOTE: If the MS Application does not provide any PCO in its requests, the MS
EGAN Access Mode Switch creates one.
3\. A tunnel identity (e.g. GRE \"key\") is allocated by the MS GA-SM for user
plane downlink traffic and provided within the GA-SM-Activate-PDP-Context
request that is sent to the serving EGANC.
4\. Upon reception of GA-SM Activate PDP Context Request by the serving EGANC:
  * The GA-SM layer performs User Authorization for that APN as defined > in 3GPP TS 23.060 [6] (Note that it uses the Subscriber > Information Data downloaded at MS registration to perform APN > authorization), selects a \"key\" and an IP address for the tunnel > (e.g. GRE) for the uplink traffic and records the key of the > tunnel (e.g. GRE) provided in GA-SM Activate PDP Context Request > for the downlink traffic.
  * The local Proxy-Gn layer detects that there is no ANCHOR_ADDR > container within the PCO information. Since the EGAN Access Type > container is present, the Proxy-Gn creates a Anchor PDP context > and allocates a TEID for GTP signalling for the Network > Termination. Then, it resolves the APN to find out a GGSN IP > address, and sends Create PDP Context Request to the GGSN per 3GPP > TS 29.060 [5].
5\. Since the GGSN is unchanged, it processes Create PDP Context Request as
defined in 3GPP TS 23.060 [6] and 3GPP TS 29.060 [5]: it returns Create PDP
Context Response to the Proxy-Gn, which is seen as a SGSN.
6\. Upon reception of Create PDP Context Response by the serving EGANC:
a) The EGANC Proxy-Gn function:
  * stores the IP address and the TEID for GTP-C (signalling) of the > GGSN in the Network Termination of the Anchor PDP context;
  * passes these information to the local GA-SM with the PCO field or > appends to the existing PCO field a ANCHOR_ADDR container set > with Proxy-Gn IP address.
b) The serving GA-SM function sends GA-SM Activate PDP Context Accept to the
MS with the PCO as well as the \"key\" and IP address of its selected tunnel.
7\. Upon reception of GA-SM Activate PDP Context Accept, the MS GA-SM layer
performs tunnel switching and sends SMREG-PDP-ACTIVATE-CNF to the MS EGAN
Access Mode Switch via the unchanged SMREG-SAP interface.
8\. The MS EGAN Access Mode Switch stores the address of the Proxy-Gn
anchoring that PDP context (received in the PCO), and sets PDP context to
ACTIVE on the EGAN side. The MS EGAN Access Mode Switch confirms the PDP
Context Activation to the MS Application via unchanged SMREG-SAP as defined in
3GPP TS 24.007 [9].
**c) PDP context de-activation on the EGAN side**
Here, it is assumed that the MS is in EGAN mode and proceeds with the deletion
of the last PDP context associated to the PDP address.
{width="6.26875in" height="3.316666666666667in"}
Figure 10: PDP context deactivation procedure on EGAN mode
1\. The Application requests the deletion of the SMREG-PDP-DEACTIVATE-REQ to
the MS EGAN Access Mode Switch via unchanged SMREG-SAP interface.
2\. Since the MS is currently in GAN mode, the MS Access Mode Switch forwards
SMREG-PDP-DEACTIVATE-REQ to GA-SM layer with PCO set to EGAN Access Type via
unchanged SMREG-SAP interface.
3\. GA-SM sends GA-SM Deactivate PDP Context Request towards the serving EGANC
GA-SM.
4\. Upon reception of GA-SM Deactivate PDP Context Request by the serving
EGANC:
a) The GA-SM entity retrieves the MS PDP context and sends a Delete PDP
Context as defined in the 3GPP TS 29.060 [5] to the Proxy-Gn.
b) The Proxy-Gn forwards Delete PDP Context to the GGSN and the EGAN Access
Termination enters the INACTIVE state.
5\. Since the GGSN is unchanged, it processes the Delete PDP Context Request
as defined in 3GPP TS 23.060 [6] and 3GPP TS 29.060 [5]: it sends Delete PDP
Context Response to the Proxy-Gn, which forwards it to the serving GA-SM
(thanks to the GTP-C parameter stored in the Anchor PDP context) and releases
all the resources related to the Anchor PDP context.
6\. The serving GA-SM retrieves the PDP context thanks to the TEID of Delete
PDP Context Response and sends a De-activate PDP Context Response to the MS
GA-SM.
7\. The MS GA-SM releases all the resources related to that PDP context and
sends SMREG-PDP-DEACTIVATE-CNF via the unchanged SMREG-SAP interface.
8\. Upon reception of SMREG-PDP-DEACTIVATE-CNF, the MS EGAN Access Mode Switch
sets PDP context (NSAPI) to INACTIVE on the EGAN side. Since there is no more
PDP context for the PDP address, the ANCHOR_ADDR associated to the PDP address
is cleared. Finally the MS EGAN Access Mode Switch confirms PDP Context
Deletion to the MS Application via unchanged SMREG-SAP interface as defined in
3GPP TS 24.007 [9].
9\. If the GERAN/UTRAN Access Termination was still ACTIVE, the EGAN sends
Delete PDP Context Request to the SGSN.
10\. The SGSN returns Delete PDP Context Response to the EGANC per 3GPP TS
23.060 [6].
**d) PDP context de-activation on the GERAN/UTRAN side**
Here, it is assumed that:
1) the MS is in EGAN mode and proceeds with the deletion of the last PDP
context associated to the PDP address;
2) the PDP context is not ACTIVE on the GAN side.
{width="6.043055555555555in" height="3.3444444444444446in"}
Figure 11: PDP context deactivation on GERAN/UTRAN mode
1\. The Application requests the deletion of the PDP context by sending SMREG-
PDP-DEACTIVATE-REQ to the MS EGAN Access Mode Switch via unchanged SMREG-SAP
interface.
2\. Since the PDP context is ACTIVE on the GERAN/UTRAN side only, the MS EGAN
Access Mode Switch initiates a SMREG-PDP-DEACTIVATE-REQ towards the GSM/UMTS
SM layer of the MS via unchanged SMREG-SAP interface as defined in 3GPP TS
24.007 [9].
3\. Since the GSM/UMTS SM layer is unchanged, it processes De-activate PDP
Context Request as defined in 3GPP TS 24.008 [4].
4\. Since the SGSN is unchanged, it processes De-activate PDP Context Request
as defined in 3GPP TS 23.060 [6] and 3GPP TS 29.060 [5]: it sends Delete PDP
Context Request to the Proxy-Gn.
5\. The Proxy-Gn retrieves the Anchor PDP context thanks to the TEID of the
GTP-C frame (as in 3GPP TS 29.060 [5]) and the GERAN/UTRAN Access Termination
enters the INACTIVE state. The Proxy-Gn sends Delete PDP Context Request
towards the GGSN whose parameters have been stored in the Network Termination
of the Anchor PDP context. Its behaviour against GGSN is the same as the one
specified in 3GPP TS 29.060 [5].
6\. Since the GGSN is unchanged, it processes Delete PDP Context Request as
defined in 3GPP TS 23.060 [6] and 3GPP TS 29.060 [5].
7\. The Proxy-Gn sends Delete PDP Context Response towards the SGSN (thanks to
the GTP-C parameter stored in the GERAN/UTRAN Termination of the Anchor PDP
context) and releases all the resources related to the Anchor PDP context.
8\. Since the SGSN is unchanged, it processes De-activate PDP Context Response
as defined in 3GPP TS 23.060 [6] and 3GPP TS 29.060 [5].
9\. Since the GSM/UMTS SM layer is unchanged, it processes De-activate PDP
Context Response as defined in 3GPP TS 24.008 [4]: it sends SMREG-PDP-
DEACTIVATE-CNF via unchanged SMREG-SAP interface.
10\. On reception of SMREG-PDP-DEACTIVATE-CNF, the MS EGAN Access Mode Switch
sets PDP context (NSAPI) to INACTIVE on the GERAN/UTRAN side. Since there is
no more PDP context for the PDP address, the ANCHOR_ADDR associated to the PDP
address is cleared. Finally The MS EGAN Access Mode Switch confirms PDP
Context Deletion to the MS Application via unchanged SMREG-SAP interface as
defined in 3GPP TS 24.007 [9].
##### 5.1.1.3.3 PS Handover procedures between GAN and GERAN/UTRAN
**a) Handover from GERAN/UTRAN to EGAN**
The MS is EGAN registered, has an active PDP Context and is not in a CS call
and, e.g. due to some radio environment-based trigger, the MS decides to
handover towards EGAN. The following flow chart describes how active PDP
contexts are maintained. It is controlled by the MS EGAN Access Mode Switch
transparently to the Application.
The synchronization between the CS-PS handover mechanism and the MS EGAN
Access Mode Switch is described in a separate CS-PS merged flow chart.
{width="6.66875in" height="2.890972222222222in"}
Figure 12: GERAN/UTRAN to EGAN PS handover procedure
1\. The MS EGAN Access Mode Switch triggers an SMREG-PDP-ACTIVATE-REQ as if it
were initiated by the MS Application (see section \"First PDP context
activation on the EGAN side\"), except that it inserts in the PCO field the
ANCHOR_ADDR container received on the previous PDP context activate response
(GERAN/UTRAN side).
2\. A tunnel identity (e.g. GRE \"key\") is allocated by the GA-SM for user
plane downlink traffic and provided within the GA-SM-Activate-PDP-Context
Request that is sent to the serving EGANC.
3\. The serving EGANC GA-SM gets the Proxy-Gn address from the ANCHOR_ADDR
container and sends the Create PDP Context Request to that address.
4\. The Proxy-Gn retrieves the Anchor PDP context (based on IMSI and NSAPI):
  * stores the parameter related to the Gn signalling (IP address of > serving GA-SM and TEID for signalling), as well as the source IP > address of the received request;
  * informs the GGSN that the user plane must be now switched to the > EGANC by sending an Update PDP Context Request towards the GGSN. > The payload of Update PDP Context Request contains:
\- The IP address and TEID of the user plane received from the serving GA-SM.
\- The IP address and TEID of the control plane from the Network Termination
of the Anchor PDP context.
5\. Since the GGSN is unchanged, it processes Update PDP Context Request as
defined in 3GPP TS 23.060 [6] and 3GPP TS 29.060 [5]: it returns Create PDP
Context Response to the Proxy-Gn, which is seen as a SGSN. From now on, the
downlink traffic is sent directly to the EGANC.
6\. The Proxy-Gn:
  * processes Update PDP Context Response as defined in 3GPP TS 29.060 > [5];
  * sends Create PDP Context Response to EGANC GA-SM:
\- the control TEID and IP address are those of EGAN Termination;
\- the user plane TEID and IP address are those received in the Update PDP
Context Response (because the Proxy-Gn is not involved in the user plane);
\- an ANCHOR_ADDR container set with Proxy-Gn IP address is appended to the
Protocol Configuration Options field. (if there is no PCO in response from
GGSN, the Proxy-Gn creates one).
7\. The serving GA-SM sends GA-SM Activate PDP Context Response to the MS with
the Protocol Configuration Options as received, as well as the \"key\" and IP
address of its selected GRE tunnel (uplink traffic).
8\. On reception of GA-SM Activate PDP Context Response, the MS GA-SM sends
SMREG-PDP-ACTIVATE-REQ to the EGAN Access Mode Switch.
The MS EGAN Access Mode Switch sets PDP context to ACTIVE on the EGAN side. It
stores the \"key\" and IP address of the tunnel for uplink traffic. Subsequent
uplink frames received from the Application (SN-SAP and RABâ€‘SAP) are
encapsulated in the tunnel and sent to the EGAN.
Note that after the CS/PS handover procedure, the MS EGAN Access Mode Switch
may perform an internal deletion of the GERAN/UTRAN side of the PDP context.
On the Network Side the Access Termination becomes ACTIVEâ€‘SLAVE; a timer is
started and at its expiration the Proxy-Gn initiates a Delete PDP Context
Procedure towards the SGSN.
**b) Handover from EGAN to GERAN/UTRAN**
The MS is still EGAN registered, has an active PDP Context and is not in a CS
call and, e.g. due to some radio environment-based trigger, handover procedure
is initiated on the MS side. The following flow chart describes how active PDP
contexts are maintained. It is controlled by the MS EGAN Access Mode Switch
transparently to the Application.
The synchronization between the CS-PS handover mechanism and the MS EGAN
Access Mode Switch is described in a separate CS-PS merged flow chart.
{width="6.503472222222222in" height="3.902083333333333in"}
Figure 13: EGAN to GERAN/UTRAN PS handover procedure
1\. The MS EGAN Access Mode Switch triggers SMREG-PDP-ACTIVATE-REQ as if it
were initiated by the MS Application (see section \"First PDP context
activation on the GERAN/UTRAN side\"), except that it inserts in the PCO field
the ANCHOR_ADDR container received on the previous PDP context activate
response (EGAN side).
2\. Since the GSM/UMTS SM layer is unchanged, it processes SMREG-PDP-ACTIVATE-
REQ as defined in 3GPP TS 24.008: it sends Activate PDP Context Request to the
SGSN.
3\. Since the SGSN is unchanged, it processes Activate PDP Context Request as
defined in 3GPP TS 23.060 and 3GPP TS 29.060.
4\. APN resolution provides the SGSN with a list of IP addresses of Proxy-Gn
functions residing on EGANC. Since it is possible to configure more than one
Proxy-Gn IP address, for addressing EGANC scalability, the SGSN may select an
\"Interim\" Proxy-Gn IP address that is not the one identified by the
ANCHOR_ADDR container. The \"Interim\" Proxy-Gn reads the ANCHOR_ADDR and
relays the request to the Proxy-Gn specified in the ANCHOR_ADDR. That
behaviour takes on the first request only, all subsequent signalling being
directly routed to the Proxy-Gn Anchor . The \"Interim\" Proxy-Gn is not
involved in further requests which are directly routed between SGSN and Proxy-
Gn Anchor.
5\. Upon reception of Create PDP Context Request, the Anchor Proxy-Gn:
  * Retrieves the Anchor PDP context (based on IMSI and NSAPI).
  * Registers the parameter related to the Gn signalling (IP address of > serving SGSN and TEID for signalling), as well as the source IP > address of the received request, in GERAN/UTRAN Termination.
  * Informs the GGSN that the user plane must be now switched to the > SGSN. For that, it initiates a Update PDP Context Request towards > the GGSN. The payload of the Update PDP Context Request contains:
\- The IP address and TEID of the user plane received from SGSN.
\- The IP address and TEID of the control plane from the Network Termination
of the Anchor PDP context.
6\. Since the GGSN is unchanged, it processes Update PDP Context Request as
defined in 3GPP TS 23.060 and 3GPP TS 29.060. From now on, the downlink
traffic is sent to the SGSN.
7\. The Proxy-Gn processes Update PDP Context Response as defined in 3GPP TS
29.060. Then it sends Create PDP Context Response to the SGSN via the
\"Interim\" Proxy-Gn, with the following GTP-C/GTP-U parameters:
  * Control plane TEID and IP address of the GERAN/UTRAN Termination;
  * User plane TEID and IP address received in the Update PDP Context > Response.
8\. Since the SGSN is unchanged, it processes Create PDP Context Response as
defined in 3GPP TS 23.060 and 3GPP TS 29.060
9\. Since the GSM/UMTS SM layer is unchanged, it processes the Activate PDP
Context Response as defined in 3GPP TS 24.008: it sends SMREG-PDP-ACTIVATE-CNF
to the EGAN Access Mode Switch.
The MS EGAN Access Mode Switch sets PDP context to ACTIVE on the GERAN/UTRAN
side Subsequent uplink frames received from the Application (SN-SAP and RAB-
SAP) are submitted by the MS EGAN Access Mode Switch to the SN-SAP (RAB-SAP)
of the Non Access Stratum of the MS.
Note that the PDP context of the EGAN side, maintained by the EGAN ACCESS MODE
SWITCH, will be deleted during the de-registration of the MS from GAN.
##### 5.1.1.3.4 CS+PS Handover between GAN and GERAN/UTRAN
**a) GERAN to EGAN Handover**
{width="6.382638888888889in" height="5.20625in"}
Figure 14: GERAN to EGAN CS+PS handover procedure
The following assumptions are added to the assumptions stated in 3GPP TS
43.318:
  * the MS has successfully registered to EGANC for operating in EGAN > mode; and
  * the MS has at least one active PDP context.
Steps 1 to 8, and steps 9 to 14 are identical to GAN R6/R7 specified in 3GPP
TS 43.318, subclause 8.14.1.1. For the PS domain handover, steps 8.1 to 8.3
are added.
> 8.1 MS GA-SM layer initiates an Activate PDP Context Procedure towards the
> serving EGANC GA-SM (IP address of the serving GA-SM has been provided with
> the GA-RC Registration Accept). A PCO field in appended with the ANCHOR_ADDR
> container provided by the EGAN during the activation of the PDP in GERAN
> mode.
>
> 8.2 The EGANC GA-SM initiates an Update PDP Context Procedure with the GGSN
> through the Proxy-Gn indicated in the ANCHOR-ADDR container, in order to
> switch the data path from the GGSN towards the EGANC.
>
> 8.3 The PDP context handover ends when the EGANC returns the Activate PDP
> Context Confirmation towards the MS.
Now the data path between the MS and the GGSN is established through the
EGANC.
> 9\. The MS sends the GA-CSR HANDOVER COMPLETE message to indicate the
> completion of handover procedure.
Handovers from GERAN to GAN for terminals in DTM mode is FFS. The handover
from the BSS must be handled for CS domain only, the PS domain data path being
recovered in the target GAN cell via PDP Context Activation procedure
described above. Some techniques such as cell configuration in the BSS, or
specific MS behaviour should be investigated.
**b) UTRAN to EGAN Handover**
{width="6.996527777777778in" height="5.223611111111111in"}
Figure 15: UTRAN to EGAN CS+PS handover procedure
The following assumptions are added to the assumptions stated in 3GPP TS
43.318:
  * the MS has successfully registered to EGANC for operating in EGAN > mode; and
  * the MS has at least one active PDP context.
Steps 1 to 8, and steps 9 to 14 are identical to GAN R6/R7 specified in 3GPP
TS 43.318, subclause 8.14.1.2. For the PS domain handover, steps 8.1 to 8.3
are added.
> 8.1 MS GA-SM layer initiates an Activate PDP context towards the serving
> EGANC GA-SM (IP address of the serving GA-SM has been provided with the GA-
> RC Registration accept). A PCO field in appended with the ANCHOR_ADDR
> container provided by the EGAN during the activation of the PDP in GERAN
> mode.
>
> 8.2 The EGANC GA-SM initiates an Update PDP Context procedure with the GGSN
> through the Proxy-Gn indicated in the ANCHOR-ADDR container, in order to
> switch the data path from the GGSN towards the EGANC.
>
> 8.3 The PDP context handover ends when the EGANC returns the Activate PDP
> Context Confirmation towards the MS.
Now the data path between the MS and the GGSN is established across the EGANC.
> 9\. The MS sends the GA-CSR HANDOVER COMPLETE message to indicate the
> completion of handover procedure.
**c) Handover from EGAN to GERAN**
{width="6.941666666666666in" height="6.455555555555556in"}
Figure 16: EGAN to GERAN CS+PS handover procedure
The following assumptions are added to the assumptions stated in 3GPP TS
43.318:
  * the MS has successfully registered to EGANC for operating in EGAN > mode; and
  * the MS has at least one active PDP context.
The handover from GAN to GERAN procedure is triggered by the MS as in Release
6.
Steps 1 to 17, and steps 18 to 19 are identical to GAN R6/R7 specified in 3GPP
TS 43.318, subclause 8.14.2. For the PS domain handover, steps 17a to 17f are
added.
The Handover for the PS domain takes place after the successful handover of
the CS-Domain. More specifically, the CS handover is identical to the Release
6 CS handover, and the PS handover starts upon the receiving of the GA-CSR
RELEASE message.
That message is the confirmation of the completion of the handover, the CN
indicates to the serving EGANC to release any resources allocated to the MS,
via the Clear Command. The Clear Command does not imply the release of the
resources allocated for the PS domain.
> **17.a)** MS GA-SM initiates an Activate PDP Context towards the CN. Note
> that if the MS is not GPRS attached, the MS MM layer initiates a GPRS Attach
> before sending Activate PDP Context to the Network as specified in 3GPP TS
> 24.007.
>
> **17.b)** The SGSN initiates a Create PDP Context Procedure towards the
> EGANC Proxy-Gn (the Proxy-Gn IP address is provided by the MS in the PCO
> field). As described in the PS-only handover procedure, the APN resolution
> by the DNS may lead the SGSN to route the signalling to an interim Gn-Proxy
> that redirects the signalling to the EGANC thanks to the PCO field.
>
> **17.c)** The EGANC Proxy-Gn initiates an update PDP Context Procedure with
> the GGSN in order to switch the data path from the GGSN towards the EGANC.
>
> **17.d)** The EGANC Proxy-Gn confirms the creation of the PDP context to the
> SGSN and provides the SGSN with the information related to the GTP user
> plane.
>
> **17.e)** The SGSN confirms the activation of the PDP context towards the
> MS. As the two radios run simultaneously, the MS can receive PS downlink
> data via WLAN RAT until this step.
>
> **17.f)** Now the data path between the MS and the GGSN is established
> through the SGSN, and thus, the MS can switch the RAT from GAN to GERAN.
>
> **18.** The MS confirms resource release to the GANC using GA-CSR RELEASE
> COMPLETE message.
>
> **19.** The MS may finally deregister from the GANC, using GA-CSR DEREGISTER
> message.
**d) Handover from EGAN to UTRAN**
{width="6.656944444444444in" height="5.9125in"}
Figure 17: EGAN to UTRAN CS+PS handover procedure
The following assumptions are added to the assumptions stated in 3GPP TS
43.318:
  * the MS has successfully registered to EGANC for operating in EGAN > mode; and
  * the MS has at least one active PDP context.
The handover from GAN to UTRAN procedure is always triggered by the MS as in
release 6.
Steps 1 to 15, and steps 16 to 18 are identical to GAN R6/R7 specified in 3GPP
TS 43.318, subclause 8.14.3. For the PS domain handover, steps 15a to 15f are
added.
The Handover for the PS domain takes place after the successful handover of
the CS-Domain. More specifically, the CS handover is identical to the Release
6 CS handover, and the PS handover starts upon the receiving of the GA-CSR
RELEASE message.
That message is the confirmation of the completion of the handover, the CN
indicates to the serving EGANC to release any resources allocated to the MS,
via the Clear Command. The Clear Command does not imply the release of the
resources allocated for the PS domain. This will takes place at the time the
MS performs the de-registration from EGANC.
> **15.a)** MS GA-SM initiates an Activate PDP Context Procedure towards the
> CN. Note that if the MS is not GPRS attached, the MS MM layer initiates a
> GPRS Attach before sending the Activate PDP Context Request to the Network
> as specified in 3GPP TS 24.007.
>
> **15.b)** The SGSN initiates a Create PDP Context Procedure towards the
> EGANC Proxy-Gn (the Proxy-Gn IP address is provided by the MS in the PCO
> field). As described in the PS-only handover procedure, the APN resolution
> by the DNS may lead the SGSN to route the signalling to an interim Gn-Proxy
> that redirects the signalling to the EGANC thanks to the PCO field.
>
> **15.c)** The EGANCProxy-Gn initiates an Update PDP Context Procedure with
> the GGSN in order to switch the data path from the GGSN towards the EGANC.
>
> **15.d)** The EGANC Proxy-Gn confirms the creation of the PDP context to the
> SGSN and provides the SGSN with the information related to the GTP user
> plane.
>
> **15.e)** The SGSN confirms the activation of the PDP context towards the
> MS. As the two radios run simultaneously, the MS can receive PS downlink
> data via WLAN RAT until this step.
>
> **15.f)** Now the data path between the MS and the GGSN is established
> across the SGSN, and thus, the MS can switch the RAT from GAN to UTRAN.
>
> **17.** The MS confirms resource release to the GANC using the GA-CSR
> RELEASE COMPLETE message.
>
> **18.** The MS may finally deregister from the GANC, using GA-CSR DEREGISTER
> message.
##### 5.1.1.3.5 APN resolution in EGAN mode
This subclause describes two different configurations for APN resolution, the
first option being to configure EGAN capable terminals with specific APNs, the
other option being to reuse the same APN for all terminals. Either option can
be selected by the operator depending on its deployment configuration (e.g. on
whether S-CDR are used in VPLMN).
**a) Option1 : specific APN for EGAN capable terminals**
For this option, a new corresponding APN per existing APN is created
specifically for EGAN MS. The EGAN capable MS has to use the specific EGAN
APN.
DNS servers resolves these new EGAN APN into a list of Proxy-Gn, whereas still
resolving the corresponding APN into a list of GGSN.
PDP contexts activated by an EGAN capable handset on the GERAN/UTRAN side
would results in signalling through a Proxy-Gn, whereas PDP context activated
by an non EGAN capable handset would result in a direct signalling from the
SGSN to the GGSN.
{width="5.991666666666666in" height="2.3125in"}
Figure 18: EGAN capable terminal
{width="5.991666666666666in" height="2.3125in"}
Figure 19: non EGAN capable terminal
Doubling the number of APN may be problematic for some operators. This can
have incidence on:
  * their charging process;
  * the subscriber configuration at HSS or HLR;
  * SIM devices.
**b) Option2 : same APN for EGAN and non EGAN capable handsets**
In this option, the same APN is used by EGAN capable and non EGAN capable
handsets.
Since it is assumed the SGSN is not modified for EGAN, and since there is no
specific EGAN APN, the PDP creation requests are routed the same way by the
SGSN, no matter whether the handset is EGAN capable or not. Resolving an APN
from the SGSN or from the **GA-SM of the EGANC must result in a list of Proxy-
Gn.**
The Proxy-Gn is able to distinguish among the incoming PDP creation requests
those from EGAN capable handsets from those of non EGAN capable handsets (from
the PCO field). The Proxy-Gn is so able to:
  * either create an anchor PDP context (EGAN capable handset case); or
  * just relay the PDP creation request (non EGAN capable handset case).
Anyway the Proxy-Gn has to resolve the requested APN into an IP address of a
GGSN.
{width="5.991666666666666in" height="2.3125in"}
Figure 20: EGAN capable terminal
{width="5.991666666666666in" height="2.3125in"}
Figure 21: Non EGAN capable terminal
The same APN has to be resolved:
  * in a **list of Proxy-Gn IP addresses** by the SGSN and by the GA-SM > of the EGANC;
  * in a **list of GGSN IP addresses** by the Proxy-Gn of the EGANC.
This can be done by introducing a new DNS server (the EGAN DNS server) which
resolves APN into a list of Proxy-Gn IP address. The legacy DNS server is kept
resolving the APN into a list of GGSN.
{width="5.875in" height="3.7090277777777776in"}
Figure 21a: EGAN DNS server
The SGSN and GA-SM of the EGANC resolve their APN on an EGAN DNS server and
get back a list of IP addresses of Proxy-Gn.
**The Proxy-Gn resolve their APN on the legacy DNS server and get back a list
of** IP addresses **GGSN.**
**Note that the EGAN DNS server can reside on the same host as the legacy DNS
server, and may be just an other occurrence of DNS server with a different IP
address.**
Every PDP creation request issued by the SGSN has to be processed on the EGANC
even for non EGAN capable handsets. Note that in the case of non EGAN capable
handset, only the PDP creation request goes through the Proxy-GN. **The
subsequent exchanges for this PDP context takes place directly between the
SGSN and the GGSN** (PDP context update/delete, secondary PDP context
create/update/delete).
##### 5.1.1.3.6 SMS in EGAN mode
A 3GPP subscriber has a configuration for SMS domain preference stored in the
HLR: \"_transfer of SM option_ \". This parameter prioritizes the domains (CS
or PS) to use for SMS delivery to the MS. When a MS is reachable through CS
and PS domain, the SMS server tries first to deliver the SMS to the subscriber
through the preferred domain. In case the delivery fails on the preferred
domain, the SMS server then tries to deliver the SMS on the other domain.
When the EGAN MS is under GSM/UMTS radio, SMS are sent to and received from
the MS as usual for 3GPP terminal, according to the preferred domain
configured in the Core Network.
When the EGAN MS is running in GAN mode, SMS will be delivered via the CS
domain regardless of the preferred domain configured for the subscriber. PS-
only terminals are not able to receive/send SMS unless specific GA-SM
procedure is defined. This is FFS.
**a) Delivering SMS when CS domain is a preferred option**
For an EGAN subscriber that:
  * is under EGAN mode; and
  * is configured with CS as preferred domain at the HLR; or
  * is configured with PS as preferred domain at the HLR but that has > already been detected as unreachable through the SGSN.
The SMS delivery will be attempted directly through the MSC.
{width="6.655555555555556in" height="2.7333333333333334in"}
Figure 22: SMS delivery with CS preference
**b) Delivering SMS when PS domain is a preferred option**
For an EGAN subscriber that:
  * is in EGAN mode;
  * is configured with PS as preferred domain at the HLR; and
  * has not yet been detected as unreachable by the SGSN.
The SMS delivery will first be attempted through the SGSN but will finally be
delivered through the MSC.
{width="6.386111111111111in" height="3.8375in"}
Figure 23: SMS delivery with PS preference
##### 5.1.1.3.7 EGAN Registration and subscriber management in PS Domain
**a) EGAN Registration**
The serving EGANC performs the attachment of the MS to the Core Network in the
PS domain during the GA-RC Register Request procedure. Note that the
Authentication and Discovery procedures remain those defined in 3GPP TS 43.318
[2] and that only a new parameter is added to the GA-RC Register Request to
trigger the EGAN PS domain attachment. The EGAN registration takes place once
the IPSec tunnel has been set-up and after the GAN discovery procedure.
{width="6.002083333333333in" height="2.488888888888889in"}
Figure 24: EGAN PS registration procedure
1\. The MS initiates a registration procedure towards the EGANC whose address
has been retrieved during the discovery procedure. The message contains the
information that the MS is EGAN capable. The message contains the information
that the MS is EGAN capable.
2\. The EGANC sends AA-Request message to initiate the registration procedure.
3\. The AAA server registers the serving GA-SM address of the subscriber, and
registers itself by sending Server-Assignment-Request to the HSS.
4\. HSS registers the AAA server address and downloads the subscription
profile to the AAA server by Server-Assignment-Answer message.
NOTE: If AAA server already has the subscriber profile, this step may be
skipped.
5\. AAA server responds to the EGANC with AA-Answer message.
6\. The EGANC responds to the MS register request, with a modified GA-RC
register accept in which it provides the address of the serving GA-SM.
**b) EGAN deregistration**
The standard GA-RC De-registration procedure is unchanged as seen by the
terminal. This procedure enables the MS to explicitly inform the EGANC that it
is leaving GAN mode.
The EGANC can also autonomously release the MS registration context, and send
a GA-RC DEREGISTER message to the MS. Alternatively, the EGANC can implicitly
deregister the MS by closing the TCP connection with the MS.
The EGANC initiates a \"Purge Procedure\" toward the serving AAA server of the
MS and any active PDP context is deleted.
{width="6.58125in" height="2.196527777777778in"}
Figure 25: De-registration procedure initiated by EGANC
1\. EGANC decides to de-register the user (due to various reasons including
inactivity timer expired, etc.). It sends Deregistration message to MS.
2\. The EGANC deletes the PDP context and sends Session-Termination-Request to
AAA server.
3\. The AAA server removes the address of the serving GA-SM previously
registered and sends the acknowledgement using Session-Termination-Answer
message.\ Optionally, if the AAA server wants to purge the MS state, it starts
the purge procedure by sending SAR message with server assignment type set to
\'user_deregistration\'. HSS removes the AAA server name assigned for the user
and sends SAA to the AAA server.\ The serving GA-SM releases all the resources
related to that MS.
{width="6.569444444444445in" height="2.2in"}
Figure 26: De-registration procedure initiated by MS
**c) Update subscriber profile**
In case subscriber profile of the user is updated on the HSS, a user profile
update procedure is started by the HSS.
{width="6.61875in" height="3.4243055555555557in"}
Figure 27: Update Subscriber Profile
The AAA server has been updated with new subscriber data information:
1\. When a user profile is updated, HSS downloads the updated profile to AAA
server using Push-Profile-Request message.
2\. AAA server responds with Push-Profile-Answer message.
3\. If a serving GA-SM (EGANC) is registered for this subscriber, the AAA
server updates the subscriber information. Then it requests the re-
authorization of this user to the EGANC by sending Re-auth-Request message.
4\. The EGANC responds to AAA server with Re-auth-Answer. This request from
AAA server triggers the re-authorization at the EGANC.
5\. EGANC sends AA-Request with the APN that is currently served.
6\. The AAA server compares the APN with the updated profile and sends AA-
Answer if a user is authorized to access the APN under updated profile. This
may trigger PDP context update or deletion.
**d) HSS Purge procedure**
The HSS purge procedure is initiated by the HSS towards the registered AAA
server when a new AAA server registers or the user subscription is cancelled
and this user cannot be serviced.
{width="5.220138888888889in" height="2.513888888888889in"}
Figure 28: HSS purge procedure
1\. When a HSS decides that the registration needs to be terminated at the AAA
server, it initiates the purge procedure to the AAA server by sending
Registration-Termination-Request message.
2\. The AAA server deletes the subscriber information and responds to HSS by
Registration-Termination-Answer message.
3\. If there is a GA-SM registered at the AAA server for that subscriber, a
purge procedure is initiated to the GAâ€‘SM for that subscriber. AAA server
sends Abort-session-request message to the EGANC for this purpose.
4\. The EGANC deletes all the active PDP contexts and releases the resources
related to that subscriber. Then it responds with Abort-session-answer
message. Note that it affects the PS domain only, and does not cancel the GAN
registration.
##### 5.1.1.3.8 Network Requested PDP Context Activation (NRPCA)
NRPCA requires subscribers having static IP addresses. The GGSN must be
configured with the mapping between a subscriber IP address and its IMSI/APN
pair.
When a GGSN receives a frame an the IP network for such an IP address, it has
to report this event to the SGSN of the subscriber thanks to the PDU
Notification request/response exchange defined in 3GPP TS 29.060. The main
task for the GGSN is to find out which SGSN the subscriber is attached to. Two
possibilities:
1) A PDP context already exists on the GGSN for this IMSI.\ The PDU
notification is sent to the control address of the existing PDP context.
2) No PDP context exists on the GGSN for this IMSI.\ The GGSN invokes the user
location services. Two optional interfaces exist for this purpose:
a. A MAP interface over SS7 between the GGSN and an HLR (3GPP TS 29.002).
b. A Gn interface over IP between the GGSN and a SGSN (location service of
3GPP TS 29.060).
It can be noticed that the MAP interface over SS7 (a) is not a natural
interface for a GGSN, and this is the reason why this service has been ported
on the Gn interface (b) which is a native GGSN interface.
The GGSN has to be configured with the IP addresses of the nodes that can
provide it with the Gn location service. In a standard 3GPP network these are
SGSN IP addresses. In the enhanced Up A/Gn alternative these are EGANC IP
addresses instead.
The EGANC, which provides the Gn location service to the GGSN, has to be
configured with the IP addresses of the SGSN that can provide it with the Gn
location service. These are the IP addresses that were previously configured
on the GGSN in standard 3GPP network.
**a) The subscriber is EGAN registered**
Initial conditions:
  * an IP frame is received by the GGSN for an IP address for which > NRPCA is configured;
  * no PDP context is already activated for this IMSI on the GGSN;
  * this IMSI is registered on EGAN side.
Either the GGSN can directly select the EGANC where the subscriber is
registered, or the EGANC can be retrieved via the AAA-HSS Location procedures
standardized in 3GPP standardized Diameter interface (upgrade of Wx).
After the EGANC is selected, the PDU notification can be delivered from the
GGSN to the EGANC the subscriber is registered to.
{width="5.747916666666667in" height="3.2895833333333333in"}
Figure 28a: Subscriber EGAN registered
> 1\. The GGSN send the \"Gn:PDU notification request\" to the EGANC address
> that it has retrieved thanks to the location request.
>
> 2\. The EGANC stores the information of the request and sends back the
> \"Gn:PDU notification response\".
>
> 3\. The EGANC request the MS to activate a PDP context by sending it a \"GA-
> SM:PDP context activation request\". This is the same message as the
> \"SM:PDP context activation request\" defined in 3GPP TS 24.008 but it is
> sent to the MS over the Wifi RAT.
>
> 4\. The MS proceeds as requested to a PDP context activation.
>
> 5\. The EGANC sends a \"Gn:create PDP context request\" using information it
> has stored from the previous PDU notification.
>
> 6\. - 7. end the PDP context activation normally on EGAN side.
**b) The subscriber is GPRS attached**
Initial conditions:
  * an IP frame is received by the GGSN for an IP address for which > NRPCA is configured;
  * no PDP context is already activated for this IMSI on the GGSN;
  * this IMSI is not registered on EGAN side but is GPRS attached.
Either the GGSN can directly select the EGANC where the subscriber is
registered, or the EGANC can be retrieved via the AAA-HSS Location procedures
standardized in 3GPP standardized Diameter interface (upgrade of Wx).
The PDU notification can then be delivered by the GGSN to the EGANC that has
retrieved the SGSN the subscriber is attached to.
{width="5.96875in" height="3.3541666666666665in"}
Figure 28b: Subscriber GPRS attached
> 1\. The GGSN send the \"Gn:PDU notification request\" to the EGANC address
> that has processed the previous location request (its address was set in the
> location response).
>
> 2\. The EGANC retrieves the IP address of the SGSN the subscriber is
> attached to (it has previously stored it). It forwards the \"Gn:PDU
> notification request\" to this SGSN, and substitutes the GGSN IP address and
> TEID with its own IP address and TEID.
>
> 3\. The SGSN receives the \"Gn:PDU notification request\" and acknowledges
> it.
>
> 4\. The EGANC forwards the \"Gn:PDU notification response\".
>
> 5\. The SGSN upwards a \"SM:PDP context activation request\" to the MS.
>
> 6\. The MS initiates a PDP context activation procedure as defined in 3GPP
> TS 23.060.
>
> 7\. The SGSN sends a PDP create request to the EGANC which IP address and
> TEID has been provided in the previous \"Gn:PDU notification request\".
>
> 8\. The EGANC initiates a \"Gn:create PDP context request\" procedure
> towards the GGSN IP address and TEID received in the PDU notification of
> step 1.
>
> 9\. - 11. Terminate the PDP context activation normally.
##### 5.1.1.3.9 Roaming aspects
In GPRS/UMTS, the subscriber can activate a PDP context by providing an APN
with or without an Operator Id. Operator Id is used to force the SGSN to
select the APN in the Operator Id PLMN, which could be either the VPLMN or the
HPLMN. When the Operator Id is not present, the VPLMN selects the PLMN
according to the subscriber parameter \"VPLMN allowed\" from the HLR
subscriber profile (refer to 3GPP TS 23.060 Activation procedure and annex A).
Three cases are described depending on the APN in the activation request
message from the terminal:
  * APN with Operator Id.
  * APN without Operator Id, and \"VPLMN allowed\" is not set for that > subscriber.
  * APN without Operator Id, and \"VPLMN allowed\" is set for that > subscriber.
Now, let\'s assume same APN for EGAN capable and not capable terminals. The
SGSN always routes signalling messages to a Proxy-Gn (first request only for
non EGAN MS). _Note that Proxy-Gn is a function of the EGANC._ Another
assumption is that must be no modification of the SGSN software, therefore the
APN resolution algorithm is kept unchanged.
The DNS servers are unchanged. They respond to queries as usual in roaming
cases. Nevertheless some entries may be added or modified in the DNS servers.
There are two different roaming cases.
**a) The visited PLMN is EGAN capable**
This is the case when the VPLMN offers GAN/EGAN services, and the Home
Operator has roaming agreements with the Visited Operator. In this case, the
Default GANC in the HPLMN may have redirected the terminal to a Serving GANC
in the VPLMN.
A PDP context activation through the EGANC must reach the same PLMN that it
would have reached without the EGANC.
The principle is based on DNS entries configuration: the DNS entries for \"APN
-> GGSN list\" are replaced by two entries:
a) \"APN -> Proxy-Gn list\": this is used by the SGSN to route towards the
Proxy-Gn;
b) \"EGANAPN -> GGSN list\": this is used by the proxy-GN to route towards the
GGSN. Note that the proxy-Gn will append \"EGAN\" to the APN sent by the
terminal before calling the DNS server. The mechanism is shown in figures 29
and 30 depending on whether the proxy-Gn is in the VPLMN or in the HPLMN.
{width="5.915972222222222in" height="2.145138888888889in"}
Figure 29: Routing from SGSN to GGSN via EGANC in VPLMN
{width="5.915972222222222in" height="2.145138888888889in"}
Figure 30: Routing from SGSN to GGSN via EGANC in HPLMN
Two configurations are possible:
1.1) Proxy-Gn and GGSN are chosen in the same PLMN.
1.2) The Proxy-Gn is selected in the visited PLMN.
**b) The visited PLMN is not EGAN capable**
This is the case when the VPLMN does not offer GAN/EGAN services. In this
case, the Serving GANC is in the HPLMN. The terminal is aware of that, so it
can provide the APN with Operator Id = HPLMN (appended by the GAâ€‘SM layer)
when the terminal requests GAN PS services.
The visited DNS entries are unchanged (the visited PLMN does not support GAN
or EGAN).
The former Home DNS entries for Â« APN->GGSN list Â» are replaced with two
entries:
  * Â« APN->Proxy-GN list Â» (for SGSN to route towards a Proxy Gn).
  * Â« EGAN_APN->GGSN list Â» (for Proxy GN to route towards GGSN).
Compared to legacy GAN, which does not allow mobility in that case, reaching
the proxy-Gn in the HPLMN enables to provide PS mobility between Wifi and
GPRS/UMTS although the visited network is not EGAN and even not GAN capable.
#### 5.1.1.4 Terminal architecture and impacts
##### 5.1.1.4.1 Introduction
The main aspects related to protocols and functional blocks in the MS are the
following:
1) Transport layers (IPsec/IP/L2/L1) are kept unchanged.
2) R6/R7 GAN protocols for CS domain (GA-CSR) are kept unchanged.
3) R6/R7 GAN protocols for authentication, security and GAN
discovery/registration (GA-RC) are kept unchanged, except that there will be a
few additional parameters (e.g. classmark, EGAN network capability, packet
node IP address).
4) PS domain: there is no impact to 3GPP NAS layer. The new access mode switch
is located under application IP layer and switches between EGAN mode and
GPRS/UMTS mode. There is no impact on GPRS/UMTS protocol stacks and all the
enhanced GAN procedures are transparent to these protocol stacks.
5) This new terminal architecture applies to both 2G-only and 3G/2G terminals.
6) For backward compatibility with GAN R6 in the PS domain, GA-PSR, GA-RC and
Access Mode Selection may be kept together with the PS EGAN functionality to
allow the terminal to access a both a EGAN network and a R6 GAN legacy
network.
##### 5.1.1.4.2 CS domain Control Plane
The CS domain is unchanged from R6/R7.
{width="2.3833333333333333in" height="5.464583333333334in"}
Figure 31: MS CS Domain Control plane Architecture
##### 5.1.1.4.3 CS domain User Plane
The CS domain unchanged from R6/R7.
{width="6.101388888888889in" height="2.4159722222222224in"}
Figure 32: Up CS Domain User Plane Protocol Architecture
##### 5.1.1.4.4 PS domain
The enhanced Up solution architecture is based on 3GPP TS 24.007 [9] and
standardized reference points. There are no modifications to existing blocks
or interfaces.
Figure 3 shows the terminal architecture for PS domain for GSM/GPRS-GAN
terminal, and Figure 4 shows the terminal architecture for PS domain for UMTS-
GSM/GPRS-GAN terminal.
The yellow colour represents the parts that already exist in R6 GAN and used
without modification.
The blue colour represents the parts that are new for the enhanced GAN.
The grey parts are shown here to enable the MS to connect to R6 GAN, for
backward compatibility purposes.
{width="6.471527777777778in" height="6.011805555555555in"}
Figure 33: GSM-GPRS-GAN terminal architecture
**MA-SM (Multi-access session management) in the Mobile Station**
MA-SM is located at RAB-SAP/SN-SAP(xn) application interface for user plane
and SMREG-SAP application interface for control plane, which are kept
**unchanged.** It maintains the sessions towards the application. Whenever an
application is requested to run, it triggers the creation of the appropriate
PDP context for that application and stores the resulting PDP context
information. It decides which access is to be used at certain point of time.
When the user is in GERAN/UTRAN mode, the MA-SM commands the GPRS SM to
execute the PDP context management. When the user is in GAN mode, the MA-SM
commands the GA-SM to execute the PDP context management. MA-SM also keeps
track of the PDP contexts that have become active during each access, so that
it can synchronize the PDP contexts across the accesses.
In summary, the MA-SM provides the intelligence for the handover and the
session management across the multiple accesses. It keeps the master PDP
contexts which are towards the application and synchronizes the PDP contexts
across these accesses (i.e. any PDP Context activated while in eGAN mode will
be triggered over the GERAN/UTRAN RAT at a point in time determined by MA-SM).
Since it is located above the EGAN access mode switch, all the GPRS and GAN
related procedures will be performed without any changes. The MA-SM can
activate the PDP contexts any time in any access (GAN, GERAN or UTRAN) as long
as the radio is available. This means that the PDP contexts can be activated
over GERAN/UTRAN right after they are activated over GAN when the user is in
GAN mode. This makes the hand-back to GERAN/UTRAN procedure quick.
The MA-SM does not add any protocol layer, but it is acting as a functional
entity. There is a similar functionality in the EGANC (i.e. correlating the
user traffic from GERAN/UTRAN and GAN and triggering the switch). The
\'Mobility Logic\' in eGANC is performs the functionality (see subclause
5.1.1.3.1). However, there is no peer-to-peer communication for MA-SM in the
mobile station and the mobility logic in eGANC. When there is a need to
exchange information between these two entities (e.g. for selecting the same
eGANC over GERAN/UTRAN and GAN), this information is exchanged indirectly via
PCO field included within SM messages. The MA-SM is the entity that generates
and consumes this PCO information.
**EGAN Access mode switch**
EGAN Access Mode Switch is located under the MA-SM. It switches the mode
between EGAN and 3GPP as indicated by the MA-SM. It performs the following
functionalities:
  * Interfaces UDP/IP via the new WSMREG-SAP interface for the control > plane, and via the new interface WRABâ€‘SAP for the user plane.
  * Handles **the PS handover (EGAN mode switching) and multiplexes > requests based on the current mode** (switching between the > application signalling at upper SMREG-SAP and either GSM/UMTS > SMREG-SAP or the new WLAN SMREG-SAP). This is transparent to the > signalling transferred in GERAN/UMTS mode.
  * Switches the user plane data between Application SN-SAP/RAB-SAP and > either GSM/UMTS SN-SAP/RAB-SAP or WLAN RAB SAP.
**GA-SM (EGAN packet session management)**
GA-SM terminates the 24.008-like Session Management signalling protocol for
GAN. Its peer entity is in the EGANC. It is in charge of managing/maintaining
PDP context towards the EGANC. This is independent to 3GPP NAS layers.
**User Plane tunnelling**
The user plane data is sent to a new interface from EGAN access mode switch to
be tunnelled over IP. The tunnel is necessary to identify the flow inside the
IPsec. This identification may be done by the tunnelling protocol (e.g. GRE)
or by the flow identification at the IP layer. Details are ffs.
{width="6.665277777777778in" height="5.743055555555555in"}
Figure 34: UMTS-GSM-GPRS-GAN terminal
#### 5.1.1.5 EGAN handovers and LA/RA Update signalling
##### 5.1.1.5.1 Introduction
This discusses potential issues and impacts on dimensioning for each
alternative (Enhanced Up A/Gn, Combined GANC/SGSN, Iu interface) due to LA/RA
Update signalling and handovers.
##### 5.1.1.5.2 GERAN/GAN Scenario
In the R6/R7 GAN implementations, special care have been taken to avoid an
increase of LA/RA Update signalling towards the HLR, as well as inter-MSC
handovers.
In GAN, the user moves frequently between WLAN coverage and GSM/UMTS coverage,
and that may lead to an unexpected increase of LA/RA Update and inter-MSC
handovers.
{width="6.020138888888889in" height="1.9479166666666667in"}
Figure 35: LA Update signalling issue at UE move between WLAN and GERAN
One of the possible solutions is to connect the GANC to the same MSC and SGSN
that control the GSM/UMTS cells of the same geographical area, but this is an
expensive way of solving the issues.
{width="6.020138888888889in" height="1.9479166666666667in"}
Figure 36: LA Update procedure processed at VMSC; no signalling to HLR at UE
WLAN/GERAN move
Another solution the use of \"logical GANC\" concept where several \"logical
GANC\" functions are implemented in a single physical remote node.
The following figure shows the CS domain. Same can be done for PS domain.
{width="5.998611111111111in" height="4.220138888888889in"}
Figure 37: Logical GANC concept; no signalling to HLR at UE WLAN-GERAN move
within same area
##### 5.1.1.5.3 UMTS/GERAN/GAN Scenario
In R6/R7 GAN, when considering UMTS, CS domain and PS domain must be studied
separately:
  * MSC equipments are generally 2G and 3G capable. This allows to avoid > an increase of LA Update signalling towards the HLR when the UE > moves between 2G, 3G and GAN. It also allows to avoid inter-MSC > handovers.
  * SGSNs on the field are most of the time either 2G or 3G capable, but > not always both2G-3G capable. GAN and 2G cells in the same area > can be controlled by the same SGSN node. This avoids increase of > RA Update signalling when the MS moves between 2G and GAN.\ > However, there is still an RA Update procedure each time the UE > moves between 3G and GAN. And additional inter-SGSN > handovers/cell-reselection if the UE is in a PS session.
In other words, if the 2G-SGSN and the 3G-SGSN are separated, RA Update
signalling towards the HLR can be avoided at 2G-WLAN moves, but it will
increase due to 3G-WLAN moves. The increase of signalling will depend on the
3G/2G/WLAN indoor and outdoor coverage overlap. Consequently, the operator
will have to take care of possible re-dimension of existing SGSNs.
##### 5.1.1.5.4 GAN Enhancement alternatives
The same issue is discussed below for GAN Enhancements alternatives (Enhanced
Up A/Gn, Iu-GAN, combined GANC-SGSN), when 2G-SGSN and 3G-SGSN are separate
physical nodes.
**a) Combined GANC-SGSN**
In the case 3G-SGSN and 2G-SGSN/GANC are separated, the issue is the same as
R6 GAN, therefore possible reâ€‘dimensioning may be needed to be taken into
account in the same manner.
**b) GAN Iu interface**
In the case of Iu-ps interface alternative, RA Update signalling towards the
HLR can be avoided between 3G and GAN, but it cannot be avoided between 2G and
GAN. Same issue for inter-SGSN handovers/cell-reselections.
In other words, if the 2G-SGSN and the 3G-SGSN are separated, RA Update
signalling towards the HLR can be avoided at 3G-WLAN moves, but it will
increase due to 2G-WLAN moves. The increase of signalling will depend on the
3G/2G/WLAN indoor and outdoor coverage overlap. Consequently, the operator
will have to take care of possible re-dimension of existing SGSNs.
**c) Enhanced Up A/Gn**
In the Enhanced Up A/Gn alternative, there is no need for RA concept as stated
in subclause 5.1.1.3.1.
Therefore, there is no RA Update procedure when entering GAN. Moreover, the RA
Update procedure when entering GPRS or UMTS only occurs once: there is no RA
Update signalling if the UE is moving back to GPRS/UMTS in a cell in the
previous RA.
In addition, as there is no context transfer at PS handovers, and no inter-
SGSN signalling.
Consequently, the dimensioning of already installed SGSNs is not significantly
impacted.
Enhanced Up A/Gn alternative saves RA Update signalling compared to the others
solutions. Moreover, Enhanced Up A/Gn alternative does not impact
significantly existing SGSN dimensioning whereas the others solutions may
force the operator to revise the dimensioning of its already installed SGSNs.
#### 5.1.1.6 Proxy-Gn Load and Performance
##### 5.1.1.6.1 Introduction
In the Enhanced Up A/Gn alternative, every PDP context activation in an E-GAN
network has to go through the Proxyâ€‘Gn function of an E-GANC, even when the MS
is not E-GAN capable.
{width="5.988194444444445in" height="2.748611111111111in"}
Figure 38: Proxy-Gn function of an E-GANC
The Proxy-Gn just relays the first message exchange (one uplink, one downlink)
PDP context creation request/response in the case of a non E-GAN capable MS.
After this first exchange, all further exchanges for this non E-GAN PDP
context take place directly between the SGSN and the GGSN as usual in a GPRS
network (secondary PDP context activation, deletion, modification / PDP
context deletion, modification / user traffic).
This following sections study the impacts in terms of:
  * Proxy-Gn CPU load.
  * Proxy-Gn memory consumption.
  * Added signalling delay.
##### 5.1.1.6.2 Assumptions
A usual ratio for network dimensioning is : the number of the PDP context
activation per hour on the busiest hours is 12% of the number of GPRS
subscribers i.e. one subscriber activates one PDP context every 8 hours.
For one million of GPRS subscribers this makes a rate of 120,000 PDP context
activations per hour or 34 PDP context activations per second.
Moreover, the Proxy-Gn is never used for the RA Update procedures.
And the number of RA Update requested per subscriber is far more frequent and
the number of RA Update procedures is much higher than the number of PDP
context activations. This means the additional processing power required for
the Proxy-Gn function will have a negligible impact on the dimensioning of the
CN nodes.
##### 5.1.1.6.3 CPU Load
##### 5.1.1.6.3.1 PDP Context Creation Request {#pdp-context-creation-request
.H6}
When a Proxy-Gn receives GTP-C PDP context creation request from the SGSN. It
has to:
  * parse the message;
  * lookup for the IMSI & APN;
  * create a context;
  * resolve the APN (DNS);
  * format and send a GTP PDP context creation request to the GGSN;
  * start a timer.
This is more or less what the \"Gn library\" does except that:
  * the Gn library has not to process DNS resolution (speed up);
  * the Gn library is handicapped by a semaphore (slow down).
NOTE: It must be noticed that only few APN exist in the network, and a Proxy-
Gn only takes care of a limited number of them. The time to live of the DNS
entries (GGSN IP address) should be rather long, and most of the DNS
resolutions can be processed locally.
It is estimated that the average PDP context creation request will take less
than 20Âµs.
##### 5.1.1.6.3.2 PDP Context Creation Response {#pdp-context-creation-
response .H6}
On the PDP context creation response from the GGSN, the Proxy-Gn has to:
  * lookup for the TEID;
  * stop a timer;
  * forward the response to the SGSN;
  * free the context (non E-GAN capable handset).
This is very similar to what our Gn library does except that:
  * the Gn library is handicapped by a semaphore (slow down).
It is estimated that the average PDP context creation response will take less
than 10 Âµs.
##### 5.1.1.6.3.3 Conclusion {#conclusion .H6}
A board of the E-GANC that spends 70 % of the time on this process and left
only 30 % of the time for other processing is able to process 700 000 Âµs / 30
Âµs = **23 000** PDP context creation request/response per second. In the
busiest hours a rate of 34/s should be enough for 1Million GPRS subscribers.
For high availability reasons, an E-GANC should include at least 2 Proxy-Gn,
and a network should probably include more than one E-GANC. The CPU load of
the Proxy-Gn induced by the relay of PDP context creation of non E-GAN capable
MS is not an issue.
##### 5.1.1.6.4 Memory Consumption
The Proxy-Gn should be able to keep a context for every pending request toward
the GGSN until it has responded back to the SGSN. From the experience of our
\"Gn library\" we know that a context of 1Kbytes is enough for a request.
**For 1Million GPRS subscribers, 34 request/s may be issued in the busiest
hours. A pool of 8K contexts should be enough to store the pending requests
for:**
  * 4 minutes for a 1M GPRS subscriber network;
  * 24 seconds for a 10M GPRS subscriber network.
The Proxy-Gn should reasonably expect the response of the GGSN within less of
24 seconds.
8 Mbytes of memory per Proxy-Gn should be enough to handle the pending PDP
creation requests toward the GGSN.
The memory consumption of the Proxy-Gn induced by the relay of PDP context
creation of non E-GAN capable MS is not an issue.
##### 5.1.1.6.5 Signalling Delay
An extra delay is introduced by the Proxy-Gn. This delay is equal to:
  * delay of the request propagation to the Proxy-Gn.
  * \+ delay of the creation processing by the Proxy-Gn.
  * \+ delay of the creation response processing by the Proxy-Gn.
  * \+ delay of the response propagation to the SGSN.
As seen in the \"CPU load\" section, the signalling delay of the message
processed by the Proxy-Gn should be negligible. The signalling delay is
essentially induced by the message transfer in the network.
On the field with today\'s R6 GAN equipment, it has been measured an average
of 30 ms duration from the time an activate PDP context request is issued by
the GANC until the response is received back from the SGSN.
{width="6.009722222222222in" height="2.895138888888889in"}
Figure 39: Signalling delay
These 30 ms include:
  * 2 message transfers on Gb over frame relay;
  * 2 message GTP-C transfers over IP;
  * a PDP creation processing on the GGSN;
  * a PDP activation processing on the SGSN.
As stated in CPU load subsection, the additional signalling delay induced by
the Proxy-Gn when relaying a PDP context creation of non E-GAN capable MS
should be less than 30 Âµs, which is an order of magnitude 100 times lower than
the end-to-end signalling delay for a PDP Context Activation.
The additional signalling delay induced by the Proxy-Gn function is therefore
negligible.
### 5.1.2 Combined GANC/SGSN
#### 5.1.2.1 Introduction
The main principles of this solution are the following:
  * The GANC and SGSN nodes are combined into a new node, the Combined > GANC/SGSN.
  * The Up-interface is kept unmodified.
  * As Up-interface is unmodified, the 3GPP TS 24.008 is also clearly > unmodified.
  * The Combined GANC/SGSN uses the A-interface to connect to the CS > domain services in the CN (i.e. the MSC).
  * This solution could also be called \"Generic Access to the A and > Gn-interface\" i.e. there are some similarities with the proposal > from Alcatel.
The solution mainly optimizes the PS domain of the GAN in the following way:
  * The Gb-interface is removed and as such there is the potential for > the removal of some of the corresponding protocol layers like > BSSGP and NS.
  * This decreases latency as one node and one interface are removed in > the \"chain-of-nodes-and-interfaces\" handling the PS domain.
#### 5.1.2.2 Architecture
The following sections describe the main parts of the Combined GANC/SGSN
solution. As the CS domain remains unchanged, the control and user plane
architectures are described only for the GAN PS domain.
The existing architecture is as following (from 3GPP TS 24.008 [4]).
{width="6.2972222222222225in" height="3.129861111111111in"}
Figure 40: Existing architecture
The new proposed architecture is as following.
{width="6.530555555555556in" height="3.051388888888889in"}
Figure 41: New proposed architecture
The above figure on the new proposed architecture shows only the parts
strictly related to EGAN. It is anyhow worth mentioning that without the
requirement to specify how the Combined GANC/SGSN node is to be implemented it
can naturally also function (i.e. be perceived as) either as i) a 2G-SGSN with
Gb-interfaces towards BSS(es) and/or ii) as 3G-SGSN with Iu-PS interfaces
towards the RNS(es). This provides for optimized mobility solutions when the
MS is moving between (E)GAN and GERAN or between EGAN and UTRAN as there is no
need to update the HLR.
#### 5.1.2.3 Protocol stacks
##### 5.1.2.3.1 PS Control plane
The existing PS control plane architecture is as following (from 3GPP TS
24.008 [4]).
{width="6.516666666666667in" height="2.4159722222222224in"}
Figure 42: Existing PS control plane architecture
The new proposed architecture is as following.
{width="5.597222222222222in" height="2.859722222222222in"}
Figure 43: New proposed PS control plane architecture
##### 5.1.2.3.2 PS User plane
The existing PS user plane architecture is as following (from 3GPP TS 24.008
[4]).
{width="6.526388888888889in" height="2.6368055555555556in"}
Figure 44: Existing PS user plane architecture
The new proposed architecture is as following.
{width="4.997916666666667in" height="2.779166666666667in"}
Figure 45: New proposed PS user plane architecture
#### 5.1.2.4 Affected procedures
The Combined GANC/SGSN solution (re)uses the existing mobility mechanisms, CS
and PS handover between GAN and GERAN and GAN and UTRAN. The PS handover
feature is considered as existing within the Release-7 timeframe.
#### 5.1.2.5 Terminal architecture and impacts
The Combined GANC/SGSN solution does not affect the terminal functionality in
any way and existing terminals can be used with the Combined GANC/SGSN. The
main difference towards legacy GAN (networks) is improved performance in the
PS domain within the network achieved by reducing the network node and
interface count and the corresponding set of network protocol layers required
within a Combined GANC/SGSN.
#### 5.1.2.6 Optimization for LLC and SNDCP Layers
Optimizations of the configurations used for the LLC and SNDCP protocol layers
can be made using existing configuration procedures for an MS operating in GAN
mode as per the Combined GANC/SGSN solution. The optimizations consist of
simply configuring LLC and SNDCP to disable ciphering (LLC) and disabling
compression (SNDCP). Existing XID signalling procedures, GMM Authentication
and ciphering procedures and PS Handover procedures can be used unchanged to
ensure apply these optimizations are used for an MS operating in GAN mode. For
combined GANC/SGSN solution the GANC and SGSN nodes are combined into one node
and as such the GANC part of the Combined GANC/SGSN can inform the SGSN part
using node internal signalling (i.e. implementation specific) about GAN access
being used in any given cell and thereby allow the SGSN to know when to apply
these optimizations.
The GMM Authentication and ciphering procedure is defined in 3GPP TS 24.008
[4] and can be used to authenticate the MS and set the \"GPRS\" ciphering mode
(ciphering/no ciphering) and \"GPRS\" ciphering algorithm. It is performed by
the network sending a (GMM) AUTHENTICATION AND CIPHERING REQUEST message to
the MS and the MS responding with a (GMM) AUTHENTICATION AND CIPHERING
RESPONSE message. Whenever the MS is attached to GPRS it must be prepared to
perform this procedure.
The LLC layer enhancement described here is therefore to use the GMM
Authentication and ciphering procedure to set the ciphering mode to \"no
ciphering\" while the MS is using GAN access or when the MS enters GAN access
at rove-in. When the MS leaves GAN access the opposite activation applies i.e.
the ciphering mode can be set to \"ciphering\" if this is used for access in
the new cell (e.g. rove-out to a GERAN cell).
The SNDCP and LLC XID (re)negotiation procedures are defined in 3GPP TS 44.064
[24] and 3GPP TS 44.065 [25]. A specific set of operational parameters can be
negotiated whenever an SNDCP- or LLCâ€‘layer connection is being established. In
addition, either the MS or network side may trigger renegotiation of the
operational parameters. The negotiation is normally performed by the SGSN
sending an XID COMMAND message to the MS. This message is transmitted between
the LLC protocol entities and is used to negotiate both LLC and SNDCP layer
operational parameters. The SNDCP parameters are normally negotiated e.g.
whenever a PDP context is activated or modified.
The SNDCP layer enhancement proposed here is therefore to use the XID
negotiation procedures to at least turn off the compression function of the
SNDCP layer while the MS is using GAN access with active PDP contexts (or when
the MS enters GAN access with active PDP contexts). When the MS leaves GAN
access the opposite activation applies i.e. the compression can be activated
again if this is used for access in the new cell.
Both of the above enhancements can be triggered (at least) in the following
scenarios:
  * GPRS attach in GAN access.
  * PDP Context activation or modification in GAN Access.
  * When the MS moves from GERAN/UTRAN to GAN and is already GPRS > attached and performs Routing Area Update or Cell Update.
  * When the MS moves from GERAN/UTRAN to GAN with active PDP contexts.
  * When the MS moves from GAN to GERAN/UTRAN and is already GPRS > attached and performs Routing Area Update or Cell Update.
  * When the MS moves from GAN to GERAN/UTRAN with active PDP contexts.
The above enhancements apply also for PS Handover (as defined in 3GPP TS
43.129). The (new) SGSN will find out the target cell RAI and CGI and is able
to identify the target cell being GAN access based and may therefore either
deactivate ciphering in the target cell (when performing PS HO from
GERAN/UTRAN to GAN) or assign a GSM ciphering algorithm to be used in the
target cell (when performing PS HO from GAN to GERAN). In addition, the SNDCP
XID parameters can be also passed between the MS and target SGSN to activate
or deactivate compression for the same scenarios.
It should be noted that the existing PS Handover procedure allows the \"NAS
Container for PS HO\" IE passed in the PS Handover Command to have \"old XID\"
= 0 which results in default SNDCP configuration (i.e. no compression) and
\"Type of ciphering algorithm\" = 000 which explicitly indicates that no
ciphering is to be used in the new cell. As such, the existing PS Handover
procedure allows for disabling LLC ciphering and SNDCP compression upon MS
reception and processing of the PS Handover Command. If this is done then
there would be no need for the SGSN to trigger an additional XID negotiation
procedure (for each active PDP Context) at some point after MS arrival in the
GAN cell. For PS Handover from GAN to GERAN the \"Type of ciphering
algorithm\" will be set to indicate some type of ciphering algorithm is to be
used in the new cell until further XID negotiation is triggered by the SGSN.
## 5.2 GAN Iu Mode
Generic Access to the Iu interface (\"Iu mode GAN\") is an extension of UMTS
mobile services that is achieved by tunnelling Non Access Stratum (NAS)
protocols between the user equipment (MS) and the Core Network over an IP
network. Iu-mode GAN is a complement to traditional GSM/GPRS/UMTS radio access
network coverage.
### 5.2.1 Functional Architecture
The Iu-mode Generic Access Network functional architecture is illustrated in
figure 46.
Figure 46: Iu-mode GAN functional architecture
Note that the GANC function supporting A/Gb interfaces to the Core Network is
required somewhere in the operator\'s network for backwards compatibility with
A/Gb-mode-only GAN terminals.
A GANC implementation may simultaneously support both A/Gb mode and Iu mode
GAN operation; the interfaces associated with both modes of operation are
shown in the following figure.
Figure 47: Iu-mode GAN functional architecture with A/Gb interfaces
The main features of the Iu mode GAN architecture are:
  * Entities with enhanced functionality:
\- Mobile Station (MS). The functionality of the MS defined in [2] is modified
to support Iu mode GAN operation. The MS may support Iu mode GAN operation,
A/Gb mode GAN operation, or both. Mode selection is performed during
registration (see \"GAN Registration related procedures\").
\- Generic Access Network Controller (GANC). The functionality of the GANC
defined in [2] is expanded so as to appear to the core network as a UTRAN
Radio Network Controller (RNC). As in [2], the GANC includes a Security
Gateway (SEGW) that terminates secure remote access tunnels from the MS,
providing mutual authentication, encryption and data integrity for signalling,
voice and data traffic.
  * A generic IP access network provides connectivity between the MS and > the GANC. The IP transport connection extends from the GANC to the > MS. A single interface, the Up interface, is defined between the > GANC and the MS. Functionality is added to this interface, over > that defined in [2], to support the Iu-mode GAN service.
  * Co-existence with the UMTS Terrestrial Radio Access Network (UTRAN) > and interconnection with the Core Network (CN) via the > standardized interfaces defined for UTRAN:
\- Iu-cs interface for circuit switched services as overviewed in 3GPP TS
25.410 [12].
\- Iu-ps interface for packet switched services as overviewed in 3GPP TS
25.410 [12].
\- Iu-pc interface for supporting location services as described in 3GPP TS
25.450 [13].
\- Iu-bc interface for supporting cell broadcast services as described in 3GPP
TS 25.419 [14].
  * Transaction control (e.g. CC, SM) and user services are provided by > the core network (e.g. MSC/VLR and the SGSN/GGSN).
  * Use of AAA server over the Wm interface as defined by 3GPP TS 29.234 > [15]. The AAA server is used to authenticate the MS when it sets > up a secure tunnel. Note that only a subset of the Wm > functionalities is required for the EGA application. As a minimum > the GANC-SEGW shall support the Wm authentication procedures.
  * With respect to Figure X1, the GANC function supporting A/Gb > interfaces to the Core Network is required somewhere in the > operator\'s network for backwards compatibility with > A/Gb-mode-only GAN terminals.
  * The Iur interface is not supported. This means that radio handover > and SRNC relocation happens simultaneously.
### 5.2.2 Functional entities
#### 5.2.2.1 Mobile Station (MS)
The MS contains a functional block to access the Iu-mode Generic Access
Network (GAN).
#### 5.2.2.2 Generic Access Network Controller (GANC)
The core network interacts with the Generic Access Network Controller (GANC)
as though it was an RNC. The generic IP access network provides connectivity
between the GANC and the MS. The GANC entity inter-works between the Iu
interfaces and a generic IP access network, using the following functionality:
  * Control plane functionality:
\- Security Gateway (SEGW) for the set-up of a secure tunnel to the MS for
mutual authentication, encryption and data integrity.
\- GAN Discovery support and Default GANC assignment (based on a backward
compatible extension of the procedures defined in 3GPP TS 43.318 [2]).
\- GAN Registration support including provision of GAN system information to
the MS and possible redirection to a different Serving GANC (based on a
backward compatible extension of the procedures defined in 3GPP TS 43.318
[2]).
\- Management of GAN bearer paths for CS and PS services, including the
establishment, administration, and release of control and user plane bearers
between the MS and the GANC.
\- Functionality providing support for paging and handover procedures.
\- Transparent transfer of L3 messages (i.e. NAS protocols) between the MS and
core network.
  * User plane functionality:
\- SEGW Encapsulating Security Payload (ESP) processing of Up interface
packets.
\- The interworking of circuit switched user data between the Up interface and
the Iu-cs interface.
\- The interworking of packet switched user data between the Up interface and
the Iu-ps interface.
### 5.2.3 Control and User Plane Architecture
The Iu interface standards include support for both ATM and IP-based
signalling and user data transport mechanisms. These protocol options for
signalling and user data transport are described in 3GPP TS 25.412 [16] and
3GPP TS 25.414 [17], respectively. Note that use of IP-based Iu enables an
\"All IP\" GAN solution.
#### 5.2.3.1 Circuit Switched (CS) Domain
##### 5.2.3.1.1 CS Domain - Control Plane
The GAN architecture in support of the CS Domain control plane is illustrated
in figure 48.
Figure 48: CS Domain Control Plane Architecture
The main features of the GAN CS domain control plane architecture are as
follows:
  * The underlying Access Layers and Transport IP layer provides the > generic connectivity between the MS and the GANC.
  * The IPsec layer provides encryption and data integrity between the > MS and GANC.
  * The Remote IP layer is the \'inner\' IP layer for IPsec tunnel mode > and is used by the MS to be addressed by the GANC. The Remote IP > layer is configured during the IPsec connection establishment.
  * A single TCP connection is used to provide reliable transport for > both the GA-RC and GA-CSR signalling between the MS and GANC. The > TCP connection is managed by GA-RC and is transported using the > Remote IP layer.
  * NAS protocols, such as MM and above, are carried transparently > between the MS and MSC.
  * The Generic Access Resource Control (GA-RC) protocol manages the Up > session, including the GAN discovery and registration procedures. > The GA-RC protocol described in [2] is extended to include > support for the selection of either A/Gb mode or Iu mode GAN (see > \"GAN Registration related procedures\").
  * The Generic Access Radio Resource Control (GA-RRC) protocol performs > functionality equivalent to the UTRAN RRC protocol, using the > underlying Up session managed by the GA-RC. Note that GA-RRC > includes both CS service and PS service-related signalling > messages.
  * The GANC terminates the GA-RRC protocol and inter-works it to the > RANAP protocol over the Iu-cs interface.
  * The Iu-cs signalling transport layer options (both ATM and IP-based) > are defined in 3GPP TS 25.412 [16].
##### 5.2.3.1.2 CS Domain - User Plane
The GAN protocol architecture in support of the CS domain user plane is
illustrated figure 49.
Figure 49: CS Domain User Plane Protocol Architecture
The main features of the GAN CS domain user plane architecture are as follows:
  * The underlying Access Layers and Transport IP layer provides the > generic connectivity between the MS and the GANC.
  * The IPsec layer provides encryption and data integrity.
  * The CS user plane data transport over the Up interface does not > change from that described in 3GPP TS 43.318 [2].
  * The GANC provides interworking between RTP/UDP and the circuit > switched bearers over the Iu-cs interface.
  * The GANC supports the Iu User Plane (Iu UP) protocol. Each Iu UP > protocol instance may operate in either transparent or support > modes, as described in 3GPP TS 25.415 [18]; the mode choice is > indicated to the GANC by the MSC using RANAP.
  * Support for the AMR FR codec, as specified in 3GPP TS 26.071 [19], > is mandatory when operating in GAN mode, with support for other > codecs being optional.
  * The Iu-cs data transport layers (both ATM and IP-based) and > associated transport network control options are defined in 3GPP > TS 25.414 [17].
#### 5.2.3.2 Packet Switched (PS) Domain
##### 5.2.3.2.1 PS Domain - Control Plane
The GAN architecture in support of the PS Domain Control Plane is illustrated
in figure 50.
Figure 50: PS Domain Control Plane Architecture
The main features of the GAN PS domain control plane architecture are as
follows:
  * The underlying Access Layers and Transport IP layer provides the > generic connectivity between the MS and the GANC.
  * The IPsec layer provides encryption and data integrity.
  * TCP provides reliable transport for the GA-RRC between MS and GANC.
  * The GA-RC manages the IP connection, including the GAN registration > procedures.
  * The Generic Access Radio Resource Control (GA-RRC) protocol performs > functionality equivalent to the UTRAN RRC protocol, using the > underlying Up session managed by the GA-RC. Note that GA-RRC > includes both CS service and PS service-related signalling > messages.
  * The GANC terminates the GA-RRC protocol and inter-works it to the > RANAP protocol over the Iu-ps interface.
  * NAS protocols, such as for GMM, SM and SMS, are carried > transparently between the MS and SGSN.
  * The Iu-ps signalling transport layer options (both ATM and IP-based) > are defined in 3GPP TS 25.412 [16].
##### 5.2.3.2.2 PS Domain - User Plane
The GAN architecture for the PS Domain User Plane is illustrated in figure 51.
Figure 51: PS Domain User Plane Protocol Architecture
The main features of the GAN PS domain user plane architecture are as follows:
  * The underlying Access Layers and Transport IP layer provides the > generic connectivity between the MS and the GANC.
  * The IPsec layer provides encryption and data integrity.
  * The GA-RRC protocol operates between the MS to the GANC transporting > the upper layer payload (i.e. user plane data) across the Up > interface.
  * PS user data is carried transparently between the MS and CN.
  * The GANC terminates the GA-RRC protocol and inter-works it to the > Iu-ps interface using GTP-U.
#### 5.2.3.3 GA-RC (Generic Access Resource Control)
##### 5.2.3.3.1 General
The GA-RC protocol provides a resource management layer, with the following
functions:
  * Discovery and registration with GANC;
  * Registration update with GANC;
  * Application level keep-alive with GANC; and
  * Support for identification of the AP being used for GAN access.
##### 5.2.3.3.2 States of the GA-RC sub-layer
The GA-RC sub-layer in the MS can be in one of two states (see figure 52): GA-
RC-DEREGISTERED or GAâ€‘RCâ€‘REGISTERED. The following figure summarizes the state
transitions for generic access in the MS, including both A/Gb mode and Iu
mode.
Figure 52: State diagram for Generic Access in the MS
NOTE: The following outcomes are possible when switching the serving RR to Iu-
mode GAN:
a. Transition to GA-RRC-IDLE (i.e. idle mode transition);
b. Transition to GA-RRC-CONNECTED (i.e. due to CS or PS handover/relocation).
In the GA-RC-DEREGISTERED state, the MS may be in a GAN coverage area;
however, the MS has not registered successfully with the GANC. The MS may
initiate the GAN Registration procedure when in the GA-RC-DEREGISTERED state.
The MS returns to GA-RC-DEREGISTERED state on loss of TCP or IPsec connection
or on execution of the GAN De-registration procedure.
In the GA-RC-REGISTERED state, the MS is registered with the Serving GANC. The
MS has an IPsec tunnel and an TCP connection established to the Serving GANC
through which the MS may exchange GA-RC or GA-RRC signalling messages with the
GANC.
While the MS remains in the GA-RC-REGISTERED state it performs application
level keep-alive with the GANC.
In the GA-RC-REGISTERED state, the MS may be in either UTRAN/GERAN mode or GAN
mode:
  * It may be camped on GERAN or UTRAN and idle.
  * It may be active in GERAN or UTRAN (e.g. a GSM RR or a UTRAN RRC > connection may be established).
  * It may have \"roved in\" to GAN mode.
  * It may have recently \"roved out\" of GAN mode (e.g. due to handover > from GAN).
#### 5.2.3.4 GA-RRC (Generic Access Radio Resource Control)
##### 5.2.3.4.1 General
The GA-RRC protocol provides a resource management layer which is a
replacement for UTRAN-RRC and supports the following functions:
  * setup of transport channels for CS and PS traffic between the MS and > GANC;
  * CS and PS handover support between UTRAN/GERAN and GAN;
  * direct transfer of NAS messages between the MS and the core network; > and
  * other functions such as CS and PS paging and security configuration.
##### 5.2.3.4.2 States of the GA-RRC sub-layer
The GA-RRC sub-layer in the MS can be in two states, GA-RRC-IDLE or GA-RRC-
CONNECTED as illustrated in figure X6.
The MS enters the GA-RRC-IDLE state when the MS switches the serving RR entity
to GA-RRC and the SAP between the NAS and the GA-RRC is activated. This switch
may occur only when the GA-RC is in the GA-RC-REGISTERED state.
The MS moves from the GA-RRC-IDLE state to the GA-RRC-CONNECTED state when the
GA-RRC connection is established and returns to GA-RRC-IDLE state when the GA-
RRC connection is released. Upon GA-RRC connection release, an indication that
no dedicated resources exist is passed to the upper layers.
The MS may also enter the GA-RRC-CONNECTED state while in the GA-RC-REGISTERED
state in GERAN/UTRAN mode when Handover/Relocation to GAN is being performed.
In the same way, the MS enters the GA-RC-REGISTERED state in GERAN/UTRAN mode
from the GA-RRC-CONNECTED state when Handover/Relocation from GAN is
successfully executed.
The GA-RRC Packet Transport Channel (GA-RRC PTC) provides the association
between the MS and GANC for the transport of GPRS user data over the Up
interface (see subclause 5.2.5.17).
### 5.2.4 Security Mechanisms
Iu mode GAN supports security mechanisms at different levels and interfaces as
depicted in figure 53.
{width="5.079861111111111in" height="1.45in"}
Figure 53: Iu mode GAN Security Mechanisms
1\. The security mechanisms over the Up interface protect control plane and
user plane traffic flows between the MS and the GANC from unauthorized use,
data manipulation and eavesdropping; i.e. authentication, encryption and data
integrity mechanisms are supported.
2\. Network access security includes the mechanisms defined in 3GPP TS 33.102
[20]. Mutual authentication of the subscriber and the Core Network (CN) occurs
between the MSC/VLR or SGSN and the MS and is transparent to the GANC.
However, there is a cryptographic binding between the MS-CN authentication and
the MS-GANC authentication to prevent man-in-the-middle attacks (see
subclauses 5.2.5.8 and 5.2.5.15).
3\. Additional application level security mechanisms may be employed in the PS
domain to secure the end-to-end communication between the MS and the
application server. For example, the MS may run the HTTP protocol over an SSL
session for secure web access. These mechanisms are out of scope of the
present document.
All control plane and user plane traffic sent between the MS and the GANC over
the Up interface is protected by an IPsec tunnel between the MS and GANC-SEGW,
that provides mutual authentication (using USIM credentials), encryption and
data integrity using the same mechanisms as specified in 3GPP TS 33.234 [21].
### 5.2.5 High Level Procedures
#### 5.2.5.1 Mode Selection in Multi-mode terminals
This subclause proposes no change from the corresponding A/Gb mode GAN
functionality.
This subclause may be replaced with the above statement (or similar) or with a
reference to the appropriate section in 3GPP TS 43.318 [2].
A Generic Access capable MS may support any IP access technology in addition
to the UTRAN and possibly GERAN radio interfaces. The MS may be either in the
GERAN/UTRAN mode or in GAN mode of operation.
The MS can be configured to operate in one of the two modes (i.e. GERAN/UTRAN
or GAN) at any given time. There may be a preferred mode of operation that can
be configured by the user, or by the operator through various mechanisms, e.g.
device management.
On power up, the MS always starts in GERAN/UTRAN mode and executes the normal
power-up sequence as specified in 3GPP TS 23.122 [22]. Following this, the MS
may switch into GAN mode based on mode selection preference determined by user
preferences or operator configuration.
The various preferences for the MS that are possible are as follows:
  * GERAN/UTRAN -only:
\- The MS RR entity remains in GERAN/UTRAN mode and does not switch to GAN
mode.
  * GERAN/UTRAN -preferred:
\- The MS RR entity is in GERAN/UTRAN mode as long as there is a PLMN
available and not forbidden through GERAN/UTRAN. If no allowable PLMN is
available through GERAN/UTRAN, and MS has successfully registered with a GAN
over the generic IP access network, then the MS switches to GAN mode. When a
PLMN becomes available over GERAN/UTRAN and the PLMN is not forbidden, or the
MS has de-registered or lost connectivity with the GAN over the generic IP
access network, the MS returns to GERAN/UTRAN mode.
  * GAN-preferred:
\- When the MS has successfully registered with the GAN over the generic IP
access network, the MS switches to GAN mode and stays in this mode as long as
the GAN is available. When the MS deregisters, or otherwise loses connectivity
with the GAN over the generic IP access network, the MS switches to
GERAN/UTRAN mode.
  * GAN-only:
\- The MS switches to GAN mode (after initial power up sequence in GERAN/UTRAN
mode to obtain cellular network information, but excluding (G)MM procedures
with GERAN/UTRAN core network) and does not switch to GERAN/UTRAN mode. During
the initial power up sequence in GERAN/UTRAN mode the MS shall ignore all
paging messages received through the GERAN/UTRAN network.
#### 5.2.5.2 PLMN Selection
This subclause proposes no change from the corresponding A/Gb mode GAN
functionality.
This section may be replaced with the above statement (or similar) or with a
reference to the appropriate section in 3GPP TS 43.318 [2].
There shall be no change from the PLMN selection procedures in the NAS layers
(MM and above) in the MS, with the exception that in GAN mode the \"in VPLMN
background scan\" shall be disabled.
A GANC can only be connected to one PLMN.
The PLMN selection in the NAS layers shall not lead to a change of mode
between GERAN/UTRAN mode and GAN mode. For a specific instance of PLMN
selection, only PLMNs available via GAN or only PLMNs available via
GERAN/UTRAN are provided to the NAS layer (i.e. no combination of the PLMNs
available via GERAN/UTRAN and GAN).
In the case of a GAN capable MS, a GANC selection process may also be required
as part of the process of establishing the connectivity between the MS and the
GANC. This takes place when, during GAN registration, a GAN capable MS may
have a choice among two or more GANC-PLMN pairs indicated by the Default GANC
(i.e. in the GA-RC REGISTER REDIRECT message). The GANC selection process
takes place while the MS is still in GERAN/UTRAN mode, and before the MS roves
into GAN mode. If the current selected PLMN is available via GAN, it shall be
selected. If not, the selection of GANC is implementation specific.
If the MS does not have any stored information related to the Serving GANC for
the cell or AP to which the MS is currently connected, the MS attempts to
register with the Default GANC (always located in the HPLMN) stored in MS. The
MS includes an indication, identifying the GANC as the Default GANC in the GA-
RC REGISTER REQUEST message.
When a MS attempts to register on the Default GANC including an indication
that it is in automatic PLMN selection mode:
  * If the Default GANC wishes to serve the MS, the Default GANC > responds with a GA-RC REGISTER ACCEPT message.
  * If the Default GANC wishes to redirect the MS to another GANC within > the HPLMN, the Default GANC responds with a GA-RC REGISTER > REDIRECT message, not including a list of PLMN identities.
  * If the Default GANC wishes to redirect the MS to a PLMN that is not > the HPLMN, the Default GANC responds with a GA-RC REGISTER > REDIRECT message and includes a list of PLMNs that may provide GAN > service to the MS in its current location. The list contains one > or more PLMN identities along with the identities of their > associated GANC and SEGW nodes (either in IP address or FQDN > format). Following the GANC selection process, the GA-RC entity in > the MS shall attempt to register on the associated GANC.
If at any time the user wishes to perform manual PLMN selection or a \"User
reselection\" irrespective of whether the MS is in manual or automatic PLMN
selection mode, the MS sends a GA-RC REGISTER REQUEST message to the Default
GANC, including an indication that it is in manual PLMN selection mode. The
Default GANC is not allowed to accept the registration and responds with a GA-
RC REGISTER REDIRECT message and includes a list of PLMNs that may provide GAN
service to the MS in its current location.
If the MS includes the identity of the current serving GSM network in the GA-
RC REGISTER REQUEST message, the Default GANC uses this to identify the list
of PLMNs to send to the MS in the response message.
After successful registration with a serving GANC, the MS shall not store the
PLMN list. The MS shall not use the PLMN list, provided to the MS during the
registration procedure, for background scanning.
NOTE: A MS cannot use GA in a VPLMN unless the HPLMN supports and authorizes
GA.
#### 5.2.5.3 Re-selection between GERAN/UTRAN and GAN modes
This subclause proposes no change from the corresponding A/Gb mode GAN
functionality.
This section may be replaced with the above statement (or similar) or with a
reference to the appropriate section in 3GPP TS 43.318 [2].
##### 5.2.5.3.1 Rove-in (from GERAN/UTRAN mode to GAN mode)
This procedure is applicable only if GAN service is available, a MS is not in
NC2 mode (applicable if the MS is in GERAN mode and as defined in 3GPP TS
45.008 [xx]) and has a MS preference for GAN-only, GAN-preferred or, if no
allowable PLMN is available through GERAN/UTRAN, for GERAN/UTRAN-preferred.
Following successful GAN registration, the access mode in the MS is switched
to GAN mode. The GA-CSR entity in the MS provides the NAS-related system
information received in the GAN Registration Procedure to the NAS layers. The
NAS considers the GANC-allocated cell identity as the current serving cell.
While in GAN mode, GERAN-RR and UTRAN RRC entities are detached from the RR-
SAP in the MS. As a result the entities do not:
  * inform NAS about any GERAN/UTRAN cell re-selection and/or the change > of system information of the current camping cell;
  * inform NAS about any newly found PLMN over GERAN or UTRAN; and
  * act on any paging request message received over GERAN or UTRAN.
##### 5.2.5.3.2 Rove-out (from GAN mode to GERAN/UTRAN mode)
This procedure is applicable when the MS detaches from the generic IP access
network, and its mode selection is GANâ€‘preferred or GERAN/UTRAN-preferred.
When the MS detaches from the generic IP access network, depending on
prevailing circumstances the MS may be able to deregister first with the GANC.
For the GAN-preferred and GERAN/UTRAN-preferred mode selections, the MS
detaches the GA-CSR entity from the RR-SAP and re-attaches the GERAN-RR or
UTRAN RRC entity to the RR-SAP and restores normal GERAN-RR or UTRAN RRC
functionality.
For the GAN-only mode selection, GA-CSR remains attached to the NAS and the MS
stays in GAN mode (i.e. in \"No Service\" condition).
#### 5.2.5.4 GAN Discovery and Registration related procedures
The changes in this subclause from the corresponding A/Gb mode GAN
functionality are in subclauses 5.2.5.4.1.6, 5.2.5.4.1.7 and 5.2.5.4.1.8
dealing with GAN mode selection during discovery and registration, as well as
replacing references to \"(U)SIM\" with just \"USIM\" since USIM is required.
##### 5.2.5.4.1 Discovery and Registration for Generic Access
##### 5.2.5.4.1.1 General {#general-2 .H6}
The Discovery and Registration procedures are applicable only if the MS
preference is operating in GAN-only, GANâ€‘preferred or, if no allowable PLMN is
available through GERAN/UTRAN, in GERAN/UTRAN-preferred mode.
Once the MS has established a connection to the generic IP access network, the
MS determines the appropriate GANCâ€‘SEGW to connect to, by completing the
Discovery Procedure to the Provisioning GANC in the HPLMN of the MS. The
Provisioning GANC provides the address of the Default GANC in the HPLMN of the
MS, to which the MS can register.
The MS attempts to register on the Default GANC provided by the Provisioning
GANC during the Discovery procedure, by completing the Registration Procedure.
The Default GANC may accept the Registration; redirect the MS to another GANC;
or reject the Registration.
##### 5.2.5.4.1.2 Security Gateway Identification {#security-gateway-
identification .H6}
The USIM of the MS contains the FQDN (or IP address) of the Provisioning GANC
and the associated SEGW or the MS derives this information based on
information in the USIM. If the MS does not have any information about other
GANCs and associated SEGW stored, then the MS completes the Discovery
procedure towards the Provisioning GANC.
As part of the Registration Procedure, the Default GANC can indicate whether
this GANC and SEGW address or the address of a GANC that the MS is being
redirected to, may be stored by the MS.
The MS may also store Serving GANC information for Serving GANCs with which
the MS was able to complete a successful registration procedure. The default
GANC is in control of whether the MS is allowed to store Serving GANC
information. If there is no GERAN/UTRAN coverage in the AP location, the
stored Serving GANC information shall be associated with the AP-ID. If there
is GERAN/UTRAN coverage in the AP location, the stored Serving GANC
information shall be associated with the GSM CGI or LAI or UTRAN CI. The
stored Serving GANC information is:
  * serving SEGW FQDN or IP address following successful registration;
  * serving GANC FQDN or IP address following successful registration; > and
  * optionally, Serving GANC TCP port following successful registration > and if returned from the network.
The number of such entries to be stored in the MS is implementation specific.
Only the last successfully registered GANC association shall be stored when
the Default GANC indicates that the MS is allowed to store these addresses. A
MS may preferentially join a generic IP access network point of attachment
whose association with a Serving GANC has been stored in memory.
On connecting to the generic IP access network, if the MS has a stored Serving
GANC for the AP-ID or the GERAN/UTRAN cell, the MS shall attempt to register
with the associated Serving GANC in its memory. The GANC may still reject the
MS for any reason even though it may have served the MS before. The MS shall
delete from its stored list the address of the Serving GANC on receiving a
registration reject or if the registration fails for any other reason (e.g.
not receiving any response).
If the MS does not receive a response to the Registration Request sent to the
Serving GANC (and which is not the Default GANC), it shall re-attempt to
register with the Default GANC. If the MS does not receive a response to the
registration request sent to the Default GANC, it shall attempt the discovery
procedure with the Provisioning GANC to obtain a new Default GANC.
In the case when a MS is attempting to register or discover a GANC after
failing to register on a GANC, the MS provides in the Registration or
Discovery procedure an indication that the MS has attempted to Register on
another GANC, the failure reason, and the GANC and SEGW addresses of the
failed registration.
When the MS connects to a generic IP access network, for which it does not
have a stored Serving GANC in it\'s memory, it shall attempt to register with
the Default GANC.
##### 5.2.5.4.1.3 GANC capabilities {#ganc-capabilities .H6}
GANC specific information shall be transferred to the MS on successful
registration.
##### 5.2.5.4.1.4 MS capabilities {#ms-capabilities .H6}
GAN specific capabilities of the MS shall be transferred to the GANC during
registration.
##### 5.2.5.4.1.5 Required GAN Services {#required-gan-services .H6}
The MS may request which GAN services it requires from the GANC as part of the
Registration procedures.
##### 5.2.5.4.1.6 GAN Mode Selection {#gan-mode-selection .H6}
The MS (i.e. with Iu-mode GAN support) transfers its GAN Mode Support
information to the GANC during Discovery and Registration procedures; i.e. in
the GAN Classmark IE. GAN Mode Support options are A/Gb mode supported, Iu
mode supported, or both modes supported. If no GAN Mode Support information is
received, the GANC assumes that the MS supports A/Gb mode operation only.
The provisioning GANC may use the received GAN Mode Support information to
assign the MS to an appropriate default GANC (e.g. if separate A/Gb mode and
Iu-mode GANCs are deployed in the network) or to an appropriate TCP port on
the default GANC (e.g. if separate TCP ports are used for A/Gb mode and Iu-
mode GAN service). During registration, the Iu-mode capable GANC shall also
indicate the GAN mode to use for the current session in the GAN Mode Indicator
IE; this allows the MS to determine the Iu-mode capability of the Home PLMN.
Table 1 enumerates the discovery handling for the various combinations of MS
and Home PLMN GAN mode capabilities.
Table 1: GAN Mode Selection procedures associated with GAN Discovery
+----------------+----------------+----------------+----------------+ | | Home PLMN GAN | | | | | Mode | | | | | Capabilities | | | +----------------+----------------+----------------+----------------+ | MS GAN Mode | A/Gb only | Iu only | Both | | Capabilities | | | | +----------------+----------------+----------------+----------------+ | A/Gb only | **GANC:** | **GANC:** No | **GANC:** No | | | Handle as | GAN Mode | GAN Mode | | | normal A/Gb | Support | Support | | | mode | information | information | | | discovery. | provided or | provided or | | | | A/Gb mode | A/Gb mode | | | **MS:** | (only) | (only) | | | Proceed with | indicated by | indicated by | | | registration. | MS, therefore | MS, therefore | | | | Reject | handle as | | | | (Unspecified) | normal A/Gb | | | | | mode | | | | **MS:** Retry | discovery. | | | | on next | Assign MS to | | | | power-on. | A/Gb-capable | | | | | GANC. | | | | | | | | | | **MS:** | | | | | Proceed with | | | | | registration. | +----------------+----------------+----------------+----------------+ | Iu only | **GANC:** | **GANC:** Iu | **GANC:** Iu | | | Handle as | Mode Support | Mode Support | | | normal A/Gb | (only) | (only) | | | mode discovery | indicated by | indicated by | | | | MS, therefore | MS, therefore | | | **MS:** | accept and | accept and | | | Proceed with | assign MS to | assign MS to | | | registration | Iu-capable | Iu-capable | | | | GANC. | GANC. | | | | | | | | | **MS:** | **MS:** | | | | Proceed with | Proceed with | | | | registration. | registration. | +----------------+----------------+----------------+----------------+ | Both | **GANC:** | **GANC:** | **GANC:** | | | Handle as | Support for | Support for | | | normal A/Gb | both modes | both modes | | | discovery. | indicated by | indicated by | | | | MS, therefore | MS, therefore | | | **MS:** | accept and | accept and | | | Proceed with | assign MS to | assign MS to | | | registration. | Iu-capable | Iu-capable | | | | GANC. | GANC. | | | | | | | | | **MS:** | **MS:** | | | | Proceed with | Proceed with | | | | registration. | registration. | +----------------+----------------+----------------+----------------+
The default or serving GANC may use the received GAN Mode Support information
to redirect the MS to a different GANC or a different TCP port on the current
GANC. The Iu-mode capable GANC shall also indicate the GAN mode to use for the
current session in the GAN Mode Indicator IE.
Table 2 enumerates the registration handling for the various combinations of
MS and Default/Serving GANC GAN mode capabilities.
Table 2: GAN Mode Selection procedures associated with GAN Registration
+----------------+----------------+----------------+----------------+ | | D | | | | | efault/Serving | | | | | GANC GAN Mode | | | | | Capabilities | | | +----------------+----------------+----------------+----------------+ | MS GAN Mode | A/Gb only | Iu only | Both | | Capabilities | | | | +----------------+----------------+----------------+----------------+ | A/Gb only | **GANC:** | **GANC:** No | **GANC:** No | | | Handle as | GAN Mode | GAN Mode | | | normal A/Gb | Support | Support | | | mode | information | information | | | registration. | provided or | provided or | | | | A/Gb mode | A/Gb mode | | | **MS:** | (only) | (only) | | | Proceed per | indicated by | indicated by | | | A/Gb mode GAN | MS, therefore | MS, therefore | | | procedures. | Reject | handle as | | | | (Invalid | normal A/Gb | | | | GANC). | mode | | | | | registration. | | | | **MS:** | If required, | | | | Attempt | redirect MS to | | | | registration | A/Gb-capable | | | | with Default | GANC. | | | | GANC or | | | | | re-discovery | **MS:** | | | | (per A/Gb mode | Proceed per | | | | GAN | A/Gb mode GAN | | | | procedures). | procedures. | +----------------+----------------+----------------+----------------+ | Iu only | **GANC:** | **GANC:** Iu | **GANC:** Iu | | | Handle as | Mode Support | Mode Support | | | normal A/Gb | (only) | (only) | | | mode | indicated by | indicated by | | | registration. | MS, therefore | MS, therefore | | | | accept and | accept and | | | **MS:** No GAN | send GAN Mode | send GAN Mode | | | Mode Selection | Indicator = | Indicator = | | | provided by | Iu. | Iu. | | | GANC, | | | | | therefore | **MS:** | **MS:** | | | Deregister and | Proceed per Iu | Proceed per Iu | | | treat as | mode GAN | mode GAN | | | register | procedures. | procedures. | | | reject | | | | | (Invalid | | | | | GANC). | | | +----------------+----------------+----------------+----------------+ | Both | **GANC:** | **GANC:** | **GANC:** | | | Handle as | Support for | Support for | | | normal A/Gb | both modes | both modes | | | registration. | indicated by | indicated by | | | | MS, therefore | MS, therefore | | | **MS:** No GAN | accept and | accept and | | | Mode Selection | send GAN Mode | send GAN Mode | | | provided by | Indicator = | Indicator = Iu | | | GANC, | Iu. | or A/Gb (see | | | therefore | | note). If | | | proceed per | **MS:** | required, | | | A/Gb mode GAN | Proceed per Iu | redirect MS to | | | procedures. | mode GAN | Iu or | | | | procedures. | A/Gbâ€‘capable | | | | | GANC. | | | | | | | | | | **MS:** | | | | | Proceed per Iu | | | | | or A/Gb mode | | | | | GAN | | | | | procedures. | +----------------+----------------+----------------+----------------+ | NOTE: The | | | | | GANC\'s choice | | | | | of Iu-mode | | | | | versus | | | | | A/Gb-mode may | | | | | be based on | | | | | other | | | | | information | | | | | received in | | | | | the GAN | | | | | registration | | | | | message from | | | | | the MS, | | | | | information | | | | | stored in the | | | | | GANC, and on | | | | | operator | | | | | policy. | | | | +----------------+----------------+----------------+----------------+
##### 5.2.5.4.1.7 Discovery Procedure {#discovery-procedure .H6}
##### 5.2.5.4.1.7.1 Normal Case {#normal-case .H6}
When a MS supporting GAN first attempts to connect to a GAN, the MS needs to
identify the Default GANC. Each GAN capable MS can be configured with the FQDN
(or IP address) of the Provisioning GANC and the associated SEGW or the MS can
derive this FQDN based on information in the USIM (see 3GPP TS 23.003 [26]).
The MS first connects to a Provisioning GANC-SEGW and GANC in the HPLMN of the
MS, by establishing a secure IPsec tunnel and a TCP connection using the
provisioned or derived addresses. The MS obtains the FQDN or IP address of the
Default GANC in the HPLMN and the associated SEGW, through the Discovery
procedure.
If no GERAN/UTRAN coverage is available when a MS connects to the GANC for GAN
service, then the GANC cannot necessarily determine the location of the MS for
the purposes of assigning the MS to the correct serving GANC (e.g. to enable
handover and location-based services). The GANC shall permit the operator to
determine the service policy in this case; e.g. the operator could provide
service to the user with certain limitations (possibly with a user interface
indication on the MS).
NOTE 1: When the MS initiates the Discovery/Registration procedures and no
GERAN/UTRAN coverage is available, the GANC may have insufficient information
to correctly route subsequent emergency calls.
Figure 54: Discovery procedure
In the description below it is assumed that the MS has a mode selection of
GAN-only or GAN-preferred or GERAN/UTRAN-preferred and that the MS has already
connected to the generic IP access network.
NOTE 2: It is implementation specific what signal level should be deemed as
sufficient for triggering the GAN Discovery and Registration procedures.
1\. If the MS has a provisioned or derived FQDN of the Provisioning SEGW, it
performs a DNS query (via the generic IP access network interface) to resolve
the FQDN to an IP address. If the MS has a provisioned IP address for the
Provisioning SEGW, the DNS step is omitted.
2\. The DNS Server returns a response including the IP Address of the
Provisioning SEGW.
3\. The MS establishes a secure tunnel to the Provisioning SEGW.
4\. If the MS has a provisioned or derived FQDN of the Provisioning GANC, it
performs a DNS query (via the secure tunnel) to resolve the FQDN to an IP
address. If the MS has a provisioned IP address for the Provisioning GANC, the
DNS step will be omitted.
5\. The DNS Server returns a response including the IP Address of the
Provisioning GANC.
6\. The MS sets up a TCP connection to a well-defined port on the Provisioning
GANC. It then queries the Provisioning GANC for the Default GANC, using GA-RC
DISCOVERY REQUEST. The message contains:
\- Cell Info: Either current camping UTRAN/GERAN cell ID or the last LAI where
the MS successfully registered, along with an indicator stating which one it
is.
\- Generic IP access network attachment point information: AP-ID.
\- MS Identity: IMSI.
\- GAN Classmark: Including indications of A/Gb Mode supported, Iu Mode
supported.
7\. The Provisioning GANC returns the GA-RC DISCOVERY ACCEPT message, using
the information provided by the MS (e.g. the cell ID), to provide the FQDN or
IP address of the Default GANC and its associated Default SEGW. This is done
so the MS is directed to a \"local\" Default GANC in the HPLMN to optimize
network performance.
8\. If the Provisioning GANC cannot accept the GA-RC DISCOVERY REQUEST
message, it returns a GA-RC DISCOVERY REJECT message indicating the reject
cause.
9\. The secure IPsec tunnel to the Provisioning SEGW is released. It shall
also be possible to reuse the same IPsec tunnel for GAN Registration
procedures. In this case the IPsec tunnel is not released.
##### 5.2.5.4.1.8 Registration procedure {#registration-procedure .H6}
##### 5.2.5.4.1.8.1 Normal case {#normal-case-1 .H6}
Following the Discovery procedure the MS establishes a secure tunnel with the
secure gateway of the Default GANC, provided by the Provisioning GANC in the
Discovery procedure, and attempts to register with the Default GANC. The
Default GANC may become the Serving GANC for that connection by accepting the
registration, or the Default GANC may redirect a MS performing registration to
a different Serving GANC.
GANC redirection may be based on information provided by the MS during the
Registration procedure, operator chosen policy or network load balancing.
The GAN Registration procedure serves the following functions:
  * Ensures the MS is registered to the appropriate GANC entity; i.e. > with use of the redirection process;
  * Informs the GANC that the MS is now connected through a generic IP > access network and is available at a particular IP address. The > GANC maintains the registration context for the purposes of (for > example) mobileâ€‘terminated calling;
  * Provides the MS with the operating parameters associated with the > GAN service, including which GAN mode to use for the session, A/Gb > or Iu. The \"System Information\" message content that is > applicable to the GAN cell is delivered to the MS during the GAN > registration process. This enables the MS to switch to GAN mode, > and following the Registration procedure trigger NAS procedures > with the core network (such as Location/Routing Area Update, > mobile originated calls, mobile terminated calls, etc.); and
  * Enables the MS to request which GAN services are required.
NOTE: The GA-RC REGISTER REDIRECT message may contain: a single Serving SEGW
and GANC address or a list of PLMN identities and associated Serving SEGW and
GANC addresses; and an Indication of whether GANC address(es) can be stored in
the MS for future use.
Figure 55: Registration procedure
1\. If the MS was provided the FQDN of the Default or Serving SEGW, the MS
shall perform a DNS query (via the generic IP access network interface) to
resolve the FQDN to an IP address. If the MS has a provisioned IP address for
the SEGW, the DNS step is omitted.
2\. The DNS Server returns a response.
3\. The MS shall then set up a secure IPsec tunnel to the SEGW. This step may
be omitted if an IPsec tunnel is being reused from an earlier Discovery or
Registration.
4\. If the MS was provided the FQDN of the Default or Serving GANC, the MS
shall then perform a DNS query (via the secure tunnel) to resolve the FQDN to
an IP address. If the MS has an IP address for the GANC, the DNS step is
omitted.
5\. The DNS Server returns a response.
6\. The MS then sets up a TCP connection to a TCP port on the GANC. The TCP
port can either be a well-known port or one that has been earlier received
from the network during Discovery or Registration. The MS shall attempt to
register on the GANC by transmitting the GA-RC REGISTER REQUEST. The message
includes:
\- Cell Info: Either current camping UTRAN/GERAN cell ID, or last LAI where
the MS successfully registered, along with an indicator stating which one it
is.
\- Generic IP access network attachment point information: AP-ID.
\- MS Identity: IMSI.
\- MS Capability Information.
> \- GAN Services Required.
>
> \- GAN Classmark: Including indications of A/Gb Mode supported, Iu Mode
> supported.
7\. If the GANC accepts the registration attempt it shall respond with a GA-RC
REGISTER ACCEPT. The message contains:
\- GAN specific system information, including:
  * GAN Mode Indicator: A/Gb Mode GAN or Iu Mode GAN.
  * Cell description of the GAN cell.
  * Location-area identification comprising the mobile country code, > mobile network code, and location area code corresponding to the > GAN cell.
  * Cell identity identifying the cell within the location area > corresponding to the GAN cell.
  * Applicable system timer values (e.g. for the application-level > keepalive message transmission interval, see subclause 5.2.5.4.4)
\- GAN Capability Information.
In this case the TCP connection and the secure IPsec tunnel are not released
and are maintained as long as the MS is registered to this GANC.
8\. Alternatively, the GANC may reject the request. In this case, it shall
respond with a GA-RC REGISTER REJECT indicating the reject cause. The TCP
connection and the secure IPsec tunnel are released and the MS shall act as
defined in subclause 5.2.5.4.1.8.2.
9\. Alternatively, if the GANC wishes to redirect the MS to (another) Serving
GANC, it shall respond with a GAâ€‘RC REGISTER REDIRECT providing the FQDN or IP
address of the target Serving GANC and the associated SEGW, and the GAN Mode
Indicator if the GANC requires that a particular mode be used with the Serving
GANC (e.g. if the GANC knows that the Serving GANC supports only A/Gb mode
GAN). In this case the TCP connection is released and the secure IPsec tunnel
is optionally released depending on if the network indicates that the same
IPsec tunnel can be reused for the next registration.
##### 5.2.5.4.1.8.2 Abnormal cases {#abnormal-cases .H6}
If the Serving GANC rejects the Register request and does not provide
redirection to another Serving GANC, the MS shall re-attempt Registration to
the Default GANC including a cause indicating the failed registration attempt
and the Serving GANC and SEGW with which the Register request failed. The MS
should also delete all stored information about this Serving GANC.
If the Default GANC rejects a Registration Request and is unable to provide
redirection to suitable Serving GANC, the MS may re-attempt the Discovery
procedure to the Provisioning GANC (including a cause indicating the failed
registration attempt and the Default GANC provided in the last Discovery
procedure). The MS should also delete all stored information about the Default
GANC.
##### 5.2.5.4.2 De-Registration
This subclause proposes no change from the corresponding A/Gb mode GAN
functionality.
This subclause may be replaced with the above statement (or similar) or with a
reference to the appropriate subclause in 3GPP TS 43.318 [2].
The GA-RC De-Registration procedure allows the MS to explicitly inform the
GANC that it is leaving GAN mode (e.g. when it detaches from the generic IP
access network), by sending a GA-RC DEREGISTER message to the GANC, allowing
the GANC to free resources that it assigned to the MS. The GANC also supports
\"implicit GAN deâ€‘registration\", when the TCP connection to the MS is
abruptly lost.
The GANC can also autonomously release the MS registration context, and send a
GA-RC DEREGISTER message to the MS. Alternatively, the GANC can implicitly
deregister the MS by closing the TCP connection with the MS.
NOTE: At power-down the GA-RC sublayer of the MS ensures that the MS
explicitly detaches from the network, where possible, before completing the
GA-RC De-Registration procedure.
Figure 56: De-Registration initiated by the MS
1\. The MS sends the GA-RC DEREGISTER to the GANC, which removes the MS
context in the GANC.
Figure 57: De-Registration initiated by the GANC
1\. The GANC sends the GA-RC DEREGISTER to the MS.
#### 5.2.5.4.3 Registration Update
The only change in this section from the corresponding A/Gb mode GAN
functionality is to specify that this procedure cannot be used to change GAN
mode during a GAN session.
The GA-RC Registration Update procedure allows the MS to update information in
the GANC regarding changes to the identity of the overlapping GERAN cell or
changes to the generic IP access network point of attachment, by sending a GA-
RC REGISTER UPDATE UPLINK message to the GANC carrying the updated
information. This may result in the MS being redirected to another serving
GANC, or being denied service; e.g. due to operator policy.
Figure X58: Registration Update Uplink
1\. When the MS detects UTRAN/GERAN coverage after reporting no coverage
during GAN registration, it shall send the GA-RC REGISTER UPDATE UPLINK to the
GANC with the updated information. Whenever the generic IP access network
point of attachment changes, the MS shall send a GA-RC REGISTER UPDATE UPLINK
to the GANC with the updated generic IP access network point of attachment
information. If the MS requires to update the GANC with a new list of GAN
Services required, then the MS sends GA-RC REGISTER UPDATE UPLINK message to
the GANC including the new GAN Services Required list.
2\. The GANC may optionally send the GA-RC REGISTER REDIRECT when it wants to
redirect the MS based on updated information.
3\. The GANC may also optionally deregister the MS on receiving an update by
sending GA-RC DEREGISTER to the MS.
The GAN Registration Update procedure also allows the GANC to update the GAN
system information in the MS, if needed, by sending a GA-RC REGISTER UPDATE
DOWNLINK message to the MS carrying the updated information. Note that this
procedure shall not be used to change GAN mode during a GAN session (e.g. from
A/Gb mode to Iu mode).
Figure 59: Registration Update Downlink
1\. The GANC sends GA-RC REGISTER UPDATE DOWNLINK with the updated system
information.
##### 5.2.5.4.4 Keep Alive
This subclause proposes no change from the corresponding A/Gb mode GAN
functionality.
This subclause may be replaced with the above statement (or similar) or with a
reference to the appropriate subclause in 3GPP TS 43.318 [2].
The Keep Alive process is a mechanism between the peer GA-RC entities to
indicate that the MS is still registered to the GANC. Using periodic
transmissions of the GA-RC KEEP ALIVE message the MS in turn determines that
the GANC is still available using the currently established lower layer
connection.
Figure 60: Keep Alive procedure
1\. The MS sends GA-RC KEEP ALIVE to the GANC.
##### 5.2.5.4.5 Cell Broadcast Information
This subclause proposes no change from the corresponding A/Gb mode GAN
functionality.
This subclause may be replaced with the above statement (or similar) or with a
reference to the appropriate section in 3GPP TS 43.318 [2].
The Cell Broadcast Information is a mechanism between the peer GA-RC entities,
allowing the GANC to pass the MS information relating to the Cell Broadcast
Services. The MS includes GAN Service Required information in the GA-RC
REGISTER REQUEST and GA-RC REGISTER UPDATE UPLINK messages passed to the GANC,
indicating that the MS requires the Cell Broadcast Service. The GANC then
passes the required information to the MS in the GA-RC CELL BROADCAST INFO
message.
Figure 61: Cell Broadcast Information
1\. The GANC sends the GA-RC CELL BROADCAST INFO message to the MS, including
information required by the MS.
#### 5.2.5.5 Void
#### 5.2.5.6 Void
#### 5.2.5.7 GA-RRC Connection handling
The Iu-mode GAN GA-RRC connection is a logical connection between the MS and
the GANC.
A GA-RRC connection is established when the upper layers in the MS request the
establishment of a signalling connection and the MS is in GA-RRC-IDLE state;
i.e. no GA-RRC connection exists. When a successful response is received from
the network, GA-RRC replies to the upper layer that the signalling connection
is established and the MS has entered the equivalent of the RRC connected mode
(i.e. the GA-RRC-CONNECTED state).
##### 5.2.5.7.1 GA-RRC Connection Establishment
The following figure shows successful and unsuccessful establishment of the
GA-RRC Connection.
Figure 62: GA-CSR Connection Establishment
1\. The MS initiates GA-RRC connection establishment by sending the GA-RRC
REQUEST message to the GANC. This message contains the Establishment Cause
indicating the reason for GA-RRC connection establishment.
2\. The GANC signals the acceptance of the connection request to the MS by
sending the GA-RRC REQUEST ACCEPT and the MS enters the GA-RRC-CONNECTED
state.
3\. If the GANC determines that the GA-RRC connection request shall be
rejected, it sends a GA-RRC REQUEST REJECT to the MS indicating the reject
cause, completing the procedure.
##### 5.2.5.7.2 GA-RRC Connection Release
The following figure shows release of the logical GA-RRC connection between
the MS and the GANC.
Figure 63: GA-RRC Connection Release
1\. The CN indicates to the GANC to release the resources allocated to the MS,
via the RANAP _Iu Release Command message_.
2\. The GANC confirms resource release to CN using the _Iu Release Complete
message_.
3\. The GANC commands the MS to release resources, using the GA-RRC RELEASE
message.
4\. The MS confirms resource release to the GANC using the GA-RRC RELEASE
COMPLETE message and the GA-RRC state in the MS changes to GA-RRC-IDLE.
#### 5.2.5.8 Security Mode Control
The message flow for security mode control is shown in figure 64.
Figure 64: CS Security Mode Control
1\. The CN sends the RANAP _Security Mode Command_ message to GANC. This
message contains the integrity key (IK) and allowed algorithms, and optionally
the encryption key (CK) and allowed algorithms.
2\. The GANC sends the GA-RRC SECURITY MODE COMMAND message to the MS. This
message indicates the integrity protection and encryption settings (i.e. that
are applicable after relocation to UTRAN), and a random number. The MS stores
the information for possible future use after a relocation to UTRAN.
3\. The MS computes a MAC based on the random number, the MS IMSI and the
integrity key. The MS then sends the GA-RRC SECURITY MODE COMPLETE message to
signal its selected algorithm and the computed MAC.
4\. The GANC verifies the MAC. If the GANC verifies the MAC to be correct it
sends the _Security Mode Complete_ message to the CN.
NOTE: The MAC proves that the identity that is authenticated to the GANC is
the same as the identity authenticated to the core network. The configuration
option of not enabling security mode control in the network will therefore
open up the network to more security threats than in UTRAN.
#### 5.2.5.9 NAS Signalling Procedures
After GA-RRC connection establishment, NAS signalling may be transfer from CN-
to-MS and from MS-to-CN.
Figure 65: CN-to-MS NAS signalling
1\. For CN-to-MS NAS signalling, the CN sends a NAS PDU to the GANC via the
RANAP _Direct Transfer_ message.
2\. The GANC encapsulates the NAS PDU within a GA-RRC DL DIRECT TRANSFER
message and forwards the message to the MS via the existing TCP connection.
Figure 66: MS-to-CN NAS signalling
1\. The MS receives a request from the NAS layer to transfer an uplink NAS
PDU. Assuming the required signalling connection already exists, the MS
encapsulates the NAS PDU within a GA-RRC UL DIRECT TRANSFER message and sends
the message to the GANC.
2\. The GANC relays the received message to the CN via the RANAP _Direct
Transfer_ message.
#### 5.2.5.10 Mobile Originated CS Call
The description of the procedure in this subclause assumes the MS is in GAN
mode; i.e. it has successfully registered with the GANC and GA-RRC is the
serving RR entity for CS services in the MS. It also assumes that no GA-RRC
signalling connection exists between the MS and GANC (i.e. GA-RRC-IDLE state).
Figure 67: Mobile Originated CS Call
> 1\. The GA-RRC Connection Establishment procedure is performed as described
> in subclause 5.2.5.7.1.
>
> 2\. The MS sends the _CM Service Request_ message to the GANC within the GA-
> RRC UL DIRECT TRANSFER message.
>
> 3\. The GANC establishes an SCCP connection to the MSC and forwards the NAS
> PDU (i.e. the CM Service Request message) to the MSC using the RANAP Initial
> UE Message. The message includes the Domain Indicator set to value \'CS
> domain\'. Subsequent NAS messages between the MS and MSC will be sent
> between GANC and MSC using the RANAP Direct Transfer message.
>
> 4\. The MSC may optionally authenticate the MS using standard UTRAN
> authentication procedures.
>
> 5\. The MSC normally initiates the Security Mode Control procedure described
> in subclause 5.2.5.8.
>
> 6\. The MS sends the _Setup_ message providing details on the call to the
> MSC and its bearer capability and supported codecs. This message is
> contained within the GA-RRC UL DIRECT TRANSFER between the MS and the GANC.
> The GANC forwards the _Setup_ message to the MSC.
>
> 7\. The MSC indicates it has received the call setup and it will accept no
> additional call-establishment information using the _Call Proceeding_
> message to the GANC. The GANC forwards this message to the MS in the GA-RRC
> DL DIRECT TRANSFER message.
>
> 8\. The MSC requests the GANC to assign call resources using the RANAP _RAB
> Assignment Request_ message. The MSC includes the RAB-ID, the CN Transport
> Layer Address and the CN Iu Transport Association for user data.
>
> 9\. The Iu bearer is established per standard Iu procedures. In the case of
> the ATM-based Iu-cs interface, this may include the exchange of ALCAP
> signalling between the GANC and the MSC to setup the ATM virtual circuit.
> For both ATM and IP-based Iu-cs interface types, Iu bearer establishment may
> also include the Iu UP initialization exchange, if Iu UP support mode is
> required as indicated by the MSC in the RANAP _RAB Assignment Request_
> message.
>
> 10\. The GANC sends the GA-RRC ACTIVATE CHANNEL message to the MS including
> bearer path setup information such as:
>
> \- Channel mode.
>
> \- Multi-rate codec configuration.
>
> \- UDP port & the IP address for the uplink RTP stream.
>
> \- Voice sample size.
>
> 11\. The MS sends the GA-RRC ACTIVATE CHANNEL ACK to the GANC indicating the
> UDP port for the downlink RTP stream.
>
> 12\. The GANC signals to the MSC that the RAB has been established by
> sending a RANAP _RAB Assignment Response_ message.
>
> 13\. The GANC signals the completion of the RAB establishment to the MS with
> the GA-RRC ACTIVATE CHANNEL COMPLETE message.
>
> 14\. The MSC signals to the MS, with the _Alerting_ message, that the
> B-Party is ringing. The message is transferred to the GANC and GANC forwards
> the message to the MS in the GA-RRC DL DIRECT TRANSFER. If the MS has not
> connected the audio path to the user, it shall generate ring back to the
> calling party. Otherwise, the network-generated ring back will be returned
> to the calling party.
>
> 15\. The MSC signals that the called party has answered, via the _Connect_
> message. The message is transferred to the GANC and GANC forwards the
> message to the MS in the GA-RRC DL DIRECT TRANSFER. The MS connects the user
> to the audio path. If the MS is generating ring back, it stops and connects
> the user to the audio path.
>
> 16\. The MS sends the _Connect Ack_ message in response, and the two parties
> are connected for the voice call. This message is contained within the GA-
> RRC UL DIRECT TRANSFER between the MS and the GANC. The GANC forwards the
> _Connect Ack_ message to the MSC.
>
> 17\. Bi-directional voice traffic flows between the MS and MSC through the
> GANC.
#### 5.2.5.11 Mobile Terminated CS Call
The description of the procedure in this subclause assumes the MS is in GAN
mode; i.e. it has successfully registered with the GANC and GA-RRC is the
serving RR entity for CS services in the MS. It also assumes that no GA-RRC
signalling connection exists between the MS and GANC (i.e. GA-RRC-IDLE state).
Figure 68: Mobile Terminated CS Call
> 1\. A mobile-terminated call arrives at the MSC. The MSC sends a RANAP
> _Paging message_ to the GANC identified through the last _Location Update_
> received by it and includes the TMSI if available. The IMSI of the mobile
> being paged is always included in the request.
>
> 2\. The GANC identifies the MS registration context using the IMSI provided
> by the MSC. It then pages the MS using the GA-RRC PAGING REQUEST message.
> The message includes the TMSI, if available in the request from the MSC;
> else it includes only the IMSI of the MS.
>
> 3\. The MS responds with a GA-RRC PAGING RESPONSE. The MS transitions to the
> GA-RRC-CONNECTED state.
>
> 4\. The GANC establishes an SCCP connection to the MSC. The GANC then
> forwards the paging response to the MSC using the RANAP _Initial UE
> Message_. Subsequent NAS messages between the MS and core network will be
> sent between GANC and MSC using the RANAP _Direct Transfer_ message.
>
> 5\. The MSC may optionally authenticate the MS using standard UTRAN
> authentication procedures.
>
> 6\. The MSC normally updates the security configuration in the MS, via the
> GANC, as described in subclause 5.2.5.8.
>
> 7\. The MSC initiates call setup using the _Setup_ message sent to the MS
> via GANC. GANC forwards this message to the MS in the GA-RRC DL DIRECT
> TRANSFER message.
>
> 8\. The MS responds with _Call Confirmed_ using the GA-RRC UL DIRECT
> TRANSFER after checking it\'s compatibility with the bearer service
> requested in the _Setup_ and modifying the bearer service as needed. If the
> _Setup_ included the signal information element, the MS alerts the user
> using the indicated signal, else the MS alerts the user after the successful
> configuration of the user plane. The GANC forwards the _Call Confirmed_
> message to the MSC.
>
> 9\. The MSC initiates the assignment procedure with the GANC, which triggers
> the setup of the RTP stream (voice bearer channel) between the GANC and MS,
> same as steps 8-13 in the MO call scenario described in subclause 5.2.5.10.
>
> 10\. The MS signals that it is alerting the user, via the _Alerting_ message
> contained in the GA-RRC UL DIRECT TRANSFER. The GANC forwards the _Alerting_
> message to the MSC. The MSC sends a corresponding alerting message to the
> calling party.
>
> 11\. The MS signals that the called party has answered, via the _Connect_
> message contained in the GA-RRC UL DIRECT TRANSFER. The GANC forwards the
> _Connect_ message to the MSC. The MSC sends a corresponding _Connect_
> message to the calling party and through connects the audio. The MS connects
> the user to the audio path.
>
> 12\. The MSC acknowledges via the _Connect Ack_ message to the GANC. GANC
> forwards this message to the MS in the GA-RRC DL DIRECT TRANSFER. The two
> parties on the call are connected on the audio path.
>
> 13\. Bi-directional voice traffic flows between the MS and MSC through the
> GANC.
#### 5.2.5.12 CS Call Clearing
Figure 69 shows call clearing initiated by the MS.
Figure 69: MS initiated CS Call clearing
1\. The MS sends the _Disconnect_ message to the CN to release the call. This
message is contained in the GA-RRC UL DIRECT TRANSFER message between MS and
GANC. The GANC forwards the _Disconnect_ message to the CN (i.e. using the
RANAP _Direct Transfer_ message).
2\. The CN responds with a _Release_ message to the GANC. The GANC forwards
this message to the MS using the GA-RRC DL DIRECT TRANSFER message.
3\. The MS responds with the _Release Complete_ message. This message is
contained within the GA-RRC UL DIRECT TRANSFER message between MS and GANC.
The GANC forwards the _Disconnect_ message to the CN.
4\. The CN triggers the release of connection as described in subclause
5.2.5.7.2.
### 5.2.5.13 CS Handover
#### 5.2.5.13.1 CS Handover from GERAN to GAN
The description of the GERAN to GAN handover procedure assumes the following:
  * the MS is on an active call on the GERAN; and
  * its mode selection is GAN-preferred, or if GERAN/UTRAN-preferred, > the RxLev from the current serving cell drops below a defined > threshold; and
  * the MS has successfully registered with a GANC, allowing the MS to > obtain GAN system information; and
  * the GANC has directed the MS to operate in Iu mode; and
  * the GERAN provides information on neighbouring 3G cells such that > one of the cells in the 3G neighbour list matches the 3G cell > information associated with the GANC, as provided in the > AS-related component of the system information obtained from the > GANC.
Figure 70: CS Handover from GERAN to GAN
> 1\. The MS begins to include GAN cell information in the _Measurement Report
> message_ to the GERAN. The MS reports the highest signal level for the GAN
> cell. This is not the actual measured signal level on GAN, rather an
> artificial value (i.e. RxLev = 63), allowing the MS to indicate preference
> for the GAN.
>
> 2\. Based on MS measurement reports and other internal algorithms, the GERAN
> BSC decides to handover to the GAN cell. The BSC starts the handover
> preparation by sending a _Handover Required_ message to the CN, identifying
> the target 3G RNC (GANC).
>
> 3\. The CN requests the target GANC to allocate resources for the handover
> using the _Relocation Request message_. The MS is identified by the included
> IMSI parameter.
>
> 4\. Since Iu UP support mode is indicated, the GANC sends the Iu UP
> INITIALIZATION packet to the IP address and UDP port indicated in the
> _Relocation Request_ message. This message is routed to the core network
> (e.g. the R4 media gateway).
>
> 5\. The core network responds with the Iu UP INITIALIZATION ACK packet. The
> core network sends the message to the source IP address and UDP port number
> of the received INITIALIZATION packet.
>
> 6\. The GANC builds a _Handover to UTRAN Command_ message and sends it to
> the CN through the _Relocation Request Acknowledge_ message.
>
> 7\. The CN forwards the _Handover to UTRAN Command_ message to the GERAN BSC
> in the BSSMAP _Handover Command_ message, completing the handover
> preparation.
>
> 8\. The GERAN BSC sends the _Intersystem to UTRAN Handover Command_ message,
> containing the _Handover to UTRAN Command_ message, to the MS to initiate
> handover to GAN. The MS does not switch its audio path from GERAN to GAN
> until handover completion (i.e. until it sends the GA-RRC HANDOVER COMPLETE
> message) to keep the audio interruption short.
>
> 9\. The MS accesses the GANC using the GA-RRC HANDOVER ACCESS message, and
> provides the entire _Intersystem to UTRAN Handover Command message_ received
> from GERAN.
>
> 10\. The GANC sends the GA-RRC ACTIVATE CHANNEL message to the MS including
> bearer path setup information such as:
>
> \- Channel mode.
>
> \- Multi-rate codec configuration.
>
> \- UDP port and the IP address for the uplink RTP stream.
>
> \- Voice sample size.
>
> 11\. The MS sends the GA-RRC ACTIVATE CHANNEL ACK to the GANC indicating the
> UDP port for the downlink RTP stream.
>
> 12\. The GANC signals the completion of the RAB establishment to the MS with
> the GA-RRC ACTIVATE CHANNEL COMPLETE message.
>
> 13\. The MS transmits the GA-RRC HANDOVER COMPLETE message to indicate the
> completion of the handover procedure at its end. It switches the user from
> the GERAN user plane to the GAN user plane.
>
> 14\. The GANC indicates to the CN that it has detected the MS, using
> _Relocation Detect_ message. The CN can optionally now switch the user plane
> from the source GERAN to the target GAN.
>
> 15\. Bi-directional voice traffic is now flowing between the MS and CN, via
> GANC.
>
> 16\. The target GANC indicates the handover is complete, using the
> _Relocation Complete_ message. If it had not done so before, the CN now
> switches the user plane from source GERAN to target GAN.
>
> 17\. Finally, the CN tears down the connection to the source GERAN, using
> _Clear Command message_.
>
> 18\. The source GERAN confirms the release of GERAN resources allocated for
> this call, using _Clear Complete message_.
##### 5.2.5.13.2 CS Handover from UTRAN to GAN
The description of the UTRAN to GAN Handover procedure assumes the following:
  * the MS is on an active call on the UTRAN; and
  * the MS has successfully registered with a GANC, allowing the MS to > obtain GAN system information; and
  * the GANC has directed the MS to operate in Iu mode; and
  * the UTRAN provides information on neighbouring cells such that one > of the cells in the neighbour list matches the cell associated > with the GANC, as provided in the AS-related component of the > system information obtained from GANC.
Additional description of the prerequisites for UTRAN to GAN handover may be
provided by RAN2.
Figure 71: CS Handover from UTRAN to GAN
> 1\. The MS begins to include information about a GAN cell in the
> _Measurement Report message sent_ to the RNC. The MS reports the highest
> signal level for the GAN cell. This is not the actual measured signal level
> on the GAN, rather an artificial value allowing the MS to indicate
> preference for the GAN.
>
> 2\. Based on MS measurement reports and other internal algorithms, the RNC
> decides to initiate handover to the GAN cell. The RNC starts the preparation
> phase of the Relocation procedure by sending a _Relocation Required_ message
> to the MSC, identifying the target (EGAN) cell.
>
> 3-5. Same as steps 3-5 for GERAN to GAN Handover in subclause 5.2.5.13.1.
>
> 6\. The target GANC acknowledges the handover request message, using
> _Relocation Request Acknowledge message_ , indicating it can support the
> requested handover, and including a _Physical Channel Reconfiguration
> message_ that indicates the radio channel to which the MS should be
> directed.
>
> 7\. The MSC sends the _Relocation Command_ message to the RNC, completing
> the relocation preparation.
>
> 8\. The RNC sends the _**PHYSICAL CHANNEL RECONFIGURATION** message_ to the
> MS to initiate handover to GAN. The MS does not switch its audio path from
> UTRAN to GAN until handover completion (i.e. until it sends the GA-RRC
> HANDOVER COMPLETE message) to keep the audio interruption short.
>
> 9-16. Same as steps 9-16 for GERAN to GAN Handover in subclause 5.2.5.13.1.
>
> 17\. Finally, the MSC tears down the connection to the source RNC, using _Iu
> Release Command_.
>
> 18\. The source RNC confirms the release of UTRAN resources allocated for
> this call, using _Iu Release Complete_.
##### 5.2.5.13.3 CS Handover from GAN to GERAN
The procedure description in this subclause assumes the following:
  * the MS is on an active call in GAN Iu-mode; and
  * the GERAN becomes available; and
  * the MS mode selection is GERAN/UTRAN-preferred; or
  * the MS mode selection is GAN-preferred and the MS begins to leave > GAN coverage, based on its local measurements, received RTCP > reports, as well as any uplink quality indications received from > the GANC.
The handover from GAN to GERAN procedure is always triggered by the MS.
Figure 72: CS Handover from GAN to GERAN
> 1\. The GANC may send a GA-RRC UPLINK QUALITY INDICATION if there is a
> problem with the uplink quality for the ongoing call. Uplink Quality
> Indication is information sent by the GANC to the MS indicating the crossing
> of a uplink quality threshold in the uplink direction. Whenever the MS
> receives an indication of bad quality, it should start the handover
> procedure, as described in the next step. Alternatively, MS can use its
> local measurements or received RTCP reports, to decide to initiate the
> handover procedure.
>
> 2\. The MS sends the GA-RRC HANDOVER INFORMATION message to the GANC
> indicating the Channel Mode and a list of target GERAN cells, identified by
> CGI, in order of preference (e.g. ranked by C1 path loss parameter) for
> handover, and includes the received signal strength for each identified
> GERAN cell. This list is the most recent information available from the GSM
> RR subsystem. In addition, the GA-RRC HANDOVER INFORMATION message may
> include a list of target UTRAN cells ranked in order of preference for
> handover, and the received signal strength for each identified UTRAN cell.
>
> 3\. If the Serving GANC selects a target GERAN cell, the handover to GERAN
> procedure is performed. The Serving GANC starts the handover preparation by
> signalling to the MSC the need for handover, using _Relocation Required,_
> and including the GERAN cell list provided by the MS. The GANC may include
> only a subset of the cell list provided by the MS.
>
> 4\. The MSC selects a target GERAN cell and requests it to allocate the
> necessary resources, using _Handover Request_.
>
> 5\. The target GERAN builds a _Handover Command_ message providing
> information on the channel allocated and sends it to the MSC through the
> _Handover Request Acknowledge_ message.
>
> 6\. The MSC signals the GANC to handover the MS to the GERAN, using
> _Relocation Command_ message, ending the handover preparation phase.
>
> 7\. GANC transmits the GA-RRC HANDOVER COMMAND to the MS including the
> details sent by the GERAN on the target resource allocation.
>
> 8\. The MS transmits the _Um: Handover Access_ containing the handover
> reference element to allow the target GERAN to correlate this handover
> access with the _Handover Command_ message transmitted earlier to the MSC in
> response to the _Handover Required_.
>
> 9\. The target GERAN confirms the detection of the handover to the MSC,
> using the _Handover Detect_ message.
>
> 10\. The MSC may at this point switch the user plane to the target BSS.
>
> 11\. The GERAN provides _Physical Information_ to the MS (i.e. _Timing
> Advance_) to allow the MS to synchronize with the GERAN.
>
> 12\. The MS signals to the GERAN that the handover is completed, using
> _Handover Complete_.
>
> 13\. The GERAN confirms to the MSC the completion of the handover, via
> _Handover Complete_ message. The MSC may use the target CGI used in the
> Handover procedure for charging purposes.
>
> 14\. Bi-directional voice traffic is now flowing between the MS and MSC, via
> the GERAN.
>
> 15\. On receiving the confirmation of the completion of the handover, the
> MSC indicates to the GANC to release any resources allocated to the MS, via
> the _Iu Release Command_.
>
> 16\. GANC commands the MS to release resources, using the GA-RRC RELEASE
> message.
>
> 17\. GANC confirms resource release to MSC using the _Iu Release Complete_
> message.
>
> 18\. The MS confirms resource release to the GANC using the GA-RRC RELEASE
> COMPLETE message.
>
> 19\. The MS may finally deregister from the GANC, using GA-RC DEREGISTER
> message.
##### 5.2.5.13.4 CS Handover from GAN to UTRAN
The procedure description in this subclause assumes the following:
  * the MS is on an active call in GAN Iu-mode; and
  * the MS is capable of operating in all of the GAN, GERAN and UTRAN > modes; and
  * the UTRAN becomes available; and
```{=html}
``` \- the MS is in GERAN/UTRAN-preferred mode; or
  * the MS mode selection is GAN preferred and begins to leave GAN > coverage, based on its local measurements, received RTCP reports, > as well as any uplink quality indications received from the GANC.
The handover from GAN procedure is always triggered by the MS.
Additional description of the prerequisites for GAN to UTRAN handover may be
provided by RAN2.
Figure 73: CS Handover from GAN to UTRAN
> 1\. The GANC may send a GA-RRC UPLINK QUALITY INDICATION if there is a
> problem with the uplink quality for the ongoing call. Uplink Quality
> Indication is information sent by the GANC to the MS indicating the crossing
> of a uplink quality threshold in the uplink direction. Whenever the MS
> receives an indication of bad quality, it should start the handover
> procedure, as described in the next step. Alternatively, MS can use its
> local measurements or received RTCP reports, to decide to initiate the
> handover procedure.
>
> 2\. The MS sends the GA-RRC HANDOVER INFORMATION message to the Serving GANC
> indicating the Channel Mode and a list of candidate target UTRAN and GERAN
> cells, in order of preference for handover, and includes the received signal
> strength for each identified cell. The UTRAN cells are identified by the
> PLMN ID, the LAC and the 3G Cell identity (defined in 3GPP TS 25.331 [23]).
NOTE: The choice of the candidate target UTRAN cells is out of the scope of
this technical specification.
> 3\. If the Serving GANC selects UTRAN as the target RAT, the handover to
> UTRAN procedure is performed. The Serving GANC starts the handover
> preparation by signalling to the MSC the need for handover, using
> _Relocation Required and including the UTRAN cell list provided by the_ MS.
> _The GANC may include only a subset of the cell list provided by the_ MS.
>
> 4\. The MSC starts the handover procedure towards the target RNC identified
> by the Serving GANC. The MSC requests from the target RNC to allocate the
> necessary resources using _Relocation Request_.
>
> 5\. The target RNC builds a _Physical Channel Reconfiguration_ message
> providing information on the allocated UTRAN resources and sends it to the
> MSC through the _Relocation Request Acknowledge_ message.
>
> 6\. The MSC signals the Serving GANC to handover the MS to the UTRAN, using
> _Relocation Command_ message (which includes the _Physical Channel
> Reconfiguration_ message), ending the handover preparation phase.
>
> 7\. The Serving GANC transmits the GA-RRC HANDOVER COMMAND to the MS
> including the details sent by the UTRAN on the target resource allocation.
>
> 8\. Target RNS achieves uplink synchronization on the Uu interface.
>
> 9\. The target RNC confirms the detection of the handover to the MSC, using
> the _Relocation Detect_ message.
>
> 10\. The MSC may at this point switch the user plane to the target RNS.
>
> 11\. The MS signals to the UTRAN that the handover is completed, using
> _Handover to UTRAN Complete_.
>
> 12\. The UTRAN confirms to the MSC the completion of the handover, via
> _Relocation Complete_ message. If the user plane has not been switched in
> step 10, the MSC switches the user plane to the target RNS.
>
> 13\. Bi-directional voice traffic is now flowing between the MS and MSC, via
> the UTRAN.
>
> 14\. On receiving the confirmation of the completion of the handover, the
> MSC indicates to the Serving GANC to release any resources allocated to the
> MS, via the _Iu Release Command_.
>
> 15\. The Serving GANC commands the MS to release resources, using the GA-RRC
> RELEASE message.
>
> 16\. The Serving GANC confirms resource release to MSC using the _Iu Release
> Complete_ message.
>
> 17\. The MS confirms resource release to the Serving GANC using the GA-RRC
> RELEASE COMPLETE message.
>
> 18\. The MS may finally deregister from the Serving GANC, using GA-RC
> DEREGISTER message.
#### 5.2.5.14 Void
#### 5.2.5.15 Void
#### 5.2.5.16 Void
#### 5.2.5.17 GA-RRC Packet Transport Channel Management Procedures
The GA-RRC Packet Transport Channel (GA-RRC PTC) provides the association
between the MS and the network for the transport of GPRS user data over the Up
interface (i.e. via the GAN in Iu-mode).
The PTC uses the GTP-U G-PDU message format running over UDP transport. The
endpoint addresses of the PTC are identified by the IP addresses and UDP ports
assigned to the PTC in the MS and network during the PTC activation procedure.
The UDP port number for GTP-U is as defined in 3GPP TS 29.060 [5].
Multiple PTC instances between a MS and the network may be activated at the
same time, using the same endpoint addresses. Each PTC instance is assigned
unique GTP-U Tunnel Endpoint IDs (one on the MS and one on the network) during
the activation procedure.
The MS and GANC manage the activation and deactivation of the PTC instances
based on the requests for data transfer and the configurable PTC Timer.
##### 5.2.5.17.1 States of the GA-RRC Packet Transport Channel
The MS in the GA-RRC-CONNECTED state can be in one of two PTC substates for
each PTC: PTC-STANDBY or PTC-ACTIVE.
  * **PTC-STANDBY:** This is the initial/default PTC substate of the MS > when in the GA-RRC-CONNECTED state in GAN mode. The MS is not able > to send or receive GPRS user data to or from the network using the > PTC. The MS needs to activate the PTC before sending any GPRS user > data via the PTC. When the MS successfully establishes a PTC, the > MS transitions to the PTC-ACTIVE substate.
  * **PTC-ACTIVE:** The MS is in the GA-RRC-CONNECTED state and the PTC > is active between the MS and the network and the MS is able to > send and receive GPRS user data to and from the network.
The following are the possible triggers for GA-RRC PTC activation on the MS
side:
  * The MS initiates the uplink user data transfer.
  * The GANC initiates PTC activation; i.e. the MS receives a > GA-RRC-ACTIVATE-PTC-REQUEST message from the GANC. The receipt of > downlink data from the SGSN would be a trigger for GANC-initiated > PTC activation.
On successful PTC activation and in parallel with transition to the PTC-ACTIVE
substate, the MS starts the PTC Timer. When the PTC Timer expires, the MS
sends a message to the GANC to initiate PTC deactivation. On successful PTC
deactivation, the MS transitions to the PTC-STANDBY substate.
At any time while in the GA-RRC-CONNECTED state and the PTC-ACTIVE substate,
the MS may receive the GA-RRC RELEASE message. In addition to requesting
release of the GA-RRC session, this is interpreted by the MS as an implicit
PTC deactivate command.
At any time while in GAN mode, if the serving RR entity is switched to GSM-
RR/UTRAN-RRC, the GA-PSR is disconnected from the GPRS SAPs and the MS enters
GERAN/UTRAN mode. Simultaneously, the MS will release the associated PTC
regardless of the PTC Timer status.
The MS GA-PSR entity maintains one PTC for each active PDP context. The PTC
Timer is restarted whenever any uplink user data packet is sent or downlink
user data packet is received related to the PDP context.
The PTC Timer value is provided to the MS as part of the GAN Registration
procedure (i.e. in the GA-RC REGISTER ACCEPT message).
##### 5.2.5.17.2 PTC Initial Activation
The following figure depicts the Packet Transport Channel initial activation
procedure, assuming the MS is in the GA-RRC-IDLE state.
Figure 74: PTC initial activation
> 1\. The GA-RRC Connection Establishment procedure is performed as described
> in subclause 5.2.5.7. The MS transitions to the GA-RRC-CONNECTED state and
> the PTC-STANDBY substate.
>
> 2\. Additional PS signalling procedures are performed; examples are
> illustrated in subclauses 5.2.5.18 and 5.2.5.19.
>
> 3\. The SGSN initiates the RAB Assignment procedure and includes the RAB-ID,
> the CN Transport Layer Address (IP address) and the CN Iu Transport
> Association (GTP-U Terminal Endpoint Identifier, TEID) for user data.
>
> 4\. The GANC sends the GA-RRC ACTIVATE PTC REQUEST message to the MS to
> request activation of the Packet Transport Channel. The message includes the
> RAB-ID, a TEID that the GANC assigns to the MS (\"MS TEID\" in the figure),
> the GANC PTC IP Address (i.e. the destination address for PTC packets from
> the MS) and the CN TEID received in step 3.
>
> 5\. The MS acknowledges the PTC activation.
>
> 6\. The GANC sends the RAB Assignment Response message to the SGSN to
> complete the RAB Assignment procedure. The GANC includes the RAB-ID, the RAN
> Transport Layer Address (i.e. the GANC\'s Iu-PS IP address) and the RAN Iu
> Transport Association (i.e. the TEID that the GANC assigned to the MS).
>
> 7\. The GANC signals the completion of the RAB establishment to the MS with
> the GA-RRC ACTIVATE PTC COMPLETE message. On receipt of the message, the MS
> transitions to the PTC-ACTIVE substate and starts the PTC Timer.
>
> 8\. Additional PS signalling procedures are performed; examples are
> illustrated in subclauses 5.2.5.18 and 5.2.5.19.
>
> 9\. The MS transfers uplink user data by sending a GA-RRC G-PDU message to
> the GANC PTC IP address received in step 4. The message includes the CN TEID
> received in step 4. The GANC relays the message to the SGSN in the Iu-PS
> G-PDU message.
>
> 10\. The SGSN transfers downlink user data by sending a Iu-PS G-PDU message
> to the GANC Iu-PS IP address received in step 6. The message includes the MS
> TEID received in step 6. The GANC relays the message to the MS in the GA-RRC
> G-PDU message.
##### 5.2.5.17.3 PTC Data Transfer
Figure 75 illustrates the transfer of GPRS user data packets via the GAN
Packet Transport Channel.
Figure 75: PTC Data Transfer
> 1\. If required, the GAN PTC is established as specified in subclause
> 5.2.5.17.2. Upon the GA-RRC PTC establishment, the MS enters the PTC-ACTIVE
> substate and starts the PTC Timer.
>
> 2\. The MS transfers uplink user data by sending a GA-RRC G-PDU message to
> the GANC and restarts the PTC Timer. The GANC relays the message to the SGSN
> in the Iu-PS G-PDU message.
>
> 3\. The SGSN transfers downlink user data by sending a Iu-PS G-PDU message
> to the GANC. The GANC relays the message to the MS in the GA-RRC G-PDU
> message. On receipt of the message, the MS restarts the PTC Timer.
##### 5.2.5.17.4 MS initiated PTC Deactivation
Figure 76 depicts the scenario when the MS deactivates the Packet Transport
Channel after the PTC Timer expires.
Figure 76: MS initiated PTC deactivation
The MS is in the GA-RRC-CONNECTED state and the PTC-ACTIVE substate.
> 1\. The PTC Timer associated with one of the active packet transport
> channels expires.
>
> 2\. The MS sends the GA-RRC DEACTIVATE PTC REQUEST message to the GANC,
> including the RAB-ID to identify the PTC and indicating the normal release
> as a cause for deactivation.
>
> 3\. The GANC sends a RAB Release Request message to the SGSN to request the
> release of the associated RAB.
>
> 4\. The SGSN responds with the RAB Assignment Request indicating release.
>
> 5\. The GANC responds to the MS with a GA-RRC DEACTIVATE PTC ACK message to
> acknowledge successful deactivation. The MS transitions to the PTC-STANDBY
> substate.
>
> 6\. The GANC sends the RAB Assignment Response message to notify the SGSN
> that the RAB Release procedure is complete.
##### 5.2.5.17.5 MS initiated PTC Re-activation
Figure 77 depicts the scenario when the MS initiates re-activation of the
Packet Transport Channel while in the GA-RRC-CONNECTED and PMM-CONNECTED
states; e.g. a PS signalling connection and active PDP context exists between
the MS and CN but the PTC was previously deactivated by the MS due to PTC
Timer expiry.
Figure 77: MS initiated PTC re-activation
The MS is in the GA-RRC-CONNECTED state and the PTC-STANDBY substate. The MS
is in the PMMâ€‘CONNECTED state (i.e. a PS signalling connection and an active
PDP context exists).
> 1\. The MS has a PDU to send. The MS sends the _Service Request_ message
> (with Service type value \"Data\") to the GANC in the GA-RRC UL DIRECT
> TRANSFER message.
>
> 2\. The GANC forwards the Service Request over the existing signalling
> connection to the SGSN using the RANAP _Direct Transfer_ message.
>
> 3\. The SGSN may optionally initiate the Security Mode Control procedure
> described in subclause 5.2.5.8.
>
> 4\. The SGSN responds with a Service Accept message.
>
> 5\. The GANC forwards the message to the MS.
>
> 6\. The MS, GANC and SGSN establish the GA-RRC Packet Transport Channel
> (PTC) as described in steps 3-7 in subclause 5.2.5.17.2. The MS transitions
> to the PTC-ACTIVE substate and starts the PTC Timer.
>
> 7\. The MS transfers the uplink user data by sending a GA-RRC G-PDU message
> to the GANC and starts the PTC Timer. The GANC relays the message to the
> SGSN in the Iu-PS G-PDU message. Additional data transfer may take place.
##### 5.2.5.17.6 Network initiated PTC De-activation
Figure 78 depicts the scenario when the network initiates de-activation of the
Packet Transport Channel.
Figure 78: Network initiated PTC de-activation
The MS is in the GA-RRC-CONNECTED state and the PTC-ACTIVE substate.
> 1\. Optionally, the GANC may initiate the PTC de-activation procedure; e.g.
> as a result of an error handling procedure. If so, the GANC sends the RAB
> Release Request message to the SGSN.
>
> 2\. The SGSN sends a RAB Assignment Request to request the release of the
> associated RAB. The release request may include one or more RABs.
>
> 3\. The GANC requests deactivation of the associated GA-RRC PTC by sending
> the GA-RRC DEACTIVATE PTC REQUEST message to the MS.
>
> 4\. The MS transitions to the PTC-STANDBY substate, stops the PTC Timer and
> sends the acknowledgment back to the GANC. Steps 3 and 4 are repeated for
> each additional RAB/PTC that needs to be released.
>
> 5\. The GANC notifies the SGSN that the release was successful.
##### 5.2.5.17.7 Network initiated PTC Re-activation
Figure 79 depicts the scenario when the network initiates re-activation of the
Packet Transport Channel while the MS is in the GA-RRC-CONNECTED and PMM-
CONNECTED states; e.g. a PS signalling connection and active PDP context
exists between the MS and CN but the PTC was previously deactivated.
Figure 79: Network initiated PTC re-activation
The MS is in the GA-RRC-CONNECTED state and the PTC-STANDBY substate. The MS
is in the PMM-CONNECTED state (i.e. a PS signalling connection and an active
PDP context exists).
> 1\. The SGSN has a PDU to send to send to the MS. The SGSN may optionally
> initiate the Security Mode Control procedure described in subclause 5.2.5.8.
>
> 2\. The MS, GANC and SGSN establish the GA-RRC Packet Transport Channel
> (PTC) as described in steps 3-7 in subclause 5.2.5.17.2. The MS transitions
> to the PTC-ACTIVE substate and starts the PTC Timer.
>
> 3\. The SGSN sends the downlink PDU. Additional data transfer may take
> place.
##### 5.2.5.17.8 Implicit PTC De-activation due to MS De-registration
As part of the GAN de-registration procedure, the GANC needs to release all
resources allocated to the MS. GAN deâ€‘registration may be initiated either
explicitly by the MS or implicitly by the GANC if the loss of the signalling
connection is detected (as described in subclause 8.5.4.2.
Figure 80: Implicit PTC deactivation
Initially, one or more GA-RRC PTCs associated with a MS are in the PTC-ACTIVE
state.
> 1\. The GAN de-registration procedure is initiated for the MS either by the
> MS or GANC.
>
> 2\. Optionally, any outstanding resources associated with the CS Domain are
> released.
>
> 3\. Optionally, if there are any outstanding resources associated with the
> PS Domain, the GANC initiates the Iu release procedure to the SGSN to
> release the corresponding RABs.
>
> 4\. The SGSN responds with Iu Release Command.
>
> 5\. Upon receiving the Iu Release Command, the GANC locally deactivates all
> associated PTCs; and
>
> 6\. ...responds to the SGSN with an Iu Release Complete message.
#### 5.2.5.18 PDP Context Activation
Figure 81 illustrates the successful MS-initiated PDP Context Activation
procedure, assuming the MS is in GA-RRC-IDLE state.
Figure 81: PDP Context Activation
> 1\. The GA-RRC Connection Establishment procedure is performed as described
> in subclause 5.2.5.14.1.
>
> 2\. The MS sends the _Service Request_ message (with Service type value
> \"Signalling\") to the GANC within the GA-RRC UL DIRECT TRANSFER message.
>
> 3\. The GANC establishes an SCCP connection to the SGSN and forwards the
> _Service Request_ message to the SGSN using the RANAP _Initial UE Message_.
> Subsequent NAS messages between the MS and core network will be sent between
> GANC and SGSN using the RANAP _Direct Transfer_ message.
>
> 4\. The SGSN may optionally authenticate the MS using standard UTRAN
> authentication procedures.
>
> 5\. The SGSN normally initiates the Security Mode Control procedure
> described in subclause 5.2.5.8.
>
> 6\. The SGSN responds with a Service Accept message. The GANC forwards the
> message to the MS.
>
> 7\. The MS sends the _Activate PDP Context Request_ message providing
> details on the PDP context to the SGSN. This message is contained within the
> GA-RRC UL DIRECT TRANSFER between the MS and the GANC. The GANC forwards the
> _Activate PDP Context Request_ message to the SGSN.
>
> 8\. The MS, GANC and SGSN establish the GA-RRC Packet Transport Channel
> (PTC) as described in steps 3-7 in subclause 5.2.5.17.2.
>
> 9\. The SGSN indicates the PDP context establishment is complete using the
> _Activate PDP Context Accept_ message to the GANC. GANC forwards this
> message to the MS in the GA-RRC DL DIRECT TRANSFER message.
>
> 10\. The MS, GANC and CN exchange user data via the established PTC.
#### 5.2.5.19 Network Requested PDP Context Activation
Figure 82 illustrates the successful Network-Requested PDP Context Activation
procedure, assuming the MS is in GA-RRC-IDLE state.
Figure 82: Network Requested PDP Context Activation
Initially, the SGSN received downlink user data to transfer to the MS and the
associated RAB is not established. The MS is in PMM-IDLE state.
> 1\. The SGSN sends the RANAP _Paging_ message to the MS via the GANC to
> locate the user. The paging request indicates paging for PS Domain
> signalling.
>
> 2\. The GANC forwards the paging information to the MS in the GA-RRC PAGING
> REQUEST message.
>
> 3\. The MS responds with a GA-RRC PAGING RESPONSE. The MS transitions to the
> GA-RRC-CONNECTED state.
>
> 4\. The GANC establishes an SCCP connection to the SGSN and forwards the
> _Service Request_ message (with Service type value \"Paging response\") to
> the SGSN using the RANAP _Initial MS Message_. Subsequent NAS messages
> between the MS and core network will be sent between GANC and SGSN using the
> RANAP _Direct Transfer_ message.
>
> 5\. The SGSN may optionally authenticate the MS using standard UTRAN
> authentication procedures.
>
> 6\. The SGSN may optionally initiate the Security Mode Control procedure
> described in subclause 5.2.5.8.
>
> 7\. The SGSN sends the _Request PDP Context Activation_ message to the GANC.
> The GANC forwards this message to the MS in the GA-RRC DL DIRECT TRANSFER
> message.
>
> 8\. The MS sends the _Activate PDP Context Request_ message providing
> details on the PDP context to the SGSN. This message is contained within the
> GA-RRC UL DIRECT TRANSFER between the MS and the GANC. The GANC forwards the
> _Activate PDP Context Request_ message to the SGSN.
>
> 9\. The MS, GANC and SGSN establish the GA-RRC Packet Transport Channel
> (PTC) as described in steps 3-7 in subclause 5.2.5.17.2.
>
> 10\. The SGSN indicates the PDP context establishment is complete using the
> _Activate PDP Context Accept_ message to the GANC. GANC forwards this
> message to the MS in the GA-RRC DL DIRECT TRANSFER message.
>
> 11\. The MS and SGSN exchange user data transfer via the established PTC.
NOTE: It is also possible for the network to release the Iu connection but
maintain the PDP context. In this case, steps 7, 8 and 10 are not necessary
for the network to re-initiate data flow.
#### 5.2.5.20 PS Handover between GERAN and GAN
##### 5.2.5.20.1 PS Handover from GERAN to GAN
This subclause to be aligned with the GAN PS Handover approach in GERAN.
##### 5.2.5.20.2 PS Handover from GAN to GERAN
This subclause to be aligned with the GAN PS Handover approach in GERAN.
#### 5.2.5.21 SRNS Relocation between UTRAN and GAN
The SRNS Relocation procedure is performed to move one or more PS sessions
between Iu mode GAN and UTRAN. The procedure relocates the Iu-ps connection
point at the GAN/UTRAN (in all cases) and at the SGSN (for inter-SGSN
Relocation case only).
Support for the Iur interface between UTRAN and GAN is FFS. Therefore, only
the Combined Hard Handover and SRNS Relocation is applicable for GAN - UTRAN
SRNS Relocation. Consequently, only the \"MS Involved\" Relocation Type is
supported.
Support for Lossless SRNS Relocation between UTRAN and GAN is FFS.
##### 5.2.5.21.1 SRNS Relocation from UTRAN to GAN
##### 5.2.5.21.1.1 Preparation Phase {#preparation-phase .H6}
The description of the UTRAN to GAN relocation procedure assumes the
following:
  * the MS has one or more active PDP Contexts with active RABs in the > UTRAN; and
  * the MS has successfully registered with a GANC, allowing the MS to > obtain GAN system information; and
  * the GANC has directed the MS to operate in Iu mode; and
  * the UTRAN provides information on neighbouring cells such that one > of the cells in the neighbour list matches the cell associated > with the GANC, as provided in the AS-related component of the > system information obtained from GANC.
Additional description of the prerequisites for UTRAN to GAN handover may be
provided by RAN2.
Figure 83: UTRAN to GAN SRNS Relocation Preparation Phase
> 1\. The MS begins to include the GAN cell information in the Measurement
> Report sent to the RNC. In that message, it sets the GAN cell\'s signal
> strength indicator to the highest possible value.
>
> 2\. The RNC decides to initiate a Combined Hard Handover and SRNS Relocation
> procedure. This decision is made based on the measurement reports and
> vendor/operator specific criteria. Upon deciding to initiate the Relocation,
> the RNC sends Relocation Required to the SGSN.
>
> 3\. The SGSN determines the target cell is the GANC, based on the contents
> of Relocation Required. It then sends the Relocation Request to the GANC.
>
> 4\. Upon receiving Relocation Request message, the GANC will setup Packet
> Transport Channel(s) as needed with appropriate attributes, as defined in
> the message.
>
> 5\. The GANC sends the Relocation Request Acknowledge message to the SGSN.
##### 5.2.5.21.1.2 Execution Phase {#execution-phase .H6}
Figure 84: UTRAN to GAN SRNS Relocation Execution Phase
> 1\. Upon receiving the positive acknowledgement from the GANC to serve the
> MS, the SGSN initiates the Execution Phase by sending the Relocation Command
> to the RNC.
>
> 2\. a) The RNC instructs the MS to initiate the switch to GAN via the
> Physical Channel Reconfiguration message.
>
> b) The RNC may start forwarding GTP PDUs to the GANC while still
> transmitting them in the downlink to the MS. This forwarding is routed via
> the Iu-PS interface. The GANC may buffer, transmit in the downlink, or
> discard these forwarded GTP PDUs, depending on the QoS profile, network
> conditions, and whether it supports Lossless Relocation.
>
> c) The RNC sends the Forward SRNS Context message to the GAN via the SGSN.
> In this message, the next-expected sequence number of uplink and downlink
> GTP-U packets are indicated to the GANC by the old SRNC.
>
> 3\. Immediately after receiving the Physical Channel Reconfiguration
> message, the MS sends GA-RRC-HANDOVER-COMPLETE message to the GANC. Upon
> receiving this message and the Forward SRNS Context message, the GANC
> becomes the Serving RNC.
>
> 4\. Immediately upon receiving the GA-RRC-HANDOVER-COMPLETE message from the
> MS, the GANC sends the Relocation Detect message to the SGSN.
>
> 5\. The GANC sends the Relocation Complete message to the SGSN.
>
> 6\. The MS, GANC and CN exchange user data via the established PTC.
>
> 7\. The SGSN releases the Iu-PS connection with the old RNC.
>
> 8\. If the Routing Area of the GANC cell (as indicated by the GANC to the
> MS) is different from that under the old RNC, then the MS performs the
> Routing Area Update procedure.
##### 5.2.5.21.2 SRNS Relocation from GAN to UTRAN
##### 5.2.5.21.2.1 Preparation Phase {#preparation-phase-1 .H6}
Figure 85: GAN to UTRAN SRNS Relocation Preparation Phase
> 1\. The MS is in active packet flow exchange with active PDP Context(s) and
> PTC(s) in the GAN.
>
> 2\. The GANC may send a GA-RRC UPLINK QUALITY INDICATION if there is a
> problem with the uplink quality for the ongoing session. Uplink Quality
> Indication is information sent by the GANC to the MS indicating the crossing
> of a uplink quality threshold in the uplink direction. Whenever the MS
> receives an indication of bad quality, it should start the relocation
> procedure, as described in the next step. Alternatively, MS can use its
> local measurements to decide to initiate the handover procedure.
>
> 3\. The MS decides to initiate an SRNS Relocation from GAN to UTRAN by
> sending GA-RRC-HANDOVER-INFORMATION message to the GANC.
>
> 4\. The GANC selects a target RNC based on the contents of the GA-RRC-
> HANDOVER-INFORMATION message. It sends Relocation Required message to the
> SGSN containing the selected RNC information.
>
> 5\. The SGSN sends a Relocation Request to the target RNC.
>
> 6\. The RNC performs the necessary allocation of radio and Iu transport
> resources.
>
> 7\. The RNC returns Relocation Request Acknowledge message to the SGSN. This
> message contains a transparent container that contains channelization
> information needed by MS to access UTRAN.
##### 5.2.5.21.2.2 Execution Phase {#execution-phase-1 .H6}
Figure 86: GAN to UTRAN SRNS Relocation Execution Phase
1\. The SGSN begins the Execution Phase by issuing _Relocation Command_ to the
GANC. The message contains the channel access information in the target UTRAN
cell.
2\. a) The GANC sends _GA-RRC-HANDOVER-COMMAND_ to the MS. This message
contains the information from the _Relocation Command_ received in Step 1
earlier.
b) The GANC also sends _Forward SRNS Context_ to the target RNC via the SGSN.
3\. The SGSN relays the _Forward SRNS Context_ to the target RNC.
4\. Upon receiving the _GA-RRC-HANDOVER-COMMAND_ , the MS immediately suspends
UL GTP PDU transfer. It immediately begins accessing the UTRAN using indicated
channelization parameters in the message. The MS\'s access attempt is detected
by the Node B and RNC, and is reported to the SGSN via the _Relocation Detect_
message.
5\. The MS completes the lower layer setup and configuration, and sends the
RRC _Physical Channel Reconfiguration Complete_ to the target RNC. This
triggers the _Relocation Complete_ message to SGSN. At this stage, the target
RNC assumes the role of SRNC for the MS.
6\. The packet data flow is now active via the UTRAN.
7\. The SGSN releases the Iu-PS connection by sending _Iu Release Command_
message to the GANC, to which GANC responds with _Iu Release Complete_
message.
### 5.2.6 Terminal Architecture Impacts
The following provides a summary of the Iu mode GAN proposal\'s impact on the
MS architecture. We describe the impacts on the following:
  * CS control plane.
  * CS user plane.
  * PS control plane.
  * PS user plane.
#### 5.2.6.1 Assumptions and Definitions
For the starting point, we assume that the baseline architecture already
supports:
1\. GSM/GPRS and UMTS per 3GPP specs;
2\. A/Gb mode GAN per 3GPP specs, including:
a. Interworking with UTRAN;
b. PS handover: Requires new interaction between GA-PSR and GERAN RLC/MAC.
We define the following logical functions in the MS (illustrated in the
figures that follow):
1\. \"CS User Plane Routing Service\":
a. This function selects between GERAN, UTRAN and GAN services depending on
GERAN/UTRAN/GAN (A/Gb) operating mode.
2\. \"PS User Plane Routing Service\":
a. This function selects between SNDCP and PDCP services depending on
GERAN/UTRAN (2G/3G) operating mode.
#### 5.2.6.2 Impact on CS Control Plane
##### 5.2.6.2.1 CS Control Plane - Before
Figure 87 illustrates the CS control plane elements BEFORE applying the Iu
mode GAN changes.
Figure 87: CS Control Plane (Before)
##### 5.2.6.2.2 CS Control Plane-After
Figure 88 illustrates the CS control plane elements AFTER applying the Iu mode
GAN changes.
Figure 88: CS Control Plane (After)
##### 5.2.6.2.3 Summary of CS Control Plane Changes
The CS user plane requires the following changes:
1\. Modify access mode switch to route CS NAS messages between NAS layer and
either UTRAN RRC or GAN GA-RRC.
2\. Modify GERAN RRC for handover of CS connection from GERAN to Iu mode GAN.
3\. Modify UTRAN RRC for handover of CS connection from UTRAN to Iu mode GAN.
NOTE: No modifications are required for handover of CS connection from
UTRAN/GERAN to A/Gb mode GAN.
#### 5.2.6.3 Impact on CS User Plane
##### 5.2.6.3.1 CS User Plane-Before
Figure 89 illustrates the CS user plane elements BEFORE applying the Iu mode
GAN changes.
Figure 89: CS User Plane (Before)
##### 5.2.6.3.2 CS User Plane-After
Figure 90 illustrates the CS user plane elements AFTER applying the Iu mode
GAN changes.
Figure 90: CS User Plane (After)
##### 5.2.6.3.3 Summary of CS User Plane Changes
No changes.
#### 5.2.6.4 Impact on PS Control Plane
##### 5.2.6.4.1 PS Control Plane-Before
Figure 91 illustrates the PS control plane elements BEFORE applying the Iu
mode GAN changes.
Figure 91: PS Control Plane (Before)
##### 5.2.6.4.2 PS Control Plane-After
Figure 92 illustrates the PS control plane elements AFTER applying the Iu mode
GAN changes.
Figure 92: PS Control Plane (After)
##### 5.2.6.4.3 Summary of PS Control Plane Changes
The PS control plane requires the following changes:
1\. Modify access mode switch to route PS NAS messages between NAS layer and
either UTRAN RRC or GAN GA-RRC.
2\. Modify GERAN RRC for handover of PS connection from GERAN to Iu mode GAN.
3\. Modify UTRAN RRC for handover of PS connection from UTRAN to Iu mode GAN.
NOTE: No modification required for handover of PS connection from UTRAN/GERAN
to A/Gb mode GAN.
#### 5.2.6.5 Impact on PS User Plane
##### 5.2.6.5.1 PS User Plane-Before
Figure 93 illustrates the PS user plane elements BEFORE applying the Iu mode
GAN changes.
Figure 93: PS User Plane (Before)
##### 5.2.6.5.2 PS User Plane-After
Figure 94 illustrates the PS user plane elements AFTER applying the Iu mode
GAN changes.
Figure 94: PS User Plane (After)
##### 5.2.6.5.3 Summary of PS User Plane Changes
The PS user plane requires the following changes:
1\. Add a new access mode switch to route PS Data between application and
either UTRAN PDCP or GAN GAâ€‘RRC.
# 6 Evaluation Section
## 6.1 Enhanced Up
Table 3
+----------------------+----------------------+----------------------+ | Objectives (as | Evaluation/\ | Comments, as needed | | agreed in the Ad Hoc | conformance | | | meeting in | | | | GANE-07038) | | | +----------------------+----------------------+----------------------+ | 1. GAN Enhancements | Compliant | Enhanced Up A/Gn is | | shall be backwards | | a solution of type | | compatible with GAN | | 1b). | | in 3GPP Rel-6 and | | | | Rel-7. | | Rel-6 and 7 | | | | terminals will not | | Two levels of | | benefit from the | | enhancements: | | enhancements | | | | introduced by this | | > a) Forwards | | solution, but these | | > compatible from | | terminals work with | | > Rel-6: Rel-6 and | | this solution using | | > Rel-7 terminals | | the existing GAN | | > work with the | | procedures. | | > enhancements i.e. | | | | > network-only | | | | > enhancements | | | | > | | | | > b) Not forwards | | | | > compatible from | | | | > Rel-6 | | | | > (respectively | | | | > Rel-7): Rel-6 | | | | > (respectively | | | | > Rel-7) terminals | | | | > do not work with | | | | > the enhancements. | | | +----------------------+----------------------+----------------------+ | - Support at | Compliant | The Enhanced Up A/Gn | | > minimum the | | solution supports | | > same services | | exactly the same | | > as GAN in 3GPP | | services as GAN in | | > Rel-6 and | | 3GPP Rel-6 and | | > Rel-7; and | | Rel-7. | +----------------------+----------------------+----------------------+ | - Support existing | Compliant | The Enhanced Up A/Gn | | > QoS management | | solution supports | | > as specified | | existing QoS | | > in 3GPP; and | | management as | | | | specified in 3GPP. | +----------------------+----------------------+----------------------+ | - Minimize the | Compliant | No changes to | | > impact on the | | existing CN nodes or | | > Core Network. | | interfaces are | | | | introduced. A new | | | | logical node type, | | | | Enhanced Up A/Gn, is | | | | defined. | +----------------------+----------------------+----------------------+ | 2. GAN Enhancements | Compliant | The Enhanced Up A/Gn | | shall abide as per | | solution abides the | | the unchanged GAN | | existing GAN | | principle to keep | | principle of | | the transparent | | providing a | | support for any | | transparent support | | given service | | of GSM/UMTS | | between UTRAN or | | services: | | GERAN, and GAN. | | | | | | > 1) in CS domain | | | | > as it does not | | | | > change from GAN | | | | > R6/R7, and | | | | > | | | | > 2) in PS domain | | | | > as the enhanced | | | | > GANC provides all | | | | > SGSN services (PDP | | | | > context | | | | > act | | | | iv./deactiv./modif., | | | | > charging and CAMEL | | | | > interfaces, lawful | | | | > interception, APN | | | | > mechanisms, as | | | | > well as | | | | > authorization and | | | | > subscriber profile | | | | > modifications from | | | | > HSS). Seamless | | | | > continuity of | | | | > GSM/UMTS services | | | | > is also provided | | | | > by a mobility | | | | > mechanism using | | | | > simultaneous | | | | > radios (no need | | | | > for MM/PDP context | | | | > transfers) and | | | | > IPsec tunnelling | | | | > (no need for | | | | > paging areas). | +----------------------+----------------------+----------------------+ | - E.g. preserve | Compliant | The existing APN | | > the existing | | mechanisms in SGSN | | > APN mechanism. | | remain unchanged | | | | with the Enhanced Up | | | | A/Gn solution. Only | | | | DNS configuration is | | | | required. | +----------------------+----------------------+----------------------+ | 3. GAN Enhancements | Compliant | The Enhanced Up A/Gn | | shall minimize the | | solution: | | additional | | | | complexity on | | > 1) Does not | | existing GANCs if | | > change anything in | | applicable. | | > the CS domain (Up | | | | > GA-CSR interface | | | | > as well as A, Lb | | | | > and Bc | | | | > interfaces). | | | | > | | | | > 2) Fully reuses | | | | > all the | | | | > aut | | | | hentication/security | | | | > mechanisms and | | | | > interfaces (Up, | | | | > Wm). | | | | > | | | | > 3) Fully reuses | | | | > the | | | | > di | | | | scovery/registration | | | | > mechanisms with | | | | > only three | | | | > additional | | | | > parameters (UE | | | | > capability, GANC | | | | > capability, GA-SM | | | | > address) in | | | | > existing Up GA-RC | | | | > messages. | | | | > | | | | > 4) PS domain is | | | | > enhanced with | | | | > overlaid GA-SM | | | | > protocol, Session | | | | > Management | | | | > function and | | | | > Proxy-Gn mobility | | | | > function. | | | | > | | | | > 5) Standardized | | | | > interfaces that | | | | > need to be | | | | > additionally | | | | > supported at the | | | | > EGANC are: Gn. and | | | | > optionally Ga | | | | > (CGF) and Ge | | | | > (Camel). | +----------------------+----------------------+----------------------+ | 4. GAN Enhancements | Compliant | The Enhanced Up A/Gn | | shall minimize the | | solution does not | | additional | | impact the existing | | complexity on | | layers (NAS-SM/MM | | terminals (see case | | and AS). It only | | 1b above). | | adds: | | | | | | | | > 1) A GA-SM | | | | > signalling | | | | > protocol for EGAN | | | | > mode only, on top | | | | > of EGAN UDP-IP | | | | > layer. | | | | > | | | | > 2) An EGAN access | | | | > mode switch below | | | | > Application IP | | | | > layer, which does | | | | > not impact | | | | > existing SMREG-SAP | | | | > interface. | +----------------------+----------------------+----------------------+ | 5. GAN Enhancements | Partly Compliant. | The Enhanced Up A/Gn | | shall reduce the | | solution as such | | complexity for | | doesn\'t enhance the | | delivery of CS and | | CS services at all. | | PS services. | | However, any | | | | enhancements to the | | | | Aâ€‘interface are | | | | inherited | | | | automatically to | | | | this solution, in | | | | particular A/IP | | | | standardized | | | | interface (SIGTRAN). | | | | | | | | The complexity for | | | | the delivery of PS | | | | services is reduced | | | | as stated below. | +----------------------+----------------------+----------------------+ | - E.g. by reducing | Compliant | Achieved for the PS | | > the number of | | domain via: | | > functions | | | | > and/or | | > 1) the reduction | | > protocol | | > of the number of | | > overhead. | | > nodes (Built-in | | | | > one Tunnel | | | | > solution); | | | | > | | | | > 2) the number of | | | | > signalling layers | | | | > ( | | | | NAS+LLC+GA-PSR+GA-RC | | | | > are replaced by | | | | > GA-SM); | | | | > | | | | > 3) the number of | | | | > user plane layers | | | | > (SN | | | | DCP+LLC+GA-PSR+GA-RC | | | | > are replaced by a | | | | > IP flow | | | | > identification | | | | > mechanism. e.g. | | | | > IETF GRE). | +----------------------+----------------------+----------------------+ | 6. GAN Enhancements | _Dual-mode GAN/GSM | This objective is | | shall reduce the | terminals starting | evaluated towards | | userâ€‘plane latency | from 3GPP Rel-6:_ | different types of | | for delivery of PS | | GAN-terminals. | | services. | No enhancements. | | | | | The Enhanced Up A/Gn | | | _Bi-mode EGAN/GSM | reduces the | | | Biâ€‘mode terminals: | user-plane latency | | | Compliant_ | for delivery of PS | | | | services to all | | | _Tri-mode | types of | | | GAN/EGAN/GSM | GAN-terminals | | | terminals:_ | supporting Enhanced | | | | Up solution. | | | Compliant. | | | | | | | | _Tri-mode | | | | EGAN/GSM/UMTS | | | | terminals:_ | | | | | | | | Compliant. | | | | | | | | _Quadri-mode | | | | GAN/EGAN/GSM/UMTS | | | | terminals:_ | | | | | | | | Compliant. | | +----------------------+----------------------+----------------------+ | - E.g. by reducing | Compliant. | The Enhanced Up A/Gn | | > number of | | solution reduces the | | > functions / | | user-plane latency | | > protocol | | thanks to: | | > overhead. | | | | | | > 1) minimizing the | | | | > number of nodes | | | | > (GANC is directly | | | | > connected to | | | | > GGSN); | | | | > | | | | > 2) minimizing the | | | | > number of user | | | | > plane layers | | | | > (SN | | | | DCP+LLC+GA-PSR+GA-RC | | | | > are replaced by a | | | | > flow | | | | > identification | | | | > mechanism such as | | | | > IETF GRE). | +----------------------+----------------------+----------------------+ | 7. GAN Enhancements | Compliant | The Enhanced Up A/Gn | | shall be compatible | | solution is | | / shall align with | | compliant with all | | other 3GPP Core | | enhancements to the | | Network enhancements | | A-interface and to | | e.g. \"one tunnel | | the Gn-interface. | | approach\" for PS | | Enhanced Up A/Gn | | services. | | solution is built-in | | | | One-Tunnel solution | | | | as the user plane | | | | traverses only two | | | | nodes on the user | | | | plane: EGANC and | | | | GGSN. It interworks | | | | with One-Tunnel core | | | | networks. | +----------------------+----------------------+----------------------+ | 8. GAN Enhancements | Compliant | The functions/nodes | | shall overcome the | | GANC + SGSN and | | limitations imposed | | associated | | by using the Gb | | interfaces (Up, Gb) | | interface. | | are replaced by one | | | | single function/node | | | | EGANC and one single | | | | interface (enhanced | | | | Up). | +----------------------+----------------------+----------------------+ | 9. GAN Enhancements | Compliant | There already exists | | shall provide | | today Dual-Mode CN | | optimized support | | products that | | for operators using | | provide simultaneous | | GSM-only, UMTSâ€‘only, | | support for both 2G | | or combined GSM/UMTS | | and 3G accesses. So | | networks. | | a 2G MSC, 3G MSC or | | | | a combined 2G/3G MSC | | | | can be used to | | | | support the | | | | A-interface. | +----------------------+----------------------+----------------------+ | - E.g. no changes | Compliant | No changes to | | > to existing | | existing SGSNs and | | > core network | | GGSNs are needed. | | | | The EGANC is | | > nodes/interfaces. | | connected to the | | | | existing Core | | | | Network via A and Gn | | | | interfaces. | +----------------------+----------------------+----------------------+ | NOTE: The term GSM | Compliant | Noted. | | includes as well | | | | GPRS. | | | +----------------------+----------------------+----------------------+ | 10. GAN | Compliant | Enhanced Up A/Gn | | Enhancements shall | | alternative provides | | provide seamless | | CS handovers as CS | | mobility for CS and | | domain does not | | seamless mobility | | change compared to | | for PS including PS | | R6/R7. | | conversational | | | | services. | | Since the enhanced | | | | Up solution does not | | | | have any restriction | | | | on the radio side, | | | | i.e. the 3GPP and | | | | WLAN radios can be | | | | up simultaneously | | | | without restriction, | | | | make-before-break PS | | | | handovers can be | | | | achieved. They are | | | | based on the | | | | establishment of a | | | | second path in the | | | | target RAT while the | | | | first path in the | | | | source RAT is still | | | | active, the terminal | | | | listening to the two | | | | paths. | | | | | | | | Also, since the | | | | procedures get | | | | simplified | | | | (regarding the | | | | number of messages | | | | exchanges) and the | | | | number of protocol | | | | layers are removed, | | | | the path setup and | | | | handover can happen | | | | quickly, providing | | | | seamless and | | | | lossless mobility. | +----------------------+----------------------+----------------------+ | 11. GAN | Compliant | Enhanced Up A/Gn | | Enhancements shall | | alternative is | | minimize \"Enhanced | | acting independently | | GAN mode\" power | | of the 3GPP radio | | consumption on | | side when a user is | | handsets. | | in EGAN mode. There | | | | is no extra power | | | | consumption by | | | | introduction of | | | | EGAN. | | | | | | | | The actual impact on | | | | the power | | | | consumption needs | | | | ffs. | +----------------------+----------------------+----------------------+
## 6.2 Combined GANC/SGSN
Table 4
+----------------------+----------------------+----------------------+ | **Objectives (as |** Evaluation/**|** Comments, as | | agreed in the Ad Hoc | | needed**| | meeting in |** conformance**| | | GANE-07038)** | | | +----------------------+----------------------+----------------------+ | 1. GAN Enhancements | Noted | Combined GANC/SGSN | | shall be backwards | | is a solution of | | compatible with GAN | | type 1a). | | in 3GPP Rel-6 and | | | | Rel-7. | | | | | | | | Two levels of | | | | enhancements: | | | | | | | | > a) Forwards | | | | > compatible from | | | | > Rel-6: Rel-6 and | | | | > Rel-7 terminals | | | | > work with the | | | | > enhancements i.e. | | | | > network-only | | | | > enhancements. | | | | > | | | | > b) Not forwards | | | | > compatible from | | | | > Rel-6 | | | | > (respectively | | | | > Rel-7): Rel-6 | | | | > (respectively | | | | > Rel-7) terminals | | | | > do not work with | | | | > the enhancements. | | | +----------------------+----------------------+----------------------+ | - Support at | Compliant | The Combined | | > minimum the | | GANC/SGSN solution | | > same services | | supports exactly the | | > as GAN in 3GPP | | same services as GAN | | > Rel-6 and | | in 3GPP Rel-6 and | | > Rel-7; and | | Rel-7. | +----------------------+----------------------+----------------------+ | - Support existing | Compliant | The Combined | | > QoS management | | GANC/SGSN solution | | > as specified | | supports existing | | > in 3GPP; and | | QoS management as | | | | specified in 3GPP. | +----------------------+----------------------+----------------------+ | - Minimize the | Compliant | No changes to | | > impact on the | | existing CN nodes or | | > Core Network. | | interfaces are | | | | introduced. A new | | | | logical node type, | | | | Combined GANC/SGSN, | | | | is defined. | +----------------------+----------------------+----------------------+ | 2. GAN Enhancements | Compliant | The Combined | | shall abide as per | | GANC/SGSN solution | | the unchanged GAN | | abides the existing | | principle to keep | | GAN principles. | | the transparent | | | | support for any | | | | given service | | | | between UTRAN or | | | | GERAN, and GAN. | | | +----------------------+----------------------+----------------------+ | - E.g. preserve | Compliant | The existing APN | | > the existing | | mechanisms are | | > APN mechanism. | | preserved with the | | | | Combined GANC/SGSN | | | | solution. | +----------------------+----------------------+----------------------+ | 3. GAN Enhancements | Compliant | The Combined | | shall minimize the | | GANC/SGSN solution | | additional | | doesn\'t mean any | | complexity on | | impact on existing | | existing GANCs if | | GANCs. | | applicable. | | | +----------------------+----------------------+----------------------+ | 4. GAN Enhancements | Compliant | The Combined | | shall minimize the | | GANC/SGSN solution | | additional | | is case 1a) type of | | complexity on | | solution. It | | terminals (see case | | doesn\'t impact the | | 1b above). | | terminals in any way | | | | and as such doesn\'t | | | | mean any additional | | | | complexity on | | | | terminals. | +----------------------+----------------------+----------------------+ | 5. GAN Enhancements | Party compliant | The Combined | | shall reduce the | | GANC/SGSN solution | | complexity for | | as such doesn\'t | | delivery of CS and | | enhance the CS | | PS services. | | services at all. | | | | However, any | | | | enhancements to the | | | | A-interface are | | | | inherited | | | | automatically to | | | | this solution. | | | | | | | | The complexity for | | | | the delivery of PS | | | | services is reduced. | +----------------------+----------------------+----------------------+ | - E.g. by reducing | Compliant | Achieved for the PS | | > the number of | | domain. | | > functions | | | | > and/or | | | | > protocol | | | | > overhead. | | | +----------------------+----------------------+----------------------+ | 6. GAN Enhancements | _Dual-mode GAN/GSM | This objective is | | shall reduce the | terminals starting | evaluated towards | | user-plane latency | from 3GPP Rel-6:_ | different types of | | for delivery of PS | | GAN-terminals. | | services. | Compliant\ | | | | \ | The Combined | | | _Tri-mode | GANC/SGSN reduces | | | GAN/GSM/UMTS | the user-plane | | | terminals starting | latency for delivery | | | from 3GPP Rel-6:_ | of PS services to | | | | all types of | | | Compliant | GAN-terminals | | | | starting from 3GPP | | | | Rel-6. | +----------------------+----------------------+----------------------+ | - E.g. by reducing | Compliant | The Combined | | > number of | | GANC/SGSN solution | | > functions / | | removes the | | > protocol | | Gb-interface and the | | > overhead. | | 2Gâ€‘SGSN node. | +----------------------+----------------------+----------------------+ | 7. GAN Enhancements | Compliant | The Combined | | shall be compatible | | GANC/SGSN solution | | / shall align with | | is compliant with | | other 3GPP Core | | all enhancements to | | Network enhancements | | the A-interface and | | e.g. \"one tunnel | | to the Gn-interface. | | approach\" for PS | | | | services. | | | +----------------------+----------------------+----------------------+ | 8. GAN Enhancements | Compliant | The Combined | | shall overcome the | | GANC/SGSN solution | | limitations imposed | | removes the | | by using the Gb | | Gb-interface and the | | interface. | | 2Gâ€‘SGSN node. | +----------------------+----------------------+----------------------+ | 9. GAN Enhancements | Compliant | It is Ericsson\'s | | shall provide | | understanding that | | optimized support | | there exists already | | for operators using | | today Dual-Mode CN | | GSM-only, UMTS-only, | | products that | | or combined GSM/UMTS | | provide simultaneous | | networks. | | support for both 2G | | | | and 3G accesses. So | | | | a 2G MSC, 3G MSC or | | | | a combined 2G/3G MSC | | | | can be used to | | | | support the | | | | A-interface. | +----------------------+----------------------+----------------------+ | - E.g. no changes | Compliant | It can be argued if | | > to existing | | the SGSN is modified | | > core network | | here or not. Our | | | | interpretation is | | > nodes/interfaces. | | that none of the | | | | existing CN nodes | | | | are changed. Instead | | | | a new Combined | | | | GANC/SGSN node is | | | | introduced. | | | | | | | | Also, only standard | | | | 3GPP interfaces are | | | | used. | +----------------------+----------------------+----------------------+ | NOTE: The term GSM | Compliant | Noted. | | includes as well | | | | GPRS. | | | +----------------------+----------------------+----------------------+ | 10. GAN | Compliant | GAN PS HO in 3GPP | | Enhancements shall | | Rel-7 provides this | | provide seamless | | for all PS services. | | mobility for CS and | | GAN CS HO support | | seamless mobility | | already in 3GPP | | for PS including PS | | Rel-6. | | conversational | | | | services. | | | +----------------------+----------------------+----------------------+ | 11. GAN | Not compliant | Not compliant as the | | Enhancements shall | | GAN Rel-6 and Rel-7 | | minimize \"Enhanced | | terminals are not | | GAN mode\" power | | affected. | | consumption on | | | | handsets. | | | +----------------------+----------------------+----------------------+
## 6.3 GAN Iu Mode
Table 5
+-------------------------+---------------+-------------------------+ | Objectives (as agreed | Evaluation/\ | Comments, as needed | | in the Ad Hoc meeting | conformance | | | in GANE-07038) | | | +-------------------------+---------------+-------------------------+ | 1. GAN Enhancements | Compliant | GAN Iu-mode provides | | shall be backwards | | backwards | | compatible with GAN in | | compatibility. | | 3GPP Rel-6 and Rel-7. | | | | | | GAN Iu-mode is not | | Two levels of | | forward compatible. | | enhancements: | | | | | | | | > a) Forwards | | | | > compatible from | | | | > Rel-6: Relâ€‘6 and | | | | > Rel-7 terminals work | | | | > with the enhancements | | | | > i.e. network-only | | | | > enhancements. | | | | > | | | | > b) Not forwards | | | | > compatible from Rel-6 | | | | > (respectively Rel-7): | | | | > Rel-6 (respectively | | | | > Rel-7) terminals do | | | | > not work with the | | | | > enhancements. | | | +-------------------------+---------------+-------------------------+ | - Support at minimum | Compliant | GAN Iu-mode supports | | > the same services | | services and functions | | > as GAN in 3GPP | | hosted by 3G core | | > Rel-6 and Rel-7; | | networks in addition to | | > and | | 2G core networks. | | | | | | | | e.g. AMR-WB with TrFO | +-------------------------+---------------+-------------------------+ | - Support existing | Compliant | GAN Iu-mode supports | | > QoS management as | | QoS negotiation on Iu | | > specified in | | interface as specified | | > 3GPP; and | | in 3GPP. GANC supports | | | | QoS management as per | | | | 3GPP TS 44.318 [3] | | | | annex B (mapping to IP | | | | QoS - DSCP) It is not | | | | limited by QoS | | | | management performed by | | | | or implemented for | | | | 2G-SGSN or Gb interface | +-------------------------+---------------+-------------------------+ | - Minimize the impact | Compliant | No changes to existing | | > on the Core | | CN nodes or interfaces | | > Network. | | are introduced. No new | | | | logical or physical | | | | nodes. No duplication | | | | of CN node functions in | | | | GANC. | +-------------------------+---------------+-------------------------+ | 2. GAN Enhancements | Compliant | GAN Iu-mode abides to | | shall abide as per the | | the existing GAN | | unchanged GAN principle | | principles by | | to keep the transparent | | tunnelling NAS | | support for any given | | protocols and leaving | | service between UTRAN | | NAS logical operation | | or GERAN, and GAN. | | unchanged. | +-------------------------+---------------+-------------------------+ | - E.g. preserve the | Compliant | The existing APN | | > existing APN | | mechanism, | | > mechanism | | configuration of APNs, | | | | and DNS resolution of | | | | APNs are unchanged. | +-------------------------+---------------+-------------------------+ | 3. GAN Enhancements | Compliant | GAN Iu-mode GANCs | | shall minimize the | | remains the logical and | | additional complexity | | operational equivalent | | on existing GANCs if | | of BSC and RNC. GANC is | | applicable. | | not complicated by the | | | | introduction of SGSN | | | | equivalent CN functions | | | | (e.g. CAMEL support, | | | | billing interfaces, | | | | etc.) | +-------------------------+---------------+-------------------------+ | 4. GAN Enhancements | Compliant | Changes to terminal | | shall minimize the | | behaviour only when | | additional complexity | | network instructs | | on terminals (see case | | terminal to operate in | | 1b above). | | GAN Iu mode. Some | | | | extensions to Up | | | | required (i.e. not | | | | forward compatible). | | | | Extensions have been | | | | minimized. Logical | | | | operation of terminal | | | | when attached to GERAN | | | | and UTRAN are | | | | unaffected. | +-------------------------+---------------+-------------------------+ | 5. GAN Enhancements | Compliant | In CS domain, | | shall reduce the | | complexity is reduced | | complexity for delivery | | as follows: | | of CS and PS services. | | | | | | - audio transcoding | | - E.g. by reducing | | > centralized in | | > the number of | | > CN; | | > functions and/or | | | | > protocol overhead | | - supports TrFO for | | | | > simplified AMR-WB | | | | > support; | | | | | | | | - native support for | | | | > 3G MSC and MSC | | | | > Server concept | | | | > (according to | | | | > 3GPP Relâ€‘4); | | | | | | | | - supports evolution | | | | > to all-IP network | | | | > (Iu over IP). | | | | | | | | In PS domain, | | | | complexity is reduced | | | | as follows: | | | | | | | | - the 2G-SGSN is | | | | > removed from the | | | | > control and user | | | | > plane; | | | | | | | | - support for SGSN | | | | > direct tunnel | | | | > feature; | | | | | | | | - native support for | | | | > 3G-SGSN; | | | | | | | | - supports evolution | | | | > to all-IP network | | | | > (Iu over IP). | +-------------------------+---------------+-------------------------+ | 6. GAN Enhancements | Compliant | The 2G-SGSN is removed | | shall reduce the | | from the user plane. | | user-plane latency for | | | | delivery of PS | | 3G-SGSN may be removed | | services. | | from the user plane | | | | with SGSN direct tunnel | | - E.g. by reducing | | feature. | | > number of | | | | > functions / | | | | > protocol overhead | | | +-------------------------+---------------+-------------------------+ | 7. GAN Enhancements | Compliant | Compatible and aligned | | shall be compatible / | | with CN enhancements | | shall align with other | | for all BSS/RAN - CN | | 3GPP Core Network | | interfaces: A, Gb, Iu. | | enhancements e.g. \"one | | One example here is | | tunnel approach\" for | | 3GPP TS 23.236 [27] | | PS services. | | (Multipoint) support. | | | | | | | | Specifically, GAN Iu | | | | mode supports | | | | | | | | \"one tunnel approach\" | | | | aka Direct Tunnel that | | | | is not possible in | | | | A/Gb. | +-------------------------+---------------+-------------------------+ | 8. GAN Enhancements | Compliant | Eliminates Gb interface | | shall overcome the | | | | limitations imposed by | | - without redefining | | using the Gb interface. | | > roles of BSS/RAN | | | | > and CN elements; | | | | | | | | - without binding the | | | | > GANC and SGSN | | | | > product | | | | > implementation; | | | | | | | | - without introducing | | | | > a new | | | | | | | | > interface/protocol | | | | > to CN; | | | | | | | | - while maintaining | | | | > open interface | | | | > between GANC and | | | | > CN. | +-------------------------+---------------+-------------------------+ | 9. GAN Enhancements | Compliant | Supports A/Gb for | | shall provide optimized | | GSM-only networks. | | support for operators | | | | using GSM-only, | | Supports Iu for | | UMTS-only, or combined | | UMTS-only networks. | | GSM/UMTS networks. | | | | | | Supports A/Gb and Iu | | | | for combined GSM/UMTS | | | | networks. | +-------------------------+---------------+-------------------------+ | - E.g. no changes to | Compliant | Solution enables GANC | | > existing core | | to support existing | | > network | | core network nodes | | > nodes/interfaces. | | using existing standard | | | | interfaces. | | NOTE: The term GSM | | | | includes as well GPRS. | | | +-------------------------+---------------+-------------------------+ | 10. GAN Enhancements | Compliant | GAN seamless mobility | | shall provide seamless | | for CS and PS | | mobility for CS and | | supported. | | seamless mobility for | | | | PS including PS | | As an example | | conversational | | conversational services | | services. | | are supported by | | | | default in UMTS and no | | | | need to implement 3GPP | | | | TS 43.129 [28] (PSHO) | | | | to Gb. 3GPP TS 43.129 | | | | [28] requires support | | | | from MS, RAN and CN, so | | | | current entities do not | | | | support it. | | | | | | | | Implementation of | | | | mobility between GAN | | | | and UTRAN simplified by | | | | eliminating RNC feature | | | | for \"Support of | | | | Handover to GAN\" | | | | indication required to | | | | support UTRAN -> GAN | | | | hand-in. | | | | (3GPP TS 43.318 [2], | | | | subclause 8.14.1.2). | +-------------------------+---------------+-------------------------+ | 11. GAN Enhancements | Not compliant | Power consumption on | | shall minimize | | handsets not affected | | \"Enhanced GAN mode\" | | by GAN Iu-mode. | | power consumption on | | | | handsets. | | | +-------------------------+---------------+-------------------------+
## 6.4 Comparison of the Proposed Solutions
Table 6 provides a comparison between the proposed solutions and how these
solutions address the GAN Enhancement objectives.
Table 6
+------+------------------------------+------------------------------+ | | **GAN Enhancement Objectives |** Comparison of the Enhanced | | | from subclause 4.1**| Up, Combined GANC/SGSN, and | | | | GAN Iu-mode Proposals** | +------+------------------------------+------------------------------+ | 1. | GAN Enhancements shall be | All GAN Enhancement | | | backwards compatible with | proposals provide backwards | | | GAN in 3GPP Rel-6 and Rel-7. | compatibility. Only Combined | | | | GANC/SGSN proposal is | | | Two levels of enhancements: | forward compatible. | | | | | | | > a) Forwards compatible | All proposals support the | | | > from Rel-6: Rel-6 and | same services and features | | | > Rel-7 terminals work with | as GAN in 3GPP Rel-6 and | | | > the enhancements i.e. | Rel-7 including 3GPP QoS | | | > network-only enhancements. | management as a minimum. | | | > | | | | > b) Not forwards | Combined GANC/SGSN does not | | | > compatible from Rel-6 | change the existing CN nodes | | | > (respectively Rel-7): | or interfaces. It introduces | | | > Rel-6 (respectively Rel-7) | additional existing CN | | | > terminals do not work with | interfaces to the GANC such | | | > the enhancements. | as Gn and supports legacy | | | | Non-Access Stratum (NAS) and | | | 1. Support at minimum the | legacy Up-interface | | | same services as GAN in 3GPP | functions. The Combined | | | Rel-6 and Rel-7; and | GANC/SGSN proposal: | | | | | | | 2. Support existing QoS | - Requires no additional | | | management as specified in | > NAS functions (i.e. | | | 3GPP; and | > only legacy NAS | | | | > functions are | | | 3. Minimize the impact on | > required). | | | the Core Network. | | | | | Enhanced Up does not change | | | | the existing CN nodes or | | | | interfaces. It introduces | | | | additional existing CN | | | | interfaces to the GANC such | | | | as Gn and session management | | | | functions for mobile | | | | stations operating in eGAN | | | | mode. It also supports | | | | legacy Up-interface | | | | functions for mobile | | | | stations operating in legacy | | | | GAN mode. Enhanced Up does | | | | not use GPRS to deliver PS | | | | domain services; the | | | | Enhanced Up emulates GPRS | | | | bearers with the IP-CAN to | | | | provide IP data connectivity | | | | between MS and core network. | | | | For the Enhanced Up | | | | proposal: | | | | | | | | - New Enhanced Up SM | | | | > functions are required | | | | > in the GANC (e.g. the | | | | > reception of a Up | | | | > Create PDP Context | | | | > Request by an GANC | | | | > shall trigger the | | | | > creation of a MM | | | | > context/PDP Context as | | | | > per the reception of | | | | > an Activate PDP | | | | > Context Request by an | | | | > SGSN and shall result | | | | > in the GANC/proxy GGSN | | | | > function sending a | | | | > Create PDP Context | | | | > Request to the GGSN). | | | | > Enhanced Up solution | | | | > does not use session | | | | > management for GPRS | | | | > services and mobility | | | | > management for GPRS | | | | > services in eGAN mode. | | | | | | | | - MO SMS always uses CS | | | | > domain in eGAN mode. | | | | > No changes in GERAN, | | | | > UTRAN or GAN mode. | | | | | | | | - Enhanced Up solution | | | | > proposes to add | | | | > additional DNS servers | | | | > for network | | | | > redundancy. | | | | | | | | GAN Iu-mode does not change | | | | the existing CN interfaces | | | | and it does not add any core | | | | network functions to the | | | | GANC. It introduces | | | | additional existing | | | | interfaces to the GANC such | | | | as the Iu-cs, Iu-ps, Iu-bc, | | | | and Iu-pc. The GAN Iu-mode | | | | supports services and | | | | functions hosted by 3G core | | | | networks in addition to 2G | | | | core networks. e.g. AMR-WB | | | | with TrFO. | +------+------------------------------+------------------------------+ | 2. | GAN Enhancements shall abide | All solutions provide | | | as per the unchanged GAN | transparent support for any | | | principle to keep the | given service whether using | | | transparent support for any | UTRAN or GERAN, and GAN. | | | given service between UTRAN | | | | or GERAN, and GAN. | For CS services, all | | | | solutions tunnel NAS | | | - E.g. preserve the | protocols to provide | | | > existing APN | transparent access to CS | | | > mechanism. | services via the A or Iu-CS | | | | interface. GAN Iu-mode | | | | supports NAS tunnelling over | | | | the Iu-cs interface and | | | | Enhanced Up and Combined | | | | GANC/SGSN incorporate the | | | | concept of NAS tunnelling | | | | over the A interface. | | | | | | | | For PS services, GAN Iu-mode | | | | uses the NAS tunnelling | | | | technique over the Iu-ps | | | | interface to provide | | | | transparency to 2G and 3G | | | | GPRS services. Combined | | | | GANC/SGSN incorporates the | | | | concept of NAS tunnelling as | | | | an internal mechanism within | | | | the GANC/SGSN node. | | | | | | | | Enhanced Up uses its own | | | | session management protocol | | | | for PS service and mobility. | | | | It achieves transparency by | | | | using the enhanced GANC to | | | | emulate necessary SGSN | | | | services. Seamless | | | | continuity of GSM/UMTS | | | | services is also provided by | | | | a new session/mobility | | | | management mechanism using | | | | simultaneous radios in | | | | connected mode. The existing | | | | APN mechanisms in SGSN | | | | remain unchanged with the | | | | Enhanced Up solution but DNS | | | | re-configuration is | | | | required. | | | | | | | | The Combined GANC/SGSN and | | | | GAN Iu-mode proposals | | | | support the existing APN | | | | mechanism and does not | | | | require the re-configuration | | | | the DNS for APN resolution. | +------+------------------------------+------------------------------+ | 3. | GAN Enhancements shall | GANCs that support the | | | minimize the additional | proposed enhancements would | | | complexity on existing GANCs | be modified in all | | | if applicable. | proposals. But existing | | | | GANCs need not be affected | | | | by any proposed solution if | | | | the existing GANC is not | | | | expected to support the | | | | enhancement proposals. | | | | | | | | For Enhanced Up proposal, | | | | the GANC is enhanced to | | | | include overlaid GA-SM | | | | protocol (used only when the | | | | user is in eGAN mode), | | | | Session Management function | | | | and Proxy-Gn mobility | | | | function for PS domain. | | | | Standardized interfaces that | | | | need to be additionally | | | | supported at the GANC are: | | | | Gn, Ga (CGF) and Ge (Camel). | | | | GA-SM protocol is a new | | | | protocol replacing the two | | | | protocols GA-PSR and 3GPP TS | | | | 24.008 [4] SM for the PS | | | | domain control plane, and | | | | the user plane is carried | | | | transparently over IETF GRE. | | | | | | | | The Enhanced Up proposal: | | | | | | | | > 1) Does not change | | | | > anything in the CS domain | | | | > (Up GAâ€‘CSR interface as | | | | > well as A, Lb and Bc | | | | > interfaces). | | | | > | | | | > 2) Fully reuses all the | | | | > authentication/security | | | | > mechanisms and interfaces | | | | > (Up, Wm). | | | | > | | | | > 3) Fully reuses the | | | | > discovery/registration | | | | > mechanisms with only three | | | | > additional parameters (UE | | | | > capability, GANC | | | | > capability, GA-SM address) | | | | > in existing Up GA-RC | | | | > messages. | | | | | | | | For the Combined GANC/SGSN | | | | proposal, the GANC is | | | | enhanced to include all the | | | | functions defined for SGSNs. | | | | Standardized interfaces that | | | | need to be additionally | | | | supported at the GANC are: | | | | Gr, Gn, Ga, and Ge. No new | | | | protocol needs to be defined | | | | (i.e. the Up-interface part | | | | of the Combined GANC/SGSN is | | | | unchanged). The Combined | | | | GANC/SGSN solution fully | | | | re-uses all existing GAN | | | | procedures. | | | | | | | | > 1) The Combined GANC/SGSN | | | | > is not complicated by the | | | | > introduction of another | | | | > set of RAN-CN interfaces. | | | | | | | | For GAN Iu-mode proposal, | | | | the GANC is enhanced to | | | | provide the functions needed | | | | to support the RNC side of | | | | the Iu interface. | | | | Standardized UTRAN | | | | interfaces that need to be | | | | additionally supported at | | | | the GANC are: Iu-cs, Iu-ps, | | | | Iu-bc, and Iu-pc. A new | | | | GA-RRC protocol is defined | | | | for a common CS and PS | | | | control plane protocol, | | | | replacing GA-CSR and GAâ€‘PSR, | | | | when the UE is using GAN | | | | Iu-mode. | | | | | | | | For the GAN Iu-mode | | | | proposal: | | | | | | | | > 1) GAN Iu-mode GANCs | | | | > performs a subset of RNC | | | | > functions for Iu | | | | > interfaces, Iu-bc, and | | | | > Iu-pc. | | | | | | | | GANC is not complicated by | | | | the introduction of SGSN | | | | equivalent CN functions | | | | (e.g. CAMEL support, billing | | | | interfaces, etc.). | +------+------------------------------+------------------------------+ | 4. | GAN Enhancements shall | The Combined GANC/SGSN | | | minimize the additional | proposal doesn\'t impact the | | | complexity on terminals (see | terminal implementation in | | | case 1b above). | any way. All GAN capable | | | | terminals will gain from the | | | | optimization performed on | | | | the network side. | | | | | | | | The Enhanced Up proposal | | | | adds: | | | | | | | | > 1) a GA-SM signalling | | | | > protocol for EGAN mode | | | | > only, on top of existing | | | | > IPsec and UDP; | | | | > | | | | > 2) a Multi-Access Session | | | | > Manager and EGAN access | | | | > mode switch below | | | | > Application IP layer and | | | | > above NAS-layers, which | | | | > does not impact existing | | | | > SMREG-SAP interface. | | | | | | | | The MA-SM entity manages the | | | | SM and GA-SM sessions and | | | | makes the decisions to | | | | switch between these two | | | | sessions. The Enhanced Up | | | | proposal has no impact to | | | | legacy NAS in non-EGAN mode | | | | and to legacy Access | | | | Stratum. | | | | | | | | The GAN Iu-mode adds a new | | | | GA-RRC protocol which | | | | combines the functions of | | | | GA-CSR and GA-PSR protocols | | | | to follow the UTRAN RRC | | | | protocol model. The GAN | | | | Iu-mode proposal supports | | | | the existing NAS functions. | +------+------------------------------+------------------------------+ | 5. | GAN Enhancements shall | Both the Enhanced Up and the | | | reduce the complexity for | Combined GANC/SGSN proposals | | | delivery of CS and PS | do not affect the CS | | | services. | services at all but do | | | | inherit any enhancements | | | - E.g. by reducing the | available on the | | | > number of functions | A-interface. | | | > and/or protocol | | | | > overhead. | The GAN Iu-mode supports the | | | | Iu-cs interface of the CN - | | | | UTRAN CS domain architecture | | | | which centralizes audio | | | | transcoding, supports TrFO | | | | for all codecs including | | | | AMR-WB, and supports the | | | | all-IP architecture with Iu | | | | over IP. | | | | | | | | PS complexity is reduced in | | | | all proposals in different | | | | ways: | | | | | | | | - For Enhanced Up, the | | | | > number of nodes is | | | | > reduced (hence | | | | > eliminating Gb) and | | | | > the control plane | | | | > overhead is eliminated | | | | > by reducing the number | | | | > of signalling layers | | | | > (NAS+LLC+GA-PSR+GA-RC | | | | > are replaced by | | | | > GA-SM). The user plane | | | | > overhead is also | | | | > eliminated by reducing | | | | > the number of user | | | | > plane layers | | | | > (SNDCP+LLC+GAâ€‘PSR are | | | | > replaced by a | | | | > tunnelling protocol | | | | > e.g. IETF GRE). Any | | | | > redundant/unnecessary | | | | > functions (e.g. | | | | > authentication, | | | | > ciphering, flow | | | | > control, transport | | | | > channel establishment, | | | | > RAB assignment, etc.) | | | | > are eliminated. It | | | | > eliminates the use of | | | | > ATM by combining RAN | | | | > and CN functions. | | | | | | | | - For Combined GANC/SGSN, | | | | > the number of nodes is | | | | > reduced and the | | | | > complexity is reduced | | | | > by eliminating the Gb | | | | > interface. | | | | | | | | - For GAN Iu-mode, | | | | > redundant/unnecessary | | | | > functions in 2G-SGSN | | | | > are eliminated (e.g. | | | | > ciphering, flow | | | | > control, etc.). The | | | | > user plane overhead is | | | | > reduced by removing | | | | > SNDCP/LLC layers. GAN | | | | > Iu-mode enables the | | | | > use of 3G-SGSNs, the | | | | > Rel. 7 3G-SGSN direct | | | | > tunnel feature for the | | | | > user plane when | | | | > possible (main | | | | > restrictions are | | | | > Lawful Interception, | | | | > SGSN volume charging | | | | > and roaming in VPLMN | | | | > per 3GPP TS 23.060 | | | | > [6]), and evolution | | | | > to all-IP network (Iu | | | | > over IP). | | | | | | | | PDP context activation in | | | | GAN/EGAN mode requires | | | | different number of message | | | | exchanges for the different | | | | proposals: | | | | | | | | - For Enhanced Up, the | | | | > number of message | | | | > exchanges for PDP | | | | > activation is 4 after | | | | > IPsec | | | | > establishment/GAN | | | | > registration. GSM/UMTS | | | | > security functions | | | | > (authentication and | | | | > security mode control) | | | | > do not happen since it | | | | > is already covered in | | | | > by the IPsec tunnel | | | | > and EAP-SIM | | | | > authentication. Note | | | | > if there is a need to | | | | > hand-out to | | | | > GERAN/UTRAN, refer to | | | | > discussion of Enhanced | | | | > Up handover signalling | | | | > in objective #10. | | | | | | | | - For combined GANC/SGSN, | | | | > the number of message | | | | > exchanges for PDP | | | | > activation is a | | | | > maximum of 11 after | | | | > IPsec | | | | > establishment/GAN | | | | > registration - the | | | | > same number as GERAN | | | | > PDP activation on | | | | > GERAN to comply with | | | | > TS 24.008 layer 3 core | | | | > network protocol | | | | > operations. This | | | | > includes the GSM/GPRS | | | | > security functions. | | | | | | | | - For GAN Iu-mode, the | | | | > number of message | | | | > exchanges for PDP | | | | > activation is a | | | | > maximum of 18 after | | | | > IPsec | | | | > establishment/GAN | | | | > registration - the | | | | > same number as PDP | | | | > activation on UTRAN to | | | | > comply with | | | | > 3GPP TS 24.008 [4] | | | | > layer 3 core network | | | | > protocol operations. | | | | > This includes the | | | | > GSM/UMTS security | | | | > functions. | | | | | | | | NOTE: When a PDP Context is | | | | activated in GAN/EGAN mode | | | | the corresponding PDP | | | | activation required for | | | | GERAN/UTRAN mode frequently | | | | occurs in the background | | | | (i.e. not in the real time | | | | path) for most use cases | | | | (e.g. for data session | | | | handover between GERAN/UTRAN | | | | and Wi-Fi) and so the number | | | | of messages exchanged does | | | | not necessarily affect the | | | | user experience. | +------+------------------------------+------------------------------+ | 6. | GAN Enhancements shall | User-plane latency for | | | reduce the user-plane | delivery of PS services is | | | latency for delivery of PS | reduced in all proposals in | | | services. | different ways. | | | | | | | - E.g. by reducing number | The Enhanced Up proposal | | | > of functions / | reduces the user-plane | | | > protocol overhead. | latency by: | | | | | | | | > 1) Minimizing the number | | | | > of nodes (GANC is directly | | | | > connected to GGSN). | | | | > | | | | > 2) Minimizing the number | | | | > of user plane layers | | | | > (SNDCP+LLC+GA-PSR are | | | | > replaced by a tunnelling | | | | > protocol such as IETF | | | | > GRE), hence reducing the | | | | > total number of overhead | | | | > octets in the user plane | | | | > data packets. | | | | > | | | | > 3) It also eliminates the | | | | > queues for flow control, | | | | > SNDCP/LLC, XID | | | | > negotiations and LLC | | | | > en/decapsulation as well | | | | > as processing delay for | | | | > ciphering as GAN Iu-mode. | | | | | | | | The Combined GANC/SGSN | | | | proposal reduces the | | | | user-plane latency by: | | | | | | | | - Minimizing the number of | | | | > nodes (GANC is | | | | > combined with 2G/3G | | | | > SGSN and is directly | | | | > connected to GGSN); | | | | > and | | | | | | | | - Removing the | | | | > Gb-interface and all | | | | > the related protocol | | | | > layers (network | | | | > services, BSSGP, and | | | | > physical layer) and | | | | > therefore the | | | | > corresponding queues; | | | | | | | | - Configuring the LLC | | | | > layer to disable | | | | > ciphering and the | | | | > SNDCP layer to disable | | | | > compression while the | | | | > MS is in GAN mode. | | | | | | | | The GAN Iu-mode proposal | | | | reduces user-plane latency | | | | by eliminating 2G-SGSN | | | | functions: | | | | | | | | > 1) Queues for SNDCP/LLC | | | | > processing, XID | | | | > negotiations and LLC | | | | > enc | | | | apsulation/de-encapsulation. | | | | > | | | | > 2) Queues for flow | | | | > control, flow control | | | | > architecture (BVC/PFC/CIR | | | | > control), queues for | | | | > supporting QoSâ€‘enabled | | | | > packet forwarding. | | | | > | | | | > 3) Processing delay for | | | | > ciphering. | +------+------------------------------+------------------------------+ | 7. | GAN Enhancements shall be | All solutions are compatible | | | compatible / shall align | with the 3GPP Core Network | | | with other 3GPP Core Network | although using different | | | enhancements e.g. \"one | interfaces to achieve this. | | | tunnel approach\" for PS | | | | services. | The Enhanced Up and the | | | | Combined GANC/SGSN proposals | | | | support A and Gn interface | | | | to the Core Network. This | | | | provides the equivalent of | | | | the \"one tunnel approach\" | | | | between the GANC node and | | | | the GGSN. | | | | | | | | The GAN Iu-mode proposal | | | | supports the Iu-CS and Iu-PS | | | | interface to the Core | | | | Network and as such supports | | | | the Rel. 7 \"one tunnel | | | | approach\". | | | | | | | | All solutions will be able | | | | to align with 3GPP Core | | | | Network enhancements related | | | | to each solution\'s chosen | | | | interface to the Core | | | | Network. | +------+------------------------------+------------------------------+ | 8. | GAN Enhancements shall | All of the GAN Enhancement | | | overcome the limitations | proposals remove the Gb | | | imposed by using the Gb | interface to overcome the | | | interface. | limitations imposed by that | | | | interface when using the GAN | | | | Enhancements. | +------+------------------------------+------------------------------+ | 9. | GAN Enhancements shall | The GAN Enhancement | | | provide optimized support | proposals support the | | | for operators using | GSM-only, UMTS-only, and | | | GSM-only, UMTS-only, or | combined GSM/UMTS network | | | combined GSM/UMTS networks. | types as follows: | | | | | | | - E.g. no changes to | Enhanced Up: Use Dual-Mode | | | > existing core network | CN products (i.e. 2G/3G MSC) | | | > nodes/interfaces. | to support all three network | | | | types. | | | NOTE: The term GSM includes | | | | as well GPRS. | Combined GANC/SGSN: Use | | | | Dual-Mode CN products (i.e. | | | | 2G/3G MSC, 2G/3G GGSN) to | | | | support all three network | | | | types | | | | | | | | GAN Iu-mode: Add support for | | | | UMTS-only network type to | | | | GAN via the Iu interface on | | | | UMTS Core Networks. | | | | (GSM-only and combined | | | | GSM/UMTS networks are | | | | already supported by legacy | | | | GAN). | +------+------------------------------+------------------------------+ | 10. | GAN Enhancements shall | Seamless mobility for CS and | | | provide seamless mobility | PS are supported by all | | | for CS and seamless mobility | proposals. | | | for PS including PS | | | | conversational services. | Seamless PS mobility is | | | | supported in different ways | | | | for the solutions: | | | | | | | | Enhanced Up supports a | | | | mobility mechanism using | | | | simultaneous radios for | | | | mobility in connected mode | | | | and IPsec tunnelling for | | | | mobility in idle mode (no | | | | need for paging areas LA/RA | | | | concept). It also supports | | | | two parallel data flows over | | | | the GERAN/UTRAN and eGAN | | | | radio interfaces. The switch | | | | between the flows is managed | | | | by the MS and the GANC. | | | | Maximum number of messages | | | | needed for GERAN/UTRAN to | | | | GAN or GAN to GERAN/UTRAN | | | | handover is 6. GSM/UMTS | | | | security functions | | | | (authentication and security | | | | mode control) do not happen | | | | in eGAN mode since they are | | | | already covered by the IPsec | | | | tunnel and EAP-SIM | | | | authentication. | | | | | | | | In case the mobile is | | | | detached from GERAN/UTRAN | | | | (e.g. due to MS hibernation | | | | (see Note below) or loss of | | | | GERAN/UTRAN coverage while | | | | in EGAN), the maximum number | | | | of messages needed for | | | | hand-out to GERAN/UTRAN is | | | | 14, including GPRS attach | | | | procedure, security | | | | functions, and PDP context | | | | activation/modification | | | | procedures for the first PDP | | | | context and 2 additional | | | | messages for each additional | | | | PDP context. | | | | | | | | NOTE 1: Hibernation mode is | | | | not currently defined for | | | | GAN terminal operation and | | | | so the reference to this | | | | mode here is merely intended | | | | to indicate than an MS | | | | operating in GAN mode is | | | | able to completely shut down | | | | its GERAN/UTRAN radio | | | | interface for an | | | | implementation specific | | | | period of time. | | | | | | | | Combined GANC/SGSN supports | | | | GAN PS Handover based on GAN | | | | PS HO defined in Rel-7 (i.e. | | | | legacy approach of MM/PDP | | | | Context transfers is | | | | maintained to allow for | | | | knowledge of PDP Context | | | | activation in GAN mode to be | | | | kept in the serving network | | | | node regardless of MS | | | | mobility pattern). For UTRAN | | | | to GAN handover and GAN to | | | | UTRAN handover, it performs | | | | the inter-system, | | | | inter-SGSN/intra-SGSN HO. | | | | The maximum number of | | | | messages needed for the | | | | handover is 23 - the same | | | | number as UTRAN-GERAN (or | | | | GERAN-UTRAN) handover to | | | | comply with 3GPP TS 24.008 | | | | [4] layer 3 core network | | | | protocol operation This | | | | includes the GSM/GPRS | | | | security functions. | | | | | | | | GAN Iu-mode supports PS | | | | handover for UTRAN and | | | | treats GAN as a 3G RAN. This | | | | means the \"Support of | | | | Handover to GAN\" feature in | | | | RNCs will not be required. | | | | (work is in progress to | | | | attempt to remove the | | | | requirement for this feature | | | | for the legacy GAN solution | | | | as well but this is FFS). | | | | For UTRAN to GAN handover | | | | and GAN to UTRAN handover, | | | | it performs the | | | | inter-system, | | | | inter-SGSN/intra-SGSN HO | | | | procedure. The maximum | | | | number of messages needed | | | | for handover is 20 - the | | | | same number as UTRAN-UTRAN | | | | handover to comply with 3GPP | | | | TS 24.008 [4] layer 3 core | | | | network protocol operation. | | | | This includes the GSM/UMTS | | | | security functions. | | | | | | | | NOTE 2: The number of | | | | control plane messages | | | | required to perform the | | | | GERAN/UTRAN - GAN handover | | | | or GAN to GERAN/UTRAN | | | | handover procedures is not | | | | necessarily indicative of | | | | the user experience as | | | | measured by the duration of | | | | packet flow interruption. | +------+------------------------------+------------------------------+ | 11. | GAN Enhancements shall | All of the GAN Enhancement | | | minimize \"Enhanced GAN | proposals permit the support | | | mode\" power consumption on | of hibernation mode (see | | | handsets. | Note in objective #10). | | | | | | | | Combined GANC/SGSN and GAN | | | | Iu-mode maintains active PDP | | | | contexts through GAN | | | | regardless of whether or not | | | | hibernation mode is used. | | | | | | | | When hibernation is used | | | | with Enhanced Up, PDP | | | | context activation via | | | | GERAN/UTRAN may be lost. In | | | | such case, Enhanced Up mode | | | | will perform PDP activation | | | | on GERAN/UTRAN for all | | | | active PDP contexts in eGAN | | | | to hand-out to GERAN/UTRAN | | | | mode. See objective #10 for | | | | more details. | +------+------------------------------+------------------------------+
# 7 Conclusion
This feasibility study concludes that all three proposals are feasible. The
three proposals address the GAN Enhancement objectives in subclause 4.1 in
different ways.
**Enhanced Up Proposal**
This proposal is considered feasible and provides the benefits of PS domain
overhead reduction in terms of protocol and procedures. However it changes the
location of the intelligence for handover decision from below NAS for GAN to
above SM/MM for Enhanced Up. As the Enhanced Up proposal puts the intelligence
and the switch between eGAN mode and 3GPP mode on top of the SM/MM layer, it
is considered outside the scope of GAN, where the switch between GAN mode and
GERAN/UTRAN lies in the Access Stratum layer, for the purpose of the present
document.
**Combined GANC/SGSN Proposal**
This proposal is considered feasible; however, it is believed that it can
already be delivered as a product implementation option based on the existing
GAN specification.
**GAN Iu-mode Proposal**
This proposal is considered feasible and suggests a new mode of GAN based on
the Iu-interface. This is equivalent to the original GAN but where the
original GAN is based on A/Gb as the interface between the GAN and the Core
network so the GANC appears to the rest of the network as if it was a BSC, the
Iu mode is based the Iu interface as the interface between the GAN and the
core network so the GANC appears to the rest of the network as if it was an
RNC. The GAN Iu-mode proposal satisfies the objectives in subclause 4.1
including the support of UMTS-only networks (without the need for 2G core
network functionality) and UMTS architectural advantages such as transcoding
controlled by the core network (i.e. AMR-WB with TrFO) and all-IP interfaces
to the core network. Further, as noted, the Combined GANC/SGSN solution can be
realized through product implementations, thus, it complements the GAN Iu-mode
solution. An operator may deploy GAN Iu-mode GANCs; and deploy Combined
GANC/SGSNs for serving the A/Gb-mode-only terminals. In this sense, the GAN
Iu-mode proposal allows the flexibility of both enhancement techniques for GAN
operators.
It is recommended that GERAN proceeds with the GAN Iu-mode proposal as the GAN
Enhancement solution out of three feasible candidates studied in the present
document.
#