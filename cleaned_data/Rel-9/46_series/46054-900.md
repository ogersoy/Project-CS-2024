# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
Test sequences for a bit exact implementation of the Enhanced Full Rate (EFR)
speech transcoder are contained in the archive files which accompany the
present document.
The archive contains ZIP compressed files, as follows:
Disk1_8 Clause 10: Test sequences for the GSM Enhanced Full Rate (EFR) speech
codec; Speech test sequences TEST0.xxx to TEST8.xxx.
Disk2_8 Clause 10: Test sequences for the GSM Enhanced Full Rate (EFR) speech
codec; Speech test sequences TEST09.xxx to TEST16.xxx.
Disk3_8 Clause 10: Test sequences for the GSM Enhanced Full Rate (EFR) speech
codec; Speech test sequences TEST17.xxx to TEST20.xxx, Codec homing and
synchronisation sequences.
Disk4_8 Clause 10: Test sequences for the GSM Enhanced Full Rate (EFR) speech
codec; DTX test sequences.
Disk5_8 to Clause 10: Test sequences for the GSM Enhance Full Rate (EFR)
speech codec; 8 bit
Disk8_8 A- and µ-law compressed test sequences for alternative TRAU testing.
amr122_efr Test sequences for the GSM-EFR speech codec using the Adaptive
Multi-Rate (AMR) speech codec mode MR122 (GSM 06.74)
The present document specifies the digital test sequences for the GSM enhanced
full rate speech codect for the digital cellular telecommunications system.
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document specifies the digital test sequences for the GSM enhanced
full rate speech codec. These sequences test for a bit exact implementation of
the enhanced full rate speech transcoder (GSM 06.60 [2]), Voice Activity
Detection (GSM 06.82 [6]), comfort noise (GSM 06.62 [4]) and the discontinuous
transmission (GSM 06.81 [5]).
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or non‑specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document _in the same Release as the present document_.
[1] GSM 01.04: \"Digital cellular telecommunication system (Phase 2+);
Abbreviations and acronyms\".
[2] GSM 06.60: \"Digital cellular telecommunications system (Phase 2+);
Enhanced Full Rate (EFR) speech transcoding\".
[3] GSM 06.61: \"Digital cellular telecommunications system (Phase 2+);
Substitution and muting of lost frames for Enhanced Full Rate (EFR) speech
traffic channels\".
[4] GSM 06.62: \"Digital cellular telecommunications system (Phase 2+);
Comfort noise aspects for Enhanced Full Rate (EFR) speech traffic channels\".
[5] GSM 06.81: \"Digital cellular telecommunications system (Phase 2+);
Discontinuous Transmission (DTX) for Enhanced Full Rate (EFR) speech traffic
channels\".
[6] GSM 06.82: \"Digital cellular telecommunications system (Phase 2+); Voice
Activity Detection (VAD) for Enhanced Full Rate (EFR) speech traffic
channels\".
[7] GSM 06.53: \"Digital cellular telecommunications system (Phase 2+); ANSI-C
code for the GSM Enhanced Full Rate (EFR) speech codec\".
[8] GSM 06.51: \"Digital cellular telecommunications system (Phase 2+);
Enhanced Full Rate (EFR) speech coding functions; General description\".
# 3 Definitions and abbreviations
## 3.1 Definitions
Definition of terms used in the present document can be found in GSM 06.60
[2], GSM 06.61 [3], GSM 06.62 [4], GSM 06.81 [5] and GSM 06.82 [6].
## 3.2 Abbreviations
For the purposes of the present document, the following abbreviations apply:
ETS European Telecommunication Standard
GSM Global System for Mobile communications
For abbreviations not given in this subclause see GSM 01.04 [1].
# 4 General
Digital test sequences are necessary to test for a bit exact implementation of
the enhanced full rate speech transcoder (GSM 06.60 [2]), Digital test Voice
Activity Detection (GSM 06.82 [6]), comfort noise (GSM 06.62 [4]) and the
discontinuous transmission (GSM 06.81 [5]).
The test sequences may also be used to verify installations of the ANSI C code
in GSM 06.53 [7].
Clause 5 describes the format of the files which contain the digital test
sequences. Clause 6 describes the test sequences for the speech transcoder.
Clause 7 describes the test sequences for the VAD, comfort noise and
discontinuous transmission.
Clause 8 describes the method by which synchronisation is obtained between the
test sequences and the speech codec under test.
Clause 9 describes the alternative acceptance testing of the speech encoder
and decoder in the TRAU by means of 8 bit A- or μ-law compressed test
sequences on the A-Interface.
Test sequences for an alternative and fully interoperable implementation using
as a basis the 12.2 kbit/s mode of the Adaptive Multi Rate speech coder are
described in section 10.
Electronic copies of the digital test sequences are provided as clause 10,
these digital test sequences are contained in the archive
ts_100725v080100p0.zip which accompanies the present document.
# 5 Test sequence format
This clause provides information on the format of the digital test sequences
for the GSM enhanced full rate speech transcoder (GSM 06.60 [2]), Voice
Activity Detection (GSM 06.82 [6]), comfort noise (GSM 06.62 [4]) and the
discontinuous transmission (GSM 06.81 [5]).
## 5.1 File format
The test sequence files are provided in archive ts_100725v080100p0.zip which
accompanies the present document.
Following decompression, four types of file are provided:
\- Files for input to the GSM enhanced full rate speech encoder: *.INP
\- Files for comparison with the encoder output: *.COD
\- Files for input to the GSM enhanced full rate speech decoder: *.DEC
\- Files for comparison with the decoder output: *.OUT
The *.DEC files are generated from the corresponding *.COD files.
Tables 1, 2, 3 and 4 define the formats of the four types of file.
Each speech parameter within the speech frame of 244 bits/20 ms is contained
in a serial string of 16 bit words, where each word contains the value of one
bit of the parameter. In each string of _n_ 16 bit words containing the _n_
bits of a parameter, the most significant bit of the parameter is written
first, and the least significant bit is written last. The bit value contained
in a single 16 bit word is either 0x0000 or 0x0001 (right justified) for the
binary values of "0" and "1", respectively. See table 6 of GSM 06.60 [2] for
the order of occurrence and bit allocation of speech parameters within the
speech frame of 244 bits/20 ms.
The samples in the encoder input signal and in the decoder output signal are
left justified.
## 5.2 Codec homing
Each *.INP file includes two homing frames at the start of the test sequence.
The function of these frames is to reset the speech encoder state variables to
their initial value. In the case of a correct installation of the ANSI-C
simulation (GSM 06.53 [7]), all speech encoder output frames shall be
identical to the corresponding frame in the *.COD file. In the case of a
correct hardware implementation undergoing testing, the first speech encoder
output frame is undefined and need not be identical to the first frame in the
*.COD file, but all remaining speech encoder output frames shall be identical
to the corresponding frames in the *.COD file.
Each *.DEC file includes two homing frames at the start of the test sequence.
The function of these frames is to reset the speech decoder state variables to
their initial value. In the case of a correct installation of the ANSI-C
simulation (GSM 06.53 [7]), all speech decoder output frames shall be
identical to the corresponding frame in the *.OUT file. In the case of a
correct hardware implementation undergoing testing, the first speech decoder
output frame is undefined and need not be identical to first frame in the
*.OUT file, but all remaining speech decoder output frames shall be identical
to the corresponding frames in the *.OUT file.
Table 1: Encoder input sequence (*.INP) format
* * *
Name Description No. of bits Justification s(n) Encoder input signal 13 Left
* * *
Table 2: Encoder output sequence (*.COD) format
+------------------+------------------+-------------+---------------+ | Name | Description | No. of bits | Justification | +------------------+------------------+-------------+---------------+ | Speech | | | | | parameters | | | | +------------------+------------------+-------------+---------------+ | SPEECH | Serial stream of | 244 | Right | | | speech parameter | | | | | bits to the | | | | | channel encoder | | | +------------------+------------------+-------------+---------------+ | Additional | | | | | information | | | | +------------------+------------------+-------------+---------------+ | VAD | Voice activity | 1 | Right | | | detection flag | | | | SP | | 1 | Right | | | SP flag | | | +------------------+------------------+-------------+---------------+
Table 3: Decoder input sequence (*.DEC) format
+------------------+------------------+-------------+---------------+ | Name | Description | No. of bits | Justification | +------------------+------------------+-------------+---------------+ | Additional | | | | | information | | | | +------------------+------------------+-------------+---------------+ | BFI | Bad Frame | 1 | Right | | | Indicator flag | | | +------------------+------------------+-------------+---------------+ | Speech | | | | | parameters | | | | +------------------+------------------+-------------+---------------+ | SPEECH | Serial stream of | 244 | Right | | | speech parameter | | | | | bits to the | | | | | channel encoder | | | +------------------+------------------+-------------+---------------+ | Additional | | | | | information | | | | +------------------+------------------+-------------+---------------+ | SID | Silence | 1 | Right | | | Descriptor flag | | | | TAF | | 1 | Right | | | Time Alignment | | | | | Flag | | | +------------------+------------------+-------------+---------------+
Table 4: Decoder output sequence (*.OUT) format
* * *
Name Description No. of bits Justification s\'(n) Decoder output signal 13
Left
* * *
# 6 Speech codec test sequences
This clause describes the test sequences designed to exercise the GSM enhanced
full rate speech transcoder (GSM 06.60 [2]).
## 6.1 Codec configuration
The speech encoder shall be configured to operate in the non-DTX mode. The VAD
and SP flags shall be set to 1 at the speech encoder output.
## 6.2 Speech codec test sequences
Table 5 lists the location and size of the speech codec test sequences.
### 6.2.1 Speech encoder test sequences
Twenty-one encoder input sequences are provided. Note that for the input
sequences TEST0.INP to TEST3.INP, the amplitude figures are given in 13-bit
precision. The active speech levels are given in dBov.
\- TEST0.INP - Synthetic harmonic signal. The pitch delay varies slowly from
18 to 143.5 samples. The minimum and maximum amplitudes are -997 and +971.
\- TEST1.INP - Synthetic harmonic signal. The pitch delay varies slowly from
144 down to 18.5 samples. Amplitudes at saturation point -4096 and +4095.
\- TEST2.INP - Sinusoidal sweep varying from 150 Hz to 3400 Hz. Amplitudes ±
1250.
\- TEST3.INP - Sinusoidal sweep varying from 150 Hz to 3400 Hz. Amplitudes ±
4000.
\- TEST4.INP - Female speech, active speech level: -19.4 dBov, flat frequency
response.
\- TEST5.INP - Male speech, active speech level: -18.7 dBov, flat frequency
response.
\- TEST6.INP - Female speech, ambient noise, active speech level: -35.0 dBov,
flat frequency response.
\- TEST7.INP - Female speech, ambient noise, active speech level: -25.0 dBov,
flat frequency response.
\- TEST8.INP - Female speech, ambient noise, active speech level: -15.6 dBov,
flat frequency response.
\- TEST9.INP - Female speech, car noise, active speech level: -35.5 dBov, flat
frequency response.
\- TEST10.INP - Female speech, car noise, active speech level: -26.1 dBov,
flat frequency response.
\- TEST11.INP - Female speech, car noise, active speech level: -15.8 dBov,
flat frequency response.
\- TEST12.INP - Male speech, ambient noise, active speech level: -34.9 dBov,
flat frequency response.
\- TEST13.INP - Male speech, ambient noise, active speech level: -24.8 dBov,
flat frequency response.
\- TEST14.INP - Male speech, ambient noise, active speech level: -15.0 dBov,
flat frequency response.
\- TEST15.INP - Male speech, babble noise, active speech level: -34.1 dBov,
flat frequency response.
\- TEST16.INP - Male speech, babble noise, active speech level: -24.3 dBov,
flat frequency response.
\- TEST17.INP - Male speech, babble noise, active speech level: -14.4 dBov,
flat frequency response.
\- TEST18.INP - Female speech, ambient noise, active speech level: -26.0 dBov,
modified IRS frequency response, with many zero frames.
\- TEST19.INP - Male speech, ambient noise, active speech level: -36.0 dBov,
modified IRS frequency response, with many zero frames.
\- TEST20.INP - Sequence for exercising the LPC vector quantisation codebooks
and ROM tables of the codec.
The TEST0.INP and TEST1.INP sequences were designed to test the pitch lag of
the GSM enhanced full rate speech encoder. In a correct implementation, the
resulting speech encoder output parameters shall be identical to those
specified in the TEST0.COD and TEST1.COD sequences, respectively.
The TEST2.INP and TEST3.INP sequences are particularly suited for testing the
LPC analysis, as well as for finding saturation problems. In a correct
implementation, the resulting speech encoder output parameters shall be
identical to those specified in the TEST2.COD and TEST3.COD sequences,
respectively.
The TEST4.INP and TEST5.INP sequences contain a lot of low-frequency
components. In a correct implementation, the resulting speech encoder output
parameters shall be identical to those specified in the TEST4.COD and
TEST5.COD sequences, respectively.
The TEST18.INP and TEST19.INP sequences contain some "all zeros" frames
(silence) in between segments of speech. In a correct implementation, the
resulting speech encoder output parameters shall be identical to those
specified in the TEST18.COD and TEST19.COD sequences, respectively.
The TEST20.INP sequence was designed to force the encoder to select each of
the LPC code indices and each but one of the the ROM table indices of the
codec.
The remaining sequences (TEST6.INP to TEST17.INP) were selected on the basis
of bringing various input characteristics (background noise) and levels to the
test sequence set. In a correct implementation, the resulting speech encoder
output parameters shall be identical to those specified in the TEST6.COD to
TEST17.COD sequences, respectively.
### 6.2.2 Speech decoder test sequences
Twenty-one speech decoder input sequences TESTXX.DEC (XX = 0..20) are
provided. These are derived from the corresponding TESTXX.INP sequences. In a
correct implementation, the resulting speech decoder output shall be identical
to the corresponding TESTXX.OUT sequences.
### 6.2.3 Codec homing sequence
In addition to the test sequences described above, two homing sequences are
provided to assist in codec testing. TEST21.INP contains one encoder-homing-
frame. TEST21.DEC contains one decoder-homing-frame. The use of these
sequences is described in GSM 06.51 [8].
Table 5: Location and size of speech codec test sequences
+-------------+------------+---------------+--------------+ | Disk No. | File Name | No. of frames | Size (bytes) | +-------------+------------+---------------+--------------+ | 1/8 | TEST0.INP | 285 | 91 200 | | | | | | | 1/8 | TEST0.COD | | 140 220 | | | | | | | 1/8 | TEST0.DEC | | 140 790 | | | | | | | 1/8 | TEST0.OUT | | 91 200 | +-------------+------------+---------------+--------------+ | 1/8 | TEST1.INP | 285 | 91 200 | | | | | | | 1/8 | TEST1.COD | | 140 220 | | | | | | | 1/8 | TEST1.DEC | | 140 790 | | | | | | | 1/8 | TEST1.OUT | | 91 200 | +-------------+------------+---------------+--------------+ | 1/8 | TEST2.INP | 402 | 128 640 | | | | | | | 1/8 | TEST2.COD | | 197 784 | | | | | | | 1/8 | TEST2.DEC | | 198 588 | | | | | | | 1/8 | TEST2.OUT | | 128 640 | +-------------+------------+---------------+--------------+ | 1/8 | TEST3.INP | 402 | 128 640 | | | | | | | 1/8 | TEST3.COD | | 197 784 | | | | | | | 1/8 | TEST3.DEC | | 198 588 | | | | | | | 1/8 | TEST3.OUT | | 128 640 | +-------------+------------+---------------+--------------+ | 1/8 | TEST4.INP | 301 | 96 320 | | | | | | | 1/8 | TEST4.COD | | 148 092 | | | | | | | 1/8 | TEST4.DEC | | 148 694 | | | | | | | 1/8 | TEST4.OUT | | 96 320 | +-------------+------------+---------------+--------------+ | 1/8 | TEST5.INP | 224 | 71 680 | | | | | | | 1/8 | TEST5.COD | | 110 208 | | | | | | | 1/8 | TEST5.DEC | | 110 656 | | | | | | | 1/8 | TEST5.OUT | | 71 680 | +-------------+------------+---------------+--------------+ | 1/8 | TEST6.INP | 335 | 107 200 | | | | | | | 1/8 | TEST6.COD | | 164 820 | | | | | | | 1/8 | TEST6.DEC | | 165 490 | | | | | | | 1/8 | TEST6.OUT | | 107 200 | +-------------+------------+---------------+--------------+ | 1/8 | TEST7.INP | 363 | 116 160 | | | | | | | 1/8 | TEST7.COD | | 178 596 | | | | | | | 1/8 | TEST7.DEC | | 179 322 | | | | | | | 1/8 | TEST7.OUT | | 116 160 | +-------------+------------+---------------+--------------+ | 1/8 | TEST8.INP | 340 | 108 800 | | | | | | | 1/8 | TEST8.COD | | 167 280 | | | | | | | 1/8 | TEST8.DEC | | 167 960 | | | | | | | 1/8 | TEST8.OUT | | 108 800 | +-------------+------------+---------------+--------------+ | 2/8 | TEST9.INP | 407 | 130 240 | | | | | | | 2/8 | TEST9.COD | | 200 244 | | | | | | | 2/8 | TEST9.DEC | | 201 058 | | | | | | | 2/8 | TEST9.OUT | | 130 240 | +-------------+------------+---------------+--------------+ | 2/8 | TEST10.INP | 383 | 122 560 | | | | | | | 2/8 | TEST10.COD | | 188 436 | | | | | | | 2/8 | TEST10.DEC | | 189 202 | | | | | | | 2/8 | TEST10.OUT | | 122 560 | +-------------+------------+---------------+--------------+ | 2/8 | TEST11.INP | 367 | 117 440 | | | | | | | 2/8 | TEST11.COD | | 180 564 | | | | | | | 2/8 | TEST11.DEC | | 181 298 | | | | | | | 2/8 | TEST11.OUT | | 117 440 | +-------------+------------+---------------+--------------+ | 2/8 | TEST12.INP | 298 | 95 360 | | | | | | | 2/8 | TEST12.COD | | 146 616 | | | | | | | 2/8 | TEST12.DEC | | 147 212 | | | | | | | 2/8 | TEST12.OUT | | 95 360 | +-------------+------------+---------------+--------------+ | 2/8 | TEST13.INP | 338 | 108 160 | | | | | | | 2/8 | TEST13.COD | | 166 296 | | | | | | | 2/8 | TEST13.DEC | | 166 972 | | | | | | | 2/8 | TEST13.OUT | | 108 160 | +-------------+------------+---------------+--------------+ | 2/8 | TEST14.INP | 318 | 101 760 | | | | | | | 2/8 | TEST14.COD | | 156 456 | | | | | | | 2/8 | TEST14.DEC | | 157 092 | | | | | | | 2/8 | TEST14.OUT | | 101 760 | +-------------+------------+---------------+--------------+ | | | | | +-------------+------------+---------------+--------------+ | (continued) | | | | +-------------+------------+---------------+--------------+
Table 5 (concluded): Location and size of speech codec test sequences
+----------+------------+---------------+--------------+ | Disk No. | File Name | No. of frames | Size (bytes) | +----------+------------+---------------+--------------+ | 2/8 | TEST15.INP | 328 | 104 960 | | | | | | | 2/8 | TEST15.COD | | 161 376 | | | | | | | 2/8 | TEST15.DEC | | 162 032 | | | | | | | 2/8 | TEST15.OUT | | 104 960 | +----------+------------+---------------+--------------+ | 2/8 | TEST16.INP | 354 | 113 280 | | | | | | | 2/8 | TEST16.COD | | 174 168 | | | | | | | 2/8 | TEST16.DEC | | 174 876 | | | | | | | 2/8 | TEST16.OUT | | 113 280 | +----------+------------+---------------+--------------+ | 3/8 | TEST17.INP | 316 | 101 120 | | | | | | | 3/8 | TEST17.COD | | 155 472 | | | | | | | 3/8 | TEST17.DEC | | 156 104 | | | | | | | 3/8 | TEST17.OUT | | 101 120 | +----------+------------+---------------+--------------+ | 3/8 | TEST18.INP | 402 | 128 640 | | | | | | | 3/8 | TEST18.COD | | 197 784 | | | | | | | 3/8 | TEST18.DEC | | 198 588 | | | | | | | 3/8 | TEST18.OUT | | 128 640 | +----------+------------+---------------+--------------+ | 3/8 | TEST19.INP | 402 | 128 640 | | | | | | | 3/8 | TEST19.COD | | 197 784 | | | | | | | 3/8 | TEST19.DEC | | 198 588 | | | | | | | 3/8 | TEST19.OUT | | 128 640 | +----------+------------+---------------+--------------+ | 3/8 | TEST20.INP | 631 | 201 920 | | | | | | | 3/8 | TEST20.COD | | 310 452 | | | | | | | 3/8 | TEST20.DEC | | 311 714 | | | | | | | 3/8 | TEST20.OUT | | 201 920 | +----------+------------+---------------+--------------+ | 3/8 | TEST21.INP | 1 | 320 | | | | | | | 3/8 | TEST21.DEC | | 494 | +----------+------------+---------------+--------------+
# 7 DTX test sequences
This subclause describes the test sequences designed to exercise the VAD
algorithm (GSM 06.82 [6]), comfort noise (GSM 06.62 [4]) and discontinuous
transmission (GSM 06.81 [5]).
## 7.1 Codec configuration
The VAD, comfort noise and discontinuous transmission shall be tested in
conjunction with the speech encoder (GSM 06.60 [2]). The speech encoder shall
be configured to operate in the DTX mode defined in GSM 06.62 [4].
## 7.2 DTX test sequences
Each DTX test sequence consists of four files:
\- Files for input to the GSM enhanced full rate speech encoder: *.INP
\- Files for comparison with the encoder output: *.COD
\- Files for input to the GSM enhanced full rate speech decoder: *.DEC
\- Files for comparison with the decoder output: *.OUT
The *.DEC files are generated from the corresponding *.COD files.
In a correct implementation, the speech encoder parameters generated by the
*.INP file shall be identical to those specified in the *.COD file; and the
speech decoder output generated by the *.DEC file shall be identical to that
specified in the *.OUT file.
Table 6 lists the DTX test sequences and their size in frames.
### 7.2.1 Predictor values computation
The computation of the predictor values described in GSM 06.82 [6] is not
tested explicitly, since the results from the computation are tested many
times via the spectral comparison and threshold adaptation tests.
### 7.2.2 Spectral comparison
The spectral comparison algorithm described in GSM 06.82 [6] is tested by the
following test sequence:
\- DTX01. *
### 7.2.3 Threshold adaptation
The threshold adaptation algorithm described in GSM 06.82 [6] is tested by the
following test sequence:
\- DTX02. *
### 7.2.4 Periodicity detection
The periodicity detection algorithm described in GSM 06.82 [6] is tested by
the following test sequence:
\- DTX03. *
### 7.2.5 Tone detection
The tone detection algorithm described in GSM 06.82 [6] is tested by the
following test sequence:
\- DTX04. *
### 7.2.6 Safety and initialisation
This sequence checks the safety paths used to prevent zero values being passed
to the norm function. It checks the functions described in the adaptive
filtering and energy computation, and the prediction values computation given
in GSM 06.82 [6]. This sequence also checks the initialisation of thvad and
the rvad array:
\- DTX05. *
### 7.2.7 Comfort noise test sequence
The test sequences described in sub-subclauses 7.2.2 to 7.2.6 are designed to
exercise the VAD described in GSM 06.82 [6] and the discontinuous transmission
described in GSM 06.81 [5]. The following test sequence is defined to exercise
the comfort noise algorithm described in GSM 06.62 [4]:
\- DTX06.*
### 7.2.8 Real speech and tones
The test sequences cannot be guaranteed to find every possible error. There is
therefore a small possibility that an incorrect implementation produces the
correct output for the test sequences, but fails with real signals.
Consequently, an extra sequence is included, which consists of very clean
speech, barely detectable speech and a swept frequency tone:
\- DTX07. *
NOTE: Some of the DTX test sequences contain homing frames. The DTX test
sequences are therefore only suitable for testing a single transcoding.
Table 6: Location and size of DTX test sequences
* * *
                                                   size      (bytes)
Disk No. File Name No. of Frames *.INP *.COD *.DEC *.OUT 4/8 DTX01 710 227 200
349 320 350 740 227 200 4/8 DTX02 933 298 560 459 036 460 902 298 560 4/8
DTX03 156 49 920 76 752 77 064 49 920 4/8 DTX04 245 78 400 120 540 121 030 78
400 4/8 DTX05 56 17 920 27 552 27 664 17 920 4/8 DTX06 771 246 720 379 332 380
874 246 720 4/8 DTX07 1188 380 160 584 496 586 872 380 160
* * *
# 8 Sequences for finding the 20 ms framing of the GSM enhanced full rate
speech encoder
When testing the decoder, alignment of the test sequences used to the decoder
framing is achieved by the air interface (testing of MS) or can be reached
easily on the Abis-interface (testing on network side).
When testing the encoder, usually there is no information available about
where the encoder starts its 20 ms segments of speech input to the encoder.
In the following, a procedure is described to find the 20 ms framing of the
encoder using special synchronisation sequences. This procedure can be used
for MS as well as for network side.
Synchronisation can be achieved in two steps. First, bit synchronisation has
to be found. In a second step, frame synchronisation can be determined. This
procedure takes advantage of the codec homing feature of the enhanced full
rate codec, which puts the codec in a defined home state after the reception
of the first homing frame. On the reception of further homing frames, the
output of the codec is predefined and can be triggered to.
## 8.1 Bit synchronisation
The input to the speech encoder is a series of 13 bit long words (104 kbits/s,
13 bit linear PCM). When starting to test the speech encoder, no knowledge is
available on bit synchronisation, i.e., where the encoder expects its least
significant bits, and where it expects the most significant bits.
The encoder homing frame consists of 160 samples, all set to zero with the
exception of the least significant bit, which is set to one (0 0000 0000 0001
binary, or 0x0008 hex if written into 16 bit words left justified). If two
such encoder homing frames are input to the encoder consecutively, the decoder
homing frame is expected at the output as a reaction of the second encoder
homing frame.
Since there are only 13 possibilities for bit synchronisation, after a maximum
of 13 trials bit synchronisation can be reached. In each trial three
consecutive encoder homing frames are input to the encoder. If the decoder
homing frame is not detected at the output, the relative bit position of the
three input frames is shifted by one and another trial is performed. As soon
as the decoder homing frame is detected at the output, bit synchronisation is
found, and the first step can be terminated.
The reason why three consecutive encoder homing frames are needed is that
frame synchronisation is not known at this stage. To be sure that the encoder
reads two complete homing frames, three frames have to be input. Wherever the
encoder has its 20 ms segmentation, it will always read at least two complete
encoder homing frames.
An example of the 13 different frame triplets is given in sequence BITSYNC.INP
(see table 7).
## 8.2 Frame synchronisation
Once bit synchronisation is found, frame synchronisation can be found by
inputting one special frame that delivers 160 different output frames,
depending on the 160 different positions that this frame can possibly have
with respect to the encoder framing.
This special synchronisation frame was found by taking one input frame and
shifting it through the positions 0 to 159. The corresponding 160 encoded
speech frames were calculated and it was verified that all 160 output frames
were different. When shifting the input synchronisation frame, the samples at
the beginning were set to 0x0008 hex, which corresponds to the samples of the
encoder homing frame.
Before inputting this special synchronisation frame to the encoder, again the
encoder has to be reset by one encoder homing frame. A second encoder homing
frame is needed to provoke a decoder homing frame at the output that can be
triggered to. And since the framing of the encoder is not known at that stage,
three encoder homing frames have to precede the special synchronisation frame
to ensure that the encoder reads at least two homing frames, and at least one
decoder homing frame is produced at the output, serving as a trigger for
recording.
The special synchronisation frame preceded by the three encoder homing frames
are given in SEQSYNC.INP. The corresponding 160 different output frames are
given in SYNC000.COD through SYNC159.COD. The three digit number in the
filename indicates the number of samples by which the input was retarded with
respect to the encoder framing. By a corresponding shift in the opposite
direction, alignment with the encoder framing can be reached.
## 8.3 Formats and sizes of the synchronisation sequences
BIT SYNC.INP:
This sequence consists of 13 frame triplets. It has the format of the speech
encoder input test sequences (13 bit left justified with the three least
significant bits set to zero).
The size of it is therefore:
SIZE (BITSYNC.INP) = 13 * 3 * 160 * 2 bytes = 12480 bytes
SEQSYNC.INP:
This sequence consist of 3 encoder reset frames and the special
synchronisation frame. It has the format of the speech encoder input test
sequences (13 bit left justified with the three least significant bits set to
zero).
The size of it is therefore:
SIZE (SEQSYNC.INP) = 4 * 160 * 2 bytes = 1280 bytes
SYNCXXX.COD:
These sequences consists of 1 encoder output frame each. They have the format
of the speech encoder output test sequences (16 bit words right justified).
The values of the VAD and SP flags are set to one in these files.
The size of them is therefore:
SIZE (SYNCXXX.COD) = (244 + 2) * 2 bytes = 492 bytes
Table 7 summarises this information.
Table 7: Location, size and justification of synchronisation sequences
+----------+----------+----------+----------+----------+----------+ | Disk No. | Purpose | Name of | No. of | Size in | J | | | of | Sequence | Frames | Bytes | ustifica | | | Sequence | | | | tion | +----------+----------+----------+----------+----------+----------+ | 3/8 | Bit | BIT | 39 | 1 2480 | Left | | | Synchro | SYNC.INP | | | | | | nisation | | | | | +----------+----------+----------+----------+----------+----------+ | 3/8 | Frame | SEQ | 4 | 1 280 | Left | | | Synchro | SYNC.INP | | | | | | nisation | | | | | | | (input) | | | | | +----------+----------+----------+----------+----------+----------+ | 3/8 | Frame | SYN | 1 | 492 | Right | | | Synchro | C000.COD | | | | | 3/8 | nisation | | 1 | 492 | Right | | | (output) | SYN | | | | | 3/8 | | C001.COD | 1 | 492 | Right | | | | | | | | | \"\ | | SYN | \" | \" | \" | | \"\ | | C002.COD | | | | | \"\ | | | \" | \" | \" | | 3/8 | | \" | | | | | | | | \" | \" | \" | | | | \" | | | | | | | | 1 | 492 | Right | | | | \" | | | | | | | | | | | | | | SYN | | | | | | | C159.COD | | | | +----------+----------+----------+----------+----------+----------+
# 9 Trau Testing with 8 Bit A- and µ-law PCM Test Sequences
In the previous clauses, tests for the transcoder in the TRAU are described,
using 13 bit linear test sequences. However, these 13 bit test sequences
require a special interface in the TRAU and do not allow testing in the field.
In most cases the TRAU has to be set in special mode before testing.
As an alternative, the speech codec tests in the TRAU can be performed using
A- or μ-law compressed 8 bit PCM test sequences on the A interface. For this
purpose modified input test sequences (*-X.INP) are generated from the
original sequences by A or μ law compression. As an input to the encoder they
result in modified encoder output sequences (*-X.COD). The same *.dec decoder
input sequences as in subclause 6.2.2. are then used to produce the output
sequences *-X.OUT, which are A- or µ compressed.
The A- and µ-law compression and decompression does not change the homing
frames at the encoder input. The format of all A- and μ-law PCM files *-X.INP
and *-X.OUT is one sample (8 bit) per byte. The format of all other files is
as described in clause 5.
All files are contained in archive ts_100725v080100p0.zip which accompanies
the present document. The 'X' in the tables below with the filenames stands
for A (A-law) and U (μ-law), respectively. The decoder input files *.dec are
the same as in table 5 and are not described in this clause.
Table 8: Location and size of compressed 8 bit PCM speech codec test sequences
+----------+--------------+---------------+--------------+ | Disk No. | File Name | No. of frames | Size (bytes) | +----------+--------------+---------------+--------------+ | 5-8/8 | TEST0-X.INP | 285 | 45 600 | | | | | | | 5-8/8 | TEST0-X.COD | | 140 220 | | | | | | | 5-8/8 | TEST0-X.OUT | | 45 600 | +----------+--------------+---------------+--------------+ | 5-8/8 | TEST1-X.INP | 285 | 45 600 | | | | | | | 5-8/8 | TEST1-X.COD | | 140 220 | | | | | | | 5-8/8 | TEST1-X.OUT | | 45 600 | +----------+--------------+---------------+--------------+ | 5-8/8 | TEST2-X.INP | 402 | 64 320 | | | | | | | 5-8/8 | TEST2-X.COD | | 197 784 | | | | | | | 5-8/8 | TEST2-X.OUT | | 64 320 | +----------+--------------+---------------+--------------+ | 5-8/8 | TEST3-X.INP | 402 | 64 320 | | | | | | | 5-8/8 | TEST3-X.COD | | 197 784 | | | | | | | 5-8/8 | TEST3-X.OUT | | 64 320 | +----------+--------------+---------------+--------------+ | 5-8/8 | TEST4-X.INP | 301 | 48 160 | | | | | | | 5-8/8 | TEST4-X.COD | | 148 092 | | | | | | | 5-8/8 | TEST4-X.OUT | | 48 160 | +----------+--------------+---------------+--------------+ | 5-8/8 | TEST5-X.INP | 224 | 35 840 | | | | | | | 5-8/8 | TEST5-X.COD | | 110 208 | | | | | | | 5-8/8 | TEST5-X.OUT | | 35 840 | +----------+--------------+---------------+--------------+ | 5-8/8 | TEST6-X.INP | 335 | 53 600 | | | | | | | 5-8/8 | TEST6-X.COD | | 164 820 | | | | | | | 5-8/8 | TEST6-X.OUT | | 53 600 | +----------+--------------+---------------+--------------+ | 5-8/8 | TEST7-X.INP | 363 | 58 080 | | | | | | | 5-8/8 | TEST7-X.COD | | 178 596 | | | | | | | 5-8/8 | TEST7-X.OUT | | 58 080 | +----------+--------------+---------------+--------------+ | 5-8/8 | TEST8-X.INP | 340 | 54 400 | | | | | | | 5-8/8 | TEST8-X.COD | | 167 280 | | | | | | | 5-8/8 | TEST8-X.OUT | | 54 400 | +----------+--------------+---------------+--------------+ | 5-8/8 | TEST9-X.INP | 407 | 65 120 | | | | | | | 5-8/8 | TEST9-X.COD | | 200 244 | | | | | | | 5-8/8 | TEST9-X.OUT | | 65 120 | +----------+--------------+---------------+--------------+ | 5-8/8 | TEST10-X.INP | 383 | 61 280 | | | | | | | 5-8/8 | TEST10-X.COD | | 188 436 | | | | | | | 5-8/8 | TEST10-X.OUT | | 61 280 | +----------+--------------+---------------+--------------+ | 5-8/8 | TEST11-X.INP | 367 | 58 720 | | | | | | | 5-8/8 | TEST11-X.COD | | 180 564 | | | | | | | 5-8/8 | TEST11-X.OUT | | 58 720 | +----------+--------------+---------------+--------------+ | 5-8/8 | TEST12-X.INP | 298 | 47 680 | | | | | | | 5-8/8 | TEST12-X.COD | | 146 616 | | | | | | | 5-8/8 | TEST12-X.OUT | | 47 680 | +----------+--------------+---------------+--------------+ | 5-8/8 | TEST13-X.INP | 338 | 54 080 | | | | | | | 5-8/8 | TEST13-X.COD | | 166 296 | | | | | | | 5-8/8 | TEST13-X.OUT | | 54 080 | +----------+--------------+---------------+--------------+ | 5-8/8 | TEST14-X.INP | 318 | 50 880 | | | | | | | 5-8/8 | TEST14-X.COD | | 156 456 | | | | | | | 5-8/8 | TEST14-X.OUT | | 50 880 | +----------+--------------+---------------+--------------+ | 5-8/8 | TEST15-X.INP | 328 | 52 480 | | | | | | | 5-8/8 | TEST15-X.COD | | 161 376 | | | | | | | 5-8/8 | TEST15-X.OUT | | 52 480 | +----------+--------------+---------------+--------------+ | 5-8/8 | TEST16-X.INP | 354 | 56 640 | | | | | | | 5-8/8 | TEST16-X.COD | | 174 168 | | | | | | | 5-8/8 | TEST16-X.OUT | | 56 640 | +----------+--------------+---------------+--------------+ | 5-8/8 | TEST17-X.INP | 316 | 50 560 | | | | | | | 5-8/8 | TEST17-X.COD | | 155 472 | | | | | | | 5-8/8 | TEST17-X.OUT | | 50 560 | +----------+--------------+---------------+--------------+ | 5-8/8 | TEST18-X.INP | 402 | 64 320 | | | | | | | 5-8/8 | TEST18-X.COD | | 197 784 | | | | | | | 5-8/8 | TEST18-X.OUT | | 64 320 | +----------+--------------+---------------+--------------+ | 5-8/8 | TEST19-X.INP | 402 | 64 320 | | | | | | | 5-8/8 | TEST19-X.COD | | 197 784 | | | | | | | 5-8/8 | TEST19-X.OUT | | 64 320 | +----------+--------------+---------------+--------------+ | 5-8/8 | TEST20-X.INP | 631 | 100 960 | | | | | | | 5-8/8 | TEST20-X.COD | | 310 452 | | | | | | | 5-8/8 | TEST20-X.OUT | | 100 960 | +----------+--------------+---------------+--------------+ | 5-8/8 | TEST21-X.INP | 1 | 160 | +----------+--------------+---------------+--------------+
Table 9: Location and size of compressed 8 bit PCM DTX test sequences
* * *
                                                   size      bytes
Disk No. File Name No. of Frames *.INP *.COD *.OUT 5-8/8 DTX01-X 710 113 600
349 320 113 600 5-8/8 DTX02-X 933 149 280 459 036 149 280 5-8/8 DTX03-X 156 24
960 76 752 24 960 5-8/8 DTX04-X 245 39 200 120 540 39 200 5-8/8 DTX05-X 56 8
960 27 552 8 960 5-8/8 DTX06-X 771 123 360 379 332 123 360 5-8/8 DTX07-X 1188
190 080 584 496 190 080
* * *
In addition to the test sequences above, special input (seqsyncX.inp) and
output (syncxxxX.cod) sequences for frame synchronization are provided. The X
again stands for A and μ law compressed PCM. The synchronization procedure is
described in clause 8.
Table 10: Location, size and justification of compressed 8 bit PCM test
sequences
+----------+----------+----------+----------+----------+----------+ | Disk No. | Purpose | Name of | No. of | Size in | J | | | of | Sequence | Frames | Bytes | ustifica | | | Sequence | | | | tion | +----------+----------+----------+----------+----------+----------+ | 5-8/8 | Frame | SEQS | 4 | 640 | - | | | Synchro | YNCX.INP | | | | | | nisation | | | | | | | (input) | | | | | +----------+----------+----------+----------+----------+----------+ | 5-8/8 | Frame | SYNC | 1 | 492 | Right | | | Synchro | 000X.COD | | | | | 5-8/8 | nisation | | 1 | 492 | Right | | | (output) | SYNC | | | | | 5-8/8 | | 001X.COD | 1 | 492 | Right | | | | | | | | | \"\ | | SYNC | \" | \" | \" | | \"\ | | 002X.COD | | | | | \"\ | | | \" | \" | \" | | 5-8/8 | | \" | | | | | | | | \" | \" | \" | | | | \" | | | | | | | | 1 | 492 | Right | | | | \" | | | | | | | | | | | | | | SYNC | | | | | | | 159X.COD | | | | +----------+----------+----------+----------+----------+----------+
+-------+--------------------------------+--------------+----+-----+-------+ | 5-8/8 | Frame Synchronisation (output) | SYNC000X.COD | 1 | 492 | Right | | | | | | | | | 5-8/8 | | SYNC001X.COD | 1 | 492 | Right | | | | | | | | | 5-8/8 | | SYNC002X.COD | 1 | 492 | Right | | | | | | | | | \"\ | | \" | \" | \" | \" | | \"\ | | | | | | | \"\ | | \" | \" | \" | \" | | 5-8/8 | | | | | | | | | \" | \" | \" | \" | | | | | | | | | | | SYNC159X.COD | 1 | 492 | Right | +-------+--------------------------------+--------------+----+-----+-------+
# 10 Alternative Enhanced Full Rate implementation using the Adaptive Multi
Rate 12.2 kbit/s mode
The 12.2 kbit/s mode of the Adaptive Multi Rate speech coder described in TS
26.071 is functionally equivalent to the GSM Enhanced Full Rate speech coder.
An alternative implementation of the Enhanced Full Rate speech service based
on the 12.2 kbit/s mode of the Adaptive Multi Rate coder is allowed.
Alternative implementations shall implement the functionality specified in TS
26.071 for the 12.2 kbit/s mode, with the difference that the DTX transmission
format from GSM 06.81, the comfort noise generation from GSM 06.62 and the
decoder homing frame from GSM 06.60 shall be used.
The test sequences are derived from the corresponding AMR test sequences. The
modifications that were made and the use of the respective sequences are
described below. The input sequences are identical to the AMR test input
sequences *.inp.
[Speech codec test sequences]{.underline}
  * with DTX disabled
t00.inp ... t22.inp (encoder input, from TS 26.074)
t00_efr.cod ... t22_efr.cod (encoder output)
t00_efr.dec ... t22_efr.dec (decoder input)
t00_efr.out ... t22_efr.out (decoder output)
  * with DTX enabled, VAD option 1
Dtx1.inp ... Dtx4.inp (encoder input, from TS 26.074)
Dtx1_efr.cod ... Dtx4_efr.cod (encoder output)
Dtx1_efr.dec ... Dtx4_efr.dec (decoder input)
Dtx1_efr.out ... Dtx4_efr.out (decoder output)
  * with DTX enabled, VAD option 2
Dt21.inp .... Dt24.inp (encoder input, from TS 26.074)
Dt21_efr.cod ... Dt24_efr.cod (encoder output)
Dt21_efr.dec ... Dt24_efr.dec (decoder input)
Dt21_efr.out ... Dt24_efr.out (decoder output)
The format of the *.cod files is identical to the GSM_EFR *.cod file format
(244 Data Bits, VadFlag, SpFlag equaling 246 Words per 20ms frame). The format
of the *.dec files is identical to the GSM_EFR *.dec file format, that is
(Bfi, 244 Data Bits, Sid, Taf equaling 247 Words per frame (20ms).
In summary, the differences to the AMR Mode MR122 test sequences are:
  * DTX handling (VadFlag and SpFlag instead of TxType; different SID frames)
  * Decoder homing frame (Decoder homing frame for GSM_EFR is different than for AMR MR122).
#