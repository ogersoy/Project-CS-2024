# Foreword
This Technical Specification (TS) has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document shall provide a description of the UTRAN RNS-RNS (Iur)
interface user plane protocols for Common Transport Channel data streams as
agreed within the TSG-RAN working group 3.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or non‑specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the > case of a reference to a 3GPP document (including a GSM document), > a non-specific reference implicitly refers to the latest version > of that document _in the same Release as the present document_.
[1] ITU-T Recommendation I.361 (11/95): \"B-ISDN ATM Layer Specification\".
[2] ITU-T Recommendation I.363.2 (11/2000): \"B-ISDN ATM Adaptation Layer
specification: Type 2 AAL\".
[3] ITU-T Recommendation I.366.1 (06/98): \"Segmentation and Reassembly
Service Specific Convergence Sublayer for the AAL type 2\".
[4] 3GPP TS 25.427: \"UTRAN Iub/Iur Interface User Plane Protocols for DCH
Data Streams\".
[5] 3GPP TS 25.401: \"UTRAN overall description\".
[6] 3GPP TR 25.990: \"Vocabulary\".
[7] 3GPP TS 25.321: \"Medium Access Control (MAC) protocol specification\".
[8] 3GPP TS 25.423: \"UTRAN Iur Interface RNSAP Signalling\".
[9] 3GPP TS 25.321: \"Medium Access Control (MAC) protocol specification\".
[10] 3GPP TS 25.224: \"Physical layer procedures (TDD)\".
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions in TS
25.401 [5] and the following apply:
**Common Transport Channel:** it is defined as a transport channel that is
shared by several users i.e. DSCH [TDD], USCH [TDD], RACH, FACH [FDD and
1.28Mcps TDD -, E-DCH for CELL_FACH and Idle] and HS-DSCH.
**Transport Connection:** service provided by the transport layer and used by
Frame Protocol for the delivery of FP PDU
## 3.2 Symbols
No special symbols are defined in the present document.
## 3.3 Abbreviations
For the purposes of the present document, the following abbreviations apply:
AAL2 ATM Adaptation Layer type 2
ATM Asynchronous Transfer Mode
CFN Connection Frame Number
CmCH Common Transport Channel
C-RNC Controlling Radio Network Controller
CRC Cyclic Redundancy Checksum
DCH Dedicated Transport Channel
DL Downlink
D-RNTI Drift RNTI
DRT Delay Reference Time
DSCH Downlink Shared Channel
E-DCH Enhanced Dedicated Transport Channel
FACH Forward Access Channel
FP Frame Protocol
FT Frame Type
FSN Frame Sequence Number
HSDPA High Speed Downlink Packet Access
HS-DSCH High Speed Downlink Shared Channel
RACH Random Access Channel
RNC Radio Network Controller
RNTI Radio Network Temporary Identity
SRNC Serving Radio Network Controller
S-RNTI Serving RNTI
SSCS Service Specific Convergence Sublayer
TB Transport Block
TBS Transport Block Set
TFI Transport Format Indicator
TNL Transport Network Layer
ToA Time of Arrival
TTI Transmission Time Interval
UE User Equipment
UL Uplink
U-RNTI UTRAN RNTI
USCH Uplink Shared Channel
## 3.4 Specification Notations
For the purposes of the present document, the following notations apply:
> [FDD] This tagging of a word indicates that the word preceding the tag
> \"[FDD]\" applies only to FDD. This tagging of a heading indicates that the
> heading preceding the tag \"[FDD]\" and the section following the heading
> applies only to FDD.
>
> [TDD] This tagging of a word indicates that the word preceding the tag
> \"[TDD]\" applies only to TDD, including 7.68Mcps TDD, 3.84Mcps TDD and
> 1.28Mcps TDD. This tagging of a heading indicates that the heading preceding
> the tag \"[TDD]\" and the section following the heading applies only to TDD,
> including 7.68Mcps TDD, 3.84Mcps TDD and 1.28Mcps TDD.
>
> [7.68Mcps TDD] This tagging of a word indicates that the word preceding the
> tag "[7.68Mcps TDD]" applies only to 7.68Mcps TDD. This tagging of a heading
> indicates that the heading preceding the tag "[7.68Mcps TDD]" and the
> section following the heading applies only to 7.68Mcps TDD.
>
> [3.84Mcps TDD] This tagging of a word indicates that the word preceding the
> tag "[3.84Mcps TDD]" applies only to 3.84Mcps TDD. This tagging of a heading
> indicates that the heading preceding the tag "[3.84Mcps TDD]" and the
> section following the heading applies only to 3.84Mcps TDD.
>
> [1.28Mcps TDD] This tagging of a word indicates that the word preceding the
> tag \"[1.28Mcps TDD]\" applies only to 1.28Mcps TDD. This tagging of a
> heading indicates that the heading preceding the tag \"[1.28Mcps TDD]\" and
> the section following the heading applies only to 1.28Mcps TDD.
>
> [FDD - ...] This tagging indicates that the enclosed text following the
> \"[FDD - \" applies only to FDD. Multiple sequential paragraphs applying
> only to FDD are enclosed separately to enable insertion of TDD specific (or
> common) paragraphs between the FDD specific paragraphs.
>
> [TDD - ...] This tagging indicates that the enclosed text following the
> \"[TDD - \" applies only to TDD including 7.68Mcps TDD, 3.84Mcps TDD and
> 1.28Mcps TDD. Multiple sequential paragraphs applying only to TDD are
> enclosed separately to enable insertion of FDD specific (or common)
> paragraphs between the TDD specific paragraphs.
>
> [7.68Mcps TDD - ...] This tagging indicates that the enclosed text following
> the \"[7.68Mcps TDD - \" applies only to 7.68Mcps TDD. Multiple sequential
> paragraphs applying only to 7.68Mcps TDD are enclosed separately to enable
> insertion of FDD and TDD specific (or common) paragraphs between the
> 7.68Mcps TDD specific paragraphs.
>
> [3.84Mcps TDD - ...] This tagging indicates that the enclosed text following
> the \"[3.84Mcps TDD - \" applies only to 3.84Mcps TDD. Multiple sequential
> paragraphs applying only to 3.84Mcps TDD are enclosed separately to enable
> insertion of FDD and TDD specific (or common) paragraphs between the
> 3.84Mcps TDD specific paragraphs.
>
> [1.28Mcps TDD - ...] This tagging indicates that the enclosed text following
> the \"[1.28Mcps TDD -- \" applies only to 1.28Mcps TDD. Multiple sequential
> paragraphs applying only to 1.28Mcps TDD are enclosed separately to enable
> insertion of FDD and TDD specific (or common) paragraphs between the
> 1.28Mcps TDD specific paragraphs.
>
> Procedure When referring to a procedure in the specification, the Procedure
> Name is written with the first letters in each word in upper case characters
> followed by the word \"procedure\", e.g. FACH Data Transfer procedure.
>
> Frame When referring to a control or data frame in the specification, the
> CONTROL/DATA FRAME NAME is written with all letters in upper case characters
> followed by the words \"control/data frame\", e.g. FACH FLOW CONTROL control
> frame.
>
> IE When referring to an information element (IE) in the specification, the
> _Information Element Name_ is written with the first letters in each word in
> upper case characters and all letters in Italic font followed by the
> abbreviation \"IE\", e.g. _Credits_ IE.
>
> Value of an IE When referring to the value of an information element (IE) in
> the specification, the \"Value\" is written as it is specified in subclause
> 6.2.5 or 6.3.3 enclosed by quotation marks, e.g. \"0\" or \"255\".
# 4 General Aspects
## 4.1 Common Transport Channel Data Streams User Plane Protocol Services
This subclause describes the services that the User Plane Protocols provide
such as data transfer, flow control.
### 4.1.1 RACH Data Streams User Plane Protocol Services
RACH frame protocol provides the following services:
\- Transport of MAC-c/sh SDUs from the DRNC to the SRNC for RACH common
transport channels.
### 4.1.2 FACH Data Streams User Plane Protocol Services
FACH frame protocol provides the following services:
\- Transport of MAC-c/sh SDUs from the SRNC to the DRNC for FACH common
transport channel.
\- Flow Control between MAC-d and MAC-c/sh.
### 4.1.3 USCH/DSCH Data Streams User Plane Protocol Services [TDD]
[TDD USCH]/DSCH frame protocol provides the following services:
\- Transport of MAC-c/sh SDUs between the SRNC and the DRNC for [TDD USCH] and
DSCH common transport channels.
\- Flow Control between MAC-d and MAC-c/sh.
### 4.1.4 HS-DSCH Data Streams User Plane Protocol Services
HS-DSCH frame protocol provides the following services:
\- Transport of MAC-d flows between the SRNC and the DRNC for HS-DSCH common
transport channels.
\- Flow Control between MAC-d and CRNC HS-DSCH Flow Control.
### 4.1.5 E-DCH for CELL_FACH and Idle Data Streams User Plane Protocol
Services [FDD and 1.28Mcps TDD]
E-DCH for CELL_FACH and Idle frame protocol provides the following services:
\- Transport of MAC-is PDUs in Cell_FACH state between the DRNC and the SRNC
for E-DCH common transport channels.
## 4.2 Services expected from the Data Transport Network layer
The following services are expected from the transport layer:
\- Delivery of Frame Protocol PDUs.
In sequence delivery is not required. However, frequent out-of-sequence
delivery may impact the performance and should be avoided.
## 4.3 Protocol Version
This revision of the specification specifies version 1 of the protocols.
# 5 Common Transport Channel Data Streams User Plane Procedures
This clause specifies the user plane procedures for Common Transport Channels
data streams. Typical related scenarios at Iur interface should be described.
For the user plane of the radio network layer there are five Common Transport
Channel frame handling protocols:
1\. Random Access Channel/Common Packet Channel [FDD] Frame Protocol (RACH FP)
for transport of Iur data streams carried on RACH on the Uu-interface.
2\. Forward Access Channel Frame Protocol (FACH FP) for transport of Iur data
streams carried on FACH on the Uu-interface.
3\. Downlink Shared Channel Frame Protocol ([TDD - DSCH FP]) for transport of
Iur data streams carried on DSCH on the Uu-interface.
4\. Uplink Shared Channel Frame Protocol ([TDD - USCH] FP) for transport of
Iur data streams carried on USCH on the Uu-interface.
5\. High Speed Downlink Shared Channel Frame Protocol (HS-DSCH FP) for
transport of Iur data streams carried on HS-DSCH on the Uu-interface.
6\. [FDD and 1.28Mcps TDD - E-DCH for CELL_FACH and Idle Frame Protocol (E-DCH
for CELL_FACH and Idle FP) for transport of Iur data streams carried on E-DCH
in Cell_FACH and Idle on Uu-Interface.]
## 5.1 Data Transfer
### 5.1.1 RACH Data Transfer
Figure 1: RACH Data Transfer procedure
Data received on the RACH transport channel is transmitted from the DRNC to
the SRNC using RACH DATA FRAMEs. The data is protected by a mandatory payload
CRC. Multiple MAC-c/sh SDUs of same length may be transmitted in the same RACH
DATA FRAME.
### 5.1.2 FACH Data Transfer
Figure 2: FACH Data Transfer procedure
Data to be transmitted on the FACH transport channel is transmitted from the
SRNC to the DRNC using FACH DATA FRAMEs. Multiple MAC-c/sh SDUs of same length
and same priority level (CmCH-PI) may be transmitted in the same FACH DATA
FRAME. Within one priority and size the MAC-c/sh SDUs shall be transmitted by
the DRNS on the Uu interface in the same order as they were received from the
SRNC.
The _UE-ID Type Indicator_ IE indicates which UE-ID type MAC-c/sh shall
include in the MAC header.
### 5.1.3 USCH Data Transfer [TDD]
Figure 3: USCH Data Transfer procedure
Whenever there is USCH data in the DRNC, transfer is done immediately to the
SRNC via the USCH Data Port using USCH DATA FRAMEs.
Data received on the USCH transport channel is transmitted from the DRNC to
the SRNC using USCH DATA FRAMEs. The data is protected by a mandatory payload
CRC. Multiple MAC-c/sh SDUs of same length may be transmitted in the same USCH
DATA FRAME.
### 5.1.4 DSCH Data Transfer [TDD]
Figure 4: DSCH Data Transfer procedure
When the SRNC has been granted capacity by the DRNC via the DSCH CAPACITY
ALLOCATION Control Frame or via the DSCH initial capacity allocation as
described in TS 25.423 [8] and the SRNC has data waiting to be sent, then the
DSCH DATA FRAME is used to transfer the data. If the SRNC has been granted
capacity by the DRNC via the DSCH initial capacity allocation as described in
TS 25.423 [8], this capacity is valid for only the first DSCH DATA FRAME
transmission. When data is waiting to be transferred, and a CAPACITY
ALLOCATION is received, a DATA FRAME will be transmitted immediately according
to allocation received.
Multiple MAC-c/sh SDUs of same length and same priority level (CmCH-PI) may be
transmitted in the same DSCH DATA FRAME.
The DSCH DATA FRAME includes a _User Buffer Size_ IE to indicate the amount of
data pending for the respective UE for the indicated priority level. Within
one priority level and size the MAC-c/sh SDUs shall be transmitted by the DRNS
on the Uu interface in the same order as they were received from the SRNC.
### 5.1.5 HS-DSCH Data Transfer
Figure 4AA: HS-DSCH Data Transfer procedure
The HS-DSCH Data Transfer procedure is used to transfer a HS-DSCH DATA FRAME
(TYPE 1 or TYPE 2) from the SRNC to a DRNC. Two types of HS-DSCH Frame
Protocols exist for HS-DSCH data transfer procedure, i.e., HS-DSCH Frame
Protocol TYPE 1 (including HS-DSCH DATA FRAME TYPE 1 and HS-DSCH CAPACITY
ALLOCATION TYPE 1 Control Frame) and HS-DSCH Frame Protocol TYPE 2 (including
HS-DSCH DATA FRAME TYPE 2 and HS-DSCH CAPACITY ALLOCATION TYPE 2 Control
Frame).
HS-DSCH DATA FRAME TYPE 2 is selected if the IE _HS-DSCH MAC-d PDU Size
Format_ in RNSAP (TS 25.423 [8]) is present and set to 'Flexible MAC-d PDU
Size' [FDD and 1.28Mcps TDD - or if the IE _Enhanced FACH Support Indicator_
in RNSAP (TS 25.423 [8]) is present]. HS-DSCH DATA FRAME TYPE 1 is selected in
any other case.
HS-DSCH CAPACITY ALLOCATION TYPE 1 Control Frame shall be associated only with
HS-DSCH DATA FRAME TYPE 1 while HS-DSCH CAPACITY ALLOCATION TYPE 2 Control
Frame shall be associated only with HS-DSCH DATA FRAME TYPE 2. HS-DSCH
CAPACITY REQUEST Control Frame shall be used for both of HS-DSCH Frame
Protocols. HS-DSCH Frame Protocol TYPE 2 is used for Flexible MAC-d PDU Size
[FDD and 1.28Mcps TDD - and Enhanced FACH] as described in RNSAP (TS 25.423
[8]).
When the SRNC has been granted capacity by the DRNC via the HS-DSCH CAPACITY
ALLOCATION (TYPE 1 or TYPE 2) Control Frame or via the HS-DSCH initial
capacity allocation as described in TS 25.423 [8] and the SRNC has data
waiting to be sent, then the HS-DSCH DATA FRAME (TYPE 1 or TYPE 2) is used to
transfer the data. If the SRNC has been granted capacity by the DRNC via the
HS-DSCH initial capacity allocation as described in TS 25.423 [8], this
capacity is valid for only the first HS-DSCH DATA FRAME (TYPE 1 or TYPE 2)
transmission. If the HS-DSCH Frame Protocol TYPE 2 has been selected by the
DRNC, the granted capacity shall be interpreted as the total number of octets
which is retrieved by multiplying the maximum MAC-d PDU length (indicated by
the _Maximum MAC-d PDU Length Type 2_ IE) with the number of MAC-d PDUs
(indicated by the _HS-DSCH Credits_ IE). When data is waiting to be
transferred, and a CAPACITY ALLOCATION (TYPE 1 or TYPE 2) is received, a DATA
FRAME (TYPE 1 or TYPE 2) will be transmitted immediately according to
allocation received. If the allocation received is >0 but less than the data
waiting to be transferred, then the RNC may send one HS-DSCH DATA FRAME TYPE 2
containing one MAC-d PDU with a length up to the RNSAP _Maximum MAC-d PDU Size
Extended_ IE value. In such a case, the amount of data exceeding the allocated
capacity for the first HS-DSCH Interval shall be credited from the following
HS-DSCH Intervals, if available.
In case of HS-DSCH Frame Protocol TYPE 1, multiple MAC-d PDUs of same length
and same priority level (CmCH-PI) may be transmitted in one MAC-d flow in the
same HS-DSCH DATA FRAME TYPE 1.
In case of HS-DSCH Frame Protocol TYPE 2, MAC-d PDUs with the same logical
channel ID shall be associated to one unique priority level (CmCH-PI).
The HS-DSCH DATA FRAME (TYPE 1 and TYPE 2) includes a _User Buffer Size_ IE to
indicate the amount of data pending for the respective MAC-d flow for the
indicated priority level. Within one priority level (CmCH-PI) and size the
MAC-d PDUs shall be transmitted by the DRNS on the Uu interface in the same
order as they were received from the SRNC.
If the _Flush_ IE in the HS-DSCH DATA FRAME (TYPE 1 and TYPE 2) is set to
\"flush\" the DRNS should remove all MAC-d PDUs from the corresponding MAC-hs
Priority Queue that have been received prior to this data frame on the same
transport bearer.
For the purpose of TNL Congestion Control on HSDPA, the _Frame Sequence
Number_ and the _DRT_ IEs may be included by the SRNC depending on higher
layer configuration.
### 5.1.6 E-DCH for CELL_FACH and Idle Data Transfer [FDD and 1.28Mcps TDD]
Figure 4AB: E-DCH for CELL_FACH and Idle Data Transfer procedure
The E-DCH for CELL_FACH and Idle Data Transfer procedure is used to transfer
an E-DCH DATA FRAME from the DRNC to the SRNC.
### 5.1.7 Indication of UE State Transition [1.28Mcps TDD]
In 1.28Mcps TDD, for UE in CELL_PCH or URA_PCH states with stored H-RNTI, the
network use the stored dedicated H-RNTI to inform the UE to establish the
uplink synchronization via HS-SCCH before transmitting DCCH and DTCH to the
UE. And when UE receives dedicated H-RNTI on HS-SCCH, the UE shall initiate
the uplink synchronization procedure and transit to CELL_FACH state. The
serving DRNC shall send the UE State Transition Indication to SRNC to inform
that the UE's state has been transited from CELL_PCH/URA_PCH to CELL_FACH.
The UE State Transition Indication is indicated in a user data frame with
values set as follows:
\- The _CFN_ and _Subframe Number_ IE values shall reflect the time when the
state transition was detected
\- The _Number of MAC-is PDUs_ IE shall be set to zero. As a consequence there
are no _MAC-is PDU descriptor_ IE and there are no _MAC-is PDUs_ IEs in the
payload part of the data frame related to UE state transition indication.
### 5.1.8 HS-DSCH UL Synchronization Establishment Failure [1.28Mcps TDD]
Figure 4AC: HS-DSCH UL Synchronization Establishment Failure procedure
In 1.28Mcps TDD, when the DRNC was notified by the Node B that the HS-DSCH
data transimssion to the UE in CELL_FACH state is failed because of the uplink
synchronization failure (TS 25.224 [10]), the DRNC could use HS-DSCH UL
SYNCHRONIZATION ESTABLISHMENT FAILURE control frame to notify the SRNC to
terminate the HS-DSCH data transimssion.
## 5.2 Flow Control
### 5.2.1 FACH Flow Control
Figure 4A: FACH Flow Control procedure
The FACH Flow Control procedure is used by the DRNC to control the user data
flow. It may be generated in response to a FACH Capacity Request procedure or
at any other time. The _Credits_ IE indicates the number of MAC-c/sh SDUs the
SRNC is allowed to transmit for the UE identified by the _SRNTI_ IE and the
associated priority level indicated by the _Common Transport Channel Priority
Indicator_ IE.
The _Credits_ IE indicates the total amount of credits granted. Any credits
previously granted are withdrawn.
If _Credits_ IE = 0 (e.g. due to congestion in the DRNC), the SRNC shall
immediately stop transmission of MAC-c/sh SDUs.
_Credits_ IE = \'unlimited\' indicates that the SRNC may transmit an unlimited
number of MAC-c/sh SDUs.
### 5.2.2 DSCH Capacity Request [TDD]
Figure 5: DSCH Capacity Request procedure
The DSCH Capacity Request procedure provides means for the SRNC to request
DSCH capacity by indicating the user buffer size in the SRNC for a given
priority level.
The SRNC is allowed to reissue the DSCH Capacity Request if no CAPACITY
ALLOCATION has been received within an appropriate time threshold.
### 5.2.3 DSCH Capacity Allocation [TDD]
{width="4.100694444444445in" height="1.7673611111111112in"}
Figure 6: DSCH Capacity Allocation procedure
DSCH Capacity Allocation procedure is generated within the DRNC. It may be
generated either in response to a DSCH Capacity Request or at any other time.
The DRNC may use this message to modify the capacity at any time, irrespective
of the reported user buffer status.
The DSCH CAPACITY ALLOCATION frame is used by the DRNC to control the user
data flow. _Credits_ IE indicates the number of MAC-c/sh SDUs that the SRNC is
allowed to transmit for the UE and the associated priority level indicated by
the _Common Transport Channel Priority Indicator_ IE.
The _Maximum_. _MAC- c/sh SDU length_ , _Credits_ , _Interval_ and _Repetition
Period_ IEs indicates the total amount of capacity granted. Any capacity
previously granted is replaced.
If _Credits_ IE = 0 (e.g. due to congestion in the DRNC), the SRNC shall
immediately stop transmission of MAC-c/sh SDUs. If _Credits_ IE = 255, the
SRNC can transmit MAC-c/sh SDUs with unlimited capacity.
The IEs used in the DSCH CAPACITY ALLOCATION Control Frame are the _Common
Transport Channel Priority Indicator_ , _Credits_ , _Maximum_ _MAC- c/sh SDU
Length_ , _Interval_ and the _Repetition Period_.
_If the Repetition Period_ IE _=_ _\'unlimited repetition period\'_ it
indicates that the SRNC may transmit the specified number of MAC-c/sh SDUs for
an unlimited period according to the bounds of _Maximum MAC-c/sh SDU Length_ ,
_Credits_ and _Interval_ IEs.
### 5.2.4 FACH Capacity Request
Figure 6A: FACH Capacity Request procedure
The FACH Capacity Request procedure provides the means for the SRNC to notify
the DRNC about the user buffer size for a given priority level. It may be sent
if no FACH FLOW CONTROL frame has been received within an appropriate time
threshold, or to signal an event such as data arrival or user buffer discard.
### 5.2.5 HS-DSCH Capacity Request
Figure 6B: HS-DSCH Capacity Request procedure
The HS-DSCH Capacity Request procedure provides means for the SRNC to request
HS-DSCH capacity by indicating the user buffer size in the SRNC for a given
priority level.
The SRNC is allowed to reissue the HS-DSCH Capacity Request if no CAPACITY
ALLOCATION (TYPE 1 or TYPE 2) has been received within an appropriate time
threshold.
### 5.2.6 HS-DSCH Capacity Allocation
{width="4.100694444444445in" height="1.7673611111111112in"}
Figure 6C: HS-DSCH Capacity Allocation procedure
HS-DSCH Capacity Allocation procedure is generated within the DRNC. It may be
generated either in response to a HS-DSCH Capacity Request or at any other
time.
The DRNC may use this message to modify the capacity at any time, irrespective
of the reported user buffer status.
The HS-DSCH CAPACITY ALLOCATION (TYPE 1 and TYPE 2) Control Frame are used by
the DRNC to control the user data flow. In case of HS-DSCH Frame Protocol TYPE
1, _HS-DSCH Credits_ IE indicates the number of MAC-d PDUs that the SRNC is
allowed to transmit for the MAC-d flow and the associated priority level
indicated by the _Common Transport Channel Priority Indicator_ IE. In case of
HS-DSCH Frame Protocol TYPE 2, the _HS-DSCH Credits_ IE multiplied by the
_Maximum MAC-d PDU Length Type 2_ IE indicates the number of MAC-d PDU octets
that the SRNC is allowed to transmit for the MAC-d flow and the associated
priority level indicated by the _Common Transport Channel Priority Indicator_
IE.
The _Maximum_ _MAC- d PDU length_ _(in case of_ HS-DSCH Frame Protocol TYPE 1)
_or Maximum_ _MAC- d PDU Length Type 2_ _(in case of_ HS-DSCH Frame Protocol
TYPE 2), _HS-DSCH Credits_ , _HS-DSCH Interval_ and _HS-DSCH Repetition
Period_ IEs indicates the total amount of capacity granted. Any capacity
previously granted is replaced.
If _HS-DSCH Credits_ IE = 0 (e.g. due to congestion in the DRNC), the SRNC
shall immediately stop transmission of MAC-d PDUs. If _HS-DSCH Credits_ IE =
2047 in case of HS-DSCH CAPACITY ALLOCATION TYPE 1 Control Frame or 65535 in
case of HS-DSCH CAPACITY ALLOCATION TYPE 2 Control Frame, the SRNC can
transmit MAC-d PDUs with unlimited capacity.
The IEs used in the HS-DSCH CAPACITY ALLOCATION (TYPE 1 and TYPE 2) Control
Frame are the _Common Transport Channel Priority Indicator_ , _HS-DSCH
Credits_ , _Maximum_ _MAC- d PDU Length (in case of_ HS-DSCH Frame Protocol
TYPE 1) _or Maximum_ _MAC- d PDU Length_ _Type 2_ _(in case of_ HS-DSCH Frame
Protocol TYPE 2), _HS-DSCH Interval_ and the _HS-DSCH Repetition Period_.
_If the HS-DSCH Repetition Period_ IE _=_ _\"unlimited repetition period\"_ it
indicates that the SRNC may transmit the amount of granted capacity for an
unlimited period according to the bounds of _Maximum MAC-d PDU Length IE (TYPE
1) or Maximum_ _MAC- d PDU length Type 2 IE (TYPE 2)_ , _HS-DSCH Credits_ IE
and _HS-DSCH Interval_ IE.
## 5.2A Node Synchronisation
The Node Synchronisation procedure is used by the SRNC to acquire information
on the Node B timing.
The procedure is initiated by the SRNC by sending a DL NODE SYNCHRONISATION
control frame containing the parameter T1 to the DRNS.
Upon reception of a DL NODE SYNCHRONISATION control frame, the DRNS shall
respond with UL NODE SYNCHRONISATION control frame, including the parameters
T2 and T3, as well as the T1 which was indicated in the initiating DL NODE
SYNCHRONISATION control frame.
The T1, T2, T3 parameters are defined as:
\- T1: RNC specific frame number (RFN) that indicates the time when RNC sends
the DL NODE SYNCHRONISATION control frame through the SAP to the transport
layer.
\- T2: Node B specific frame number (BFN) that indicates the time when Node B
receives the correspondent DL NODE SYNCHRONISZATION control frame through the
SAP from the transport layer.
\- T3: Node B specific frame number (BFN) that indicates the time when Node B
sends the UL NODE SYNCHRONISATION control frame through the SAP to the
transport layer.
The general overview on the Node Synchronisation procedure is reported in TS
25.401 [5].
Figure 6D: Node Synchronisation procedure
## 5.3 General
### 5.3.1 DSCH / USCH transport bearer replacement [TDD]
As described in RNSAP (TS 25.423 [8]), transport bearer replacement can be
achieved for a DSCH or USCH by using the Synchronised Radio Link
Reconfiguration Preparation procedure in combination with the Synchronised
Radio Link Reconfiguration Commit procedure. In both cases the following steps
can be discerned:
1) The new transport bearer is established after which 2 transport bearers
exist in parallel.
2) The transport channel(s) is/are switched to the new transport bearer.
3) The old transport bearer is released.
In step 1), communication on the old transport bearer continues as normal.
In step 2), the moment of switching is determined as follows:
\- The DSCH DATA FRAMEs or USCH DATA FRAMEs shall be transported on the new
transport bearer from the CFN indicated in the RADIO LINK RECONFIGURATION
COMMIT message.
Starting from this CFN the RNCs shall support all the applicable Common
Transport Channels frame protocol procedures on the new transport bearer and
no requirements exist regarding support of Common Transport Channels frame
protocol procedures on the old transport bearer.
Finally in step 3), the old transport bearer is released.
### 5.3.2 HS-DSCH Transport Bearer Replacement
As described in RNSAP (TS 25.423 [8]), transport bearer replacement can be
achieved for a HS-DSCH MAC-d Flow by using the Synchronised Radio Link
Reconfiguration Preparation procedure in combination with the Synchronised
Radio Link Reconfiguration Commit procedure, or by using the Unsynchronised
Radio Link Reconfiguration procedure. In both cases the following steps can be
discerned:
1) The new transport bearer is established after which 2 transport bearers
exist in parallel.
2) The HS-DSCH MAC-d Flow is switched to the new transport bearer.
3) The old transport bearer is released.
**HS-DSCH Transport Bearer Replacement, step 1:**
Communication on the old transport bearer continues as normal. In addition,
the DRNS shall support HS-DSCH DATA FRAMEs (TYPE 1 or TYPE 2), the HS-DSCH
CAPACITY REQUEST Control Frame (see sub-clause 5.2.5) and may support the HS-
DSCH CAPACITY ALLOCATION (TYPE 1 or TYPE 2) Control Frame (see sub-clause
5.2.6) on the new transport bearer. HS-DSCH DATA FRAMEs (TYPE 1 or TYPE 2)
transported on the new transport bearer shall be transmitted on the Uu
Interface in the same way as those received on the old transport bearer (see
sub-clause 5.1.5).
The DRNS may use the old or the new transport bearer for the HS-DSCH CAPACITY
ALLOCATION (TYPE 1 or TYPE 2) Control Frame. The HS-DSCH CAPACITY ALLOCATION
(TYPE 1 or TYPE 2) Control Frame indicates the total amount of capacity
granted for the MAC-d flow and the indicated priority level, irrespective of
the transport bearer used. Any capacity previously granted is replaced.
The SRNC may use the old or the new transport bearer for the HS-DSCH CAPACITY
REQUEST Control Frame. The rules for reissuing a HS-DSCH CAPACITY REQUEST
Control Frame as outlined in sub-clause 5.2.5 still apply.
**HS-DSCH Transport Bearer Replacement, step 2:**
Regarding step 2), the moment of switching is determined as follows:
Starting from the CFN indicated in the RADIO LINK RECONFIGURATION COMMIT
message -- or directly when using the unsynchronised Radio Link
Reconfiguration procedure, the DRNS shall support all applicable Common
Transport Channels frame protocol procedures on the new transport bearer and
no requirements exist regarding support of Common Transport Channels frame
protocol procedures on the old transport bearer.
**HS-DSCH Transport Bearer Replacement, step 3:**
Finally in step 3), the old transport bearer is released.
# 6 Frame Structure and Coding
## 6.1 General
The general structure of a Common Transport Channel frame consists of a header
and a payload. This structure is depicted in the figure 7.
* * *
Header Payload: Data or Control Information
* * *
Figure 7: General Frame Structure
The header shall contain the frame type field and information related to the
frame type.
There are two types of frames (indicated by the Frame Type field).
1\. Data frame.
2\. Control frame.
In the present document the structure of frames will be specified by using
pictures similar to the following figure 8.
Figure 8: Example frame structure
Unless otherwise indicated, fields which consist of multiple bits within a
byte will have the more significant bit located at the higher bit position
(indicated above frame in figure 8). In addition, if a field spans several
bytes, more significant bits will be located in lower numbered bytes (right of
frame in figure 8).
On the Iur interface, the frame will be transmitted starting from the lowest
numbered byte. Within each byte, the bits are sent according decreasing bit
position (bit position 7 first).
The Spare Extension indicates the location where new IEs can in the future be
added in a backward compatible way.
The Spare Extension shall not be used by the transmitter and shall be ignored
by the receiver.
Spare bits shall be set to 0 by the transmitter and shall be ignored by the
receiver.
The parameters are specified giving the value range and the step (if not 1).
The coding is done as follows (unless otherwise specified):
\- Lowest value (in the range) coded as a sequence of 0\'s;
\- Highest value in the range coded as a sequence of 1\'s.
## 6.2 Data Frame structure
### 6.2.1 RACH Channels
RACH Iur data stream corresponds to the data stream of one specific UE. The
used transport bearer for the transport of FACH/RACH or FACH is bi-
directional.
The RACH/FACH FP does not facilitate multiplexing of data streams from
different UEs onto the same data frame, but does allow multiple UEs to share
the same transport bearer.
The RACH DATA FRAME structure is defined as common for FDD and TDD with
conditional fields.
Figure 9: RACH DATA FRAME structure
Propagation delay is a conditional Information Element which is only present
when the Cell supporting the RACH Transport Channel is a FDD Cell.
Rx Timing Deviation is a conditional Information Element which is only present
when the Cell supporting the RACH Transport Channel is a 3.84 Mcps or 7.68
Mcps TDD Cell.
Received SYNC UL Timing Deviation is a conditional Information Element which
is only present when the Cell supporting the RACH Transport Channel is a 1.28
Mcps TDD Cell.
With respect to new IEs, for which the presence is indicated by the _New IE
Flags_ IE, the Figure 9 is an example of how a frame is structured when all
such new IEs are present. Note that non-presence of such a new IE changes the
position of all subsequent IEs on octet level.
[FDD- Bit 0 of New IE Flags in RACH DATA FRAME indicates if a Cell Portion ID
is present (1) or not present (0) in the byte (bits 0-5) following the _New IE
Flags_ IE. ]
[FDD- Bit 1 of New IE Flags in RACH DATA FRAME indicates if the _Ext
Propagation Delay_ IE is present (1) or not present (0).]
[FDD - Bits 2 through 6 of New IE Flags in RACH DATA FRAME shall be set to 0.]
[FDD - Field length of _Spare Extension_ IE in RACH DATA FRAME is 0-28
octets.]
[3.84 Mcps and 7.68 Mcps TDD - Bit 0 of New IE Flags in RACH DATA FRAME
indicates if the extended bits of the Rx Timing Deviation are present (1) or
not present (0) in the byte (bit 0 for 3.84 Mcps TDD, bits 0 and 1 for 7.68
Mcps TDD) following the _New IE Flags_ IE. Bits 1 through 6 of New IE Flags in
RACH DATA FRAME shall be set to 0. Field length of _Spare Extension_ IE in
RACH DATA FRAME is 0-30 octets.]
[1.28Mcps TDD - Bit 0 of New IE Flags in RACH DATA FRAME indicates if _Cell
Portion LCR_ IE is present (1) or not present (0)
[1.28Mcps TDD -- Bits 1 through 6 of New IE Flags in RACH DATA FRAME shall be
set to 0.]
[1.28Mcps TDD -- Field length of Spare Extension IE in RACH DATA FRAME is 0-30
octets.]
### 6.2.2 FACH Channels
Figure 10: FACH DATA FRAME structure
### 6.2.3 USCH Channels [TDD]
Figure 11: USCH DATA FRAME structure
### 6.2.4 DSCH Channels [TDD]
Figure 12: DSCH DATA FRAME structure
### 6.2.4A HS-DSCH Channels
Two types of HS-DSCH DATA FRAME exist for the HS-DSCH data transfer, i.e. HS-
DSCH DATA FRAME TYPE 1 and HS-DSCH DATA FRAME TYPE 2.
Figure 12A: HS-DSCH DATA TYPE 1 FRAME structure
Bit 0 of New IE Flags in HS-DSCH DATA FRAME TYPE 1 indicates if a DRT is
present (1) or not (0) in the 2 octets following the _New IE Flags_ IE. Bits 1
through 6 of New IE Flags in HS-DSCH DATA FRAME TYPE 1 shall be set to 0.
Field length of _Spare Extension_ IE in HS-DSCH DATA FRAME TYPE 1 is 0-29
octets.
Figure 12B: HS-DSCH DATA FRAME TYPE 2 structure
### 6.2.4B E-DCH for CELL_FACH and Idle Channels [FDD and 1.28Mcps TDD]
The structure of the E-DCH DATA FRAME is shown in Figure 12C. This frame
structure is used for carrying MAC-is PDUs in Cell_FACH and Idle state (TS
25.321 [9]) for one UE.
Figure 12C: E-DCH DATA FRAME structure
For the description of the fields see subclause 6.2.5.
The _Payload CRC_ IE is optional in frames that contain a Payload, i.e. the
whole 2 bytes field may or may not be present in the frame structure (this is
defined at the setup of the transport bearer). The _Payload CRC_ IE may only
be present if the E-DCH data frame contains payload.
### 6.2.5 Coding of Information Elements in DATA FRAMEs
#### 6.2.5.1 Header CRC
**Description:** Cyclic Redundancy Checksum calculated on the header of a data
frame with polynomial X\^7+X\^6+X\^2+1 for the 7 bit header CRC [FDD and
1.28Mcps TDD - and X\^11+X\^9+X\^8+ X\^2+X+1 for the 11 bit header CRC]. The
CRC calculation shall cover all bits in the header, starting from bit 0 in the
first byte (FT field) up to the end of the header.
**Value range:** {0-127} [FDD and 1.28Mcps TDD -- , {0..2047} for E-DCH DATA
FRAME].
**Field length:** 7 bits [FDD and 1.28Mcps TDD - , 11 bits for E-DCH DATA
FRAME].
#### 6.2.5.2 Frame Type (FT)
**Description:** Describes if it is a control frame or a data frame.
**Value range:** {0=data, 1=control}.
**Field Length:** 1 bit.
#### 6.2.5.3 DRNTI
**Description:** Identifies the UE in the DRNC.
**Value range:** {0-1048575}.
**Field length:** 20 bits.
#### 6.2.5.4 S-RNTI
**Description:** S-RNTI is defined in TS 25.401 [5]. S-RNTI is used in UL
control frames [FDD and 1.28Mcps TDD - and E-DCH data frames] to identify the
UE context in the SRNC.
**Value range:** {0-1048575}.
**Field length:** 20 bits.
#### 6.2.5.5 UE-ID Type Indicator (UE-ID Type)
**Description:** Indicates the UE Identifier Type to be included by MAC-c/sh
in the MAC header.
**Value range:** {0=U-RNTI, 1=C-RNTI}.
**Field Length:** 1 bit.
#### 6.2.5.6 S-CCPCH Indicator (S-CI)
Void.
#### 6.2.5.7 Common Transport Channel Priority Indicator (CmCH-PI)
**Description:** CmCH-PI is the relative priority of the data frame and the
SDUs included.
**Value range:** {0-15, where 0=lowest priority, 15=highest priority}.
**Field length:** 4 bits.
#### 6.2.5.8 MAC-c/sh SDU Length
**Description:** The value of that field indicates the length of every
MAC-c/sh SDU in the payload of the [TDD - DSCH, USCH and] FACH DATA FRAME in
number of bits.
**Value range:** {0-5000}.
**Field Length:** 13 bits.
#### 6.2.5.9 NumOfSDU
**Description:** Indicates the number of MAC-c/sh SDUs in the payload.
**Value range:** {1-255}.
**Field Length:** 8 bits.
#### 6.2.5.10 Propagation delay [FDD]
**Description:** One-way radio interface delay as measured during RACH access.
If the measured value exceeds the range of this information element, the
information element shall be set to its maximum value, and the _Ext
Propagation Delay_ IE shall be used to represent the measured value, see
subclause 6.2.5.10A.
**Value range:** {0 - 765 chips}.
**Granularity:** 3 chips.
**Field length:** 8 bits.
#### 6.2.5.10A Ext Propagation Delay [FDD]
**Description:** One-way radio interface delay as measured during RACH access,
extended value part. This IE shall be present only if the range of the
_Propagation Delay_ IE is insufficient to represent the measured value.
**Value range: {0** \- 3069 chips}.
**Granularity:** 3 chips.
**Field length:** 10 bits.
#### 6.2.5.11 Rx Timing Deviation [3.84Mcps TDD]
**Description:** Measured Rx Timing Deviation as a basis for timing advance.
**Value range:** {-1024, ..., +1023} chips
{N*4 - 256} chips ≤ RxTiming Deviation \ With N = 0, 1, ...,127
{(N-128)*4 - 1024} chips ≤ Rx Timing Deviation \ With N = 128, 129, ...,319
{N*4 - 1024} chips ≤ Rx Timing Deviation \ With N = 320, 321, ...,511
**Granularity:** 4 chips.
**Field length:** 9 bits. The least significant 8 bits are contained in the RX
timing deviation field and the most significant bit is contained in the RX
timing deviation (continuation) field.
#### 6.2.5.11A Received SYNC UL Timing Deviation [1.28Mcps TDD]
**Description:** Measured Received SYNC UL Timing Deviation as a basis for
propagation delay.
**Value range:** {0, ..., +255} chips
**Granularity:** 1 chip.
**Field length:** 8 bits.
#### 6.2.5.11B Rx Timing Deviation [7.68Mcps TDD]
**Description:** Measured Rx Timing Deviation as a basis for timing advance.
**Value range:** {-2056, ..., +2055} chips
{N*4 - 2056 } chips ≤ RxTiming Deviation \0) received over the Uu (TS 25.321 [9]).
**Field length:** variable; length of _MAC-is PDU descriptor_ in octets = 2 *
number of MAC-is SDU contained in the corresponding MAC-is PDU as described in
TS 25.321 [9].
#### 6.2.5.42 eDRX Indication [FDD]
**Description:** Indicates whether the UE in Cell_FACH state supports Enhanced
UE DRX or not.
**Value range:** {0 = Enhanced UE DRX not supported, 1= Enhanced UE DRX
supported}.
**Field length:** 1 bit.
#### 6.2.5.43 Cell Portion LCR ID [1.28Mcps TDD]
**Description:** Cell Portion LCR ID indicates the cell portion with best
received quality during RACH access. Cell Portion LCR ID is configured by O&M.
**Value range:** {0-255}.
**Field Length:** 8 bits.
#### 6.2.5.44 TS0 Indication [1.28Mcps TDD]
**Description:** Indicates whether the UE supports TS0 enhancement or not.
**Value range:** {0 = Enhanced TS0 not supported, 1= Enhanced TS0 supported}.
**Field length** : 1 bit.
#### 6.2.5.45 CPC Recovery(CPC Recov) [FDD]
**Description** : Describes if UE is CPC non-uniform related to HS-SCCH order
and CPC recovery is needed in the serving DRNS. It indicates that the dynamic
DTX/DRX (de)activation using HS-SCCH order is needed.
**Value range** : {0=No Recovery, 1=Recovery}.
**Field Length** : 1 bit.
Note: This is not applicable when HS-SCCH order is not used.
## 6.3 Control Frame structure
### 6.3.1 Introduction
Control Frames are used to transport control information between SRNC and
DRNC.
Figure 13 defines the Control Frame structure for common transport channels.
Figure 13: Iur Common Transport Channel Control Frame Format
The _Control Frame Type_ IE defines the type of the control frames.
The length of the payload is variable accordingly to the control frame type.
The structure of the header and the payload of the control frames is defined
in the following subclauses.
### 6.3.2 Header structure of the control frames
#### 6.3.2.1 Control frame CRC
**Description:** Cyclic Redundancy Checksum calculated on a control frame with
polynomial X\^7+X\^6+X\^2+1. The CRC calculation shall cover all bits in the
control frame, starting from bit 0 in the first byte (FT field) up to the end
of the control frame.
**Value range:** {0-127}.
**Field length:** 7 bits.
#### 6.3.2.2 Frame type (FT)
Refer to subclause 6.2.5.2.
#### 6.3.2.3 Control Frame Type
**Description:** Indicates the type of the control information (information
elements and length) contained in the payload (=type of control frame).
**Value:** values of the _Control Frame Type_ IE parameter are defined in the
table 1.
Table 1: Control Frame Type
* * *
Type of control frame Value FACH Flow Control 0000 0010 FACH Capacity Request
0000 0011 DSCH Capacity Request 0000 0100 DSCH Capacity Allocation 0000 0101
DL NODE SYNCHRONISATION 0000 0110 UL NODE SYNCHRONISATION 0000 0111 HS-DSCH
Capacity Request 0000 1010 HS-DSCH Capacity Allocation TYPE 1 0000 1011 HS-
DSCH Capacity Allocation TYPE 2 0000 1100 HS-DSCH UL Synchronization
Establishment Failure (1.28Mcps TDD only) 0000 1101
* * *
### 6.3.3 Payload structure and information elements
#### 6.3.3.1 FACH FLOW CONTROL
Figure 14 shows the payload structure when the control frame is used for the
above mentioned purpose. This control information is sent in the UL only.
Figure 14: FACH FLOW CONTROL payload structure
##### 6.3.3.1.1 S-RNTI
Refer to subclause 6.2.5.4.
##### 6.3.3.1.2 Common Transport Channel Priority Indicator (CmCH-PI)
Refer to subclause 6.2.5.7.
##### 6.3.3.1.3 Credits
**Description:** The _Credits_ IE indicates the number of MAC-c/sh SDUs that a
user may transmit.
**Value range:** {0-255, where 0=stop transmission, 255=unlimited}.
**Field length:** 8 bits.
##### 6.3.3.1.4 Spare Extension
**Description** : Indicates the location where new IEs can in the future be
added in a backward compatible way.
**Field length** : 0-32 octets.
#### 6.3.3.2 DSCH CAPACITY REQUEST [TDD]
Figure 15: CAPACITY REQUEST payload structure
DSCH Capacity Request is sent for each priority group to indicate the user
buffer size. The control frame is sent by the DSCH CAPACITY REQUEST is sent
for each priority group to indicate the user buffer size. The control frame is
sent by the SRNC when the SRNC considers the user buffer status needs an
increased buffer reporting frequency. This may be sent to signal an event,
such as, data arrival or user-buffer discard. This control frame is used to
improve user-buffer reporting above the level produced by the user-buffer
reporting associated with the DSCH DATA FRAMEs.
##### 6.3.3.2.1 Common Transport Channel Priority Indicator (CmCH-PI)
Refer to subclause 6.2.5.7.
##### 6.3.3.2.2 User Buffer Size
Refer to subclause 6.2.5.12.
##### 6.3.3.2.3 Spare Extension
Refer to subclause 6.3.3.1.4.
#### 6.3.3.3 DSCH CAPACITY ALLOCATION [TDD]
Figure 16: CAPACITY ALLOCATION payload structure
The CAPACITY ALLOCATION Control Frame describes an allocation that the SRNC
may use. When the _Credits_ IE has a value of 0 it signifies that there is no
resources allocated for transmission and to thus stop transmission. When the
_Credits_ IE has a value of 255, it signifies unlimited capacity for
transmission of SDUs. When the _Repetition Period_ IE has a value of 0, it
signifies that the allocation (_Maximum MAC-c/sh SDU Length, Credits_ and
_Interval_ IEs) can be repeated without limit.
##### 6.3.3.3.1 Common Transport Channel Priority Indicator (CmCH-PI)
Refer to subclause 6.2.5.7.
##### 6.3.3.3.2 Maximum MAC-c/sh SDU Length
**Description:** The values indicated the maximum allowable SDU size. MAC-c/sh
SDU contains the C/T field of the MAC header followed by one RLC PDU.
**Field length:** See the value of the _MAC-c/sh SDU Length_ IE.
##### 6.3.3.3.3 Credits
**Description:** The _Credits_ IE indicates the number of MAC-c/sh SDUs that a
SRNC may transmit _during one Interval_ granted in the DSCH CAPACITY
ALLOCATION Control Frame.
**Value range:** Refer to subclause 6.3.3.1.3.
**Field Length:** Refer to subclause 6.3.3.1.3.
##### 6.3.3.3.4 Interval
**Description:** The value of this field indicates the time interval during
which the _Credits_ granted in the DSCH CAPACITY ALLOCATION Control Frame may
be used. The first interval starts immediately after reception of the DSCH
CAPACITY ALLOCATION control frame, subsequent intervals start immediately
after the previous interval has elapsed. This value is only applied to the
DSCH transport channel.
**Value range:** {0-2550 ms}. Value 0 shall be interpreted that none of the
credits shall be used.
**Granularity:** 10ms.
**Field Length:** 8 bits.
##### 6.3.3.3.5 Repetition Period
**Description:** The value of this field indicates the number of subsequent
intervals that the _Credits_ IE granted in the DSCH CAPACITY ALLOCATION
Control Frame may be used. These values represent an integer number of
Intervals (see subclause 6.3.3.3.4). This field is only applied to the DSCH
transport channel.
**Value range:** {0-255, where 0= unlimited repetition period}.
**Field Length:** 8 bits.
##### 6.3.3.3.6 Spare Extension
Refer to subclause 6.3.3.1.4.
#### 6.3.3.4 FACH CAPACITY REQUEST
Figure 17 shows the payload structure when the control frame is used for the
above mentioned purpose. This control information is sent in the DL only.
Figure 17: FACH CAPACITY REQUEST payload structure
##### 6.3.3.4.1 D-RNTI
Refer to subclause 6.2.5.3.
##### 6.3.3.4.2 Common Transport Channel Priority Indicator (CmCH-PI)
Refer to subclause 6.2.5.7.
##### 6.3.3.4.3 User Buffer Size
Refer to subclause 6.2.5.12.
##### 6.3.3.4.4 Spare extension
Refer to subclause 6.3.3.1.4.
#### 6.3.3.5 HS-DSCH CAPACITY REQUEST
Figure 18: CAPACITY REQUEST payload structure
The HS-DSCH CAPACITY REQUEST control frame is sent for each priority group to
indicate the user buffer size. The control frame is sent by the SRNC when the
SRNC considers the user buffer status needs an increased buffer reporting
frequency. This may be sent to signal an event, such as, data arrival or user-
buffer discard. This control frame is used to improve user-buffer reporting
above the level produced by the user-buffer reporting associated with the HS-
DSCH DATA FRAMEs (TYPE 1 or TYPE 2).
[FDD and 1.28Mcps TDD - Bit 0 of New IE Flags in HS-DSCH CAPACITY REQUEST
indicates if a DRNTI is present (1) or not (0) in the 3 octets following the
_New IE Flags_ IE. Bits 1 through 6 of New IE Flags in HS-DSCH CAPACITY
REQUEST shall be set to 0. Field length of _Spare Extension_ IE in HS-DSCH
CAPACITY REQUEST is 0-28 octets.]
##### 6.3.3.5.1 Common Transport Channel Priority Indicator (CmCH-PI)
**Description:** CmCH-PI, configured via the Scheduling Priority Indicator in
RNSAP (TS 25.423 [8]), is the relative priority of the data frame and the SDUs
included.
**Value range:** {0-15, where 0=lowest priority, 15=highest priority}.
**Field length:** 4 bits.
##### 6.3.3.5.2 User Buffer Size
Refer to subclause 6.2.5.12.
##### 6.3.3.5.3 Spare Extension
Refer to subclause 6.3.3.1.4.
##### 6.3.3.5.4 DRNTI [FDD]
Refer to subclause 6.2.5.3.
#### 6.3.3.6 HS-DSCH CAPACITY ALLOCATION
Two types of HS-DSCH CAPACITY ALLOCATION Control Frames exist for the HS-DSCH
capacity allocation, i.e. HS-DSCH CAPACITY ALLOCATION TYPE 1 Control Frame and
HS-DSCH CAPACITY ALLOCATION TYPE 2 Control Frame.
Figure 19: CAPACITY ALLOCATION TYPE 1 payload structure
The CAPACITY ALLOCATION TYPE 1 Control Frame describes an allocation that the
SRNC may use. When the _HS-DSCH Credits_ IE has a value of 0 it signifies that
there is no resources allocated for transmission and to thus stop
transmission. When the _HS-DSCH Credits_ IE has a value of 2047, it signifies
unlimited capacity for transmission of PDUs. When the _HS-DSCH Repetition
Period_ IE has a value of 0, it signifies that the allocation (_Maximum MAC-d
PDU Length, HS-DSCH Credits_ and _HS-DSCH Interval_ IEs) can be repeated
without limit. In addition to this the CAPACITY ALLOCATION TYPE 1 Control
Frame may inform the SRNC about the detection of congestion in the DL
transport network layer with the _Congestion Status_ Bits.
Figure 20: CAPACITY ALLOCATION TYPE 2 payload structure
The CAPACITY ALLOCATION TYPE 2 Control Frame describes an allocation that the
SRNC may use. When the _HS-DSCH Credits_ IE has a value of 0 it signifies that
there is no resources allocated for transmission and to thus stop
transmission. When the _HS-DSCH Credits_ IE has a value of 65535, it signifies
unlimited capacity for transmission of PDUs. When the _HS-DSCH Repetition
Period_ IE has a value of 0, it signifies that the allocation (_Maximum MAC-d
PDU Length Type 2, HS-DSCH Credits_ and _HS-DSCH Interval_ IEs) can be
repeated without limit. In addition to this the CAPACITY ALLOCATION TYPE 2
Control Frame may inform the SRNC about the detection of congestion in the DL
transport network layer with the _Congestion Status_ Bits.
##### 6.3.3.6.1 Common Transport Channel Priority Indicator (CmCH-PI)
Refer to subclause 6.2.5.7.
##### 6.3.3.6.2 Maximum MAC-d PDU Length
**Description:** The _Maximum MAC-d PDU Length_ IE is used in HS-DSCH CAPACITY
ALLOCATION TYPE 1 Control Frame. The value indicates the maximum allowable PDU
size among the MAC-d PDU sizes configured via RNSAP (TS 25.423 [8]).
**Value range:** Refer to subclause 6.2.5.16.
**Field length:** Refer to subclause 6.2.5.16.
##### 6.3.3.6.3 HS-DSCH Credits
**Description:** The _HS-DSCH Credits_ IE is used in HS-DSCH CAPACITY
ALLOCATION (TYPE 1 and TYPE 2) Control Frame. It is used to indicate the
granted amount of MAC-d PDU data that a SRNC may transmit during one HS-DSCH
Interval.
In case of HS-DSCH CAPACITY ALLOCATION TYPE 1 Control Frame, it indicates the
number of MAC-d PDU that a SRNC may transmit _during one HS-DSCH Interval_
granted in the HS-DSCH CAPACITY ALLOCATION TYPE 1 Control Frame.
In case of HS-DSCH CAPACITY ALLOCATION TYPE 2 Control Frame, the granted
amount of MAC-d PDU data in octets is obtained by multiplying the maximum
MAC-d PDU length (indicated by the _Maximum_ _MAC-d PDU Length Type 2_ IE)
with the number of MAC-d PDUs (indicated by the _HS-DSCH Credits_ IE).
**Value range:** {0-2047, where 0=stop transmission, 2047=unlimited} in case
of HS-DSCH CAPACITY ALLOCATION TYPE 1 Control Frame, {0-65535, where 0=stop
transmission, 65535=unlimited} in case of HS-DSCH CAPACITY ALLOCATION TYPE 2
Control Frame.
**Field length:** 11 bits in case of HS-DSCH CAPACITY ALLOCATION TYPE 1
Control Frame, 16 bits in case of HS-DSCH CAPACITY ALLOCATION TYPE 2 Control
Frame.
##### 6.3.3.6.4 HS-DSCH Interval
**Description:** The value of this field indicates the time interval during
which the _HS-DSCH Credits_ IE granted in the HS-DSCH CAPACITY ALLOCATION
(TYPE 1 or TYPE 2) Control Frame may be used. The first interval starts
immediately after reception of the HS-DSCH CAPACITY ALLOCATION (TYPE 1 or TYPE
2) control frame, subsequent intervals start immediately after the previous
interval has elapsed. This value is only applied to the HS-DSCH transport
channel.
**Value range:** {0-2550 ms}. Value 0 shall be interpreted that none of the
credits shall be used.
**Granularity:** 10ms.
**Field Length:** 8 bits.
##### 6.3.3.6.5 HS-DSCH Repetition Period
**Description:** The value of this field indicates the number of subsequent
intervals that the _HS-DSCH Credits_ IE granted in the HS-DSCH CAPACITY
ALLOCATION (TYPE 1 or TYPE 2) Control Frame may be used. These values
represent an integer number of Intervals (see subclause 6.3.3.6.4). This field
is only applied to the HS-DSCH transport channel.
**Value range:** {0-255, where 0= unlimited repetition period}.
**Field Length:** 8 bits.
##### 6.3.3.6.8 Spare Extension
Refer to subclause 6.3.3.1.4.
##### 6.3.3.6.9 Congestion Status
**Description:** The _Congestion Status_ Bits are used by the DRNC to indicate
a congestion status received. The DRNC provides the congestion status in HS-
DSCH CAPACITY ALLOCATION (TYPE 1 or TYPE 2) Control Frame when it has been
received towards the SRNC.
**Value range:**
0 No TNL Congestion
1 Reserved for future use
2 TNL Congestion -- detected by delay build-up
3 TNL Congestion -- detected by frame loss
**Field Length:** 2 bits.
##### 6.3.3.6.10 SRNTI Indicator [FDD and 1.28Mcps TDD]
**Description:** Indicates whether S-RNTI is present.
**Value range:** {0 = S-RNTI not present, 1= S-RNTI present}.
**Field length:** 1 bit.
##### 6.3.3.6.11 S-RNTI [FDD and 1.28Mcps TDD]
Refer to subclause 6.2.5.4.
##### 6.3.3.6.12 Maximum MAC-d PDU Length Type 2
**Description:** The _Maximum MAC-d PDU Length Type 2_ IE is used in HS-DSCH
CAPACITY ALLOCATION TYPE 2 Control Frame. The value is a factor in the granted
amount of MAC-d PDU data that a SRNC may transmit during one HS-DSCH Interval.
The amount of MAC-d PDU data in octets is obtained by multiplying the MACd PDU
length (indicated by the _Maximum MAC-d PDU Length Type 2_ IE) with the number
of MAC-d PDUs (indcated by the HS-DSCH Credits IE).
**Value range:** {0-1505}, 0 -- not used.
**Field length:** 11 bits.
#### 6.3.3.7 DL NODE SYNCHRONISATION
##### 6.3.3.7.1 Payload structure
Figure 21 shows the structure of the payload for the DL NODE SYNCHRONISATION
control frame.
Figure 21: Structure of the payload for the DL NODE SYNCHRONISATION control
frame
##### 6.3.3.7.2 T1
**Description:** RNC specific frame number (RFN) that indicates the time when
RNC sends the frame through the SAP to the transport layer.
**Value range:** {0-40959.875 ms}.
**Field length:** 24 bits.
##### 6.3.3.7.3 Spare Extension
The _Spare Extension_ IE is described in subclause 6.3.3.1.4.
#### 6.3.3.8 UL NODE SYNCHRONISATION
##### 6.3.3.8.1 Payload structure
The payload of the UL NODE SYNCHRONISATION control frames is shown in figure
22.
Figure 22: Structure of the payload for UL NODE SYNCHRONISATION control frame
##### 6.3.3.8.2 T1
**Description:** T1 timer is extracted from the correspondent DL NODE
SYNCHRONISATION control frame.
**Value range:** {0-40959.875 ms}.
**Granularity:** 0.125 ms.
**Field length:** 24 bits.
##### 6.3.3.8.3 T2
**Description:** Node B specific frame number (BFN) that indicates the time
when Node B received the correspondent DL NODE SYNCHRONISATION control frame
through the SAP from the transport layer.
**Value range:** {0-40959.875 ms}.
**Granularity:** 0.125 ms.
**Field length:** 24 bits.
##### 6.3.3.8.4 T3
**Description:** Node B specific frame number (BFN) that indicates the time
when Node B sends the frame through the SAP to the transport layer.
**Value range:** {0-40959.875 ms}.
**Granularity:** 0.125 ms.
**Field length:** 24 bits.
##### 6.3.3.8.5 Spare Extension
The _Spare Extension_ IE is described in subclause 6.3.3.1.4.
#### 6.3.3.9 HS-DSCH UL SYNCHRONIZATION ESTABLISHMENT FAILURE [1.28Mcps TDD]
##### 6.3.3.9.1 Payload structure
The payload of the HS-DSCH UL Synchronization Establishment Failure control
frames is shown in figure 23.
Figure 23: HS-DSCH UL SYNCHRONIZATION ESTABLISHMENT FAILURE payload structure
##### 6.3.3.9.2 S-RNTI
Refer to subclause 6.2.5.4.
# 7 Handling of Unknown, Unforeseen and Erroneous Protocol Data
## 7.1 General
A Frame Protocol frame with an unknown IE or an illegal IE value shall be
ignored.
#