# Foreword
This Technical Report has been produced by the 3^rd^ Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
\
Path-loss technologies cover a broad scope of specific location technologies,
including: RSSI Trilateration technologies, certain Enhanced Cell-ID
technologies, and RF pattern matching technologies. For the purposes of this
Study Item, individual technology groups to be evaluated will be treated
independently as Annexes to the TR.
In this TR, Annex.A should:
\- Describe pattern matching and outline it\'s benefits and challenges.
\- Illustrate the required messaging to support RF pattern matching
technologies, as well as the projected performance improvements associated
with additional messaging/measurement support.
\- Confirm the performance capability of RF pattern matching Technology on the
UMTS air-interface, over all environments. Both in terms of accuracy and
location result latency:
\- Dense Urban
\- In-Building
\- Rural
\- Illustrate the Standardized architecture for RF pattern matching
technologies as related to the UMTS and future air interfaces.
\- Provide an outline of anticipated standardization requirements for improved
performance and interoperability of RF pattern matching technologies.
\- Provide a conclusion based on the information contained herein and a
recommendation to the 3GPP regarding standardization of RF pattern matching
Technologies within the RAN.
# 2 References
[1] Weiss, A., \"On The Accuracy of A Cellular Location System Based on RSS
Measurements,\" _IEEE Transactions on Vehicular Technology_ , vol. 52, pp.
1508 -- 1518, Nov 2003.
[2] Catovic, A. and Sahinoglu, Z., \"The Cramer--Rao Bounds of Hybrid TOA/RSS
and TDOA/RSS Location Estimation Schemes,\" _IEEE Communications Letters_ ,
vol. 8, pp. 626 -- 8, Oct 2004.
[3] 3GPP TR 25.942: \" Universal Mobile Telecommunications System (UMTS);
**Radio Frequency (RF) system scenarios**
[4] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[5] 3GPP TS 25.331: \"Radio Resource Control (RRC); Protocol specification\".
[6] 3GPP TS 25.453: \"UTRAN Iupc interface Positioning Calculation Application
Part (PCAP) signalling\".
[7] 3GPP TS 25.215: \"Physical layer; Measurements (FDD)\".
# 3 Definitions, symbols and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [4] and the following apply. A term defined in the present document
takes precedence over the definition of the same term, if any, in TR 21.905
[4].
## 3.2 Symbols
For the purposes of the present document, the following symbols apply:
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
# 4 Overview
\
Performance in field deployments and trials of Path-loss technologies
indicates potential benefits, both in terms of location accuracy and latency,
in including some of these technologies in the Standards. Individual Path-loss
technologies will be evaluated thoroughly and objectively in this TR to assess
which, if any, of these are sufficiently promising so as to justify further
consideration by the 3GPP.
# 5 Feasibility of path-loss technologies for location on UMTS
## 5.1 RF pattern matching
\
pattern matching technologies represent a family of Path Loss based
technologies that rely on matching the RF environment (as experienced by the
UE) to the known characteristics of the larger RF System in which the UE is
operating. Information from the UE, including measurements of neighbour cell
signal strengths, time delay and other network parameters form the basis of
the RF environment to be compared to the established System RF Database. The
intent of this approach is to mitigate the negative impacts of anomalies
within the RF environment that challenge the accuracy of trilateration
technologies (e.g. multipath and reflection).
The RF pattern matching positioning method is based on measurements made by
the UE and Node B. The essential measurement set required for this method is
currently defined in [25.215] and necessary for the basic mobility
functionality and hence this method will work with existing mobiles without
any modification.
# 6 Evaluated performance of path-loss technologies on UMTS
## 6.1 General
\
\- RF pattern matching provides a significant improvement in performance to
Cell-ID with RTT
\- Average simulated improvement was 47.3%
\- Highest simulated improvement was 259%
## 6.2 RF pattern matching technologies on UMTS
See Annex A.6.
# 7 Network Architecture for Path-loss technologies on UMTS
## 7.1 RF pattern matching technologies on UMTS
\
\- Architecture shown is the currently approved 3GPP LCS architecture (no
architecture changes are needed for RF pattern matching)>
Figure A.5.1: Overlay Architecture for RF pattern matching
# 8 Summary comparison of path-loss technologies with currently standardized
location technologies on UMTS
Refer to Clauses A.3 and 10.1.
# 9 Anticipated requirements for the standardization of path-loss technologies
in 3GPP
## 9.1 RF pattern matching technologies on UMTS
\
### 9.1.1 Modifications to TS 25.331 [5] (RRC Protocol Specification) and TS
25.453 [6] include:
The changes anticipated for this specification include the definition/addition
of RF pattern matching to the UE Positioning description section (8.6.7.19)
and the inclusion of RF pattern matching in the defined UE positioning
procedures. Additionally, a PCAP group for \"RF pattern matching\" will be
required in TS 25.453.
### 9.1.2 Anticipated Change Requests
\- Inter-RAT
The ability to leverage Inter-RAT measurements in an overlay network will
provide significant potential improvements in location accuracy for RF pattern
matching. It is anticipated that these measurements will be requested as an
optional parameter (at least for use in emergency service locations).
\- IPDL
IPDL offers similar advantages to RF pattern matching to those that it gives
to other location technologies (e.g. OTDOA). To the extent that this
capability is pursued for those technologies, it is intended that it will be
used to benefit RF pattern matching as well.
\- Absolute Ec (Sector TX Power)
As RF pattern matching is a path-loss, based location technology, absolute Ec
will allow for better definition of the local UE environment and improved
location accuracy. It is assumed that this measurement will be requested in
the UE positioning report for RF pattern matching.
\- Round Trip Time (RTT)
Given the dynamic power management scenarios that are being used in the UTRAN,
The measure of RTT has good potential to improve the accuracy of any path-loss
based location technology. Access to RTT as an optional parameter has great
benefit to RF pattern matching, as well as ECID and should be and it is
anticipated that this measure will be requested as an optional parameter.
# 10 Conclusions
\
## 10.1 RF pattern matching technologies
This section is reiterated in Annex A.8 and provides detailed information on
the potential benefits, as well as the implications, of the inclusion of RF
pattern matching in the UTRAN. As a result of the evaluation contained herein,
it can be shown that:
\- RF pattern matching provides a significant improvement in performance to
Cell-ID with RTT
o Average simulated improvement was 47.3%
o Highest simulated improvement was 259%
\- RF pattern matching operates with limited impact on the network or UE
o No network hardware requirements
o No UE modifications
\- Anticipated Changes have benefit for other location methods
o IPDL -- Also needed for OTDOA
o RTT -- Also benefits Cell-ID, OTDOA and UTDOA
There are growing market segments for location services that require both
location accuracy and user transparency (Government Surveillance and Lawful
Intercept); these services cannot be addressed with location technologies
which require UE support or modification (A-GPS, GNSS, OTDOA). Additionally,
Emergency Service applications require a level of location accuracy which has
not been met with Cell-ID and RTT. The potential benefits of RF pattern
matching and and the relative ease with which this location method can be
adopted in the UTRAN would indicate that it is appropriate that the technology
be included in the UTRAN in support of the services noted above, as well as
for cooperatve deployment with satellite-based systems (A-GPS, GNSS, etc.) in
support of \"Hybrid\" location technology for Location Based Services (LBS).
###### ## Annex A (Informative): RF pattern matching
# A.1 Overview
RF pattern matching uses an established database of the network\'s RF
characteristics and compares the RF parameters that are seen by the UE to this
database to determine the UE\'s location. One type of RF Pattern matching
technology (known as Wireless Location Signatures) has been widely deployed in
2G GSM networks in support of the US E-911 emergency services requirements.
That RF pattern matching gas performed successfully in 2G does not necessarily
imply good performance in 3G. However, as this technology is not affected by
channel bandwidth or most other differences in air interfaces, it is
reasonable to assume that this technology might present similar performance
characteristics in 3G UMTS. The primary goal on this annex will be to test
this assumption and to determine if this specific technology warrants further
allocation of time and resources in the 3GPP.
This Annex should:
\- Describe pattern matching and outline it\'s benefits and challenges.
\- Illustrate the required messaging to support RF pattern matching
technologies, as well as the projected performance improvements associated
with additional messaging/measurement support.
\- Confirm the performance capability of RF pattern matching Technology on the
UMTS air-interface, over all environments. Both in terms of accuracy and
location result latency:
o Dense Urban
o In-Building
o Rural
\- Illustrate the Standardized architecture for RF pattern matching
technologies as related to the UMTS and future air interfaces.
\- Provide an outline of anticipated standardization requirements for improved
performance and interoperability of RF pattern matching technologies.
\- Provide a conclusion based on the information contained herein and a
recommendation to the 3GPP regarding standardization of RF pattern matching
Technologies within the RAN.
# A.2 Feasibility of RF pattern matching technologies for location on UMTS
## A.2.1 General description of RF pattern matching technologies
Pattern matching technologies represent a family of Path Loss based
technologies that rely on matching the RF environment (as experienced by the
UE) to the known characteristics of the larger RF System in which the UE is
operating. Information from the UE, including measurements of neighbour cell
signal strengths, time delay and other network parameters form the basis of
the RF environment to be compared to the established System RF Database. The
intent of this approach is to mitigate the negative impacts of anomalies
within the RF environment that challenge the accuracy of trilateration
technologies (e.g. multipath and reflection).
### A.2.1.1 Data elements used in RF pattern matching location calculation
The RF pattern matching positioning method is based on measurements made by
the UE and Node B. The essential measurement set required for this method is
currently defined in [25.215] and necessary for the basic mobility
functionality and hence this method will work with existing mobiles without
any modification.
#### A.2.1.1.1 Data necessary for operation of RF pattern matching
The following intra-frequency signal strength measurements of the Common Pilot
Channel (CPICH RSCP ) for all measurable cells along with identifier of the
cells in terms of either just the UCIDs and/or the Primary Scrambling Code of
the CPICH is necessary for the RF pattern matching positioning method
##### A.2.1.1.1.1 Received Signal Code Power (RSCP) ([TS 25.215 [7] clause
5.1.1])
\- Received power on one code measured on the Common Pilot Channel (CPICH)
\- A downlink measurement, carried out by the UE
\- Can be obtained in idle mode and active mode
#### A.2.1.1.2 Data that would enhance the performance of RF pattern matching
One of the strengths of the pattern matching positioning method is that it is
straightforward to introduce new measurements and their corresponding
uncertainty into its structure, and assuming they convey some new information,
they will improve performance. The following measurements improve the
performance of the method:
##### A.2.1.1.2.1 PRACH Propagation delay ([25.215 [7] clause 5.2.10])
\- Propagation delay is defined as one-way propagation delay as measured
during PRACH access.
\- In principle, it is difference between the transmission time of AICH access
and the time of reception of the beginning (the first detected path, in time)
of the PRACH message from the UE at PRACH access slot ([25.215 clause
5.2.10]).
##### A.2.1.1.2.2 UTRA carrier Received Signal Strength (RSS) ([25.215 [7]
clause 5.1.3])
\- The received wide band power, including thermal noise and noise generated
in the receiver
\- RSSI describes the downlink interference level at the UE side
\- Measurable by the UE
\- Can be measured in active mode only
##### A.2.1.1.2.3 SFN-SFN observed time difference ([25.215 [7] clause 5.1.9])
\- Time Difference of System Frame Numbers (SFN) between Two cells
\- Measured in idle mode or active mode by the UE
##### A.2.1.1.2.4 Round Trip Time (RTT) ([25.215 [7] clause5.2.8])
\- Corresponds to the Timing Advance Parameter in GSM
\- Difference between The time of transmission of the beginning of a downlink
DPCH or F-DPCH frame to a UE and the time of reception of the beginning (the
first detected path, in time) of the corresponding uplink DPCCH frame from the
UE.
\- Measurements are possible on Downlink DPCH transmitted from NodeB and
Uplink DPDCH received in the same NodeB.
\- Measured in active mode only
##### A.2.1.1.2.5 UE Rx-Tx time difference ([25.215 [7] clause 5.1.10])
The difference in time between the UE uplink DPCCH frame transmission and the
first detected path (in time), of the downlink DPCH or F-DPCH frame from the
measured radio link.
Type 1 and Type 2 are defined. For Type 1, the reference Rx path shall be the
first detected path (in time) amongst the paths (from the measured radio link)
used in the demodulation process.
For Type 2, the reference Rx path shall be the first detected path (in time)
amongst all paths (from the measured radio link) detected by the UE.
In addition to these measurements, the following additional measurements
optionally supported by some networks can be used by the positioning method
\- Inter-RAT signal strength measurements ([25.331 section 14.3])
Inter-frequency measurements of the Common Pilot Channel (CPICH RSCP) for all
measurable cells.
### A.2.1.2 Air interface ramifications on RF pattern matching technologies
#### A.2.1.2.1 UMTS-specific impacts on RF pattern matching
RF pattern matching Technologies are passive technologies that depend on the
measurements made by the UE and the network as a regular part of their
operation. There are no physical-layer impacts from this technology and the
technology currently operates using existing messaging mechanisms. The
technology is a SAS-centric, network-based, location technology and messages
are routed to the SAS through the I~upc~ interface (see section A.5.1 for
implementation architecture).
#### A.2.1.2.2 Confirmation of UE neutrality with RF pattern matching
technologies
As RF pattern matching technologies are intended to operate with existing
defined network measurements. This technology group will be completely neutral
to the UE. The location method will operate with [all]{.underline} UE\'s,
inclusive of legacy terminals that do not support A-GPS, OTDOA, or other UE-
assisted or UE-based location technologies. No changes to the UE are required
for proper operation and performance of RF pattern matching.
# A.3 Evaluated performance of RF pattern matching technologies on UMTS
## A.3.1 Simulation methodology
### A.3.1.1 Overview
In the following sections, a simulation methodology is provided to evaluate
the location accuracy of RF pattern matching against a baseline of CELL-ID +
RTT. The simulation tool also provides information on the improvements that
can be achieved with the availability of RSCP measurements, in terms of
increased accuracy of a location estimate. It is suggested that the simulation
methodology and flows are used as the foundation of further study.
### A.3.1.2 Network model
The simulation uses the standard hexagonal distribution of cellular towers
shown in Figure A.3.1.2. Each tower is assumed to have the same number of
sectorized cells at the same angular orientations. The user may specify the
tower spacing, the number of cells per tower, the orientation of the alpha
cell, and the beamwidth of each antenna.
Figure A.3.1.2 - Network \'Configuration\'.
The simulation models both event-based and periodic reporting by the handset.
In terms of network and handset behaviour, the user may specify the maximum
number of cell in the active set, the minimum $\frac{E_{c}}{I_{0}}$ needed for
detection, the threshold for requesting addition to the active set, and the
fraction of total channel power contributed by traffic. For periodic
reporting, the user may also specify the length of the call and the time
interval between measurement reports.
### A.3.1.3 Location methods
The simulation models the accuracy of two general methods of calculating the
location of a handset in a UMTS network:
**\- CellID-RTT:** In this method, the network measures the round trip time
(RTT) for each cell in the active set. This measurement is used to calculate
the distance of the handset from the corresponding cell. The intersection of
these RTT circles is taken to be the location of the handset. If there is only
one cell in the active set, the estimate is taken to be the intersection of
the RTT circle with the antenna boresite.
**\- Pattern matching:** This method also uses the RTT measurements as
measures of the handset\'s distance from the cells in the active set. But in
addition, it compares the signal strengths for all reported cells (both active
and monitored) with a database of predicted signal strengths to derive
additional measures of the handset\'s location. The details of how the RTT and
RSCP measurements are combined vary from implementation to implementation.
Some implementations also use temporal processing to further refine the
location estimate when multiple measurement reports are available (either
because of multiple events or periodic reporting).
Models for the location accuracy of these two methods are given in the next
Section.
### A.3.1.4 Error models
The location accuracy models in this simulation are based on covariance
analysis, assuming that the general location systems can be modeled as the
solution to a nonlinear optimization problem. We assume that we have a vector
of measurements of the form:
where _x_ ~0~ is the true handset location and _v_ is a zero-mean Gaussian
error vector with covariance vector _R_. The location estimate is the argument
that minimizes:
In other words, the location estimate satisfies the nonlinear equation:
To calculate the location error, we linearize this equation about the true
handset location:
The error covariance associated with this estimate is then given by:
If the measurement error covariance is assumed to be diagonal, this error
covariance can be re-written as the inverse of a sum of outer products:
where σ _~i~_ is the standard deviation of the _i^th^_ measurement. To obtain
a scalar measure of the location error, we use:
In other words, the error sigma is the root sum square of the major and minor
axes of the covariance ellipse.
## A.3.2 CellID-RTT method
The CellID-RTT method uses each RTT measurement to calculate the distance from
the cell to the handset. Although RTT is actually reported in chips, the
simulation simply assumes that it is a direct distance measurement:
where _x~HS~_ is the handset location and _x~CELL~_ is the cell location. The
partial derivative of this measurement equation is:
which is a unit vector in the direction from the cell to the handset.
Nominally the RTT measurement has no sensitivity in the cross-range direction.
However, for a sectorized cell, the width of the antenna beam provides some
restrictions on the cross-range error. With this assumption, the simulation
uses:
as the contribution of one RTT measurement to the inverse of the location
error covariance, where _BW_ is the antenna beamwidth. This will result in an
uncertainty ellipse that is very narrow in the down-range direction and very
long (but not infinite) in the cross-range direction. The RTT measurement
sigma and the antenna beamwidth are user-specified simulation inputs.
## A.3.3 RF pattern matching method
In order to keep the simulation independent of any company\'s proprietary
algorithms, the simulation uses Hata models to represent the RSCP signature
models used by the pattern matching method. This model is given by:
where α is the pathloss exponent and
and where _x~HS~_ is the handset location, _x~CELL~_ is the cell location,
_FBR_ is the front-to-back ratio, θ _~HS~_ is the angle to the handset, and θ
_~CELL~_ is the angle of the antenna boresite (both angles measured positive
counterclockwise from the x-axis. After some tedious algebra, we find that:
Because of the possibility of an unknown bias between the handset signal
strength measurements and the predicted signal strengths, the simulation uses
a relative signal strength formulation for the RSCP measurements instead of an
absolute signal strength formulation. This approach is informationally
equivalent to assuming a common bias in an absolute signal strength
formulation, estimating that bias at every point, and substituting it back
into the original cost function. The simulation uses:
as the variance of the total RSCP error, where σ _~RSCP~_ represents the
measurement error and σ _~MDL~_ represents the signature modeling error.
The pattern matching method uses the same uncertainty contributions for RTT
measurements as the Cellid-RTT method, so that:
As a result, the CellID-RTT location error covariance forms an upper bound on
the pattern matching error covariance.
### A.3.3.1 Simulation tool inputs
Table A.3.3.1 -- Simulation tool inputs
* * *
Input Description tower_spacing distance between towers (m) cells_per_tower
number of cells on each tower azimuth azimuth of boresite of alpha sector on
tower (deg) sigrssi rssi uncertainty (measurement error and channel model
error) (dB) sigmdl rssi modeling error sigrtt rtt uncertainty (m) beamwidth
cell beamwidth (deg) rssiref reference signal strength at distance dref from
cell on cell boresite (dBm) dref reference distance (m) gamma pathloss
exponent (dB) fbr front-to-back ratio (dB) loading_factor fraction of
additional power created by traffic channels decode_threshold EcIo needed to
decode signal soft_handoff_threshold rssi below primary cell needed for
addition to active set (dB) max_active maximum number of cells in active set
numcaserssi number of rssi draws at each location numcasedet number of
detection order draws at each location sample_spacing distance between samples
(m)
* * *
### A.3.3.2 Detailed simulation flow
The simulation evaluates the location accuracy performance of the CellID-RTT
method and the pattern matching method on a uniform grid of points in the
evaluation region shown in Figure 1. The grid spacing is specified by the
user. At each evaluation point the simulation performs the following
calculations:
1) Determine the nominal RSCP value for each of the cells in the network using
the propagation model described in the Appendix. These nominal values
represent the RSCP signature model used by the pattern matching method.
2) For each cell, draw a random number from a Gaussian distribution and add it
to the nominal RSCP value for that cell to represent the true RSCP value for
the cell at that location. The standard deviation of this RSCP error is a
simulation input specified by the user. This step is performed a user-
specified number of times, and the following calculations are performed each
time:
a) Calculate the total channel power _I~o~_ , including the effect of traffic
at the evaluation point.
b) Determine which cells have enough _E~c~I~o~_ to be decoded by the handset.
If no cells can be decoded at this point, terminate this iteration because no
call can be made with this set of RSCP values.
c) Determine which cell is strongest and designate that cell as the serving
cell for this call. Restrict the list of other cells that are candidates for
handset reporting to those on the serving cell\'s Neighbor List that can be
decoded.
d) Determine which of the reporting candidates are within the soft handoff
threshold of the serving cell\'s RSCP. These cells are candidates for
inclusion in the active set.
e) For each cell that is a reporting candidate, draw a random number from a
uniform [0, 1] distribution. Sort the cells according to these random numbers.
This sorted list represents the order in which the handset detects cells on
its Neighbor List on this call. This step is performed a user-specified number
of times, and the following calculations are performed each time:
i) Take cells from this detection list in order until either all candidates
for the active set have been selected or the maximum number of active cells
has been reached, whichever comes first. The set of cells selected represents
the cells whose RSCP would be reported by the handset in event-driven
reporting. The network would calculate RTT for every cell is this set that was
a candidate for inclusion in the active set.
ii) For the set of cells reported on this call, calculate the location
accuracy for the CellID-RTT method and the pattern matching method using the
error models described in the Appendix.
The simulation saves the average location accuracy for the two methods for
each evaluation point. These values can be displayed geographically, as a CDF
(cumulative distribution function) curve, or as a set of summary statistics.
## A.3.4 Propagation models
#### A.3.4.1 Hata propagation model
Hata\'s well know model covers the frequency band between 150 MHz and 1000
MHz. It is formulated as
**Equation 1**
where
Restrictions on both model are:\ $h_{\text{base}}$: 30 to 200m\
$h_{\text{Mobile}}$: 1 to 10m\ D:1 to 20km
#### A.3.4.2 COST231 propagation model
COST 231 has extended Hata´s model to the frequency band between 1500 MHz and
2000 MHz. It is formulated as:
**Equation 2**
$L = \text{46}\text{.}3 + \text{33}\text{.}9\text{log}\frac{f}{\text{Mhz}} -
\text{13}\text{.}\text{82}\text{log}(\frac{h_{\text{BASE}}}{m}) -
a(h_{\text{Mobile}}) + (\text{44}\text{.}9 -
6\text{.}\text{55}\text{log}\frac{h_{\text{BASE}}}{m})\text{log}\frac{d}{\text{km}}
+ C_{m}$
where
and
$C_{m}$is 0 dB for medium sized city and suburban centers with medium tree
density or 3 dB for metropolitan centres.
## A.3.5 Cramer-Rao lower bound formulation
### A.3.5.1 RSS measurement model
For the RSS-based location method, the RSS database is built from a simple
propagation model, as shown in Equation 3. All control channels are predicted
in the database building phase. In the real-time location phase, another set
of measurements is made by the handset. Only _M_ channels are measured and
reported via the NMR. RSS measurements from these _M_ channels are used to
compare with RSS values in the database. The position of the closest match is
the location estimate. For a specified location
**z** = [_x_ , _y_]_^T^_ , a measurement on channel _i_ can be expressed as
**Equation 3**
where
c is a constant offset resulting from the RF properties and propagation path
z is location vector [_x_ , _y_]_^T^_
$P_{i}(z)$ is averaged power received at location z.
$e_{i}$ is measurement error and propagation variance
Because the $P_{R} = P_{T} + G_{R} + G_{T} - L + C_{\text{dB}}$
where
$P_{R}$ - power received by a handset (dBm)
_PT_ \- power transmitted by a sector (dBm)
_GR_ \- estimated measurement equipment antenna gain (dBi)
_GT_ \- estimated sector antenna gain (dBi)
_C_ dB - constant offset (dB)
We can separate the location related term and location unrelated term and
assign them to$P_{i}(z)$, the location related term, or the constant c, the
location unrelated term to have the following formula:
For the frequency band 150Mhz to 1000Mhz,
For the frequency band 1500Mhz to 2000Mhz,
Considering that one handset measures M channels from all surrounding base
stations in each
NMR, all measurements form a vector:
**Equation 4**
where
$\begin{matrix} \overrightarrow{m} & \overset{\Delta}{=}\left\lbrack
m1,m2,\ldots,m_{M} \right\rbrack & \text{Measurement\ of\ channel\ 1\
}\text{.}\text{.}\text{.}\text{\ M} \ c_{\text{m1}} & \overset{\Delta}{=}c &
\text{Common\ bias\ term\ for\ all\ observations} \ \overrightarrow{O} &
\overset{\Delta}{=}\lbrack 1,1,\text{.}\text{.}\text{.},1\rbrack^{T} &
\text{Observation\ vector,\ length\ M} \ \overrightarrow{P}(z) &
\overset{\Delta}{=}\lbrack
P_{1}(z),P_{2}(z),\text{.}\text{.}\text{.},P_{M}(z)\rbrack^{T} & \text{RSS\
in\ pattern\ database} \ \overrightarrow{e} & \overset{\Delta}{=}\lbrack
e_{1},e_{2},\text{.}\text{.}\text{.},e_{M}\rbrack^{T} & \text{Random\ Error\
term} \ \end{matrix}$
### A.3.5.2 RSS location algorithm -- relative signal strength
In RSS location algorithm, we assume perfect knowledge of the common bias term
of all observations$c_{\text{m1}}$. The bias is removed by subtracting a
constant from reported signal strength. The location decider is:
**Equation 5**
In practice, the common bias term of all observations is unknown and the bias
is different from handset to handset. Thus, the unknown bias must be estimated
from measurements using relative signal strength method as follow:
This is actually the same as if we use LMS method to estimate the bias
constant. As an analytical result, we use the following method to estimate the
unknown bias:
**Equation 6**
Inserting **Equation 6** back into **Equation 5** forms an expression of the
error term:
**Equation 7**
where
Therefore, the location decider is
**Equation 8**
### A.3.5.3 Derivation of the Fisher Information Matrix and Cramer Rao Lower
Bound for path loss measurement
The error vector, **e** , is a normally distributed multivariate random vector
with zero mean and a positive definite covariance matrix, **Ce**. The
conditional probability density function of the measurement is given by
**Equation 9**
Inserting Equation 8 into Equation 9 yields
**Equation 10**
The Fisher information matrix is simplified to.
Equation 11
Assume all errors are independent identically distributed (i.i.d), such as the
covariance matrix$C_{e} = \sigma^{2}(I)$, then
**Equation 12**
The Cramer-Rao lower bound is given by the inverse of the Fisher matrix
**Equation 13**
**Equation 14**
> where xi ,yi are location of the i-th base station,\ $K =
> (\text{44}\text{.}\text{9-6}\text{.}\text{55*log}(\text{hB}))\text{log}(e)$,\
> $\theta$ is the angle between [x~i~-x,y~i~-y] and [1,0]
### A.3.5.4 Derivation of Fisher Information Matrix for RTT measurement
When we have RTT measurement, we assume the error in the RTT measurement is
independent from the error in the RSS measurement. The derivation is similar
with that in derivation of FIM for path loss measurement.
**Equation 15**
Because each RTT measurement is measured regarding to the active cell, we can
define $\overset{\sim}{x} = x - x_{i}$where x\' have the same unit vector as
x, and $\overset{\sim}{y} = y - y_{i}$where y\' have the same unit vector as
y.
**Equation 16**
Where the $e_{\text{RTT} - \text{Error}}$ item is assume to be i.i.d random
variable with normal distribution. Therefore
**Equation 17**
$p(m|z) = \frac{1}{\left( 2\pi \right)^{\frac{M}{2}}\left\| C_{e}
\right\|^{\frac{1}{2}}}\text{exp}\left( -
\frac{1}{2}e_{{\text{RTT}_{\text{Error}}}^{T}}\left( C_{e} \right)^{-
1}e_{\text{RTT}_{\text{Error}}} \right)$\ where M is the number of available
RTT measurements
Because errors are i.i.d random variables, $C_{e} = \sigma_{1}^{2}(I)$
**Equation 18**
The Fisher information matrix is simplified after inserting **Equation 18**
into **Equation 11.**
**Equation 19**
> $\theta$ is the angle between vector [x-x~i~,y-y~i~] and vector [1,0]
This can also be thought of as the RTT measurement uncertainty has been split
in to x and y direction.
### A.3.5.5 Information matrix for RTT measurement from a directional sector
When the cell are sectored, there are another piece of information that the
cell should be in the direction of the main beam, which gives the following,
Figure A.3.5.5: Measurement from a directional sector
The uncertainty using the directional sector is given by $\sqrt{\left( x -
x_{i} \right)^{2} + \left( y - y_{i}
\right)^{2}}\text{*tan}(\frac{\text{beamwidth}}{2})$
Then we can also split this uncertainty into x and y direction by defining the
following equations:
### A.3.5.6 The Fisher Information Matrix and the CRLB for RTT measurement +
path loss measurement
When we have both Fisher Information Matrix from RTT measurement and Path Loss
measurement, we can form a new Fisher Information Matrix by sum them together
because we assume the measurement errors are independent between this two
types of measurement.
The CRLB is the inverse of the Fisher information matrix.
If we define the location variance of the estimator to be $\sigma_{d}^{2} =
\sigma_{x}^{2} + \sigma_{y}^{2}$.
The CRLB asserts that
Therefore we can link the base station locations, measurement errors in RSS,
number of NMRs with the accuracy of RSS pattern matching method. When the
Location Engine perform the best the accuracy of pattern matching should
approach the lower limit provided by the CRLB.
# A.5 Network architecture for RF pattern matching technologies on UMTS
## A.5.1 UMTS architecture for RF pattern matching technology
Figure A.5.1: Overlay architecture for RF pattern matching
RF pattern matching Technology is a network-based technology that is
implemented through a Stand-Alone SMLC (SAS), which can be a shared element in
a GSM/UMTS overlay network (as shown above). In this respect, the network
architecture needed to support RF Pattern matching is similar to that
currently envisioned for the support of UTDOA (although the technology itself
is software-based and does not require the hardware or independent backhaul
network that is needed for UTDOA). The architecture above represents a
control-plane implementation of RF pattern matching; it should be noted that
the technology has also been implemented in User-plane.
# A.6 Evaluated performance of RF pattern matching technologies on UMTS
The following scenarios, with associated cell spacings, building and terrain
assumptions, are to be evaluated in this set of simulations:
1 Dense Urban Simulation
a. Approximate cell spacing -- 500m
b. Buildings -- assume +20 story buildings with dense spacing
c. Terrain -- assume relatively small topographic diversity (flat terrain)
2 Suburban Simulation
a. Approximate cell spacing -- 2 to 3 km
b. Buildings -- assume >3 story buildings with moderate spacing (most
buildings should be 1 story)
d. Terrain -- assume moderate topographic diversity (normal terrain)
3 Rural Simulation
a. Approximate cell spacing -- 7 to 10 km
b. Buildings -- assume no buildings
c. Terrain -- assume moderate topographic diversity (normal terrain)UMTS
4 Mountain Simulation
a. Approximate cell spacing -- 3 to 7 km
b. Buildings -- assume no buildings
c. Terrain -- use terrain data for typical market
The simulation tool provides the following input parameters with associated
definitions:
Table A.6 -- Simulation tool inputs
* * *
Input Description tower_spacing distance between towers (m) cells_per_tower
number of cells on each tower azimuth azimuth of boresite of alpha sector on
tower (deg) sigrssi rssi uncertainty (measurement error and channel model
error) (dB) sigmdl rssi modeling error sigrtt rtt uncertainty (m) beamwidth
cell beamwidth (deg) rssiref reference signal strength at distance dref from
cell on cell boresite (dBm) dref reference distance (m) gamma pathloss
exponent (dB) fbr front-to-back ratio (dB) loading_factor fraction of
additional power created by traffic channels decode_threshold EcIo needed to
decode signal soft_handoff_threshold rssi below primary cell needed for
addition to active set (dB) max_active maximum number of cells in active set
numcaserssi number of rssi draws at each location numcasedet number of
detection order draws at each location sample_spacing distance between samples
(m)
* * *
Adjustment of these parameters (e.g. tower_spacing) allows the various
simulation evaluation cases to be modelled.
## A.6.1 RF pattern matching accuracy evaluation
### A.6.1.1 Simulation results for evaluation scenarios
#### A.6.1.1.1 Dense urban simulation
The following simulation parameters were used for the dense urban evaluation:
Table A.6.1.1.1 -- Dense urban simulation inputs
* * *
Input Parameter tower_spacing 500m cells_per_tower 3 azimuth 0 (deg) sigrssi 1
(dB) sigmdl 6 (dB) sigrtt 50 (m) beamwidth 120 (deg) rssiref -68.7 (dBm) dref
100m gamma 3.57 (dB) fbr 30 (dB) loading_factor 0 decode_threshold -20 (dB)
soft_handoff_threshold 6(dB) max_active 3 numcaserssi 3 numcasedet 3
sample_spacing 10 (m)
* * *
noise floor = -127 dBm
The simulation results for the urban evaluation case comparing pattern
matching to Cell-ID/RTT are as follows.
{width="6.6875in" height="5.0152777777777775in"}Figure A.6.1.1.1. Position
error Cumulative Distribution Function (CDF) from simulations for dense urban
evaluation case comparing pattern matching versus Cell-ID/RTT.
Note from the simulation results in Figure A.6.1.2 that RF pattern matching
provides performance vs. Cell-ID/RTT of a factor of approximately (1.8X) and a
factor of approximately (1.64X) in the location errors at the 67^th^ and
95^th^ percentiles, respectively. These simulation results demonstrate
significant dense urban improvements from RF pattern matching compared to
Cell-ID/RTT.
#### A.6.1.2.1 Suburban simulation
The following simulation parameters were used for the suburban evaluation:
Table A.6.1.2.1 -- Suburban simulation inputs
* * *
Input Parameter tower_spacing 3000m cells_per_tower 3 azimuth 0 (deg) sigrssi
1 (dB) sigmdl 6 (dB) sigrtt 50 (m) beamwidth 120 (deg) rssiref -56.4 (dBm)
dref 100m gamma 3.57 (dB) fbr 30 (dB) loading_factor 0 decode_threshold -20
(dB) soft_handoff_threshold 6(dB) max_active 3 numcaserssi 3 numcasedet 3
sample_spacing 50 (m)
* * *
noise floor = -127 dBm
{width="6.6875in" height="5.0152777777777775in"}
Figure A.6.1.2.1 - Position error Cumulative Distribution Function (CDF) from
simulations for suburban evaluation case comparing pattern matching versus
Cell-ID/RTT.
Note from the simulation results in Figure A.6.1.3 that pattern matching
provides performance vs Cell-ID/RTT of a factor of approximately (1.77X) and a
factor of approximately (1.65X) in the location errors at the 67^th^ and
95^th^ percentiles, respectively. These simulation results demonstrate
significant suburban improvements from pattern matching compared to Cell-
ID/RTT.
#### A.6.1.2.2 Rural simulation
Table A.6.1.2.2 -- Rural simulation inputs
* * *
Input Parameter tower_spacing 10000m cells_per_tower 3 azimuth 0 (deg) sigrssi
1 (dB) sigmdl 6 (dB) sigrtt 50 (m) beamwidth 120 (deg) rssiref -36.2 (dBm)
dref 100m gamma 3.57 (dB) fbr 30 (dB) loading_factor 0 decode_threshold -20
(dB) soft_handoff_threshold 6(dB) max_active 3 Numcaserssi 3 Numcasedet 3
sample_spacing 100 (m)
* * *
noise floor = -127 dBm
Figure A.6.1.4 - Position error Cumulative Distribution Function (CDF) from
simulations for rural evaluation case comparing pattern matching versus Cell-
ID/RTT.
Note from the simulation results in Figure A.6.1.4 that pattern matching
provides performance vs Cell-ID/RTT of a factor of approximately (1.83X) and a
factor of approximately (1.58X) in the location errors at the 67^th^ and
95^th^ percentiles, respectively. These simulation results demonstrate
significant dense urban improvements from pattern matching compared to Cell-
ID/RTT.
#### A.6.1.2.3 Mountain simulation
Table A.6.1.2.3 -- Mountain simulation inputs
* * *
Input Parameter tower_spacing 5000m cells_per_tower 3 azimuth 0 (deg) sigrssi
3(dB) sigmdl 6 (dB) sigrtt 50 (m) beamwidth 120 (deg) rssiref -56.2 (dBm) dref
100m gamma 3.57 (dB) fbr 30 (dB) loading_factor 0 decode_threshold -20 (dB)
soft_handoff_threshold 6(dB) max_active 3 Numcaserssi 3 Numcasedet 3
sample_spacing 100 (m)
* * *
noise floor = -127 dBm
{width="6.6875in" height="5.0152777777777775in"}
Figure A.6.1.2.3 - Position error Cumulative Distribution Function (CDF) from
simulations for mountainous evaluation case comparing pattern matching versus
Cell-ID/RTT.
Note from the simulation results in Figure A.6.1.5 that pattern matching
provides improvements over Cell-ID/RTT of a factor of approximately (2.59X)
and a factor of approximately (1.56X) in the location errors at the 67^th^ and
95^th^ percentiles, respectively. These simulation results demonstrate
significant dense urban improvements from pattern matching compared to Cell-
ID/RTT.
### A.6.2.1 Additional independent simulations - TeleCommunication Systems
(TCS)
#### A.6.2.1.1 Overview
The results presented in this section were completed using the methodology
described in section A.3 of this TR. These results were obtained for the
various environments listed in the following section, in terms of site spacing
and system characteristics. TCS warrants the veracity of these results, based
on the model provided.
#### A.6.2.1.2 Simulation results
Table 6.2.1.2: TCS simulation parameters
* * *
Parameter Dense Urban Urban Suburban Rural Tower Spacing (m) 500 1000 3000
10000 Cells Per Tower 3 3 3 3 Azimuth of Alpha Sector 0 0 0 0 Sigma of RSSI
(dB) 4 4 4 4 Sigma of RSSI Model (dB) 6 6 6 6 Sigma of RTT (m) 70 70 50 50
Reference RSSI (dBm) -30 -30 -30 -30 Reference Distance (m) 100 100 100 100
P.L. Exponent 4 4 3.5 3.25 Front to Back Ratio 20 20 20 20 Loading Factor 0 0
0 0 Soft Handoff Factor (dB) 6 6 6 6 Decode Threshold (dB) -20 -20 -20 -20
Sample Spacing 10 20 20 60 Beam Width 120 120 120 120 Active Set Max Size 3 3
3 3 Number of RSSI Cases 3 3 3 3 Number of Det Case 3 3 3 3
* * *
Table 6.2.1.2.a: TCS results
* * *
                               Pathloss   CellID-RTT   Pathloss Improvement
Dense Urban 67^th^ % (m) 128 200 36% 95^th^ % (m) 176 265 34% Urban 67^th^ %
(m) 224 362 38% 95^th^ % (m) 334 509 34% Suburban 67^th^ % (m) 573 934 39%
95^th^ % (m) 910 1412 35% Rural 67^th^ % (m) 1682 2739 39% 95^th^ % (m) 5421
7653 29%
* * *
### A.6.2.2 Additional independent simulations - AT&T
#### A.6.2.2.1 Overview
The results presented in this section were completed using the methodology
described in section A.3 of this TR. These results were obtained for the
various environments listed in the following section, in terms of site spacing
and system characteristics. AT&T warrants the veracity of these results, based
on the model provided.
#### A.6.2.2.2 Simulation results
Table 6.2.2.2: ATT simulation parameters
* * *
Parameter Dense Urban Urban Suburban Rural Tower Spacing (m) 500 1000 3000
10000 Cells Per Tower 3 3 3 3 Azimuth of Alpha Sector 0 0 0 0 Sigma of RSSI
(dB) 5 5 5 5 Sigma of RSSI Model (dB) 4 4 4 4 Sigma of RTT (m) 62 125 375 1000
Reference RSSI (dBm) -68.7 -68.7 -56.4 -36.2 Reference Distance (m) 100 100
100 100 P.L. Exponent 5 4 3 2 Front to Back Ratio 30 30 30 30 Loading Factor 6
4 2 0 Soft Handoff Factor (dB) 6 6 6 6 Decode Threshold (dB) -20 -20 -20 -20
Sample Spacing 10 25 50 100 Beam Width 120 120 120 120 Active Set Max Size 3 3
3 3 Number of RSSI Cases 3 3 3 3 Number of Det Case 3 3 3 3
* * *
Table 6.2.2.2.a: ATT results
* * *
                               Pathloss   CellID-RTT   Pathloss Improvement
Dense Urban 67^th^ % (m) 185 221 16% 95^th^ % (m) 258 280 8% Urban 67^th^ %
(m) 330 415 20% 95^th^ % (m) 476 544 13% Suburban 67^th^ % (m) 810 1115 27%
95^th^ % (m) 1180 1518 22% Rural 67^th^ % (m) 1784 2867 38% 95^th^ % (m) 2725
4398 38%
* * *
# A.7 Anticipated requirements for the standardization of RF pattern matching
technologies in 3GPP
## A.7.1 Modifications to TS 25.331 [5] (RRC Protocol Specification) include:
\- Addition of a pattern matching to UE Positioning description section
\- Inclusion of pattern matching in the defined procedures
## A.7.2 Anticipated Change Requests
\- Inter-RAT
\- Access measurements from both UMTS and underlying GSM networks
\- Increase measurements used for location estimation
\- Suggested only for Emergency Service Applications
\- IPDL
\- Increase pilot Ec measurement diversity due to reduction of near-far effect
\- Suggested only for Emergency Service Applications
\- Absolute Ec (Sector TX Power)
\- Additional measurement to allow absolute Ec calculation from measured Ec/No
ratio
\- Round Trip Time (RTT)
\- Increased ability to use RTT in location estimation
\- Provides additional temporal measurements to increase location accuracy
# A.8 Conclusions (RF pattern matching)
This Appendix provides detailed information on the potential benefits, as well
as the implications, of the inclusion of RF pattern matching in the UTRAN. As
a result of the evaluation contained herein, it can be shown that:
\- RF pattern matching provides a significant improvement in performance to
Cell-ID with RTT
\- Average simulated improvement was 47.3%
\- Highest simulated improvement was 259%
\- RF pattern matching operates with limited impact on the network or UE
\- No network hardware requirements
\- No UE modifications
\- Anticipated Changes have benefit for other location methods
\- IPDL -- Also needed for OTDOA
\- RTT -- Also benefits Cell-ID, OTDOA and UTDOA
There are growing market segments for location services that require both
location accuracy and user transparency (Government Surveillance and Lawful
Intercept); these services cannot be addressed with location technologies
which require UE support or modification (A-GPS, GNSS, OTDOA). Additionally,
Emergency Service applications require a level of location accuracy which has
not been met with Cell-ID and RTT. The potential benefits of RF pattern
matching and and the relative ease with which this location method can be
adopted in the UTRAN would indicate that it is appropriate that the technology
be included in the UTRAN in support of the services noted above, as well as
for cooperatve deployment with satellite-based systems (A-GPS, GNSS, etc.) in
support of \"Hybrid\" location technology for Location Based Services (LBS).
#