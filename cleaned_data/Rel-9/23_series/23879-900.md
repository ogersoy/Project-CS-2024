# Foreword
This Technical Report has been produced by the 3rd Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# Introduction
As the packet switched radio networks capabilities evolve, they become more
and more attractive media for carrying also real time speech traffic such as
the traditional TS11 and TS12. In order to make the best use of such resources
access from the deployed CN infrastructure and services should be possible.
This will allow avoiding a major switch in the voice call control paradigm as
well as retaining the currently provided functionalities such as the charging
mechanisms (calling party pays), supplementary services provision and so on.
As the circuit switched network will continue to be employed in the future,
also handover needs to be taken into account.
Give the proven track record of the current call control, this TR intends to
investigate architectures suitable to support CS Domain Services over new
types of accesses and manage the handover of calls from a traditional bearer
to the new available ones. The study also aims to ensure that the user
experience remains as consistent and as satisfactory as it is today.
# 1 Scope
The present document contains the results of the study of the architectural
requirements of CS Domain Services over evolved PS access and concludes with a
way forward. Considerations include overall requirements, architectural
requirements, evaluation of potential architectural solutions and alternative
architectures.
The objective is to describe an architecture that is capable of extending the
\'traditional\' MSC-Server based set of CS voice, supplementary and value-
adding services and business principles (e.g. for roaming and interconnect) to
the evolved PS access. The intention is also to give a CS handover-like user
experience for voice calls when changing between evolved PS and legacy CS
accesses. The architecture will however not be limited to the provision of
speech services over evolved PS accesses; on the contrary, through the
exploitation of the Combinational services, it will be possible to harness the
capabilities of IMS to provide new, innovative services to the end user.
Handover of the parallel PS session towards legacy 3GPP access will be
considered as well, but may be limited by the capabilities of the legacy
system and operator preferences.
Co-existence with IMS centric Single Radio VCC solutions shall be studied as
well.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or non‑specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the > case of a reference to a 3GPP document (including a GSM document), > a non-specific reference implicitly refers to the latest version > of that document _in the same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 23.279: \"Combining Circuit Switched (CS) and IP Multimedia
Subsystem (IMS) services\".
[3] 3GPP TS 23.401: \"GPRS enhancements for E-UTRAN access\".
[4] 3GPP TS 23.012: \"Location management procedures\".
[5] 3GPP TS 23.203: \"Policy and charging control architecture\".
[6] 3GPP TS 23.018: \"Basic call handling; Technical realization\".
[7] 3GPP TS 32.250: \"Charging management; Circuit Switched (CS) domain
charging\".
[8] 3GPP TS 32.240: \"Charging management; Charging architecture and
principles\".
[9] 3GPP TS 32.299: \"Charging management; Diameter charging applications\".
[10] 3GPP TS 23.237: \"IP Multimedia Subsystem (IMS) Service Continuity, Stage
2\"\".
[11] 3GPP TS 23.292: \"IP Multimedia System (IMS) centralized services, Stage
2\".
[12] 3GPP TR 23.882: \"3GPP System Architecture Evolution\".
[13] 3GPP TS 23.040: \"Technical realization of the Short Message Service
(SMS)\".
[14] 3GPP TS 44.018: \"Radio Resource Control (RRC) protocol\".
[15] 3GPP TS 25.331: \"Radio Resource Control (RRC); Protocol specification\".
[16] 3GPP TS 23.060: \"General Packet Radio Service (GPRS)\".
[17] 3GPP TS 23.216: \"Single Radio Voice Call Continuity (SRVCC); Stage 2
[18] 3GPP TS 44.318: \"Generic Access Network (GAN); Stage 2\"
[19] 3GPP TS 33.234: \"Wireless Local Area Network (WLAN) interworking
security\"
[20] 3GPP TS 23.272: \"Circuit Switched Fallback in Evolved Packet System;
Stage 2\"
[21] IETF RFC 4867: \"RTP Payload Format and File Storage Format for the AMR
and AMR-WB Audio Codecs\"
[22] 3GPP TR 23.891: \"Evaluation of LCS Control Plane Solutions for EPS\"
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] apply. A term defined in the present document takes precedence
over the definition of the same term, if any, in TR 21.905 [1].
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] apply. An abbreviation defined in the present document takes precedence
over the definition of the same abbreviation, if any, in TR 21.905 [1].
# 4 Requirements
## 4.1 Overall requirements
\- The set of CS domain voice, supplementary and value-adding services and
business principles (e.g. for roaming and interconnect) shall be made
available over the evolved PS access.
\- The user experience for voice calls when changing between evolved PS and
legacy CS accesses shall be comparable to that of CS handover.
\- It shall be possible to combine CS and IP Multimedia Subsystem (IMS)
services as specified in TS 23.279 [2] when they are both accessed over
evolved PS access.
## 4.2 Architectural requirements
It shall be possible to access CS domain voice service over evolved PS access,
i.e. EPS.
\- Impact on the CS domain shall be minimized.
\- Impact on GERAN, UTRAN and E-UTRAN should be avoided.
\- Cost-affecting upgrades to the legacy CS radio access (e.g. DTM, PS HO,
VoIP) should be avoided.
# 5 Architecture Alternatives
## 5.1 Alternative 1 - Evolved MSC
### 5.1.1 Reference architecture
#### 5.1.1.1 Non-roaming architecture
In this alternative, the operator chooses to reuse the MSC Server that will
control establishment of voice calls and handling of SMS under E-UTRAN
coverage. This evolution of the MSC Server is referred as the eMSC (Evolved
MSC). From the EPS point of view, the eMSC is perceived as an Application
Server. Thus the functionality of Z1 interface can be compared to that of Gm
reference point.
Figure 5.1.1.1-1: Non-roaming architecture
#### 5.1.1.2 Roaming architecture
If the Visited PLMN supports \"CS domain services over evolved PS access\",
the following architecture shall apply where the PDN GW and the eMSC are both
located in the VPLMN. In order to allow operators to limit user-plane traffic
through the PDN-GW in the VPLMN to user-plane traffic related to CSoPS
service, it shall be possible to have a separate APN for CSoPS.
Figure 5.1.1.2-1: Roaming architecture with PDN GW and eMSC in VPLMN
If the Visited PLMN does not support \"CS domain services over evolved PS
access\", the subscriber will not have access to CS domain voice calls over
EPS.
#### 5.1.1.3 Required functionality in network elements
**eMSC** Contains full MSC-S and VLR functionality with following additions:
\- CS domain registration for UE using secure and reliable IP transport
\- Call and SMS control for UE using secure and reliable IP transport
(replacing use of Mc for channel assignment with Rx using PCC for bearer
establishment)
\- Handover preparation and execution
\- Handover signalling
NOTE: Connections between eMSC and EPC elements will be secured with standard
IP mechanisms; the eMSC needs to allow secured connectivity with many PDN GWs
and MMEs, depending on operator configuration.
**MME** Additional to Rel-8 standard behaviour:
\- Handover signalling exchange with the eMSC for preparation and execution
**UE** Additional to Rel-8 standard behaviour:
\- CS domain registration and call and SMS control signalling over EPS using
secure and reliable IP transport
#### 5.1.1.4 Reference points
**Z1** Reference point between UE and eMSC.
**Z2** Reference point between MME and eMSC.
#### 5.1.1.5 Protocol Stacks
A possible protocol stack for control plane over Z1 is illustrated in figure
5.1.1.5-1.
Figure 5.1.1.5-1: Protocol stack for control plane over Z1
> NOTE 1: The final choice about use of SCTP or TCP can be left open for stage
> 3 discussions and decision.
>
> NOTE 2: Whether the Container protocol is a new one or maybe SIP is a stage
> 3 discussions and decision.
The protocol stack for user plane over Z1 is illustrated in figure 5.1.1.5-2.
{width="6.580555555555556in" height="2.2493055555555554in"}
Figure 5.1.1.5-2: Protocol stack for user plane over Z1
### 5.1.2 Procedures
#### 5.1.2.1 Registration
After having attached to the EPS network, the UE shall register to the CS
Domain to become available for CS Domain services.
Figure 5.1.2.1-1: Registration procedure
1) The UE registers to the network according to the Attach procedure as
specified in TS 23.401 [3].
2) The UE discovers to which eMSC it has to register as described in clause
5.1.2.4.
NOTE 1: It is expected that the UE discovers the eMSC to which to register
with similar mechanisms as a P-CSCF. A simple way is using static IP address
configuration in PDN GW and deliver this IP address to the UE via Attach
Accept message. And another way as shown in the above figure is using DHCP and
DNS query. The UE can use the current TAI information to get an appropriate
eMSC IP address.
3) UE initiates the registration procedure by sending Location Updating
Request (IMSI or TMSI, old LAI, the UE IP address, etc) message to the eMSC.
And this message packed into IP packets is transferred from UE to the eMSC
directly.
4) The eMSC/VLR obtains the IMSI and authentication data about the UE from the
old VLR if the UE identifies itself with TMSI and VLR changes since last
deregistration. If the UE identifies itself with TMSI and the TMSI is unknown
in both the old and new VLR, the new VLR get the IMSI from the UE.
5) The eMSC may perform the security procedure and establish a security
association between the eMSC and the UE.
6) The eMSC/VLR registers itself to the HSS by sending a Location Update
request (IMSI, MSC Address, VLR number etc) message.
7) HSS initiates the cancel location procedure to the old VLR.
8) The eMSC/VLR obtains the subscription data from HSS. The MME address is
included in the Subscription Data.
9) HSS responds with Location Update Acknowledge to the eMSC/VLR.
10) The eMSC/VLR sends the Location Update Accept (new LAI, new TMSI) to the
UE. The UE is now \"CS over PS\" attached, and its IP address, allocated by
the EPC, is known to the eMSC.
The eMSC shall consider TAC as LAC.
NOTE 2: A new container protocol, known by the UE, could carry the IP address
of the UE with no impact on TS 24.008 signalling.
11) The UE sends the TMSI Reallocation Complete message to indicate the
network that the reallocation of TMSI is accepted.
NOTE 3: The eMSC will, according to operator policy, allow an emergency
registration with an IMEI as UE identification, and subsequently not perform
authentication procedure.
NOTE 4: There is no reason identified why the eMSC should know which APN is
used for CSoPS.
#### 5.1.2.2 Location Update
The UE performs periodic location updates as specified in TS 23.012 [4].
Up to now no reason has been identified which would require changing eMSC when
changing TA. If a change of eMSC at time of TA change is desired, the UE could
in case of a TA change do an eMSC Discovery (see §5.1.2.4), and then, if a new
eMSC has been assigned, do a location update to the new eMSC.
#### 5.1.2.3 Deregistration
The UE is marked as IMSI detached when eMSC is informed that the IP-CAN
session used to transport 24.008 over IP signalling is released and the UE has
not registered via GERAN/UTRAN at that time.
Figure 5.1.2.3-1: Deregistration procedure
1) The UE sends IMSI Detach Indication message to deregister itself from the
eMSC similar to the Detach procedure (as specified in TS 23.012 [4]), and the
security association is terminated.
#### 5.1.2.4 eMSC Discovery
After having attached to the EPS network, the UE shall discover to which eMSC
it has to register.
Figure 5.1.2.4-1: eMSC Discovery procedure
NOTE 1: The DHCP Query/Response may be omitted if the domain name is known by
the UE.
1) UE sends a DHCP Query via the PDN GW to a DHCP Server, requesting the
domain name of the eMSC and IP addresses of DNS Servers.
2) The DHCP Server sends the answer to the UE.
NOTE 2: It may require a multiple DHCP Query/Response message exchanges to
retrieve the requested information.
3) The UE performs a DNS Query to retrieve a list of eMSC(s) IP addresses from
which one is selected.
NOTE 3: If the response does not contain the IP addresses, an additional DNS
Query is needed to resolve a Fully Qualified Domain Name (FQDN) to an IP
address.
#### 5.1.2.5 MO and MT Call Setup
Figure 5.1.2.5-1: Call Setup procedure
1) The call setup takes place as specified in TS 23.018 [6] (with the
exception of CS channel allocation that is described in step 2) and is
transported over reliable IP transport. Ciphering is not required. The
signalling connection may use IPSec.
In this procedure, and after the establishment of the EPC bearer, the UE
obtains the MGW IP address.
NOTE 1: Before an MT call setup procedure is initiated by the eMSC it will
trigger a possibly needed PS paging by sending a \'ping\'-packet to the UE.
NOTE 2: A new container protocol, known by the UE, could be used to carry the
IP address of the MGW with no impact on TS 24.008 signalling. The impacted
messages could be \"Alerting\" for MO calls and \"Call setup\" for MT calls.
2) The eMSC initiates the EPC bearer for the voice stream according to \'IP-
CAN Session Modification; PCRF initiated\' procedure as specified in TS 23.203
[5].
3) The eMSC registers itself at the MME as ‚Handover-serving Node\' towards 2G
and 3G for this bearer. The eMSC can obtain the serving MME for the UE from
the HSS. A change of serving MME will be signalled from the MME to the eMSC.
#### 5.1.2.6 MO and MT SMS
Figure 5.1.2.6-1: SMS procedure
1) MO and MT SMS signalling takes place as specified in TS 23.040 [13].
#### 5.1.2.7 HO from E-UTRAN to GSM/UMTS CS
Figure 5.1.2.7-1: HO from E-UTRAN to GSM/UMTS CS procedure
A measurement report from the UE triggers the eNodeB to send a HO Required to
the MME. As the eMSC is marked \'Handover-serving Node\' for this bearer the
MME forwards the HO Required to the eMSC.
NOTE 1: The handover of other established bearers besides the voice bearer for
which the eMSC is ‚Handover-serving Node\' is handled by the MME according to
the procedures for E-UTRAN to UMTS/GPRS Inter RAT handover as specified in TS
23.401 [3].
1-8) Upon receiving the HO Required from the MME the eMSC initiates a legacy
inter-MSC handover to the MSC serving the received target cell.
NOTE 2: If the currently serving eMSC is also serving MSC of the target cell
then no inter-MSC handover is needed and steps 2) ), 5) and 6) are skipped.
7) The eMSC initiates the release of the EPC bearers, which is done according
to \'IP-CAN Session Modification; PCRF initiated\' procedure as specified in
TS 23.203 [5].
#### 5.1.2.8 HO from GSM/UMTS CS to E-UTRAN
Figure 5.1.2.8-1: HO from GSM/UMTS CS to E-UTRAN procedure
A measurement report from the UE triggers the BSS or RNC to send a HO Required
to the MSC-S.
1) As the target cell is an E-UTRAN cell, the MSC-S initiates an inter-MSC
handover to the eMSC
2-10) Upon receiving the HO Required from the BSC/RNC the MSC-S initiates a
legacy inter-MSC handover to the eMSC serving the received target cell.
NOTE 1: If the currently serving MSC-S is also serving eMSC of the target cell
then no inter-MSC handover is needed and steps 2), 5) and 6) are skipped.
3-4) (Case 1) These steps will occur if the UE was already attached to EPC
while using the 2G CS domain and that it can re-use the IP address that was
received during EPC attachment.
8 (Case 2) If the UE was not already attached to EPC, the EPS Attach procedure
will occur, as described in TS 23.401 [3].
\- assignment of an IP address to the UE;
\- establishment of an EPC bearer for the voice stream.
9 The eMSC Discovery procedure is triggered as described in §5.1.2.4. From now
on the UE knows the IP address of the eMSC.
11) This new message lets the eMSC obtain the IP address of the UE.
12) This new message lets le UE obtain the IP address of the MGW where to send
voice traffic.
NOTE 2: A new container protocol, known by the UE, could carry the new
information needed with no impact on 24.008 signalling.
NOTE 3: This call flow is based on Alternative D-1 documented in TR 23.882,
§7.19.1.6a.
### 5.1.3 Co-existence with IMS based services
It is expected that there will be UEs supporting both, CS domain services over
PS access as well as IMS based services.
Operators may offer voice services over CS domain as well as over IMS in their
network. For one specific user voice services can be provided in the CS Domain
or in IMS, or in both. This would be part of the user\'s subscription
information in the HSS, and operator controlled configured in the UE.
Concurrent access to CS Domain voice services and IMS non-voice services is
possible. It is possible to combine CS and IP Multimedia Subsystem (IMS)
services as specified in TS 23.279 [2] when they are both accessed over EPS.
The UE decides based on the operator controlled configuration in the UE about
the preferred domain for voice services when adding a voice call to an ongoing
IMS session.
VCC (as specified in TS 23.206 [10]) and ICS (as studied in TR 23.892 [11])
architectures and the here proposed architecture for CS Domain services over
evolved PS access are mutually exclusive but can co-exist in operators\'
networks; it is not expected that any functionality can be shared or re-used.
SR VCC (as studied in TR 23.882 [12]) may have overlapping functionality,
depending on the selected architecture. The currently identified possible
overlapping functionality is identifying and marking of voice bearers in EPS
so that a later radio handover triggers an inter-MSC HO.
NOTE: It should be considered whether this functionality will be specified in
a way so that it can be shared between SR VCC and CS Domain services over
evolved PS access.
### 5.1.4 Roaming aspects
#### 5.1.4.1 eMSC support in the VPLMN
In this case voice calls are fully controlled by the VPLMN where PDN GW and
eMSC are located. This is the preferred roaming architecture for CS Domain
services over evolved PS access. It allows full re-use of CS domain roaming
agreements and existing inter-operator accounting mechanisms (TAP records
exchange) for CS Domain voice services over evolved PS access. In case of a
handover between E-UTRAN and GSM/UMTS CS the user experience will be
comparable to the one in non-roaming case as the handover is performed solely
in the VPLMN, which optimizes the user plane routing.
#### 5.1.4.2 No eMSC support in the VPLMN
In this case the subscriber will not have access to CS domain voice calls over
EPS.
NOTE: In this case emergency calls would not be provided by the HPLMN via CS
domain services over PS access, but could be made possible by using IMS
emergency architecture in the VPLMN. Details are FFS.
### 5.1.5 Security aspects
The EPS provides IP connectivity with integrity protection and ciphering, and
an authenticated sender IP address.
At time of registration most operators will require that the eMSC performs an
Authentication Procedure to authenticate the (T)IMSI and create a secure
binding with the sender IP address by verifying that it matches the IP address
currently allocated to the user. A security association is established between
UE and eMSC, to allow the UE to verify the sender identification of the eMSC.
The user-plane traffic shall be secured by standard IP security mechanisms.
### 5.1.6 Charging aspects
Charging shall be done in the MSC-S part of the eMSC, using the standardized
CS Domain interfaces and functions as specified in TS 32.250 [7], TS 32.240
[8], TS 32.299 [9]. In case of loss of transmission on the allocated EPC
bearer for the voice stream the eMSC will be triggered by the PCEF via Rx, and
according to operator preference either stop charging, or terminate the call.
Charging in the EPS is done with the PCC architecture as specified in TS
23.203 [5]. It is expected that operators would zero-rate all signalling
traffic to the eMSC, as well as the EPC bearers transporting the voice
traffic.
A radio handover triggering a domain change has no impact on charging
performed in the eMSC for an ongoing speech call, i.e. the Anchor MSC
continues charging.
### 5.1.7 Legal requirements aspects
#### 5.1.7.1 Emergency calls
It can be expected that the emergency call attachment procedures for EPS
(including the SIM-less case) will be specified to enable IMS emergency calls,
and that these procedures can be re-used for CS Domain services over PS access
for attachment to the EPS. In the following it is assumed that the UE is
already attached in EPS.
\- For the non-roaming and roaming architecture with local break-out the UE
performs an emergency call setup towards the eMSC as described in the \'MO and
MT Call Setup\' procedure, with the emergency call specifics, including the
SIM-less case, as specified in TS 23.018 [6]. The eMSC will, according to
operator policy, allow an emergency registration with an IMEI as UE
identification, and subsequently not perform authentication procedure.
A radio handover triggering a domain change has no impact on an ongoing
emergency call.
\- For the roaming architecture with home-routed traffic (see Figure
5.1.1.2-2) emergency calls will not be provided by the HPLMN using CS domain
services over evolved PS access architecture. Instead the UE would use IMS
emergency services provided in the VPLMN.
#### 5.1.7.2 Lawful interception
\- For the non-roaming and roaming architecture with local break-out the
lawful interception architecture and mechanisms specified for the CS domain
are sufficient.
A radio handover triggering a domain change has no impact on lawful
interception of an ongoing call.
\- For the roaming architecture with home-routed traffic (see Figure
5.1.1.2-2) lawful interception needs further investigations, but would be done
similar to IMS voice services with home-routed traffic.
### 5.1.8 Assessment
The \'Evolved MSC\' alternative is a full solution according to the scope this
study, i.e. it is fulfilling all identified overall and architectural
requirements.
The main design-principles of this solution are:
\- Minimization of impact on EPS entities: there is no impact on E-UTRAN, and
minor impact on MME, limited to an interaction needed for seamless service
continuity of a voice call at radio HO between E-UTRAN and legacy GERAN/UTRAN
access.
\- Maximal re-use of CS Domain mechanisms thus securing operators\'
investments in legacy CS Domain and radio access equipment and services.
The \'Evolved MSC\' alternative allows operators to offer legacy CS domain
services fully leveraging the already deployed evolved access coverage, and
should be understood as cost-efficient gap-filler until MTSI can be offered
with sufficient VoIP-capable PS coverage.
In roaming, CSoPS service is offered if eMSC is supported by the VPLMN. So,
while roaming in a VPLMN without eMSC, a CSoPS subscriber will experience
voice calls over legacy CS radio access.
## 5.2 Alternative 2 -- IWF between EPS and MSC
### 5.2.1 Reference architecture
In this alternative, the operator may reuse the MSC Server that will control
establishment of voice calls and handling of SMS under E-UTRAN coverage.
However, in contrast to Alternative 1, impacts on the existing MSC Server are
avoided by \"outsourcing\" the necessary adaptation functions into an
Interworking Function (IWF).
From the EPS point of view, the IWF is perceived as an Application Function
(AF). This includes the connection of the IWF to the PCC environment for the
control of bearer resources.
From the CS infrastructure point of view, the IWF presents itself as a RNC (Iu
used towards the MSC) or a BSC (A used towards the MSC). No changes are needed
in the CS infrastructure in order to support this solution.
NOTE: This contribution covers both the use of the A and Iu interfaces. The
final interface choice A, Iu or both can be left open for stage 3 discussions
and decision.
Overall, this solution has some similarity with the 3GPP GAN solution, where
the IWF is represented by the GAN controller. In particular, the IWF supports
the transparent transport of CS NAS signalling between the UE and the MSC. The
following clauses will explore where GAN functions can be reused by this
alternative.
#### 5.2.1.1 Non-roaming architecture
The architecture of this solution resembles the one from Alternative 1,
however, the eMSC is replaced by an unchanged MSC and an IWF. This implies
that the Z1 and Z2 reference points terminate in the IWF, which itself
connects to the MSC via A or Iu-cs interface.
Figure 5.2.1.1-1: Non-roaming architecture
#### 5.2.1.2 Roaming architecture
If the Visited PLMN supports \"CS domain services over evolved PS access\",
the following architecture shall apply where the PDN GW and the IWF are both
located in the VPLMN.
Generally, there are no specific roaming issues in this architecture. The
relationship between the VPLMN MSC and the HPLMN MSC are unchanged with
respect to CS inter-PLMN interworking. The PCRF roaming architecture is
already specified in TS 23.203 [5] and can be used without any changes.
In order to allow operators to limit user-plane traffic through the PDN-GW in
the VPLMN to user-plane traffic related to CSoPS service, it shall be possible
to have a separate APN for CSoPS.
Figure 5.2.1.2-1: Roaming architecture with PDN GW and IWF in VPLMN
If the Visited PLMN does not support \"CS domain services over evolved PS
access\", the subscriber may still have access to CS domain voice calls over
EPS. However, this would result in CS call control being executed in the HPLMN
rather than the VPLMN, and handover to the legacy CS system would only be
possible by means of an inter-PLMN inter-MSC handover procedure. Additional
issues with this approach are listed in the legal requirements and charging
clauses below. Therefore, for business/legal/technical/administrative reasons,
this approach might not be considered feasible by operators.
#### 5.2.1.3 Required functionality in network elements
As the protocol architecture figures in clause 5.2.1.5 show, this solution
resembles, to some extent, the 3GPP GAN solution, where the CS infrastructure
is connected to a PS-only access network via an interworking function.
Therefore, in the following clauses, reuse of GAN functionality and principles
is also taken into account. However, it must be recognised that there are also
differences, given that EPS is a 3GPP access network with full RRC protocol,
mobility management and authentication, ciphering and integrity, while in GAN,
the access network is an untrusted non-3GPP access without support of mobility
management. This is expected to result in appropriately reduced functionality
compared with the GAN specifications, tailoring of the solution to fit the EPS
environment.
The following functions are needed in the EPS:
**E-UTRAN:** Handover signalling as specified in SRVCC (TS 23.216 [17]).
Functionality from SRVCC might be reused without changes.
**MME:** Handover signalling exchange with the IWF for preparation and
execution, and splitting of bearers. This is analogous functionality to that
specified for the MME towards the \"MSC server enhanced for SRVCC\" (TS 23.216
[17]), which might be reused without changes.
It is intended to avoid or at least minimize changes to MME.
\- However, the option to support UE security binding, and the need for
notifying a change of MME to IWF, may lead to the introduction of new
procedures over Sv interface depending on the alternatives.
In the case of no IWF Discovery from the UE, the MME provides IWF address to
UE (FFS)
**IWF:** Behaviour like a BSC or RNC towards the CS domain. An alternative
where the user plane voice circumvents the IWF should also be considered.
Behaviour like an Application Function (AF) towards the EPS and the PCRF.
Translation between the UE-IWF protocol and BSSAP/RANAP. This includes the
mapping of information between the UE and the MSC communication paths.
Handover preparation and execution in cooperation with the MME, where SRVCC
functions are expected to be reused. This includes the mapping of information
received from the MME into formats that are acceptable to the MSC (e.g. cell
IDs / location IDs).
MSC selection _:_
UE-IWF protocol; e.g., for encapsulation of NAS CS domain signalling messages,
for Paging and for IWF Registration procedure to provide the UE with CN
parameters that are normally broadcast in System Information, such as CN
domain specific GSM-MAP NAS system information.
Ensures UE-IWF communication is secure:
\- It is FFS if GAN-style IKEv2 authentication and IPSec tunnelling between
the UE and the IWF is required (e.g., to allow for UE authentication and
message integrity protection). This alternative is referred to as \"Security
Alternative A\" further below);
\- It is FFS if UE security binding verification is required; i.e. checking
whether GUTI/IMSI received in UE-IWF messages from UE IP address matches with
GUTI/IMSI provided by MME during UE Attach. This alternative is referred to as
\"Security Alternative B\" further below.
**UE:** CS domain registration and CS signalling using IP transport.
Introduction of a \"reliable transport\" layer with session management.
Communication with the IWF using a \"UE-IWF\" protocol; e.g., for carrying CS
NAS messages and paging the UE.
VoIP on the user plane per IETF RFC 4867 [21]..
FFS whether the UE shall support IWF Discovery from the UE, or reception of
IWF address from the MME, or both.
Ensures UE-IWF communication is secure:
\- Security Alternative A: It is FFS if GAN-style IKEv2 authentication and
IPSec tunnelling between the UE and the IWF is required (e.g., to allow for UE
authentication and message integrity protection);
\- Security Alternative B: As another alternative, no additional
authentication nor IPsec security to EPS.
NOTE: Given that the EPS is an access network, where a 3GPP authentication has
already been performed for the UE before it can access the IWF, it is possible
that no additional security measures are needed between the UE and the IWF. In
this case, a binding between IMSI/GUTI and UE IP address needs to be verified
by the IWF.
According to operator decision, the communication link between the P-GW and
the IWF can be secured similar to links towards other application servers, or
VPN gateways (including the use of a specifically configured, restricted-use
APN).
**There are no changes needed in the legacy system to support this
alternative.**
#### 5.2.1.4 Reference points
**Z2** Reference point between MME and IWF. This reference point is analogous
to Sv from SRVCC per TS 23.216 [17].
**Z1** Reference point between UE and IWF. This reference point is similar to
the GAN solution but with appropriately reduced functionality (e.g. no need
for IPSec for the user plane, no need for RRC type measurement result
transfers to the IWF).
#### 5.2.1.5 Protocol Stacks
A possible protocol stack for Iu-based control plane over Z1 is illustrated in
figure 5.2.1.5-1.
Figure 5.2.1.5-1: Protocol stack for control plane over Z1 (Iu-cs interface)
NOTE 1 It is FFS whether IPsec security is required between the UE and IWF
(see clause 5.2.2.2).
The \"New Protocol\" may re-use available GAN messages to minimize re-
invention.
The corresponding protocol stack for user plane over Z1 is illustrated in
figure 5.2.1.5-2. This is the same UP protocol stack in the UE as in IMS
telephony.
Figure 5.2.1.5-2: Protocol stack for user plane over Z1 (Iu-cs interface)
A possible protocol stack for A-based control plane over Z1 is illustrated in
figure 5.2.1.5-3.
Figure 5.2.1.5-3: Protocol stack for control plane over Z1 (A interface)
The \"New Protocol\" may re-use available GAN messages to minimize re-
invention.
The corresponding protocol stack for user plane over Z1 is illustrated in
figure 5.2.1.5-4. This is the same UP protocol stack in the UE as in IMS
telephony.
Figure 5.2.1.5-4: Protocol stack for user plane over Z1 (A interface)
### 5.2.2 Procedures
#### 5.2.2.1 IWF Discovery
The IWF with which the UE registers may be discovered in the following ways
(it is FFS which alternative(s) will be selected):
1\. After having attached to the EPS network, the UE performs a procedure
equivalent to the GAN discovery procedure for the purpose of \"Default IWF\"
assignment (see \"GAN-like IWF Discovery\" below);
2\. The IWF address is provided to the UE as part of the EPS Attach procedure
inside the Protocol Configuration Options (PCO) parameter;
3\. After having attached to the EPS network, the UE relies on DHCP to obtain
the IWF address.
4\. Selection of IWF under MME control and subject to configuration.
##### 5.2.2.1.1 GAN-like IWF Discovery (1st alternative)
Figure 5.2.2.1-1: IWF Discovery procedure
1\. The UE attaches to the network according to the Attach procedure specified
in TS 23.401 [3].
2\. The UE requests CSoPS PDN connectivity and establishes the default EPS
bearer for CSoPS service.
3\. If the UE has a provisioned or derived FQDN of the Provisioning IWF, it
performs a DNS query (via the generic IP access network provided by the EPS
bearer) to obtain an IP address. If the UE has a provisioned IP address for
the Provisioning IWF, the DNS step is omitted.
4\. The DNS Server returns a response including the IP Address of the
Provisioning IWF.
5\. The UE establishes a secure tunnel and TCP connection to a well-defined
port on the Provisioning IWF.
6\. The UE queries the Provisioning IWF for the Default IWF, using UE-IWF
DISCOVERY REQUEST message. The message contains:
\- EPS Location Information.
\- UE\'s IMSI.
7\. The Provisioning IWF returns the UE-IWF DISCOVERY ACCEPT message, using
the information provided by the UE to provide the FQDN or IP address of the
Default IWF. This is done so the UE is directed to a \"local\" Default IWF in
the HPLMN to optimize network performance.
#### 5.2.2.2 Registration
The registration procedure consists of two distinct steps: UE registration
with the IWF and UE registration with the CS domain.
Figure 5.2.2.2-1: Registration procedure
1\. The UE may be operating in GERAN/UTRAN mode and may be registered on MSC-1
and SGSN-1.
2\. The UE initiates the combined EPS/CS attach procedure as described in
TS°23.272 [20] if supported by the UE and the network (refer also to clause
5.2.7a). Otherwise the UE performs the EPS attach procedure as described in TS
23.401 [3].
In alternative B where no IPSec is setup, the MME gets the subscriber\'s IMSI
from the EPS authentication procedure and the IP address allocated by the P-GW
during Attach procedure. If the UE is CSoPS capable, the MME selects the IWF
from the TAI, then returns IWF IP address to the UE with Attach Accept.
Furthermore, before Attach Accept is sent to the UE, a UE Security Binding
procedure is performed to avoid man-in-the-middle attack by which the IWF
verifies the UE binding by checking whether the GUTI or IMSI received in UE-
IWF messages corresponding to the UE IP address matches with the GUTI or IMSI
provided by the MME in the UE-Binding message. The MME sends UE Binding
Request (Temporary User Identity (e.g. GUTI) or Permanent User Identity (e.g.
IMSI), UE IP address) to the IWF. The IWF stores these information, allocates
a LAI and selects the MSC in the pool of MSC\'s that manage the LAI.
3\. The UE requests CSoPS PDN connectivity and establishes the default EPS
bearer for CSoPS service.
4\. In Security Alternative A, the UE establishes an IPSec tunnel to the IWF.
This step does not exist in alternative B.
5\. The UE registers with the IWF, using UE-IWF REGISTER REQUEST message. The
message contains:
\- EPS Location Information.
\- UE\'s IMSI.
6\. If the IWF accepts the registration request it shall initiate the
activation of a dedicated EPS bearer for the CS signalling channel (QCI=5)
using the Rx interface to the PCRF.
7\. Once established, the IWF responds with a UE-IWF REGISTER ACCEPT message.
The message contains CSoPS specific system information, including:
\- Location-area identification comprising the mobile country code, mobile
network code, and location area code corresponding to the CSoPS service area.
\- CN domain specific GSM-MAP NAS system information
\- The GERAN (if A interface) or UTRAN (if Iu interface) cell identity
identifying the cell within the location area corresponding to the CSoPS
service area.
> 8-21. If the UE has performed a combined EPS/CS attach procedure in step°2,
> the registration procedure ends here. Otherwise, the UE executes the
> location area update procedure via the IWF using the procedures specified in
> TS 43.318 [18]. The HSS updates the stored UE record with the new CS
> location (MSC-2 address) and cancels the previous UE location. If the MSC-2
> and MSC-1 are same, step 13-15 are skipped.
#### 5.2.2.3 Periodic Location Update
The UE performs periodic location updates as specified in TS 23.012 [4].
#### 5.2.2.4 EPS Detach procedure
When the UE is detached (whatever the reason) from EPS, the IWF may be
informed by the UE (i.e., sending a deregister message to the IWF prior to
detaching), by the PCRF (i.e., sending a notification to the IWG of the
release of the dedicated bearer used for CSoPS signalling), or based on an
indication from the MME (e.g., releasing the Sv connection with the IWF),
allowing the IWF to release the associated resources:
\- EPS resources via Rx
\- SCCP connection to the MSC
\- UE-IWF-session with the UE
\- Internal resources.
#### 5.2.2.5 Handling of IWF or MSC failure
This is FFS.
#### 5.2.2.6 Deregistration
The UE uses the normal CS Detach procedure. UE detach could also be triggered
by the IWF when it is informed by PCC that the IP-CAN session used to
transport 24.008 over IP signalling is released, and the UE has not registered
via GERAN/UTRAN at that time.
#### 5.2.2.7 Establishment of IWF-MME communication for the UE
Either the IWF-MME communication for a specific UE is performed during the UE
Binding procedure at EPS Attach (Security Alternative B)
Or it can be set up later if no UE Binding needed (Security Alternative A). In
SRVCC, the MME selects the MSC Server \"based on the Target ID received in the
Handover Required message\" (see TS 23.216 [17], clause 6.2.2.1).
Applying this same assumption to the IWF selection by the MME assumes that
there is a one-to-one relationship between Target ID (e.g., GERAN CGI) and
serving IWF. However, the relationship may be one-to-many for reasons of
scalability, for example. Also, even if one-to-one mapping of Target ID and
IWF is used, the UE may have started the call on IWF-1 then moved to an area
where the Target ID maps to IWF-2.
There are a number of potential methods of addressing this issue, some which
require MME support and some which are independent of the MME. The resolution
of issue is FFS.
#### 5.2.2.8 MO and MT Call Setup
Figure 5.2.2.8-1: MO Call Setup procedure
The UE is operating in E-UTRAN mode and is registered with the IWF and MSC.
1-8. The UE, IWF and MSC perform the first part of the MO call procedure using
either the procedures specified in TS 43.318 [18], or a new protocol that just
encapsulates the CS NAS messages.
9\. On receipt of the Assignment Request message from the MSC (or earlier),
the IWF initiates the activation of a second EPS bearer for the CS voice call
using the Rx interface to the PCRF.
10-17. The UE, IWF and MSC complete the MO call procedure using either the
procedures specified in TS 43.318 [18] or a new protocol that just
encapsulates the CS NAS messages.
Figure 5.2.2.8-2: MT Call Setup procedure
The UE is operating in E-UTRAN mode and is registered with the IWF and MSC.
1-9. The UE, IWF and MSC perform the first part of the MT call procedure using
either the procedures specified in TS 43.318 [18] , or a new protocol that
just encapsulates the CS NAS messages, with additional UE-IWF Paging message.
10\. On receipt of the Assignment Request message from the MSC (or earlier),
the IWF initiates the activation of a second EPS bearer for the CS voice call
using the Rx interface to the PCRF.
11-18. The UE, IWF and MSC complete the MT call procedure using either the
procedures specified in TS 32.318 [18] , or a new protocol that encapsulates
the CS NAS messages.
#### 5.2.2.9 MO and MT SMS
The scenarios in this clause illustrate the use of GAN-like MO and MT SMS
procedures.
Figure 5.2.2.9-1: MO SMS procedure
The UE is operating in E-UTRAN mode and is registered with the IWF and MSC.
1-9. The UE, IWF and MSC perform the MO SMS procedure using either the
procedures specified in TS 43.318 [18], or a new protocol that just
encapsulates the CS NAS messages.
Figure 5.2.2.9-2: MT SMS procedure
The UE is operating in E-UTRAN mode and is registered with the IWF and MSC.
1-9. The UE, IWF and MSC perform the MO SMS procedure using either the
procedures specified in TS 43.318 [18] , or a new protocol that just
encapsulates the CS NAS messages.
#### 5.2.2.10 HO from E-UTRAN to GSM/UMTS CS
The following figure illustrates the handover from E-UTRAN to GERAN (assuming
DTM handover is not supported and that the Target MSC is serving the CSoPS
call). Note that the E-UTRAN to MME interaction and the MME to IWF interaction
is the same as the analogous interactions described for SRVCC in TS 23.216
[17].
Figure 5.2.2.10-1: HO from E-UTRAN to GERAN CS procedure
A CSoPS call is established.
Similarly as in the SR-VCC mechanism where the UE sends the SR-VCC UE
capability to the MME, and where the MME sends the \"SRVCC operation
possible\" indication to the E-UTRAN inside the S1-AP Initial Context Setup
Request message meaning that both UE and MME are SRVCC-capable, the E-UTRAN
can be informed in the same way of the \"CS over PS operation possible\"
(possibly with the same indicators as those used in SR-VCC). It allows the
E-UTRAN to know whether the handover is a CS over PS handover (e.g. the target
cell is a CS cell) or a PS handover (e.g. if the target cell is E-UTRAN cell).
1\. Based on UE measurement reports the source eNodeB decides to trigger a
handover to GERAN. The source eNodeB determines that the target GERAN cell
does not support DTM handover and does not support VoIP in the PS domain.
2\. The source eNodeB sends a Handover Required (Target Identifier, generic
Source to Target Transparent Container) message to the source MME. The
container type also indicates to the MME that this is a Handover to CS
operation; i.e., that the VoIP-capable EPS bearer shall be handed over to the
GERAN CS domain and that handover of the other EPS bearer(s) shall not be
initiated.
3\. Based on the QCI associated with the voice bearer (QCI 1) and the
container type, the source MME splits the voice bearer from the non‑voice
bearers and initiates the CSoPS handover procedure for the voice bearer by
sending a SRVCC PS to CS Request (generic Source to Target Transparent
Container) message to the IWF.
4\. The IWF converts the PS-CS Handover Request into a CS Handover Request by
sending a BSSMAP Handover Required message to the MSC that is currently
serving the CSoPS call.
5\. The MSC performs resource allocation with the target BSS by exchanging
Handover Request/ Acknowledge messages.
6\. The MSC sends a BSSMAP Handover Command message to the IWF, containing the
GERAN RRC Handover Command message encapsulated in the \"Layer 3 Information\"
IE.
7\. The IWF sends a SRVCC PS to CS Response (Target to Source Transparent
Container) message to the MME which contains the RRC Handover Command message.
8\. The source MME sends a Handover Command (Target to Source Transparent
Container) message to the source eNodeB. The message includes information
about the voice component only.
9\. The source eNodeB sends a Handover from E-UTRAN Command message to the UE.
10\. The UE accesses the GERAN channel and completes the CS handover to GERAN
procedure.
11\. The UE performs the GPRS Suspend procedure specified in TS 23.216 [17]
clause 6.2.2.1 and TS 23.060 [10].
12\. The MSC sends a Clear Command message to the IWF to request release of
the resources that had been allocated for the call.
13\. The IWF sends a SRVCC PS to CS Complete Notification message to the
Source MME, informing it that the UE has arrived on the target side. A timer
in the Source MME is started to supervise when resources in the Source eNodeB
and Source Serving GW shall be released. The Source MME sends a SRVCC PS to CS
Complete Acknowledge message to the IWF.
14\. The IWF sends the Clear Complete message to the MSC indicating that the
IWF has released the resources that had been allocated for the call
15\. The IWF initiates the release of the CSoPS signalling bearer via the Rx
interface to the PCRF, which is done according to \'IP-CAN Session
Modification; PCRF initiated\' procedure as specified in TS 23.203 [x].
16\. After CS call release and assuming that the UE has lost E-UTRAN coverage,
the UE resumes GPRS service by performing the Routing Area Update procedure.
During this procedure, the MME will receive a Cancel Location message from the
HSS. On receipt of this message or when the timer started at step 13 expires,
the Source MME sends a Release Resources message to the Source eNodeB. The
Source eNodeB releases its resources related to the UE.
#### 5.2.2.11 HO from GSM/UMTS CS to E-UTRAN
As with SRVCC [17], handover from GERAN/UTRAN to E-UTRAN is considered as
lower priority and is FFS. We assume that the same mechanism as eventually
specified for SRVCC could be used to trigger GERAN/UTRAN to E-UTRAN handover
for CSoPS.
### 5.2.3 Co-existence with IMS based services
It is expected that there will be UEs supporting both, CS domain services over
evolved PS access (CSoPS) as well as IMS based services.
Operators may offer voice and/or SMS services over CS domain as well as over
IMS in their network. For one specific user voice and/or SMS services can be
provided in the CS Domain or in IMS. This would be part of the user\'s
subscription information in the HSS, and is configured in the UE under
operator control.
Concurrent access to CS domain voice services and IMS non-voice services is
possible. It is possible to combine CS and IP Multimedia Subsystem (IMS)
services as specified in TS 23.279 [2] when they are both accessed over EPS.
The UE selects based on the operator controlled configuration, the preferred
domain for voice and/or SMS services when adding a voice call to an ongoing
IMS session.
SC (as specified in TS 23.237 [10]) and ICS (as specified in TS 23.292 [11])
architectures and the here proposed architecture for CS domain services over
evolved PS access can co-exist in operators\' networks.
A network supporting CSoPS and IMS VoIP can decide which approach to use for a
specific user based on the UE capabilities provided in the Attach Request
message and subscription information fetched from the HSS. The detailed
procedures for performing the voice mode selection is FFS.
### 5.2.4 Roaming aspects
#### 5.2.4.1 CSoPS support in the VPLMN
In this case voice calls are fully controlled by the VPLMN where PDN GW, IWF
and MSC are located. This is the preferred roaming architecture for CS domain
services over evolved PS access. It allows full re-use of CS domain roaming
agreements and existing inter-operator accounting mechanisms (TAP records
exchange) for CS domain voice services over evolved PS access. In case of a
handover between E-UTRAN and GSM/UMTS CS the user experience will be
comparable to the one in non-roaming case as the handover is performed solely
in the VPLMN, which optimizes the user plane routing.
CSoPS support in the VPLMN requires the support of local breakout in the
VPLMN.
Note: The coordination of SMS delivery between SMS over IP, SMS via CSFB, and
CSoPS while roaming is FFS.
#### 5.2.4.2 No CSoPS support in the VPLMN
While in theory it is possible to provide access to CS services over E-UTRAN
access via the HPLMN (when the HPLMN supports CSoPS) even when the VPLMN has
no CSoPS support, there is no known solution for handover to the 2G/3G CS
domain when the UE moves out of E-UTRAN coverage. Given that the service
continuity is a central aspect of the present feasibility study, the scenario
where the UE is provided access to CSoPS over E-UTRAN in a VPLMN that has no
CSoPS support is considered out of scope. The behaviour of a CSoPS enabled UE
when roaming in a VPLMN that has no CSoPS support is described in details in
other clauses of clause 5.2.
#### 5.2.4.3 Co-existence with SRVCC
An operator may wish to deploy support for both CSoPS and SRVCC in their EPC
network either to support the operators own subscribers or to support roamers
from operators supporting either approaches.
An EPC network supporting both CSoPS and SRVCC can decide which approach to
use for a specific user based on the UE capabilities provided in the Attach
Request message and/or subscription information fetched from the HSS (e.g. SR-
STN).
As a SRVCC UE, the UE is assumed to support CS domain in 2G and 3G.
In a visited network supporting SRVCC only, the inbound CSoPS UE will not be
provided CSoPS voice services over E-UTRAN. If the UE supports IMS VoIP with
or without SRVCC, the UE may use those voice modes subject to operator policy
and subscriber profile. Otherwise, the UE camps on GERAN/UTRAN, if available,
in order to support voice and/or SMS. In this case, the default behaviour of
the UE is not to autonomously attempt to (re-)select the E-UTRAN for the
duration of the time the UE stays in a VPLMN and PLMNs equivalent to the
VPLMN.
#### 5.2.4.4 Support for inbound roaming IMS subscribers
If a UE is configured to use IMS voice services it shall, if registered to IMS
and subject to operator policy and user preferences, initiate voice calls over
IMS, even if it is CSoPS capable.
If a UE is configured to use SMS over IP services it shall, if registered to
IMS and subject to operator policy and user preferences, send SMS over IMS,
even if it is CSoPS capable.
In cases when the IMS registered (for non-voice IMS services) and CSoPS
capable UE cannot initiate an IMS voice session (because e.g. IMS voice
services are not supported by the UE) CSoPS should be applied for voice calls.
In a network supporting CSoPS only, the inbound IMS roamers can still be
provided access to IMS services in home routed mode or in local breakout mode
with home-P-CSCF (if the CSoPS operator does not have any IMS support),
subject to the roaming agreement between the home and visited PLMN).
#### 5.2.4.5 Voice mode selection in VPLMN for UEs Supporting Combinations of
Voice Modes
The following table enumerates the behaviour of UEs supporting combinations of
voice mode capabilities when roaming in a visited PLMN. In some cases, the
voice mode selection produces more than one voice mode options. If multiple
voice mode options remain after matching UE and VPLMN voice mode capabilities,
operator policies and / or subscriber preferences would be applied to select
the preferred voice mode from the supported voice mode options.
For the purpose of this table, the UE is assumed to support 2G, 3G, and EPS,
including the support of CS domain in 2G and 3G.
The \"Voice Modes Supported on Visited PLMN\" columns in the table include all
combinations of LTE voice modes that may be supported in the VPLMN.
The \"Voice Modes Supported on UE\" rows in the tables include all
combinations of LTE voice modes that may be supported by UEs. The rows also
differentiate between whether the UE\'s HPLMN supports IMS VoIP, or not, since
this affects whether IMS VoIP may be used in the VPLMN
Table 5.2.4.5: Voice Mode Selection when Roaming
+-------+-------+-------+-------+-------+-------+-------+-------+-------+ | | | Voice | | | | | | | | | | Modes | | | | | | | | | | Supp | | | | | | | | | | orted | | | | | | | | | | on | | | | | | | | | | Vi | | | | | | | | | | sited | | | | | | | | | | PLMN | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | # | Voice | CSoPS | CSoPS | IMS | IMS | CSoPS | CSoPS | CSFB | | | Modes | | + | VoIP | VoIP | + IMS | + IMS | | | | Supp | | CSFB | | + | VoIP | VoIP | | | | orted | | | | CSFB | | + | | | | on UE | | | | | | CSFB | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 1 | CSoPS | CSoPS | CSoPS | L | L | CSoPS | CSoPS | L | | | | mode | mode | egacy | egacy | mode | mode | egacy | | | | | | CS | CS | | | CS | | | | | | mode, | mode, | | | mode, | | | | | | see | see | | | see | | | | | | Note | Note | | | Note | | | | | | 1 | 1 | | | 1 | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 2 | CSoPS | CSoPS | CSoPS | L | CSFB | CSoPS | CSoPS | CSFB | | | + | mode | or | egacy | mode | mode | or | mode | | | CSFB | | CSFB | CS | | | CSFB | | | | | | mode, | mode, | | | mode, | | | | | | see | see | | | see | | | | | | Note | Note | | | Note | | | | | | 2 | 1 | | | 2 | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 3 | IMS | L | L | IMS | IMS | IMS | IMS | L | | | VoIP | egacy | egacy | VoIP | VoIP | VoIP | VoIP | egacy | | | (IMS | CS | CS | mode | mode | mode | mode | CS | | | VoIP | mode, | mode, | | | | | mode, | | | in | see | see | | | | | see | | | H | Note | Note | | | | | Note | | | PLMN) | 1 | 1 | | | | | 1 | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 4 | IMS | L | CSFB | IMS | IMS | IMS | IMS | CSFB | | | VoIP | egacy | mode | VoIP | VoIP | VoIP | VoIP | mode | | | + | CS | | mode | or | mode | or | | | | CSFB | mode, | | | CSFB | | CSFB | | | | (IMS | see | | | mode, | | mode, | | | | VoIP | Note | | | see | | see | | | | in | 1 | | | Note | | Note | | | | H | | | | 2 | | 2 | | | | PLMN) | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 5 | CSoPS | CSoPS | CSoPS | L | L | CSoPS | CSoPS | L | | | + IMS | mode, | mode | egacy | egacy | mode, | mode, | egacy | | | VoIP | see | , see | CS | CS | see | see | CS | | | ( | Note | Note | mode, | mode, | Note | Note | mode, | | | CSoPS | 3 | 3 | see | see | 3 | 3 | see | | | in | | | Note | Note | | | Note | | | H | | | 1 | 1 | | | 1 | | | PLMN) | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 6 | CSoPS | CSoPS | CSoPS | IMS | IMS | IMS | IMS | L | | | + IMS | mode | mode | VoIP | VoIP | VoIP | VoIP | egacy | | | VoIP | | | mode | mode | or | or | CS | | | (IMS | | | | | CSoPS | CSoPS | mode, | | | VoIP | | | | | mode, | mode, | see | | | in | | | | | see | see | Note | | | H | | | | | Note | Note | 1 | | | PLMN) | | | | | 2 | 2 | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 7 | CSoPS | CSoPS | CSoPS | L | CSFB | CSoPS | CSoPS | CSFB | | | + IMS | mode | or | egacy | mode | mode, | mode, | mode | | | VoIP | | CSFB | CS | | see | or | | | | + | | mode, | mode, | | Note | CSFB | | | | CSFB | | see | see | | 3 | see | | | | ( | | Note | Note | | | Note | | | | CSoPS | | 2 | 1 | | | 2, 3 | | | | or | | | | | | | | | | CSFB | | | | | | | | | | in | | | | | | | | | | H | | | | | | | | | | PLMN) | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 8 | CSoPS | CSoPS | CSoPS | IMS | IMS | IMS | IMS | CSFB | | | + IMS | mode | or | VoIP | VoIP | VoIP | VoIP, | mode | | | VoIP | | CSFB, | mode | mode, | or | C | | | | + | | mode, | | see | CSoPS | SoPS, | | | | CSFB | | see | | Note | mode, | or | | | | (IMS | | Note | | 4 | see | CSFB | | | | VoIP | | 2 | | | Note | mode, | | | | in | | | | | 2 | see | | | | H | | | | | | Note | | | | PLMN) | | | | | | 2 | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | 9 | CSFB | L | CSFB | L | CSFB | L | CSFB | CSFB | | | | egacy | mode | egacy | mode | egacy | mode | mode | | | | CS | | CS | | CS | | | | | | mode, | | mode, | | mode, | | | | | | see | | see | | see | | | | | | Note | | Note | | Note | | | | | | 1 | | 1 | | 1 | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+ | NOTE | | | | | | | | | | 1: If | | | | | | | | | | a UE | | | | | | | | | | does | | | | | | | | | | not | | | | | | | | | | su | | | | | | | | | | pport | | | | | | | | | | at | | | | | | | | | | least | | | | | | | | | | one | | | | | | | | | | of | | | | | | | | | | the | | | | | | | | | | LTE | | | | | | | | | | voice | | | | | | | | | | ca | | | | | | | | | | pabil | | | | | | | | | | ities | | | | | | | | | | req | | | | | | | | | | uired | | | | | | | | | | by | | | | | | | | | | the | | | | | | | | | | VPLMN | | | | | | | | | | then | | | | | | | | | | the | | | | | | | | | | UE | | | | | | | | | | camps | | | | | | | | | | on | | | | | | | | | | GE | | | | | | | | | | RAN/U | | | | | | | | | | TRAN, | | | | | | | | | | if | | | | | | | | | | avail | | | | | | | | | | able, | | | | | | | | | | in | | | | | | | | | | order | | | | | | | | | | to | | | | | | | | | | su | | | | | | | | | | pport | | | | | | | | | | voice | | | | | | | | | | a | | | | | | | | | | nd/or | | | | | | | | | | SMS | | | | | | | | | | ser | | | | | | | | | | vices | | | | | | | | | | (i.e. | | | | | | | | | | ope | | | | | | | | | | rates | | | | | | | | | | in | | | | | | | | | | l | | | | | | | | | | egacy | | | | | | | | | | CS | | | | | | | | | | m | | | | | | | | | | ode). | | | | | | | | | | In | | | | | | | | | | this | | | | | | | | | | case | | | | | | | | | | the | | | | | | | | | | de | | | | | | | | | | fault | | | | | | | | | | beha | | | | | | | | | | viour | | | | | | | | | | of | | | | | | | | | | the | | | | | | | | | | UE is | | | | | | | | | | not | | | | | | | | | | to | | | | | | | | | | au | | | | | | | | | | tonom | | | | | | | | | | ously | | | | | | | | | | at | | | | | | | | | | tempt | | | | | | | | | | to | | | | | | | | | | ( | | | | | | | | | | re-)s | | | | | | | | | | elect | | | | | | | | | | the | | | | | | | | | | E- | | | | | | | | | | UTRAN | | | | | | | | | | for | | | | | | | | | | the | | | | | | | | | | dur | | | | | | | | | | ation | | | | | | | | | | of | | | | | | | | | | the | | | | | | | | | | time | | | | | | | | | | the | | | | | | | | | | UE | | | | | | | | | | stays | | | | | | | | | | in a | | | | | | | | | | VPLMN | | | | | | | | | | and | | | | | | | | | | PLMNs | | | | | | | | | | equiv | | | | | | | | | | alent | | | | | | | | | | to | | | | | | | | | | the | | | | | | | | | | V | | | | | | | | | | PLMN. | | | | | | | | | | | | | | | | | | | | NOTE | | | | | | | | | | 2: | | | | | | | | | | The | | | | | | | | | | c | | | | | | | | | | hoice | | | | | | | | | | de | | | | | | | | | | pends | | | | | | | | | | on | | | | | | | | | | ope | | | | | | | | | | rator | | | | | | | | | | con | | | | | | | | | | figur | | | | | | | | | | ation | | | | | | | | | | in | | | | | | | | | | the | | | | | | | | | | UE. | | | | | | | | | | | | | | | | | | | | NOTE | | | | | | | | | | 3: | | | | | | | | | | IMS | | | | | | | | | | VoIP | | | | | | | | | | is | | | | | | | | | | not | | | | | | | | | | avai | | | | | | | | | | lable | | | | | | | | | | in | | | | | | | | | | H | | | | | | | | | | PLMN, | | | | | | | | | | so UE | | | | | | | | | | can | | | | | | | | | | only | | | | | | | | | | use | | | | | | | | | | CS- | | | | | | | | | | based | | | | | | | | | | ser | | | | | | | | | | vices | | | | | | | | | | in | | | | | | | | | | V | | | | | | | | | | PLMN. | | | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+-------+
The table illustrates that:
\- IMS VoIP subscribers would select IMS VoIP voice mode while roaming to
VPLMNs independent of the VPLMN support for other LTE voice modes as long as
the VPLMN meets the requirements to support inbound IMS roamers (see clause
5.2.4.4.).
\- CSoPS and CSFB roaming subscribers require the VPLMN to support CSoPS and
CSFB respectively in order to use CSoPS or CSFB voice modes while roaming.
### 5.2.5 Security aspects
The EPS provides IP connectivity with integrity protection and ciphering, and
an authenticated sender IP address.
As an alternative, a security association is established over the CSoPS
signalling bearer between the UE and the IWF using IPSec/IKEv2 (as defined in
TS 43.318 [18] and TS 33.234 [19]) to allow mutual authentication and
signalling message integrity protection between the UE and the IWF.
IPSec/IKEv2 is used to secure the signalling channel only; the voice user
plane channel is secured using normal EPS mechanisms.
NOTE 1: It is expected that the E-UTRAN encryption mechanisms are sufficient
to ensure confidentiality so that encryption of the IPsec payload is not
necessary.
NOTE 2: It is FFS for stage3 whether IPsec should be used in tunnel mode (like
in GAN) or in transport mode (like in IMS).
In Security Alternative B, where no IPsec tunnel is used,, an additional EPS-
IWF (e.g., MME-IWF) communication is required to verify that the UE IMSI/IP
Address pair known to the IWF is the same as the UE IMSI/IP Address pair known
to the EPS or to otherwise create a \"UE Binding\" between the IWF and the
EPS.
At time of registration most operators will require that the MSC performs an
Authentication Procedure to authenticate the (T)IMSI, as usually done in
legacy CS systems. No additional security measures are considered necessary.
Operators may secure the link between the P-GW and the IWF by proper system
configuration, e.g. the use of a specifically configured, restricted-use APN.
From the IWF to the MSC, normal A or Iu interface is used.
### 5.2.6 Charging aspects
Charging functions in the MSC are reused without any changes, in both HPLMN
and VPLMN. This includes the exchange of TAP records between Operators in
roaming scenarios.
Charging in the EPS should apply the PCC architecture as specified in TS
23.203 [5]. It is expected that operators would zero-rate all signalling
traffic to the IWF, as well as the EPC bearers transporting the voice traffic.
In case of loss of transmission on the allocated EPC bearer for the voice
stream the IWF will be triggered by the PCRF via Rx, and then trigger the same
events towards the MSC as a BSC/RNC in case of radio link failure.
### 5.2.7 Legal requirements aspects
#### 5.2.7.1 Emergency calls
Emergency Services can be used in the MSC with no changes, in both HPLMN and
VPLMN. SIMless emergency calls require the support of SIMless access to the
EPS.
The IWF must ensure that the MSC gets a proper CellID for routing of the
emergency call. The CellID provided by the UE can be validated via LCS, if
required.
NOTE: The IWF is expected to rely on the LCS architecture that is currently
under study in the \"LCS Control Plane solutions for EPS\" work item (refer to
TR 23.891 [22]).
#### 5.2.7.2 Lawful interception
For the non-roaming and roaming architecture with local break-out the lawful
interception architecture and mechanisms specified for the CS domain are
sufficient.
\- A radio handover triggering a domain change has no impact on lawful
interception of an ongoing call.
### 5.2.7a CSoPS interaction with ISR
#### 5.2.7a.1 General
Similar to CSFB interactions with ISR, in relation with CSoPS, ISR is
activated only when an SGs association exists between MME and MSC/VLR.
If the UE and the network support the combined EPS/CS attach procedure as
described in TS 23.272 [20], the CSoPS-enabled UE uses the combined EPS/CS
attach procedure to register with the CS domain, prior to the registration
with the IWF. In other words, when the UE uses the combined EPS/CS attach
procedure, the steps 8-21 in Figure 5.2.2.2-1 are skipped.
NOTE: Other mobility management procedures defined in TS°23.272 [20] (e.g.
Detach, Combined TA/LA update) are also re-usable in CSoPS context.
If the UE and/or the network do not support the combined EPS/CS attach
procedure and related procedures described in TS 23.272 [20], the CSoPS
enabled UE registers with the IWF first, and subsequently registers with the
CS domain, as described in clause 5.2.2.2. However, in this case ISR is
deactivated for this UE.
Figure 5.2.7a.1-1: CSoPS interaction with ISR
In reference to Figure 5.2.7a.1-1, once ISR is activated, the UE follows
regular ISR behaviour. It may reselect between E-UTRAN and GERAN/UTRAN without
a need to update the CN. When a mobile terminated service arrives, the MSC/VLR
sends a paging message via SGs to the MME. The MME pages in the TA(s)
registered for the UE, and the MME requests the SGSN via S3 that has an ISR
relation with the MME for that UE to page in the RA. When the UE is already
connected with the MME, the MME forwards the paging request only to the UE via
the established signalling connection.
CSoPS enabled UE includes the CSoPS capability indication as part of the \"MS
Network Capability\" in the Attach, RAU or combined RAU/LAU Request message,
if the UE has been configured to use CSoPS service by operator policy. SGSN
stores the CSoPS capability indication for ISR operation. If the UE has not
been configured to use CSoPS, the CSoPS capable UE shall not include the CSoPS
capability indication in the Attach, RAU or combined RAU/LAU Request message
to SGSN.
ISR remains activated until the CSoPS enabled UE performs a combined RAU/LAU
or separate LAU procedure, e.g. because the UE\'s periodic RAU timer expires
or the UE moves to an unregistered RA or moves to system operating in NMO II
or III. Normal re-selection between registered RA/TA(s) does not cause ISR
deactivated condition. When the UE needs to perform a combined RAU/LAU, the
SGSN checks the CSoPS capability bit in MS Network Capability and if it
indicates that CSoPS is enabled then SGSN deactivates ISR by not indicating
ISR activated in the RAU Accept message, which is a regular ISR functionality
as specified in TS 23.401 [3]. After a combined RA/LA update procedure, the
MSC pages via Gs for mobile terminated services. When Gs is not used, the
MSC/VLR pages in the LA via Iu/A for mobile terminated services.
If ISR is deactivated when the UE re-selects to E-UTRAN, the CSoPS enabled UE
can cause ISR to be activated again by performing a combined TA/LA Update
Procedure.
#### 5.2.7a.2 Mobile Terminating Call when ISR is active and SGs is active
between MSC/VLR and MME
Figure 5.2.7a.2-1: Mobile Terminating Call when ISR is active and SGs is
active between MSC/VLR and MME
1) G-MSC sends IAM to the MSC/VLR on the terminating side as specified in TS
23.018.
2) The MSC/VLR sends a Page message to the MME via SGs.
3a) The MME receives the Page message from the MSC/VLR. If the UE is in
ECM‑IDLE state, the MME sends a Paging (as specified in TS 23.401 [3], and CN
Domain Indicator) message to each eNodeB serving the TA list the UE is
registered to as specified in TS°23.272 [20]. If the UE is in ECM-CONNECTED,
the MME relays the CS Page message to the serving eNodeB over the S1 interface
as specified in TS°23.272 [20].
3b) The radio resource part of the paging procedure takes place. The message
contains a suitable UE Identity (i.e. S‑TMSI or IMSI) and a CN Domain
indicator.
4) As ISR is active and the UE is in ECM_IDLE state, the MME forwards the CS
paging message received from the MSC/VLR to the associated SGSN. The MME gets
the SGSN information in the regular ISR activation process.
5a) The SGSN receives the CS paging message from the MME, the SGSN sends
paging messages to RNS/BSSs, which is described in detail in TS 23.060 [16].
NOTE 1: If ISR is not active or the UE is in ECM-CONNECTED state, the MME does
not send the CS paging message to the SGSN. That means, the steps 4 and 5 are
not needed in the MT call procedure.
5b) When RNS/BSS nodes receive paging message from the SGSN, paging is
initiated as described in detail in TS 23.060 [16].
6) Upon receipt of a Paging Request message for a CS service, if the UE has a
valid registration with an IWF, it performs the EPS Service Request procedure
(as defined in TS°23.401[3]). Otherwise, the UE may perform the CS fallback
procedure as described in TS°23.272 [20].
7) At the end of the Service Request procedure the user plane on the CSoPS-
related PDN connection is established.
8) UE sends a UE-IWF Paging Response message to the IWF. This step corresponds
to step°3 in Figure 5.2.2.5-2. The only difference with the procedure
described in Figure 5.2.2.5-2 is that this UE-IWF Paging Response message
appears to the IWF as an unsolicited response message.
9) IWF sends a Paging Response message to the MSC. This step corresponds to
step°4 in Figure 5.2.2.5-2. The subsequent steps are identical with steps 5-18
in Figure 5.2.2.5-2.
NOTE 2: When SGs is used for paging a decision needs to be taken whether the
mobile terminated SMS is delivered via the IWF as described in figure
5.2.2.6-2 or via SGs as described in TS°23.272°[20].
### 5.2.8 Assessment
The \'IWF\' alternative is a full solution according to the scope this study,
i.e. it is fulfilling all identified overall and architectural requirements.
The main design-principles of this solution are as follows.
\- No specific impact on EPS entities: the functionality in the EPS required
for this solution is already specified in SRVCC [17]. However, the option to
support UE security binding described in clause 5.2.2.2, and the need for
notifying a change of MME to IWF may lead to the introduction of new
procedures over Sv interface.
\- No impact on CS Domain thus securing operators\' investments in legacy CS
Domain and radio access equipment and services.
\- Reuse of a subset of existing GAN functionality, with appropriate
simplifications. This minimises the reinvention factor and, generally, keeps
the solution rather simple.
\- Minimize the functional impact on the UE caused by the introduction of the
CSoPS mode of operation
The \'IWF\' alternative allows operators to offer legacy CS domain services
fully leveraging the already deployed evolved access coverage. The solution is
similar to the eMSC solution in Alternative 1, but significantly less
intrusive for CS and EPS while more cost-efficient and simpler at the same
time.
In roaming, CSoPS service is offered if the solution is supported by the
VPLMN. So, while roaming in a VPLMN without IWF, a CSoPS subscriber will
experience voice calls over legacy CS radio access. In theory, it would also
be possible to provide service from the HPLMN, but this would create issues in
mobility with legacy systems as well as in the charging/billing, lawful
intercept and emergency call requirements areas. So, the \"HPLMN service\"
concept is not recommended, therefore while roaming in a VPLMN without IWF, a
CSoPS subscriber will experience voice calls over legacy CS radio access.
## 5.3 Alternative 3 - Iu-CS based solution
### 5.3.1 Reference architecture
Figure 5.3.1-1: Non-Roaming Architecture for \"Iu-CS based solution\"
Figure 5.3.1-2: Roaming Architecture for \"Iu-CS based solution\"
**S1-MME:** Refer to 23.401 [3]
**S1-U:** Refer to 23.401 [3]
**Iu-CS\' (C):** Reference point for control plane protocol between MME and
MSC. Only s subset of Iu-CS(C) procedure is needed.
**Iu-CS (U):** Reference point for user plane protocol between S-GW and MSC.
**ICA (Iu-CS Adaptor):** This functional entity behaves like RNC toward the CS
domain and handles the interworking with MME for CS domain services over
evolved PS access.
### 5.3.2 Procedures
Figure 5.3.2-1: CS registration flow
In the EPS attach procedure, UE is told that if MME/S-GW can connect with MSC
by Iu-CS interface. If the corresponding capability is also supported by the
UE, the UE will initiate the CS registration after the EPS attach.
1\. UE sends Location Updating Request message to MME, and the type may be
normal location updating or IMSI attach.
2\. MME receives this message from S1-MME interface, encapsulates it into the
corresponding Iu-CS RANAP message, and sends it to MSC/VLR on Iu-CS interface.
3\. MSC/VLR sends Update Location message to HSS/HLR, in order to get the
subscriber\'s data.
4\. HSS/HLR sends Insert Subscriber Data message to MSC/VLR.
5\. MSC/VLR sends Insert Subscriber Data Ack message to HSS/HLR.
6\. HSS/HLR sends Update Location Ack message to MSC/VLR.
7\. MSC/VLR sends Location Updating Accept message to MME. LAI and the
allocated new TMSI are included in this message.
8\. MME receives this message from Iu-CS interface, transforms it into the
corresponding S1-AP message and sends it to eNodeB on S1-MME interface. Then
eNodeB sends this NAS message to UE.
9\. If a new TMSI is allocated by MSC/VLR, UE would send TMSI Reallocation
Complete message to MME.
10\. MME sends TMSI Reallocation Complete message to MSC/VLR.
### 5.3.3 Co-existence with IMS based services
Not part of the study.
### 5.3.4 Roaming aspects
Not part of the study.
### 5.3.5 Security aspects
Not part of the study.
### 5.3.6 Charging aspects
Not part of the study.
### 5.3.7 Legal requirements aspects
Not part of the study.
### 5.3.8 Assessment
Not part of the study.
## 5.4 Alternative 4 - Page in eUTRAN, Call in GSM/WCDMA
In this solution voice services are realized by reuse of CS infrastructure.
The terminal, connected to eUTRAN/EPC, uses 2G/3G to establish originating or
receive terminating voice calls.
This means this solution is intended only in dual eUTRAN-2G/3G coverage areas.
In eUTRAN-only coverage areas, voice service is provided with e.g. MTSI..
The \"Page in eUTRAN, Call in GSM/WCDMA\" solution is characterised by:
\- Mobility management is integrated and/or combined with EPS mobility
management.
\- Paging request for terminating voice calls are delivered to the terminal
via EPS.
\- 2G or 3G radio access is used for paging responses and further terminating
call handling as well as for all originating calls.
### 5.4.1 Reference architecture
The \"Page in eUTRAN, Call in GSM/WCDMA\" proposal reuses the concepts from
2G/3G of the Gs interface between the MSC Server and the SGSN. Thus for the
Location Update procedure and for Paging messages a \"Gs like\" interface
between the MME and the MSC server is used:
{width="6.675in" height="3.1465277777777776in"}
Figure 5.4.1-1: Reference architecture
### 5.4.2 Procedures
#### 5.4.2.1 Mobility Management
The \"Page in eUTRAN, Call in GSM/WCDMA\" proposal utilizes EPS mobility
management. This is outlined in figure 3 below with the example of the network
attachment of a UE.
{width="5.326388888888889in" height="3.411111111111111in"}
Figure 5.4.2.1-1: UE network attachment to for initial registration
UE is provided with identifiers needed to establish CS voice calls.
NOTE: CS attachment is embedded, the CS Location Update procedure can either
be triggered by the UE (e.g. with LA structure visible in broadcast) or by the
MME (based on mapping from the TA structure of LTE/SAE).
When the UE is roaming same concept is used. The TA update procedure will
include the CS Location Update procedure.
An example of Combined EPS / UMTS Attach procedure is illustrated in Figure
5.4.2.1-2.
{width="4.61875in" height="3.1125in"}
Figure 5.4.2.1-2: Attach Procedure
1) The MS initiates the attach procedure by the transmission of an Attach
Request (parameters as specified in TS 23.401 [3], Combined Update indicator)
message to the MME.
2) The EPS Attach procedure is performed as specified in TS 23.401 [3].
3) The VLR shall be updated if the Gs-like interface is installed. The VLR
number is derived from the TAI. The MME starts the location update procedure
towards the new MSC/VLR upon receipt of the first Insert Subscriber Data
message from the HSS in step 2). This operation marks the MS as EPS-attached
in the VLR.
4) The MME sends a Location Update Request (new LAI, IMSI, SGSN Number,
Location Update Type) message to the VLR.
5) The VLR creates an association with the MME by storing MME Number.
6) The VLR performs Location Updating procedure as specified in TS 23.060
[16].
7) The VLR responds with Location Update Accept (VLR TMSI) to the MME.
8) The MME sends an Attach Accept (parameters as specified in TS 23.401 [3],
LA, TMSI) message to the UE.
#### 5.4.2.2 EPS Relocation
When Relocation takes place in EPS, the interaction with VLR/MSC will take
place in a similar manner as specified in Clause 6.9.2.2 of TS 23.060 [16].
#### 5.4.2.3 Mobile Terminating Call
An example of Mobile Terminating Call procedure is illustrated in Figure
5.4.2.2-1.
{width="6.688888888888889in" height="3.8256944444444443in"}
Figure 5.4.2.3-1: Mobile Terminating Call Procedure
1) G-MSC receives IAM.
2) G-MSC retrieves routing information of the terminating UE bySend Routing
Info procedures as specified in TS 23.018 [6].
3) G-MSC sends IAM to the MSC on the terminating side as specified in TS
23.018 [6].
4) The MME receives a Page (IMSI, VLR TMSI, Location Information) message from
the MSC. If VLR TMSI is omitted, the IMSI is used instead of the TMSI as a
paging address at the radio interface. If location information is not
included, the MME shall page the MS in all the cells served by the VLR and the
SGSN, unless the SGSN has reliable information about the location of the MS.
5) The MME sends a Paging (as specified in TS 23.401 [3], and CN Domain
Indicator) message to each eNB. CN Domain Indicator indicates which domain (CS
or PS) initiated the paging message, and in this case it must be set to \"CS\"
by the MME.
6) The radio resource part of the paging procedure takes place. The message
contains CN Domain indicator.
7) Upon receipt of a Paging Request message for a circuit-switched service,
Cell Reselection if UE is in idle mode, PS handover as specified in TS 23.401
[3], or termination of existing EPC calls take place.
8) When the PS handover is complete, the UE responds to this request and
returns the paging response as specified in TS 44.018 [14] in an RRC Initial
Direct Transfer message as specified in TS 25.331 [15]. CN Domain Indicator is
set to \"CS\" in the Initial Direct Transfer message.
9) When received at the RNC, the Paging Response message is sent in an RANAP
Initial UE message to the MSC.
10) The MSC receives RANAP Initial UE message which shall then stop the paging
response timer and establish the CS connection.
#### 5.4.2.4 MT CS Call in Active Mode - Preparation Phase
{width="6.324305555555555in" height="4.970833333333333in"}
Figure 5.4.2.4-1: CS Page in eUTRAN, Call in GSM/WCDMA -- Preparation Phase
1\. The MSC receives an incoming voice call and responds by sending a CS Page
(IMSI or TMSI) to the MME over a Gs-like interface. The MME relays the CS Page
to the eNodeB over the S1 interface. The MSC only sends a CS Page for an UE/MS
that provides location update information using the Gs-like interface (i.e.
IMS is not supported by the LTE network).
2\. The eNode may optionally solicit a measurement report from the UE/MS to
determine the target GERAN/UTRAN cell to which PS handover will be performed.
Note: The decision if the eNodeB should always solicit a measurement report to
at least to allow the MS to respond with a preference for handover to either a
GERAN or UTRAN cell, is left to the work item stage.
3\. The eNodeB triggers PS handover to a GERAN/UTRAN neighbour cell by sending
a Relocation Required message (Relocation Type, Cause, Source ID, Target ID,
Source BSS To Target BSS Transparent Container) to the MME. The eNodeB shall
set Relocation Type to \"UE Involved in relocation of SRNS\" and Target ID
shall contain the identity of the target cell. The rest of the PS handover
procedure described from this point on assumes that a GERAN target cell has
been selected.
4\. The MME determines initiates the PS Handover resource allocation procedure
by sending a Forward Relocation Request (IMSI, Tunnel Endpoint Identifier
Control Plane, RANAP Cause, Target Cell Identifier, MM Context, PDP Contexts,
Packet Flow ID, PDP Context Prioritisation, Source BSS To Target BSS
Transparent Container in the BSS Container (content is FFS), Source eNodeB Id,
MME Address for control plane) message to the SGSN. If the MME supports PS
handover procedures then it has to allocate a valid PFI during the PDP Context
activation procedure. Each PDP context contains the GGSN Address for User
Plane and the Uplink TEID for data sent to this GGSN Address.
The MM context contains security related information, e.g. supported ciphering
algorithms as described in 3GPP TS 29.060 [11]. The relation between GSM and
eUTRAN security parameters is FFS.
The SGSN selects the ciphering algorithm to use. This algorithm will be sent
transparently from the SGSN to the UE/MS. The IOV-UI parameter generated in
the SGSN and used as input to the ciphering procedure will also be transferred
transparently from the SGSN to the UE/MS.
When the SGSN receives the Forward Relocation Request message the required
PDP, MM, SNDCP and LLC contexts are established and a new P-TMSI is allocated
for the MS. When this message is received by the SGSN it begins the process of
establishing PFCs for all PDP contexts.
When the SGSN receives the Forward Relocation Request message it extracts from
the PDP Contexts the NSAPIs and SAPIs and PFIs to be used. If for a given PDP
Context the SGSN does not receive a PFI from the MME, it shall not request the
target BSS to allocate TBF resources corresponding to that PDP Context. If
none of the PDP Contexts forwarded from the MME has a valid PFI allocated the
SGSN shall consider this as a failure case and the request for PS handover
shall be rejected.
The MME shall not indicate any XID parameter settings and the SGSN shall
therefore create a NAS container for PS HO indicating Reset (i.e. reset to
default XID parameters).
5\. The SGSN sends a PS Handover Request (Local TLLI, IMSI, Cause, Target Cell
Identifier, Source BSS to Target BSS Transparent Container (RN part), PFCs To
Be Set Up List, NAS container for PS HO) message to the target BSS. The SGSN
shall not request resources for PFCs associated with PDP contexts with maximum
bit rate for uplink and downlink of 0 kbit/s or for which the Activity Status
Indicator within the PDP Context indicates that no active RAB exists on the
source side.
6\. Based upon the ABQP for each PFC the target BSS makes a decision about
which PFCs to assign radio resources. The algorithm by which the BSS decides
which PFCs that need resources is implementation specific. Due to resource
limitations not all downloaded PFCs will necessarily receive resource
allocation. The target BSS allocates TBFs for each PFC that it can accommodate
plus it will allocate CS resources required to establish the CS bearer in the
target cell.
7\. The target BSS shall prepare the Target BSS to Source BSS Transparent
Container which contains an Inter-Domain Handover Command including the CN
part (NAS container for PS HO) and the RN part (PS and CS Radio Resources).
8\. Target BSS shall send the PS Handover Request Acknowledge message (Local
TLLI, List of Set Up PFCs, Target BSS to Source BSS Transparent Container)
message to the SGSN. Upon sending the PS Handover Request Acknowledge message
the target BSS shall be prepared to receive downlink LLC PDUs from the SGSN
for the accepted PFCs.
Any PDP contexts for which a PFC was not established are maintained in the
SGSN and the related SAPIs and PFIs are kept. These PDP contexts may be
modified or deactivated by the SGSN via explicit SM procedures upon the
completion of the routing area update (RAU) procedure performed during the
execution phase.
9\. The SGSN passes the assigned list of TEIDs for each PDP context for which
a PFC was assigned in the RAB setup information IE in the Forward Relocation
Response (Cause, List of Set Up PFCs, Target BSS to Source BSS Transparent
Container) in the BSS Container, Tunnel Endpoint Identifier Control Plane,
SGSN Address for User Traffic, Tunnel Endpoint Identifier Data II) message to
the MME. The NSAPIs of the active PDP Contexts received in the Forward
Relocation Request message for which the PS handover continues, i.e. for which
resources are allocated for the PFCs in the target BSS, are indicated in this
message.
The Tunnel Endpoint Identifier Data II, one information element for each PDP
context, is the tunnel endpoint of the SGSN and is used for data forwarding
from the Serving GW, via the new SGSN, to the target BSS. The SGSN activates
the allocated LLC/SNDCP engines as specified in 3GPP TS 44.064 for an SGSN
originated Reset or \'Reset to the old XID parameters\'.
When the MME receives the Forward Relocation Response message and it decides
to proceed with the handover, the preparation phase is finished and the
execution phase will follow.
#### 5.4.2.5 MT CS Call in Active Mode -- Execution Phase
{width="6.324305555555555in" height="7.007638888888889in"}
Figure 5.4.2.5-1: CS Page in eUTRAN, Call in GSM/WCDMA -- Execution Phase
1\. The Serving GW continues to receive IP packets from the PDN GW and
forwards them to the UE/MS via the eNodeB.
2\. The MME continues the PS handover by sending a Relocation Command (Target
BSS to Source BSS Transparent Container (Inter-Domain Handover Command with RN
part and CN part), RABs to be Released List, RABs Subject to Data Forwarding
List) message to the eNodeB. \"RABs to be released list\" will be the list of
all NSAPIs (RAB Ids) for which a PFC was not established \"RABs Subject to
Data forwarding list\" will be the list of all NSAPIs (RAB Ids) for which a
PFC was established.
3\. The eNodeB sends the Handover from eUTRAN Command message which includes a
PS Handover Command (RN part and CN part) created by the target BSS and the
minimum required set of SI/PSI information. It is assumed the eNodeB will be
able to provide the MS/UE with SI/PSI information corresponding to the target
GERAN cell as a result of receiving this information from target BSS in Target
BSS to Source BSS Transparent Container received during the preparation phase.
Before sending the Handover from eUTRAN Command message the uplink and
downlink data transfer shall be suspended in the eNodeB for the RABs that
require delivery order.
Upon the reception of the HANDOVER from eUTRAN Command message containing the
PS Handover Command message, the UE/MS shall associate its RAB IDs to the
respective PFIs based on the relation with the NSAPI and shall suspend the
uplink transmission of the user plane data.
NOTE 1: The Forward SRNS Context procedure (shown as occurring after this step
in clause 5.5.2.3.3 of TS 23.401 [3]) is left out here since the need for it
is still FFS.
4\. The UE/MS executes the handover according to the parameters provided in
the message delivered in step 4. The procedure is the same as in step 6 of the
Inter-SGSN A/Gb to A/Gb PS Handover with the additional function of
association of the received PFI and existing RAB Id related to the particular
NSAPI as described in clause 4.4.1 of TS 43.129.
5\. After accessing the cell using access bursts and receiving timing advance
information from the BSS in step 6, the MS processes the NAS container and
then sends one XID Response message to the new SGSN. The UE/MS sends this
message immediately after receiving the Packet Physical Information message
containing the timing advance or, in the synchronised network case,
immediately if the PS Handover Access message is not required to be sent.
Upon sending the XID Response message, the UE/MS shall resume the user data
transfer only for those NSAPIs for which there are radio resources allocated
in the target cell. For NSAPIs using LLC ADM for which radio resources were
not allocated in the target cell the MS may request for radio resources using
the legacy procedures.
NOTE 2: If the SGSN indicated Reset (i.e. reset to default parameters) in the
NAS container for PS HO included in the Handover from eUTRAN Command message
in order to avoid collision cases the mobile station may avoid triggering XID
negotiation for any LLC SAPI used in LLC ADM, but wait for the SGSN to do so.
In any case the UE/MS may avoid triggering XID negotiation for any LLC SAPI
used in LLC ABM, but wait for the SGSN to do so.
6\. As soon as the UE/MS completes the PS Handover procedure (by sending the
XID Response message) it establishes the main signalling link on the allocated
dedicated channel (i.e. MS/UE sends a SABM containing a layer 3 Service
Request message = PAGING RESPONSE to the BSS) and the BSS responds by sending
a UA. Upon receiving the SABM (containing a PAGING RESPONSE message) the BSS
sends a COMPLETE LAYER 3 INFORMATION message (containing a PAGING RESPONSE
message) to the MSC which indicates CS resources have been allocated in the
GERAN cell. When the RR connection is established the MS enters DTM and the CS
call establishment procedure completes.
NOTE 3: This step is not shown in clause 5.5.2.3.3 of TS 23.401 [3] since no
CS resource allocation is included in that handover procedure.
7\. Upon receiving the PS Handover Complete message, the SGSN send a Forward
Relocation Complete message to the MME to indicate completion of the PS
handover procedures. The MME responds with a Forward Relocation Complete
Acknowledge message.
8\. The SGSN sends an Update PDP Context Request (new SGSN Address, TEID, QoS
Negotiated) message to the Serving GW concerned. The Serving GW updates the
PDP context fields and returns an Update PDP Context Response (TEID) message.
From now on the Serving GW sends new incoming downlink IP packets to the SGSN
instead of to the MME.
NOTE 4: The additional steps of the Update Bearer Request - Update Bearer
Response exchange between the Serving GW and PDN GW are not shown but will be
performed as per the equivalent steps of clause 5.5.2.3.3 of TS 23.401 [3].
9\. If the SGSN indicated Reset (i.e. reset to default parameters) in the NAS
container for PS HO included in the Handover from eUTRAN Command message then
on receipt of the PS Handover Complete the SGSN initiates an LLC/SNDCP XID
negotiation for each LLC SAPI used in LLC ADM. In this case if the SGSN wants
to use the default parameters, it shall send an empty XID Command. If the SGSN
indicated \'Reset to the old XID parameters\' in the NAS container for PS HO,
no further XID negotiation is required for LLC SAPIs used in LLC ADM only.
The SGSN (re-)establishes LLC ABM for the PDP contexts which use acknowledged
information transfer. During the exchange of SABM and UA the SGSN shall
perform LLC/SNDCP XID negotiation.
10\. The UE/MS may trigger the Routing Area Update procedure when the sending
of uplink packet data is possible. The detailed steps performed are as per
clause 5.5.2.3.3 of TS 23.401 [3].
#### 5.4.2.6 MO CS Call in Active Mode -- Preparation Phase
{width="6.310416666666667in" height="4.928472222222222in"}
Figure 5.4.2.6-1: CS Call Request in eUTRAN, Call in GSM/WCDMA -- Preparation
Phase
1\. The eNodeB receives a CS Call Request from the UE/MS. The UE/MS only
transmits this request when a voice call is requested by the user and IMS is
not supported.
2\. The eNode may optionally solicit a measurement report from the UE/MS to
determine the target GERAN/UTRAN cell to which PS handover will be performed.
Note: The decision if the eNodeB should always solicit a measurement report to
at least to allow the MS to respond with a preference for handover to either a
GERAN or UTRAN cell, is left to the work item stage.
3\. The eNodeB triggers PS handover to a GERAN/UTRAN neighbour cell by sending
a Relocation Required message (Relocation Type, Cause, Source ID, Target ID,
Source BSS To Target BSS Transparent Container) to the MME. The eNodeB shall
set Relocation Type to \"UE Involved in relocation of SRNS\" and Target ID
shall contain the identity of the target cell. The rest of the PS handover
procedure described from this point on assumes that a GERAN target cell has
been selected.
4\. The MME determines initiates the PS Handover resource allocation procedure
by sending a Forward Relocation Request (IMSI, Tunnel Endpoint Identifier
Control Plane, RANAP Cause, Target Cell Identifier, MM Context, PDP Contexts,
Packet Flow ID, PDP Context Prioritisation, Source BSS To Target BSS
Transparent Container in the BSS Container (content is FFS), Source eNodeB Id,
MME Address for control plane) message to the SGSN. If the MME supports PS
handover procedures then it has to allocate a valid PFI during the PDP Context
activation procedure. Each PDP context contains the GGSN Address for User
Plane and the Uplink TEID for data sent to this GGSN Address.
The MM context contains security related information, e.g. supported ciphering
algorithms as described in 3GPP TS 29.060 [11]. The relation between GSM and
eUTRAN security parameters is FFS.
The SGSN selects the ciphering algorithm to use. This algorithm will be sent
transparently from the SGSN to the UE/MS. The IOV-UI parameter generated in
the SGSN and used as input to the ciphering procedure will also be transferred
transparently from the SGSN to the UE/MS.
When the SGSN receives the **Forward Relocation Request** message the required
PDP, MM, SNDCP and LLC contexts are established and a new P-TMSI is allocated
for the MS. When this message is received by the SGSN it begins the process of
establishing PFCs for all PDP contexts.
When the SGSN receives the **Forward Relocation Request** message it extracts
from the PDP Contexts the NSAPIs and SAPIs and PFIs to be used. If for a given
PDP Context the SGSN does not receive a PFI from the MME, it shall not request
the target BSS to allocate TBF resources corresponding to that PDP Context. If
none of the PDP Contexts forwarded from the MME has a valid PFI allocated the
SGSN shall consider this as a failure case and the request for PS handover
shall be rejected.
The MME shall not indicate any XID parameter settings and the SGSN shall
therefore create a NAS container for PS HO indicating Reset (i.e. reset to
default XID parameters).
5\. The SGSN sends a PS Handover Request (Local TLLI, IMSI, Cause, Target Cell
Identifier, Source BSS to Target BSS Transparent Container (RN part), PFCs To
Be Set Up List, NAS container for PS HO) message to the target BSS. The SGSN
shall not request resources for PFCs associated with PDP contexts with maximum
bit rate for uplink and downlink of 0 kbit/s or for which the Activity Status
Indicator within the PDP Context indicates that no active RAB exists on the
source side.
6\. Based upon the ABQP for each PFC the target BSS makes a decision about
which PFCs to assign radio resources. The algorithm by which the BSS decides
which PFCs that need resources is implementation specific. Due to resource
limitations not all downloaded PFCs will necessarily receive resource
allocation. The target BSS allocates TBFs for each PFC that it can accommodate
plus it will allocate CS resources required to establish the CS bearer in the
target cell.
7\. The target BSS shall prepare the Target BSS to Source BSS Transparent
Container which contains an Inter-Domain Handover Command including the CN
part (NAS container for PS HO) and the RN part (PS and CS Radio Resources).
8\. Target BSS shall send the PS Handover Request Acknowledge message (Local
TLLI, List of Set Up PFCs, Target BSS to Source BSS Transparent Container)
message to the SGSN. Upon sending the PS Handover Request Acknowledge message
the target BSS shall be prepared to receive downlink LLC PDUs from the SGSN
for the accepted PFCs.
Any PDP contexts for which a PFC was not established are maintained in the
SGSN and the related SAPIs and PFIs are kept. These PDP contexts may be
modified or deactivated by the SGSN via explicit SM procedures upon the
completion of the routing area update (RAU) procedure performed during the
execution phase.
9\. The SGSN passes the assigned list of TEIDs for each PDP context for which
a PFC was assigned in the RAB setup information IE in the Forward Relocation
Response (Cause, List of Set Up PFCs, Target BSS to Source BSS Transparent
Container) in the BSS Container, Tunnel Endpoint Identifier Control Plane,
SGSN Address for User Traffic, Tunnel Endpoint Identifier Data II) message to
the MME. The NSAPIs of the active PDP Contexts received in the Forward
Relocation Request message for which the PS handover continues, i.e. for which
resources are allocated for the PFCs in the target BSS, are indicated in this
message.
The Tunnel Endpoint Identifier Data II, one information element for each PDP
context, is the tunnel endpoint of the SGSN and is used for data forwarding
from the Serving GW, via the new SGSN, to the target BSS. The SGSN activates
the allocated LLC/SNDCP engines as specified in 3GPP TS 44.064 for an SGSN
originated Reset or \'Reset to the old XID parameters\'.
When the MME receives the Forward Relocation Response message and it decides
to proceed with the handover, the preparation phase is finished and the
execution phase will follow.
#### 5.4.2.7 MO CS Call in Active Mode -- Execution Phase
{width="6.507638888888889in" height="7.226388888888889in"}
Figure 5.4.2.7-1: CS Call Request in eUTRAN, Call in GSM/WCDMA -- Execution
Phase
1\. The Serving GW continues to receive IP packets from the PDN GW and
forwards them to the UE/MS via the eNodeB.
2\. The MME continues the PS handover by sending a Relocation Command (Target
BSS to Source BSS Transparent Container (Inter-Domain Handover Command with RN
part and CN part), RABs to be Released List, RABs Subject to Data Forwarding
List) message to the eNodeB. \"RABs to be released list\" will be the list of
all NSAPIs (RAB Ids) for which a PFC was not established \"RABs Subject to
Data forwarding list\" will be the list of all NSAPIs (RAB Ids) for which a
PFC was established.
3\. The eNodeB sends the Handover from eUTRAN Command message which includes a
PS Handover Command (RN part and CN part) created by the target BSS and the
minimum required set of SI/PSI information. It is assumed the eNodeB will be
able to provide the MS/UE with SI/PSI information corresponding to the target
GERAN cell as a result of receiving this information from target BSS in Target
BSS to Source BSS Transparent Container received during the preparation phase.
Before sending the Handover from eUTRAN Command message the uplink and
downlink data transfer shall be suspended in the eNodeB for the RABs that
require delivery order.
Upon the reception of the HANDOVER from eUTRAN Command message containing the
PS Handover Command message, the UE/MS shall associate its RAB IDs to the
respective PFIs based on the relation with the NSAPI and shall suspend the
uplink transmission of the user plane data.
NOTE 1: The Forward SRNS Context procedure (shown as occurring after this step
in clause 5.5.2.3.3 of TS 23.401 [3]) is left out here since the need for it
is still FFS.
4\. The UE/MS executes the handover according to the parameters provided in
the message delivered in step 4. The procedure is the same as in step 6 of the
Inter-SGSN A/Gb to A/Gb PS Handover with the additional function of
association of the received PFI and existing RAB Id related to the particular
NSAPI as described in clause 4.4.1 of TS 43.129.
5\. After accessing the cell using access bursts and receiving timing advance
information from the BSS in step 6, the MS processes the NAS container and
then sends one XID Response message to the new SGSN. The UE/MS sends this
message immediately after receiving the Packet Physical Information message
containing the timing advance or, in the synchronised network case,
immediately if the PS Handover Access message is not required to be sent.
Upon sending the XID Response message, the UE/MS shall resume the user data
transfer only for those NSAPIs for which there are radio resources allocated
in the target cell. For NSAPIs using LLC ADM for which radio resources were
not allocated in the target cell the MS may request for radio resources using
the legacy procedures.
NOTE 2: If the SGSN indicated Reset (i.e. reset to default parameters) in the
NAS container for PS HO included in the Handover from eUTRAN Command message
in order to avoid collision cases the mobile station may avoid triggering XID
negotiation for any LLC SAPI used in LLC ADM, but wait for the SGSN to do so.
In any case the UE/MS may avoid triggering XID negotiation for any LLC SAPI
used in LLC ABM, but wait for the SGSN to do so.
6\. As soon as the UE/MS completes the PS Handover procedure (by sending the
XID Response message) it establishes the main signalling link on the allocated
dedicated channel (i.e. MS/UE sends a SABM containing a layer 3 Service
Request message = CM SERVICE REQUEST to the BSS) and the BSS responds by
sending a UA. Upon receiving the SABM (containing a CM SERVICE REQUEST
message) the BSS sends a COMPLETE LAYER 3 INFORMATION message (containing a CM
SERVICE REQUEST message) to the MSC which indicates CS resources have been
allocated in the GERAN cell. When the RR connection is established the MS
enters DTM and the CS call establishment procedure completes.
NOTE 3: This step is not shown in clause 5.5.2.3.3 of TS 23.401 [3] since no
CS resource allocation is included in that handover procedure.
7\. Upon receiving the PS Handover Complete message, the SGSN send a Forward
Relocation Complete message to the MME to indicate completion of the PS
handover procedures. The MME responds with a Forward Relocation Complete
Acknowledge message.
8\. The SGSN sends an Update PDP Context Request (new SGSN Address, TEID, QoS
Negotiated) message to the Serving GW concerned. The Serving GW updates the
PDP context fields and returns an Update PDP Context Response (TEID) message.
From now on the Serving GW sends new incoming downlink IP packets to the SGSN
instead of to the MME.
NOTE 4: The additional steps of the Update Bearer Request - Update Bearer
Response exchange between the Serving GW and PDN GW are not shown but will be
performed as per the equivalent steps of clause 5.5.2.3.3 of TS 23.401 [3].
9\. If the SGSN indicated Reset (i.e. reset to default parameters) in the NAS
container for PS HO included in the Handover from eUTRAN Command message then
on receipt of the PS Handover Complete the SGSN initiates an LLC/SNDCP XID
negotiation for each LLC SAPI used in LLC ADM. In this case if the SGSN wants
to use the default parameters, it shall send an empty XID Command. If the SGSN
indicated \'Reset to the old XID parameters\' in the NAS container for PS HO,
no further XID negotiation is required for LLC SAPIs used in LLC ADM only.
The SGSN (re-)establishes LLC ABM for the PDP contexts which use acknowledged
information transfer. During the exchange of SABM and UA the SGSN shall
perform LLC/SNDCP XID negotiation.
10\. The UE/MS may trigger the Routing Area Update procedure when the sending
of uplink packet data is possible. The detailed steps performed are as per
clause 5.5.2.3.3 of TS 23.401 [3].
#### 5.4.2.8 MT CS Call in Idle Mode
One solution is to reuse the MT CS Call in Active mode procedure as described
above with the following modifications:
\- When the MME receives a CS Page from the MSC it forwards the CS Page
notification to one or more eNBs.
\- Upon receiving a CS Page notification each eNB sends a page notification to
the target UE in an attempt to determine the serving eNB.
\- The UE responds to the CS Page notification by triggering RRC connection
establishment and then awaits further instructions from the serving eNB.
\- The eNodeB indicates a single packet flow requires PS Handover (PFI = 1
associated with LLC SAPI 1). The default XID parameters are always associated
with this PFI along with a default PDP Context (i.e. a null PDP Context can be
sent to the SGSN).
\- The eNodeB may choose to invoke the optional Measurement Report
Solicitation so that the UE/MS is at minimum informed that a PS Handover is
pending (i.e. so it can implicitly perform a state transition to Active mode).
The execution phase is the same as for the MT CS Call in Active mode except
that there are no incoming IP packets to be delivered to the UE/MS.
Other alternatives are cell re-selection, redirection or inter RAT cell
change.
#### 5.4.2.9 MO CS Call in Idle Mode
One solution is to reuse the MO CS Call in Active mode procedure as described
above with the following modifications:
\- The UE trigger an RRC connection establishment (with special cause for MO
CS Calls) and then awaits further instructions from the serving eNB.
\- The eNodeB may choose to invoke the optional Measurement Report
Solicitation so that the UE/MS is at minimum informed that its CS Call Request
has been accepted and a PS Handover is pending (i.e. so it can implicitly
perform a state transition to Active mode).
The execution phase is the same as for the MO CS Call in Active mode except
that there are no incoming IP packets to be delivered to the UE/MS.
Other alternatives are cell reselection, redirection or inter RAT cell change.
### 5.4.3 Co-existence with IMS based services
The \"Page in eUTRAN, Call in GSM/WCDMA\" solution can co-exist with IMS
features as MTSI, ICS, SR VCC. A UE can in principle support both MTSI and
\"Page in eUTRAN, Call in GSM/WCDMA\" simultaneously but it is expected that
an MTSI capable UE would use MTSI for voice calls in a MTSI enabled network.
### 5.4.4 Roaming aspects
To support \"Page in eUTRAN, Call in GSM/WCDMA\" at roaming the visited NW and
the UE need to support the feature.
### 5.4.5 Security aspects
No security impacts are foreseen.
### 5.4.6 Charging aspects
No charging impacts are foreseen.
### 5.4.7 Legal requirements aspects
The page in \"Page in eUTRAN, Call in GSM/WCDMA\" solution relies on 2G/3G
coverage to provide emergency services. No impacts on Legal intercept are
foreseen.
### 5.4.8 Assessment
The \"Page in eUTRAN, Call in GSM/WCDMA\" solution leverages on existing 2G/3G
mechanisms. The level of impact on the 2G/3G CN is minor, i.e. no new protocol
is required.
\"Page in eUTRAN, Call in GSM/WCDMA\" should be understood as a cost efficient
\"gap filler\" to provide CS voice services that offers the operator a bit
more time to migrate to MTSI when deploying eUTRAN. During a CS voice service
there may be a degradation of the PS service.
## 5.5 Alternative 5 - SIP based approach
### 5.5.1 Key aspects of delivering a successful solution
**One of the most valuable elements of the legacy CS domain is the
standardised voice call services in the MSC and UE. These are provided via the
DTAP protocol (TS 24.008), hence in order to leverage this value a solution
needs to be found which enables the retention of the 24.008 signalling over PS
bearers. Specifically a solution needs to be found which addresses the
following aspects:**
\- Communication of 24.008 signalling over PS RABs is not defined; a transport
mechanism is required to communicate 24.008 over PS RABs. This transport
mechanism will need to address not only the encapsulation of 24.008, but also
the address discovery and routing.
* [A SIP based solution can do this using standard SIP discovery, registration and routing procedures]
\- Use of 24.008 call control with PS RABs will require 24.008 extensions.
Currently, it is not possible to communicate SDPs (IP address/port numbers,
codecs) between two end-points using 24.008.
* [A SIP based solution can do this using MIME encapsulation of 24.008]
\- Most proposed mechanisms to achieve handover between EPC and legacy CS
domain will require some functionality in the MME, however the complexity of
this mechanism needs to be kept simple if the cost and performance of the EPC
is not to be adversely affected.
* [A SIP based solution can do this a number of ways, one of which would be to utilise the approach used to address the problem of Single Radio Voice Call Continuity]
\- Key to providing an acceptable voice service is the ability to control the
QoS of the bearers used for the user plane. Any solution will need to have
access to a QoS control mechanism in EPC in order to achieve this.
* [A SIP based solution can do this, since the SDP information can be provided over the Rx interface into the standard PCC architecture over the Rx interface]
### 5.5.2 Conclusion and recommendation
A SIP based approach has the ability to address many of the key challenges of
keeping the core value of the CS Domain, namely providing the ability to
retain TS 24.008 (DTAP) standardised signalling, and using this to carry
forward legacy CS Services over the newly define Evolved Packet Core. However
it is recognised that there may be other viable approaches and it is
recommended that solutions to the issues identified in clause 5.5.1 be clearly
addressed in this technical report as part of the evaluation process of all
the proposed solutions.
## 5.6 Alternative 6 - Combined solution
### 5.6.0 General
This solution is a combination of Alternative 1 - Evolved MSC (as described in
clause 5.1) enabling CS domain voice calls and SMS for an EPS attached UE, and
Alternative 3 - Page in eUTRAN, Call in GSM/WCDMA (as described in clause 5.4)
enabling re-direction of an EPS attached UE towards 2G/3G access before
establishment of a MO or MT CS voice call.
### 5.6.1 Reference architecture
#### 5.6.1.1 General
The combination of the reference architecture is straight forward, as the
reference point between MME and (e)MSC is common to both alternatives. The
reference point between UE and eMSC comes from Alternative 1. Alternative 1
uses the term eMSC whereas Alternative 3 uses MSC. As both alternatives are
adding Rel-8 functionality onto the MSC it is suggested to use the term MSC.
Figure 5.6.1.1-1 shows the non-roaming architecture, Figure 5.6.1.1-2 the
roaming architecture.
Figure 5.6.1.1-1: Non-Roaming Architecture
Figure 5.6.1.1-2: Roaming Architecture
The proposal reuses the concepts from 2G/3G of the Gs interface between the
MSC Server and the SGSN. Thus for the Location Update procedure and for Paging
messages a \"Gs like\" interface over reference point Z2 between the MME and
the MSC Server is used.
The support of reference points Z1 and Rx by the MSC is optional, depending on
the deployment characteristics chosen by the operator. If the operator chooses
the deployment characteristic where the MSC Server controls establishment of
voice calls and handling of SMS under E-UTRAN coverage, Z1 and Rx need to be
supported by the MSC.
#### 5.6.1.2 Required functionality in network elements
**MSC**
\- Gs-like registration and paging towards MME for a UE attached over EPS
access
\- Optional Call and SMS control for UE using secure and reliable IP transport
(replacing use of Mc for channel assignment with Rx using PCC for bearer
establishment)
\- Optional handover preparation and execution
\- Optional handover signalling
**MME**
\- Gs-like registration and paging
\- Optional handover signalling exchange with the MSC for preparation and
execution
**UE**
\- Gs-like registration and paging
\- Redirection to CS capable legacy access for MO and MT voice calls
\- CS domain call and SMS control signalling over EPS using secure and
reliable IP transport
#### 5.6.1.3 Reference points
**Z1** Reference point between UE and MSC
**Z2** Reference point between MME and MSC
#### 5.6.1.4 Protocol Stacks
A possible protocol stack for control plane over Z1 is illustrated in figure
5.6.1.4-1. The decision about use of SCTP or another protocol can be left open
for stage 3 discussions and decision.
{width="6.665972222222222in" height="2.53125in"}
Figure 5.6.1.4-1: Protocol stack for control plane over Z1
The protocol stack for user plane over Z1 is illustrated in figure 5.6.1.4-2.
{width="6.580555555555556in" height="2.2493055555555554in"}
Figure 5.6.1.4-2: Protocol stack for user plane over Z1
### 5.6.2 Procedures
#### 5.6.2.1 CS attachment
CS attachment is done as proposed in Alternative 3 (CS location update
procedure via MME and Gs-like interface to MSC, during EPS Attach) (see
5.4.2.1 for more details).
The combined solution requires that one more IE inserted by the MSC into the
Location Update Ack to be passed down to the UE. This IE would hold an
indication about the support of \'CS domain call and SMS control signalling
over EPS\' that may be the IP address of the MSC, or just a bit-indication
triggering the UE to do an eMSC discovery as described in Alternative 1.
#### 5.6.2.2 Location Update
Done as proposed in Alternative 3.
Note: If a UE has an ongoing MO or MT call over EPS, no Location Update shall
be sent to the eMSC, e.g. the UE should not initiate a combined TA/LA Update
procedure.
#### 5.6.2.3 Deregistration
Done as proposed in Alternative 3.
#### 5.6.2.4 eMSC Discovery
Done as proposed in Alternative 1.
#### 5.6.2.5 Gs-like Paging
Done as proposed in Alternative 3.
The combined solution requires that the UE, upon receiving the Gs-like paging
does either of the following:
\- if the UE has obtained the IP address of an eMSC at time of location update
and the UE has \'CS domain call and SMS control signalling over
EPS\'-capability then it will answer the paging request via EPS, and a secure
IP connectivity will be established between UE and MSC
\- if the UE has no IP address of an eMSC, or is not \'CS domain call and SMS
control signalling over EPS\'-capable then it will continue as described in
Alternative 3.
#### 5.6.2.6 MT Call Setup
MT call setup follows the Gs-like Paging as described in 5.6.2.5.
\- If the UE has answered the paging via EPS then MT call setup takes place as
described in Alternative 1 (5.1.2.5).
\- If the UE has answered the paging via legacy CS access then MT call setup
takes place as described in Alternative 3.
#### 5.6.2.7 MO Call Setup
\- If the UE has obtained the IP address of an eMSC at time of location update
and the UE has \'CS domain call and SMS control signalling over
EPS\'-capability then it will initiate a secure IP connectivity with the MSC,
and MO call setup takes place as described in Alternative 1 (5.1.2.5).
\- If the UE has no IP address of an eMSC, or is not \'CS domain call and SMS
control signalling over EPS\'-capable then it perform MO call setup as
described in Alternative 3.
#### 5.6.2.8 MO and MT SMS
Done as proposed in Alternative 1 (5.1.2.6).
#### 5.6.2.9 HO from E-UTRAN to GSM/UMTS CS
Done as proposed in Alternative 1 (5.1.2.7).
#### 5.6.2.10 HO from GSM/UMTS CS to E-UTRAN
Done as proposed in Alternative 1 (5.1.2.8).
### 5.6.3 Co-existence with IMS based services
See clauses 5.1.3 and 5.4.3.
### 5.6.4 Roaming aspects
#### 5.6.4.1 \'CS domain call and SMS control signalling over EPS\' support in
the VPLMN and UE
This allows full re-use of CS domain roaming agreements and existing inter-
operator accounting mechanisms (TAP records exchange) for CS Domain services
over evolved PS access. In case of a handover between E-UTRAN and GSM/UMTS CS
the user experience will be comparable to the one in non-roaming case as the
handover is performed solely in the VPLMN, which optimizes the user plane
routing.
#### 5.6.4.2 No \'CS domain call and SMS control signalling over EPS\' support
in the VPLMN or UE
Redirection of voice calls to GSM/UMTS CS takes place if this feature is
supported in UE and VPLMN.
### 5.6.5 Security aspects
See clauses 5.1.5 and 5.4.5.
### 5.6.6 Charging aspects
See clauses 5.1.6 and 5.4.6.
### 5.6.7 Legal requirements aspects
See clauses 5.1.7 and 5.4.7.
### 5.6.8 Assessment
The \'Combined solution\' alternative is a full solution according to the
scope this study, i.e. it is fulfilling all identified overall and
architectural requirements.
The main design-principles of this solution are:
\- Maximal re-use of CS Domain mechanisms and deployed infrastructure thus
securing operators\' investments in legacy CS Domain and radio access
equipment and services.
The \'Combined solution\' alternative allows operators to offer legacy CS
domain services fully leveraging the already deployed evolved access coverage,
and should be understood as cost-efficient gap-filler until MTSI can be
offered with sufficient VoIP-capable PS coverage.
The combined alternative is beneficial because it allows a migration for
operators from redirection of voice calls to GSM/WCDMA to doing CS domain
controlled voice calls over EPS. It is also be beneficial for roaming
scenarios, if at least redirection of voice calls to GSM/WCDMA is available in
all networks and all UEs.
# 6 Conclusion
Four separate technical alternatives for providing CS services over the EPS
have been analysed in this TR in various levels of detail:
\- Alternative 1 - Evolved MSC
\- Alternative 2 - IWF between EPS and MSC
\- Alternative 3 - Iu-CS based solution
\- Alternative 5 - SIP based approach
Alternative 4 - Page in eUTRAN, Call in GSM/WCDMA -- also has been studied in
the TR. Unlike the above four alternatives, this alternative has been designed
so that the UE is camped on the EPS _but_ may be redirected to a CS capable
access for CS service delivery, so that the actual service delivery occurs via
a legacy CS system rather than the LTE access of the EPS itself. This solution
has become part of 3GPP Release 8 as \"CS Fallback\" and is specified in TS
23.272 [20].
Concerning the other alternatives (1, 2, 3 and 5), the following observations
can be made:
\- Alternative 1 is a feasible solution for the delivery of CS services via
the EPS. However, it impacts the legacy CS systems by requiring an enhanced
MSC, or eMSC, in addition to some smaller impacts on the EPS.
\- Alternative 2 also is a feasible solution. It is similar to alternative 1
but avoids its disadvantage of impacting the legacy CS network by
\"outsourcing\" the necessary adaptation functionality into a GAN-style
interworking function. In fact, alternative 2 becomes very similar to
alternative 1 when the IWF is integrated in the MSC (yielding an eMSC), and
the \"container\" protocol that is part of alternative 1 is based on GAN.
Compared with alternative 1, this solution is significantly less intrusive for
CS and EPS in terms of minimising impacts on those systems. It is also more
cost-efficient and simpler due to a broader reuse of existing 3GPP
functionality.
\- Alternative 3 does not fulfil the baseline requirements in regard of its
impact on the overall system. Effectively, it would introduce a CS component
into the EPS and thereby destroy EPS\'s all-IP nature.
\- Alternative 5 uses a similar approach to alternative 1, but SIP for the
communication between the network and the UE. This solution is much more
challenging than alternatives 1 and especially 2, concerning the feasibility
of SIP encapsulation of 24.008 signalling, the implementation of corresponding
interworking between \"classic\" 24.008 and \"SIP encapsulated\" 24.008, and
the UE impact by adding another voice stack on top of CS and IMS.
It should be noted that alternative 2 is similar to alternative.5 but avoids
the problems inherent in alternative 5 by using a GAN-style IWF as the basis
for UE-to-IWF communication -- changes in the MSC are avoided, and the UE has
only 2 voice stacks, namely CS and IMS.
An additional solution -- alternative 6 - that combines alternative 1 with
alternative 4 has also been described in the TR in order to analyse the
migration scenarios when the fallback solution is implemented together with a
\"true\" CS over PS solution. In practice, a similar combined solution could
be devised when combining any of the \"true\" CS over PS solutions with
alternative 4.
In summary, the following conclusions can be drawn from the CS over PS study:
1\. Where there is overlapping coverage between LTE/EPS and legacy CS systems,
alternative 4 - Page in eUTRAN, Call in GSM/WCDMA, may be operator\'s choice.
2\. Where there is no overlapping coverage between LTE and legacy CS systems,
or where the above issues are not acceptable to an operator, CS services over
EPS/LTE may best be delivered using alternative 2. It provides the means for
delivering CS services over EPS via LTE access that has the least overall
impact of all 4 such alternatives studied in the TR. It requires the
capability in the UE to use its CS stack over an LTE bearer, and an
interworking function in the network between the EPS and the MSC.
Functionality is reused from SRVCC for mobility to legacy systems, and from
GAN for service interworking, and from CSFB for ISR interworking, so that the
overall effort to implement this alternative is minimised compared to the
other 3 competing alternatives.
#