# Foreword
This Technical Report has been produced by the 3^rd^ Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
This TR studies various alternatives for the stage 2 control plane LCS
Reference Architecture for Evolved Packet Core.
This document does not document the radio signal measure and/or position
methods for the E-UTRAN. Those are addressed in RAN specifications.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or non‑specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the > case of a reference to a 3GPP document (including a GSM document), > a non-specific reference implicitly refers to the latest version > of that document _in the same Release as the present document_.
[1] 3GPP TR 23.869: \"Support for IMS Emergency Calls over GPRS and EPS\".
[2] 3GPP TS 23.271: \"Functional stage 2 description of Location Services
(LCS)\".
[3] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
# 3 Definitions, symbols and abbreviations
Delete from the above heading those words which are not applicable.
Clauses numbering depends on applicability and should be renumbered
accordingly.
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [3] apply. A term defined in the present document takes precedence
over the definition of the same term, if any, in TR 21.905 [3].
## 3.3 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[3] apply. An abbreviation defined in the present document takes precedence
over the definition of the same abbreviation, if any, in TR 21.905 [3].
# 4 Overall Requirements
## 4.1 Solution Characteristics
# 5 Architectural Requirements and Considerations
## 5.1 Basic Assumptions
As a basis for the further development work on LCS in evolved packet system,
the following assumptions apply:
\- Terrestrial positioning methods are Access Network specific, although
commonalties should be encouraged between Access Networks;
\- Commercial location services are only applicable for an UE with a valid SIM
or USIM;
\- Depending on the regional requirements, location services may be required
for Emergency Services and/or Lawful Intercept for an UE that does not a valid
SIM or USIM;
\- The provision of the location services in the Access Network is optional
through support of the specified method(s);
\- The provision of location services is optional;
\- LCS is applicable to any target UE whether or not the UE supports LCS, but
with restrictions on choice of positioning method or notification of a
location request to the UE user when LCS or individual positioning methods,
respectively, are not supported by the UE;
\- LCS service continuity should be possible for the cases where radio access
types (networks) and/or associated positioning methods may have changed, this
includes the interworking between eUTRAN and the legacy access networks (e.g.
GERAN, UTRAN etc.);
\- The location information may be used for internal system operations to
improve system performance;
\- It may be necessary to support LCS signalling between separate access
networks via the core network.
> \- It shall be possible for more than one LCS Client to request and obtain
> the location of the same target UE at the same time.
>
> \- The UE shall provide its positioning capabilities to the network on
> initial Attach. Minimally, positioning capabilities shall indicate the
> positioning protocol(s) supported by the UE if any and whether the UE
> supports notification and privacy verification in association with E-UTRAN
> access. Further capability negotiation may then be performed by the
> positioning protocol(s).
Editor\'s note: Positioning capabilities for E-UTRAN access and for inter-RAT
handover are FFS.
### 5.1.1 Types of Location Request
The enhanced location services for e-UTRAN access shall support Immediate
Location Request and Deferred Location Request.
#### 5.1.1.1 Immediate Location Request
Request for location where the LCS Server replies immediately to the LCS
Client with the current location estimate if this could be obtained.
#### 5.1.1.2 Deferred Location Request
Request for location contingent on some current or future events where the
response from the LCS Server to the LCS Client may occur sometime after the
request was sent.
##### 5.1.1.2.1 Types of event
a) UE available: Any event in which the MSC/SGSN/MME has established a contact
with the UE. Note, this event is considered to be applicable when the UE is
temporarily unavailable due to inaction by the user, temporarily loss of radio
connectivity or IMSI detach and so on. Note that IMSI detach is only
applicable in the case the UE has previously been registered and information
is still kept in the node. The UE Available event only requires one response
and after this response, the UE Available event is concluded.
b) Change of Area: An event where the UE enters or leaves a pre-defined
geographical area or if the UE is currently within the pre-defined
geographical area. The LCS client defines the target area as a geographical
area, as an E.164 country code for a geographic area, as a PLMN identity or as
a geopolitical name of the area. The LCS server may translate and define the
target area as the identities of one or more radio cells, location areas,
routing areas, country code or PLMN identity. The target UE must not give the
target UE user access to the area definitions and network identities. The
change of area event may be reported one time only, or several times. The area
event report must not be repeated more often than allowed by the LCS client.
The change of area event report shall contain an indication of the event
occurrence. The location estimate may be included in the report.
c) Periodic Location: An event where a defined periodic timer expires in the
UE and activates a location report or a location request.
d) Other events are FFS.
## 5.2 Architectural Requirements
The positioning of the UE is a service provided by one or more of the Access
Network, UE and EPC.
The enhanced location service architecture shall be able to operate when the
Idle-mode signalling reduction (ISR) feature (as defined in TS 23.401) is
active, resulting in more than one serving CN node.
In particular, this service may be provided by a location service function,
provisionally denoted here as an Evolved SMLC (E-SMLC).
Editor\'s note: The location of E-SMLC is FFS.
The E-SMLC facilitates determination of the locations of User Equipments. The
E-SMLC shall be capable of communicating directly or indirectly with serving
eNodeB and the UE to provide positioning assistance data and measurement
instructions and retrieve the positioning measurements.
Editor\'s note: The protocols to be used by E-SMLC for the communication with
UE, eNodeB and MME are FFS.
NOTE: The definition of interfaces to/from E-SMLC does not preclude the
possibility of E-SMLC\'s integration with other network entities in
implementation.
The E-SMLC shall be able to exchange location information with the core
network by direct or indirect means.
The enhanced location service architecture for E-UTRAN shall support location
service continuity for one or more of the following mobility scenarios:
\- Inter eNodeB handover without MME relocation;
\- Inter eNodeB handover with MME relocation;
\- Intra eNodeB handover;
\- Mobility between different Radio Access Technologies (e.g. to/from E-UTRAN
access network from/to UTRAN access network).
The architecture shall be able to support all E-UTRAN positioning methods that
are being specified by the RAN WGs.
Optionally, location information may also be communicated between GMLCs,
located in the same or a different PLMN, via the specified GMLC to GMLC
interface.
It shall be possible for the E-UTRAN capable UE (active or idle) in a network
to use location services crossing different access networks (e.g. GERAN, UTRAN
and E-UTRAN).
The architecture shall not preclude implementation of multiple E-SMLC, e.g.
for load sharing purposes.
## 5.3 Session Scenarios
### 5.3.1 Mobile Terminating Location Request
### 5.3.2 Network Originating Location Request
### 5.3.3 Network Induced Location Request
# 6 Architectural Alternatives
## 6.1 Architectural Alternative #1
The architectural alternative defined here employs an Evolved SMLC attached to
both the GMLC and MME.
### 6.1.1 Objectives
The main objectives of this solution are as follows:
\- support location of an IMS emergency call
\- avoid impacts to a location session due to an inter-eNodeB handover and MME
relocation
\- support MO-LR and MT-LR services
### 6.1.2 Architectural Details
#### 6.1.2.1 Architecture for NI-LR
An architecture to support an NI-LR for emergency calls is shown in Figure
6.1-1. The main distinguishing characteristic is an Evolved SMLC (E-SMLC),
analogous to an SMLC for GSM or an SAS for WCDMA, that interacts directly with
the GMLC. This may avoid the need to stop and restart a location session for
both an inter-eNodeB handover and inter-MME relocation. Some arbitrary
designations are used for the new interfaces which comprise an SLs interface
between the E-SMLC and MME, an SLg interface between the E-SMLC and GMLC and
an SLg* interface between the MME and GMLC. The SLg* interface might be
functionally similar to the existing Lg interface defined in TS 23.271 between
a GMLC and either an SGSN or MSC. The SLg* and SLg interfaces both disappear
if the E-SMLC and GMLC are logically combined (e.g. physically or via a
proprietary connection). In addition to the new interfaces, the existing
S1-MME interface would be modified through the addition of some new messages
and parameters and the LTE-Uu interface might be modified at an upper level
through use of a new or modified positioning protocol.
Some optimization of this architecture is possible -- e.g. more efficient
signalling between the E-SMLC and eNodeB to bypass the MME -- but that does
not change most of the interactions and protocol layering and could be added
after more basic capabilities are defined and verified.
Figure 6.1-1: LCS Control Plane Architecture employing an Evolved SMLC
(E-SMLC) attached to a GMLC and MME
#### 6.1.2.2 Architecture for MT-LR and MO-LR
An extension to the NI-LR architecture to support an MT-LR and MO-LR is shown
below.
Figure 6.1-2: LCS Control Plane Architecture for an MT-LR and MO-LR
The Lh (MAP) interface above would need to be modified to enable the HSS to
provide the MME address and VPLMN identity to the HGMLC. Possibly, the Lh
interface might be migrated to an IP based interface.
The Lg interface might also be slightly modified to enable the HGMLC to convey
the MME address to the VGMLC. As in the case of the Lh interface, the Lg
interface might be migrated to an IP based interface.
#### 6.1.2.3 Provision of MME Address to GMLC for an NI-LR
Editors Note: The content of this clauses is considered still under study.
To support location of emergency calls with GSM and GPRS access, the MSC and
SGSN, respectively, need to be aware of the emergency call in order to provide
the GMLC with enough information to enable subsequent location requests which
are always sent via the MSC and SGSN. The two critical pieces of information
needed by the GMLC are some identity information for the UE (e.g. IMSI,
MSISDN, IMEI or, in North America, ESRK) and the address of the MSC or SGSN.
In the case of an emergency call over LTE with alternative #1, a GMLC may not
be able to infer the identity of the MME from the serving cell even if
received because of the ability in EPS to assign a choice of MME for any
particular eNodeB. Hence the GMLC needs to receive the MME identity from
another source. One choice is the MME but that requires the MME to be aware of
an emergency call origination. Another possibility is the HSS but that
requires support from the HSS. Depending on the HSS requires the UE to be
valid so that it has an HSS entry, which may not be the case for emergency
call support where UEs without a subscription must be supported by some local
regulations.
To support LTE access for IMS emergency calls, it seems likely (e.g. according
to some recent P-CRs to TR 23.869) that a UE would either perform an emergency
attach to the EPS (e.g. using an emergency APN to indicate an emergency attach
to the MME) or at least request an emergency bearer from the MME in the case
of a previous normal attach. This means the MME would be aware of the
emergency call and thus able to inform the GMLC (as for an emergency call via
an SGSN or MSC).
The exception would be an emergency call attempt that was not recognized by a
non-roaming UE and that was permitted by a P-CSCF in the home network instead
of being rejected with a 380 response plus emergency indication. Even though a
P-CSCF that accepted such a call might later return an emergency indication to
the UE -- e.g. in a 1xx or 200 OK response -- it might be too late for the UE
to request the MME to change the bearer. In that case, the MME would remain
unaware of the emergency call forcing the GMLC to query the MME identity from
the HSS. To avoid the need to support such a query -- and simplify location
support for IMS emergency calls -- a home network that wished to employ a
control plane solution for location could have a policy of always rejecting
emergency calls that were not recognized by the UE using a 380 alternative
service response indicating the need for an Emergency Registration. To perform
the Emergency registration, the UE would first have to obtain an emergency
bearer in the home network which would flag the call to the MME. With such a
policy, it would become unnecessary to provide HSS support. Note that if an
HSS query is supported, there would be some differences with the emergency
call location solution for GSM and WCDMA CS access where the MSC and SGSN,
respectively, provide their address to the GMLC.
It should be remarked that the probability of a UE not recognizing an
emergency call dialled in the home network should be very low since some
unusual emergency number would have to be used -- e.g. not a number defined
for the home country if the UE was obtained locally nor one of the more
standard numbers like 911 or 112. Hence a policy of enforcing emergency
registration in these cases should not be a burden. For example, emergency
registration will not need to be enforced for the more normal case of a non-
roaming UE that does recognize an emergency call.
### 6.1.3 Information Flows and Protocols
#### 6.1.3.1 Location Support for IMS Emergency Calls
The figure below shows how location could be supported for an IMS emergency
call.
Figure 6.1-3: Location of an IMS Emergency Call
1\. Following an emergency call invocation from the user, the UE will attach
to the EPS if not already attached and obtain a suitable IP Bearer for the
user plane in a serving gateway and PDN gateway. The details of this are still
be agreed, but it is assumed that some emergency indication (e.g. an emergency
APN) will be used for the attach or for the bearer allocation that will inform
the MME that an Emergency Call is in progress. In the case that the UE does
not detect the emergency call (e.g. does not recognize the dialled emergency
number), the P-CSCF could reject the initial request and force the UE to first
perform an emergency registration (step 2) which would ensure that a new
emergency bearer allocation would occur via the MME. As part of the Attach
procedure, the positioning capabilities of the UE will be provided by the UE
to the MME.2. Once step 1 is complete, the MME sends a location report to a
GMLC in the visited network that is designated to support location of
emergency calls. The location report carries the UE identity (e.g. IMSI, IMEI)
and the MME IP address. The location report also carries the positioning
capabilities of the UE.
3\. The GMLC acknowledges the location report and includes the address of the
E-SMLC to be used.
4\. The UE may perform an emergency registration with home IMS (not shown).
5\. The UE sends an INVITE for the emergency call to the IMS in the visited
network. The INVITE is forwarded to the E-CSCF.
6\. The E-CSCF sends a location and/or routing request to an LRF which
forwards this to an associated GMLC.
7\. The GMLC obtains location information for the UE using a procedure
applicable to the particular location architecture.
8\. The GMLC returns the location information to the LRF which may use this to
obtain PSAP routing information. The LRF then returns the location and/or PSAP
routing information to the E-CSCF. Correlation information (e.g. an ESQK) can
also be included.
9\. The E-CSCF routes the call to the PSAP indicated by the LRF. Any ESQK can
also be sent to the PSAP.
10\. The remainder of the emergency call establishment occurs.
11\. The PSAP sends a request to the LRF (e.g. determined using the ESQK) for
the location of the UE. The LRF forwards the request to the associated GMLC
12\. The GMLC obtains location information for the UE using a procedure
applicable to the particular location architecture and provides this to the
LRF.
13\. The LRF returns the location to the PSAP.
In the procedure above, the MME provides its IP address directly to the GMLC
which creates the need for an interface between the MME and GMLC as well as
interfaces between the MME and S-SMLC and between the E-SMLC and GMLC. A
possible alternative to eliminate the MME-GMLC interface would be for the MME
to provide its IP address to the E-SMLC in step 2 which can later be
associated by the E-SMLC with the location request from the GMLC in step 1 of
the procedure in clause 6.1.3.2. This alternative forces an operator to
associate a single E-SMLC with each MME (e.g. an operator cannot load share
support for each MME across multiple E-SMLCs). For this reason, the MME update
to the GMLC rather than to the E-SMLC is proposed above in step 2.
#### 6.1.3.2 Location Procedure between the GMLC and E-SMLC
The location procedure described here supports an NI-LR for emergency calls
and provides part of the support for an MT-LR for an external LCS client (as
described further on).
Figure 6.1-4: Location Procedure between the GMLC and E-SMLC
1\. The GMLC sends a location request to the E-SMLC indicating the required
QoS, UE identity and MME address. For a commercial MT-LR, UE privacy
preferences are also included (as currently supported for GSM and UMTS). The
GMLC conveys the positioning capabilities of the UE if known (e.g. if provided
as described in clause 6.1.3.1 for an emergency call). Note that the GMLC may
not have the positioning capabilities for a commercial MT-LR request because
the procedure in clause 6.1.3.1 would not apply.
2\. The E-SMLC obtains the positioning capabilities of the UE from the MME
using the procedure in clause 6.1.3.3 if these capabilities were not provided
in step 1 and not already known from a previous positioning session.
3\. For a commercial MT-LR and provided the UE supports notification and
privacy verification, the E-SMLC may notify the UE concerning the location
request and verify its privacy preference as described further down.
4\. The E-SMLC instigates a positioning procedure applicable to the particular
QoS, architecture and UE capabilities.
5\. The E-SMLC returns the resulting location estimate to the GMLC.
Possible protocol layering on the SLg interface between the E-SMLC and GMLC
for Figure 6.1-4 is shown below. In Figure 6.1-5, the MAP operations already
defined for the Lg interface are reused -- with some possible changes. As the
signalling bearer in the EPS is IP and not SS7, the IETF defined adaptation
protocols SCTP (RFC 2960) and M3UA (RFC 4666) are needed as defined in TS
29.202. In Figure 6.1-6, SCTP is used to transport a new EPC LCS Protocol
(ELP) which can carry similar information to LCS operations in MAP but using
different encoding. Figure 6.1-6 uses the same type of protocol layering as is
used on other EPC interfaces in TS 23.401 and may thus be preferred.
Figure 6.1-5: Possible Protocol Layering for the SLg interface Figure 6.1-4 --
MAP over IP Variant
Figure 6.1-6: Possible Protocol Layering for the SLg interface for Figure
6.1-4 -- ELP over IP Variant
#### 6.1.3.3 Network Based Positioning Procedure
Figure 6.1-7: Network Based Positioning Procedure
1\. The E-SMLC sends a Positioning Request to the MME. This includes the UE
identity and one or more of: a request for the UE positioning capabilities and
parameters for the E-UTRAN defining the type of measurement information
required. If only UE positioning capabilities are requested, steps 2 to 4 are
skipped.
2\. If the UE is in ECM-IDLE state, the MME performs a network triggered
service request as defined in TS 23.401 in order to establish a signalling
connection with the UE and assign a specific eNodeB.
> Editor\'s Note: MME support of mobility management in step 2 in support of
> NAS signalling instigated by the E-SMLC may be a new impact and needs
> further evaluation.
3\. The MME sends an S1AP Location Reporting Control to the serving eNodeB for
the UE carrying the E-UTRAN parameters.
4\. The eNodeB returns an S1AP Location report to the MME carrying the CGI and
any requested measurements.
5\. The MME returns the CGI and measurements to the E-SMLC if these were
requested in step 1 and obtained in step 4. The MME also returns the
positioning capabilities of the UE if requested in step 1. The MME would have
obtained these either from the UE during the initial Attach procedure or from
a previous MME or SGSN following preceding changes in tracking area or routing
area.
Possible protocol layering for Figure 6.1-7 is shown in Figure 6.1-8. Here
LCS-AP (LCS application protocol) is a new protocol that might be functionally
similar to parts of BSSAP-LE (TS 49.031), BSSLAP (TS 48.071) and RANAP (TS
25.413). It is possible that some of the information conveyed by the S1AP and
LCS-AP layers would be transparent to the MME (to reduce MME impacts) and
might therefore constitute a thin point to point protocol between the eNodeB
and E-SMLC (though not shown in the Figure).
Figure 6.1-8: Possible Protocol Layering for Figure 6.1-7
#### 6.1.3.4 UE Assisted and UE Based Positioning Procedure
Figure 6.1-9: UE Assisted and UE Based Positioning Procedure
1\. The E-SMLC sends a DL Location Message to the MME indicating the UE
identity and carrying an LTE Positioning Protocol (LPP) PDU which may request
specific measurements from the UE, provide assistance data or query for the UE
capabilities.
2\. If the UE is in ECM-IDLE state, the MME performs a network triggered
service request as defined in TS 23.401 in order to establish a signalling
connection with the UE and assign a specific eNodeB. Normal inactivity timers
in the MME and eNodeB to release the signalling connection with the UE may
need to be extended to allow time for the positioning measurements in step 5
to occur and avoid the overhead of a possible UE triggered service request in
step 6.
> Editor\'s Note: MME support of mobility management in step 2 in support of
> NAS signalling instigated by the E-SMLC may be a new impact and needs
> further evaluation.
3\. The MME records the E-SMLC address and forwards the LPP PDU to the serving
eNodeB in an existing S1AP Downlink NAS Transport message thereby making the
contents of the LPP PDU transparent to both the MME and the eNodeB. The MME
need not retain other state information for the positioning request -- e.g.
can treat the response in step 6 as a separate transaction.
4\. The eNodeB forwards the LPP PDU to the UE in an existing RRC DL
Information Transfer message.
5\. The UE performs any positioning measurements requested by the LPP PDU.
6\. If the UE is in ECM-IDLE state, the UE instigates a UE triggered service
request as defined in TS 23.401order to establish a signalling connection with
the MME and assign a specific eNodeB.
7\. The UE returns requested measurement information and/or information
concerning its capabilities or required assistance data in an LPP PDU to the
eNodeB contained in an existing RRC UL Information Transfer message.
8\. The eNodeB forwards the LPP PDU to the MME in an existing S1AP Uplink NAS
Transport message. Again, the contents of the LPP PDU can be transparent to
both the eNodeB and MME.
9\. The MME forwards the LPP PDU and the UE identity to the E-SMLC that was
recorded in step 3 in an UL Location Message. Steps 1 to 9 may be repeated to
send new assistance data and/or to request further measurements. If a last LPP
PDU can be indicated by the UE to the MME, the MME can delete the E-SMLC
address recorded in step 3 once this last LPP PDU is detected.
Editor\'s Note: The ability to detect a last LPP PDU in the MME is FFS.
Possible protocol layering for Figure 6.1-9 is shown in Figure 6.1-10. Here
LPP (LTE Positioning Protocol) is either a new protocol in 3GPP or an
extension of either existing RRLP (TS 44.031) or parts of RRC (TS 25.331).
Figure 6.1-10: Possible Protocol Layering for Figure 6.1-9
#### 6.1.3.5 Location Continuity for Handover in the PS Domain
Location continuity concerns the ability to continue support for a location
request (MT-LR, MO-LR or NI-LR) following certain normal events such as a
handover of existing bearers within E-UTRAN or between UTRAN and E-UTRAN. This
can be accomplished if location support can be anchored in whichever network
entity interacts with the LCS Client since in that case the LCS Client can
continue to receive service from the same entity and need not be aware of
events (such as handover) inside the network. In the case of NI-LR and MT-LR
support for emergency calls where the LCS Client is a PSAP, this means
anchoring support in the LRF which is the entity directly interfacing to the
PSAP. In the case of a commercial MT-LR, it means anchoring support in the
R-GMLC (and possibly also in the H-GMLC). This clause describes and evaluates
support of location continuity for PS handovers and mainly for location of
emergency calls and deduces some ensuing properties of alternative #1.
In the particular case of an IMS based Emergency Call over LTE, the GMLC needs
to know the identity of the MME serving the UE as described in clause 6.1.3.1.
To maintain this knowledge following an MME relocation, it is possible that
the GMLC could query the HSS. But this is not a desirable solution for
location of emergency calls because it would require support not just from the
HSS in the serving network but also from HSSs in the HPLMNs for any roaming
UEs that were supported. Additionally, UEs without a subscription will not
have HSS entries. To avoid the need for HSS support, it would be possible for
any new MME to provide its address to the GMLC/LRF following an MME
relocation. The procedures used need to allow also for relocation between
WCDMA and LTE and possibly in future (though not in Rel-9) between 2G GPRS and
LTE. One possible set of such procedures, applying to all three architectures,
are described in the figures below. Alternative procedures are also possible
-- e.g. where the old MME provides the IP address of the new MME to the GMLC
once handover is complete. The reasons for choosing the procedures below are
that they remain reliable when subsequent handovers occur and enable support
for 4 cases of handover -- intra UTRAN, intra E-UTRAN, UTRAN to E-UTRAN and
E-UTRAN to UTRAN -- with avoidance of different actions for different cases of
handover.
Note that location continuity differs from positioning continuity which
concerns the ability to continue with a particular positioning method
following different types of handover. The procedures described here imply
that for UE assisted and UE based positioning this architecture alternative
can provide positioning continuity for both intra-MME eNodeB relocation and
inter-MME relocation within the same PLMN EPS due to E-SMLC association with
the GMLC but not a particular MME.
The following procedures assume that the same E-SMLC and GMLC can support
multiple MMEs. If that is not the case, modified procedures (not shown here)
would be needed.
##### 6.1.3.5.1 Support of Intra E-UTRAN E-Node B Handover using X2 Interface
The effect of handover using the X2 interface between eNodeBs with no change
in MME in relation to alternative #1 is shown in the following figure. For
simplicity and as is the case for UTRAN, it is assumed that the inter-eNodeB
X2 interface is not used to transfer context related to an ongoing location
procedure. It is further assumed that if there is no change in MME, there need
be no change in either E-SMLC or GMLC, The figure follows the handover
procedures defined in TS 36.300 and 23.401 although not all steps are shown.
Figure 6.1-11: Intra E-UTRAN E-Node B Handover using X2 Interface
1\. Prior to initiating handover, the old eNodeB may respond to any previous
request for network based positioning according to step 4 in Figure 6.1-7.
Otherwise, any network based positioning will be aborted in step 8. The old
eNodeB initiates the handover procedure by sending current UE context and
bearer information to the chosen new eNodeB.
2\. The new eNodeB acknowledges that handover can continue and provides target
information for the UE. From this point until step 8, the old eNodeB may
suspend any network based positioning procedure -- e.g. for obtaining E-CID
measurements.
3\. The old eNodeB instigates handover by the UE and includes target
information received in step 2.
4\. The UE accesses the target cell and then sends a Handover confirmation to
the new eNodeB. Between steps 3 and 4, the UE may suspend any response to the
E-SMLC for any ongoing UE positioning procedure.
5\. The new eNodeB requests the MME to switchover the bearer paths.
6\. The MME instigates either bearer update in the serving gateway or change
of serving gateway.
7\. The MME acknowledges bearer update to the new eNodeB.
8\. The new eNodeB informs the old eNodeB to release resources previously
assigned for the UE. At this point the handover is complete and the old eNodeB
can cancel any network positioning procedure.
9\. If the MME is aware of the E-SMLC (e.g. if a positioning procedure was
invoked earlier by the E-SMLC), the MME sends a status update to the E-SMLC
with an indication of eNodeB handover. The E-SMLC should reinitiate any
network based positioning procedure and take into account the new serving
eNodeB for any UE assisted or UE based positioning procedure.
The above procedure interrupts network based positioning -- e.g. requires the
E-SMLC to reinitiate it according to the procedure in clause 6.1.3.3. This
might be avoided by transferring more context information from the old to the
new eNodeBs in step 1, but that would complicate the handover procedure and is
not suggested. However, the above procedure does not require any re-initiation
of UE assisted or UE based positioning. Hence, it can be considered to support
positioning continuity for these procedures.
##### 6.1.3.5.2 Support of Intra E-UTRAN E-Node B Handover using S1 Interface
The effect of handover between eNodeBs with no change in MME using the S1
interface in relation to alternative #1 is shown in the following figure. The
figure follows the handover procedure defined in TS 23.401 although not all
steps are shown.
Figure 6.1-12: Intra E-UTRAN E-Node B Handover using S1 Interface
1\. Prior to initiating handover, the old eNodeB may respond to any previous
request for network based positioning according to step 4 in Figure 6.1-7.
Otherwise, any network based positioning will be aborted in step 8. The old
eNodeB initiates the handover procedure by sending current UE context
information to the MME From this point until step 8, the old eNodeB may
suspend any network based positioning procedure -- e.g. for obtaining E-CID
measurements..
2\. The MME determines that it can continue to serve the UE and instigates
handover with the new eNodeB. Bearer and serving Gateway updates also start to
occur at this point but are not shown here.
3\. The new eNodeB acknowledges that handover can continue and provides target
information for the UE.
4\. The MME forwards the target information to the old eNodeB.
5\. The old eNodeB instigates handover by the UE and includes target
information received in step 2.
6\. The UE accesses the target cell and then sends a Handover confirmation to
the new eNodeB. Between steps 5 and 6, the UE may suspend any response to the
E-SMLC for any ongoing UE positioning procedure.
7\. The new eNodeB notifies the MME that the UE has handed over.
8\. The MME informs the old eNodeB to release resources previously assigned
fore the UE. At this point the handover is complete and the old eNodeB can
cancel any network positioning procedure.
9\. If the MME is aware of the E-SMLC (e.g. if a positioning procedure was
invoked earlier by the E-SMLC), the MME sends a status update to the E-SMLC
with an indication of eNodeB handover. The E-SMLC should reinitiate any
network based positioning procedure and take into account the new serving
eNodeB for any UE assisted or UE based positioning procedure.
The above procedure interrupts network based positioning but supports
positioning continuity for these UE assisted and UE based location procedures.
It is assumed from this point on that the more invasive handover procedures
described further on involving MME and E-SMLC change will always interrupt
network based positioning and hence details to establish this are not shown.
##### 6.1.3.5.3 Variant 1: Target MME/SGSN notification of MME/SGSN Relocation
Note that the procedures in this clauses assume a single LRF is used in a
network for all IMS emergency calls.
##### 6.1.3.5.3.1 Support of Intra E-UTRAN MME Relocation {#support-of-intra-
e-utran-mme-relocation .H6}
A key requirement for emergency calls is to enable continuity of location
support. For MME relocation, there are several ways this can be supported. The
figure below employs a method whereby the new MME provides its address to the
GMLC once handover is complete. This avoids any race condition when a further
inter-MME handover occurs. The procedure also allows for change of E-SMLC and
change of GMLC.
Figure 6.1-13: GMLC Updating for Intra E-UTRAN MME Relocation
1\. Prior to initiating handover, the old eNodeB may respond to any previous
request for network based positioning according to step 4 in Figure 6.1-7.
Otherwise, any network based positioning will be aborted during step 3. The
old eNodeB begins handover by sending an S1AP Handover Required message to the
old MME as defined in TS 23.401.
2\. The old MME sends a GTP-C Forward Relocation Request to the new MME as
defined in TS 23.401 and includes context information the MME currently has
for the UE. Different to the current procedure in TS 23.401, the old MME
includes the old GMLC address if location for an emergency call is ongoing.
3\. The rest of the eNodeB handover and MME relocation procedure is performed
as defined in TS 23.401.
4\. After the relocation is complete and if an emergency call was ongoing
steps 4 to 7 are performed. First the new MME discovers a new GMLC using
configuration data or possibly a DNS query and sends a Location Report to the
new GMLC carrying the UE identity and the new MME IP address.
5\. If the new GMLC is not the same as the old GMLC (e.g. if the new GMLC does
not contain a location record for the UE), the new GMLC informs the LRF and
the LRF aborts the location session in the old GMLC (not shown in Figure
6.1-13). The new GMLC then returns an acknowledge to the new MME.
6a. If the GMLC and E-SMLC have not changed, the GMLC updates the E-SMLC with
the address of the new MME if a location session is currently ongoing for the
UE. The E-SMLC may then re-initiate any previous position session that was
previously ongoing. In the case of UE assisted or UE based positioning, the
E-SMLC could just update the new MME with its address to enable the new MME to
forward any LPP PDUs received from the UE to the E-SMLC. This updating could
be supported by sending an LPP PDU to the UE via the new MME or by sending
some other message to the MME not carrying an LPP PDU.
6b. If the GMLC or the E-SMLC has changed, the old GMLC (or new GMLC if there
was no GMLC change) aborts all location sessions for the UE in the old E-SMLC.
7\. If step 6b is performed, the new GMLC sends a new location request to the
new E-SMLC (or old E-SMLC if there was no E-SMLC change) carrying the UE
identity, QoS, new MME address and UE positioning capabilities to continue
location support for the emergency call.
To evaluate how the above procedure behaves when consecutive relocations occur
between MMEs, assume that a relocation designated AB initially occurs from
some old MME A to a new MME B and that soon after step 3 for the relocation
AB, a subsequent relocation designated BC occurs to some other MME C. Assume
further that the original GMLC for MME A is labelled α and that the new GMLCs
for MMEs B and C are labelled β and γ, respectively, where α, β and γ may or
may not be different. Two cases can then be distinguished:
1) Relocation BC starts before step 4 for relocation AB.
2) Relocation BC starts after step 4 for relocation AB.
For case (1), MME B can skip steps 4 and 5 for relocation AB and start
relocation BC at step 1 (then assuming the role of the old MME). MME C will
then provide its own address to GMLC γ in step 4 of relocation BC. From the
perspective of the LRF and GMLCs α and γ, relocation appears to have occurred
directly from MME A to MME C allowing the correct assignment of new GMLC γ,
removal of old GMLC α if not the same as γ and replacement if needed of the
E-SMLC. Location continuity for the multiple MME relocation is thus supported.
For case (2), the LRF and GMLCs perceive two consecutive handovers because the
update of the new MME address to the new GMLC in step 4 occurs for both
handovers. Thus, although there may be two sets of GMLC changes and two sets
of E-SMLC changes, the GMLC and E-SMLC assignment will end up as needed for
MME C. Thus location continuity is also supported.
##### 6.1.3.5.3.2 UTRAN to E-UTRAN relocation (Emergency Call Location Only)
{#utran-to-e-utran-relocation-emergency-call-location-only .H6}
This procedure is compatible with the procedure referred to in TS 23.271 to
support handover between SGSNs.
Figure 6.1-14: GMLC Updating for UTRAN to E-UTRAN Relocation
1\. The old RNC begins relocation by sending a RANAP Relocation Required
message to the old SGSN as defined in TS 23.401.
2\. The old SGSN sends a GTP-C Forward Relocation Request to the new MME as
defined in TS 23.401 and includes context information the SGSN currently has
for the UE.
3\. The rest of the inter-RAT relocation procedure is performed as defined in
TS 23.401. Any location session for the UE previously established by the GMLC
on the old SGSN would be terminated by the SGSN.
4\. After the relocation is complete, the new MME discovers a new GMLC using
configuration data or possibly a DNS query and sends a Location Report to the
GMLC carrying the UE identity and the MME IP address.
5\. If the new GMLC is not the same as the old GMLC (e.g. if the new GMLC does
not contain a location record for the UE), the new GMLC informs the LRF and
the LRF aborts the location session in the old GMLC The new GMLC then returns
an acknowledgment to the new MME.
6\. The new GMLC (or old GMLC if there was no GMLC change) sends a location
request to the new E-SMLC carrying the UE identity, QoS, MME address and UE
positioning capabilities to continue location support for the emergency call.
##### 6.1.3.5.3.3 E-UTRAN to UTRAN Relocation (Emergency Call Location Only)
{#e-utran-to-utran-relocation-emergency-call-location-only .H6}
This procedure is compatible with the procedure referred to in TS 23.271 to
support handover between SGSNs.
Figure 6.1-15: GMLC Updating for E-UTRAN to UTRAN Relocation
1\. Prior to initiating handover, the old eNodeB may respond to any previous
request for network based positioning according to step 4 in Figure 6.1-7.
Otherwise, any network based positioning will be aborted during step 3. The
old eNodeB begins handover by sending an S1AP Handover Required message to the
old MME as defined in TS 23.401.
2\. The old MME sends a GTP-C Forward Relocation Request to the new SGSN as
defined in TS 23.401 and includes context information the MME currently has
for the UE.
3\. The rest of the inter-RAT relocation procedure is performed as defined in
TS 23.401.
4\. After the relocation is complete, the new SGSN discovers a new GMLC using
configuration data or possibly a DNS query and sends a Location Report to the
GMLC carrying the UE identity and the SGSN address.
5\. If the new GMLC is not the same as the old GMLC (e.g. if the new GMLC does
not contain a location record for the UE), the new GMLC informs the LRF and
the LRF aborts the location session in the old GMLC. The new GMLC returns an
acknowledgment response to the SGSN.
6\. The old GMLC aborts the location session in the old E-SMLC. The new GMLC
will use the procedures in TS 23.271 [2] to obtain location from the new SGSN.
##### 6.1.3.5.4 Variant 2: Source MME/SGSN notification of MME/SGSN Relocation
##### 6.1.3.5.4.1 Introduction for source MME/SGSN notification of MME/SGSN
Relocation {#introduction-for-source-mmesgsn-notification-of-mmesgsn-
relocation .H6}
For a CS capable legacy PSAP, location continuity for an emergency call means
preserving the ability to deliver an initial position estimate and subsequent
updated position estimates to the PSAP following handover in a manner
transparent to the PSAP. For future IP capable PSAPs, the same definition
applies if the PSAP-PLMN interaction remains as defined in TS 23.167. In both
cases, the PSAP will need to continue interacting with the same LRF/GMLC and
using the same correlation information before and after handover. That implies
anchoring location support in a particular LRF (which may be associated with a
particular GMLC or multiple GMLCs) and ensuring that the LRF can continue to
obtain location information directly or indirectly from any new entities on
the access side -- e.g. MSC, SGSN, MME -- that arise as a result of handover.
This requirement can be supported if the identity (e.g. address) of any such
new entity is provided to or obtained by the GMLC immediately following a
handover.
In the particular case of an IMS based Emergency Call over LTE, the GMLC needs
to know the identity of the MME serving the UE. To maintain this knowledge
following an MME relocation, it is possible that the GMLC could query the HSS.
But this is not a desirable solution for location of emergency calls because
it would require support not just from the HSS in the serving network but also
from HSSs in the HPLMNs for any roaming UEs that were supported. Additionally,
UEs without a subscription will not have HSS entries. To avoid the need for
HSS support, it would be possible for the old MME to provide the address of
the new MME to the GMLC/LRF following an MME relocation. The procedures used
need to allow also for relocation between WCDMA and LTE and possibly in future
(though not in Rel-9) between 2G GPRS and LTE. One possible set of such
procedures, applying to all three architectures, are described in the figures
below.
NOTE 1: Location continuity differs from positioning continuity which concerns
the ability to continue with a particular positioning method following
different types of handover. The procedures described here imply that for UE
assisted and UE based positioning this architecture alternative may provide
positioning continuity for both intra-MME eNodeB relocation and inter-MME
relocation within the same PLMN EPS due to E-SMLC association with the GMLC
but not a particular MME.
NOTE 2: Positioning during handovers may fail if positioning messages sent
mid-handover do not get to the destination (UE or eSMLC) or if the new MME is
served by another E-SMLC.
The following procedures assume that the same E-SMLC and GMLC can support
multiple MMEs and the MME interfaces to a single GMLC. If that is not the
case, modified procedures (not shown here) would be needed.
##### 6.1.3.5.4.2 Support of E-UTRAN MME Relocation (Emergency Call Location
Only) {#support-of-e-utran-mme-relocation-emergency-call-location-only .H6}
Figure 6.1-16: GMLC Updating for E-UTRAN MME Relocation
1\. The old eNodeB begins handover by sending an S1AP Handover Required
message to the old MME as defined in TS 23.401.
2\. The old MME sends a GTP-C Forward Relocation Request to the new MME as
defined in TS 23.401 and includes context information the MME currently has
for the UE.
3\. The rest of the eNodeB handover and MME relocation procedure is performed
as defined in TS 23.401.
4\. After the relocation is complete, the old MME sends a Location Report to
the GMLC/LRF carrying the UE identity and the new MME IP address.
5\. The GMLC/LRF returns a response.
6\. The GMLC/LRF updates the E-SMLC with the address of the new MME if a
location session is currently ongoing for the UE.
7\. The E-SMLC sends a Location Update to the new MME and includes the address
of the E-SMLC if a location session involving the E-SMLC is active for the UE.
NOTE: If the GMLC or E-SMLC does not serve the new MME, ongoing positioning
will be terminated and a new GMLC and/or E-SMLC invoked.
##### 6.1.3.5.4.3 UTRAN to E-UTRAN relocation (Emergency Call Location Only)
{#utran-to-e-utran-relocation-emergency-call-location-only-1 .H6}
This procedure is compatible with the procedure referred to in TS 23.271 to
support handover between SGSNs.
Figure 6.1-17: GMLC Updating for UTRAN to E-UTRAN Relocation
1\. The old RNC begins relocation by sending a RANAP Relocation Required
message to the old SGSN as defined in TS 23.401.
2\. The old SGSN sends a GTP-C Forward Relocation Request to the new MME as
defined in TS 23.401 and includes context information the SGSN currently has
for the UE. Per
3\. The rest of the inter-RAT relocation procedure is performed as defined in
TS 23.401. Per TS 23.271 clause 9.4.5.3, any location session for the UE
previously established by the GMLC on the old SGSN would be terminated by the
SGSN.
4\. After the relocation is complete, the old MME sends a Location Report to
the GMLC carrying the UE identity and the new MME IP address.
5\. The GMLC returns an acknowledgment.
NOTE: It is assumed that the same GMLC serves the new MME. If not, the GMLC
informs the LRF of the new MME so that the LRF could invoke the GMLC serving
the new MME. The LRF/GMLC may initiate another positioning session with the
new MME.
##### 6.1.3.5.4.4 E-UTRAN to UTRAN Relocation {#e-utran-to-utran-relocation
.H6}
This procedure is compatible with the procedure referred to in TS 23.271 to
support handover between SGSNs.
Figure 6.1-18: GMLC Updating for E-UTRAN to UTRAN Relocation
1\. The old eNodeB begins handover by sending an S1AP Handover Required
message to the old MME as defined in TS 23.401.
2\. The old MME sends a GTP-C Forward Relocation Request to the new SGSN as
defined in TS 23.401 and includes context information the MME currently has
for the UE.
3\. The rest of the inter-RAT relocation procedure is performed as defined in
TS 23.401.
4\. After the relocation is complete, the old MME sends a Location Report to
the GMLC carrying the UE identity and the new SGSN address.
5\. The GMLC returns an acknowledgment response.
6\. Similar to TS 23.271, clause 9.4.5.3, the GMLC updates the E-SMLC if a
location session is currently ongoing with an indication that the session must
be aborted.
NOTE: It is assumed that the same GMLC serves the new SGSN. If not, the GMLC
informs the LRF of the new SGSN so that the LRF could invoke the GMLC serving
the new SGSN. The LRF/GMLC may initiate another positioning session with the
new SGSN.
#### 6.1.3.6 Location Continuity for Emergency Call Handover between PS and CS
Domains
For domain transfer of an emergency call between the CS and PS domains, the
same basic requirement to support location continuity applies as for intra-PS
domain handover. Thus, location support should remain anchored in the same
GMLC/LRF and, following any handover, the GMLC/LRF should be provided with or
able to obtain the identity (e.g. address) of the appropriate new entities on
the access side - e.g. MSC, SGSN, MME - from which location information may be
obtained by direct or indirect means.
The ability to provide the GMLC with this information will depend on the
particular solution for SRVCC or IMS service continuity used to support inter-
domain handover and does not seem to be a property of the particular control
plane solution used for EPS as long as that makes use of a GMLC/LRF in the
EPC. Thus this should form part of the evaluation of alternative solutions for
SRVCC and IMS service continuity.
#### 6.1.3.7 MT-LR Procedure
The figure below shows details of MT-LR support. This is based on the Common
MT-LR procedure in PS and CS domain defined in TS 23.271.
Figure 6.1-19: Common MT-LR Procedure for LTE Access
1\. An external LCS client sends a location request (e.g. for the current
location of a UE) to a suitable Requesting GMLC (R-GMLC). The R-GMLC may query
the HSS (not shown) to obtain the Home GMLC (H-GMLC) address if not already
known or obtainable from the UE identity.
2\. The H-GMLC forwards the request to the H-GMLC.
3\. The H-GMLC queries the HSS for information concerning the serving system
for the UE.
> 4\. The HSS makes use of information previously provided by the serving
> system when the UE attached or re-attached and returns the address of the
> serving MME and the associated V-GMLC. If ISR is active, the HSS will return
> the address of both the serving MME and serving SGSN.
5\. The H-GMLC forwards the location request to the V-GMLC and includes the
address of the MME and the particular privacy preferences of the UE and, if
ISR is active, the address of the SGSN.
> 6\. The V-GMLC instigates a location request for the UE to obtain location
> information for the UE employing a procedure appropriate to the LCS
> architectural solution in the VPLMN. . If ISR is active, the V-GMLC may
> instigate one MT-LR location procedure applicable to the MME and another PS-
> MT-LR location procedure (described in TS 23.271) applicable to the SGSN.
> This will lead to separate paging of the UE in its registered TA(s) in
> association with the MME procedure and in its registered RA(s) in
> association with the SGSN procedure. The UE would then respond to only one
> paging request leading to continuation of only one of the MT-LR procedures
> and a termination of the other. The V-GMLC will discover which is which from
> the responses it later receives for each MT-LR procedure.
7\. The V-GMLC returns the location information to the H-GMLC.
8\. The H-GMLC returns the location information to the R-GMLC.
9\. The R-GMLC returns the location information to the external LCS Client.
In step 6, privacy verification and notification could be supported using a
NAS level protocol that similar to that described in more detail below for an
MO-LR.
#### 6.1.3.8 Support of an MO-LR
##### 6.1.3.8.1 NAS Protocol Support
A new NAS level protocol between the UE and MME could be added to support an
MO-LR. This would require support in the VPLMN and would be analogous the MO-
LR solutions already defined in TS 23.271 for GSM and UMTS. The new protocol
might reuse the ASN.1 operations defined to support an MO-LR in TS 24.080 or
it might employ new signalling. A similar NAS protocol is also needed to
support notification and privacy verification for an MT-LR as described
earlier. Possible protocol layering is shown below.
Figure 6.1-20: NAS Level Signalling to support an MO-LR or MT-LR
##### 6.1.3.8.2 MO-LR Procedure
Figure 6.1-21: MO-LR Procedure
1\. If the UE is in ECM-IDLE state, the UE performs a UE triggered service
request as defined in TS 23.401 in order to establish a signalling connection
with the MME and assign a specific eNodeB.
2\. The UE sends a NAS PDU containing an MO-LR Request inside an RRC UL
Information Transfer message to the eNodeB.
3\. The eNodeB forwards the MO-LR Request to the MME inside an S1AP Uplink NAS
Transport message.
4\. The MME forwards the MO-LR request to an associated E-SMLC together with
the UE identity. Based on the particular NAS protocol (visible at the MME
level), the MME also includes UE subscription information (received earlier
from the HSS) applicable to MO-LR support.
5\. The E-SMLC verifies UE subscription to an MO-LR and then instigates
positioning of the UE using the procedures previously described.
6\. The E-SMLC returns the result of the positioning (e.g. a location
estimate) to the MME. For a MO-LR transfer to third party, the E-SMLC would
also forward the location information obtained in step 4 to a VGMLC (not
shown) and thence to an LCS Client via the HGMLC for the UE and an R-GMLC.
7\. The MME forwards the location result to the eNodeB.
8\. The eNodeB forwards the location result to the UE.
### 6.1.4 Evaluation
The following table provides an evaluation of architectural alternative #1
with respect to support of emergency calls.
Table 6.1-1: Evaluation of Architectural Alternative 1
+--------------------------------------------------------------+------+ | Criteria | # 1 | +--------------------------------------------------------------+------+ | Support for an NI-LR and MT-LR for emergency calls | Yes | +--------------------------------------------------------------+------+ | Support for a non-emergency MT-LR | Yes | +--------------------------------------------------------------+------+ | Support for an MO-LR | Yes | +--------------------------------------------------------------+------+ | Support for Network Based Positioning | Yes | +--------------------------------------------------------------+------+ | Support for UE Based and UE Assisted Positioning | Yes | +--------------------------------------------------------------+------+ | Number of new MME interfaces | 2 | +--------------------------------------------------------------+------+ | Number of new eNB interfaces | 0 | +--------------------------------------------------------------+------+ | Number of new GMLC interfaces | 2 | +--------------------------------------------------------------+------+ | Number of interfaces to the E-SMLC | 2 | +--------------------------------------------------------------+------+ | Positioning Continuity possible for intra-MME relocation | | | (Note 1) | | +--------------------------------------------------------------+------+ | Positioning Continuity possible for inter-MME relocation | | | (Note 1) | | +--------------------------------------------------------------+------+ | Location continuity for emergency calls following eNB | Yes | | handover (Note 2) | | +--------------------------------------------------------------+------+ | Location continuity for emergency calls following MME | Yes | | Relocation (Note 2) | | +--------------------------------------------------------------+------+ | Location continuity for emergency calls following inter-RAT | Yes | | handover in the PS domain (Note 2) | | +--------------------------------------------------------------+------+ | Possibility to combine E-SMLC with one of MME, eNB or GMLC | Yes | +--------------------------------------------------------------+------+ | Can support consecutive handovers between MMEs | Yes | +--------------------------------------------------------------+------+ | Can support ISR | Yes | +--------------------------------------------------------------+------+ | NOTE 1: Positioning continuity here refers to the ability to | | | continue a UE assisted or UE based positioning session | | | between the E-SMLC and UE following handover. This criterion | | | is specific to the positioning method and will depend on the | | | importance of positioning continuity to the particular | | | positioning method. | | | | | | NOTE 2: Location continuity for emergency calls refers to | | | preserving the ability to deliver an initial position | | | estimate and subsequent updated position estimate to the | | | PSAP following handover in a manner transparent to the PSAP | | +--------------------------------------------------------------+------+
Possible E-UTRAN associated impacts to support this architecture are listed
below (e.g. may require support in TSG RAN):
\- Define an LPP positioning protocol between the UE and E-SMLC for UE
assisted and UE based positioning.
\- Define impacts to S1-AP to support network based positioning.
## 6.2 Architectural Alternative #2
The architectural alternative defined here employs an Evolved SMLC directly
attached to the MME.
### 6.2.1 Objectives
The main objectives of this solution are as follows:
\- support location of an IMS emergency call
\- avoid impacts to a location session due to an inter-eNodeB handover
\- make use of an Evolved SMLC that can be considered as part of the EPS
access network
\- support MO-LR and MT-LR services
### 6.2.2 Architectural Details
#### 6.2.2.1 Architecture for NI-LR
An architecture to support an NI-LR for emergency calls is shown in Figure
6.2-1. The main distinguishing characteristic is an Evolved SMLC (E-SMLC)
connected to the MME. This is analogous to an NSS based SMLC defined for GSM
in TS 03.71 in R98 and R99 which is connected to an MSC. This variant may
avoid the need to stop and restart a location session for an inter-eNodeB
handover though not for inter-MME relocation. Some arbitrary designations are
used for the new interfaces which comprise an SLs interface between the E-SMLC
and MME and an SLg interface between the MME and GMLC. The SLg interface might
be similar to the existing Lg interface defined in TS 23.271 between a GMLC
and either an SGSN or MSC. In addition to the new interfaces, the existing
S1-MME interface would be modified through the addition of some new messages
and parameters and the LTE-Uu interface might be modified at an upper level
through use of a new or modified positioning protocol.
Some optimization of this architecture is possible - e.g. more efficient
signalling between the E-SMLC and eNodeB to bypass the MME - but that does not
change most of the interactions and protocol layering and could be added after
more basic capabilities are defined and verified.
Figure 6.2-1: LCS Control Plane Architecture employing an Evolved SMLC
(E-SMLC) attached to an MME
#### 6.2.2.2 Architecture for MT-LR and MO-LR
An extension to the architecture to support an MT-LR and MO-LR is shown below.
Figure 6.2-2: LCS Control Plane Architecture for an MT-LR and MO-LR
The Lh (MAP) interface above would need to be modified to enable the HSS to
provide the MME address and VPLMN identity to the HGMLC. Possibly, the Lh
interface might be migrated to an IP based interface.
The Lg interface might also be slightly modified to enable the HGMLC to convey
the MME address to the VGMLC. As in the case of the Lh interface, the Lg
interface might be migrated to an IP based interface.
#### 6.2.2.3 Provision of MME Address to GMLC for an NI-LR
The description of this issue in clause 6.1.2.3 for alternative #1 applies
equally to alternative #2.
### 6.2.3 Information Flows and Protocols
#### 6.2.3.1 Location Support for IMS Emergency Calls
The procedure here is identical to that described in clause 6.1.3.1 for
alternative #1.
#### 6.2.3.2 Location Procedure between the GMLC, MME and E-SMLC
The location procedure described here supports both an NI-LR for emergency
calls and an MT-LR for an external LCS client.
Figure 6.2-3: Location Procedure between the GMLC, MME and E-SMLC
1\. The GMLC sends a location request to the serving MME indicating the
required QoS and UE identity. For a commercial MT-LR, UE privacy preferences
are also included (as currently supported for GSM and UMTS). Note that the MME
will already know the UE positioning capabilities from the initial Attach
procedure or from a previous MME or SGSN following preceding changes in
tracking area or routing area.
2\. If the UE is in ECM-IDLE state, the MME performs a network triggered
service request as defined in TS 23.401 in order to establish a signalling
connection with the UE and assign a specific eNodeB. Normal inactivity timers
in the MME and eNodeB to release the signalling connection with the UE may
need to be extended to allow time for the positioning to occur in step 5.
Details of this are FFS.
3\. For a commercial MT-LR and provided the UE supports notification and
privacy verification, the MME may notify the UE concerning the location
request and verify its privacy preference as described further down.
4\. The MME forwards the location request to the E-SMLC including the QoS and
UE positioning capabilities. The UE identity will not be critical because the
MME can maintain the association with the UE.
5\. The E-SMLC performs a positioning procedure appropriate to the particular
QoS , architecture and UE capabilities.
6\. The E-SMLC returns the resulting location information (e.g. location
estimate) to the MME.
7\. The MME returns the location information to the GMLC.
Protocol layering between the GMLC and MME and between the MME and E-SMLC to
support Figures 6.2-3 is shown in the three figures below. Although Figure
6.2-4 shows how MAP over IP could be supported, this is not aligned with other
IP protocol stacks supported on the Evolved Packet Core.
Figure 6.2-4: Possible Protocol Layering on the SLg interface in Figure
6.2-3-- MAP over IP Variant
Figure 6.2-5: Possible Protocol Layering on the SLg interface in Figure 6.2-3
-- ELP over IP Variant
Figure 6.2-6: Possible Protocol Layering on the SLs interface in Figure 6.2-3
#### 6.2.3.3 Network Based Positioning Procedure
Figure 6.2-7: Network Based Positioning Procedure
1\. The E-SMLC sends a Positioning Request to the MME. This includes
parameters for the E-UTRAN defining the type of measurement information
required.
2\. The MME sends an S1AP Location Reporting Control to the serving eNodeB for
the UE carrying the E-UTRAN parameters
3\. The eNodeB returns an S1AP Location report to the MME carrying the CGI and
any requested measurements.
4\. The MME returns the CGI and measurements to the E-SMLC.
Possible protocol layering for Figure 6.2-7 is shown in Figure 6.2-8. Here
LCS-AP (LCS application protocol) is a new protocol that might be functionally
similar to parts of BSSAP-LE (TS 49.031), BSSLAP (TS 48.071) and RANAP (TS
25.413). It is possible that some of the information conveyed by the S1AP and
LCS-AP layers would be transparent to the MME (to reduce MME impacts) and
might therefore constitute a thin point to point protocol between the eNodeB
and E-SMLC (though not shown in the Figure).
Figure 6.2-8: Possible Protocol Layering for Figure 6.2-3
#### 6.2.3.4 UE Assisted and UE Based Positioning Procedure
Figure 6.2-9: UE Assisted and UE Based Positioning Procedure
1\. The E-SMLC sends a Positioning Request to the MME carrying an LTE
Positioning Protocol (LPP) PDU which may request specific measurements by the
UE, provide assistance data or query for the UE capabilities.
2\. The MME forwards the LPP PDU to the serving eNodeB in an existing S1AP
Downlink NAS Transport message thereby making the contents of the LPP PDU
transparent to the both the MMS and eNodeB. The MME need not retain state
information for the positioning request -- e.g. can treat the response in step
6 as a separate transaction -- although it must retain state information
associated with the location request from the GMLC and the location request to
the E-SMLC.
3\. The eNodeB forwards the LPP PDU to the UE in an existing RRC DL
Information Transfer message.
4\. The UE performs any positioning measurements requested by the LPP PDU.
5\. The UE returns measurement information and/or information concerning its
capabilities or requested assistance data in an LPP PDU to the eNodeB
contained in an existing RRC UL Information Transfer message.
6\. The eNodeB forwards the LPP PDU to the MME in an existing S1AP Uplink NAS
Transport message.
7\. The MME forwards the LPP PDU to the E-SMLC in a Positioning Response.
Steps 1 to 7 may be repeated to send new assistance data and request further
measurements.
Possible protocol layering for Figure 6.2-5 is shown in Figure 6.2-6. Here LLP
(LTE Positioning Protocol) can be either a new protocol in 3GPP or an
extension of either RRLP (TS 44.031) or parts of RRC (TS 25.331).
Figure 6.2-10: Possible Protocol Layering for Figure 6.2-9
#### 6.2.3.5 Location Continuity for Handover in the PS Domain
##### 6.2.3.5.1 Support of Intra E-UTRAN E-Node B Handover using X2 Interface
The procedure for alternative #1 in clause 6.1.3.5.1 applies without change.
##### 6.2.3.5.2 Support of Intra E-UTRAN E-Node B Handover using S1 Interface
The procedure for alternative #1 in clause 6.1.3.5.2 applies without change.
##### 6.2.3.5.3 Variant 1: Target MME/SGSN notification of MME/SGSN Relocation
Note that the procedures in this clauses assume a single LRF is used in a
network for all IMS emergency calls.
##### 6.2.3.5.3.1 Support of Intra E-UTRAN MME Relocation (Emergency Call
Location Only) {#support-of-intra-e-utran-mme-relocation-emergency-call-
location-only .H6}
As for alternative #1, a key requirement for emergency calls is to enable
continuity of location support. For MME relocation, there are several ways
this can be supported. The figure below employs a method whereby the new MME
provides its address to the GMLC once handover is complete. This avoids any
race condition when a further inter-MME handover occurs.
Figure 6.2-11: GMLC Updating for Intra E-UTRAN MME Relocation
1\. Prior to initiating handover, the old eNodeB may respond to any previous
request for network based positioning according to step 3 in Figure 6.2-7.
Otherwise, any network based positioning will be aborted in the old eNodeB
during step 3. The old eNodeB begins handover by sending an S1AP Handover
Required message to the old MME as defined in TS 23.401.
2\. The old MME sends a GTP-C Forward Relocation Request to the new MME as
defined in TS 23.401 and includes context information the MME currently has
for the UE.
3\. The rest of the eNodeB handover and MME relocation procedure is performed
as defined in TS 23.401.
4\. After the relocation is complete, the old MME aborts any location session
with the E-SMLC and may indicate that a relocation is ongoing and provide the
new MME address. The E-SMLC may retain information about the location if it
expects to support location for the new MME. At some later point when the GMLC
requests a location estimate from the new MME according to clause 6.2.3.2, the
E-SMLC (if it remains the same) can associate the new request with the old
request (e.g. using the UE identity) and thereby access the previous
information.
5\. If location for an emergency call is ongoing, the new MME discovers a new
GMLC using configuration data or possibly a DNS query and sends a Location
Report to the new GMLC carrying the UE identity and the new MME IP address.
6\. If the new GMLC is not the same as the old GMLC (e.g. if the new GMLC does
not contain a location record for the UE), the new GMLC informs the LRF and
the LRF aborts the location session in the old GMLC. The new GMLC (or old GMLC
if there was no change) then returns an acknowledgment.
The evaluation of location continuity when multiple MME relocations occur is
as described for alternative #1 in clause 6.1.3.5.3.1. The only case for which
location continuity is then not supported is where an MME to MME relocation
starts after step 4 and before step 5 for a previous MME to MME relocation and
where GMLC/LRF interaction is not sufficiently robust.
##### 6.2.3.5.3.2 UTRAN to E-UTRAN relocation (Emergency Call Location Only)
{#utran-to-e-utran-relocation-emergency-call-location-only-2 .H6}
The procedure for alternative #1 in clause 6.1.3.5.3.2 applies with step 6
omitted.
##### 6.2.3.5.3.3 E-UTRAN to UTRAN Relocation (Emergency Call Location Only)
{#e-utran-to-utran-relocation-emergency-call-location-only-1 .H6}
Figure 6.2-12: GMLC Updating for E-UTRAN to UTRAN Relocation
1\. Prior to initiating handover, the old eNodeB may respond to any previous
request for network based positioning according to step 3 in Figure 6.2-7.
Otherwise, any network based positioning will be aborted in the old eNodeB
during step 3. The old eNodeB begins handover by sending an S1AP Handover
Required message to the old MME as defined in TS 23.401.
2\. The old MME sends a GTP-C Forward Relocation Request to the new SGSN as
defined in TS 23.401 and includes context information the MME currently has
for the UE.
3\. The rest of the inter-RAT relocation procedure is performed as defined in
TS 23.401.
4\. After the relocation is complete, the old MME aborts any location session
in the E-SMLC.
5\. The new SGSN discovers a new GMLC using configuration data or possibly a
DNS query and sends a Location Report to the new GMLC carrying the UE identity
and the SGSN address.
6\. If the new GMLC is not the same as the old GMLC (e.g. if the new GMLC does
not contain a location record for the UE), the new GMLC informs the LRF and
the LRF aborts the location session in the old GMLC. The new GMLC returns an
acknowledgment to the new SGSN. The new GMLC will use the procedures in TS
23.271 [2] to obtain location from the new SGSN.
##### 6.2.3.5.4 Variant 2: Source MME/SGSN notification of MME/SGSN Relocation
##### 6.2.3.5.4.1 Introduction for source MME/SGSN notification of MME/SGSN
Relocation {#introduction-for-source-mmesgsn-notification-of-mmesgsn-
relocation-1 .H6}
The procedures applicable here are nearly the same as those described for
alternative #1 in clause 6.1.3.5. The differences are as follows.
\- the old MME must terminate any location procedure that the GMLC had
previously invoked for the UE when the handover procedure successfully
completes.
\- the GMLC does not return the address of an E-SMLC to the MME
\- the GMLC does not update an E-SMLC with the new MME address
The procedures described here also imply that this architecture alternative
can provide positioning continuity with respect to UE based and UE assisted
methods for intra-MME eNodeB relocation but not inter-MME relocation within
the same PLMN EPS due to attachment of the E-SMLC to a particular MME. The
following procedures assume that the same GMLC can support multiple MMEs and
the MME interfaces to a single GMLC. If that is not the case, modified
procedures (not shown here) would be needed.
##### 6.2.3.5.4.2 Support of E-UTRAN MME Relocation (Emergency Call Location
Only) {#support-of-e-utran-mme-relocation-emergency-call-location-only-1 .H6}
Figure 6.2-13: GMLC Updating for E-UTRAN MME Relocation
1\. The old eNodeB begins handover by sending an S1AP Handover Required
message to the old MME as defined in TS 23.401.
2\. The old MME sends a GTP-C Forward Relocation Request to the new MME as
defined in TS 23.401 and includes context information the MME currently has
for the UE.
3\. The rest of the eNodeB handover and MME relocation procedure is performed
as defined in TS 23.401. The UE should not send positioning messages during HO
procedures (i.e. once the UE receives the HO command from the eNB). If the
eNodeB receives a positioning message from the UE prior to sending the HO
command, the eNodeB will forward it towards the E-SMLC. If the MME receives a
positioning message from the E-SMLC after it receives a HO required from the
eNB, the MME will send a failure response to the E-SMLC with reason set to MME
Relocation.
4\. After the relocation is complete, the old MME sends a Cancel Location
Request to the E-SMLC to inform it of the MME relocation.
5\. The E-SMLC sends a response to the old MME that may include any available
positioning estimate.
6\. The old MME sends a Location Report to the GMLC/LRF carrying the UE
identity, the new MME IP address and any positioning information received from
the E-SMLC.
7\. The GMLC returns a response. If necessary, the GMLC will initiate a new
positioning session with the new MME.
NOTE: It is assumed that the same GMLC serves the new MME. If not, the GMLC
informs the LRF of the new MME so that the LRF could invoke the GMLC serving
the new MME. The LRF/GMLC may initiate another positioning session with the
new MME.
##### 6.2.3.5.4.3 Support of UTRAN to E-UTRAN Relocation (Emergency Call
Location Only) {#support-of-utran-to-e-utran-relocation-emergency-call-
location-only .H6}
Figure 6.2-14: GMLC Updating UTRAN to E-UTRAN Relocation
1\. The old RNC begins relocation by sending a RANAP Handover Required message
to the old SGSN as defined in TS 23.401.
2\. The old SGSN sends a GTP-C Forward Relocation Request to the new MME as
defined in TS 23.401 and includes context information the SGSN currently has
for the UE.
3\. The rest of the inter-RAT relocation procedure is performed as defined in
TS 23.401. Per TS 23.271, clause 9.4.5.3, the positioning process is aborted.
4\. The old SGSN sends a Location Report to the GMLC/LRF carrying the UE
identity, the new MME IP address and any positioning information received from
the old RNC.
5\. The GMLC returns a response. If necessary, the GMLC will initiate a new
positioning session with the new MME.
NOTE: It is assumed that the same GMLC serves the new MME. If not, the GMLC
informs the LRF of the new MME so that the LRF could invoke the GMLC serving
the new MME. The LRF/GMLC may initiate another positioning session with the
new MME.
##### 6.2.3.5.4.4 Support of E-UTRAN to UTRAN Relocation (Emergency Call
Location Only) {#support-of-e-utran-to-utran-relocation-emergency-call-
location-only .H6}
Figure 6.2-15: GMLC Updating E-UTRAN to UTRAN Relocation
1\. The old eNodeB begins handover by sending an S1AP Handover Required
message to the old MME as defined in TS 23.401.
2\. The old MME sends a GTP-C Forward Relocation Request to the new MME as
defined in TS 23.401 and includes context information the MME currently has
for the UE.
3\. The rest of the Inter-RAT relocation procedure is performed as defined in
TS 23.401.
4\. After the relocation is complete, the old MME sends a Cancel Location
Request to the E-SMLC to inform it of the Inter-RAT relocation.
5\. The E-SMLC sends a response to the old MME that may include any available
positioning estimate.
6\. The old MME sends a Location Report to the GMLC/LRF carrying the UE
identity, the new SGSN address and any positioning information received from
the E-SMLC.
7\. The GMLC returns a response. If necessary, the GMLC will initiate a new
positioning session with the new SGSN.
NOTE: It is assumed that the same GMLC serves the new SGSN. If not, the GMLC
informs the LRF of the new SGSN so that the LRF could invoke the GMLC serving
the new SGSN. The LRF/GMLC may initiate another positioning session with the
new SGSN.
#### 6.2.3.6 Location Continuity for Emergency Call Handover between PS and CS
Domains
The description for alternative #1 in clause 6.1.3.6 applies here.
#### 6.2.3.7 MT-LR Procedure
The procedure is as described in clause 6.1.3.7 for alternative #1.
#### 6.2.3.8 Support of an MO-LR
##### 6.2.3.8.1 NAS Protocol Support
A new NAS level protocol between the UE and MME could be added to support an
MO-LR. This would require support in the VPLMN and would be analogous the MO-
LR solutions already defined in TS 23.271 for GSM and UMTS. The new protocol
might reuse the ASN.1 operations defined to support an MO-LR in TS 24.080 or
it might employ new signalling. A similar NAS protocol is also needed to
support notification and privacy verification for an MT-LR. Possible protocol
layering is shown below.
Figure 6.2-16: NAS Level Signalling to support an MO-LR or MT-LR
##### 6.2.3.8.2 MO-LR Procedure
Figure 6.2-17: MO-LR Procedure
1\. If the UE is in ECM-IDLE state, the UE performs a UE triggered service
request as defined in TS 23.401 in order to establish a signalling connection
with the MME and assign a specific eNodeB.
2\. The UE sends a NAS PDU containing an MO-LR Request inside an RRC UL
Information Transfer message to the eNodeB.
3\. The eNodeB forwards the MO-LR Request to the MME inside an S1AP Uplink NAS
Transport message.
4\. The MME verifies UE subscription to an MO-LR. The MME then sends a
location request to an E-SMLC including the QoS.
5\. The E-SMLC performs a positioning procedure appropriate to the QoS
according to Figure 9 and/or Figure 10.
6\. The E-SMLC returns the resulting location information (e.g. location
estimate) to the MME.
7 The MME returns the result of the positioning (e.g. a location estimate) to
the eNodeB. For a MO-LR transfer to third party, the MME would also forward
the location information obtained in step 5 to a VGMLC (not shown) and thence
to an LCS Client via the HGMLC for the UE and an R-GMLC.
8\. The eNodeB forwards the location result to the UE.
### 6.2.4 Evaluation
The following table provides an evaluation of architectural alternative #2
with respect to support of emergency calls.
Table 6.2-1: Evaluation of Architectural Alternative 2
+--------------------------------------------------------------+------+ | Criteria | # 2 | +--------------------------------------------------------------+------+ | Support for an NI-LR and MT-LR for emergency calls | Yes | +--------------------------------------------------------------+------+ | Support for a non-emergency MT-LR | Yes | +--------------------------------------------------------------+------+ | Support for an MO-LR | Yes | +--------------------------------------------------------------+------+ | Support for Network Based Positioning | Yes | +--------------------------------------------------------------+------+ | Support for UE Based and UE Assisted Positioning | Yes | +--------------------------------------------------------------+------+ | Number of new MME interfaces | 2 | +--------------------------------------------------------------+------+ | Number of new eNB interfaces | 0 | +--------------------------------------------------------------+------+ | Number of new GMLC interfaces | 1 | +--------------------------------------------------------------+------+ | Number of interfaces to the E-SMLC | 1 | +--------------------------------------------------------------+------+ | Positioning Continuity possible for intra-MME relocation | | | (Note 1) | | +--------------------------------------------------------------+------+ | Positioning Continuity possible for inter-MME relocation | | | (Note 1) | | +--------------------------------------------------------------+------+ | Location continuity for emergency calls following eNB | Yes | | handover (Note 2) | | +--------------------------------------------------------------+------+ | Location continuity for emergency calls following MME | Yes | | Relocation (Note 2) | | +--------------------------------------------------------------+------+ | Location continuity for emergency calls following inter-RAT | Yes | | handover in the PS domain (Note 2) | | +--------------------------------------------------------------+------+ | Possibility to combine E-SMLC with one of MME, eNB or GMLC | Yes | +--------------------------------------------------------------+------+ | Can support consecutive handovers between MMEs | Yes | +--------------------------------------------------------------+------+ | Can support ISR | Yes | +--------------------------------------------------------------+------+ | NOTE 1: Positioning continuity here refers to the ability to | | | continue a UE assisted or UE based positioning session | | | between the E-SMLC and UE following handover. This criterion | | | is specific to the positioning method and will depend on the | | | importance of positioning continuity to the particular | | | positioning method. | | | | | | NOTE 2: Location continuity for emergency calls refers to | | | preserving the ability to deliver an initial position | | | estimate and subsequent updated position estimate to the | | | PSAP following handover in a manner transparent to the PSAP. | | +--------------------------------------------------------------+------+
Possible E-UTRAN associated impacts to support this architecture are listed
below (e.g. may require support in TSG RAN):
\- Define an LPP positioning protocol between the UE and E-SMLC for UE
assisted and UE based positioning
\- Define impacts to S1-AP to support network based positioning
### 6.2.5 User Plane interworking
This defines inter-working with Control Plane LCS Architectural Alternative #2
defined in clause 6.2.1 to 6.2.4. It employs an Evolved SMLC directly attached
to the MME. The Evolved SMLC also includes or interfaces a SPC function as
defined in OMA SUPL V2.0. It can thus provide a consistent set of positioning
methods for deployments utilizing both CP and UP.
Such inter-working does not modify or replace any part of the architectural
description in clause 6.2.1 to 6.2.4. The inter-working does not enable use of
UP signalling for part of a CP positioning session .The user plane in the
inter-working here is not intended as an alternative path to Control Plane
signalling needed between UE and eNodeB for mechanisms such as Control Plane
A-GPS in a standalone Control Plane solution.
#### 6.2.5.1 Objectives
The main objectives of this solution are as follows:
\- Keeps the position method selection solely inside the E-SMLC.
\- Allows tight inter-working between CP and UP positioning solutions.
\- Allows for the E-SMLC/SPC to retrieve measurement (e.g. GNSS to RAN time
relations) from eNodeB.
#### 6.2.5.2 Architectural Details
The extension is shown in Figure 6.2.5-1. The main distinguishing
characteristic is an Evolved SMLC (E-SMLC) including an SPC connected to the
MME. This variant has, for CP-only positioning the same characteristic,
information flows and protocols as Architectural Alternative #2 in clause 6.2.
For inter-working UP/CP positioning, no new interfaces need to be defined
assuming the SPC is integrated in E-SMLC or attached with proprietary
interface to E-SMLC. The SLs interface need to be capable to query eNodeBs for
information not related to a UE connection. This may however be required also
for a CP-only positioning procedure. The Lup and Llp interface are part of the
UP solution and are not part of the CP LCS solution. To fully utilize the
inter-working the ULP/ILP protocols need to use a specific positioning
protocol defined for LTE.
Figure 6.2.5-1: LCS Control Plane Architecture employing an Evolved SMLC
(E-SMLC) with integrated SPC attached to an MME
#### 6.2.5.3 Information Flows and Protocols
##### 6.2.5.3.1 Network Based Positioning Procedure
Figure 6.2.5-2: Network Based Positioning Procedure
1\. An UP positioning procedure in the SPC associated with the E-SMLC. The SPC
requests radio specific information from the E-SMLC.
2\. The E-SMLC sends a Positioning Measurement Request to the MME. This
includes parameters for the E-UTRAN defining the type of measurement
information required.
3\. The MME sends an S1AP Location Measurement Control to the eNodeB carrying
the E-UTRAN parameters.
4\. The eNodeB returns an S1AP Location Measurement Report to the MME carrying
requested measurements.
5\. The MME returns measurements to the E-SMLC.
## 6.3 Architectural Alternative #3
The architectural alternative defined here employs an Evolved SMLC directly
attached to the eNodeB.
### 6.3.1 Objectives
The main objectives of this solution are as follows:
\- support location of an IMS emergency call
\- provide a location solution with high compatibility to that for WCDMA in TS
25.305
### 6.3.2 Architectural Details
#### 6.3.2.1 Architecture for NI-LR
An architecture to support an NI-LR for emergency calls is shown in Figure
6.3-1. The main distinguishing characteristic is an Evolved SMLC (E-SMLC)
connected to the eNodeB that is analogous to the BSS based SMLC defined for
GSM in TS 03.71 and TS 43.059 and to the SAS defined for WCDMA in TS 25.305.
This alternative may not avoid the need to stop and restart a location session
for an inter-eNodeB handover or inter-MME relocation. Some arbitrary
designations are again used for the new interfaces which here comprise an LTE-
Iupc interface between the eNodeB and E-SMLC and an SLg interface between the
MME and GMLC. The SLg interface might be similar to the existing Lg interface
defined in TS 23.271 between a GMLC and either an SGSN or MSC. The LTE-Iupc
interface may be similar to the Iupc interface defined in TS 25.453 used
between an RNC and SAS for WCDMA. In addition to the new interfaces, the
existing S1-MME and LTE-Uu interfaces would be modified through the addition
of some new messages and parameters and new or modified positioning protocol.
This alternative needs no optimization to improve E-SMLC access to the eNodeB
but suffers, as already remarked, from location disruption following inter-
eNodeB handover. That might seem enough to dismiss it without further
evaluation except that it offers the possibility to more easily use native
enhanced RRC based positioning than do other alternatives which suggests at
least completing an a first level evaluation.
Figure 6.3-1: LCS Control Plane Architecture C employing an Evolved SMLC
(E-SMLC) attached to an eNB
#### 6.3.2.2 Architecture for MT-LR and MO-LR
An extension to the architecture to support an MT-LR and MO-LR is shown below.
Figure 6.3-2: LCS Control Plane Architecture for an MT-LR and MO-LR
The Lh (MAP) interface above would need to be modified to enable the HSS to
provide the MME address and VPLMN identity to the HGMLC. Possibly, the Lh
interface might be migrated to an IP based interface.
The Lg interface might also be slightly modified to enable the HGMLC to convey
the MME address to the VGMLC. As in the case of the Lh interface, the Lg
interface might be migrated to an IP based interface.
#### 6.3.2.3 Provision of MME Address to GMLC for an NI-LR
The description of this issue in clause 6.1.2.3 for alternative #1 applies
equally to alternative #3.
### 6.3.3 Information Flows and Protocols
The information flows shown here are specific extensions of the common flows
described in clause 6.1.
#### 6.3.3.1 Location Support for IMS Emergency Calls
The procedure here is identical to that described on clause 6.1.3.1 for
alternative #1.
#### 6.3.3.2 Location Procedure between the GMLC, MME, eNodeB and E-SMLC
The location procedure described here supports both an NI-LR for emergency
calls and an MT-LR for an external LCS client.
Figure 6.3-3: Location Procedure between the GMLC, MME, eNodeB and E-SMLC
1\. The GMLC sends a location request to the serving MME indicating the
required QoS and UE identity. For a commercial MT-LR, UE privacy preferences
are also included (as currently supported for GSM and UMTS).
2\. For a commercial MT-LR, the E-SMLC may notify the UE concerning the
location request and verify its privacy preference as described further down.
3\. The MME forwards the location request to the serving eNodeB in an S1AP
Location reporting Control.
4\. The eNodeB forwards the location request to an E-SMLC in a Position
Initiation Request. Both the MME and eNodeB should retain state information
for the location request.
5\. The E-SMLC performs a positioning procedure appropriate to the particular
QoS and architecture.
6\. The E-SMLC returns the resulting location information (e.g. location
estimate) to the eNodeB in a Position initiation Response.
7\. The eNodeB returns the location information to the MME in an S1AP Location
Report.
8\. The MME returns the location information to the GMLC.
To support Figure 6.3-3, protocol layering between the GMLC and MME could be
same as for an MME based architecture in clause 6.2.3. Protocol layering
between the MME and eNodeB would be as already defined in TS 23.401 and as
shown in Figure 6.3-4. Protocol layering between the eNodeB and E-SMLC could
be as shown in either Figure 6.3-5 or Figure 6.3-6. Figure 6.3-5 is based on
the IP variant of signalling defined between an RNC and SAS in TS 24.452
whereas Figure 6.3-6 uses layers already supported by the eNodeB in TS 23.401.
ePCAP can be either a new protocol analogous to PCAP in TS 25.453 or an
extension of PCAP.
Figure 6.3-4: Protocol Layering between the MME and eNodeB in Figure 6.3-3
Figure 6.3-5: Possible Protocol Layering between the eNodeB and E-SMLC in
Figure 6.3-3: IP/SS7 Variant
Figure 6.3-6: Possible Protocol Layering between the eNodeB and E-SMLC in
Figure 6.3-3: IP Variant
#### 6.3.3.3 Network Based Positioning Procedure
Figure 6.3-7: Network Based Positioning Procedure
1\. The E-SMLC sends a Position Activation request to the serving eNodeB
carrying parameters indicating the types of measurements requested.
2\. The eNodeB returns the CGI and specific measurements requested in step 1.
Possible protocol layering in Figure 6.3-7 would be as in Figure 6.3-5 or
Figure 6.3-6.
#### 6.3.3.4 UE Assisted and UE Based Positioning Procedure -- Variant 1
Variant 1 is based on the control plane solution for WCDMA as defined in TS
25.305.
Figure 6.3-8: UE Assisted and UE Based Positioning Procedure -- Variant 1
1\. The E-SMLC sends a Position Activation request to the eNodeB carrying the
requested position method or methods, possible assistance data and the
requested measurements. All the data is visible to the eNodeB and may have to
be interpreted, reformatted and modified.
2\. The eNodeB sends an RRC Measurement Control to the UE containing the UE
position method and any assistance data and requested measurements received in
step 1.
3\. The UE performs the requested positioning -- e.g. using A-GPS or A-GNSS --
and may, if requested, compute a location estimate.
4\. The UE returns the requested measurements or the location estimate to the
eNodeB in an RRC Measurement Report.
5\. The eNodeB forwards the measurements or location estimate to the E-SMLC.
Possible protocol layering for variant 1 is shown in Figure 6.3-9 for the IP
based variant of eNodeB to E-SMLC signalling.
Figure 6.3-9: Possible Protocol Layering in Figure 6.3-8
#### 6.3.3.5 UE Assisted and UE Based Positioning Procedure -- Variant 2
Variant 2 is based on the control plane solution for GSM as defined in TS
43.059.
Figure 6.3-10: UE Assisted and UE Based Positioning Procedure -- Variant 2
1\. The E-SMLC sends a Position Activation request to the eNodeB carrying an
LLP PDU which carries the requested position method or methods, possible
assistance data and the requested measurements. The LLP PDU is transparent to
the eNodeB and need not be interpreted, reformatted or modified.
2\. The eNodeB forwards the LLP PDU to the UE in an existing RRC DL
Information Transfer message.
3\. The UE performs the requested positioning -- e.g. using A-GPS or A-GNSS --
and may, if requested, compute a location estimate.
4\. The UE returns the requested measurements or the location estimate to the
eNodeB in an LLP PDU contained in an existing RRC UL Information Transfer
message.
5\. The eNodeB forwards the LLP PDU to the E-SMLC.
Possible protocol layering for variant 2 is shown in Figure 6.3-11 for the IP
based variant of eNodeB to E-SMLC signalling.
Figure 6.3-11: Possible Protocol Layering in Figure 6.3-10
#### 6.3.3.6 Location Continuity for Emergency Call Handover in the PS Domain
The procedures applicable here are nearly the same as those described for
alternative #1 in clause 6.1.3.5. The differences are as follows.
\- the old MME must terminate any location procedure that the GMLC had
previously invoked for the UE, possibly when the handover procedure started.
\- the GMLC does not return the address of an E-SMLC to the MME
\- the GMLC does not update an E-SMLC with the new MME address
The procedures described here imply that with respect to UE assisted and US
based positioning, this architecture alternative cannot provide positioning
continuity for either intra-MME eNodeB relocation or inter-MME relocation
within the same PLMN EPS due to E-SMLC association with a particular eNodeB.
#### 6.3.3.7 Location Continuity for Emergency Call Handover between PS and CS
Domains
The description for alternative #1 in clause 6.1.3.6 applies here.
#### 6.3.3.8 MT-LR Procedure
The procedure is as described in clause 6.1.3.7 for alternative #1.
#### 6.3.3.9 Support of an MO-LR
##### 6.3.3.9.1 NAS Protocol Support
NAS protocol support is as described for alternative #2 in clause 6.2.3.7.1
##### 6.3.3.9.2 MO-LR Procedure
Figure 6.3-12: MO-LR Procedure
1\. The UE sends a NAS PDU containing an MO-LR Request inside an RRC UL
Information Transfer message to the eNodeB.
2\. The eNodeB forwards the MO-LR Request to the MME inside an S1AP Uplink NAS
Transport message.
3\. The MME verifies UE subscription to an MO-LR. The MME then sends a
location request to the serving eNodeB in an S1AP Location reporting Control.
4\. The eNodeB forwards the location request to an E-SMLC in a Position
Initiation Request.
5\. The E-SMLC performs a positioning procedure appropriate to the QoS
according to Figure 13 and/or Figure 14.
6\. The E-SMLC returns the resulting location information (e.g. location
estimate) to the eNodeB in a Position initiation Response.
7\. The eNodeB returns the location information to the MME in an S1AP Location
Report.
8\. The MME sends the result of the positioning (e.g. a location estimate) to
the eNodeB in a NAS protocol PDU. For a MO-LR transfer to third party, the MME
would also forward the location information obtained in step 7 to a VGMLC (not
shown) and thence to an LCS Client via the HGMLC for the UE and an R-GMLC.
9\. The eNodeB forwards the location result to the UE.
### 6.3.4 Evaluation
The following table provides an evaluation of architectural alternative #3
with respect to support of emergency calls.
Table 6.3-1: Evaluation of Architectural Alternative 3
+--------------------------------------------------------------+------+ | Criteria | # 1 | +--------------------------------------------------------------+------+ | Support for an NI-LR and MT-LR for emergency calls | Yes | +--------------------------------------------------------------+------+ | Support for a non-emergency MT-LR | Yes | +--------------------------------------------------------------+------+ | Support for an MO-LR | Yes | +--------------------------------------------------------------+------+ | Support for Network Based Positioning | Yes | +--------------------------------------------------------------+------+ | Support for UE Based and UE Assisted Positioning | Yes | +--------------------------------------------------------------+------+ | Number of new MME interfaces | 1 | +--------------------------------------------------------------+------+ | Number of new eNB interfaces | 1 | +--------------------------------------------------------------+------+ | Number of new GMLC interfaces | 1 | +--------------------------------------------------------------+------+ | Number of interfaces to the E-SMLC | 1 | +--------------------------------------------------------------+------+ | Positioning Continuity possible for intra-MME relocation | | | (Note 1) | | +--------------------------------------------------------------+------+ | Positioning Continuity possible for inter-MME relocation | | | (Note 1) | | +--------------------------------------------------------------+------+ | Location continuity for emergency calls following eNB | Yes | | handover (Note 2) | | +--------------------------------------------------------------+------+ | Location continuity for emergency calls following MME | Yes | | Relocation (Note 2) | | +--------------------------------------------------------------+------+ | Location continuity for emergency calls following inter-RAT | Yes | | handover in the PS domain (Note 2) | | +--------------------------------------------------------------+------+ | Possibility to combine E-SMLC with one of MME, eNB or GMLC | Yes | +--------------------------------------------------------------+------+ | Support for ISR | | +--------------------------------------------------------------+------+ | NOTE 1: Positioning continuity here refers to the ability to | | | continue a UE assisted or UE based positioning session | | | between the E-SMLC and UE following handover. This criterion | | | is specific to the positioning method and will depend on the | | | importance of positioning continuity to the particular | | | positioning method. | | | | | | NOTE 2: Location continuity for emergency calls refers to | | | preserving the ability to deliver an initial position | | | estimate and subsequent updated position estimate to the | | | PSAP following handover in a manner transparent to the PSAP. | | +--------------------------------------------------------------+------+
Possible E-UTRAN associated impacts to support this architecture are listed
below (e.g. may require support in TSG RAN):
\- Define an LPP positioning protocol between the UE and E-SMLC for UE
assisted and UE based positioning
\- New impacts to S1-AP
\- Define an ePCAP location protocol between the eNodeB and E-SMLC to help
support UE assisted, UE based and network based positioning
## 6.4 Architectural Alternative #4
The architectural alternative defined here employs an Evolved SMLC directly
attached to both the eNodeB and the MME.
### 6.4.1 Objectives
The main objective of this solution is as follows:
\- tbd.
### 6.4.2 Architectural Details
This alternative is shown in Figure 1. The eSMLC is connected to both the eNB
and the MME. Such an approach resolves issues with inter-eNodeB handover with
the SLs interface used to manage mobility. The LTE-Iupc interface is a
connection between the eSMLC and the eNB and would be the conduit for all
location related information between the UE and eSMLC. This interface might
look something similar to that of the Iupc interface (25.453) or a subset of
the RRC interface.
NOTE: The architecture also indicates the possibility of multiple SMLCs, a
topic that merits further consideration once the final architecture is
selected.
Figure 6.4.1: LCS Control Plane Architecture with eSMLC attached to the eNB
and MME
### 6.4.3 Information Flows and Protocols
### 6.4.4 Evaluation
The following table provides an evaluation of architectural alternative #4.
Table 6.4-1: Evaluation of Architectural Alternative 4
+------------------------------------------------------------+--------+ | Criteria | Arch 4 | +------------------------------------------------------------+--------+ | Support for an NI-LR and MT-LR for emergency calls | - | +------------------------------------------------------------+--------+ | Support for a normal MT-LR | - | +------------------------------------------------------------+--------+ | Support for an MO-LR | - | +------------------------------------------------------------+--------+ | Support for Network Based Positioning | - | +------------------------------------------------------------+--------+ | Support for UE Based and UE Assisted Positioning | - | +------------------------------------------------------------+--------+ | Number of new MME interfaces | 2 | +------------------------------------------------------------+--------+ | Support for ISR | | +------------------------------------------------------------+--------+ | Number of new eNB interfaces | 1 | +------------------------------------------------------------+--------+ | Number of new GMLC interfaces | 1 | +------------------------------------------------------------+--------+ | Number of interfaces to the E-SMLC | 2 | +------------------------------------------------------------+--------+ | Position Continuity possible for intra-MME relocation | - | | (note 1) | | +------------------------------------------------------------+--------+ | Position Continuity possible for inter-MME relocation | - | | (note 1) | | +------------------------------------------------------------+--------+ | Location continuity for emergency calls following eNB | - | | handover (note 2) | | +------------------------------------------------------------+--------+ | Location continuity for emergency calls following MME | - | | Relocation (Note 2) | | +------------------------------------------------------------+--------+ | Location continuity for emergency calls following | - | | inter-RAT handover in the PS domain (Note 2) | | +------------------------------------------------------------+--------+ | Possibility to combine E-SMLC with one of MME, eNB or GMLC | - | +------------------------------------------------------------+--------+ | NOTE 1: Positioning continuity here refers to the ability | | | to continue a UE assisted or UE based positioning session | | | between the E-SMLC and UE following handover. | | | | | | NOTE 2: Location continuity for emergency calls refers to | | | preserving the ability to deliver an initial position | | | estimate and subsequent updated position estimate to the | | | PSAP following handover in a manner transparent to the | | | PSAP. | | +------------------------------------------------------------+--------+
## 6.5 Architectural Alternative #5
The architectural alternative defined here employs an Evolved SMLC directly
attached to the GMLC.
### 6.5.1 Objectives
The main objectives of this solution are as follows:
\- support location of an IMS emergency call
\- avoid impacts to a location session due to an inter-eNodeB handover and MME
relocation
\- support MO-LR and MT-LR services
\- concentrate and contain LCS related functionality to one logical element
### 6.5.2 Architectural Details
#### 6.5.2.1 Architecture for NI-LR
This alternative is shown in Figure 6.5-1. The difference with architecture
alternative 1 is the E-SMLC is interfacing with GMLC, thus the SLg* interface
between MME and GMLC is eliminated from this alternative. The SLs interface
disappears if the E-SMLC and GMLC are logically/physically combined.
This alternative may avoid the need to stop and restart a location session for
both an inter-eNodeB handover and inter-MME relocation. The SLh interface
between HSS and GMLC might be similar to or even the same as the S6a
interface. In addition to the new interfaces, the existing S1-MME interface
would be modified through the addition of some new messages and parameters and
the LTE-Uu interface might be modified at an application layer through use of
a new or modified positioning protocol.
Figure 6.5-1: LCS Control Plane Architecture employing an Evolved SMLC
(E-SMLC) attached to a GMLC
#### 6.5.2.2 Architecture for MT-LR and MO-LR
An extension to the architecture to support an MT-LR and MO-LR is shown below.
Figure 6.5-2: LCS Control Plane Architecture for an MT-LR and MO-LR
The Lh (MAP) interface above would need to be modified to enable the HSS to
provide the MME address and VPLMN identity to the HGMLC. Possibly, the Lh
interface might be migrated to an IP based S6a interface.
The Lr interface might also be slightly modified to enable the HGMLC to convey
the MME address to the VGMLC. As in the case of the Lh interface, the SLg
interface might be migrated to an IP based interface.
#### 6.5.2.3 Provision of MME Address to GMLC for an NI-LR
The description of this issue in clause 6.1.2.3 for alternative #1 applies
equally to alternative #5.
### 6.5.3 Information Flows and Protocols
#### 6.5.3.1 Location Support for IMS Emergency Calls
The procedure here is in general identical to that described in clause 6.1.3.1
for alternative #1. The main difference between alternative #1 or #2 and #5 is
that in #5 it is proposed that once the MME detects the emergency call it
triggers a location request towards the eNB to obtain the Cell-ID and possible
measurements (TBD by RAN WGs). These parameters are sent by the MME to the
GMLC along with Location Report in step 2 of alternative #1 in clause 6.1.3.1.
Note that this is normal procedure on CS side and could be considered for the
other alternatives under study and not only alternative #5.
The purpose of obtaining the mentioned information early in call setup phase
is to provide information to:
a) Assist in routing the emergency call to the correct PSAP.
b) Serve as one piece of assistance data if the call flow proceeds to UE-Based
and UE-Assisted methods e.g. A-GPS or OTDOA.
c) Serve as the location estimate in its own right if the QoS is already
satisfied.
#### 6.5.3.2 Location Procedure between the GMLC, MME and E-SMLC
The location procedure between GMLC and E-SMLC depends on the procedures as
outlined below for MT-LR, NI-LR and MO-LR and in particular for Network Based
Positioning and UE Based or Assisted positioning. Aspects related to the
privacy and verification procedures in conjunction to commercial MT-LR are the
same as for alternative #1 and #2. I.e the privacy profile settings are stored
in the Privacy Profile Register (PPR) associated with the GMLC and need to be
signalled over the SLg interface requesting the MME to perform the privacy
and/or verification action depending on the subscriber profile in the PPR.
This is shown in the clause 6.5.3.3.
Regardless of the architecture the MME needs to be equipped with a privacy
handling function as the protocol on SLg interface is terminated at the MME
and the signalling with the UE happens over a NAS based protocol. An
alternative to this is to rely on NAS relay at the MME as suggested in figure
6.2-10 of alternative #2 with the main difference being that LPP is being
terminated at the GMLC instead of E-SMLC.
In addition to the possible protocol layering shown for the other alternatives
a possible alternative for SLs is shown below. The reference point between
GMLC and E-SMLC is close to the Llp reference point in OMA SUPL architecture.
Hence OMA ILP protocol may be suitable to be used on this reference point.
Figure 6.5-3: Possible Protocol Layering on the SLs interface
#### 6.5.3.3 MT-LR Network Based Positioning Procedure
Figure 6.5-4: Network Based Positioning Procedure
1\. Upon reception of a location request from an external LCS Client or H-GMLC
the V-GMLC obtains routing information from the HSS. The flow between external
LCS Client, R-GMLC, H-GMLC and V-GMLC as well as the handling during active
ISR feature are the same as alternative 1 clause 6.1.3.7. The GMLC instigates
the positioning procedure by sending a Positioning Request to the E-SMLC
carrying the UE Identity and requested QoS.
2\. The E-SMLC sends a Position Activation Request to the GMLC indicating to
proceed with a Network Based Positioning Procedure. The E-SMLC may also
indicate to proceed with a UE Assisted/Based Positioning Procedure by
including an LPP PDU to the message. This enables hybrid use of Network Based
Positioning and UE Assisted/Based Positioning.
3\. The GMLC sends Provide Subscriber Location request to the MME containing
the UE identity and parameters for E-UTRAN defining the type of measurement
information required.
4\. If the UE is in ECM-IDLE state, the MME performs a network triggered
service request as defined in TS 23.401 in order to establish a signalling
connection with the UE and assign a specific eNodeB. Normal inactivity timers
in the MME and eNodeB to release the signalling connection with UE may need to
be extended to allow time for the positioning to occur in steps 4 and 5. The
details of this are FFS.
5\. If the Provide Subscriber Location request in step 2 contain any privacy
action parameters the MME initiates the Notification and Privacy Verification
procedure accordingly.
6\. The MME sends a Direct Location Report Control on the S1AP containing the
UE identity and parameters for E-UTRAN defining the type of measurement
information required.
7\. The eNB collects the requested measurement information and return the
result to the MME in a Location Report containing the CGI and eNB
measurements.
8\. The MME responds to the GMLC with a Provide Subscriber Location Ack
containing the CGI and eNB measurements.
9\. The GMLC responds with a Position Activation Response to the eSMLC over
SLs interface. The E-SMLC calculates a location estimate based on the received
information.
10\. The eSMLC responds to the GMLC with a Location Estimate.
The protocol layering principles for the SLg interface between the GMLC and
MME can be similar to those described in clause 6.2.3.2 for alternative #2.
#### 6.5.3.4 NI-LR Network Based Positioning Procedure
Figure 6.5-5: Network Based Positioning Procedure
The NI-LR Procedure is essentially the same as for MT-LR with the difference
that the MME triggers the S1AP Location Report Control procedure towards eNB
upon detection of the emergency call and the CGI and eNB measurements (TBD by
RAN WGs) are sent to GMLC using Subscriber Location Report procedure. Note
that the other alternatives don\'t assume triggering of the positioning
procedure by the MME once the emergency call is detected. However, the
behaviour described in alternative 5 is consistent with existing CS procedures
(TS 23.271 [2]) and is applicable to all alternatives including alternative
#5.
1\. Following an emergency call invocation from the user, the UE will attach
to the EPS if not already attached and obtain a suitable IP Bearer for the
user plane in a serving gateway and PDN gateway. The details of this are still
be agreed, but it is assumed that some emergency indication (e.g. an emergency
APN) will be used for the attach or for the bearer allocation that will inform
the MME that an Emergency Call is in progress. In the case that the UE does
not detect the emergency call (e.g. does not recognize the dialled emergency
number), the P-CSCF could reject the initial request and force the UE to first
perform an emergency registration which would ensure that a new emergency
bearer allocation would occur via the MME.
2\. Once step 1 is complete, i.e. the MME has detected the emergency call
invocation, the MME sends a Location Report Control to the eNB to obtain
location measurements.
3\. The eNB collects the relevant location measurements e.g. CellID, Timing
Advance and Measurement Report. Note that these measurements are used for
emergency call routing purposes and should be obtain without necessarily delay
the call setup. Once the relevant location measurements have been collected
the eNB responds with a Location Report to the MME.
4\. The MME sends a Subscriber Location Report to a GMLC in the visited
network that is designated to support location of emergency calls. The
location report carries the UE identity (e.g. IMSI, IMEI), the MME IP address,
the location measurements and indication of a emergency call origination.
5\. The GMLC acknowledges the location report to the MME.
6\. Once the GMLC receives the Subscriber Location Report from the MME the
GMLC sends a position request containing the location measurements received in
step 6 to the eSMLC.
7\. The eSMLC calculates a location estimate based on the received location
measurements that can be used for emergency call routing purposes and returns
the location estimate to the GMLC.
#### 6.5.3.5 UE Assisted and UE Based Positioning Procedure for emergency
session positioning
Figure 6.5-6: UE Assisted and UE Based Positioning Procedure for emergency
session positioning
NOTE 1: This procedure may follow the procedure in 6.5.3.4 NI-LR Network Based
Positioning Procedure and steps 6 and 7 may coincide with steps 1. and 2. in
this procedure. I.e. the GMLC/E-SMLC may continue with a UE-Assisted and UE
Based Positioning Procedure if the QoS of the Location Estimate is not
satisfied based on the CGI and measurements pushed to the GMLC in step 4. of
the NI-LR Network Based Positioning Procedure.
NOTE 2: This procedure can be applied for emergency session positioning when
LRF/GMLC has knowledge on the current UE\'s coarse location (e.g., location
info such as GCI in IMS SIP INVITE) and the positioning procedure is not (e.g.
by system configuration) triggered by the MME according to clause 6.5.3.4.
NOTE 3: Notification and Privacy Verification procedure is not applicable for
emergency session positioning.
1\. The GMLC triggers the eSMLC with a positioning request over SLs interface
to the eSMLC carrying UE identity and requested QoS.
2\. The E-SMLC sends a Positioning Activation Request to the GMLC carrying an
LTE Positioning Protocol (LPP) PDU which may request specific measurements by
the UE provide assistance data or query for the UE capabilities.
3\. The GMLC sends a Provide Subscriber Location to the serving MME carrying
the UE Identity and LPP PDU.
4\. The MME forwards the LPP PDU to the serving eNodeB in an existing S1AP
Downlink NAS Transport message thereby making the contents of the LPP PDU
transparent to both the MME and eNodeB. The MME needs not retain state
information for the positioning request -- e.g. can treat the response in step
6 as a separate transaction -- although it must retain state information
associated with the location request from the GMLC.
5\. The eNodeB forwards the LPP PDU to the UE in an existing RRC DL
Information Transfer message.
6\. The UE performs any positioning measurements requested by the LPP PDU.
7\. The UE returns measurement information and/or information concerning its
capabilities or requested assistance data in an LPP PDU to the eNodeB
contained in an existing RRC UL Information Transfer message.
8\. The eNodeB forwards the LPP PDU to the MME in an existing S1AP Uplink NAS
Transport message.
9\. The MME forwards the LPP PDU to the GMLC in a Provide Subscriber Location
Ack. Steps 1 to 8 may be repeated to send new assistance data and request
further measurements.
10\. The GMLC forwards the LPP PDU to the eSMLC in a Positioning Activation
Response to the eSMLC over the SLs interface.
11\. The eSMLC calculates the location estimate and responds to the GMLC.
Steps 2 to 10 may be repeated to send new assistance data and request further
measurements.
Same protocol layering can be considered as for Alternative 2 for the
interface between GMLC and MME. For the interface between GMLC and E-SMLC,
i.e. SLs interface refer to clause 6.5.3.2.
#### 6.5.3.6 Location Continuity for Emergency Call Handover in the PS Domain
The procedures applicable here are nearly the same as those described for
alternative #1 in clause 6.1.3.5. The differences are as follows.
\- the old MME must terminate any location procedure that the GMLC had
previously invoked for the UE, possibly when the handover procedure starts.
The procedures described here also imply that this architecture alternative
can provide positioning continuity with respect to UE based and UE assisted
methods for intra-MME eNodeB relocation as well as inter-MME relocation within
the same PLMN EPS due to the E-SMLC not being attached to a particular MME.
##### 6.5.3.6.1 Support of Intra E-UTRAN E-Node B Handover using X2 interface
The same applies as for alternative #1.
##### 6.5.3.6.2 Support of Intra E-UTRAN E-Node B Handover using S1 interface
The same applies as for alternative #1 with the difference being that the
status update in step 9. is sent to the GMLC instead of E-SMLC.
##### 6.5.3.6.3 Support of Intra E-UTRAN MME Relocation
Same applies as for alternative #1. However, there is no need for the GMLC to
inform the E-SMLC of the MME Relocation as the serving MME is anyway
transparent to the E-SMLC in alternative #5.
##### 6.5.3.6.4 UTRAN to E-UTRAN Relocation (Emergency Location Only)
Same applies as for alternative #1.
##### 6.5.3.6.5 E-UTRAN to UTRAN Relocation (Emergency Location Only)
Same applies as for alternative #1. Again, there is no need for the GMLC to
inform the E-SMLC of the MME Relocation as the serving MME is anyway
transparent to the E-SMLC in alternative #5.
##### 6.5.3.6.6 Variant2: Source MME/SGSN notification of MME/SGSN Relocation
##### 6.5.3.6.6.1 Introduction for source MME/SGSN notification of MME/SGSN
Relocation {#introduction-for-source-mmesgsn-notification-of-mmesgsn-
relocation-2 .H6}
Same applies as for alternative #1.
##### 6.5.3.6.6.2 Support of E-UTRAN MME Relocation {#support-of-e-utran-mme-
relocation .H6}
Same applies as for alternative #1. However, there is no need for the GMLC to
inform the E-SMLC of the MME Relocation as the serving MME is anyway
transparent to the E-SMLC in alternative #5. Neither it is required for the
E-SMLC to inform the New MME.
##### 6.5.3.6.6.3 UTRAN to E-UTRAN Relocation {#utran-to-e-utran-relocation
.H6}
Same applies as for alternative #1.
#### 6.5.3.7 Location Continuity for Emergency Call Handover between PS and CS
Domains
The description for alternative #1 in clause 6.1.3.6 applies here.
#### 6.5.3.8 MT-LR Procedure
The procedure is as described in clause 6.1.3.7 for alternative #1.
#### 6.5.3.9 Support of an MO-LR
##### 6.5.3.9.1 NAS Protocol Support
Same applies as for clause 6.2.3.8.1.
##### 6.5.3.9.2 MO-LR Procedure
{width="6.6875in" height="4.259027777777778in"}
Figure 6.5-7: MO-LR Procedure
1\. If the UE is in ECM-IDLE state, the UE performs a UE triggered service
request as defined in TS 23.401 in order to establish a signalling connection
with the MME and assign a specific eNodeB.
2\. The UE sends a NAS PDU containing an MO-LR Request inside an RRC UL
Information Transfer message to the eNodeB.
3\. The eNodeB forwards the MO-LR Request to the MME inside an S1AP Uplink NAS
Transport message.
4\. The MME verifies UE subscription to an MO-LR. The MME then sends a
Subscriber Location Report including the QoS and MO-LR Request indication to
the GMLC.
5\. The GMLC sends a Positioning Request to the eSMLC over SLs interface
containing the UE Identity and QoS.
6\. The E-SMLC performs a positioning procedure appropriate to the QoS
according to Figure 6.5-4 and/or Figure 6.5-6.
7\. The E-SMLC returns the resulting location information (e.g. location
estimate) to the GMLC.
8\. The GMLC responds to the MME with a Subscriber Location Report Ack
containing the Location Estimate. For a MO-LR transfer to third party, the
GMLC would also forward the location information obtained in step 7 to an LCS
Client via the HGMLC (not shown) and R-GMLC.
9\. The MME returns the result of the positioning (e.g. a location estimate)
to the eNodeB.
10\. The eNodeB forwards the location result to the UE.
### 6.5.4 Evaluation
The following table provides an evaluation of architectural alternative #5
with respect to support of emergency calls.
Table 6.5-1: Evaluation of Architectural Alternative 5
+--------------------------------------------------------------+------+ | Criteria | # 5 | +--------------------------------------------------------------+------+ | Support for an NI-LR and MT-LR for emergency calls | Yes | +--------------------------------------------------------------+------+ | Support for a non-emergency MT-LR | Yes | +--------------------------------------------------------------+------+ | Support for an MO-LR | Yes | +--------------------------------------------------------------+------+ | Support for Network Based Positioning | Yes | +--------------------------------------------------------------+------+ | Support for UE Based and UE Assisted Positioning | Yes | +--------------------------------------------------------------+------+ | Number of new MME interfaces | 1 | +--------------------------------------------------------------+------+ | Number of new eNB interfaces | 0 | +--------------------------------------------------------------+------+ | Number of new GMLC interfaces (Note 3) | 1 | +--------------------------------------------------------------+------+ | Number of interfaces to the E-SMLC | 1 | +--------------------------------------------------------------+------+ | Positioning Continuity possible for intra-MME relocation | | | (Note 1) | | +--------------------------------------------------------------+------+ | Positioning Continuity possible for inter-MME relocation | | | (Note 1) | | +--------------------------------------------------------------+------+ | Location continuity for emergency calls following eNB | Yes | | handover (Note 2) | | +--------------------------------------------------------------+------+ | Location continuity for emergency calls following MME | Yes | | Relocation (Note 2) | | +--------------------------------------------------------------+------+ | Location continuity for emergency calls following inter-RAT | Yes | | handover in the PS domain (Note 2) | | +--------------------------------------------------------------+------+ | Possibility to combine E-SMLC with one of MME, eNB or GMLC | Yes | +--------------------------------------------------------------+------+ | NOTE 1: Positioning continuity here refers to the ability to | | | continue a UE assisted or UE based positioning session | | | between the GMLC/E-SMLC and UE following handover. This | | | criterion is specific to the positioning method and will | | | depend on the importance of positioning continuity to the | | | particular positioning method. | | | | | | NOTE 2: Location continuity for emergency calls refers to | | | preserving the ability to deliver an initial position | | | estimate and subsequent updated position estimate to the | | | PSAP following handover in a manner transparent to the PSAP | | | | | | NOTE 3: If the SLs interface is based on OMA ILP it may be | | | considered as an existing interface otherwise there are 2 | | | new interfaces to the GMLC. | | +--------------------------------------------------------------+------+
### 6.5.5 User Plane interworking
The same interworking principle as presented in clause 6.2.5 for alternative
#2 applies.
#### 6.5.5.1 Objectives
The objectives are similar as presented in clause 6.2.5.1 for alternative #2.
In addition the combination of GMLC and SLC functionality enables a consistent
architecture regardless whether positioning is made in CP or UP or both. The
selection may depend on a number of factors including but not limited to
terminal capabilities, use case, i.e emergency location or commercial location
as well as operator preference.
#### 6.5.5.2 Architectural Details
The extension is shown in Figure 6.5-8. The main distinguishing characteristic
is an E-SMLC including an SPC connected to the GMLC. This variant has, for CP-
only positioning the same characteristic, information flows and protocols as
Architectural Alternative #5 in clause 6.5. For inter-working UP/CP
positioning, no new interfaces need to be defined assuming the SPC is
integrated in E-SMLC or attached with proprietary interface to E-SMLC. The SLs
interface can be a new interface but could be based on Llp using OMA ILP
protocol. The SLs interface need to be capable to query eNBs for information
not related to a UE connection. This may however be required also for a CP-
only positioning procedure. The Lup and Llp interface are part of the UP
solution and are not part of the CP LCS solution. To fully utilize the inter-
working the ULP/ILP protocols need to use a specific positioning protocol
defined for LTE.
Figure 6.5-8: LCS Control Plane Architecture employing an Evolved SMLC
(E-SMLC) with integrated SPC attached to the GMLC
#### 6.5.5.3 Information Flows and Protocols
##### 6.5.5.3.1 Network Based Positioning Procedure
Figure 6.5-9: Network Based Positioning Procedure
1\. An UP positioning procedure in the SPC associated with the E-SMLC. The SPC
requests radio specific information from the E-SMLC.
2\. The E-SMLC sends a Positioning Measurement Request to the MME via the
GMLC. This includes parameters for the E-UTRAN defining the type of
measurement information required.
3\. The GMLC continues with an MT-LR positioning procedure as in clause
6.5.3.3.
4\. The GMLC forwards the measurements to the E-SMLC.
# 7 Other Considerations
## 7.1 QoS
## 7.2 Privacy
## 7.3 Lawful Intercept ion
## 7.4 Location Service Continuity between Radio Access Technologies
# 8 Comparison of Architectural Alternatives
The following table summarizes the evaluations of all the architectural
alternatives in clause 6 that have detailed descriptions, including
informational flows and protocol stacks. Alternative 4 was not evaluated due
to lack of detailed information.
Table 8-1: Comparison of all Architectural Alternatives in Clause 6
+------------------------------------------+------+------+------+-----+ | Criteria | # 1 | # 2 | # 3 | #5 | +------------------------------------------+------+------+------+-----+ | Support for an NI-LR and MT-LR for | Yes | Yes | Yes | Yes | | emergency calls | | | | | +------------------------------------------+------+------+------+-----+ | Support for a non-emergency MT-LR | Yes | Yes | Yes | Yes | +------------------------------------------+------+------+------+-----+ | Support for an MO-LR | Yes | Yes | Yes | Yes | +------------------------------------------+------+------+------+-----+ | Support for Network Based Positioning | Yes | Yes | Yes | Yes | +------------------------------------------+------+------+------+-----+ | Support for UE Based and UE Assisted | Yes | Yes | Yes | Yes | | Positioning | | | | | +------------------------------------------+------+------+------+-----+ | Support for ISR | | | | | +------------------------------------------+------+------+------+-----+ | Number of new MME interfaces | 2 | 2 | 1 | 1 | +------------------------------------------+------+------+------+-----+ | Number of new eNB interfaces | 0 | 0 | 1 | 0 | +------------------------------------------+------+------+------+-----+ | Number of new GMLC interfaces (Note 3) | 2 | 1 | 1 | 1 | +------------------------------------------+------+------+------+-----+ | Number of interfaces to the E-SMLC | 2 | 1 | 1 | 1 | +------------------------------------------+------+------+------+-----+ | Positioning Continuity possible for | | | | | | intra-MME relocation (Note 1) | | | | | +------------------------------------------+------+------+------+-----+ | Positioning Continuity possible for | | | | | | inter-MME relocation (Note 1) | | | | | +------------------------------------------+------+------+------+-----+ | Location continuity for emergency calls | Yes | Yes | Yes | Yes | | following eNB handover (Note 2) | | | | | +------------------------------------------+------+------+------+-----+ | Location continuity for emergency calls | Yes | Yes | Yes | Yes | | following MME Relocation (Note 2) | | | | | +------------------------------------------+------+------+------+-----+ | Location continuity for emergency calls | Yes | Yes | Yes | Yes | | following inter-RAT handover in the PS | | | | | | domain (Note 2) | | | | | +------------------------------------------+------+------+------+-----+ | Possibility to combine E-SMLC with one | Yes | Yes | Yes | Yes | | of MME, eNB or GMLC | | | | | +------------------------------------------+------+------+------+-----+ | NOTE 1: Positioning continuity here | | | | | | refers to the ability to continue a UE | | | | | | assisted or UE based positioning session | | | | | | between the E-SMLC and UE following | | | | | | handover. This criterion is specific to | | | | | | the positioning method and will depend | | | | | | on the importance of positioning | | | | | | continuity to the particular positioning | | | | | | method. | | | | | | | | | | | | NOTE 2: Location continuity for | | | | | | emergency calls refers to preserving the | | | | | | ability to deliver an initial position | | | | | | estimate and subsequent updated position | | | | | | estimate to the PSAP following handover | | | | | | in a manner transparent to the PSAP. | | | | | | | | | | | | NOTE 3: For Alternative 5, If the SLs | | | | | | interface is based on OMA ILP it may be | | | | | | considered as an existing interface | | | | | | otherwise there are 2 new interfaces to | | | | | | the GMLC. | | | | | +------------------------------------------+------+------+------+-----+
Editor\'s Note: Options 1, 2 and 5 are seen as worth continuing to evaluate.
# 9 Conclusions
It is recommended to use Alternative 2 as the basis for normative
specification work on the Control Plane LCS architecture.
#