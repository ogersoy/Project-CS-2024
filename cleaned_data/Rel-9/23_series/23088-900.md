# Foreword
This Technical Specification (TS) has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document gives the stage 2 description of the call barring
services.
The possibility for a mobile subscriber to have certain categories of calls
barred originated from or terminated at his access:
Barring of outgoing calls (clause 1):
\- Barring of all outgoing calls (BAOC) (Barring program 1);
\- Barring of outgoing international calls (BOIC) (Barring program 2);
\- Barring of outgoing international calls EXCEPT those directed to the home
PLMN country
(BOIC-exHC) (Barring program 3).
Barring of incoming calls (clause 2):
\- Barring of all incoming calls (BAIC) (Barring program 1);
\- Barring of incoming calls when roaming outside the home PLMN country
(BIC-Roam) (Barring program 2).
NOTE: The call barring program \"incoming calls when roaming outside the home
PLMN country\" (clause 2) is only relevant if as a general rule the called
mobile subscriber pays the charges for the forwarded part of the call from his
home PLMN country to any other country.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or non‑specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the > case of a reference to a 3GPP document (including a GSM document), > a non-specific reference implicitly refers to the latest version > of that document _in the same Release as the present document_.
[1] 3GPP TR 21.905: \"3G Vocabulary\".
[2] 3GPP TS 22.082: \"Call Forwarding (CF) Supplementary Services ‑ Stage 1\".
[3] 3GPP TS 23.011: \"Technical realization of supplementary services\".
[4] 3GPP TS 23.078: \"Customised Applications for Mobile network Enhanced
Logic (CAMEL) Phase 3 - Stage 2\".
# 3 Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR
21.905 apply.
# 4 Cross-Phase compatibility
For the following supplementary services, a number of changes exist between
the present document and the Phase 1 specification:
\- Barring of outgoing calls;
\- Barring of incoming calls.
The main body of the present document assumes that all network entities comply
with this version of the service. In each case an additional subclause
(subclauses 6.6 and 7.6) defines the additional requirements for when one or
more network entities or the MS complies with the Phase 1 specifications for
the supplementary service procedures.
# 5 Data stored in the HLR for all call barring services
The following data are stored in the HLR in common for all call barring
services:
\- The \"notification to CSE flag\". This flag applies for all call barring
services. When the data for any Call Barring are changed, the HLR checks this
flag. If the flag is set, the change is reported to the gsmSCF(s) defined by
the gsmSCF address list. See TS 23.078.
\- The \"gsmSCF address list\", which is a list of gsmSCF addresses to which
Notification on Change of Subscriber Data is to be sent. This list applies to
all call barring services. See TS 23.078.
# 6 Barring of outgoing calls
## 6.1 Handling of barring of outgoing calls
The user control defined in this section is not applicable in PS domain.
### 6.1.1 Registration
If the served mobile subscriber at provision time has selected the
subscription option \"control of barring services by subscriber using
password\", he has to register a password at provision time. Furthermore the
served mobile subscriber can change the password by an appropriate control
procedure at any time. The control procedure consists of three steps: first,
the old password has to be provided. Secondly, the new password has to be
given, after which it has to be verified by providing it once more, see 3G TS
23.011.
If the served mobile subscriber at provision time has selected the
subscription option \"control of barring services by the service provider\" an
attempt to register a password will be denied and the served mobile subscriber
should receive a notification.
The subscriber can register a new password, thus causing the previous
registration to be overridden, see 3G TS 23.011.
### 6.1.2 Activation
#### 6.1.2.1 General
If the served mobile subscriber at provision time has selected the
subscription option \"control of barring services by subscriber using
password\" the supplementary service is activated if the subscriber provides
the following information to the network:
1) password;
2) information as to whether the activation applies to all basic services or a
specific basic service group;
3) selected barring program.
Activation can take place with an appropriate control procedure by the
subscriber.
If the served mobile subscriber at provision time has selected the
subscription option \"control of barring services by the service provider\",
the supplementary service cannot be activated by the subscriber. The
activation has to be performed by the service provider. An attempt to activate
the service will be denied and the served mobile subscriber should receive a
notification.
If the served mobile subscriber at provision time has selected the
subscription option \"control of barring services by subscriber using
password\", and if a wrong password is entered to activate the service the
supplementary service will not be activated and the served mobile subscriber
is notified.
The information flow for activation of barring of outgoing calls is shown in
figure 6.4. For more details see 3G TS 23.011.
#### 6.1.2.2 Interactions between barring of outgoing call programs
In case the served mobile subscriber activates barring of outgoing
international calls except those directed to the home PLMN country and this
service is not supported by the PLMN in which the served mobile subscriber
currently roams, the VPLMN will activate barring of outgoing international
calls instead. The SDL diagram in figure 6.1 shows the function to be
performed in the VLR in order to deal with this interaction. This function is
performed upon receiving the \"insert subscriber data\" message from the HLR.
In case the mobile subscriber activates one of the call barring programs and
another call barring program was already activated, this program will be
deactivated and the requested call barring program will be activated. The SDL
diagram in figure 6.2 shows the function to be performed in the HLR in order
to deal with this interaction between call barring programs.
#### 6.1.2.3 Interactions with call forwarding supplementary services
This section is not applicable for SMS.
For interactions with call forwarding supplementary services see 3G TS 22.082.
The SDL diagram in figure 6.3 shows the function to be performed in the HLR in
order to deal with the interactions with call forwarding supplementary
services.
{width="6.200694444444444in" height="7.541666666666667in"}
Figure 6.1: BO1 Possible change of barring of outgoing international calls
except those directed to the home PLMN country into barring of outgoing
international calls
{width="6.217361111111111in" height="7.50625in"}
Figure 6.2: BO2 Interaction between call barring programs
{width="6.217361111111111in" height="7.50625in"}
Figure 6.3: BO3 Interaction between call forwarding supplementary services and
barring of outgoing calls programs
{width="5.03125in" height="4.447916666666667in"}
Figure 6.4: Activation of barring of outgoing calls
NOTE: BX indicates any of the barring programs. PW1 and PW2 indicate password
handling programs, see 3G TS 23.011.
### 6.1.3 Deactivation
The procedure for activation, described in subclause 1.1.2.1, is valid also
correspondingly for deactivation with the addition that a barring
supplementary service, i.e. the Outgoing barring service, or All barring
services can be signalled.
The information flow for deactivation of barring of outgoing calls is shown in
figure 6.5. For more details see 3G TS 23.011.
{width="5.177083333333333in" height="4.177083333333333in"}
Figure 6.5: Deactivation of barring of outgoing calls
NOTE: BO indicates the general code for barring of outgoing calls. PW1 and PW2
indicate password handling programs, see 3G TS 23.011.
### 6.1.4 Interrogation
The interrogation procedure enables the mobile subscriber to obtain
information about the data stored in the PLMN. After having requested this
procedure the network shall return a list of all basic services to which the
given barring program is active.
The information flow for interrogation of barring of outgoing calls is shown
in figure 6.6.
{width="5.239583333333333in" height="1.9479166666666667in"}
Figure 6.6: Interrogation of barring of outgoing calls
NOTE: BX indicates any of the barring programs.
## 6.2 Functions and information flows
The following Mobile Additional Functions have been identified:
[MAF017]{.underline}
Barring of all outgoing calls related authorizations examination.
The ability of a PLMN component to determine the authorizations relating to
barring of all outgoing calls. See figure 6.7.
Location: VLR/ SGSN
[MAF018]{.underline}
Barring of outgoing international calls related authorizations examination.
The ability of a PLMN component to determine the authorizations relating to
barring of outgoing international calls. See figure 6.8. In case of SMS, the
Service Centre Address is used to determine whether SMS transfer is
international or not.
Location: VLR/SGSN
[MAF020]{.underline}
Barring of outgoing international calls except those directed to the home PLMN
country related authorizations examination.
The ability of a PLMN component to determine the authorizations relating to
barring of outgoing international calls except those directed to the home PLMN
country. See figure 6.9. In case of SMS, the Service Centre Address is used to
determine whether the destination is in HPLMN or not.
Location: VLR/SGSN
The information flow for barring of outgoing circuit switched calls in CS
domain is shown in figure 6.10A. The information flow for barring of MO SMS is
shown in figure 6.10B.
{width="6.217361111111111in" height="7.50625in"}
NOTE: Emergency call check is applied only at VLR.
Figure 6.7: MAF017 Barring of all outgoing calls related authorisations
examination (VLR/SGSN)
{width="6.217361111111111in" height="7.50625in"}
NOTE: Emergency call check is applied only at VLR.
Figure 6.8: MAF018 Barring of all outgoing international calls related
authorisations examination (VLR/SGSN)
{width="6.217361111111111in" height="7.50625in"}
NOTE: Emergency call check is applied only at VLR.
Figure 6.9: MAF020 Barring of outgoing international calls except those
directed to the home PLMN country related authorisations examination
(VLR/SGSN)
{width="5.395833333333333in" height="2.8333333333333335in"}
NOTE: OR1: call barred Y: yes\ N: no
Figure 6.10A: Information flow for barring of outgoing circuit switched calls
{width="4.351388888888889in" height="2.779166666666667in"}
NOTE: OR1: call barred Y: yes\ N: no
Figure 6.10B: Information flow for barring of MO SMS
## 6.3 Information stored in the HLR
For all call barring supplementary services in the HLR must be stored:
\- the subscription option \"control of barring services\" on per subscriber
basis.
This subscription option takes one of the following values:
\- by subscriber using password;
\- by the service provider.
If the subscription option \"control of barring services\" has been set to
\"by subscriber using password\" for barring of outgoing calls in the HLR must
be stored on per subscriber basis:
\- the registration parameter \"call barring password\".
The password is valid for all basic services to which barring of outgoing
calls applies;
\- the status parameter \"wrong password attempts counter\" associated with
the password.
Note that the subscription option and the call barring password are parameters
which are associated with all call barring services.
The outgoing calls barring program may have the following logical states
(refer to 3G TS 23.011 for an explanation of the notation):
* * *
**Provisioning State** **Registration State** **Activation State** **HLR
Induction State** (Not Provisioned, Not Applicable, Not Active, Not Induced)
(Provisioned, Not Applicable, Not Active, Not Induced) (Provisioned, Not
Applicable, Active and Operative, Not Induced) (Not Provisioned, Not
Applicable, Not Active, Induced) (Provisioned, Not Applicable, Not Active,
Induced) (Provisioned, Not Applicable, Active and Operative, Induced)
* * *
The activation and HLR induction states may be different for each applicable
elementary basic service group.
The provisioning state shall be on a per subscriber basis, and hence the same
for all basic service groups.
The HLR shall also store the logical state of the outgoing calls barring
program (which shall be one of the valid states listed above) for each
applicable elementary basic service group.
## 6.4 State transition model
The following figure shows the successful cases of transition between the
applicable logical states of the barring of outgoing call program. The state
changes are either caused by actions of the service provider, the mobile user
or the network.
Note that error cases are not shown in the diagram as they normally do not
cause a state change. Additionally, some successful requests may not cause a
state change. Hence, they are not shown in diagram.
The diagram only shows operations on an elementary basic service group.
Figure 6.11: State transition model for BAOC, BOIC and BOIC-exHC
## 6.5 Transfer of information from HLR to VLR/SGSN
If the provisioning state for the outgoing calls barring program is
\"Provisioned\" then when the subscriber registers on a VLR/SGSN the HLR shall
send that VLR/SGSN information about the logical state of the program for all
relevant elementary basic service groups. Only SMS is relevant for SGSN.
If the HLR induction state for the outgoing calls barring program is
\"Induced\" then when the subscriber registers on a VLR/SGSN the HLR shall
send that VLR/SGSN information about the logical state of the program for all
relevant elementary basic service groups.
If the logical state of the outgoing calls barring program is changed while a
subscriber is registered on a VLR/SGSN then for the affected basic service
groups, the HLR shall inform the VLR/SGSN of the new logical state of the
program.
The affected basic service group for SGSN is only SMS.
## 6.6 Information stored in the VLR/SGSN
For each barring of outgoing calls program the VLR/SGSN shall store the
service state information received from the HLR.
## 6.7 Handover
Handover will have no impact on the control procedures and the operation of
the service.
## 6.8 Cross Phase compatibility
### 6.8.1 MS, MSC, VLR or HLR only support Phase 1 control of SS by the
subscriber
In response to a Barring of outgoing calls interrogation request, if the MS or
any network element involved is of Phase 1, only information concerning basic
service groups for which the activation state has the value \"Active and
Operative\" will be returned.
### 6.8.2 HLR only support Phase 1 updating of subscriber information
If the VLR receives the SS-status parameter from a Phase 1 HLR it shall act as
if it has received the SS-Status parameter with the values shown in the
following:
1) Activated => P bit = 1, R bit = 0 or 1, A bit = 1, Q bit = 0;
2) Deactivated => P bit = 1, R bit = 0 or 1, A bit = 0, Q bit = 0 or 1.
## 6.9 Interworking with VLR or SGSN not supporting Call Barring
When the serving VLR/SGSN does not support call barring, the HLR/HSS may pass
to the VLR/SGSN ODB data to bar outgoing circuit switched call or/and MO SMS.
# 7 Barring of incoming calls
## 7.1 Handling of barring of incoming calls
The user control defined in this section is not applicable in PS domain.
### 7.1.1 Registration
If the served mobile subscriber at provision time has selected the
subscription option \"control of barring services by subscriber using
password\", he has to register a password at provision time. Furthermore the
served mobile subscriber can change the password by an appropriate control
procedure at any time. The control procedure consists of three steps: first,
the old password has to be provided. Secondly, the new password has to be
given, after which it has to be verified by providing it once more, see 3G TS
23.011.
If the served mobile subscriber at provision time has selected the
subscription option \"control of barring services by the service provider\" an
attempt to register a password will be denied and the served mobile subscriber
should receive a notification.
The subscriber can register a new password, thus causing the previous
registration to be overridden, see 3G TS 23.011.
### 7.1.2 Activation
#### 7.1.2.1 General
The procedure for activation of Barring of outgoing calls, described in
subclause 1.1.2.1, is valid also for activation of Barring of incoming calls.
The information flow for activation of barring of incoming calls is shown in
figure 7.3. For more details see 3G TS 23.011.
#### 7.1.2.2 Interactions between barring of incoming call programs
In case the mobile subscriber activates barring of all incoming calls and
barring of incoming calls when roaming outside the home PLMN country was
already activated, barring of incoming calls when roaming outside the home
PLMN country will be deactivated and barring of all incoming calls will be
activated.
The SDL diagram in figure 7.1 shows the function to be performed in the HLR in
order to deal with this interaction between call barring services.
#### 7.1.2.3 Interactions with call forwarding supplementary services
This section is not applicable for SMS.
For interactions with call forwarding supplementary services see 3G TS 22.082.
The SDL diagram in figure 7.2 shows the function to be performed in the HLR in
order to deal with the interactions with call forwarding services.
{width="6.217361111111111in" height="7.50625in"}
Figure 7.1: BI1 Interaction between call barring programs
{width="6.217361111111111in" height="7.50625in"}
Figure 7.2: BI2 Interaction between call forwarding supplementary services and
barring of incoming calls programs
{width="4.989583333333333in" height="4.458333333333333in"}
Figure 7.3: Activation of barring of incoming calls
NOTE: BX indicates any of the barring programs.\ PW1 and PW2 indicate password
handling programs, see 3G TS 23.011.
### 7.1.3 Deactivation
The procedure for activation of Barring of outgoing calls, described in
subclause 1.1.2.1, is valid also correspondingly for deactivation of Barring
of incoming calls with the addition that a barring supplementary service, i.e.
the Incoming barring service, or All barring services can be signalled.
The information flow for deactivation of barring of incoming calls is shown in
figure 7.4. For more details see 3G TS 23.011.
{width="5.208333333333333in" height="4.197916666666667in"}
Figure 7.4: Deactivation of barring of incoming calls
NOTE: BI indicates the general code for barring of incoming calls.\ PW1 and
PW2 indicate password handling programs, see 3G TS 23.011.
### 7.1.4 Interrogation
The interrogation procedure enables the mobile subscriber to obtain
information about the data stored in the PLMN. After having requested this
procedure the network shall return a list of all basic services to which the
given program is active.
The information flow for interrogation of barring of incoming calls is shown
in figure 7.5.
{width="5.333333333333333in" height="2.3333333333333335in"}
Figure 7.5: Interrogation of barring of incoming calls
NOTE: BX indicates any of the barring programs.
## 7.2 Functions and information flows
The following Mobile Additional Functions have been identified:
[MAF022]{.underline}
Barring of all incoming calls related authorizations examination\ The ability
of a PLMN component to determine the authorizations relating to barring of
incoming calls. See figure 7.6.
Location: HLR
[MAF023]{.underline}
Barring of incoming calls when roaming outside the home PLMN country related
authorizations examination\ The ability of a PLMN component to determine the
authorizations relating to barring of incoming calls when roaming outside the
home PLMN country. See figure 7.7.
Location: HLR
The information flow for barring of incoming circuit switched calls is shown
in figure 7.8A. The information flow for barring of MT SMS is shown in figure
7.8B.
{width="6.217361111111111in" height="7.50625in"}
Figure 7.6: MAF022 Barring of all incoming circuit switched calls and MT SMS
related authorisations examination (HLR)
{width="6.217361111111111in" height="7.50625in"}
Figure 7.7: MAF023 Barring of incoming circuit switched calls and MT SMS when
roaming outside the home PLMN country related authorisations examination (HLR)
{width="5.364583333333333in" height="5.71875in"}
NOTE: info req: information request\ info ack: information acknowledge\ OR1:
call barred Y: yes\ N: no.
Figure 7.8A: Information flow for barring of incoming circuit switched calls
{width="5.375in" height="2.779166666666667in"}
NOTE: info req: information request\ info ack: information acknowledge\ OR1:
call barred Y: yes\ N: no.
Figure 7.x: Information flow for barring of MT SMS
## 7.3 Information stored in the HLR
For all call barring supplementary services in the HLR must be stored:
\- the subscription option \"control of barring services\" on per subscriber
basis.
This subscription option takes one of the following values:
\- by subscriber using password;
\- by the service provider.
If the subscription option \"control of barring services\" has been set to
\"by subscriber using password\" for barring of incoming calls in the HLR must
be stored on a per subscriber basis:
\- the registration parameter \"call barring password\".
The password is valid for all basic services to which barring of incoming
calls applies;
\- the status parameter \"wrong password attempts counter\" associated with
the password.
Note that the subscription option and the call barring password are parameters
which are associated with all call barring services.
The incoming calls barring program may have the following logical states
(refer to 3G TS 23.011 for an explanation of the notation):
* * *
**Provisioning State** **Registration State** **Activation State** **HLR
Induction State** (Not Provisioned, Not Applicable, Not Active, Not Induced)
(Provisioned, Not Applicable, Not Active, Not Induced) (Provisioned, Not
Applicable, Active and Operative, Not Induced)
* * *
The program of barring of incoming call when roaming outside the home PLMN
country may also have the following logical state:
* * *
**Provisioning State** **Registration State** **Activation State** **HLR
Induction State** (Provisioned, Not Applicable, Active and Quiescent, Not
Induced)
* * *
The activation and HLR induction states may be different for each applicable
elementary basic service group.
The provisioning state shall be on a per subscriber basis, and hence the same
for all basic service groups.
The HLR shall also store the logical state of the incoming calls barring
program (which shall be one of the valid states listed above) for each
applicable elementary basic service group.
## 7.4 State transition model
The following figures show the successful cases of transition between the
applicable logical states of the call barring program. The state changes are
either caused by actions of the service provider, the mobile user or the
network.
Note that error cases are not shown in the diagrams as they normally do not
cause a state change. Additionally, some successful requests may not cause a
state change. Hence, they are not shown in the diagrams.
The diagrams only show operations on an elementary basic service group.
Figure 7.9: State transition model for BAIC
Figure 7.10: State transition model for BIC-Roam
NOTE: SS-I: SS Interaction started or Subscriber in HPLMN country.
SS-I/E: SS Interaction ended or Subscriber not in HPLMN country.
## 7.5 Transfer of information from HLR to VLR/SGSN
No information is transferred from HLR to VLR/SGSN for the incoming calls
barring program.
## 7.6 Information stored in the VLR/SGSN
No information is stored in the VLR/SGSN.
## 7.7 Handover
Handover will have no impact on the control procedures and the operation of
the service.
## 7.8 Cross Phase compatibility
### 7.8.1 MS, MSC, VLR or HLR only support Phase 1 control of SS by the
subscriber
In response to a Barring of incoming calls interrogation request, if the MS or
any network element involved is of Phase 1, only information concerning basic
service groups for which Barring of incoming calls is active will be returned.
In Phase 1 the state active and quiescent is not used in the HLR.
In Phase 2 the HLR will support the quiescent state.
As this quiescent state is only relevant within the HLR a Phase 1 MSC/VLR and
a Phase 1 MS can support the Phase 2 interrogation even if the service becomes
quiescent, i.e. there is no functional cross Phase compatibility problem.
Note that the interrogation result received by the user will be in Phase 1 and
2 a list of basic services. The only difference is that in Phase 1 it contains
the active basic services irrespective of whether it is operative or
quiescent.
### 7.8.2 HLR only supports Phase 1 updating of subscriber information
In Phase 1 the VLR stores the activation status also for barring of incoming
calls.
In Phase 2 no information is stored in the VLR in case of barring of incoming
calls. The VLR may receive subscription information for barring of incoming
calls from a Phase 1 HLR. In this case the VLR shall ignore this information.
#