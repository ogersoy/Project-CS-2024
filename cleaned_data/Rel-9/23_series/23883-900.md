# Foreword
This Technical Report has been produced by the 3^rd^ Generation Partnership
Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The following aspects of IMS Centralized Services (ICS), though studied in
Release 8 (and to some extent documented in TR 23.892 [2]), required further
study and are herein documented:
\- ICS supplementary service data management (e.g. Supplementary Services data
synchronization).
\- Management of Telephony Application Server (TAS) user configuration for an
ICS UE when PS access cannot be used.
Consideration shall be given to attaining a consistent user experience, and
managing and enforcing operator policies as well as user preferences.
Heterogeneous access technologies over which the IMS service is provided shall
also be taken into account.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or nonâ€‘specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the > case of a reference to a 3GPP document (including a GSM document), > a non-specific reference implicitly refers to the latest version > of that document _in the same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TR 23.892: \"IP Multimedia Subsystem (IMS) centralized services\".
[3] 3GPP TS 24.173: \"IMS Multimedia telephony service and supplementary
services; Stage 3\".
[4] 3GPP TS 33.222: \"Generic Authentication Architecture (GAA)\".
[5] 3GPP TS 23.292: \"IP Multimedia System (IMS) centralized services; Stage
2\".
[6] 3GPP TS 24.008: \"Mobile radio interface Layer 3 specification; Core
network protocols; Stage 3\".
[7] 3GPP TS 23.002: \"Network architecture\".
[8] 3GPP TS 24.216: \"Communication Continuity Management Object (MO)\".
[9] 3GPP TS 24.010: \" Mobile radio interface layer 3 Supplementary services
specification; General aspects\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] apply.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
TAS Telephony Application Server
# 4 Architectural Requirements and Assumptions
Editor\'s note: This section describes the issues and related architectural
requirements which need to be studied in this document.
## 4.1 Basic Assumptions
## 4.2 Architectural Requirements
\- Home IMS network services shall be provided when using CS access for speech
media transport in home and roaming networks; however a reduced service
offering may be provided subject to the constraints of the access network.
\- Home IMS network services shall not be impacted when using an IP-CAN for
speech and video media transport in home and roaming networks.
\- The solution shall support call independent IMS supplementary services
management for users who are accessing the network either via the CS domain or
via an IP-CAN.
\- Subscribers shall have **consistent service behaviour upon** , subject to
the constraints of the device and access network.
# 5 Scenarios
## 5.1 Scenarios for Supplementary Services data synchronization
## 5.2 Scenarios for Management of Telephony Application Server (TAS) user
configuration
# 6 Architecture
## 6.1 General Principles and Description
This clause documents alternative architectural solutions for providing
service data synchronization for ICS.
The functionality related to IMS Centralized Services data can conceptually be
split into two parts:
\- Synchronization of supplementary services data in the network where it is
required in the CS domain and in IMS.
\- User manipulation of IMS service data from a UE when existing mechanisms
are not available.
Each part can in principle be considered independently, though there may in
fact be dependencies and/or relationships, based on the alternatives proposed
in each case. For that reason, the two parts are documented in separate sub-
clauses. Selection of an alternative for each part will require the
relationships and dependencies to be understood.
## 6.2 Architecture Reference Model
### 6.2.1 Reference architecture figure
Figure 6.2.1-1: Reference architecture
### 6.2.2 Reference points
#### 6.2.2.1 Overview
The reference points shown above are all existing reference points, and
already defined by 3GPP. For information, I1 and I2 are briefly described
below.
#### 6.2.2.2 UE -- SCC AS (I1)
The I1 reference point is used between the UE and the SCC AS for service
control signalling over CS access. It is defined in 3GPP TS 23.292 [5].
#### 6.2.2.3 MSC Server -- CSCF (I2)
The I2 reference point shall be used to route service control signalling
between the MSC Server enhanced for ICS and the home IMS. It is defined in
3GPP TS 23.292 [5].
#### 6.2.2.4 MSC Server -- TAS (I3)
The I3 reference point shall be used between the MSC Server enhanced for ICS
and the TAS to interwork CS signalling (e.g. as described in TS 24.010 [9] for
systems based on TS 24.008 [6]) and communication service setting procedures
(as defined in TS 24.173 [3]).
## 6.3 ICS Supplementary Services Data Management
### 6.3.1 Introduction
ICS presents situations where an ICS subscriber may use either the CS or IMS
domain, for instance, to set a call forwarding value. A non-ICS UE that cannot
use the Ut interface will use TS 24.008 [6] messaging to request supplementary
service data modifications. If the MSC server is not enhanced for ICS, then
the MSC will normally send these requests to the HSS using MAP signalling.
This section proposes mechanisms for ensuring that the supplementary service
data modifications are processed at the TAS. Note that for ICS all services
are centralized in IMS, so the call forwarding is a service provided by IMS.
This section only considers TS11 applicable supplementary services and
excludes services that do not have a corresponding service in MMTel (e.g. BOIC
and BIC-Roam).
### 6.3.2 Alternative 1: Supplementary Service data synchronization where the
TAS performs Protocol Conversion between Ut and Sh
This alternative requires that the CS domain and IMS network share service
information. It assumes that the HSS applies TS 24.173 [3] in the CS domain by
first processing Call Independent Supplementary Service (CISS) requests sent
over the D interface and then synchronizing this data towards the TAS.
This alternative proposes to extend the Sh interface to allow the TAS to
request CS information.
Currently, the Sh interface supports transferring service data to the TAS, but
it does not support transferring CS service data to TAS. The TAS cannot update
the CS service data in HLR/HSS either. This solution extends the Sh interface
to support this functionality.
In order to allow the TAS to modify the CS service data stored in HSS/HLR, the
TAS must perform protocol conversion between the format used by the UE over
the Ut reference point and the binary description of service data as described
in TS 29.364 [xx] used on Sh. The binary description supports only a subset of
MMTEL services, which corresponds to the PSTN/ISDN and CS supplementary
service set. In order to avoid that the TAS is required to manipulate the
supplementary service data, an UE using Ut is restricted to those MMTel
services which are supported by the binary description.
NOTE 1: The XML format used by the UE needs to be defined.
Figure 6.3.2-1: Architecture
The following extensions for the Sh interface are necessary:
Add a new Data Ref. value to identify CS service data for use in
\- Sh-Pull; to allow the TAS to read CS service data from the HSS/HLR
\- Sh-Update; to allow the TAS to modify CS service data in the HSS/HLR
\- Sh-Subs-Notif; to allow the TAS to subscribe to notifications about
modified CS service data in the HSS/HLR
\- Sh-Notif; to allow the HSS to notify the subscribed TAS about modified CS
service data in the HSS/HLR.
Once the Sh interface is modified, the HSS/HLR can use the information flow
shown in Figure 6.3.2-2 to change the CS service data stored in TAS
Figure 6.3.2-2: Using extended Sh interface for TAS to read and subscribe CS
supplementary data change in HSS/HLR
The TAS can also use the modified Sh interface to modify the CS service data
stored in HSS/HLR as shown in Figure 6.3.2-3.
Figure 6.3.2-3: Using extended Sh interface to transfer CS supplementary data
from TAS to HSS/HLR
NOTE 2: From standardisation perspective the HSS/HLR is considered as one
single entity, whereas in current network deployments, the HSS and the HLR
might be separated. Interactions between the HLR and the HSS are outside the
scope of standardisation.
NOTE 3: Keeping data stored in the CS domain for an ICS user may affect the
principles for service execution in IMS. Considerations need to be made to
avoid interactions between keeping this data in the CS domain for data
synchronization purposes and keeping this data in the CS domain to aid service
execution in IMS (e.g. when implementing mechanisms to deliver terminating
services in IMS when the call has been delivered using CS call control).
NOTE 4: Considerations need to be made for SIM-swap. If an ICS user normally
uses an ICS UE to make supplementary service settings in IMS using the Ut
reference point, the MMTel data model will be used. However, if the ICS user
inserts his/her SIM into a non-ICS UE, a lighter MMTel data model will be
used. This may cause a rejection of supplementary services requests at the TAS
due to a clash between the stored data (model) and the requested data (model).
It is assumed that Stage 3 will identify where these clashes exist (if any)
and provide the appropriate error response to the user.
### 6.3.3 Alternative 2: Interworking supplementary service data requests
between MAP and XCAP
This alternative does not require that the Supplementary Service Data is
stored in the CS domain. This alternative proposes a message diversion scheme
whereby the HSS is pre-configured with the address of an interworking function
(IWF) that interworks MAP Call Independent Supplementary Services (CISS)
requests into XCAP. For an ICS user, all CISS requests are forwarded to the
IWF for further processing.
When the HLR receives the CISS request from the MSC and determines that re-
routing is required, the SCCP portion of the re-routed message is set with the
original Calling Party Address (CgPA) that was sent from the MSC and the
Called Party Address (CdPA) set to the IWF address. The IWF interworks the MAP
request to an XCAP request and sends the request to the TAS to action the
request. The TAS processes the request and sends the appropriate success/error
response towards the IWF. The IWF interworks the response back to MAP and this
response is sent directly to the MSC (not via the HSS).
NOTE 1: In this alternative, the CgPA of the response received message is not
the HLR-address, but instead is the IWF-address. It is assumed that the MSC is
able to accept the response message (TCAP END) and use TCAP/MAP level
mechanisms for correlation of the outgoing request with the incoming response.
NOTE 2: This alternative requires the definition of a new reference points
between the IWF and the TAS (I6) which is implemented as a MAP interface and
the HSS and the IWF (I4) which is implemented as an XCAP interface. This is
shown in Figure 6.3.3-1.
The benefits of this option are:
\- Supplementary Service Data does not need to be replicated at the HLR and
the TAS for ICS Users and synchronized both ways between CS and IMS.
\- Avoid the \"out of scope of standardization\" issue of having to
synchronize first between the HLR in the CS domain and the HSS in IMS when
operators have separate entities for both these databases.
\- Avoids the issue of clashes with ICS mechanisms that use CS data
configuration to deliver services within IMS because the call was delivered to
the user using CS call control.
\- Work that occurred in Stage 3 for interworking DTAP Facility requests into
XCAP requests at the MSC-server in Release 8 could be used as a basis of the
work for interworking MAP Call Independent Supplementary Service requests to
XCAP requests.
\- A similar mechanism for re-routing of MAP SRI-SM requests from the SMS-GMSC
to the IP-SM-GW was discusses during the SMS over IP work in Release 7.
\- The IWF is a logical function, so it could exist as a standalone node, or
it could be a blade within a server bladed HSS architecture, or it could be
part of an HSS or it could be part of the TAS.
Editors Note: Further study is required for the co-existence of this
alternative with requirements for keeping a default profile in the HSS and MSC
server for cases of fallback to the CS domain for service execution and
service settings management.
Figure 6.3.3-1 illustrates the use of the IWF.
Figure 6.3.3-1: Use of a MAP to XCAP interworking function for SS Data
Management
## 6.4 Management of Telephony Application Server (TAS) user configuration
### 6.4.1 General
This section evaluates the alternative solutions for Managing Communication
Services related information when Ut reference point over IP-CAN is not
available for the UE (e.g. UE is out of GPRS coverage).
When the solutions described in this section are used to manage the Multimedia
Telephony service settings information, the service settings data model should
not be affected; that is, the UE should be able to manage exactly the same
settings information as with Ut reference point as described in TS 24.173 [3].
For this reason, the procedures in clause 7.6.2.9 in TS 23.292 [5] enable the
UE to use these alternative solutions only when the ICS User is allowed to
manipulate communication service settings using TS 24.173 [3] from the UE.
These solutions do not preclude the use of other mechanisms for Managing
Communication services related information, e.g. using web portals or OA&M
mechanisms; the details of these other mechanisms are out of scope of this
document.
### 6.4.2 Alternative 1: Using I1
NOTE 1: At this stage it is assumed that the I1 reference point is used for
the service control signalling and communication setting modifications
signalling between the ICS UE and the SCC AS.
NOTE 2: At this stage it is assumed that when I1 is available, procedures for
Managing Communication Services related Information can be used, if the TAS
accepts communication service settings via I5.
NOTE 3: At this stage it is assumed that a protocol definition based upon XCAP
is not used over the I1 interface for communication service settings
modifications.
The following figure provides an example flow for Managing Communication
Services related Information, when using ICS UE with I1. The I5 reference
point between the SCC AS and the AS is used to manage communication services
related information on the AS.
Editor\'s Note The I5 reference point still needs to be described in the
architecture. The architecture is FFS. The I5 reference point may be renamed.
Some initial properties of the I5 reference point are exemplified in this
clause. This clause is revisited when the architecture matures.
Figure 6.4.2-1: Managing Communication Services related Information -- using
I1
1\. ICS UE initiates management of communication services related information.
The ICS UE encodes in one or more CS protocol (e.g. USSD for systems based on
TS 24.008 [6]) messages sufficient information for the SCC AS to use
capabilities defined for the Ut reference point as defined in TS 24.173 [3]
for Managing Communication services related information and sends it to the
SCC AS.
2\. Standard VMSC procedure to communicate the CS protocol (e.g. USSD for
systems based on TS 24.008 [6]) message to the Home network.
3\. Standard HSS procedure to communicate the CS protocol (e.g. USSD for
systems based on TS 24.008 [6]) message to the associated service node
4\. The SCC AS terminates the CS protocol (e.g. USSD for systems based on TS
24.008 [6]) messages. The SCC AS translates the CS protocol (e.g. USSD for
systems based on TS 24.008 [6]) message contents for the purpose of Managing
Communication services related information to corresponding capabilities of
the Ut reference point as defined in TS 24.173 [3] for Managing Communication
services related information.
5\. The AS generates a response to the SCC AS.
6\. This step consists of a standard service node procedure to communicate the
CS protocol (e.g. USSD for systems based on TS 24.008 [6]) message to the HSS,
a standard HSS procedure to communicate the CS protocol (e.g. USSD for systems
based on TS 24.008 [6]) message to the VMSC, and a standard VMSC procedure to
communicate the CS protocol (e.g. USSD for systems based on TS 24.008 [6])
message to the ICS UE.
Editor\'s Note: It is FFS whether the translation function in SCC AS is
generic for Managing Communication Services related information for any IMS
speech service, or whether it is limited to Multimedia Telephony Service.
Editor\'s Note: It is FFS whether low bit rate transport bearers such as USSD
are appropriate to manage large settings documents where the messaging content
has to be segmented into more than one USSD messaging component within the
USSD dialogue. The use of USSD sub-dialogues may not be appropriate for
message segmentation.
### 6.4.3 Alternative 2: Using IP-CAN
As specified in TS 24.173 [3].
In the rare cases when the user cannot access an IP-CAN, supplementary service
setting management is not possible till the user gets IP-CAN access again.
### 6.4.4 Alternative 3: Using a WAP interface via CS Data call
This chapter shows that CS data calls can be used to manage supplementary
services via a WAP interface and explains how CS data calls are routed within
the network.
NOTE 1: WAP access can also be provided via SMS and USSD service.
Figure 6.4.2-1: Using WAP via CS data
1\. The user opens a WAP application that has been configured to use the CS
data call as a bearer. The UE dials a CS data call using a dial-up number.
Home operator has typically configured the dial-up number and other CSD
related parameters to UE in advance (e.g. OMA DM). The MSC (with help of MGW
in case of MSC server) allocates an inter-working function to the call path.
The inter-working function converts the channel coding used on the radio
access to the data transport protocols used in the PSTN/ISDN.
2\. The MSC+interworking function routes the CS data call based on the
destination number, which in this case points to the network access server
(NAS). The CS data call terminates to the NAS. The NAS terminates the data
transport protocol (e.g. V.110, V.120, V.34, etc). The NAS interprets the WAP
(or HTTP, etc) request and routes the request to the IP network based on the
destination address in Request-URI.
NOTE 2: The NAS can either be in the home network or in the roaming network.
In case the NAS is located in the home network inter operator CS Data calls
need to be supported.
3\. From now on general IP routing mechanisms are used to route the packet to
the final destination (e.g. WAP gateway as shown in figure above).
4\. The WAP GW interacts with the TAS to modify the supplementary service
settings of the user.
### 6.4.5 Alternative 4: Using Ut reference point via CS Data call
This chapter shows how a Ut reference point using CS data calls is used to
manage supplementary services and explains how CS data calls are routed within
the network.
Figure 6.4.3-1: Using a Protected CS data call
1\. The user opens a UI of the UE to manage service settings that has been
configured to use the CS data call as a bearer. The UE dials a CS data call
using a dial-up number. Home operator has typically configured the dial-up
number and other CSD related parameters to the UE in advance (e.g. OMA DM).
The operator may use the same dial-up number as with e.g. WAP access, or this
may be a specific dial-up number for service settings over Ut. UE creates an
XCAP/HTTP request via TCP/IP, the Request-URI is set to refer to the MMTel
settings document located in TAS, as with the Ut over GPRS scenario.
2\. The CS data call is routed via MSC, inter-working function, NAS, to the
TAS in the IMS.
NOTE: The NAS can either be in the home network or in the roaming network. In
case the NAS is located in the home network inter operator CS Data calls need
to be supported.
3\. TS 33.222 [4] defines an Authentication Proxy (AP) that may be used to
authenticate the UE in the IMS when the UE accesses to the TAS via Ut
reference point over IP-CAN. In the very same manner this AP may also be able
to authenticate the UE when the UE uses CS data calls as bearer.
4\. The TAS receives the XCAP/HTTP request to manage the user settings over
Ut, the TAS does not see any difference whether the UE uses IP-CAN or a CS
data call as bearer.
## 6.5 T-ADS
### 6.5.1 General
T-ADS execution shall take into account user preferences wherever possible.
It is assumed that the user preferences are quite static. The reasons for
changing the preferences could be that the user switches to a new UE, with
different capabilities, or that the user (more permanently) moves to another
area with different network capabilities.
User preferences include:
\- Preferred access for terminating sessions.
The following sections details alternative solutions on how to manage the user
preferences.
### 6.5.2 Alternative 1 -- User Preferences conveyed within IMS registration
In order to avoid introducing new interfaces or mechanisms the existing
registration procedures can be reused.
Whenever an UE acquires IP connectivity via an IP-CAN, the UE will register in
the IMS and a 3rd party registration will be made towards the SCC AS. The user
preference is conveyed to the SCC AS as a part of the 3rd party register.
User preferences can be stored in the UE and sent to the SCC AS at
registration time. If the User preferences are changed, the UE would initiate
a re-registration in order to convey the new data to the SCC AS. If a more
complex data model would be needed, due to more user preferences than
preferred access, then a publish mechanism could theoretically be an
alternative.
NOTE: In this alternative, if the UE is not registered to IMS through PS
domain (e.g. UE in CS attached through a MSC server or MSC server enhanced for
ICS), the UE cannot provide user preferences to the SCC AS.
### 6.5.3 Alternative 2 -- User Preferences over Ut
If more complex user preferences shall be communicated to the SCC AS, an Ut
interface may be used; in this case the XML model for such user preferences
must be specified. This alternative may be more suitable if the user
preferences are set on a per user basis.
### 6.5.4 Alternative 3 -- User Preferences over OMA DM
TS 24.216 [8] defines an OMA DM management object for operator policy in
Session Continuity. The policy is carried from the management server to the
UE. A simple solution to carry user preferences from the UE to the management
server would be to extend the existing management object to cover also the
user preferences. In the OMA DM management object each attribute can define
whether the attribute can be read, written or both by the management server.
Alternatively, a separate set of user modifiable attributes can be defined in
the management object. The attributes which are defined to be readable by the
server can be modified by the UE (end user). UE then either initiates the
management session and notifies the management server that the attribute has
been modified, or the server is also able to inquire the changed management
object from the UE e.g. periodically. The benefit of this alternative is that
no new protocol needs to be introduced for user preferences.
### 6.5.5 Alternative 4 -- User Preferences by UE assisted T-ADS
In case UE assisted T-ADS is supported then the enforcement of user
preferences can be done locally in the UE. In this case there is no need for
the UE to provide any user preferences to the SCC AS in order to determine the
preferred access for terminating sessions.
### 6.5.6 Conclusion
For the decision of which 3GPP or non-3GPP access to use to terminate a
session, user preferences are enforced in the SCC AS and Alternative 1 or 2
can be used as the baseline for the specification of the mechanism for
conveying preferred access for T-ADS.
It is proposed that a solution inline with storing the preferences in the SCC
AS is developed based on Alternative 1 or 2 (dependant to stage-3 decision)
and can be used in combination with Alternative 4, when supported in the UE.
Alternative 4, if supported by the UE, can be used to enforce the user
preferences locally in the UE e.g. in case ISR is active. Alternative 4 is
already specified.
# 7 Conclusion
## 7.1 Conclusion on Management of Telephony Application Server (TAS) user
configuration
Different solutions for management of the user configuration in the TAS have
been studied in clause 6.4. It is concluded to rely on the availability of IP-
CAN to perform supplementary service configuration according to TS 24.173 [3]
and not to standardise any new method for management of supplementary service
data in the TAS.
## 7.2 Conclusion on Supplementary Service Data Synchronisation
Supplementary Service Data Synchronisation has been studied in clause 6.3. It
is concluded not to mandate a specific architecture but instead it is
recommended to add general requirements to TS 23.292 [5] as follows:
\- It shall be possible for a user subscription to provision only a subset of
MMTel services, e.g. corresponding to the PSTN/ISDN and CS supplementary
service set.
\- It shall be possible for the network to provide to the UE the subset of
MMTel services according to the user subscription.
It\'s a stage 3 issue to fulfil the above requirements.
#