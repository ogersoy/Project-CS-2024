# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# Introduction
The present document is part 11 of a multi-part TS covering the 3^rd^
Generation Partnership Project: Technical Specification Group Core Network;
Open Service Access (OSA); Application Programming Interface (API), as
identified below. The **API specification** (3GPP TS 29.198) is structured in
the following Parts:
> Part 1: \"Overview\";
>
> Part 2: \"Common Data Definitions\";
>
> Part 3: \"Framework\";
>
> Part 4: \"Call Control\";
>
> Sub-part 1: \"Call Control Common Definitions\";
>
> Sub-part 2: \"Generic Call Control SCF\";
>
> Sub-part 3: \"Multi-Party Call Control SCF\";
>
> Sub-part 4: \"Multi-Media Call Control SCF\";
>
> Sub-part 5: \"Conference Call Control SCF\";
>
> Part 5: \"User Interaction SCF\";
>
> Part 6: \"Mobility SCF\";
>
> Part 7: \"Terminal Capabilities SCF\";
>
> Part 8: \"Data Session Control SCF\";
>
> Part 9: \"Generic Messaging SCF\"; (not part of 3GPP Release 8)
>
> Part 10: \"Connectivity Manager SCF\"; (new in Release 8)
>
> **Part 11: \"Account Management SCF\";**
>
> Part 12: \"Charging SCF\".
>
> Part 13: \"Policy Management SCF\";
>
> Part 14: \"Presence and Availability Management SCF\";
>
> Part 15: \"Multi Media Messaging SCF\";
>
> Part 16: \"Service Broker SCF\".
The **Mapping specification of the OSA APIs and network protocols** (3GPP TR
29.998) is also structured as above. A mapping to network protocols is however
not applicable for all Parts, but the numbering of Parts is kept.\ Also in
case a Part is not supported in a Release, the numbering of the parts is
maintained.
Table: Overview of the OSA APIs & Protocol Mappings 29.198 & 29.998-family
+-------+-------+-------+-------+-------+-------+-------+-------+ | OSA | OSA | | | | | | | | API | API | | | | | | | | spec | Ma | | | | | | | | ifica | pping | | | | | | | | tions | - | | | | | | | | 29. | 29. | | | | | | | | 198-f | 998-f | | | | | | | | amily | amily | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | Ove | 29.9 | Ove | | | | | | 98-01 | rview | 98-01 | rview | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | C | * | _Not | | | | | | 98-02 | ommon | 29.99 | A | | | | | | | Data | 8-02_ | pplic | | | | | | | D | | able _| | | | | | | efini | | | | | | | | | tions | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | Fram | * |_ Not | | | | | | 98-03 | ework | 29.99 | A | | | | | | | | 8-03 _| pplic | | | | | | | | | able_ | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | Call | 2 | 2 | 2 | 2 | 2 | 2 | Ge | | Co | 9.198 | 9.198 | 9.198 | 9.198 | 9.198 | 9.998 | neric | | ntrol | -04-1 | -04-2 | -04-3 | -04-4 | -04-5 | -04-1 | Call | | (CC) | | | | M | Conf | | Co | | SCF | C | Ge | M | ulti- | CC | | ntrol | | | ommon | neric | ulti- | media | SCF | | -- | | | CC | CC | Party | CC | | | CAP | | | data | SCF | CC | SCF | | | ma | | | d | | SCF | | | | pping | | | efini | | | | | | | | | tions | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | | | | | | | _29 |_ Ge | | | | | | | | .998- | neric | | | | | | | | 04-2 _| Call | | | | | | | | | Co | | | | | | | | | ntrol | | | | | | | | | -- | | | | | | | | | INAP | | | | | | | | | map | | | | | | | | | ping_ | +-------+-------+-------+-------+-------+-------+-------+-------+ | | | | | | | _29 |_ Ge | | | | | | | | .998- | neric | | | | | | | | 04-3 _| Call | | | | | | | | | Co | | | | | | | | | ntrol | | | | | | | | | -- | | | | | | | | | M | | | | | | | | | egaco | | | | | | | | | map | | | | | | | | | ping_ | +-------+-------+-------+-------+-------+-------+-------+-------+ | | | | | | | 2 | Multi | | | | | | | | 9.998 | party | | | | | | | | -04-4 | Call | | | | | | | | | Co | | | | | | | | | ntrol | | | | | | | | | -- | | | | | | | | | ISC | | | | | | | | | ma | | | | | | | | | pping | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | User | 2 | User | | | | | | 98-05 | I | 9.998 | I | | | | | | | ntera | -05-1 | ntera | | | | | | | ction | | ction | | | | | | | SCF | | -- | | | | | | | | | CAP | | | | | | | | | ma | | | | | | | | | pping | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | | | _29 |_ User | | | | | | | | .998- | I | | | | | | | | 05-2 _| ntera | | | | | | | | | ction | | | | | | | | | -- | | | | | | | | | INAP | | | | | | | | | map | | | | | | | | | ping_ | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | | | _29 |_ User | | | | | | | | .998- | I | | | | | | | | 05-3 _| ntera | | | | | | | | | ction | | | | | | | | | -- | | | | | | | | | M | | | | | | | | | egaco | | | | | | | | | map | | | | | | | | | ping_ | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | | | 2 | User | | | | | | | | 9.998 | I | | | | | | | | -05-4 | ntera | | | | | | | | | ction | | | | | | | | | -- | | | | | | | | | SMS | | | | | | | | | ma | | | | | | | | | pping | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | Mob | 2 | User | | | | | | 98-06 | ility | 9.998 | S | | | | | | | SCF | -06-1 | tatus | | | | | | | | | and | | | | | | | | | User | | | | | | | | | Loc | | | | | | | | | ation | | | | | | | | | -- | | | | | | | | | MAP | | | | | | | | | ma | | | | | | | | | pping | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | | | 2 | User | | | | | | | | 9.998 | S | | | | | | | | -06-2 | tatus | | | | | | | | | and | | | | | | | | | User | | | | | | | | | Loc | | | | | | | | | ation | | | | | | | | | -- | | | | | | | | | SIP | | | | | | | | | ma | | | | | | | | | pping | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | Ter | * | _Not | | | | | | 98-07 | minal | 29.99 | A | | | | | | | Ca | 8-07_ | pplic | | | | | | | pabil | | able _| | | | | | | ities | | | | | | | | | SCF | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | Data | 29.9 | Data | | | | | | 98-08 | Se | 98-08 | Se | | | | | | | ssion | | ssion | | | | | | | Co | | Co | | | | | | | ntrol | | ntrol | | | | | | | SCF | | -- | | | | | | | | | CAP | | | | | | | | | ma | | | | | | | | | pping | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | * |_ Ge | * | _Not | | | | | | 29.19 | neric | 29.99 | A | | | | | | 8-09_ | Mess | 8-09 _| pplic | | | | | | | aging | | able_ | | | | | | | SCF _| | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | * |_ Co | * | _Not | | | | | | 29.19 | nnect | 29.99 | A | | | | | | 8-10_ | ivity | 8-10 _| pplic | | | | | | | Ma | | able_ | | | | | | | nager | | | | | | | | | SCF _| | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ |__2 |__Ac | * |_ Not | | | | | | 9.198 | count | 29.99 | A | | | | | | -11**| Manag | 8-11 _| pplic | | | | | | | ement | | able_ | | | | | | | SCF** | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | Cha | * | _Not | | | | | | 98-12 | rging | 29.99 | A | | | | | | | SCF | 8-12_ | pplic | | | | | | | | | able _| | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | P | * |_ Not | | | | | | 98-13 | olicy | 29.99 | A | | | | | | | Manag | 8-13 _| pplic | | | | | | | ement | | able_ | | | | | | | SCF | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | Pre | * | _Not | | | | | | 98-14 | sence | 29.99 | A | | | | | | | & | 8-14_ | pplic | | | | | | | Av | | able _| | | | | | | ailab | | | | | | | | | ility | | | | | | | | | Manag | | | | | | | | | ement | | | | | | | | | SCF | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | M | * |_ Not | | | | | | 98-15 | ulti- | 29.99 | A | | | | | | | media | 8-15 _| pplic | | | | | | | Mess | | able_ | | | | | | | aging | | | | | | | | | SCF | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+ | 29.1 | Se | * | _Not | | | | | | 98-16 | rvice | 29.99 | A | | | | | | | B | 8-16_ | pplic | | | | | | | roker | | able* | | | | | | | SCF | | | | | | | +-------+-------+-------+-------+-------+-------+-------+-------+
# 1 Scope
The present document is Part 11 of the Stage 3 specification for an
Application Programming Interface (API) for Open Service Access (OSA).
The OSA specifications define an architecture that enables application
developers to make use of network functionality through an open standardised
interface, i.e. the OSA APIs. The concepts and the functional architecture for
the OSA are contained in 3GPP TS 23.198 [3]. The requirements for OSA are
contained in 3GPP TS 22.127 [2].
The present document specifies the Account Management Service Capability
Feature (SCF) aspects of the interface. All aspects of the Account Management
SCF are defined here, these being:
  * Sequence Diagrams
  * Class Diagrams
  * Interface specification plus detailed method descriptions
  * State Transition diagrams
  * Data definitions
  * IDL Description of the interfaces
  * WSDL Description of the interfaces
The process by which this task is accomplished is through the use of object
modelling techniques described by the Unified Modelling Language (UML).
This specification has been defined jointly between 3GPP TSG CT WG5, ETSI
TISPAN and the Parlay Group, in co-operation with a number of JAIN™ Community
member companies.
Maintenance of up to 3GPP Rel-8 and new OSA Stage 1, 2 and 3 work beyond Rel-9
was moved to OMA in June 2008.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, edition number, version number, etc.) or non‑specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document _in the same Release as the present document_.
[1] 3GPP TS 29.198-1 \"Open Service Access; Application Programming Interface;
Part 1: Overview\".
[2] 3GPP TS 22.127: \"Service Requirement for the Open Services Access (OSA);
Stage 1\".
[3] 3GPP TS 23.198: \"Open Service Access (OSA); Stage 2\".
[4] ISO 4217: \"Codes for the representation of currencies and funds\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TS 29.198-1 [1] apply.
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TS
29.198-1 [1] apply.
# Account Management SCF
The following clauses describe each aspect of the Account Management Service
Capability Feature (SCF).
The order is as follows:
  * The Sequence diagrams give the reader a practical idea of how each of the SCFs is implemented.
  * The Class relationships clause shows how each of the interfaces applicable to the SCF, relate to one another
  * The Interface specification clause describes in detail each of the interfaces shown within the Class diagram part.
  * The State Transition Diagrams (STD) show the progression of internal processes either in the application, or Gateway.
  * The Data definitions section shows a detailed expansion of each of the data types associated with the methods within the classes. Note that some data types are used in other methods and classes and are therefore defined within the Common Data types part of this specification.
## 4.1 General requirements on support of methods
An implementation of this API which supports or implements a method described
in the present document, shall support or implement the functionality
described for that method, for at least one valid set of values for the
parameters of that method.
Where a method is not supported by an implementation of a Service interface,
the exception P_METHOD_NOT_SUPPORTED shall be returned to any call of that
method.
Where a method is not supported by an implementation of an Application
interface, a call to that method shall be possible, and no exception shall be
returned.
  1. Sequence Diagrams =================
    1. Standard Voucher Handling \-------------------------
{width="6.465277777777778in" height="8.535416666666666in"}
1: This message is used to get a voucher for an amount.
2: This message used to return the amount requested.
3: This message is used to update the balance of the account.
4: This message is used to return the confirmation of the update.
5: This message is used to remove the voucher.
6: This message is used to confirm that the voucher is removed.
## Standard Transaction History Retrieval
{width="6.688888888888889in" height="3.540277777777778in"}
1: This message is used by the application to retrieve a transaction history
for a certain subscriber\'s account.
2: This method passes the result of the transaction history retrieval request
for a specific user to its callback object.
## Standard Query Handling
{width="6.574305555555555in" height="7.8625in"}
1: This message is used to query the balance of the account of one or several
users.
2: This message passes the result of the balance query for one or several
users to its callback object.
3: This scenario shows the case where at least one error in the parameters of
the message is detected by the IpAccountManager object. An exception will be
thrown.
4: This scenario shows the case where a network error occurs.
5: This message passes the error of the balance query. No exception is thrown.
## Standard Notification handling
{width="6.694444444444445in" height="6.846527777777778in"}
1: This message is used by the application to request notifications from the
IpAccountManager service on certain criteria for one or several users.
2: This message is used by the IpAccountManager service to report a charging
event that meets the criteria set in the createNotification message.
3: The application can request the current criteria set in the
IpAccountManager service by invoking the getNotification method.
4: This message is used by the application to change the criteria initially
created by createNotification, and previously obtained by getNotification.
5: This message is used by the IpAccountManager service to report a charging
event that meets the new criteria.
6: This method is used by the application to disable the charging
notifications.
## Network Controlled Notifications
The following sequence diagram shows how an application can receive
notifications that have not been created by the application, but are
provisioned from within the network.
{width="6.701388888888889in" height="5.936111111111111in"}
1: The application is started. The application creates a new
IpAppAccountManager to handle callbacks.
2: The enableNotifications method is invoked on the IpAccountManager interface
to indicate that the application is ready to receive notifications that are
created in the network. For illustrative purposes we assume notifications of
type \"B\" are created in the network.
3: When a network created trigger occurs the application is notified on the
callback interface.
4: The event is forwarded to the application.
5: When a network created trigger occurs the application is notified on the
callback interface.
6: The event is forwarded to the application.
7: When the application does not want to receive notifications created in the
network anymore, it invokes disableNotifications on the
IpMultiPartyCallConrolManager interface. From now on the gateway will not send
any notifications to the application that are created in the network. The
application will still receive notifications that it has created himself until
the application removes them.
# Class Diagrams
{width="3.7618055555555556in" height="9.92013888888889in"}
Figure: Application Interfaces
{width="4.96875in" height="6.613888888888889in"}
Figure: Service Interfaces
  1. The Service Interface Specifications ====================================
    1. Interface Specification Format \------------------------------
This clause defines the interfaces, methods and parameters that form a part of
the API specification. The Unified Modelling Language (UML) is used to specify
the interface classes. The general format of an interface specification is
described below.
### Interface Class
This shows a UML interface class description of the methods supported by that
interface, and the relevant parameters and types. The Service and Framework
interfaces for enterprise-based client applications are denoted by classes
with name Ip\. The callback interfaces to the applications are denoted
by classes with name IpApp\. For the interfaces between a Service and
the Framework, the Service interfaces are typically denoted by classes with
name IpSvc\, while the Framework interfaces are denoted by classes with
name IpFw\.
### Method descriptions
Each method (API method "call") is described. Both synchronous and
asynchronous methods are used in the API. Asynchronous methods are identified
by a \'Req\' suffix for a method request, and, if applicable, are served by
asynchronous methods identified by either a \'Res\' or \'Err\' suffix for
method results and errors, respectively. To handle responses and reports, the
application or service developer must implement the relevant IpApp\ or
IpSvc\ interfaces to provide the callback mechanism.
### Parameter descriptions
Each method parameter and its possible values are described. Parameters
described as \'in\' represent those that must have a value when the method is
called. Those described as \'out\' are those that contain the return result of
the method when the method returns.
### State Model
If relevant, a state model is shown to illustrate the states of the objects
that implement the described interface.
  1. Base Interface \--------------
    1. ### Interface Class IpInterface
All application, framework and service interfaces inherit from the following
interface. This API Base Interface does not provide any additional methods.
+-------------------+ | \> | | | | IpInterface | +-------------------+ | | +-------------------+ | | +-------------------+
  1. Service Interfaces \------------------
    1. ### Overview
The Service Interfaces provide the interfaces into the capabilities of the
underlying network - such as call control, user interaction, messaging,
mobility and connectivity management.
The interfaces that are implemented by the services are denoted as \'Service
Interface\'. The corresponding interfaces that must be implemented by the
application (e.g. for API callbacks) are denoted as \'Application Interface\'.
  1. Generic Service Interface \-------------------------
    1. ### Interface Class IpService
Inherits from: IpInterface
All service interfaces inherit from the following interface.
+----------------------------------------------------------------------+ | \> | | | | IpService | +----------------------------------------------------------------------+ | | +----------------------------------------------------------------------+ | setCallback (appInterface : in IpInterfaceRef) : void | | | | setCallbackWithSessionID (appInterface : in IpInterfaceRef, | | sessionID : in TpSessionID) : void | +----------------------------------------------------------------------+
#### Method setCallback()
This method specifies the reference address of the callback interface that a
service uses to invoke methods on the application. It is not allowed to invoke
this method on an interface that uses SessionIDs. Multiple invocations of this
method on an interface shall result in multiple callback references being
specified. The SCS shall use the most recent callback interface provided by
the application using this method. In the event that a callback reference
fails or is no longer available, the next most recent callback reference
available shall be used.
Parameters
appInterface : in IpInterfaceRef
Specifies a reference to the application interface, which is used for
callbacks.
Raises
TpCommonExceptions, P_INVALID_INTERFACE_TYPE
#### Method setCallbackWithSessionID()
This method specifies the reference address of the application\'s callback
interface that a service uses for interactions associated with a specific
session ID: e.g. a specific call, or call leg. It is not allowed to invoke
this method on an interface that does not use SessionIDs. Multiple invocations
of this method on an interface shall result in multiple callback references
being specified. The SCS shall use the most recent callback interface provided
by the application using this method. In the event that a callback reference
fails or is no longer available, the next most recent callback reference
available shall be used.
Parameters
appInterface : in IpInterfaceRef
Specifies a reference to the application interface, which is used for
callbacks.
sessionID : in TpSessionID
Specifies the session for which the service can invoke the application\'s
callback interface.
Raises
TpCommonExceptions, P_INVALID_SESSION_ID, P_INVALID_INTERFACE_TYPE
  1. Account Management Interface Classes ====================================
    1. Interface Class IpAccountManager \--------------------------------
Inherits from: IpService.
The account manager interface provides methods for managing accounts.
Applications can use this interface to enable or disable charging-related
event notifications and to manage account balances. Vouchers allow indirect
references to amounts that can be applied to the account. This interface shall
be implemented by an Account Management SCF. The queryBalanceReq() method, or
the retrieveTransactionHistoryReq() method, or both the createNotification()
and destroyNotification methods, or both the enableNotifications and
disableNotifications methods shall be implemented as a minimum requirement.
+----------------------------------------------------------------------+ | \> | | | | IpAccountManager | +----------------------------------------------------------------------+ | | +----------------------------------------------------------------------+ | createNotification (appAccountManager : in IpAppAccountManagerRef, | | chargingEventCriteria : in TpChargingEventCriteria) : TpAssignmentID | | | | destroyNotification (assignmentId : in TpAssignmentID) : void | | | | queryBalanceReq (users : in TpAddressSet) : TpAssignmentID | | | | changeNotification (assignmentID : in TpAssignmentID, eventCriteria | | : in TpChargingEventCriteria) : void | | | | getNotification () : TpChargingEventCriteriaResultSet | | | | retrieveTransactionHistoryReq (user : in TpAddress, | | transactionInterval : in TpTimeInterval) : TpAssignmentID | | | | enableNotifications (appAccountManager : in IpAppAccountManagerRef) | | : TpAssignmentID | | | | disableNotifications () : void | | | | queryBalanceExpiryDateReq (users : in TpAddressSet) : TpAssignmentID | | | | updateBalanceReq (user : in TpAddress, debit : in TpBoolean, amount | | : in TpBalanceInfo, period : in TpInt32) : TpAssignmentID | | | | createVoucherReq (user : in TpAddress, amount : in TpBalanceInfo) : | | TpAssignmentID | | | | destroyVoucherReq (voucherId : in TpAssignmentID) : TpAssignmentID | | | | queryVoucherReq (voucherId : in TpAssignmentID) : TpAssignmentID | | | | queryUserVouchersReq (user : in TpAddress) : TpAssignmentID | +----------------------------------------------------------------------+
### Method createNotification()
This method is used by the application to enable charging event notifications
to be sent to the application.
If the same application invokes this method multiple times with exactly the
same criteria but with different callback references, then these shall be
treated as additional callback references. Each such notification request
shall share the same assignmentID. The SCS shall use the most recent callback
interface provided by the application using this method. In the event that a
callback reference fails or is no longer available, the next most recent
callback reference available shall be used.
In case the createNotification contains no callback, at the moment the
application needs to be informed the gateway will use as callback the callback
that has been registered by setCallback().
Returns assignmentId : Specifies the ID assigned by the account management
object for this newly enabled event notification.
Parameters
appAccountManager : in IpAppAccountManagerRef
If this parameter is set (i.e. not NULL) it specifies a reference to the
application interface, which is used for callbacks. If set to NULL, the
application interface defaults to the interface specified via the
setCallback() method.
chargingEventCriteria : in TpChargingEventCriteria
Specifies the event specific criteria used by the application to define the
charging event required. Individual addresses or address ranges may be
specified for subscriber accounts. Example of events are \"charging\" and
\"recharging\".
Returns
TpAssignmentID
Raises
TpCommonExceptions, P_INVALID_ADDRESS, P_INVALID_CRITERIA,
P_INVALID_EVENT_TYPE, P_UNKNOWN_SUBSCRIBER
### Method destroyNotification()
This method is used by the application to disable charging notifications. This
method only applies to notifications created with createNotification().
Parameters
assignmentId : in TpAssignmentID
Specifies the assignment ID that was given by the account management object
when the application enabled the charging notification.
Raises
TpCommonExceptions, P_INVALID_ASSIGNMENT_ID
### Method queryBalanceReq()
This method is used by the application to query the balance of an account for
one or several users. A queryBalanceRes() will be sent for all valid users,
and a queryBalanceErr() will be sent for all invalid users or other errors.
Returns queryId : Specifies the ID of the balance query request.
Parameters
users : in TpAddressSet
Specifies the user(s) for which the balance is queried.
Returns
TpAssignmentID
Raises
TpCommonExceptions, P_UNKNOWN_SUBSCRIBER, P_UNAUTHORIZED_APPLICATION
### Method changeNotification()
This method is used by the application to change the event criteria introduced
with createNotification. Any stored criteria associated with the specified
assignmentID will be replaced with the specified criteria.
Parameters
assignmentID : in TpAssignmentID
Specifies the ID assigned by the manager interface for the event notification.
eventCriteria : in TpChargingEventCriteria
Specifies the new set of event criteria used by the application to define the
event required. Only events that meet these criteria are reported.
Raises
TpCommonExceptions, P_INVALID_ASSIGNMENT_ID, P_INVALID_CRITERIA,
P_INVALID_EVENT_TYPE, P_UNKNOWN_SUBSCRIBER, P_INVALID_ADDRESS
### Method getNotification()
This method is used by the application to query the event criteria set with
createNotification or changeNotification.
Returns eventCriteria : Specifies the event criteria used by the application
to define the event required. Only events that meet these criteria are
reported.
Parameters
No Parameters were identified for this method
Returns
TpChargingEventCriteriaResultSet
Raises
TpCommonExceptions
### Method retrieveTransactionHistoryReq()
This asynchronous method is used by the application to retrieve a transaction
history of a subscriber\'s account. The history is a set of Detailed Records.
Returns retrievalID : Specifies the retrieval ID of the transaction history
retrieval request.
Parameters
user : in TpAddress
Specifies the subscriber for whose account the transaction history is to be
retrieved.
transactionInterval : in TpTimeInterval
Specifies the time interval for which the application history is to be
retrieved.
Returns
TpAssignmentID
Raises
TpCommonExceptions, P_UNKNOWN_SUBSCRIBER, P_UNAUTHORIZED_APPLICATION,
P_INVALID_TIME_AND_DATE_FORMAT
### Method enableNotifications()
This method is used to indicate that the application is able to receive which
are provisioned from within the network (i.e. these notifications are NOT set
using createNotification() but via, for instance, a network management
system). If notifications provisioned for this application are created or
changed, the application is unaware of this until the notification is
reported.
If the same application invokes this method multiple times with different
IpAppAccountManager references, then these shall be treated as additional
callback references. Each such notification request shall share the same
assignmentID. The SCS shall use the most recent callback interface provided by
the application using this method. In the event that a callback reference
fails or is no longer available, the next most recent callback reference
available shall be used.
When this method is used, it is still possible to use createNotification() for
service provider provisioned notifications on the same interface as long as
the criteria in the network and provided by createNotification() do not
overlap. However, it is NOT recommended to use both mechanisms on the same
service manager.
The methods changeNotification(), getNotification(), and destroyNotification()
do not apply to notifications provisioned in the network and enabled using
enableNotifications(). These only apply to notifications created using
createNotification().
Returns assignmentID: Specifies the ID assigned by the manager interface for
this operation. This ID is contained in any reportNotification() that relates
to notifications provisioned from within the network Repeated calls to
enableNotifications() return the same assignment ID.
Parameters
appAccountManager : in IpAppAccountManagerRef
If this parameter is set (i.e. not NULL) it specifies a reference to the
application interface, which is used for callbacks. If set to NULL, the
application interface defaults to the interface specified via the
setCallback() method.
Returns
TpAssignmentID
Raises
TpCommonExceptions
### Method disableNotifications()
This method is used to indicate that the application is not able to receive
notifications for which the provisioning has been done from within the
network. (i.e. these notifications that are NOT set using createNotification()
but via, for instance, a network management system). After this method is
called, no such notifications are reported anymore.
Parameters
No Parameters were identified for this method
Raises
TpCommonExceptions
### Method queryBalanceExpiryDateReq()
This method is used by the application to query the expiration date of the
account. The returned date is the date the current balance will expire. Nil is
returned if the balance does not expire. A queryBalanceExpiryDateRes() will be
sent for all valid users, and a queryBalanceExpiryDateErr() will be sent for
all invalid users or other errors.
Returns queryId: Specifies the ID of the balance expiry date query request.
Parameters
users : in TpAddressSet
Specifies the user(s) for which the balance expiry date is queried.
Returns
TpAssignmentID
Raises
TpCommonExceptions, P_UNKNOWN_SUBSCRIBER, P_UNAUTHORIZED_APPLICATION
### Method updateBalanceReq()
This method is used by the application to update the balance of the account.
Returns requestId: Specifies the ID of the update balance request.
Parameters
user : in TpAddress
Specifies the user for which the balance update will be done.
debit : in TpBoolean
Specifies that the amount will be subtracted from the balance if the debit
parameter is true, or that the amount will be added to the account if the
debit parameter is false.
amount : in TpBalanceInfo
Specifies the amount that will be added or subtracted to the user\'s account.
The charge is specified as a currency amount.
period : in TpInt32
Specifies the period at which the balance will expire. The balance is
requested to expire in a number of days indicated by the period parameter. The
operator\'s policy may overrule this parameter. If the period parameter is 0,
the operator\'s policy on the balance expiration is always in effect.
Returns
TpAssignmentID
Raises
TpCommonExceptions, P_UNKNOWN_SUBSCRIBER, P_UNAUTHORIZED_APPLICATION
### Method createVoucherReq()
This method is used by the application to create a voucher for an amount.
Returns requestId: Specifies the ID of the voucher create request.
Parameters
user : in TpAddress
Specifies the user for which the voucher create will be done.
amount : in TpBalanceInfo
Specifies the amount of the voucher. The charge is specified as a currency
amount.
Returns
TpAssignmentID
Raises
TpCommonExceptions, P_UNKNOWN_SUBSCRIBER, P_UNAUTHORIZED_APPLICATION
### Method destroyVoucherReq()
This method is used by the application to destroy a voucher for an amount.
Returns requestId: Specifies the ID of the destroy voucher request.
Parameters
voucherId : in TpAssignmentID
Specifies the voucher to be destroyed.
Returns
TpAssignmentID
Raises
TpCommonExceptions, P_UNAUTHORIZED_APPLICATION, P_INVALID_ASSIGNMENT_ID
### Method queryVoucherReq()
This method is used by the application to get the voucher information.
Returns queryId: Specifies the identifier for this request.
Parameters
voucherId : in TpAssignmentID
Specifies the voucher to be queried.
Returns
TpAssignmentID
Raises
TpCommonExceptions, P_UNAUTHORIZED_APPLICATION, P_INVALID_ASSIGNMENT_ID
### Method queryUserVouchersReq()
This method is used by the application to get the vouchers for a user.
Returns queryId: Specifies the ID for the get vouchers request.
Parameters
user : in TpAddress
Specifies the user for which the vouchers will be returned.
Returns
TpAssignmentID
Raises
TpCommonExceptions, P_UNKNOWN_SUBSCRIBER, P_UNAUTHORIZED_APPLICATION,
P_INVALID_ASSIGNMENT_ID
## Interface Class IpAppAccountManager
Inherits from: IpInterface.
The account manager application interface is implemented by the client
application developer and is used to handle charging event notifications and
query balance responses.
+----------------------------------------------------------------------+ | \> | | | | IpAppAccountManager | +----------------------------------------------------------------------+ | | +----------------------------------------------------------------------+ | reportNotification (chargingEventInfo : in TpChargingEventInfo, | | assignmentId : in TpAssignmentID) : void | | | | queryBalanceRes (queryId : in TpAssignmentID, balances : in | | TpBalanceSet) : void | | | | queryBalanceErr (queryId : in TpAssignmentID, cause : in | | TpBalanceQueryError) : void | | | | retrieveTransactionHistoryRes (retrievalID : in TpAssignmentID, | | transactionHistory : in TpTransactionHistorySet) : void | | | | retrieveTransactionHistoryErr (retrievalID : in TpAssignmentID, | | transactionHistoryError : in TpTransactionHistoryStatus) : void | | | | queryBalanceExpiryDateRes (queryId : in TpAssignmentID, dates : in | | TpBalanceExpiryDateSet) : void | | | | queryBalanceExpiryDateErr (queryId : in TpAssignmentID, cause : in | | TpBalanceQueryError) : void | | | | updateBalanceRes (requestId : in TpAssignmentID, balance : in | | TpBalance) : void | | | | updateBalanceErr (requestId : in TpAssignmentID, cause : in | | TpBalanceQueryError) : void | | | | createVoucherRes (requestId : in TpAssignmentID, voucherId : in | | TpAssignmentID) : void | | | | createVoucherErr (requestId : in TpAssignmentID, cause : in | | TpVoucherError) : void | | | | destroyVoucherRes (requestId : in TpAssignmentID, voucherId : in | | TpAssignmentID) : void | | | | destroyVoucherErr (requestId : in TpAssignmentID, voucherId : in | | TpAssignmentID, cause : in TpVoucherError) : void | | | | queryVoucherRes (queryId : in TpAssignmentID, voucher : in | | TpVoucher) : void | | | | queryVoucherErr (queryId : in TpAssignmentID, voucherId : in | | TpAssignmentID, cause : in TpVoucherError) : void | | | | queryUserVouchersRes (queryId : in TpAssignmentID, vouchers : in | | TpVoucherSet) : void | | | | queryUserVouchersErr (queryId : in TpAssignmentID, cause : in | | TpVoucherError) : void | +----------------------------------------------------------------------+
### Method reportNotification()
This method is used to notify the application of a charging event.
Parameters
chargingEventInfo : in TpChargingEventInfo
Specifies data associated with this charging event. These data include the
charging event being notified, the current value of the balance after the
notified event occurred, and the time at which the charging event occurred.
assignmentId : in TpAssignmentID
Specifies the assignment ID that was returned by the createNotification()
method. The application can use the assignment ID to associate events with
event-specific criteria and to act accordingly.
### Method queryBalanceRes()
This method indicates that the request to query the balance was successful and
it reports the requested balance of an account to the application.
Parameters
queryId : in TpAssignmentID
Specifies the ID of the balance query request.
balances : in TpBalanceSet
Specifies the balance for one or more user accounts.
### Method queryBalanceErr()
This method indicates that the request to query the balance failed and it
reports the cause of failure to the application.
Parameters
queryId : in TpAssignmentID
Specifies the ID of the balance query request.
cause : in TpBalanceQueryError
Specifies the error that led to the failure.
### Method retrieveTransactionHistoryRes()
This method indicates that the request to retrieve the transaction history was
successful and it returns the requested transaction history.
Parameters
retrievalID : in TpAssignmentID
Specifies the retrievalID of the transaction history retrieval request.
transactionHistory : in TpTransactionHistorySet
Specifies the requested transaction history.
### Method retrieveTransactionHistoryErr()
This method indicates that the request to retrieve the transaction history
failed and it reports the cause of failure to the application.
Parameters
retrievalID : in TpAssignmentID
Specifies the retrievalID of the transaction history retrieval request.
transactionHistoryError : in TpTransactionHistoryStatus
Specifies the error that occurred while retrieving the transaction history.
### Method queryBalanceExpiryDateRes()
This method indicates that the request to query the balance expiry date was
successful and it reports the requested balance expiry date of an account to
the application.
Parameters
queryId : in TpAssignmentID
Specifies the ID of the balance query expiry date request.
dates : in TpBalanceExpiryDateSet
Specifies the balance expiry date for one or more user accounts.
### Method queryBalanceExpiryDateErr()
This method indicates that the request to query the balance expiry date failed
and it reports the cause of failure to the application.
Parameters
queryId : in TpAssignmentID
Specifies the ID of the balance query expiry date request.
cause : in TpBalanceQueryError
Specifies the error that led to the failure.
### Method updateBalanceRes()
This method indicates that the request to update the balance update was
successful and it reports the balance of an account to the application.
Parameters
requestId : in TpAssignmentID
Specifies the ID of the balance update request.
balance : in TpBalance
Specifies the balance of the account.
### Method updateBalanceErr()
This method indicates that the request to update the balance failed and it
reports the cause of failure to the application.
Parameters
requestId : in TpAssignmentID
Specifies the ID of the balance update request.
cause : in TpBalanceQueryError
Specifies the error that led to the failure.
### Method createVoucherRes()
This method indicates that the request to create a voucher was successful.
Parameters
requestId : in TpAssignmentID
Specifies the ID of the voucher create request.
voucherId : in TpAssignmentID
Specifies the voucher.
### Method createVoucherErr()
This method indicates that the request to create a voucher failed and it
reports the cause of failure to the application.
Parameters
requestId : in TpAssignmentID
Specifies the ID of the voucher create request.
cause : in TpVoucherError
Specifies the error that led to the failure.
### Method destroyVoucherRes()
This method indicates that the request to destroy a voucher was successful.
Parameters
requestId : in TpAssignmentID
Specifies the ID of the request.
voucherId : in TpAssignmentID
Specifies the voucher.
### Method destroyVoucherErr()
This method indicates that the request to destroy a voucher failed and it
reports the cause of failure to the application.
Parameters
requestId : in TpAssignmentID
Specifies the ID of the request.
voucherId : in TpAssignmentID
Specifies the voucher.
cause : in TpVoucherError
Specifies the error that led to the failure.
### Method queryVoucherRes()
This method indicates that the request to query the voucher information was
successful and it reports the amount to the application.
Parameters
queryId : in TpAssignmentID
Specifies the ID of the query voucher amount request.
voucher : in TpVoucher
Specifies the information of the voucher.
### Method queryVoucherErr()
This method indicates that the request to query the voucher failed and it
reports the cause of failure to the application.
Parameters
queryId : in TpAssignmentID
Specifies the ID of the query voucher amount request.
voucherId : in TpAssignmentID
Specifies the voucher.
cause : in TpVoucherError
Specifies the error that led to the failure.
### Method queryUserVouchersRes()
This method indicates that the request to query the vouchers was successful
and it reports the set of vouchers to the application.
Parameters
queryId : in TpAssignmentID
Specifies the ID of the query vouchers request.
vouchers : in TpVoucherSet
Specifies the set of vouchers for the user.
### Method queryUserVouchersErr()
This method indicates that the request to query the vouchers for a user failed
and it reports the cause of failure to the application.
Parameters
queryId : in TpAssignmentID
Specifies the ID of the query vouchers request.
cause : in TpVoucherError
Specifies the error that led to the failure.
  1. State Transition Diagrams =========================
    1. State Transition Diagrams for IpAccountManager \----------------------------------------------
{width="6.6875in" height="4.020833333333333in"}
Figure : Application view on the IpAccountManager
### Active State
In this state a relation between the Application and the Account Management
has been established. The state allows the application to indicate that it is
interested in charging related events, by calling
createNotification/enableNotifications. In case such an event occurs, Account
Manager will inform the application by invoking the operation
reportNotification() on the IpAppAccountManager interface. The application can
also indicate it is no longer interested in certain charging related events by
calling destroyNotification/disableNotifications.
### Notifications created State
When the Account Manager is in the Notifications created state, events
requested with createNotification/enableNotifications will be forwarded to the
application. In this state the application can request to change the
notifications or query the Account Manager for the notifications currently
set.
# Account Management Service Properties
The following table lists properties relevant for the Account Management API.
* * *
Property Type Description/Interpretation P_ EVENT_TYPES INTEGER_SET Indicates
the event types supported by the SCS. Static events are the events by which
applications are initiated. P_ADDRESSPLAN INTEGER_SET Indicates the supported
address plans (defined in TpAddressPlan.) E.g. {P_ADDRESS_PLAN_E164,
P_ADDRESS_PLAN_IP}). Note that more than one address plan may be supported.
* * *
The previous table lists properties related to the capabilities of the SCS
itself. The following table lists properties that are used in the context of
the Service Level Agreement, e.g. to restrict the access of applications to
the capabilities of the SCS.
* * *
Property Type Description/Interpretation P_NOTIFICATION_ADDRESS_RANGES
XML_ADDRESS_RANGE_SET Indicates for which numbers notifications may be set.
More than one range may be present. For terminating notifications they apply
to the terminating number, for originating notifications they apply only to
the originating number. P_CURRENCY_ALLOWED STRING_SET Indicates the currencies
that can be returned in the queryBalanceRes. The valid values for the string
set are according to ISO-4217. E.g. {"EUR", "NLG"}. P_HISTORY_ALLOWED
STRING_SET Indicates the length of the transaction history interval that is
allowed to be retrieved by the application. The valid values for the string
are according to TpDateAndTime. The string-set will be of format
{\"lower_start_time\", \"upper_stop_time\"}, e.g. {\"1998-12-04 10:30\",
\"1999-12-04 10:30\"} P_MAX_ADDRESSES_PER_QUERY INTEGER_SET Indicates the
maximum number of addresses which can be included in a queryBalanceReq.
* * *
  1. Data Definitions ================
    1. Account Management Data Definitions \-----------------------------------
This clause provides the Account Management specific data definitions
necessary to support the OSA interface specification.
The general format of a data definition specification is the following:
  * Data type, that shows the name of the data type.
  * Description, that describes the data type.
  * Tabular specification, that specifies the data types and values of the data type.
  * Example, if relevant, shown to illustrate the data type.
All data types referenced in this document but not defined in this clause are
common data definitions which may be found in 3GPP TS 29.198-2.
### IpAppAccountManager
Defines the address of an IpAppAccountManager Interface.
### IpAppAccountManagerRef
Defines a Reference to type IpAppAccountManager
### IpAccountManager
Defines the address of an IpAccountManager Interface.
### IpAccountManagerRef
Defines a Reference to type IpAccountManager
### TpBalanceQueryError
Defines an error that is reported by the Charging service capability feature
as a result of a balance query request.
* * *
Name Value Description P_BALANCE_QUERY_OK 0 No error occurred while processing
the request P_BALANCE_QUERY_ERROR_UNDEFINED 1 General error, unspecified
P_BALANCE_QUERY_UNKNOWN_SUBSCRIBER 2 Subscriber for which balance is queried
is unknown P_BALANCE_QUERY_UNAUTHORIZED_APPLICATION 3 Application is not
authorized to query balance P_BALANCE_QUERY_SYSTEM_FAILURE 4 System failure.
The request could not be handled
* * *
### TpChargingEventName
Defines the charging event for which notifications can be requested by the
application.
* * *
Name Value Description P_AM_CHARGING 0 End user\'s account has been charged by
an application P_AM_RECHARGING 1 End user has recharged the account
P_AM_ACCOUNT_LOW 2 Account balance is below the balance threshold
P_AM_ACCOUNT_ZERO 3 Account balance is at zero P_AM_ACCOUNT_DISABLED 4 Account
has been disabled
* * *
### TpBalanceInfo
Defines the structure of data elements that specifies detailed balance info.
+-------------------+-------------------+----------------------------+ | Structured Member | Structured Member | Description | | | | | | Name | Type | | +-------------------+-------------------+----------------------------+ | Currency | TpString | Currency unit according to | | | | ISO-4217 [4]. | +-------------------+-------------------+----------------------------+ | ValuePartA | TpInt32 | This data type is | | | | identical to a TpInt32 and | | | | specifies the most | | | | significant part of the | | | | composed value. A currency | | | | amount is composed as | | | | follows: | | | | | | | | ( (ValuePartA*2^32^+ | | | | ValuePartB) * 0,0001 ) | +-------------------+-------------------+----------------------------+ | ValuePartB | TpInt32 | This data type is | | | | identical to a TpInt32 and | | | | specifies the least | | | | significant part of the | | | | composed value. | +-------------------+-------------------+----------------------------+ | Exponent | TpInt32 | Specifies the position of | | | | the decimal point in the | | | | currency amount made up of | | | | the ValuePartA and the | | | | ValuePartB, as described | | | | above. | | | | | | | | E.g. an exponent of 4 | | | | means a pure integer | | | | value, whereas an exponent | | | | of 2 means an accuracy of | | | | 0,01. | +-------------------+-------------------+----------------------------+ | AdditionalInfo | TpString | Descriptive string, | | | | containing additional | | | | information, which is sent | | | | to the application without | | | | prior evaluation. | +-------------------+-------------------+----------------------------+
As an example, the currency amount composed of a Currency of EUR, a ValuePartA
of 0, a ValuePartB of 10 000, and an exponent of 2 yields a currency amount of
€ 100,00.
Valid Currencies are:
ADP, AED, AFA, ALL, AMD, ANG, AON, AOR, ARS, ATS, AUD, AWG, AZM, BAM,
BBD, BDT, BEF, BGL, BGN, BHD, BIF, BMD, BND, BOB, BOV, BRL, BSD, BTN,
BWP, BYB, BZD, CAD, CDF, CHF, CLF, CLP, CNY, COP, CRC, CUP, CVE, CYP,
CZK, DEM, DJF, DKK, DOP, DZD, ECS, ECV, EEK, EGP, ERN, ESP, ETB, EUR,
FIM, FJD, FKP, FRF, GBP, GEL, GHC, GIP, GMD, GNF, GRD, GTQ, GWP, GYD,
HKD, HNL, HRK, HTG, HUF, IDR, IEP, ILS, INR, IQD, IRR, ISK, ITL, JMD,
JOD, JPY, KES, KGS, KHR, KMF, KPW, KRW, KWD, KYD, KZT, LAK, LBP, LKR,
LRD, LSL, LTL, LUF, LVL, LYD, MAD, MDL, MGF, MKD, MMK, MNT, MOP, MRO,
MTL, MUR, MVR, MWK, MXN, MXV, MYR, MZM, NAD, NGN, NIO, NLG, NOK, NPR,
NZD, OMR, PAB, PEN, PGK, PHP, PKR, PLN, PTE, PYG, QAR, ROL, RUB, RUR,
RWF, SAR, SBD, SCR, SDD, SEK, SGD, SHP, SIT, SKK, SLL, SOS, SRG, STD,
SVC, SYP, SZL, THB, TJR, TMM, TND, TOP, TPE, TRL, TTD, TWD, TZS, UAH,
UGX, USD, USN, USS, UYU, UZS, VEB, VND, VUV, WST, XAF, XAG, XAU, XBA,
XBB, XBC, XBD, XCD, XDR, XFO, XFU, XOF, XPD, XPF, XPT, XTS, XXX, YER,
YUM, ZAL, ZAR, ZMK, ZRN, ZWD.
XXX is used for transactions where no currency is involved.
[]{#TpBalanceInfo .anchor}
### TpChargingEventInfo
Defines the structure of data elements that specifies charging event
information.
* * *
Structured Member Name Structured Member Type Description ChargingEventName
TpChargingEventName The charging event for which notifications can be
requested by the application CurrentBalanceInfo TpBalanceInfo The current
balance of the user's account ChargingEventTime TpTime The time at which the
charging event occurred.
* * *
### TpChargingEventCriteria
Defines the structure of data elements that specifies charging event criteria.
* * *
Structured Member Name Structured Member Type Description ChargingEvents
TpChargingEventNameSet Specifies the specific charging event criteria used by
the application to define the event required. Users TpAddressSet Specifies the
user(s) for which the charging events are requested to be reported.
* * *
### TpChargingEventNameSet
Defines a collection of TpChargingEventName elements.
### TpChargingEventCriteriaResult
Defines the Sequence of Data Elements that specify the criteria relating to
event requests.
+-----------------------+-------------------------+ | Sequence Element | Sequence Element | | | | | Name | Type | +-----------------------+-------------------------+ | ChargingEventCriteria | TpChargingEventCriteria | +-----------------------+-------------------------+ | AssignmentID | TpAssignmentID | +-----------------------+-------------------------+
### TpChargingEventCriteriaResultSet
Defines a collection of TpChargingEventCriteriaResult elements.
### TpBalance
Defines the structure of data elements that specifies a balance.
* * *
Structured Member Name Structured Member Type Description UserID TpAddress
Specifies the user to whom the account belongs. StatusCode TpBalanceQueryError
Specifies the status code for the balance query request. BalanceInfo
TpBalanceInfo Specifies the balance information for the user.
* * *
### TpBalanceSet
Defines a collection of TpBalance elements.
### TpTransactionHistory
This data type is a sequence of data elements that describes the transaction
history.
+------------------+------------------+------------------------------+ | Sequence Element | Sequence Element | Description | | | | | | Name | Type | | +------------------+------------------+------------------------------+ | TransactionID | TpAssignmentID | Specifies the ID of the | | | | specific transaction | +------------------+------------------+------------------------------+ | TimeStamp | TpDateAndTime | Specifies the date and time | | | | when the specific | | | | transaction was processed. | +------------------+------------------+------------------------------+ | AdditionalInfo | TpString | Specifies a free format | | | | string providing additional | | | | information on the specific | | | | transaction. This could be | | | | the applicationDescription | | | | provided with the actual | | | | transaction. | +------------------+------------------+------------------------------+
### TpTransactionHistorySet
Defines a collection of TpTransactionHistory elements.
### TpTransactionHistoryStatus
Defines a status code that is reported by the Account Manager service
capability feature as a result of a transaction history retrieval request.
* * *
Name Value Description P_AM_TRANSACTION_ERROR_UNSPECIFIED 0 General error,
unspecified P_AM_TRANSACTION_INVALID_INTERVAL 1 An invalid interval for the
transaction history was specified. P_AM_TRANSACTION_UNKNOWN_ACCOUNT 2 No
account for the specified user is known.
P_AM_TRANSACTION_UNAUTHORIZED_APPLICATION 3 Application is not authorized to
query balance. P_AM_TRANSACTION_PROCESSING_ERROR 4 A processing error occurred
while compiling the transaction history. P_AM_TRANSACTION_SYSTEM_FAILURE 5
System failure. The request could not be handled
* * *
### TpBalanceExpiryDate
Defines the structure of data elements that specifies a balance expiry date.
* * *
Structure Element Name Structure Element Type Structure Element Description
UserID TpAddress Specifies the user to whom the account belongs. StatusCode
TpBalanceQueryError Specifies the status code for the balance query request
ExpiryDate TpDateAndTime Defines the expiry date and time
* * *
### TpBalanceExpiryDateSet
Defines a Numbered set of data elements of TpBalanceExpiryDate.
### TpVoucherError
Defines an error that is reported as a result of a voucher request.
* * *
Name Value Description P_VOUCHER_OK 0 No error occurred while processing the
request P_VOUCHER_UNDEFINED 1 General error, unspecified
P_VOUCHER_UNKNOWN_SUBSCRIBER 2 Subscriber is unknown
P_VOUCHER_UNAUTHORIZED_APPLICATION 3 Application is not authorized
P_VOUCHER_SYSTEM_FAILURE 4 System failure. The request could not be handled
* * *
### TpVoucher
Defines the structure of data elements that specifies a voucher.
* * *
Structure Element Name Structure Element Type Structure Element Description
VoucherID TpAssignmentID Specifies the unique identifier for this voucher.
UserID TpAddress Specifies the user to who the voucher belongs. BalanceInfo
TpBalanceInfo Specifies the amount of the voucher.
* * *
### TpVoucherSet
Defines a numbered set of data elements of TpVoucher.
# Exception Classes
The following are the list of exception classes, which are used in this
interface of the API.
* * *
Name Description P_UNAUTHORIZED_APPLICATION Application is not authorized to
perform charging operations
* * *
Each exception class contains the following structure:
* * *
Structure Element Name Structure Element Type Structure Element Description
ExtraInformation TpString Carries extra information to help identify the
source of the exception, e.g. a parameter name
* * *
###### ## Annex A (normative): OMG IDL Description of Account Management SCF
The OMG IDL representation of this interface specification is contained in a
text file (am.idl contained in archive 2919811V800IDL.ZIP) which accompanies
the present document.
###### ## Annex B (informative): W3C WSDL Description of Account Management
SCF
The W3C WSDL representation of this interface specification is contained in
zip file 2919811V800WSDL.ZIP, which accompanies the present document.
###### ## Annex C (informative): Java™ API Description of the Account
Management SCF
The Java™ API realisation of this interface specification is produced in
accordance with the Java™ Realisation rules defined in Part 1 of this
specification series. These rules aim to deliver for Java™, a developer API,
provided as a realisation, supporting a Java™ API that represents the UML
specifications. The rules support the production of both J2SE™ and J2EE™
versions of the API from the common UML specifications.
The J2SE™ representation of this interface specification is provided as Java™
Code, contained in archive 2919811V800J2SE.ZIP that accompanies the present
document.
The J2EE™ representation of this interface specification is provided as Java™
Code, contained in archive 2919811V800J2EE.ZIP that accompanies the present
document.
###### ## Annex D (informative): Description of Account Management for 3GPP2
cdma2000 networks
This annex is intended to define the OSA API Stage 3 interface definitions and
it provides the complete OSA specifications. It is an extension of OSA API
specifications capabilities to enable operation in cdma2000 systems
environment. They are in alignment with 3GPP2 Stage 1 requirements and Stage 2
architecture defined in
[1] 3GPP2 P.S0001-B: \"Wireless IP Network Standard\", Version 1.0, September
2000;
[2] 3GPP2 S.R0037-0: \"IP Network Architecture Model for cdma2000 Spread
Spectrum Systems\", Version 2.0, May 14, 2002;
[3] 3GPP2 X.S0013: \"All-IP Core Network Multimedia Domain\", December 2003.
These requirements are expressed as additions to and/or exclusions from the
3GPP specification. The information given here is to be used by developers in
3GPP2 cdma2000 network architecture to interpret the 3GPP OSA specifications.
# D.1 General Exceptions
The term UMTS is not applicable for the cdma2000 family of standards.
Nevertheless these terms are used (3GPP TR 21.905) mostly in the broader sense
of \"3G Wireless System\". If not stated otherwise there are no additions or
exclusions required.
CAMEL and CAP mappings are not applicable for cdma2000 systems.
# D.2 Specific Exceptions
## D.2.1 Clause 1: Scope
There are no additions or exclusions.
## D.2.2 Clause 2: References
Normative references on 3GPP TS 23.078 and on 3GPP TS 29.078 are not
applicable for cdma2000 systems.
## D.2.3 Clause 3: Definitions and abbreviations
There are no additions or exclusions.
## D.2.4 Clause 4: Account Management SCF
There are no additions or exclusions.
## D.2.5 Clause 5: Sequence Diagrams
There are no additions or exclusions.
## D.2.6 Clause 6: Class Diagrams
There are no additions or exclusions.
## D.2.7 Clause 7: The Service Interface Specifications
There are no additions or exclusions.
## D.2.8 Clause 8: Account Management Interface Classes
There are no additions or exclusions.
## D.2.9 Clause 9: State Transition Diagrams
There are no additions or exclusions.
## D.2.10 Clause 10: Account Management Service Properties
There are no additions or exclusions.
## D.2.11 Clause 11: Data Definitions
There are no additions or exclusions.
## D.2.12 Clause 12: Exception Classes
There are no additions or exclusions.
## D.2.13 Annex A (normative): OMG IDL Description of Account Management SCF
There are no additions or exclusions.
## D.2.14 Annex B (informative): W3C WSDL Description of Account Management
SCF
There are no additions or exclusions.
#