# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document contains the coding of information necessary for support
of location service operation on the SMLC-BSS interface layer 3.
Clause 2 gives the functional definitions and contents of messages for
location service operations. Clause 3 gives the general format and coding for
messages used for location service and the format and coding of information
elements used for location service operations.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or non‑specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the > case of a reference to a 3GPP document (including a GSM document), > a non-specific reference implicitly refers to the latest version > of that document _in the same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 43.059: \"Functional stage 2 description of Location Services
(LCS) in GERAN\".
[3] 3GPP TS 24.007: \"Mobile radio interface signalling layer 3; General
aspects\".
[4] 3GPP TS 44.018: \"Mobile radio interface layer 3 specification; Radio
Resource Control Protocol\".
[4a] 3GPP TS 24.008: \"Mobile radio interface layer 3 specification; Core
network protocols; Stage 3\".
[5] 3GPP TS 45.008: \"Radio subsystem link control\".
[6] 3GPP TS 48.008: \"Mobile Switching Centre - Base Station System (MSC-BSS)
interface; Layer 3 specification\".
[7] 3GPP TS 49.031: \"Location Services (LCS); Base Station System Application
Part LCS Extension (BSSAP-LE)\".
[8] 3GPP TS 44.031: \"Location Services (LCS); Mobile Station (MS) - Serving
Mobile Location Centre (SMLC) Radio Resource LCS Protocol (RRLP)\".
# 3 Definitions and abbreviations
For the purposes of the present document, the abbreviations, terms and
definitions given in 3GPP TR 21.905 and 3GPP TS 43.059 apply.
# 4 Messages functional definitions and contents
## 4.1 General
This sub-clause defines the structure of the messages of the SMLC-BSS layer 3
protocol defined in 3GPP TS 43.059.
Each definition includes:
a) a brief description of the message;
b) a table listing the information elements in the order of their appearance
in the message.
For each IE the table indicates:
1) the name of the IE (which gives an idea of the semantics of the element),
which is used in this and other specifications as a reference to the IE within
the message;
2) the name of the type of the IE (which indicates the coding of the value
part of the IE), and a reference to a description of the value part of the IE;
3) the presence requirement indication (M, C or O) for the IE, as defined in
3GPP TS 24.007;
4) the format of the IE (T, V, TV, LV, TLV) as defined in 3GPP TS 24.007;
5) the length of the IE (or permissible range of lengths), in octets, in the
message. The value of the length gives the number of octets in the IE
following the length and element identifier. Where the length is encoded using
more than one octet, the high order bit is bit 8 of the first (lowest numbered
octet) and the low order bit is bit 1 of the last (highest numbered octet).
When a length has a range of M to N octets, the notation \"M-N\" is used. The
symbol \"n\" represents the maximum of a range when indefinite.
c) sub-clauses specifying conditions for IEs with presence requirement C or O
in the relevant message. Together with other conditions specified in 3GPP TS
43.059 this defines when the IE shall be included or not, what non‑presence of
such IEs means, and (for IEs with presence requirement C) the static
conditions for presence and/or non-presence of the IEs (see 3GPP TS 43.059).
## 4.2 Messages
The following Location Services related messages are exchanged between the
SMLC and the BSS:
\- TA Request;
\- TA Response;
\- Reject;
\- Reset;
\- Abort;
\- TA Layer3;
\- MS Position Command;
  * MS Position Response;
  * U-TDOA Request;
  * U-TDOA Response.
On the Lb interface the messages are contained in the BSSLAP APDU IE which is
encapsulated in the following messages as specified in 3GPP TS 49.031:
\- BSSMAP-LE CONNECTION ORIENTED INFORMATION message (for all messages except
the TA LAYER 3 message);
\- BSSMAP-LE PERFORM LOCATION REQUEST message (for the TA LAYER 3 message)
\- BSSMAP-LE PERFORM LOCATION INFORMATION message (for the TA LAYER 3
message).
### 4.2.1 TA Request
The TA Request is a message from the SMLC to the BSS, requesting BSS to return
the timing advance (or access delay) of the MS.
Table 4.2.1.1: TA Request message content
* * *
Information element Type/Reference Presence Format Length Message Type Message
Type IE / 5.1 M V 1
* * *
### 4.2.2 TA Response
The TA Response is a message from the BSS to the SMLC. It is a response to TA
Request message and contains the following information elements.
Table 4.2.2.1: TA Response message content
* * *
Information element Type/Reference Presence Format Length Message Type Message
Type IE / 5.1 M V 1 Serving Cell Identity Cell Identity IE / 5.4 M TV 3 Timing
Advance Timing Advance IE / 5.2 M TV 2 Measurement Report Measurement Report
IE / 5.12 O TLV 18 Enhanced Measurement Report Enhanced Measurement Report IE
/ 5.18 O TLV 4-n Measured Cell Identity List Cell Identity List IE / 5.17 O
TLV 6-n Concurrent Method Flag Concurrent Positioning Flag IE / 5.34 O (note
1) TV 2 NOTE 1: This IE is only included when the BSC allows a concurrent
invocation of a first and second positioning procedure
* * *
### 4.2.3 (void)
### 4.2.4 (void)
### 4.2.5 Reject
The Reject is a message from the BSS to the SMLC. It is a possible response to
TA Request, MS Position Command or U-TDOA Request and contains the following
information elements.
Table 4.2.5.1: Reject message content
* * *
Information element Type/Reference Presence Format Length Message Type Message
Type IE / 5.1 M V 1 Cause Cause IE / 5.14 M TV 2
* * *
The following are the expected cause values for Reject message:
\- congestion;
\- channel Mode not supported;
\- positioning procedure not supported;
\- failure for other radio related events;
\- incorrect serving cell identity;
\- BSSAP-LE Segmentation error;
\- Concurrent Positioning not enabled.
### 4.2.6 Reset
The Reset is a message from the BSS to the SMLC. It is sent when the Response
message contents for a positioning request are invalidated (e.g. due to
handover) before the positioning procedure was completed.
Table 4.2.6.1: Reset message content
+----------------+----------------+----------------+--------+--------+ | Information | Type/Reference | Presence | Format | Length | | element | | | | | +----------------+----------------+----------------+--------+--------+ | Message Type | Message Type | M | V | 1 | | | IE / 5.1 | | | | +----------------+----------------+----------------+--------+--------+ | Cell ID | Cell Identity | M | TV | 3 | | | IE / 5.4 | | | | +----------------+----------------+----------------+--------+--------+ | Timing Advance | Timing Advance | M | TV | 2 | | | IE / 5.2 | | | | +----------------+----------------+----------------+--------+--------+ | Channel | Channel | M | TV | 4 | | description | Description IE | | | | | | / 5.8 | | | | +----------------+----------------+----------------+--------+--------+ | Cause | Cause IE / 5.1 | M | TV | 2 | +----------------+----------------+----------------+--------+--------+ | Measurement | Measurement | O | TLV | 18 | | Report | Report IE / | | | | | | 5.12 | | | | +----------------+----------------+----------------+--------+--------+ | Enhanced | Enhanced | O | TLV | 4-n | | Measurement | Measurement | | | | | Report | Report IE / | | | | | | 5.18 | | | | +----------------+----------------+----------------+--------+--------+ | Measured Cell | Cell Identity | O | TLV | 6-n | | Identity List | List IE / 5.17 | | | | +----------------+----------------+----------------+--------+--------+ | LAC | Location Area | O | TV | 3 | | | Code IE / 5.19 | | | | +----------------+----------------+----------------+--------+--------+ | Frequency List | Frequency List | C (note 1) | TLV | 3-n | | | IE 5.20 | | | | +----------------+----------------+----------------+--------+--------+ | Channel Mode | Channel Mode | C (notes 2 & | TV | 2 | | | IE 5.26 | 4) | | | +----------------+----------------+----------------+--------+--------+ | MultiRate | MultiRate | C (notes 3 & | TLV | 4-n | | Configuration | Configuration | 4) | | | | | 5.27 | | | | +----------------+----------------+----------------+--------+--------+ | Packet Channel | Packet Channel | C (note 5) | TV | 4 | | Description | Description IE | | | | | | 5.29 | | | | +----------------+----------------+----------------+--------+--------+ | TLLI | TLLI IE 5.30 | C (note 5) | TV | 5 | +----------------+----------------+----------------+--------+--------+ | TFI | TFI 5.31 | C (note 5) | TV | 2 | +----------------+----------------+----------------+--------+--------+ | TBF Starting | Starting Time | C (note 5) | TV | 3 | | Time | IE 5.32 | | | | +----------------+----------------+----------------+--------+--------+ | Encryption Key | Encryption Key | C (note 6) | TV | 9 | | (Kc) | IE 5.24 | | | | +----------------+----------------+----------------+--------+--------+ | Cipher Mode | Cipher Mode | C (note 4) | TV | 2 | | Setting | Setting IE | | | | | | 5.25 | | | | +----------------+----------------+----------------+--------+--------+ | Long | Long | C (note 7) | TV | 17 | | Encryption Key | Encryption Key | | | | | (Kc128) | IE 5.33 | | | | +----------------+----------------+----------------+--------+--------+ | NOTE 1: The | | | | | | Frequency List | | | | | | IE is included | | | | | | only for | | | | | | U-TDOA when | | | | | | frequency | | | | | | hopping is | | | | | | used. | | | | | | | | | | | | NOTE 2: The | | | | | | Channel Mode | | | | | | IE is included | | | | | | only for | | | | | | U-TDOA using | | | | | | FR or AMR (not | | | | | | included for | | | | | | EFR). | | | | | | | | | | | | NOTE 3: The | | | | | | MultiRate | | | | | | Configuration | | | | | | IE is included | | | | | | only for | | | | | | U-TDOA using | | | | | | AMR. | | | | | | | | | | | | NOTE 4: This | | | | | | IE can only be | | | | | | present for CS | | | | | | U-TDOA | | | | | | location | | | | | | method | | | | | | | | | | | | NOTE 5: This | | | | | | IE can only be | | | | | | present for PS | | | | | | U-TDOA | | | | | | location | | | | | | method | | | | | | | | | | | | NOTE 6: This | | | | | | IE can only be | | | | | | present for CS | | | | | | U-TDOA | | | | | | location | | | | | | method and if | | | | | | the Ciphering | | | | | | Mode Setting | | | | | | IE indicates | | | | | | A5/1 or A5/3. | | | | | | | | | | | | NOTE 7: This | | | | | | IE can only be | | | | | | present for CS | | | | | | U-TDOA | | | | | | location | | | | | | method and if | | | | | | the Ciphering | | | | | | Mode Setting | | | | | | IE indicates | | | | | | A5/4. | | | | | +----------------+----------------+----------------+--------+--------+
The following are the expected cause values for Reset message:
\- intra-BSS handover;
\- failure for other radio related events;
\- supervision Timer Expired;
\- incorrect serving cell identity.
### 4.2.7 Abort
The Abort is a message from the BSS to the SMLC. Upon receiving this signal,
the SMLC shall abort ongoing positioning procedure.
Table 4.2.7.1: Abort message content
* * *
Information element Type/Reference Presence Format Length Message Type Message
Type IE / 5.1 M V 1 Cause Cause IE / 5.14 M TV 2
* * *
The following are the expected cause values for Abort message:
\- failure for other radio related events;
\- supervision Timer Expired;
\- inter BSS handover;
\- loss of signalling connection to MS.
### 4.2.8 TA Layer3
The TA Layer3 is an optional encapsulated message from the BSS to the SMLC
that adds the following information in Complete layer 3 Information as
described in 3GPP TS 48.008.
Table 4.2.8.1: TA Layer3 message content
* * *
Information element Type/Reference Presence Format Length Message Type Message
Type IE / 5.1 M V 1 Timing Advance Timing Advance IE / 5.2 M TV 2 Measurement
Report Measurement Report IE / 5.12 O TLV 18 Enhanced Measurement Report
Enhanced Measurement Report IE / 5.18 O TLV 4-n Measured Cell Identity List
Cell Identity List IE / 5.17 O TLV 6-n
* * *
### 4.2.9 MS Position Command
The BSSLAP MS Position Command is a message from the SMLC to BSS that contains
the following information elements.
Table 4.2.9.1: MS Position Command message content
* * *
Information element Type/Reference Presence Format Length Message Type Message
Type IE / 5.1 M V 1 flag RRLP flag IE / 5.15 M TV 2 RRLP Info RRLP IE / 5.16 M
TLV 3-n
* * *
### 4.2.10 MS Position Response
The BSSLAP MS Position Response is a message from the BSS to the SMLC that
contains the following information elements.
Table 4.2.10.1: MS Position Response message content
* * *
Information element Type/Reference Presence Format Length Message Type Message
Type IE / 5.1 M V 1 flag RRLP flag IE / 5.15 M TV 2 RRLP Info RRLP IE / 5.16 M
TLV 3-n Timing Advance Timing Advance IE / 5.2 O TV 2 Measurement Report
Measurement Report IE / 5.12 O TLV 18 Enhanced Measurement Report Enhanced
Measurement Report IE / 5.18 O TLV 4-n Measured Cell Identity List Cell
Identity List IE / 5.17 O TLV 6-n Concurrent Method Flag Concurrent
Positioning Flag IE / 5.34 O (note 1) TV 2 NOTE 1: This IE is only included
when the BSC allows a concurrent invocation of a first and second positioning
procedure
* * *
### 4.2.11 U-TDOA Request
The U-TDOA Request is a message from the SMLC to the BSS. It contains the
following information elements.
Table 4.2.11.1: U-TDOA Request message content
* * *
Information element Type/Reference Presence Format Length Message Type Message
Type IE 5.1 M V 1 Delta Timer Delta Timer IE 5.22 O (note 1) TV 2 Polling
Repetition Polling Repitition IE 5.28 (note) C (note 2) TV 2 NOTE 1: This IE
can only be present for CS U-TDOA location method  
NOTE 2: This IE is only present for PS U-TDOA location method
* * *
### 4.2.12 U-TDOA Response
The U-TDOA Response is a message from the BSS to the SMLC. It is a response to
the U-TDOA Request message. It contains the following information elements.
Table 4.2.12.1: U-TDOA Response message content
+----------------+----------------+----------------+--------+--------+ | Information | Type/Reference | Presence | Format | Length | | element | | | | | +----------------+----------------+----------------+--------+--------+ | Message Type | Message Type | M | V | 1 | | | IE 5.1 | | | | +----------------+----------------+----------------+--------+--------+ | Channel | Channel | M | TV | 4 | | Description | Description IE | | | | | | 5.8 | | | | +----------------+----------------+----------------+--------+--------+ | Serving Cell | Cell | M | TLV | 4-n | | Identifier | Identifier IE | | | | | | 5.23 | | | | +----------------+----------------+----------------+--------+--------+ | Frequency List | Frequency List | C (note 3) | TLV | 3-n | | | IE 5.20 | | | | +----------------+----------------+----------------+--------+--------+ | Timing Advance | Timing Advance | O | TV | 2 | | | IE 5.2 | | | | +----------------+----------------+----------------+--------+--------+ | MS Power | MS Power IE | O | TV | 2 | | | 5.21 | | | | +----------------+----------------+----------------+--------+--------+ | Measurement | Measurement | O | TLV | 18 | | Report | Report IE 5.12 | | | | +----------------+----------------+----------------+--------+--------+ | Encryption Key | Encryption Key | C (note 7) | TV | 9 | | (Kc) | IE 5.24 | | | | +----------------+----------------+----------------+--------+--------+ | Cipher Mode | Cipher Mode | C (note 4) | TV | 2 | | Setting | Setting IE | | | | | | 5.25 | | | | +----------------+----------------+----------------+--------+--------+ | Channel Mode | Channel Mode | C (notes 1 & | TV | 2 | | | IE 5.26 | 4) | | | +----------------+----------------+----------------+--------+--------+ | MultiRate | MultiRate | C (notes 1 & | TLV | 4-n | | Configuration | Configuration | 4) | | | | | IE 5.27 | | | | +----------------+----------------+----------------+--------+--------+ | Measured Cell | Cell Identity | O | TLV | 6-n | | Identity List | List IE / 5.17 | | | | +----------------+----------------+----------------+--------+--------+ | Packet Channel | Packet Channel | C (note 5) | TV | 4 | | Description | Description IE | | | | | | 5.29 | | | | +----------------+----------------+----------------+--------+--------+ | TLLI | TLLI IE 5.30 | C (note 5) | TV | 5 | +----------------+----------------+----------------+--------+--------+ | TFI | TFI IE 5.31 | C (note 5) | TV | 2 | +----------------+----------------+----------------+--------+--------+ | TBF Starting | Starting Time | C (note 5) | TV | 3 | | Time | IE 5.32 | | | | +----------------+----------------+----------------+--------+--------+ | Power-Up | Starting Time | O (note 6) | TV | 3 | | Starting Time | IE 5.32 | | | | +----------------+----------------+----------------+--------+--------+ | Long | Long | C (note 8) | TV | 17 | | Encryption Key | Encryption Key | | | | | (Kc128) | IE 5.33 | | | | +----------------+----------------+----------------+--------+--------+ | Concurrent | Concurrent | O (note 9) | TV | 2 | | Method Flag | Positioning | | | | | | Flag IE / 5.34 | | | | +----------------+----------------+----------------+--------+--------+ | NOTE 1: The | | | | | | Channel Mode | | | | | | IE is included | | | | | | only for | | | | | | U-TDOA using | | | | | | FR or AMR (not | | | | | | included for | | | | | | EFR). | | | | | | | | | | | | NOTE 2: The | | | | | | MultiRate | | | | | | Configuration | | | | | | IE is included | | | | | | only for | | | | | | U-TDOA using | | | | | | AMR. | | | | | | | | | | | | NOTE 3: The | | | | | | Frequency List | | | | | | IE is included | | | | | | only when | | | | | | frequency | | | | | | hopping is | | | | | | used. NOTE 4: | | | | | | This IE can | | | | | | only be | | | | | | present for CS | | | | | | U-TDOA | | | | | | location | | | | | | method. | | | | | | | | | | | | NOTE 5: This | | | | | | IE can only be | | | | | | present for PS | | | | | | U-TDOA | | | | | | location | | | | | | method . | | | | | | | | | | | | NOTE 6: The | | | | | | Power-Up | | | | | | Starting Time | | | | | | IE is included | | | | | | if the | | | | | | Power-Up | | | | | | procedure is | | | | | | supported for | | | | | | U-TDOA | | | | | | location | | | | | | method. It | | | | | | represents the | | | | | | starting time | | | | | | of the | | | | | | power-up and | | | | | | DTX | | | | | | suspension. | | | | | | | | | | | | NOTE 7: This | | | | | | IE can only be | | | | | | present for CS | | | | | | U-TDOA | | | | | | location | | | | | | method and if | | | | | | the Ciphering | | | | | | Mode Setting | | | | | | IE indicates | | | | | | A5/1 or A5/3. | | | | | | | | | | | | NOTE 8: This | | | | | | IE can only be | | | | | | present for CS | | | | | | U-TDOA | | | | | | location | | | | | | method and if | | | | | | the Ciphering | | | | | | Mode Setting | | | | | | IE indicates | | | | | | A5/4. | | | | | | | | | | | | NOTE 9: This | | | | | | IE is only | | | | | | included when | | | | | | the BSC allows | | | | | | a concurrent | | | | | | invocation of | | | | | | a first and | | | | | | second | | | | | | positioning | | | | | | procedure | | | | | +----------------+----------------+----------------+--------+--------+
# 5 Information element encodings
This paragraph contains the coding of the signalling elements used.
The following conventions are assumed for the sequence of transmission of bits
and bytes:
\- each bit position is marked as 1 to 8. Bit 1 is the least significant bit
and is transmitted first;
\- in an element octets are identified by number, octet 1 is transmitted
first, then octet 2 etc.
When a field extends over more than one octet, the order of bit values
progressively decreases as the octet number increases. The least significant
bit of the field is represented by the lowest numbered bit of the highest
numbered octet of the field.
\- For variable length elements a length indicator is included, this indicates
the number of octets following in the element.
\- All fields within Information Elements are mandatory unless otherwise
specified. The Information Element Identifier shall always be included.
All spare bits are set to 0.
The elements used and their coding are:
Table 5.1: Element Indentifier codes
+---------------------------+---------------------------+-----------+ | Element\ | Element name | Reference | | Identifier\ | | | | Coding | | | +---------------------------+---------------------------+-----------+ | 0000 0001 | Timing Advance | 5.2 | +---------------------------+---------------------------+-----------+ | 0000 1000 | Reserved (note) | | +---------------------------+---------------------------+-----------+ | 0000 1001 | Cell Identity | 5.4 | +---------------------------+---------------------------+-----------+ | 0000 1010 | Reserved (note) | | +---------------------------+---------------------------+-----------+ | 0000 1011 | Reserved (note) | | +---------------------------+---------------------------+-----------+ | 0000 1100 | Reserved (note) | | +---------------------------+---------------------------+-----------+ | 0001 0000 | Channel Description | 5.8 | +---------------------------+---------------------------+-----------+ | 0001 0001 | Reserved (note) | | +---------------------------+---------------------------+-----------+ | 0001 0010 | Reserved (note) | | +---------------------------+---------------------------+-----------+ | 0001 0011 | Reserved (note) | | +---------------------------+---------------------------+-----------+ | 0001 0100 | Measurement Report | 5.12 | +---------------------------+---------------------------+-----------+ | 0001 0101 | Reserved (note) | | +---------------------------+---------------------------+-----------+ | 0001 1000 | Cause | 5.14 | +---------------------------+---------------------------+-----------+ | 0001 1001 | RRLP Flag | 5.15 | +---------------------------+---------------------------+-----------+ | 0001 1011 | RRLP IE | 5.16 | +---------------------------+---------------------------+-----------+ | > 0001 1100 | Cell Identity List | 5.17 | +---------------------------+---------------------------+-----------+ | > 0001 1101 | Enhanced Measurement | 5.18 | | | Report | | +---------------------------+---------------------------+-----------+ | > 0001 1110 | Location Area Code | 5.19 | +---------------------------+---------------------------+-----------+ | > 0010 0001 | Frequency List | 5.20 | +---------------------------+---------------------------+-----------+ | > 0010 0010 | MS Power | 5.21 | +---------------------------+---------------------------+-----------+ | > 0010 0011 | Delta Timer | 5.22 | +---------------------------+---------------------------+-----------+ | > 0010 0100 | Serving Cell Identifier | 5.23 | +---------------------------+---------------------------+-----------+ | > 0010 0101 | Encryption Key (Kc) | 5.24 | +---------------------------+---------------------------+-----------+ | > 0010 0110 | Cipher Mode Setting | 5.25 | +---------------------------+---------------------------+-----------+ | > 0010 0111 | Channel Mode | 5.26 | +---------------------------+---------------------------+-----------+ | > 0010 1000 | MultiRate Configuration | 5.27 | +---------------------------+---------------------------+-----------+ | > 0010 1001 | Polling Repetition | 5.28 | +---------------------------+---------------------------+-----------+ | > 0010 1010 | Packet Channel | 5.29 | | | Description | | +---------------------------+---------------------------+-----------+ | > 0010 1011 | TLLI | 5.30 | +---------------------------+---------------------------+-----------+ | > 0010 1100 | TFI | 5.31 | +---------------------------+---------------------------+-----------+ | > 0010 1101 | TBF Starting Time | 5.32 | +---------------------------+---------------------------+-----------+ | > 0010 1110 | Power-Up Starting Time | 5.32 | +---------------------------+---------------------------+-----------+ | > 0010 1111 | Long Encryption Key | 5.33 | | | (Kc128) | | +---------------------------+---------------------------+-----------+ | > 0011 0000 | Concurrent Positioning | 5.34 | | | Procedure Flag | | +---------------------------+---------------------------+-----------+ | NOTE: These values of the | | | | codepoints shall not be | | | | used as they were used in | | | | an earlier version of the | | | | protocol. | | | +---------------------------+---------------------------+-----------+
All unassigned codes are spare.
## 5.1 Message Type IE
Message Type uniquely identifies the message being sent. It is a single octet
element, mandatory in all messages.
All unassigned codes are spare.
Table 5.1.1: Message Type codes
* * *
**8 7 6 5 4 3 2 1**  
0 0 0 0 0 0 0 0 Reserved. 0 0 0 0 0 0 0 1 TA REQUEST 0 0 0 0 0 0 1 0 TA
RESPONSE 0 0 0 0 0 1 0 0 Reserved (note) 0 0 0 0 0 1 0 1 Reserved (note) 0 0 0
0 1 0 1 0 REJECT 0 0 0 0 1 0 1 1 RESET 0 0 0 0 1 1 0 0 ABORT 0 0 0 0 1 1 0 1
TA LAYER3 0 0 0 0 1 1 1 1 MS Position Command 0 0 0 1 0 0 0 0 MS Position
Response 0 0 0 1 0 0 0 1 U-TDOA Request 0 0 0 1 0 0 1 0 U-TDOA Response NOTE:
These values of the codepoints shall not be used as they were used in an
earlier version of the protocol.
* * *
## 5.2 Timing Advance IE
This element contains the Timing Advance measured by the BTS.
* * *
8 7 6 5 4 3 2 1  
Element identifier octet 1  
Timing Advance octet 2
* * *
Figure 5.2.1: Timing Advance IE
The coding of the timing advance value field is the binary representation of
the timing advance in bit periods; 1 bit period = 48/13 us, as described in
3GPP TS 44.018 with the difference that all 8 bits are significant (instead of
the normal 6 bits), which is necessary in order to report TA from extended
range cells. To be correct, values over 63 do not correspond to a TA used by
the MS (maximum is 63). Instead values over 63 correspond to the access delay
measured by the BTS.
## 5.3 (void)
## 5.4 Cell Identity IE
This element defines the cell identity of the MS serving cell.
* * *
8 7 6 5 4 3 2 1  
Element identifier octet 1  
Cell Identity octet 2-3
* * *
Figure 5.4.1: Cell Identity IE
The coding of the Cell Identity field is as defined in 3GPP TS 24.008
(excluding IEI).
## 5.5 (void)
## 5.6 (void)
## 5.7 (void)
## 5.8 Channel Description IE
This element defines the physical channel allocation of the MS.
* * *
8 7 6 5 4 3 2 1  
Element identifier octet 1  
Channel Description octets 2-4
* * *
Figure 5.8.1: Channel Description IE
The coding of Channel Description field is as defined in 3GPP TS 44.018
(excluding IEI).
## 5.9 (void)
## 5.10 (void)
## 5.11 (void)
## 5.12 Measurement Report IE
This element contains the measurement report from the BSS.
* * *
8 7 6 5 4 3 2 1  
Element identifier octet 1  
Length octet 2  
Measurement Results octet 3-18
* * *
Figure 5.12.1: Measurement Report IE
The Measurement Results field is encoded as in 3GPP TS 44.018 (excluding IEI)
with the changes specified below.
DTX-USED\ The DTX-USED bit shall be set as the DTXd field in the UPLINK
MEASUREMENTS message in 3GPP TS 48.058.\ If the DTX-USED field is set to \"0\"
the SMLC shall use the RXLEV-FULL and RXQUAL-FULL values.\ If the DTX-USED
field is set to \"1\" the SMLC shall use the RXLEV-SUB and RXQUAL-SUB values.
RXLEV-FULL-SERVING-CELL and RXLEV-SUB-SERVING-CELL\ When the values of RXLEV-
FULL-SERVING-CELL and RXLEV-SUB-SERVING-CELL from TS 44.018 are 0 or 63, then
their value shall be encoded to the Measurement Results without change.
Otherwise, the values of RXLEV-FULL-SERVING-CELL and RXLEV-SUB-SERVING-CELL
shall be added with 2 times the power reduction value corresponding to the
Power Level field in the BS POWER message in 3GPP TS 48.058. A result higher
than the upper boundary shall be limited to 63 to avoid value out of range.
> RXLEV-FULL-SERVING-CELL (parameter in Measurement Results)\ = RXLEV-FULL-
> SERVING-CELL (parameter from TS 44.018, in octet 2 of NMR section 10.5.2.20
> )\ \+ 2*( Power Level field in the BS POWER message)
>
> RXLEV-SUB-SERVING-CELL (parameter in Measurement Results)\ = RXLEV-SUB-
> SERVING-CELL (parameter from TS 44.018)\ \+ 2*( Power Level field in the BS
> POWER message)
Example: If Power Level is \"0010\" then\ RXLEV-FULL-SERVING-CELL (parameter
in Measurement Results)\ = RXLEV-FULL-SERVING-CELL (parameter from TS 44.018)
+ (2*2)
## 5.13 (void)
## 5.14 Cause IE
This element contains the cause value.
* * *
8 7 6 5 4 3 2 1  
Element identifier octet 1  
Cause value octet 2
* * *
Figure 5.14.1: Cause IE
The cause field is coded as follows:
Table 5.14.1: Cause IE coding
* * *
0000 0000 Congestion 0000 0001 Channel Mode not supported 0000 0010
Positioning procedure not supported 0000 0011 Failure for other radio related
events 0000 0100 Intra-BSS handover 0000 0101 Supervision Timer Expired 0000
0110 Inter-BSS handover 0000 0111 Loss of signalling connection to MS 0000
1000 Incorrect serving cell identity 0000 1001 BSSAP-LE Segmentation error
0000 1010 Concurrent Positioning Procedure not enabled All unassigned codes
are spare.
* * *
## 5.15 RRLP Flag IE
This element is coded as:
* * *
8 7 6 5 4 3 2 1  
Element identifier octet 1  
SPARE Flag1 octet 2
* * *
Figure 5.15.1: RRLP Flag IE
The fields are coded as follows:
Flag 1 (Octet 2, bit 1):
0 Position Command (SMLC to BSC) or final response (BSC to SMLC).
1 Not a Positioning Command or final response.
## 5.16 RRLP IE
RRLP IE is coded as:
* * *
8 7 6 5 4 3 2 1  
Element identifier octet 1  
Length octet 2-3  
RRLP APDU (3GPP TS 44.031) octet 4-n
* * *
Figure 5.16.1: RRLP IE
## 5.17 Cell Identity List IE
This element defines the list of cell identities of neighbour cells, for which
measurements are reported. The Cell Identities are listed in the same order
than the corresponding measurements in the (Enhanced) Measurement Report IE.
+-----------------------+---------------------+---------------+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +-----------------------+---------------------+---------------+---+---+---+---+---+---+ | Element identifier | octet 1 | | | | | | | | +-----------------------+---------------------+---------------+---+---+---+---+---+---+ | Length | octet 2 | | | | | | | | +-----------------------+---------------------+---------------+---+---+---+---+---+---+ | Spare | Cell identification | octet 3 | | | | | | | | | | | | | | | | | | | Discriminator 1 | | | | | | | | +-----------------------+---------------------+---------------+---+---+---+---+---+---+ | Cell Identification 1 | octet 4 to (4+p) | | | | | | | | +-----------------------+---------------------+---------------+---+---+---+---+---+---+ | ... | | | | | | | | | +-----------------------+---------------------+---------------+---+---+---+---+---+---+ | Spare | Cell identification | octet (n-q-1) | | | | | | | | | | | | | | | | | | | Discriminator N | | | | | | | | +-----------------------+---------------------+---------------+---+---+---+---+---+---+ | Cell Identification N | octet (n-q) to n | | | | | | | | +-----------------------+---------------------+---------------+---+---+---+---+---+---+
Figure 5.17.1: Cell Identity IE
The coding of octet 2 is a binary number indicating the Length of the
remaining element. The Length depends on the Cell identification discriminator
i as well as the number of cells to be identified.
The Cell identification discriminator i is coded as follows:
0000 The whole Cell Global Identification, CGI, is used to identify the 2G
cells.
0001 Location Area Code, LAC, and Cell Identify, CI, are used to identify the
2G cells.
0010 3G Cell identification container 1.
0011 3G Cell identification container 2.
All other values are reserved.
The coding of the Cell Identification i depends on the Cell identification
discriminator i. Below the coding of the i-th Cell Identification is shown for
each Cell identification discriminator (with \"i\" in the range 1 to n):
Coding of the i-th Cell Identification for Cell identification discriminator =
0000.
* * *
8 7 6 5 4 3 2 1  
MCC dig 2 MCC dig 1 octet x+1  
MNC dig 3 MCC dig 3 octet x+2  
MNC dig 2 MNC dig 1 octet x+3  
LAC octet x+4  
LAC cont. octet x+5  
CI value octet x+6  
CI value cont octet x+7
* * *
Figure 5.17.2: Cell identification for discriminator = 0000
The octet (x+2) bits 5-8 are filled by \'1111\' if 2 digit MNC is used.
The octets (x+1)-(x+5) are coded as the value part shown in 3GPP TS 24.008,
Table \'Location Area Identification information element\'.
The octets (x+6)-(x+7) are coded as the value part shown in 3GPP TS 24.008,
Table \'Cell Identity information element\'.
Coding of i-th Cell Identification for Cell identification discriminator =
0001.
* * *
8 7 6 5 4 3 2 1  
LAC octet x+1  
LAC cont. octet x+2  
CI value octet x+3  
CI value cont octet x+4
* * *
Figure 5.17.3: Cell identification for discriminator = 0001
The octets (x+1)-(x+2) are coded as the value part shown in 3GPP TS 24.008,
Table \'Location Area Identification information element\'.
The octets (x+3)-(x+4) are coded as the value part shown in 3GPP TS 24.008,
Table \'Cell Identity information element\'.
Coding of the Target ID for Cell identification discriminator = 0010.
Octets (x+1) to (x+9) shall be ignored by the receiver.
NOTE: in the 3G Cell identification container 1, the transmitter may send
PLMN-ID, LAC, RNC-ID and C-ID to identify a 3G cell.
Coding of the Target ID for Cell identification discriminator = 0011.
Octets (x+1) to (x+6) shall be ignored by the receiver.
NOTE: In the 3G Cell identification container 2, the transmitter may send LAC,
RNC-ID and C-ID to identify a 3G cell.
## 5.18 Enhanced Measurement Report IE
This element contains the measurement report from the BSS.
* * *
8 7 6 5 4 3 2 1  
Element identifier octet 1  
Length octet 2  
Enhanced Measurement Results octet 3-n
* * *
Figure 5.18.1: Enhanced Measurement Report IE
The Enhanced Measurement Results field is encoded as the contents of the
ENHANCED MEASUREMENT REPORT message in 3GPP TS 44.018 (excluding the fields:
\"RR short PD\", \"Message type\" and \"Short layer 2 header\") with the
changes specified below.
RXLEV_VAL for serving cell\ When the values of RXLEV_VAL from TS 44.018 is 0
or 63, then its value shall be encoded to the Enhanced Measurement Results
without change. Otherwise, the value of RXLEV_VAL shall be added with 2 times
the power reduction value corresponding to the Power Level field in the BS
POWER message in 3GPP TS 48.058. A result higher than the upper boundary shall
be limited to 63 to avoid value out of range.
> RXLEV_VAL (parameter in Enhanced Measurement Results)\ = RXLEV_VAL
> (parameter from TS 44.018 in section 9.1.55)\ \+ 2*(Power Level field in the
> BS POWER message)
Example: If Power Level is \"0010\" then\ RXLEV_VAL (parameter in Enhanced
Measurement Results)\ = RXLEV_VAL (parameter from TS 44.018) + (2*2).
## 5.19 Location Area Code IE
This element defines the cell identity of the MS serving cell.
* * *
8 7 6 5 4 3 2 1  
Element identifier octet 1  
Location Area Code octet 2-3
* * *
Figure 5.19.1: Location Area Code IE
The coding of the Location Area Code field is as defined in 3GPP TS 24.008
(excluding IEI, MCC, and MNC).
## 5.20 Frequency List IE
The Frequency List IE contains a list of frequencies used by the MS.
* * *
8 7 6 5 4 3 2 1  
Element identifier octet 1  
Length octet 2  
Frequency List octets 3-n
* * *
Figure 5.20.1: Frequency List IE
The coding of Frequency List field is as defined in 3GPP TS 44.018 (excluding
IEI and length field).
## 5.21 MS Power IE
This element contains the MS power.
* * *
8 7 6 5 4 3 2 1  
Element identifier octet 1  
MS Power octet 2
* * *
Figure 5.21.1: MS Power IE
The MS Power field is encoded as in 3GPP TS 44.018 (excluding IEI) and 3GPP TS
45.005.
## 5.22 Delta Timer IE
This element contains the value of the delta timer. The coding is as follows.
* * *
8 7 6 5 4 3 2 1  
Element identifier octet 1  
Timer Value octet 2
* * *
Figure 5.22.1: Delta Timer IE
The Timer Value field is expressed in units of 0,1s.
## 5.23 Serving Cell Identifier IE
This element uniquely identifies a cell within a BSS and is of variable length
containing the following fields:
+---------------------+---------------------+---------+---+---+---+---+---+---+ | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | | +---------------------+---------------------+---------+---+---+---+---+---+---+ | Element identifier | octet 1 | | | | | | | | +---------------------+---------------------+---------+---+---+---+---+---+---+ | Length | octet 2 | | | | | | | | +---------------------+---------------------+---------+---+---+---+---+---+---+ | Spare | Cell identification | octet 3 | | | | | | | | | | | | | | | | | | | discriminator | | | | | | | | +---------------------+---------------------+---------+---+---+---+---+---+---+ | Cell identification | octet 4-n | | | | | | | | +---------------------+---------------------+---------+---+---+---+---+---+---+
Figure 5.23.1: Serving Cell Identifier IE
The Serving Cell Identifier IE is encoded as in 3GPP TS 48.008 (excluding IEI
and length field).
## 5.24 Encryption Key IE
This element defines the encryption key (Kc) of the MS being located.
* * *
8 7 6 5 4 3 2 1  
Element identifier octet 1  
Encryption Key (Kc) octet 2-9
* * *
Figure 5.24.1: Encryption Key IE
The Encryption Key (Kc) field contains the ciphering key to be used in
connection with the encryption algorithms A5/1 and A5/3 as provided to the BSS
by the MSC in the Encryption Information IE and as defined in TS 48.008.
## 5.25 Cipher Mode Setting IE
The purpose of the _Cipher Mode Setting_ information element is to indicate
whether stream ciphering shall be started or not and if it is to be started,
which algorithm to use.
* * *
8 7 6 5 4 3 2 1  
Element identifier octet 1  
Spare Ciph Mod Set IEI algorithm identifier SC octet 2
* * *
Figure 5.25.1: Cipher Mode Setting IE
The _Cipher Mode Setting_ information element is coded as defined in TS 44.018
(excluding IEI).
## 5.26 Channel Mode IE
The purpose of the _Channel Mode_ information element is to indicate the mode
on coding/decoding and transcoding.
* * *
8 7 6 5 4 3 2 1  
Element identifier octet 1  
Mode octet 2
* * *
Figure 5.26.1: Channel Mode IE
The _Channel Mode_ information element is coded as defined in TS 44.018
(excluding IEI).
## 5.27 MultiRate Configuration IE
The purpose of the MultiRate Configuration information element is to provide
all parameters relevant to multi-rate speech codec.
* * *
8 7 6 5 4 3 2 1  
Element identifier octet 1  
Length octet 2  
Multirate speech version NSCB ICMI Spare Start mode octet 3  
Parameters for multirate speech octet 4 - n
* * *
Figure 5.27.1: MultiRate Configuration IE
The _MultiRate Configuration_ information element is coded as defined in TS
44.018 (excluding IEI).
## 5.28 Polling Repetition IE
This element contains the value of the number of repetitions of the Packet
Polling Request procedure. The coding is as follows:
* * *
8 7 6 5 4 3 2 1  
Element identifier octet 1  
Spare Number of polling repetitions (binary) octet 2
* * *
Figure 5.26.1: Polling Repetition IE
The Polling Repitition IE is a binary representation in the range of 4-63.
## 5.29 Packet Channel Description IE
This element contains the timeslot allocation and frequency parameters. The
coding is as follows.
* * *
8 7 6 5 4 3 2 1  
Element identifier octet 1  
CSN.1 binary representation of the channel parameters as described in TS
44.018 (CCCH) or TS 44.060 (PCCCH) plus padding bits (binary 0) as required to
achieve 4 complete octets octets 2-5
* * *
Figure 5.29.1: Packet Channel Description IE
## 5.30 TLLI IE
The purpose of the _TLLI_ information element is to provide the Temporary
Logical Link Identifier.
* * *
8 7 6 5 4 3 2 1  
Element Identifier octet 1  
TLLI value octet 2  
TLLI value (contd) octet 3  
TLLI value (contd) octet 4  
TLLI value (contd) octet 5
* * *
Figure 5.30.1:  _TLLI_ IE
The _TLLI_ information element is coded as defined in TS 44.018 (excluding
IEI).
## 5.31 TFI IE
This element contains the value of the TFI. The coding is as follows.
* * *
8 7 6 5 4 3 2 1  
Element identifier octet 1  
Spare TFI octet 2
* * *
Figure 5.31.1: TFI IE
The _TFI_ information element is coded as defined in TS 44.060 (excluding
IEI).
## 5.32 Starting Time IE
The purpose of the _Starting Time_ information element is to provide the start
TDMA frame number, FN modulo 42432 of the first transmission of the Packet
Polling Request or first block of user data associated with the U-TDOA
location method from the BSS to the MS. In the case that the power-up
procedure for U-TDOA is supported, the _Starting_ _Time_ information element
may provide the starting frame number of the power-up and DTX suspension.
* * *
8 7 6 5 4 3 2 1
Element Identifier octet 1
T1\' T3\ octet 2  
(high part)
T3\ T2 octet 3  
(low part)
* * *
Figure 5.32.1:  _Starting Time_ IE
The _Starting Time_ information element is coded and interpreted as defined in
TS 44.018 (excluding IEI).
## 5.33 Long Encryption Key IE
This element defines the 128 bit encryption key (Kc128) of the MS being
located.
* * *
8 7 6 5 4 3 2 1  
Element identifier octet 1  
Long Encryption Key (Kc128) octet 2-17
* * *
Figure 5.24.1: Long Encryption Key IE
The Long Encryption Key (Kc128) field contains the ciphering key to be used in
connection with encryption algorithm A5/4 as provided to the BSS by the MSC as
defined in TS 48.008.
## 5.34 Concurrent Positioning Flag
This element contains the current BSC capability of the second, concurrent,
independent location method. The coding is as follows:
* * *
8 7 6 5 4 3 2 1  
Element identifier Octet 1  
Concurrent Method Flag Octet 2
* * *
Figure 5.34.1: Concurrent Positioning IE
Table 5.34.1: Concurrent Method Flag Coding
* * *
Coding Element name 0000 0000 Second independent concurrent positioning
Allowed 1111 1111 Second independent concurrent positioning Disallowed NOTE:
All other values reserved
* * *
The combinations of first and second location procedures in concurrent
positioning are limited to the following:
Table 5.34.2: Allowed Concurrent Positioning Procedures
* * *
First Location Procedure Second Location Procedure TA Positioning MS
Positioning UTDOA Positioning MS Positioning MS Positioning TA Positioning MS
Positioning U-TDOA Positioning
* * *
#