# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# 1 Scope
The present document provides the description of the Packet Data Convergence
Protocol (PDCP).
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or nonâ€‘specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the > case of a reference to a 3GPP document (including a GSM document), > a non-specific reference implicitly refers to the latest version > of that document _in the same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TS 36.300: \"Evolved Universal Terrestrial Radio Access (E-UTRA) and
Evolved Universal Terrestrial Radio Access Network (E-UTRAN); Overall
description\".
[3] 3GPP TS 36.331: \"Evolved Universal Terrestrial Radio Access (E-UTRA)
Radio Resource Control (RRC); Protocol Specification\".
[4] 3GPP TS 36.321: \"Evolved Universal Terrestrial Radio Access (E-UTRA)
Medium Access Control (MAC) protocol specification\".
[5] 3GPP TS 36.322: \"Evolved Universal Terrestrial Radio Access (E-UTRA)
Radio Link Control (RLC) protocol specification\".
[6] 3GPP TS 33.401: \"3GPP System Architecture Evolution: Security
Architecture\".
[7] IETF RFC 4995: \"The RObust Header Compression (ROHC) Framework\".
[8] IETF RFC 4996: \"RObust Header Compression (ROHC): A Profile for TCP/IP
(ROHC-TCP)\".
[9] IETF RFC 3095: \"RObust Header Compression (ROHC): Framework and four
profiles: RTP, UDP, ESP and uncompressed\".
[10] IETF RFC 3843: \"RObust Header Compression (ROHC): A Compression Profile
for IP\".
[11] IETF RFC 4815: \"RObust Header Compression (ROHC): Corrections and
Clarifications to RFC 3095\".
[12] IETF RFC 5225: \"RObust Header Compression (ROHC) Version 2: Profiles for
RTP, UDP, IP, ESP and UDP Lite".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the terms and definitions given in
TR 21.905 [1] and the following apply. A term defined in the present document
takes precedence over the definition of the same term, if any, in TR 21.905
[1].
## 3.2 Abbreviations
For the purposes of the present document, the abbreviations given in TR 21.905
[1] and the following apply. An abbreviation defined in the present document
takes precedence over the definition of the same abbreviation, if any, in TR
21.905 [1].
AM Acknowledged Mode
CID Context Identifier
DRB Data Radio Bearer carrying user plane data
EPS Evolved Packet System
E-UTRA Evolved UMTS Terrestrial Radio Access
E-UTRAN Evolved UMTS Terrestrial Radio Access Network
eNB E-UTRAN Node B
FMS First missing PDCP SN
HFN Hyper Frame Number
IETF Internet Engineering Task Force
IP Internet Protocol
L2 Layer 2 (data link layer)
L3 Layer 3 (network layer)
MAC Medium Access Control
MAC-I Message Authentication Code for Integrity
PDCP Packet Data Convergence Protocol
PDU Protocol Data Unit
R Reserved
RB Radio Bearer
RFC Request For Comments
RLC Radio Link Control
ROHC RObust Header Compression
RRC Radio Resource Control
RTP Real Time Protocol
SAP Service Access Point
SDU Service Data Unit
SN Sequence Number
SRB Signalling Radio Bearer carrying control plane data
TCP Transmission Control Protocol
UDP User Datagram Protocol
UE User Equipment
UM Unacknowledged Mode
X-MAC Computed MAC-I
# 4 General
## 4.1 Introduction
The present document describes the functionality of the PDCP.
## 4.2 PDCP architecture
### 4.2.1 PDCP structure
Figure 4.2.1.1 represents one possible structure for the PDCP sublayer; it
should not restrict implementation. The figure is based on the radio interface
protocol architecture defined in [2].
Figure 4.2.1.1 - PDCP layer, structure view
Each RB (i.e. DRB and SRB, except for SRB0) is associated with one PDCP
entity. Each PDCP entity is associated with one or two (one for each
direction) RLC entities depending on the RB characteristic (i.e. uni-
directional or bi-directional) and RLC mode. The PDCP entities are located in
the PDCP sublayer.
The PDCP sublayer is configured by upper layers [3].
### 4.2.2 PDCP entities
The PDCP entities are located in the PDCP sublayer. Several PDCP entities may
be defined for a UE. Each PDCP entity carrying user plane data may be
configured to use header compression.
Each PDCP entity is carrying the data of one radio bearer. In this version of
the specification, only the robust header compression protocol (ROHC), is
supported. Every PDCP entity uses at most one ROHC instance.
A PDCP entity is associated either to the control plane or the user plane
depending on which radio bearer it is carrying data for.
Figure 4.2.2.1 represents the functional view of the PDCP entity for the PDCP
sublayer; it should not restrict implementation. The figure is based on the
radio interface protocol architecture defined in [2].
Figure 4.2.2.1 - PDCP layer, functional view
## 4.3 Services
### 4.3.1 Services provided to upper layers
PDCP provides its services to the RRC and user plane upper layers at the UE or
to the relay at the evolved Node B (eNB). The following services are provided
by PDCP to upper layers:
\- transfer of user plane data;
\- transfer of control plane data;
\- header compression;
\- ciphering;
\- integrity protection.
The maximum supported size of a PDCP SDU is 8188 octets.
### 4.3.2 Services expected from lower layers
For a detailed description of the following functions see [5].
\- acknowledged data transfer service, including indication of successful
delivery of PDCP PDUs;
\- unacknowledged data transfer service;
\- in-sequence delivery, except at re-establishment of lower layers;
\- duplicate discarding, except at re-establishment of lower layers.
## 4.4 Functions
The Packet Data Convergence Protocol supports the following functions:
\- header compression and decompression of IP data flows using the ROHC
protocol;
\- transfer of data (user plane or control plane);
\- maintenance of PDCP SNs;
\- in-sequence delivery of upper layer PDUs at re-establishment of lower
layers;
\- duplicate elimination of lower layer SDUs at re-establishment of lower
layers for radio bearers mapped on RLC AM;
\- ciphering and deciphering of user plane data and control plane data;
\- integrity protection and integrity verification of control plane data;
\- timer based discard;
\- duplicate discarding.
PDCP uses the services provided by the RLC sublayer.
PDCP is used for SRBs and DRBs mapped on DCCH and DTCH type of logical
channels. PDCP is not used for any other type of logical channels.
## 4.5 Data available for transmission
For the purpose of MAC buffer status reporting, the UE shall consider PDCP
Control PDUs, as well as the following as data available for transmission in
the PDCP layer:
> For SDUs for which no PDU has been submitted to lower layers:
  * the SDU itself, if the SDU has not yet been processed by PDCP, or
  * the PDU if the SDU has been processed by PDCP.
In addition, for radio bearers that are mapped on RLC AM, if the PDCP entity
has previously performed the re-establishment procedure, the UE shall also
consider the following as data available for transmission in the PDCP layer:
> For SDUs for which a corresponding PDU has only been submitted to lower
> layers prior to the PDCP re-establishment, starting from the first SDU for
> which the delivery of the corresponding PDUs has not been confirmed by the
> lower layer, except the SDUs which are indicated as successfully delivered
> by the PDCP status report, if received:
  * the SDU, if it has not yet been processed by PDCP, or
  * the PDU once it has been processed by PDCP.
# 5 PDCP procedures
## 5.1 PDCP Data Transfer Procedures
### 5.1.1 UL Data Transfer Procedures
At reception of a PDCP SDU from upper layers, the UE shall:
\- start the _discardTimer_ associated with this PDCP SDU (if configured);
For a PDCP SDU received from upper layers, the UE shall:
\- associate the PDCP SN corresponding to Next_PDCP_TX_SN to this PDCP SDU;
\- perform header compression of the PDCP SDU (if configured) as specified in
the subclause 5.5.4;
\- perform integrity protection (if applicable), and ciphering (if applicable)
using COUNT based on TX_HFN and the PDCP SN associated with this PDCP SDU as
specified in the subclause 5.7 and 5.6, respectively;
\- increment Next_PDCP_TX_SN by one;
\- if Next_PDCP_TX_SN > Maximum_PDCP_SN:
\- set Next_PDCP_TX_SN to 0;
\- increment TX_HFN by one;
\- submit the resulting PDCP Data PDU to lower layer.
### 5.1.2 DL Data Transfer Procedures
#### 5.1.2.1 Procedures for DRBs
##### 5.1.2.1.1 Void
##### 5.1.2.1.2 Procedures for DRBs mapped on RLC AM
For DRBs mapped on RLC AM, at reception of a PDCP Data PDU from lower layers,
the UE shall:
\- if received PDCP SN -- Last_Submitted_PDCP_RX_SN > Reordering_Window or 0
\ Next_PDCP_RX_SN:
\- decipher the PDCP PDU as specified in the subclause 5.6, using COUNT based
on RX_HFN - 1 and the received PDCP SN;
\- else:
\- decipher the PDCP PDU as specified in the subclause 5.6, using COUNT based
on RX_HFN and the received PDCP SN;
\- perform header decompression (if configured) as specified in the subclause
5.5.5;
\- discard this PDCP SDU;
\- else if Next_PDCP_RX_SN -- received PDCP SN > Reordering_Window:
\- increment RX_HFN by one;
\- use COUNT based on RX_HFN and the received PDCP SN for deciphering the PDCP
PDU;
\- set Next_PDCP_RX_SN to the received PDCP SN + 1;
\- else if received PDCP SN -- Next_PDCP_RX_SN >= Reordering_Window:
\- use COUNT based on RX_HFN -- 1 and the received PDCP SN for deciphering the
PDCP PDU;
\- else if received PDCP SN >= Next_PDCP_RX_SN:
\- use COUNT based on RX_HFN and the received PDCP SN for deciphering the PDCP
PDU;
\- set Next_PDCP_RX_SN to the received PDCP SN + 1;
\- if Next_PDCP_RX_SN is larger than Maximum_PDCP_SN:
\- set Next_PDCP_RX_SN to 0;
\- increment RX_HFN by one;
\- else if received PDCP SN \ Maximum_PDCP_SN:
\- set Next_PDCP_RX_SN to 0;
\- increment RX_HFN by one;
\- perform header decompression (if configured) of the deciphered PDCP Data
PDU as specified in the subclause 5.5.5;
\- deliver the resulting PDCP SDU to upper layer.
#### 5.1.2.2 Procedures for SRBs
For SRBs, at reception of a PDCP Data PDU from lower layers, the UE shall:
\- if received PDCP SN \ Maximum_PDCP_SN:
\- set Next_PDCP_RX_SN to 0;
\- increment RX_HFN by one;
\- deliver the resulting PDCP SDU to upper layer;
\- else, if integrity verification is applicable and the integrity
verification fails:
\- discard the received PDCP Data PDU;
\- indicate the integrity verification failure to upper layer.
## 5.2 Re-establishment procedure
When upper layers request a PDCP re-establishment, the UE shall additionally
perform once the procedures described in this section for the corresponding
RLC mode. After performing the procedures in this section, the UE shall follow
the procedures in subclause 5.1.
### 5.2.1 UL Data Transfer Procedures
#### 5.2.1.1 Procedures for DRBs mapped on RLC AM
When upper layers request a PDCP re-establishment, the UE shall:
\- reset the header compression protocol for uplink (if configured);
\- apply the ciphering algorithm and key provided by upper layers during the
re-establishment procedure;
\- from the first PDCP SDU for which the successful delivery of the
corresponding PDCP PDU has not been confirmed by lower layers, perform
retransmission or transmission of all the PDCP SDUs already associated with
PDCP SNs in ascending order of the COUNT values associated to the PDCP SDU
prior to the PDCP re-establishment as specified below:
\- perform header compression of the PDCP SDU (if configured) as specified in
the subclause 5.5.4;
\- perform ciphering of the PDCP SDU using the COUNT value associated with
this PDCP SDU as specified in the subclause 5.6;
\- submit the resulting PDCP Data PDU to lower layer.
#### 5.2.1.2 Procedures for DRBs mapped on RLC UM
When upper layers request a PDCP re-establishment, the UE shall:
\- reset the header compression protocol for uplink (if configured);
\- set Next_PDCP_TX_SN, and TX_HFN to 0;
\- apply the ciphering algorithm and key provided by upper layers during the
re-establishment procedure;
\- for each PDCP SDU already associated with a PDCP SN but for which a
corresponding PDU has not previously been submitted to lower layers:
\- consider the PDCP SDUs as received from upper layer;
\- perform transmission of the PDCP SDUs in ascending order of the COUNT value
associated to the PDCP SDU prior to the PDCP re-establishment, as specified in
the subclause 5.1.1 without restarting the _discardTimer_.
#### 5.2.1.3 Procedures for SRBs
When upper layers request a PDCP re-establishment, the UE shall:
\- set Next_PDCP_TX_SN, and TX_HFN to 0;
\- discard all stored PDCP SDUs and PDCP PDUs;
\- apply the ciphering and integrity protection algorithms and keys provided
by upper layers during the re-establishment procedure.
### 5.2.2 DL Data Transfer Procedures
#### 5.2.2.1 Procedures for DRBs mapped on RLC AM
When upper layers request a PDCP re-establishment, the UE shall:
\- process the PDCP Data PDUs that are received from lower layers due to the
re-establishment of the lower layers, as specified in the subclause 5.1.2.1.2;
\- reset the header compression protocol for downlink (if configured);
\- apply the ciphering algorithm and key provided by upper layers during the
re-establishment procedure.
#### 5.2.2.2 Procedures for DRBs mapped on RLC UM
When upper layers request a PDCP re-establishment, the UE shall:
\- process the PDCP Data PDUs that are received from lower layers due to the
re-establishment of the lower layers, as specified in the subclause 5.1.2.1.3;
\- reset the header compression protocol for downlink (if configured);
\- set Next_PDCP_RX_SN, and RX_HFN to 0;
\- apply the ciphering algorithm and key provided by upper layers during the
re-establishment procedure.
#### 5.2.2.3 Procedures for SRBs
When upper layers request a PDCP re-establishment, the UE shall:
\- discard the PDCP Data PDUs that are received from lower layers due to the
re-establishment of the lower layers;
\- set Next_PDCP_RX_SN, and RX_HFN to 0;
\- discard all stored PDCP SDUs and PDCP PDUs;
\- apply the ciphering and integrity protection algorithms and keys provided
by upper layers during the re-establishment procedure.
## 5.3 PDCP Status Report
### 5.3.1 Transmit operation
When upper layers request a PDCP re-establishment, for radio bearers that are
mapped on RLC AM, the UE shall:
\- if the radio bearer is configured by upper layers to send a PDCP status
report in the uplink (_statusReportRequired_ [3]), compile a status report as
indicated below after processing the PDCP Data PDUs that are received from
lower layers due to the re-establishment of the lower layers as specified in
the subclause 5.2.2.1, and submit it to lower layers as the first PDCP PDU for
the transmission, by:
\- setting the FMS field to the PDCP SN of the first missing PDCP SDU;
\- if there is at least one out-of-sequence PDCP SDU stored, allocating a
Bitmap field of length in bits equal to the number of PDCP SNs from and not
including the first missing PDCP SDU up to and including the last out-of-
sequence PDCP SDUs, rounded up to the next multiple of 8;
\- setting as '0' in the corresponding position in the bitmap field for all
PDCP SDUs that have not been received as indicated by lower layers, and
optionally PDCP SDUs for which decompression have failed;
\- indicating in the bitmap field as '1' for all other PDCP SDUs.
### 5.3.2 Receive operation
When a PDCP status report is received in the downlink, for radio bearers that
are mapped on RLC AM:
\- for each PDCP SDU, if any, with the bit in the bitmap set to \'1\', or with
the associated COUNT value less than the COUNT value of the PDCP SDU
identified by the FMS field, the successful delivery of the corresponding PDCP
SDU is confirmed, and the UE shall process the PDCP SDU as specified in the
subclause 5.4.
## 5.4 PDCP discard
When the _discardTimer_ expires for a PDCP SDU, or the successful delivery of
a PDCP SDU is confirmed by PDCP status report, the UE shall discard the PDCP
SDU along with the corresponding PDCP PDU. If the corresponding PDCP PDU has
already been submitted to lower layers the discard is indicated to lower
layers.
## 5.5 Header Compression and Decompression
### 5.5.1 Supported header compression protocols and profiles
The header compression protocol is based on the Robust Header Compression
(ROHC) framework [7]. There are multiple header compression algorithms, called
profiles, defined for the ROHC framework. Each profile is specific to the
particular network layer, transport layer or upper layer protocol combination
e.g. TCP/IP and RTP/UDP/IP.
The detailed definition of the ROHC channel is specified as part of the ROHC
framework in RFC 4995 [7]. This includes how to multiplex different flows
(header compressed or not) over the ROHC channel, as well as how to associate
a specific IP flow with a specific context state during initialization of the
compression algorithm for that flow.
The implementation of the functionality of the ROHC framework and of the
functionality of the supported header compression profiles is not covered in
this specification.
In this version of the specification the support of the following profiles is
described:
Table 5.5.1.1: Supported header compression protocols and profiles
* * *
Profile Identifier Usage: Reference 0x0000 No compression RFC 4995 0x0001
RTP/UDP/IP RFC 3095, RFC 4815 0x0002 UDP/IP RFC 3095, RFC 4815 0x0003 ESP/IP
RFC 3095, RFC 4815 0x0004 IP RFC 3843, RFC 4815 0x0006 TCP/IP RFC 4996 0x0101
RTP/UDP/IP RFC 5225 0x0102 UDP/IP RFC 5225 0x0103 ESP/IP RFC 5225 0x0104 IP
RFC 5225
* * *
### 5.5.2 Configuration of header compression
PDCP entities associated with DRBs can be configured by upper layers [3] to
use header compression.
### 5.5.3 Protocol parameters
RFC 4995 has configuration parameters that are mandatory and that must be
configured by upper layers between compressor and decompressor peers [7];
these parameters define the ROHC channel. The ROHC channel is a unidirectional
channel, i.e. there is one channel for the downlink, and one for the uplink.
There is thus one set of parameters for each channel, and the same values
shall be used for both channels belonging to the same PDCP entity.
These parameters are categorized in two different groups, as defined below:
\- M: Mandatory and configured by upper layers.
\- N/A: Not used in this specification.
The usage and definition of the parameters shall be as specified below.
\- MAX_CID (M): This is the maximum CID value that can be used. One CID value
shall always be reserved for uncompressed flows. The parameter MAX_CID is
configured by upper layers (_maxCID_ [3]).
\- LARGE_CIDS: This value is not configured by upper layers, but rather it is
inferred from the configured value of MAX_CID according to the following rule:
If MAX_CID > 15 then LARGE_CIDS = TRUE else LARGE_CIDS = FALSE.
\- PROFILES (M): Profiles are used to define which profiles are allowed to be
used by the UE. The list of supported profiles is described in section 5.5.1.
The parameter PROFILES is configured by upper layers (_profiles_ [3]).
\- FEEDBACK_FOR (N/A): This is a reference to the channel in the opposite
direction between two compression endpoints and indicates to what channel any
feedback sent refers to. Feedback received on one ROHC channel for this PDCP
entity shall always refer to the ROHC channel in the opposite direction for
this same PDCP entity.
\- MRRU (N/A): ROHC segmentation is not used.
### 5.5.4 Header compression
The header compression protocol generates two types of output packets:
\- compressed packets, each associated with one PDCP SDU
\- standalone packets not associated with a PDCP SDU, i.e. interspersed ROHC
feedback packets
A compressed packet is associated with the same PDCP SN and COUNT value as the
related PDCP SDU.
Interspersed ROHC feedback packets are not associated with a PDCP SDU. They
are not associated with a PDCP SN and are not ciphered.
### 5.5.5 Header decompression
If header compression is configured by upper layers for PDCP entities
associated with u-plane data the PDCP PDUs are de-compressed by the header
compression protocol after performing deciphering as explained in the
subclause 5.6.
## 5.6 Ciphering and Deciphering
The ciphering function includes both ciphering and deciphering and is
performed in PDCP. For the control plane, the data unit that is ciphered is
the data part of the PDCP PDU (see subclause 6.3.3) and the MAC-I (see
subclause 6.3.4). For the user plane, the data unit that is ciphered is the
data part of the PDCP PDU (see subclause 6.3.3); ciphering is not applicable
to PDCP Control PDUs.
The ciphering algorithm and key to be used by the PDCP entity are configured
by upper layers [3] and the ciphering method shall be applied as specified in
[6].
The ciphering function is activated by upper layers [3]. After security
activation, the ciphering function shall be applied to all PDCP PDUs indicated
by upper layers [3] for the downlink and the uplink, respectively.
The parameters that are required by PDCP for ciphering are defined in [6] and
are input to the ciphering algorithm. The required inputs to the ciphering
function include the COUNT value, and DIRECTION (direction of the
transmission: set as specified in [6]).The parameters required by PDCP which
are provided by upper layers [3] are listed below:
\- BEARER (defined as the radio bearer identifier in [6]. It will use the
value RB identity --1 as in [3]);
\- KEY (the ciphering keys for **the control plane and for the user plane
are** K~RRCenc~ and K~UPenc~, respectively).
## 5.7 Integrity Protection and Verification
The integrity protection function includes both integrity protection and
integrity verification and is performed in PDCP for PDCP entities associated
with SRBs. The data unit that is integrity protected is the PDU header and the
data part of the PDU before ciphering.
The integrity protection algorithm and key to be used by the PDCP entity are
configured by upper layers [3] and the integrity protection method shall be
applied as specified in [6].
The integrity protection function is activated by upper layers [3]. After
security activation, the integrity protection function shall be applied to all
PDUs including and subsequent to the PDU indicated by upper layers [3] for the
downlink and the uplink, respectively.
NOTE: As the RRC message which activates the integrity protection function is
itself integrity protected with the configuration included in this RRC
message, this message needs first be decoded by RRC before the integrity
protection verification could be performed for the PDU in which the message
was received.
The parameters that are required by PDCP for integrity protection are defined
in [6] and are input to the integrity protection algorithm. The required
inputs to the integrity protection function include the COUNT value, and
DIRECTION (direction of the transmission: set as specified in [6]). The
parameters required by PDCP which are provided by upper layers [3] are listed
below:
\- BEARER (defined as the radio bearer identifier in [6]. It will use the
value RB identity --1 as in [3]);
\- KEY (K~RRCint~).
At transmission, the UE computes the value of the MAC-I field and at reception
it verifies the integrity of the PDCP PDU by calculating the X-MAC based on
the input parameters as specified above. If the calculated X-MAC corresponds
to the received MAC-I, integrity protection is verified successfully.
## 5.8 Handling of unknown, unforeseen and erroneous protocol data
When a PDCP entity receives a PDCP PDU that contains reserved or invalid
values, the PDCP entity shall:
\- discard the received PDU.
# 6 Protocol data units, formats and parameters
## 6.1 Protocol data units
### 6.1.1 PDCP Data PDU
The PDCP Data PDU is used to convey:
\- a PDCP SDU SN; and
\- user plane data containing an uncompressed PDCP SDU; or
\- user plane data containing a compressed PDCP SDU; or
\- control plane data; and
\- a MAC-I field for SRBs only;
### 6.1.2 PDCP Control PDU
The PDCP Control PDU is used to convey:
\- a PDCP status report indicating which PDCP SDUs are missing and which are
not following a PDCP re-establishment.
\- header compression control information, e.g. interspersed ROHC feedback.
## 6.2 Formats
### 6.2.1 General
A PDCP PDU is a bit string that is byte aligned (i.e. multiple of 8 bits) in
length. In the figures in sub clause 6.2, bit strings are represented by
tables in which the most significant bit is the leftmost bit of the first line
of the table, the least significant bit is the rightmost bit on the last line
of the table, and more generally the bit string is to be read from left to
right and then in the reading order of the lines. The bit order of each
parameter field within a PDCP PDU is represented with the first and most
significant bit in the leftmost bit and the last and least significant bit in
the rightmost bit.
PDCP SDUs are bit strings that are byte aligned (i.e. multiple of 8 bits) in
length. A compressed or uncompressed SDU is included into a PDCP PDU from the
first bit onward.
### 6.2.2 Control plane PDCP Data PDU
Figure 6.2.2.1 shows the format of the PDCP Data PDU carrying data for control
plane SRBs.
Figure 6.2.2.1: PDCP Data PDU format for SRBs
### 6.2.3 User plane PDCP Data PDU with long PDCP SN (12 bits)
Figure 6.2.3.1 shows the format of the PDCP Data PDU when a 12 bit SN length
is used. This format is applicable for PDCP Data PDUs carrying data from DRBs
mapped on RLC AM or RLC UM.
Figure 6.2.3.1: PDCP Data PDU format for DRBs using a 12 bit SN
### 6.2.4 User plane PDCP Data PDU with short PDCP SN (7 bits)
Figure 6.2.4.1 shows the format of the PDCP Data PDU when a 7 bit SN length is
used. This format is applicable for PDCP Data PDUs carrying data from DRBs
mapped on RLC UM.
Figure 6.2.4.1: PDCP Data PDU format for DRBs using 7 bit SN
### 6.2.5 PDCP Control PDU for interspersed ROHC feedback packet
Figure 6.2.5.1 shows the format of the PDCP Control PDU carrying one
interspersed ROHC feedback packet. This format is applicable for DRBs mapped
on RLC AM or RLC UM.
Figure 6.2.5.1: PDCP Control PDU format for interspersed ROHC feedback packet
### 6.2.6 PDCP Control PDU for PDCP status report
Figure 6.2.6.1 shows the format of the PDCP Control PDU carrying one PDCP
status report. This format is applicable for DRBs mapped on RLC AM.
Figure 6.2.6.1: PDCP Control PDU format for PDCP status report
### 6.2.7 Void
## 6.3 Parameters
### 6.3.1 General
If not otherwise mentioned in the definition of each field then the bits in
the parameters shall be interpreted as follows: the left most bit string is
the first and most significant and the right most bit is the last and least
significant bit.
Unless otherwise mentioned, integers are encoded in standard binary encoding
for unsigned integers. In all cases the bits appear ordered from MSB to LSB
when read in the PDU.
### 6.3.2 PDCP SN
Length: 5, 7 or 12 bits as indicated in table 6.3.2.1.
Table 6.3.2.1: PDCP SN length
* * *
Length Description 5 SRBs 7 DRBs, if configured by upper layers (_pdcp-SN-
Size_ [3]) 12 DRBs, if configured by upper layers (_pdcp-SN-Size_ [3])
* * *
### 6.3.3 Data
Length: Variable
The Data field may include either one of the following:
\- Uncompressed PDCP SDU (user plane data, or control plane data); or
\- Compressed PDCP SDU (user plane data only).
### 6.3.4 MAC-I
Length: 32 bits
The MAC-I field carries a message authentication code calculated as specified
in subclause 5.7.
For control plane data that are not integrity protected, the MAC-I field is
still present and should be padded with padding bits set to 0.
### 6.3.5 COUNT
Length: 32 bits
For ciphering and integrity a COUNT value is maintained. The COUNT value is
composed of a HFN and the PDCP SN. The length of the PDCP SN is configured by
upper layers.
Figure 6.3.5.1: Format of COUNT
The size of the HFN part in bits is equal to 32 minus the length of the PDCP
SN.
NOTE: When performing comparison of values related to COUNT, the UE takes into
account that COUNT is a 32-bit value, which may wrap around (e.g., COUNT value
of 2^32^ - 1 is less than COUNT value of 0).
### 6.3.6 R
Length: 1 bit
Reserved. In this version of the specification reserved bits shall be set to
0. Reserved bits shall be ignored by the receiver.
### 6.3.7 D/C
Length: 1 bit
Table 6.3.7.1: D/C field
* * *
Bit Description 0 Control PDU 1 Data PDU
* * *
### 6.3.8 PDU type
Length: 3 bits
Table 6.3.8.1: PDU type
* * *
Bit Description 000 PDCP status report 001 Interspersed ROHC feedback packet
010-111 reserved
* * *
### 6.3.9 FMS
Length: 12 bits
PDCP SN of the first missing PDCP SDU.
### 6.3.10 Bitmap
Length: Variable
The length of the bitmap field can be 0.
The MSB of the first octet of the type \"Bitmap\" indicates whether or not the
PDCP SDU with the SN (FMS + 1) modulo 4096 has been received and, optionally
decompressed correctly. The LSB of the first octet of the type \"Bitmap\"
indicates whether or not the PDCP SDU with the SN (FMS + 8) modulo 4096 has
been received and, optionally decompressed correctly.
Table 6.3.10.1 Bitmap
+-----+---------------------------------------------------------------+ | Bit | Description | +-----+---------------------------------------------------------------+ | > 0 | PDCP SDU with PDCP SN = (FMS + bit position) modulo 4096 is | | | missing in the receiver. The bit position of N^th^ bit in the | | | Bitmap is N, i.e., the bit position of the first bit in the | | | Bitmap is 1. | +-----+---------------------------------------------------------------+ | 1 | PDCP SDU with PDCP SN = (FMS + bit position) modulo 4096 does | | | not need to be retransmitted. The bit position of N^th^ bit | | | in the Bitmap is N, i.e., the bit position of the first bit | | | in the Bitmap is 1. | +-----+---------------------------------------------------------------+
The UE fills the bitmap indicating which SDUs are missing (unset bit - '0'),
i.e. whether an SDU has not been received or optionally has been received but
has not been decompressed correctly, and which SDUs do not need retransmission
(set bit - '1'), i.e. whether an SDU has been received correctly and may or
may not have been decompressed correctly.
### 6.3.11 Interspersed ROHC feedback packet
Length: Variable
Contains one ROHC packet with only feedback, i.e. a ROHC packet that is not
associated with a PDCP SDU as defined in subclause 5.5.4.
# 7 Variables, constants and timers
## 7.1 State variables
This sub clause describes the state variables used in PDCP entities in order
to specify the PDCP protocol.
All state variables are non-negative integers.
The transmitting side of each PDCP entity shall maintain the following state
variables:
a) Next_PDCP_TX_SN
The variable Next_PDCP_TX_SN indicates the PDCP SN of the next PDCP SDU for a
given PDCP entity. At establishment of the PDCP entity, the UE shall set
Next_PDCP_TX_SN to 0.
b) TX_HFN
The variable TX_HFN indicates the HFN value for the generation of the COUNT
value used for PDCP PDUs for a given PDCP entity. At establishment of the PDCP
entity, the UE shall set TX_HFN to 0.
The receiving side of each PDCP entity shall maintain the following state
variables:
c) Next_PDCP_RX_SN
The variable Next_PDCP_RX_SN indicates the next expected PDCP SN by the
receiver for a given PDCP entity. At establishment of the PDCP entity, the UE
shall set Next_PDCP_RX_SN to 0.
d) RX_HFN
The variable RX_HFN indicates the HFN value for the generation of the COUNT
value used for the received PDCP PDUs for a given PDCP entity. At
establishment of the PDCP entity, the UE shall set RX_HFN to 0.
e) Last_Submitted_PDCP_RX_SN
For PDCP entities for DRBs mapped on RLC AM the variable
Last_Submitted_PDCP_RX_SN indicates the SN of the last PDCP SDU delivered to
the upper layers. At establishment of the PDCP entity, the UE shall set
Last_Submitted_PDCP_RX_SN to 4095.
## 7.2 Timers
The transmitting side of each PDCP entity for DRBs shall maintain the
following timers:
a) _discardTimer_
The duration of the timer is configured by upper layers [3]. In the
transmitter, a new timer is started upon reception of an SDU from upper layer.
## 7.3 Constants
a) Reordering_Window
Indicates the size of the reordering window. The size equals to 2048, i.e.
half of the PDCP SN space, for radio bearers that are mapped on RLC AM.
b) Maximum_PDCP_SN is:
\- 4095 if the PDCP entity is configured for the use of 12 bit SNs
\- 127 if the PDCP entity is configured for the use of 7 bit SNs
\- 31 if the PDCP entity is configured for the use of 5 bit SNs
#