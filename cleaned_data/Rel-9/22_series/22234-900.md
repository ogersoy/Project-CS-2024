# Foreword
This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the
TSG and may change following formal TSG approval. Should the TSG modify the
contents of the present document, it will be re-released by the TSG with an
identifying change of release date and an increase in version number as
follows:
Version x.y.z
where:
x the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical
enhancements, corrections, updates, etc.
z the third digit is incremented when editorial only changes have been
incorporated in the document.
# Introduction
Interworking of WLAN systems with the 3GPP system was the subject of a
feasibility study [2]. Suitable requirements were derived and incorporated
into existing specifications. For this release, all requirements will be
contained in the present document with suitable references in other
specifications to guide the reader to I-WLAN requirements.
# 1 Scope
The present document specifies the functional requirements placed on the 3GPP
system for interworking WLAN with the 3GPP system. Guidance is given for WLAN
operators intending to provide the interworked WLAN capability.
# 2 References
The following documents contain provisions which, through reference in this
text, constitute provisions of the present document.
  * References are either specific (identified by date of publication, > edition number, version number, etc.) or non‑specific.
  * For a specific reference, subsequent revisions do not apply.
  * For a non-specific reference, the latest version applies. In the > case of a reference to a 3GPP document (including a GSM document), > a non-specific reference implicitly refers to the latest version > of that document _in the same Release as the present document_.
[1] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".
[2] 3GPP TR 22.934 (V6): \"Feasibility study on 3GPP system to Wireless Local
Area Network (WLAN) interworking\".
[3] RFC 2486: \"The Network Access Identifier\".
[4] 3GPP TS 22.101: \"Service principles\".
[5] 3GPP TS 22.129: \"Handover Requirements between UTRAN and GERAN or other
Radio Systems\".
[6] 3GPP TS 22.071: \"Location Services (LCS); Stage1\".
[7] 3GPP TR 22.935: \"Feasibility Study on Location Services (LCS) for
Interworking-WLAN\".
# 3 Definitions and abbreviations
## 3.1 Definitions
For the purposes of the present document, the following terms and definitions
apply
**3GPP-WLAN Interworking:** Used generically to refer to interworking between
the 3GPP system and the WLAN family of standards
**3GPP PS based services: All services transported by the 3GPP PS domain.**
**Environment:** The type of area to be covered by the WLAN network of a 3GPP-
WLAN interworking; e.g. public, corporate and residential
**Home WLAN:** The WLAN that is interworking with the HPLMN of the 3GPP-WLAN
interworking user
**Interworking WLAN:** WLAN that interworks with a 3GPP system**.**
**Offline Charging: See [1]**
**Online Charging: See [1]**
**Serving WLAN:** The interworking WLAN that the user is connected to, i.e.
either a visited or a home WLAN.
**Visited WLAN:** An interworking WLAN that interworks only with a visited
PLMN.
**WLAN coverage:** An area where wireless local area network access services
are provided for interworking by an entity in accordance with WLAN standards.
**WLAN roaming** : The ability for a 3GPP-WLAN interworking user (subscriber)
to function in a serving WLAN different from the home WLAN
## 3.2 Abbreviations
For the purposes of the present document, the following abbreviations apply:
APN Access Point Name
CDR Charging Data Record
CS Circuit Switched
GGSN Gateway GPRS Support Node
GPRS General Packet Radio Service
HPLMN Home PLMN
IMS IP Multimedia Subsystem
IP Internet Protocol
IPv4 IP version 4
IPv6 IP version 6
I-WLAN Interworked / interworking WLAN
LCS Location Services
PDG Packet Data Gateway
PLMN Public Land Mobile Network
PS Packet Switched
SIM Subscriber Identity Module
UE User Equipment
UICC USIM Integrated Circuit Card
USIM Universal Subscriber Identity Module
VPLMN Visited PLMN
WLAN Wireless Local Area Network
Further abbreviations are given in 3GPP TR 21.905 [1].
# 4 General description
The growth of public WLANs provides an opportunity for appropriately-equipped
UEs to access HPLMNs and VPLMNs via the WLANs. As shown in Figure 1, the WLANs
that provides this functionality are referred to as I-WLANs. The I-WLANs
(represented by WLAN 1 through WLAN 3) are connected to PLMNs, enabling UEs to
access 3GPP services on HPLMNs and VPLMNs. Services provided by WLANs directly
to UEs that do not involve PLMNs are outside the scope of this specification.
The solid lines identify elements that are within the 3GPP scope and the
dashed lines identify elements which are not specified by 3GPP.
{width="6.009722222222222in" height="3.5097222222222224in"}
Figure 1: WLAN-3GPP system block diagram
Network selection shall ensure that the user is connected to the highest
priority PLMN when the HPLMN is not available. As a consequence the preference
of an I-WLAN and connected PLMN may change from one country to another, even
when the I-WLAN identity is unchanged.
Only UEs with WLAN capability are within the scope of this specification.
It is expected that the UEs with both WLAN and 3GPP radio access network
capability will exist.
The access to the WLAN (as shown by the dashed line) is covered by
specifications outside of 3GPP. Thus UEs must conform to those specifications
to access the WLAN and to the 3GPP specifications in order to obtain 3GPP
services from PLMNs through I‑WLANs. The UE will have access to 3GPP services
when its registration is confirmed by its HPLMN.
NOTE: Detailed background information is provided in clause 4 of [2].
# 5 High level requirements
## 5.1 Service principles
### 5.1.1 Numbering
When the UE is connected via a I-WLAN, the addressing shall be based on
Network Access Identifier (NAI) format (user\@realm) as defined in RFC 2486
[3].
### 5.1.2 USIM and UICC
Access via an I-WLAN shall be possible using earlier releases (than the
current release) of the UICC or using a SIM.
Access to services via an I-WLAN with a single UICC shall be possible.
I-WLAN access parameters include operator and user preferences on network
selection. It shall be possible to store I-WLAN access parameters on the USIM.
For I-WLAN access and PLMN selection purposes, the WLAN UE shall by default
use the I-WLAN access parameters stored in the UICC (if they are available).
### 5.1.3 Roaming
Roaming from the home environment to I-WLANs is required. The I-WLAN may be
part of the home environment or a visited network. The interworking shall
support the case where a 3GPP operator does not operate the I-WLAN.
### 5.1.4 Charging
Charging in the 3GPP system shall not be compromised when access is via an
I-WLAN.
### 5.1.5 Subscription
The subscription to a network operator may identify the radio access
technologies over which the subscriber may access their services e.g. I-WLAN.
### 5.1.6 Emergency calls
Any attempt to make an emergency call shall be handled as defined in 3GPP TS
22.101[4].
### 5.1.7 Interworking between PLMN and WLANs
#### 5.1.7.1 General
WLAN-3GPP system interworking is defined as a wireless IP connectivity service
where the user obtains access via a Wireless LAN technology. It shall be
possible to deploy the WLAN as an integral part of the 3GPP system or the two
systems can be separate.
The 3GPP system shall be capable of interworking with one or more WLANs and a
WLAN shall be capable of interworking with one or more 3GPP systems see figure
2.
{width="6.308333333333334in" height="5.0159722222222225in"}
Figure 2: WLAN-3GPP system interworking relationships
The service is subject to a 3GPP system subscription (see clause 15). Both
IPv4 and IPv6 connectivity via a Wireless LAN (WLAN) shall be supported.
It is an operator decision as to the level of interworking supported. This can
be broadly grouped as:
\- 3GPP based access control and charging only. (Scenario 2 of TR 22.934 [2])
\- Access to 3GPP PS based services, e.g. IMS. (Scenario 3 of TR 22.934 [2])
\- Access to 3GPP PS based services with service continuity. The user may or
may not notice a disruption in service, depending upon the level of service
continuity supported. This is further defined in TS 22.129 [5]. (Scenarios 4
and 5 of TR 22.934 [2])
NOTE: Further information on these levels of interworking and the use cases
supported can be found in TR 22.934 [2].
The different levels of interworking supported are defined to be independent.
Hence, it shall be possible for a network operator to provide a particular
level of interworking independently to other levels of interworking.
NOTE: For example, it is possible for a network operator to provide a level of
interworking to provide access to 3GPP PS based services (Scenario 3 of TR
22.934 [2]) without needing to provide the level of interworking for 3GPP
based access control and charging (Scenario 2 of TR 22.934 [2]). In this case
3GPP USIM based authentication of the user is still needed before accessing
3GPP PS based services.
In addition to the general requirements on I-WLAN defined in the present
document, the following requirements apply:
\- When enabling access to 3GPP services that require separate authentication
and access control, such as IMS, the service authentication and access control
mechanisms for those services shall be used.
\- It should be possible to provide access via I-WLAN on deployed WLAN
devices.
#### 5.1.7.2 Simultaneous connection to I-WLANs and 3GPP systems
The 3GPP system shall support simultaneous connection to an I-WLAN and to the
3GPP systems for the following scenarios:
\- For an integrated WLAN/3GPP device the user shall be able to make or
receive a CS domain call without the need to drop the connection to the I-WLAN
and visa versa.
\- For an integrated WLAN/3GPP device the user shall be able to connect to
both the PS domain and to the I‑WLAN at the same time, to access different
services. For example, this will allow the user to access the Presence service
via the 3GPP system and the internet via the I-WLAN.
\- The user shall be able to connect simultaneously to the 3GPP system and the
I-WLAN with multiple devices (which have separate UICCs) on the same
subscription.
# 6 Service requirements
## 6.1 Network selection
The UE shall support both manual and automatic network selection mechanisms
(modes) as standardized.
The UE shall use the last network selection mode used, as the default mode, at
every switch-on.
The user shall be given the opportunity to change the network selection mode
at any time. As an optional feature of the ME, the user shall be able to set a
preference in the ME for the mode that shall be used at switch on. If set then
the ME shall select this preference rather than the default mode.
When selecting a PLMN that is accessed via an interworked WLAN the UE shall be
able to determine if the home or preferred PLMNs are available. The I-WLAN and
PLMN selection shall adhere to operator and end user preferences using similar
procedures as for Network Selection without WLAN interworking. This set of
preferences may be different from the preferences used for direct 3GPP access.
In manual network selection the user shall be able to request a list of
available PLMNs via interworked WLANs. The detailed procedures are described
below.
NOTE 1: The 3GPP operator may have agreements with multiple I-WLANs in the
area and has preference over which WLAN to connect to based on the services
supported.
NOTE 2: The adaptation of the Network Selection procedures to the WLAN
interworking environment should take into account performance criteria (e.g.
power consumption, network load).
NOTE 3: The preference of an I-WLAN and connected PLMN may change from one
country to another, even when the I-WLAN identity is unchanged.
### 6.1.1 PLMN selection procedures
**General**
For the purpose of selecting a PLMN two lists may be present in the UICC: the
\"User Controlled PLMN Selector list for I-WLAN\" and the \"Operator
Controlled PLMN Selector list for I-WLAN\". It is not mandatory for the UICC
to support these lists, however if the \"Operator Controlled PLMN Selector
list for I-WLAN\" is supported then the \"User Controlled PLMN Selector list
for I-WLAN\" shall also be present. Both lists contain the preferred PLMNs for
I-WLAN in priority order, and the \"User Controlled PLMN Selector list for
I-WLAN\" has higher priority than the \"Operator Controlled PLMN Selector list
for I-WLAN\". Where the UE supports these lists, it shall utilise all the
information stored in the USIM related to network selection, e.g. the
information in the Operator controlled PLMN Selector list for I-WLAN and the
User Controlled PLMN Selector list for I-WLAN.
The purpose of the procedure is to enable the WLAN UE to find an I-WLAN,
however, in case no PLMN is found to be supported by any of the available
WLANs, the behaviour of the UE is not specified.
For the purpose of selecting the preferred I-WLAN in case multiple I-WLANs can
support the connection to the desired PLMN and for optimising the PLMN
selection, two lists may be present in the UICC: the \"User Controlled WLAN
identities list for I-WLAN\" and the \"Operator Controlled WLAN identities
list for I-WLAN\". It is not mandatory for the UICC to support these lists,
however if the \"Operator Controlled WLAN identities list for I-WLAN\" is
supported then the \"User Controlled WLAN identities list for I-WLAN\" shall
also be present. Both lists contain the preferred WLAN identities in priority
order, and the \"User Controlled WLAN identities list for I-WLAN\" has higher
priority than the \"Operator Controlled WLAN identities list for I-WLAN\".
If the \"Operator Controlled PLMN Selector list for I-WLAN\" and the
\"Operator Controlled WLAN identities list for I-WLAN\" are present, it shall
be possible to efficiently update these lists over-the-air.
At switch on, when in coverage of the last accessed I-WLAN as stored in the
UE, the UE shall attempt to register with the last accessed PLMN via that
I-WLAN. As an option, if the UE finds that it is also in coverage of an I-WLAN
that is known to support HPLMN connectivity whilst searching for the last
accessed I-WLAN , the UE may attempt to register with that I-WLAN and then
attempt to register on the HPLMN. The HPLMN shall be able to control, by USIM
configuration, the UE behaviour.
The default behaviour for a UE is to select the last registered I-WLAN and
PLMN accessed via that I-WLAN.
**A) Automatic selection mode**
In the automatic mode the WLAN UE shall perform the following procedure:
1\. For each of the WLANs available the WLAN UE shall attempt to discover the
PLMNs available via the particular I-WLAN. If the UICC contains I-WLAN
identities\' preference lists, this initial step shall be done in the order of
the \"User Controlled WLAN identities list for I-WLAN\" and then the
\"Operator Controlled WLAN identities list for I-WLAN\". For each I-WLAN, if
the WLAN UE receives a list of available PLMNs, then
1a) The UE shall select an EHPLMN if the EHPLMN list is present or the HPLMN
(derived from the IMSI) if the EHPLMN list is not present. In the case that
there are multiple EHPLMNs present then the highest priority EHPLMN shall be
selected
1b) If the HPLMN is not found, the UE creates a list of PLMNs accessible over
the particular WLAN
2\. Among all the PLMNs obtained in step 1b), select a PLMN following this
order:
i) PLMNs contained in the \" User Controlled PLMN Selector list for I-WLAN\"
data file in the USIM in priority order, if the list is available;
ii) PLMNs contained in the \"Operator Controlled PLMN Selector list for I-WLAN
\" data file in the USIM in priority order, if the list is available;
iii) PLMNs contained in the \"User Controlled PLMN Selector list with access
technology\", if available;
iv) PLMNs contained in the \"Operator Controlled PLMN Selector list with
access technology\", if available;
v) PLMNs contained in the optional \"User Controlled PLMN Selector list for
I-WLAN \" in the ME in priority order, if the list is available;
vi) PLMNs contained in the optional \"Operator Controlled PLMN Selector list
for I-WLAN \" in the ME in priority order, if the list is available;
vii) any other PLMN not included in the lists (randomly)
3\. Attempt association with the highest priority I-WLAN in the I-WLAN
identities\' preference list (if available) providing connection to the PLMN
selected in step 2 and attempt authentication with the selected PLMN.
**B) Manual selection mode**
In manual selection mode the WLAN UE shall perform the following procedure:
1\. For each of the available WLANs the WLAN UE shall attempt to discover the
PLMNs available via the particular WLAN.
2\. If the WLAN UE receives a list of available PLMNs, then the WLAN UE
presents the available PLMNs in the following order:
i) HPLMN (if the EHPLMN list is not present); or if one or more of the EHPLMNs
are available then based on an optional data field on the USIM either the
availability of the highest priority EHPLMN is to be presented to the user or
all available EHPLMNs are presented to the user in priority order; if the data
field is not present, then only the availability of the highest priority
EHPLMN is presented;
ii) PLMNs contained in the \" User Controlled PLMN Selector list for I-WLAN \"
data file in the USIM in priority order, if the list is available;
iii) PLMNs contained in the \"Operator Controlled PLMN Selector list for
I-WLAN \" data file in the USIM in priority order, if the list is available;
iv) PLMNs contained in the \"User Controlled PLMN Selector list with access
technology\", if available;
v) PLMNs contained in the \"Operator Controlled PLMN Selector list with access
technology\", if available;
vi) PLMNs contained in the optional \"User Controlled PLMN Selector list for
I-WLAN \" in the ME in priority order, if the list is available;
vii) PLMNs contained in the optional \"Operator Controlled PLMN Selector list
for I-WLAN \" in the ME in priority order, if the list is available;
viii) any other PLMN not included in the lists (in random order)
In case more than one I-WLAN gives access to the same PLMN, an indication of
the I-WLAN identity should also be presented to the user. The HPLMN of the
user may provide on the USIM additional information about the available PLMNs,
if this is provided then the UE shall indicate that information that may be
displayed to the user. This information, provided as free text may include:
\- Preferred partner,
\- roaming agreement status,
\- supported services
Furthermore, the UE may indicate whether the available PLMNs are present on
one of the PLMN selector lists (e.g, User Controlled PLMN Selector list for
I-WLAN or Operator Controlled PLMN Selector list for I-WLAN) as well as not
being present on any of the lists.
NOTE: it is possible to have repetitions of the same PLMN in the list
presented to the user
3\. Upon user selection of the desired PLMN the WLAN UE shall attempt to
register on this PLMN. If more than one I-WLAN offers connection to the
selected PLMN, then the WLAN UE shall attempt registration via the selected
I-WLAN . To do so, the WLAN UE associates with the I-WLAN supporting the PLMN
selected by the user and attempt authentication.
**C) Steering of Roaming**
Steering to a specific I-WLAN PLMN
It shall be possible for the HPLMN at any time to direct the UE to search for
a specific PLMN connected by I-WLAN and, if it is available, move to that PLMN
as soon as possible unless the UE is in manual mode. This PLMN shall then be
regarded as the highest priority PLMN as defined by the operator. This process
shall be done transparently and without inconvenience to the user.
I-WLAN PLMN Redirection
It shall be possible for the HPLMN to request the UE to find and register on a
different PLMN connected by I-WLAN from the one it is currently using or
trying to register on if another PLMN is available. If the UE is in manual
mode the UE shall ignore this request. The original PLMN shall then be treated
as the lowest priority PLMN and would not be selected by the UE unless it is
the only one available to the UE or has been selected in manual mode.
This process shall be done transparently and without inconvenience to the
user.
### 6.1.2 Dual mode 3GPP / WLAN devices
The UE shall select between the available 3GPP systems and the WLANs by using
similar procedures as for Network Selection without WLAN Interworking.
NOTE 1: The 3GPP operator may have agreements with multiple WLANs in the area
and has preference over which WLAN to connect to based on the services
supported.
## 6.2 Operator Determined Barring
Access to services via an interworking WLAN is different in nature to circuit
and other 3GPP packet oriented services, and therefore has different
requirements for Operator Determined Barring.
As described in the following categories, the Service Provider may at any time
activate this feature and this shall terminate any relevant services in
progress, and bar future requests for service covered by the barring category:
\- It shall be possible to bar subscribers attached via an Interworking WLAN
completely from the interworked service capabilities.
\- It shall be possible to bar a subscriber from requesting interworking
through access points that are within the HPLMN whilst the subscriber is WLAN
connected via a VPLMN
\- It shall be possible to bar a subscriber from requesting packet-oriented
services from access points that are within the roamed to VPLMN.
\- It shall be possible to bar a subscriber from requesting direct Internet
access from access points that are within the I-WLAN
The term \'access point\' is used to indicate the Network Element (e.g. PDG or
GGSN) or part of the Network Element (e.g. PDG or GGSN) that is specified by a
particular APN.
## 6.3 Support of PS domain services
I-WLAN shall support all services based on 3GPP System PS domain capabilities
(e.g. IMS).
Support of real time IMS services will require QoS support in I-WLAN. If the
I-WLAN does not offer sufficient support for QoS, best effort approach may be
used.
When enabling access to 3GPP services that require separate authentication and
access control, such as IMS, the service authentication and access control
mechanisms for those services shall be used.
## 6.4 Support for service continuity
Service continuity between I-WLAN and 3GPP systems which allows ongoing 3GPP
PS based services to survive a change of the access network shall be provided.
A change in service quality may occur as a consequence of the transition
between systems due to the varying capabilities of the access technologies and
their associated networks. As the target network may not support an equivalent
service, it is possible that some services may not survive.
## 6.5 Support of LCS
The I-WLAN system shall be able to support LCS [6, 7].
# 7 Charging
The advent of I-WLAN may further enhance the ease of use for the mobile system
user and virtually extend the effective coverage areas of each system. It
shall be possible to charge the user for services offered by the interworking
between WLAN and 3GPP system in terms of access, usage, etc which is an
operator decision as to the level of interworking supported.
It shall be the role of the 3GPP system to process the I-WLAN access resource
usage information into 3GPP compatible format (e.g. CDR).
#